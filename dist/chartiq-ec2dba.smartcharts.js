(window.webpackJsonpsmartcharts=window.webpackJsonpsmartcharts||[]).push([[0],{375:function(e,t,i){"use strict";i.r(t),i.d(t,"CIQ",(function(){return Se.c})),i.d(t,"SplinePlotter",(function(){return Se.d})),i.d(t,"timezoneJS",(function(){return Se.e})),i.d(t,"$$",(function(){return Se.a})),i.d(t,"$$$",(function(){return Se.b})),i.d(t,"createEngine",(function(){return we.e})),i.d(t,"customCharts",(function(){return we.f})),i.d(t,"drawing",(function(){return we.g})),i.d(t,"easeMachine",(function(){return we.h})),i.d(t,"equations",(function(){return we.i})),i.d(t,"i18n",(function(){return we.j})),i.d(t,"interaction",(function(){return we.k})),i.d(t,"markers",(function(){return we.l})),i.d(t,"market",(function(){return we.m})),i.d(t,"movement",(function(){return we.p})),i.d(t,"nameValueStore",(function(){return we.q})),i.d(t,"quoteFeed",(function(){return we.s})),i.d(t,"series",(function(){return we.t})),i.d(t,"share",(function(){return we.u})),i.d(t,"span",(function(){return we.v})),i.d(t,"storage",(function(){return we.w})),i.d(t,"studies",(function(){return we.x})),i.d(t,"symbolLookupBase",(function(){return we.y})),i.d(t,"theme",(function(){return we.z})),i.d(t,"timezone",(function(){return we.A})),i.d(t,"touch",(function(){return we.C})),i.d(t,"visualization",(function(){return we.D})),i.d(t,"medianPrice",(function(){return we.n})),i.d(t,"momentum",(function(){return we.o})),i.d(t,"priceRelative",(function(){return we.r})),i.d(t,"vwap",(function(){return we.E})),i.d(t,"zigzag",(function(){return we.F})),i.d(t,"aggregations",(function(){return n})),i.d(t,"drawingAdvanced",(function(){return s})),i.d(t,"equationsAdvanced",(function(){return o})),i.d(t,"highPerformanceMarkers",(function(){return l})),i.d(t,"renderersAdvanced",(function(){return h})),i.d(t,"accumulationDistribution",(function(){return c})),i.d(t,"adx",(function(){return u})),i.d(t,"alligator",(function(){return d})),i.d(t,"aroon",(function(){return p})),i.d(t,"atr",(function(){return m})),i.d(t,"awesomeOscillator",(function(){return g})),i.d(t,"balanceOfPower",(function(){return f})),i.d(t,"bollinger",(function(){return y})),i.d(t,"cci",(function(){return v})),i.d(t,"centerOfGravity",(function(){return b})),i.d(t,"chaikin",(function(){return x})),i.d(t,"chande",(function(){return C})),i.d(t,"choppiness",(function(){return S})),i.d(t,"comparisonStudies",(function(){return w})),i.d(t,"coppock",(function(){return k})),i.d(t,"darvasBox",(function(){return D})),i.d(t,"detrended",(function(){return A})),i.d(t,"disparity",(function(){return T})),i.d(t,"easeOfMovement",(function(){return M})),i.d(t,"ehlerFisher",(function(){return _})),i.d(t,"elder",(function(){return F})),i.d(t,"fractalChaos",(function(){return P})),i.d(t,"highLowStudies",(function(){return L})),i.d(t,"ichimoku",(function(){return O})),i.d(t,"intradayMomentum",(function(){return E})),i.d(t,"keltner",(function(){return I})),i.d(t,"klinger",(function(){return N})),i.d(t,"linearRegression",(function(){return z})),i.d(t,"macd",(function(){return j})),i.d(t,"massIndex",(function(){return V})),i.d(t,"moneyFlow",(function(){return H})),i.d(t,"movingAverages",(function(){return B})),i.d(t,"parabolicSAR",(function(){return W})),i.d(t,"pivotPoints",(function(){return R})),i.d(t,"prettyGoodOscillator",(function(){return X})),i.d(t,"priceMomentumOscillator",(function(){return U})),i.d(t,"priceVolumeOscillator",(function(){return Y})),i.d(t,"primeNumber",(function(){return Q})),i.d(t,"pring",(function(){return q})),i.d(t,"projectedVolume",(function(){return Z})),i.d(t,"psychologicalLine",(function(){return G})),i.d(t,"qstick",(function(){return K})),i.d(t,"rainbow",(function(){return J})),i.d(t,"randomWalk",(function(){return ee})),i.d(t,"relativeVigor",(function(){return te})),i.d(t,"rsi",(function(){return ie})),i.d(t,"schaffTrendCycle",(function(){return ae})),i.d(t,"shinohara",(function(){return re})),i.d(t,"stochastics",(function(){return ne})),i.d(t,"supertrend",(function(){return se})),i.d(t,"swingIndex",(function(){return oe})),i.d(t,"trendIntensity",(function(){return le})),i.d(t,"trix",(function(){return he})),i.d(t,"twiggsMoneyFlow",(function(){return ce})),i.d(t,"typicalPrice",(function(){return ue})),i.d(t,"ulcerIndex",(function(){return de})),i.d(t,"ultimateOscillator",(function(){return pe})),i.d(t,"valuationLines",(function(){return me})),i.d(t,"volatilityIndex",(function(){return ge})),i.d(t,"volumeProfile",(function(){return fe})),i.d(t,"volumeStudies",(function(){return ye})),i.d(t,"vortex",(function(){return ve})),i.d(t,"williamsMFI",(function(){return be})),i.d(t,"extendedHours",(function(){return je})),i.d(t,"fullScreen",(function(){return Ve})),i.d(t,"inactivityTimer",(function(){return He})),i.d(t,"rangeSlider",(function(){return Be})),i.d(t,"shortcuts",(function(){return We})),i.d(t,"tableView",(function(){return Re})),i.d(t,"tooltip",(function(){return Xe})),i.d(t,"animation",(function(){return Ue})),i.d(t,"continuousZoom",(function(){return Ye})),i.d(t,"outliers",(function(){return Qe})),i.d(t,"plotComplementer",(function(){return qe}));var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,z,j,V,H,B,W,R,X,U,Y,Q,q,Z,G,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,be,xe,Ce,Se=i(376),we=i(377);function ke(e){return function(e){if(Array.isArray(e))return Te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||Ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return Te(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Te(e,t):void 0}}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(){}if(_e[356525]=function(){for(var e=2;9!==e;)switch(e){case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 9:delete t.M3xzI,delete Object.prototype.n$kDW,i=6;break;case 3:throw"";case 4:i="undefined"==typeof M3xzI?3:9;break;case 5:t.M3xzI=t,i=4;break;case 2:Object.defineProperty(Object.prototype,"n$kDW",{get:function(){for(;;)return this},configurable:!0}),t=n$kDW,i=5}}catch(e){t=window}return t;case 2:e="object"===("undefined"==typeof globalThis?"undefined":Me(globalThis))?1:5}}(),function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];t=1;break;case 1:return i[0][0].Function}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}for(var a=2;101!==a;)switch(a){case 78:n(s,"push",r[91],r[93]),a=104;break;case 53:r[55]="5gSW",r[70]="n",r[73]="gZj",r[87]="",a=49;break;case 44:r[92]="__ab",r[19]="",r[19]="esidual",r[85]="",r[85]="",r[85]="r",a=38;break;case 68:r[68]+=r[62],r[68]+=r[7],r[45]=r[8],r[45]+=r[79],a=89;break;case 85:r[96]=r[5],r[96]+=r[9],r[96]+=r[6],a=82;break;case 89:r[45]+=r[3],r[32]=r[4],r[32]+=r[2],r[32]+=r[1],a=85;break;case 80:n(l,"test",r[91],r[32]),a=79;break;case 103:n(i,r[48],r[99],r[84]),a=102;break;case 73:r[98]+=r[49],r[93]=r[94],r[93]+=r[47],r[93]+=r[18],r[68]=r[24],a=68;break;case 49:r[87]="v",r[13]="",r[13]="G3",r[91]=1,a=45;break;case 62:r[36]+=r[73],r[84]=r[70],r[84]+=r[55],r[84]+=r[26],a=58;break;case 79:n(i,r[45],r[99],r[68]),a=78;break;case 45:r[99]=1,r[99]=0,r[36]=r[13],r[36]+=r[87],a=62;break;case 31:r[58]="s",r[30]="1",r[63]="L9",r[49]="tract",a=44;break;case 77:r[35]+=r[30],r[35]+=r[67],r[98]=r[92],r[98]+=r[58],a=73;break;case 3:r[9]="",r[9]="",r[9]="2",r[1]="QW",r[2]="",r[2]="",a=13;break;case 81:n(h,"charCodeAt",r[91],r[96]),a=80;break;case 58:r[48]=r[95],r[48]+=r[85],r[48]+=r[19],r[35]=r[63],a=77;break;case 20:r[3]="e",r[5]="l",r[8]="",r[8]="__opti",a=16;break;case 38:r[26]="",r[95]="__",r[26]="o",r[70]="",a=53;break;case 104:n(i,r[98],r[99],r[35]),a=103;break;case 2:var r=[arguments];r[6]="",r[6]="",r[6]="vYd",a=3;break;case 21:r[94]="w0",r[62]="8it",r[67]="",r[67]="BQi",r[18]="PH",a=31;break;case 82:var n=function(e,t,i,a){for(var n=2;5!==n;)switch(n){case 2:var s=[arguments];o(r[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};a=81;break;case 25:r[24]="E",r[47]="",r[47]="F",r[94]="",a=21;break;case 13:r[2]="3u",r[4]="",r[4]="D",r[3]="",a=20;break;case 102:n(t,"apply",r[91],r[36]),a=101;break;case 16:r[7]="",r[7]="G",r[24]="",r[79]="miz",a=25}function s(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function o(e,t,i,a,r){for(var n=2;14!==n;)switch(n){case 3:l[5]="ePr",l[8]="defin",l[7]=!0,l[7]=!1;try{for(var s=2;13!==s;)switch(s){case 4:s=l[9].hasOwnProperty(l[0][4])&&l[9][l[0][4]]===l[9][l[0][2]]?3:9;break;case 9:l[9][l[0][4]]=l[9][l[0][2]],l[4].set=function(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];l[9][l[0][2]]=i[0][0],t=5}},l[4].get=function(){for(var e=2;13!==e;)switch(e){case 6:return t[5]+=t[1],Me(l[9][l[0][2]])==t[5]?void 0:l[9][l[0][2]];case 3:t[7]="",t[7]="un",t[5]=t[7],t[5]+=t[4],e=6;break;case 2:var t=[arguments];t[1]="",t[1]="ned",t[4]="defi",e=3}},s=6;break;case 6:l[4].enumerable=l[7];try{for(var o=2;3!==o;)switch(o){case 2:l[1]=l[8],l[1]+=l[5],o=5;break;case 5:l[1]+=l[2],l[0][0].Object[l[1]](l[9],l[0][4],l[4]),o=3}}catch(e){}s=13;break;case 2:l[4]={},l[3]=(0,l[0][1])(l[0][0]),l[9]=[l[3],l[3].prototype][l[0][3]],s=4;break;case 3:return}}catch(e){}n=14;break;case 2:var l=[arguments];l[5]="",l[2]="operty",l[5]="",n=3}}function l(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}function h(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}}(_e[356525]),_e.X$L=function(){return"function"==typeof _e[459327].Z7m4YCh?_e[459327].Z7m4YCh.apply(_e[459327],arguments):_e[459327].Z7m4YCh},_e.O90=function(){return"function"==typeof _e[459327].Z7m4YCh?_e[459327].Z7m4YCh.apply(_e[459327],arguments):_e[459327].Z7m4YCh},_e.i7j=function(){return"function"==typeof _e[50848].w4xZ2A7?_e[50848].w4xZ2A7.apply(_e[50848],arguments):_e[50848].w4xZ2A7},_e.D8z=function(){return"function"==typeof _e[459327].q52sdNp?_e[459327].q52sdNp.apply(_e[459327],arguments):_e[459327].q52sdNp},_e[106140]=646,_e[220353]=446,_e[150036]=function(){for(var e=2;9!==e;)switch(e){case 3:return t[3];case 2:var t=[arguments];t[6]=void 0,t[3]={},t[3].V3nM4Cy=function(){for(var e=2;90!==e;)switch(e){case 37:i[88].k0W=function(){return!/\u0030\u0078\u0036\u0031/.D3uQW(function(){return String.fromCharCode(97)}+[])},i[79]=i[88],i[6].w0FPH(i[5]),e=53;break;case 68:e=68;break;case 4:i[6]=[],i[8]={},i[8].d9n=["E9g"],i[8].k0W=function(){return!/\u0061/.D3uQW(function(){return"ab".charAt(1)}+[])},i[1]=i[8],i[9]={},i[9].d9n=["E9g"],e=13;break;case 76:e=i[33]<i[61][i[22]].length?75:70;break;case 67:return t[6]=25,79;case 50:i[6].w0FPH(i[70]),i[6].w0FPH(i[95]),i[6].w0FPH(i[7]),i[6].w0FPH(i[79]),e=46;break;case 46:i[6].w0FPH(i[42]),i[6].w0FPH(i[2]),i[38]=[],i[89]="q$_",i[80]="V5h",e=62;break;case 53:i[6].w0FPH(i[58]),i[6].w0FPH(i[21]),i[6].w0FPH(i[1]),e=50;break;case 30:i[82]={},i[82].d9n=["F8k"],i[82].k0W=function(){return"function"==typeof L91BQi},i[70]=i[82],i[90]={},i[90].d9n=["F8k"],i[90].k0W=function(){return"function"==typeof n5gSWo},e=40;break;case 5:return 28;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 4:a[5]={},a[8]=[],a[2]=0,t=8;break;case 20:a[5][a[3][i[19]]].h+=!0,t=19;break;case 5:return;case 14:t=void 0===a[5][a[3][i[19]]]?13:11;break;case 19:a[2]++,t=7;break;case 1:t=0===a[0][0].length?5:4;break;case 25:a[7]=!0,t=24;break;case 17:a[2]=0,t=16;break;case 15:a[6]=a[8][a[2]],a[9]=a[5][a[6]].h/a[5][a[6]].t,t=26;break;case 18:a[7]=!1,t=17;break;case 13:a[5][a[3][i[19]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[7]={},t[7].h=0,t[7].t=0,t[7]}}.G3vgZj(this,arguments),t=12;break;case 23:return a[7];case 6:a[3]=a[0][0][a[2]],t=14;break;case 2:var a=[arguments];t=1;break;case 8:a[2]=0,t=7;break;case 24:a[2]++,t=16;break;case 12:a[8].w0FPH(a[3][i[19]]),t=11;break;case 11:a[5][a[3][i[19]]].t+=!0,t=10;break;case 26:t=a[9]>=.5?25:24;break;case 10:t=a[3][i[47]]===i[89]?20:19;break;case 7:t=a[2]<a[0][0].length?6:18;break;case 16:t=a[2]<a[8].length?15:23}}(i[38])?68:67;break;case 57:e=i[40]<i[6].length?56:69;break;case 1:e=t[6]?5:4;break;case 58:i[40]=0,e=57;break;case 56:i[61]=i[6][i[40]];try{i[44]=i[61][i[59]]()?i[89]:i[80]}catch(e){i[44]=i[80]}e=77;break;case 32:i[41].k0W=function(){var e=!1,t=[];try{for(var i in console)t.w0FPH(i);e=0===t.length}catch(e){}return e},i[95]=i[41],e=30;break;case 17:i[3].d9n=["E9g"],i[3].k0W=function(){return/\x39\x37/.D3uQW(function(){return"aa".charCodeAt(1)}+[])},i[7]=i[3],i[66]={},i[66].d9n=["E9g"],i[66].k0W=function(){return/\u003d/.D3uQW(function(){return unescape("%3D")}+[])},e=24;break;case 71:i[33]++,e=76;break;case 75:i[11]={},i[11][i[19]]=i[61][i[22]][i[33]],i[11][i[47]]=i[44],i[38].w0FPH(i[11]),e=71;break;case 24:i[58]=i[66],i[27]={},i[27].d9n=["E9g"],i[27].k0W=function(){return!/['"]/.D3uQW(function(){return"c".indexOf("c")}+[])},i[42]=i[27],i[41]={},i[41].d9n=["F8k"],e=32;break;case 77:i[33]=0,e=76;break;case 59:i[19]="B0P",e=58;break;case 40:i[21]=i[90],i[88]={},i[88].d9n=["E9g"],e=37;break;case 2:var i=[arguments];e=1;break;case 13:i[9].k0W=function(){return!/\u0079/.D3uQW(function(){return"x y".slice(0,1)}+[])},i[5]=i[9],i[4]={},i[4].d9n=["F8k"],i[4].k0W=function(){return"function"==typeof E8itG},i[2]=i[4],i[3]={},e=17;break;case 70:i[40]++,e=57;break;case 62:i[22]="d9n",i[47]="X_r",i[59]="k0W",e=59}},e=3}}(),_e.Z_e=function(){return"function"==typeof _e[150036].V3nM4Cy?_e[150036].V3nM4Cy.apply(_e[150036],arguments):_e[150036].V3nM4Cy},_e[356525].J3KK=_e,_e.l9L=function(){return"function"==typeof _e[50848].w4xZ2A7?_e[50848].w4xZ2A7.apply(_e[50848],arguments):_e[50848].w4xZ2A7},_e[345871]=_e[50848],_e.t1w=function(){return"function"==typeof _e[459327].q52sdNp?_e[459327].q52sdNp.apply(_e[459327],arguments):_e[459327].q52sdNp},_e[459327]={q52sdNp:function(){var e,t=arguments;switch(a){case 71:e=(t[3]-t[0])/(t[2]-t[1]);break;case 99:e=-(t[0]-t[3])*t[2]+t[1];break;case 60:e=-t[2]*t[1]+t[0];break;case 135:e=-t[1]-t[0]+t[2]+t[3];break;case 186:e=t[3]+t[1]/t[0]+t[2];break;case 32:e=t[0]/t[2]*t[1]+t[3];break;case 188:e=t[0]+(t[5]/t[2]-t[4]/(t[3]*t[1]));break;case 49:e=(t[2]-t[3])/t[0]+t[1];break;case 26:e=t[2]-t[1]*t[0];break;case 122:e=(-t[1]+t[0])/t[3]-t[2];break;case 133:e=t[3]*t[4]*t[0]/t[2]+t[1];break;case 165:e=(t[2]+t[3]+t[1])/t[4]+t[0];break;case 31:e=t[3]*t[2]-t[0]-t[1];break;case 94:e=t[2]*t[1]+t[0];break;case 96:e=-t[0]*t[3]*t[1]+t[2];break;case 139:e=-t[0]-t[2]+t[1];break;case 121:e=t[0]+(t[2]<<t[1]);break;case 97:e=t[2]+t[1]*t[0];break;case 169:e=t[1]>t[0];break;case 155:e=(t[3]+t[4])/t[0]*t[2]-t[1];break;case 162:e=(t[0]+t[1])/t[2]+t[3];break;case 78:e=t[0]+ +t[1];break;case 102:e=(t[2]-t[0]-t[3])/t[1]+t[4];break;case 18:e=t[0]>>t[1];break;case 151:e=-t[3]-t[0]+t[1]-t[2]+t[4];break;case 152:e=-t[4]+t[1]+t[0]+t[3]-t[2];break;case 131:e=(t[3]*t[0]-t[1])/t[2]-t[4];break;case 173:e=+t[3]*(t[1]-t[2]%t[0]);break;case 30:e=t[1]-(t[0]|t[2]);break;case 56:e=t[0]*t[3]*t[2]-t[1];break;case 55:e=-t[1]+t[2]+t[0];break;case 88:e=t[1]-t[3]*(t[0]-t[2]);break;case 175:e=t[3]-t[1]+(t[0]|t[2]);break;case 111:e=t[0]-t[3]-(t[1]-t[2]);break;case 85:e=t[0]/+t[1];break;case 184:e=t[3]+t[2]*t[0]+t[1];break;case 47:e=(t[2]+t[1])/(t[3]^t[0]);break;case 61:e=-t[0]+t[3]+t[2]-t[1];break;case 138:e=(t[0]-t[4]+t[3])/t[1]-t[2];break;case 48:e=(t[0]+t[1])/+t[2];break;case 75:e=+t[1]/t[0];break;case 79:e=t[4]*t[2]+t[3]+t[1]-t[0];break;case 27:e=-t[0]/t[3]+t[1]-t[2];break;case 72:e=(t[0]-t[2])/t[3]-t[1];break;case 101:e=t[2]+(t[6]-t[4])/(t[5]-t[0])*(t[3]-t[1]);break;case 171:e=(t[3]*t[1]+t[2])/t[0]+t[4];break;case 161:e=(t[0]-t[3])*t[4]-t[2]+t[1];break;case 0:e=t[0]|t[1];break;case 98:e=(t[0]+t[2])/(t[1]|t[3]);break;case 87:e=t[1]+(t[3]-t[2])/t[0];break;case 23:e=t[1]/t[0];break;case 82:e=t[1]-t[3]-t[0]-t[2];break;case 20:e=t[1]/t[2]+t[0]-t[3];break;case 28:e=t[1]/t[0]+t[2]+t[3];break;case 147:e=(t[4]+t[3])*t[1]/t[0]-t[2];break;case 39:e=(t[2]+t[3])*t[4]-t[1]-t[0];break;case 100:e=(t[2]+t[3])/t[4]/t[0]+t[1];break;case 1:e=t[0]+t[1];break;case 160:e=-t[3]-t[4]+t[0]+t[2]+t[1];break;case 140:e=-t[2]*t[0]+t[1]+t[3];break;case 114:e=-t[1]*t[2]/t[0]+t[3]+t[4];break;case 95:e=t[0]+t[2]+t[1];break;case 53:e=t[2]+t[1]/t[0];break;case 83:e=(t[2]+t[0]+t[4])*t[1]-t[3];break;case 183:e=t[2]-t[1]*t[3]-t[0];break;case 176:e=t[1]*t[3]/t[0]-t[2];break;case 13:e=(t[0]/t[3]+t[2])*t[4]-t[1];break;case 76:e=(t[1]-t[2])*(t[5]-t[0])/(t[6]-t[4])+t[3];break;case 166:e=(-t[0]+t[2])*t[3]+t[4]+t[1];break;case 103:e=(t[2]*t[3]+t[1])/t[0];break;case 17:e=(t[3]*t[4]+t[0])*t[2]-t[1];break;case 164:e=t[3]/t[4]*t[1]*t[0]-t[2];break;case 19:e=(t[0]+t[3]-t[2])*t[1]+t[4];break;case 104:e=(t[3]*t[1]+t[2])/+t[0];break;case 33:e=t[0]-(t[2]-t[1]);break;case 156:e=t[3]*(t[2]/t[0]-t[1]);break;case 105:e=(t[2]+t[1]*t[0])/+t[3];break;case 67:e=(t[2]+t[1])*t[3]-t[0];break;case 74:e=-t[3]-t[1]-t[0]+t[2];break;case 73:e=-t[1]*t[4]+t[2]-t[3]+t[0];break;case 10:e=t[0]-t[3]+t[1]+t[2];break;case 70:e=t[0]<t[1];break;case 182:e=-t[3]*t[2]-t[1]+t[0];break;case 134:e=t[3]+t[1]+t[4]+t[2]+t[0];break;case 116:e=t[1]-t[0]+t[3]-t[2]+t[4];break;case 159:e=(-t[1]+t[3])/t[4]+t[2]-t[0];break;case 54:e=t[2]-t[1]/+t[0];break;case 129:e=(t[0]-t[1])*t[3]*t[2]-t[4];break;case 63:e=t[0]*t[1]*t[4]+t[3]-t[2];break;case 6:e=t[1]+t[2]-t[0]-t[3];break;case 91:e=t[4]*(t[2]*t[1]+t[3])/t[0];break;case 93:e=(t[0]-t[2]*t[1])/t[3];break;case 90:e=t[2]*(t[4]+(t[3]-t[0]))/t[1];break;case 158:e=(t[1]-t[4])*t[0]+t[2]-t[3];break;case 81:e=t[2]+t[1]+t[3]-t[0];break;case 168:e=t[1]/(t[0]*t[3])<=t[2];break;case 36:e=t[2]*t[0]-t[4]+t[3]-t[1];break;case 137:e=(t[4]-t[1])/t[2]/t[0]+t[3];break;case 37:e=(-t[0]-t[2])/t[1]+t[3];break;case 130:e=(t[1]+t[0])*t[4]+t[3]-t[2];break;case 57:e=t[0]/t[1]-t[2];break;case 66:e=t[2]*t[0]/t[3]+t[1];break;case 146:e=(t[2]<<t[4])*t[3]/(t[1]+t[0]);break;case 86:e=(t[2]<<t[1])/t[0];break;case 52:e=t[2]-t[1]/t[0];break;case 38:e=t[2]*t[0]-t[1];break;case 22:e=t[1]+t[0]+t[2]+t[3]-t[4];break;case 16:e=(t[3]+t[2]+t[4]+t[1])/+t[0];break;case 62:e=(t[4]/t[0]+t[1])/t[3]-t[2];break;case 8:e=t[1]*t[0];break;case 150:e=t[2]*t[1]*t[0];break;case 65:e=(t[2]-t[0])*t[3]-t[1];break;case 69:e=(t[3]<<t[0])*t[2]-t[1];break;case 118:e=+t[2]*t[1]/t[0];break;case 144:e=t[4]*t[3]*t[2]/t[0]-t[1];break;case 21:e=(t[2]+t[0]-t[4])*t[1]-t[3];break;case 167:e=(t[2]%t[3]+t[0])*t[1];break;case 157:e=t[3]+t[0]*(t[1]-t[2]);break;case 109:e=t[6]+t[3]+t[4]+t[2]+t[5]+t[0]+t[7]+t[1];break;case 15:e=(t[0]+t[2])/t[3]-t[1];break;case 123:e=(t[2]+t[0])*t[1];break;case 3:e=t[1]^t[0];break;case 51:e=(-t[3]*t[2]+t[4])/t[1]+t[0];break;case 84:e=(t[1]-t[0])/+t[2];break;case 44:e=t[4]*t[0]/t[1]-t[2]+t[3];break;case 59:e=(t[1]-t[0])/(t[4]-t[3])>t[2];break;case 149:e=(t[0]-t[1])*t[3]*t[4]+t[2];break;case 5:e=t[0]+t[2]-t[1];break;case 170:e=t[2]*(t[1]+ +t[0]);break;case 89:e=t[0]-+t[1];break;case 14:e=-t[2]+t[1]-t[0];break;case 115:e=t[2]*t[0]+t[1]-t[3];break;case 24:e=(-t[4]*t[3]-t[0])/t[1]+t[2];break;case 113:e=t[2]+t[1]+t[0]+t[3];break;case 34:e=(t[1]-t[2])/t[0];break;case 136:e=(-t[3]-t[0])/t[1]-t[2];break;case 25:e=t[0]+ +t[1]*t[2];break;case 181:e=t[3]*t[2]-t[0]-t[1]-t[4];break;case 148:e=t[1]/t[0]/t[4]+t[3]-t[2];break;case 125:e=(t[1]+t[3]+t[0])/t[4]-t[2];break;case 7:e=t[1]-t[0];break;case 50:e=-t[0]+t[1];break;case 187:e=t[0]*t[2]/(t[1]+t[3]);break;case 124:e=(-t[4]+t[1])/t[3]/t[2]+t[0];break;case 172:e=t[3]*t[2]-t[1]/(t[0]+t[4]);break;case 178:e=t[0]*-t[1];break;case 43:e=(t[2]-t[1])*t[3]+t[0];break;case 143:e=(t[1]-t[4]+t[0])/t[2]+t[3];break;case 12:e=t[2]/(t[1]*t[0]);break;case 110:e=t[0]*(t[2]>>t[1]);break;case 40:e=t[0]-t[2]-t[1];break;case 35:e=t[1]<<t[0];break;case 145:e=t[3]-t[1]-t[2]+t[0]+t[4];break;case 58:e=t[2]+t[1]+t[0]-t[3]-t[4];break;case 117:e=-t[2]/t[0]+t[1];break;case 107:e=t[2]-(t[1]>>t[0]);break;case 77:e=t[0]/t[1]+t[2];break;case 119:e=t[0]*t[2]/t[1];break;case 64:e=t[0]*t[4]/t[3]*t[1]+t[2];break;case 108:e=t[2]-(t[1]^t[0]);break;case 112:e=(t[1]-(t[2]+ +t[0]))/t[3];break;case 163:e=(t[1]+t[0])*t[2]*t[3]-t[4];break;case 46:e=t[1]+(t[2]-t[0]);break;case 29:e=t[1]%t[0];break;case 42:e=t[4]+t[0]-t[2]-t[3]+t[1];break;case 41:e=t[1]/t[0]*t[3]-t[2];break;case 185:e=t[0]==t[1];break;case 132:e=t[2]/t[0]-+t[1];break;case 179:e=t[1]*-(t[2]<<t[0]);break;case 141:e=-t[0]-t[1];break;case 174:e=t[2]/t[0]*t[4]/t[3]+t[1];break;case 154:e=(-t[3]+t[4])*t[1]*t[2]+t[0];break;case 120:e=t[0]/t[3]/t[1]+t[2];break;case 80:e=t[1]/t[3]/t[4]/t[2]+t[0];break;case 4:e=(t[2]+t[0])/t[1];break;case 106:e=(t[2]+t[3]*t[4])/(t[1]-t[0]);break;case 45:e=t[0]*t[1]<t[2];break;case 11:e=(t[2]-t[4]+t[0])*t[3]-t[1];break;case 92:e=(t[3]*t[5]-t[4]*t[1])/(t[6]*t[0]-t[2]);break;case 153:e=t[4]-t[2]/(t[3]+t[0]/t[1]);break;case 177:e=t[2]/t[1]-t[0]+t[3]+t[4];break;case 126:e=t[0]/t[2]-t[1]+t[3];break;case 180:e=+t[0]-t[1]/(t[3]+t[4]/t[2]);break;case 142:e=t[3]+t[0]-t[1]+t[2];break;case 9:e=t[2]-t[1]+t[0];break;case 68:e=t[2]-t[0]-t[1]+t[3];break;case 127:e=t[6]*t[1]*t[3]+(t[2]-t[0]*t[5])*t[4];break;case 128:e=t[3]-t[2]+t[1]-t[0];break;case 2:e=t[2]/t[1]/t[3]-t[0]}return e},Z7m4YCh:function(e){a=e}},_e[247674]=_e[459327],_e[158192]=_e[50848],_e[50848]=(r=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{w4xZ2A7:function(e,t,i){for(var a=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.l2vYd(s)|(255&e.l2vYd(s+1))<<8|(255&e.l2vYd(s+2))<<16|(255&e.l2vYd(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.l2vYd(n+2))<<16;case 2:o|=(255&e.l2vYd(n+1))<<8;case 1:o|=255&e.l2vYd(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=t,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),_e.c7b=function(){return"function"==typeof _e[150036].V3nM4Cy?_e[150036].V3nM4Cy.apply(_e[150036],arguments):_e[150036].V3nM4Cy},n=function(e){var t,i=_e;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ,i.Z_e(),t.Renderer.Aggregations=function(e){var t;this.construct(e),t=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,i.c7b(),this.isAggregation=!0,t.highlightable=!1,"_main_series"!=t.name&&("Aggreg","ations are onl","y allowed on main series.",console.warn("Aggregations are only allowed on main series."),t.invalid=!0)},t.inheritsFrom(t.Renderer.Aggregations,t.Renderer.OHLC,!1),t.Renderer.Aggregations.requestNew=function(e,a){var r,n,s;r=null;for(var o=0;o<e.length;o++)switch("r","en","ko","k","a","g","i",n=e[o]){case"kagi":case"pandf":r=n;break;case"heikinashi":case"linebreak":case"rangebars":case"renko":r="candle";break;default:return null}return null===r?null:(s=new t.Renderer["candle"==r?"OHLC":"Aggregations"]({params:t.extend(a,{type:r})}),i.Z_e(),s.isAggregation=!0,s)},t.Renderer.Aggregations.prototype.drawIndividualSeries=function(e,t){var a,r;if(i.c7b(),!t.invalid)return a=this.stx,r={colors:[]},"kagi"==t.type?("stx_kag","i_u","p",a.drawKagiSquareWave(e.panel,"stx_kagi_up","stx_kagi_down",t),r.colors.push(a.getCanvasColor("stx_kagi_up")),r.colors.push(a.getCanvasColor("stx_kagi_down"))):"pandf"==t.type&&("stx","_pa","nd","f_down","stx_pan","df_up",a.drawPointFigureChart(e.panel,"stx_pandf_up","X",t),r.colors.push(a.getCanvasColor("stx_pandf_up")),a.drawPointFigureChart(e.panel,"stx_pandf_down","O",t),r.colors.push(a.getCanvasColor("stx_pandf_down"))),r},t.ChartEngine.prototype.setAggregationType=function(e){var a;this.layout.chartType="candle",i.c7b(),!1!==(a=this.chart).baseline.userLevel&&(a.baseline.userLevel=a.baseline.defaultLevel,a.panel.yAxis.scroll=t.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=e,this.setMainSeriesRenderer(),a.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.drawKagiSquareWave=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D;s=e.chart,this.startClip(e.name),o=s.dataSegment,l=s.context,(h=e.yAxis).flipped&&(c=a,a=r,r=c),u=this.canvasStyle(a),d=this.canvasStyle(r),this.canvasColor(a),n.border_color_up&&(l.strokeStyle=n.border_color_up),p=l.strokeStyle,this.canvasColor(r),n.border_color_down&&(l.strokeStyle=n.border_color_down),m=l.strokeStyle,g=1,u.width&&parseInt(u.width,10)<=25&&(g=Math.max(1,t.stripPX(u.width))),f=1,d.width&&parseInt(d.width,10)<=25&&(i.X$L(0),f=Math.max(i.D8z("1",0),t.stripPX(d.width))),this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath(),i.X$L(1);var A=i.t1w(0,1);y=s.dataSet.length-s.scroll-A,v=!0,i.Z_e(),b=null,x=null,i.X$L(2);var T=i.t1w(1,7,14,1);C=e.left-.5*this.layout.candleWidth+this.micropixels-T;for(var M=0;M<=o.length;M++)if(C+=this.layout.candleWidth,S=o[M]){if(S.projection)break;x=S.kagiTrend,h.flipped&&(i.X$L(3),x*=-i.D8z(0,"1")),S.transform&&s.transformFunc&&(w=S.kagiPrevOpen,(S=S.transform).kagiPrevOpen=s.transformFunc(this,s,w)),k=S.cache,i.O90(1),((D=i.t1w(y,M))<e.cacheLeft||D>e.cacheRight||!k.kagiOpen)&&(k.kagiOpen=h.semiLog?h.height*(1-(Math.log(Math.max(S.Open,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-S.Open)*h.multiplier,k.kagiClose=h.semiLog?h.height*(1-(Math.log(Math.max(S.Close,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-S.Close)*h.multiplier,h.flipped?(k.kagiOpen=h.bottom-k.kagiOpen,k.kagiClose=h.bottom-k.kagiClose):(k.kagiOpen+=h.top,k.kagiClose+=h.top)),k.kagiClose,b=h.semiLog?h.height*(1-(Math.log(Math.max(S.kagiPrevOpen,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-S.kagiPrevOpen)*h.multiplier,h.flipped?b=h.bottom-b:b+=h.top,v?(l.moveTo(y>=0?e.left:Math.floor(C),k.kagiOpen),l.lineTo(Math.floor(C),k.kagiOpen),k.kagiClose<k.kagiOpen?(l.strokeStyle=p,l.lineWidth=g):(l.strokeStyle=m,l.lineWidth=f)):-1!=x&&k.kagiClose<b&&b<k.kagiOpen?(l.lineTo(Math.floor(C),b),l.stroke(),l.beginPath(),l.moveTo(Math.floor(C),b),l.strokeStyle=p,l.lineWidth=g):1!=x&&k.kagiClose>b&&b>k.kagiOpen&&(l.lineTo(Math.floor(C),b),l.stroke(),l.beginPath(),l.moveTo(Math.floor(C),b),l.strokeStyle=m,l.lineWidth=f),l.lineTo(Math.floor(C),k.kagiClose),M+1<o.length&&l.lineTo(Math.floor(C+this.layout.candleWidth),k.kagiClose),v=!1}l.stroke(),this.endClip(),l.lineWidth=1},t.ChartEngine.prototype.drawPointFigureChart=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L;function O(e,t,a){i.O90(4),l.moveTo(i.t1w(t,2,e),i.D8z(a,C,c,i.X$L(5))),i.X$L(1),l.bezierCurveTo(i.t1w(t,p),i.D8z(a,C,c,i.O90(5)),i.D8z(t,p,i.X$L(1)),i.t1w(u,a,b,C,i.X$L(6)),i.D8z(t,2,e,i.X$L(4)),i.t1w(u,a,b,C,i.X$L(6))),i.O90(7),l.bezierCurveTo(i.D8z(d,e),i.D8z(u,a,b,C,i.X$L(6)),i.t1w(d,e,i.O90(7)),i.D8z(a,C,c,i.O90(5)),i.t1w(t,2,e,i.O90(4)),i.t1w(a,C,c,i.O90(5)))}function E(e,t,a){i.O90(1),l.moveTo(i.t1w(e,d),i.t1w(C,u,a,i.X$L(9))),i.O90(7),l.lineTo(i.t1w(p,t),i.D8z(a,c,C,b,i.O90(10))),i.c7b(),i.O90(1),l.moveTo(i.t1w(e,d),i.D8z(a,c,C,b,i.X$L(10))),i.X$L(7),l.lineTo(i.D8z(p,t),i.D8z(C,u,a,i.O90(9)))}s=e.chart,this.startClip(e.name),o=s.dataSegment,l=s.context,this.canvasColor(a),"X"==r&&n.border_color_up?l.strokeStyle=n.border_color_up:"O"==r&&n.border_color_down&&(l.strokeStyle=n.border_color_down),i.Z_e(),h=this.canvasStyle(a),c=parseInt(h.paddingTop,10),u=parseInt(h.paddingBottom,10),d=parseInt(h.paddingLeft,10),p=parseInt(h.paddingRight,10),h.width&&parseInt(h.width,10)<=25?l.lineWidth=Math.max(1,t.stripPX(h.width)):(i.O90(8),l.lineWidth=i.t1w(1,"2")),this.highlightedDraggable&&(i.O90(8),l.globalAlpha*=i.D8z(1,"0.3")),l.beginPath(),m=this.chart.state.aggregation.box,i.X$L(11);var I=i.t1w(13,17,0,3,7);g=s.dataSet.length-s.scroll-I,f=e.yAxis,b=m*f.multiplier,x=2;for(var N=1;-887854674!==i.l9L(N.toString(),N.toString().length,25050);N++)i.X$L(12),C=i.t1w(1,"2",b),S=this.layout.candleWidth,x+=2;-1032168033!==i.i7j(x.toString(),x.toString().length,323)&&(i.X$L(1),C=i.D8z(b,6),S=this.layout.candleWidth),i.X$L(13);var $=i.t1w(21,111,5,7,14);w=e.left-S+this.micropixels-$;for(var z=0;z<o.length;z++)if(w+=S,k=o[z]){if(k.projection)break;if(D=k.pfOpen,A=k.pfClose,T=k.pfTrend,M=k.pfStepBack,k.transform&&s.transformFunc&&(k=k.transform,D=s.transformFunc(this,s,D),A=s.transformFunc(this,s,A)),_=k.cache,i.O90(1),((F=i.D8z(g,z))<e.cacheLeft||F>e.cacheRight||!_.pfOpen)&&(f.flipped?(_.pfOpen=f.bottom-(f.high-D)*f.multiplier,_.pfClose=f.bottom-(f.high-A)*f.multiplier):(_.pfOpen=(f.high-D)*f.multiplier+f.top,_.pfClose=(f.high-A)*f.multiplier+f.top)),P=Math.round(w),i.O90(1),L=Math.round(i.D8z(w,S)),y=Math.abs(Math.round((A-D)/m)),v=_.pfOpen,r==M&&("X"==M?(i.O90(7),E(P,L,i.t1w(b,v))):"O"==M&&(i.X$L(1),O(P,L,i.t1w(v,b)))),r==T)for(;y>=0;y--)"X"==r?(E(P,L,v),v-=f.flipped?-b:b):"O"==r&&(O(P,L,v),v+=f.flipped?-b:b)}l.stroke(),this.endClip(),l.lineWidth=1},t.ChartEngine.calculateAggregation=function(e,i,a,r){var n,s,o;return"k","a","g","i",n="heikin",n+="ashi",o=e.layout,[n,"heikenashi"].indexOf(i)>-1?s=t.calculateHeikinAshi(e,a,r):"rangebars"==i?s=t.calculateRangeBars(e,a,o.rangebars,r):"kagi"==i?s=t.calculateKagi(e,a,o.kagi,r):"linebreak"==i?s=t.calculateLineBreak(e,a,o.priceLines,r):"renko"==i?s=t.calculateRenkoBars(e,a,o.renko,r):"pandf"==i&&(s=t.calculatePointFigure(e,a,o.pandf,r)),s},t.calculateHeikinAshi=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,m;if(i.c7b(),!t.length)return t;a||(a=[]),r=[];for(var g=0;g<t.length;g++)if(n=t[g]){i.O90(14);var f=i.D8z(3,17,13);if(!(s=r[r.length-f])&&!g){i.X$L(15);var y=i.t1w(0,0,14,14);s=a[a.length-y]}s||(s=n),o=n.Close,l=(l=n.Open)||0===l?l:o,h=(h=n.High)||0===h?h:o,c=(c=n.Low)||0===c?c:o,u=(u=s.Open)||0===u?u:s.Close,i.X$L(9);var v=i.t1w(5,7,4);for(var b in d=(u+s.Close)/v,i.X$L(16),p=i.D8z("4",o,h,l,c),m={DT:n.DT,displayDate:n.displayDate,Date:n.Date,Open:d,Close:p,High:Math.max(h,Math.max(d,p)),Low:Math.min(c,Math.min(d,p)),Volume:n.Volume,iqPrevClose:s.Close},n)m[b]||0===m[b]||(m[b]=n[b]);r.push(m)}return r},t.calculateKagi=function(e,a,r,n){var s,o,l,h,c,u,d,p;if(!a.length)return a;n||(n=[]),s=e.layout,o=e.chart,r=parseFloat(r),o.defaultChartStyleConfig.kagi=t.ChartEngine.isDailyInterval(s.interval)?4:.4,(isNaN(r)||r<=0)&&(r=o.defaultChartStyleConfig.kagi,t.Market.Symbology.isForexSymbol(o.symbol)&&(r/=4),null!==s.kagi&&("lay","ou","t",s.kagi=null,e.changeOccurred("layout"))),r/=100,l=[],i.O90(17);var m=i.D8z(17,295,4,19,3);c=(h=n[n.length-m])?h.DT:0;for(var g=0;g<a.length;g++)if((u=a[g])&&(h||(i.O90(7),h=a[i.D8z(1,g)]),h)){if((d=h.Open||0===h.Open?h.Open:h.Close)>h.Close){if(u.Close>h.Close*(1+r))u.Open=h.Close;else if(h.Close>u.Close&&(h.Close=u.Close),h.Volume+=u.Volume,g<a.length-1)continue}else if(d<h.Close){if(u.Close<h.Close*(1-r))u.Open=h.Close;else if(h.Close<u.Close&&(h.Close=u.Close),h.Volume+=u.Volume,g<a.length-1)continue}else if(h.Close=u.Close,h.Volume+=u.Volume,g<a.length-1)continue;for(var f in p={DT:h.DT,displayDate:h.displayDate,Date:h.Date,Open:h.Open,Close:h.Close,High:Math.max(h.Open,h.Close),Low:Math.min(h.Open,h.Close),Volume:h.Volume,iqPrevClose:h.iqPrevClose},h)p[f]||0===p[f]||(p[f]=h[f]);l.length?p.kagiPrevOpen=l[l.length-1].Open:p.kagiPrevOpen=p.Open,p.Close>p.kagiPrevOpen&&p.kagiPrevOpen>p.Open?(i.X$L(8),p.kagiTrend=i.t1w(1,"1")):p.Close<p.kagiPrevOpen&&p.kagiPrevOpen<p.Open&&(i.X$L(18),p.kagiTrend=-i.t1w("1",32)),c<p.DT&&l.push(p),h=u,o.currentQuote={Close:u.Close}}for(var y=1;1266303773!==i.l9L(y.toString(),y.toString().length,40891);y++)return l;return i.l9L(2..toString(),2..toString().length,7460),l},t.calculateLineBreak=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(i.Z_e(),!t.length)return t;r||(r=[]),n=e.layout,(s=e.chart).defaultChartStyleConfig.priceLines=3,a=parseInt(a,10),isNaN(a)||a<=0?(a=s.defaultChartStyleConfig.priceLines,null!==n.priceLines&&(n.priceLines=null,e.changeOccurred("layout"))):a>10&&(n.priceLines=a=10),l=(o=r.slice(-a)).length,h=0;e:for(var b=0;b<t.length;b++)if(c=t[b]){h+=c.Volume,i.X$L(19);var x=i.D8z(3,12,15,11,13);if((u=o[o.length-x])||(u={Open:c.Open,Close:c.Open,High:c.Open,Low:c.Open}),d=u.Close,p=(p=u.High)||0===p?p:d,m=(m=u.Low)||0===m?m:d,g=(g=u.Open)||0===g?g:d,f={DT:c.DT,displayDate:c.displayDate,Date:c.Date,Close:c.Close,Volume:h,iqPrevClose:d},s.currentQuote={Close:c.Close},c.Close>d&&u.Close>g);else if(c.Close<d&&u.Close<g);else if(c.Close>p){for(y=2;y<=a;y++)if((v=o[o.length-y])&&c.Close<=v.High)continue e}else{if(!(c.Close<m))continue;for(y=2;y<=a;y++)if((v=o[o.length-y])&&c.Close>=v.Low)continue e}for(var C in c.Close<u.Close?f.Open=Math.min(g,d):f.Open=Math.max(g,d),f.Low=Math.min(f.Open,f.Close),f.High=Math.max(f.Open,f.Close),c)f[C]||0===f[C]||(f[C]=c[C]);o.push(f),i.O90(7),h=i.D8z(0,"0")}return o.slice(l)},t.calculateRenkoBars=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b;function x(e,t){var a;for(var r in e=Number(e.toFixed(8)),t=Number(t.toFixed(8)),a={DT:m.DT,displayDate:m.displayDate,Date:m.Date,Open:e,Close:t,High:Math.max(e,t),Low:Math.min(e,t),Volume:0,iqPrevClose:e!=t?e:null},i.Z_e(),m)a[r]||0===a[r]||(a[r]=m[r]);u.push(a)}if("Hi","g","h",!t.length)return[];r||(r=[]),n=e.layout,(o=(s=e.chart).state.aggregation)||(o=s.state.aggregation={}),l=Math.min(300,t.length),o.minMax||(o.minMax=e.determineMinMax(t.slice(t.length-l),["Close","High","Low"])),i.O90(20);var C=i.D8z(7,50,2,0);if(h=o.minMax["1"<<C]-o.minMax[0],!(c=e.panels[s.name].height))return[];i.O90(21);var S=i.D8z(8,16,667,768,2);i.X$L(22);var w=i.t1w(6,35,19,19,49);if(s.defaultChartStyleConfig.renko=Math.floor(S*h/(c/w))/1e4,null===a||isNaN(a)||a<=0?(a=s.defaultChartStyleConfig.renko,null!==n.renko&&("l","a","yout",n.renko=null,e.changeOccurred("layout"))):(i.O90(23),a=Math.max(a,i.t1w(c,h)),n.renko!==a&&(n.renko=a,e.changeOccurred("layout"))),u=[],d=null,p=null,m=null,r.length){i.O90(24);var k=i.D8z(17,217,2,20,10);d=(g=r[r.length-k]).Low-a,p=g.High+a}for(var D=0;D<t.length;D++)if(f=t[D]){for(d||p||(y=f.Open||0===f.Open?f.Open:f.Close,v=Math.floor(y/a)*a,b=isNaN(v)?y:v,i.O90(7),d=i.t1w(a,b),i.O90(1),p=i.D8z(b,a));;)if(m||(m=f),f.Close<=d)i.X$L(1),x(i.t1w(d,a),d),i.X$L(25),p=i.D8z(d,"2",a),d-=a,m=null;else{if(!(f.Close>=p))break;i.X$L(7),x(i.D8z(a,p),p),i.X$L(26),d=i.t1w(a,2,p),p+=a,m=null}s.currentQuote=f}return d<t[t.length-1].Close&&d+a>t[t.length-1].Close?(i.X$L(1),x(i.D8z(d,a),t[t.length-1].Close)):p>t[t.length-1].Close&&p-a<t[t.length-1].Close&&(i.O90(7),x(i.D8z(a,p),t[t.length-1].Close)),u},t.calculateRangeBars=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D;function A(e){var t;for(var i in(t={DT:y.DT,displayDate:y.displayDate,Date:y.Date,Open:Number(f.toFixed(8)),Close:Number(e.toFixed(8)),High:Number(m.toFixed(8)),Low:Number(g.toFixed(8)),Volume:0}).iqPrevClose=t.Open,y)t[i]||0===t[i]||(t[i]=y[i]);d.push(t)}function T(e,t){for(i.Z_e();;){if(y||(y=e),p<t){if(p=Math.min(t,m),i.X$L(7),g=Math.max(g,i.t1w(a,p)),t<m)break}else if(p>=t&&(p=Math.max(t,g),i.O90(1),m=Math.min(m,i.D8z(p,a)),t>g))break;if(void 0===p)return void console.log("Uh oh undefined in calculateRangeBars:processMove");A(p),y=null,I()}}if(i.c7b(),"H","i","gh","Cl","os","e",!t.length)return t;r||(r=[]),n=e.layout,(o=(s=e.chart).state.aggregation)||(o=s.state.aggregation={}),l=Math.min(300,t.length),o.minMax||(o.minMax=e.determineMinMax(t.slice(t.length-l),["Close","High","Low"])),i.O90(27);var M=i.t1w(5,17,11,1);i.X$L(10);var _=i.D8z(49,2,27,14);if(h=o.minMax[M]-o.minMax["0"<<_],!(c=e.panels[s.name].height))return[];i.X$L(28);var F=i.t1w(3334,10002,18,9979);i.X$L(5);var P=i.t1w(18e4,170002,2);if(s.defaultChartStyleConfig.range=Math.floor(F*h/(c/30))/P,null===a||isNaN(a)||a<0)a=s.defaultChartStyleConfig.range,null!==n.range&&(n.range=null,e.changeOccurred("layout"));else{196902161,-130577060,i.X$L(0),u=i.D8z("2",2);for(var L=1;196902161!==i.i7j(L.toString(),L.toString().length,64913);L++)i.O90(29),a=Math.max(a,i.D8z(c,h)),u+=2;-130577060!==i.i7j(u.toString(),u.toString().length,28211)&&(i.X$L(23),a=Math.max(a,i.t1w(c,h))),n.range!==a&&("lay","o","ut",n.range=a,e.changeOccurred("layout"))}d=[],p=null,m=null,g=null,f=null,y=null;for(var O=0;O<t.length;O++)if(v=t[O]){if(i.O90(30),b=t[i.t1w("1",O,1)],!O){if(!b){i.X$L(31);var E=i.t1w(5,8,7,2);b=r[r.length-E]}b&&((p=b.Close)||0===p)&&I()}b&&(x=v.Close,C=v.Open,S=v.High,w=v.Low,(x||0===x)&&(C=C||0===C?C:x,S=S||0===S?S:x,w=w||0===w?w:x,p||0===p||(k=Math.floor(C/a)*a,p=isNaN(k)?C:k,I(),T(b,C)),O&&T(v,C),S-C<C-w?(S&&T(v,S),w&&T(v,w)):(w&&T(v,w),S&&T(v,S)),T(v,x),O==t.length-1&&x!=f&&(D=m,i.X$L(1),m=i.t1w(g,a),i.O90(7),g=i.D8z(a,D),A(x))))}function I(){i.X$L(1),m=i.t1w(p,a),i.O90(7),i.c7b(),g=i.D8z(a,p),f=p}return d},t.calculatePointFigure=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A;if(!a.length)return a;if(n||(n=[]),s=e.layout,(l=(o=e.chart).state.aggregation)||(l=o.state.aggregation={}),o.defaultChartStyleConfig.box=1,o.defaultChartStyleConfig.reversal=3,r||(r={}),!(h=r.box)){s.pandf&&null!==s.pandf.box&&(s.pandf.box=null,e.changeOccurred("layout")),h=o.defaultChartStyleConfig.box,(c=a[a.length-1].Close)&&(c<.25?(i.X$L(7),h=i.D8z(0,"0.0625")):c<1?h=.125:c<5?h=.25:c<20?h=.5:c<100?(i.X$L(18),h=i.t1w("1",64)):c<200?h=2:c<500?h=4:c<1e3?h=5:c<25e3?h=50:(i.O90(3),h=i.t1w(0,"500"))),t.ChartEngine.isDailyInterval(s.interval)||(h/=10),t.Market.Symbology.isForexSymbol(o.symbol)&&(c&&(c<1?h=.001:c<2?h=.002:c<50?h=.02:c<200&&(h=.2)),t.ChartEngine.isDailyInterval(s.interval)&&(h*=10)),1464214372,750032200,u=2;for(var T=1;1464214372!==i.i7j(T.toString(),T.toString().length,77591);T++)o.defaultChartStyleConfig.box=h,u+=2;750032200!==i.l9L(u.toString(),u.toString().length,40275)&&(o.defaultChartStyleConfig.box=h),o.defaultChartStyleConfig.box=h}function M(e,t,i,a,r,n,s,o,l){return{DT:e.DT,Date:e.Date,pfOpen:o,pfClose:l,Open:t,Close:r,High:i,Low:a,Volume:n,iqPrevClose:s}}if(h=parseFloat(h),isNaN(h)||h<=0){s.pandf&&null!==s.pandf.box&&("l","ayo","u","t",s.pandf.box=null,e.changeOccurred("layout")),574601592,-1745831370,d=2;for(var _=1;574601592!==i.i7j(_.toString(),_.toString().length,27632);_++)o.defaultChartStyleConfig.box=h=1,d+=2;-1745831370!==i.l9L(d.toString(),d.toString().length,44342)&&(o.defaultChartStyleConfig.box=h=5)}function F(e,t,i,a,r){e.High=Math.max(t,e.High),e.Low=Math.min(i,e.Low),e.Close=a,e.Volume+=r}(p=Math.ceil(parseFloat(r.reversal)))>0&&p>r.reversal?(s.pandf.reversal=p,e.changeOccurred("layout")):(isNaN(p)||p<=0)&&(s.pandf&&null!==s.pandf.reversal&&("l","a","yout",s.pandf.reversal=null,e.changeOccurred("layout")),p=o.defaultChartStyleConfig.reversal),l.box=h,p*=h,m=1e-8,g=(h.toString()+".").split(".")[1].length,f=[],y=0;for(var P=0;P<a.length;P++)if(b=a[P])if(y+=b.Volume,C=b.Close,S=(S=b.Open)||0===S?S:C,w=(w=b.High)||0===w?w:C,k=(k=b.Low)||0===k?k:C,f.length||n.length){i.O90(9);var L=i.t1w(12,11,0);(x=f[f.length-L])||(x=t.clone(n[n.length-1])),"O"==x.pfTrend?(k<=x.pfClose-h?(x.pfClose=Number((Math.ceil(k/h-m)*h).toFixed(g)),"O"==x.pfStepBack&&(x.pfStepBack=null),F(x,w,k,C,y)):w>=x.pfClose+p?(D=x.pfClose+h,A=Number((Math.floor(w/h+m)*h).toFixed(g)),v=M(b,S,w,k,C,y,x.pfClose,D,A),D==A&&(v.pfStepBack="X"),"O"==x.pfStepBack?(x.pfOpen=D,x.pfClose=A,x.pfTrend="X",F(x,w,k,C,y)):((v=O(b,v)).pfTrend="X",f.push(v))):F(x,w,k,C,y),i.X$L(3),y=i.D8z(0,"0")):"X"==x.pfTrend&&(w>=x.pfClose+h?(x.pfClose=Number((Math.floor(w/h+m)*h).toFixed(g)),"X"!=x.pfStepBack&&"-"!=x.pfStepBack||(x.pfStepBack=null),F(x,w,k,C,y)):k<=x.pfClose-p?(D=x.pfClose-h,A=Number((Math.ceil(k/h-m)*h).toFixed(g)),v=M(b,S,w,k,C,y,x.pfClose,D,A),D==A&&(v.pfStepBack="O"),"X"==x.pfStepBack||"-"==x.pfStepBack?(x.pfOpen=D,x.pfClose=A,x.pfTrend="O",F(x,w,k,C,y),D!=A&&"-"==x.pfStepBack&&(x.pfStepBack=null)):((v=O(b,v)).pfTrend="O",f.push(v))):F(x,w,k,C,y),y=0)}else(v=O(b,M(b,S,w,k,C,y,w+h,Number((Math.ceil(k/h-m)*h).toFixed(g)),Number((Math.floor(w/h+m)*h).toFixed(g))))).pfTrend="X",v.pfOpen==v.pfClose&&(v.pfStepBack="-"),f.push(v),i.X$L(7),y=i.t1w(0,"0");function O(e,t){for(var i in e)t[i]||0===t[i]||(t[i]=e[i]);return t}return f}},s=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Drawing?("br[cq-wave-parameters","]","waveParame","ters","I","V","pa","t","ter","n","l","ineWidth","li","neW","idth","c",'q-cvp-controller[cq-cvp-header="1"]',"pat","ter","n3","a","ctive","2","c","olor1","p","attern","lineWi","dt","h","p","a","t","tern","t","z","p","v","p","l","l","w","p","t","p","a","ttern","fil","l","Colo","r","c","o","l","or","p","a","tte","rn","fill","C","olor",t.Drawing.ray=function(){_e.c7b(),this.name="ray"},t.inheritsFrom(t.Drawing.ray,t.Drawing.line),t.Drawing.ray.prototype.calculateOuterSet=function(e){var i,a,r=_e;if(this.p0[0]!=this.p1[0]&&this.p0[1]!=this.p1[1]&&!t.ChartEngine.isDailyInterval(this.stx.layout.interval)){i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]},r.O90(32);var n=r.D8z(8e3,16,4e3,968);if(a=i.x1+n,i.x0>i.x1){r.X$L(1);var s=r.t1w(56,944);a=i.x1-s}this.v0B=this.v0,this.v1B=t.yIntersection(i,a),this.d0B=this.d0,this.d1B=this.stx.dateFromTick(a,e.chart)}},t.Drawing.ray.prototype.adjust=function(){var e;e=this.stx.panels[this.panelName],_e.Z_e(),e&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,e.chart))},t.Drawing.continuous=function(){this.name="continuous",this.dragToDraw=!1,_e.c7b(),this.maxSegments=null},t.inheritsFrom(t.Drawing.continuous,t.Drawing.segment),t.Drawing.continuous.prototype.click=function(e,i,a){var r,n,s;if(r=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,a)?(this.stx.undo(),!0):(this.setPoint(1,i,a,r.chart),n=new(0,t.Drawing.segment),s=this.serialize(this.stx),n.reconstruct(this.stx,s),this.stx.addDrawing(n),this.stx.changeOccurred("vector"),this.stx.draw(),this.segment++,!!(this.maxSegments&&this.segment>this.maxSegments)||(_e.c7b(),this.setPoint(0,i,a,r.chart),!1)):(this.setPoint(0,i,a,r.chart),this.penDown=!0,!1)},t.Drawing.ellipse=function(){this.name="ellipse"},t.inheritsFrom(t.Drawing.ellipse,t.Drawing.BaseTwoPoint),t.Drawing.ellipse.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=_e;if(i=this.stx.panels[this.panelName]){if(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),v.X$L(33),o=v.D8z(a,a,r),l=r,h=n,c=s,v.O90(33),u=v.t1w(n,n,s),v.X$L(34),d=v.t1w(6,c,u),(p=this.lineWidth)||(v.X$L(8),p=v.D8z(1,"1.1")),("auto"==(m=this.color)||t.isTransparent(m))&&(m=this.stx.defaultColor),this.highlighted&&("st","x_hig","hlight_vector",m=this.stx.getCanvasColor("stx_highlight_vector"),.1==p&&(p=1.1)),g=this.fillColor,e.beginPath(),e.moveTo(o,h),v.O90(1),e.bezierCurveTo(o,v.D8z(c,d),l,v.t1w(c,d),l,h),v.X$L(7),e.bezierCurveTo(l,v.D8z(d,u),o,v.D8z(d,u),o,h),g&&!t.isTransparent(g)&&"auto"!=g){e.fillStyle=g,90609876,1241669347,f=2;for(var b=1;90609876!==v.l9L(b.toString(),b.toString().length,13357);b++)e.globalAlpha=529,e.fill(),f+=2;1241669347!==v.l9L(f.toString(),f.toString().length,43585)&&(e.globalAlpha=.2,e.fill()),v.X$L(35),e.globalAlpha=v.t1w(0,"1")}m&&"none"!=this.pattern&&(e.strokeStyle=m,e.lineWidth=p,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(p,this.pattern)),v.X$L(7),e.lineDashOffset=v.t1w(0,"0")),e.stroke()),e.closePath(),this.highlighted&&(y="p1"==this.highlighted,this.littleCircle(e,r,s,y))}},t.Drawing.ellipse.prototype.intersected=function(e,i,a){var r,n,s,o,l=_e;if("mov","e",!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],a))return this.highlighted="p1",{action:"drag",point:"p1"};r=this.p0[0]-(this.p1[0]-this.p0[0]),n=this.p1[0],s=this.p1[1],l.X$L(5);var h=l.D8z(0,10,11);l.O90(27);var c=l.D8z(8,12,9,4);l.X$L(36);var u=l.t1w(20,186,9,12,5);return o=this.p0[h]-(this.p1[c]-this.p0[u]),!(a.x0>Math.max(r,n)||a.x1<Math.min(r,n))&&(!(a.y1>Math.max(o,s)||a.y0<Math.min(o,s))&&(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))},t.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.ellipse.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.ellipse.prototype.serialize=function(){return _e.Z_e(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.channel=function(){_e.Z_e(),this.name="channel",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.channel,t.Drawing.segment),t.Drawing.channel.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.channel.prototype.move=function(e,t,i){var a,r=_e;if(this.penDown){if(this.copyConfig(),null===this.p2)this.p1=[t,i];else{r.X$L(37);var n=r.t1w(17,2,3,11);r.O90(38);var s=r.D8z(20,1336,70);a=i-(this.p1[n]-this.p0["1">>s])/(this.p1[0]-this.p0[0])*(t-this.p1[0]),r.X$L(8),this.p2=[this.p1[r.t1w(1,"0")],a]}this.render(e)}},t.Drawing.channel.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName],_e.c7b(),a)return this.copyConfig(),this.penDown?this.accidentalClick(t,i)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],a.chart),this.penDown=!1,!0):(this.setPoint(1,t,i,a.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(_e.X$L(3),this.p2=[this.p1[0],this.p1[_e.t1w(0,"1")]],!1)):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1)},t.Drawing.channel.prototype.boxIntersection=function(e,t,i){var a,r,n,s,o,l=_e;if(a=this.p0,r=this.p1,n=this.p2,!a||!r||!n)return!1;if(i.x0>Math.max(a[0],r[0])||i.x1<Math.min(a[0],r[0]))return!1;l.X$L(39);var h=l.D8z(19,20,0,5,8);l.O90(40);var c=l.D8z(6,2,3);l.X$L(41);var u=l.D8z(4,16,11,3);l.X$L(42),l.Z_e();var d=l.t1w(9,22,5,10,16);s=(r[0]-a[0])*((n[h]<a[1]?i.y1:i.y0)-a[c])-(r[u]-a["1">>d])*(e-a[0]),l.X$L(7);var p=l.t1w(18,19);l.X$L(43);var m=l.t1w(253,18,0,14);l.O90(2);var g=l.t1w(0,4,20,5);l.X$L(44);var f=l.D8z(8,48,10,9,12);l.O90(7);var y=l.D8z(14,15);l.X$L(5);var v=l.t1w(37,15,10);return o=(n[0]-a[0])*((n[p]>a[m]?i.y1:i.y0)-(a[1]+n[g]-r[f]))-(r[1]-a[y])*(e-a["0"<<v]),l.X$L(45),l.D8z(s,o,0)},t.Drawing.channel.prototype.intersected=function(e,i,a){var r;if(_e.c7b(),!this.p0||!this.p1||!this.p2)return null;for(var n in r={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(r[n][0],r[n][1],a))return _e.O90(1),this.highlighted=_e.t1w("p",n),{action:"drag",point:"p"+n};return this.boxIntersection(e,i,a)?("m","o","v","e",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:i}):null},t.Drawing.channel.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g=_e;(i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),o=null,this.p2&&(o=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1])),l=this.lineWidth,h=this.getLineColor(),c=this.fillColor,this.p2&&c&&!t.isTransparent(c)&&"auto"!=c&&(e.beginPath(),e.moveTo(a,n),e.lineTo(r,s),e.lineTo(r,o),g.X$L(46),e.lineTo(a,g.t1w(s,n,o)),e.closePath(),e.globalAlpha=.2,e.fillStyle=c,e.fill(),e.globalAlpha=1),u={pattern:this.pattern,lineWidth:l},(this.penDown||this.highlighted)&&"none"==this.pattern&&(u.pattern="dotted"),this.stx.plotLine(a,r,n,s,h,"segment",e,i,u),this.p2&&(g.O90(46),this.stx.plotLine(a,r,g.t1w(s,n,o),o,h,"segment",e,i,u)),this.highlighted&&(d="p0"==this.highlighted,p="p1"==this.highlighted,m="p2"==this.highlighted,this.littleCircle(e,a,n,d),this.littleCircle(e,r,s,p),this.littleCircle(e,r,o,m)))},t.Drawing.channel.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,"move"==t.action?(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.setPoint(1,t.p1[0]-n,t.p1[1]-s,r.chart),this.setPoint(2,t.p2[0]-n,t.p2[1]-s,r.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.setPoint(2,this.p2[0],this.p2[1],r.chart),this.render(e)))},t.Drawing.channel.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),_e.X$L(35),this.setPoint(_e.t1w(64,"2"),this.d1,this.v2,e.chart))},t.Drawing.channel.prototype.reconstruct=function(e,t){this.stx=e,_e.Z_e(),this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.adjust()},t.Drawing.channel.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2}},t.Drawing.pitchfork=function(){this.name="pitchfork",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.pitchfork,t.Drawing.channel),t.Drawing.pitchfork.prototype.configs=["color","lineWidth","pattern"],t.Drawing.pitchfork.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],_e.Z_e(),this.render(e))},t.Drawing.pitchfork.prototype.intersected=function(e,i,a){var r,n;if(!this.p0||!this.p1||!this.p2)return null;for(var s in r={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(r[s][0],r[s][1],a))return _e.X$L(1),this.highlighted=_e.t1w("p",s),{action:"drag",point:"p"+s};n=this.rays;for(var o=0;o<n.length;o++)if(this.lineIntersection(e,i,a,o?"ray":"segment",n[o][0],n[o][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:i};return null},t.Drawing.pitchfork.prototype.render=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C=_e;if(t=this.stx.panels[this.panelName]){i=this.stx,(a=this.p2)||(a=this.p1),r=i.pixelFromTick(this.p0[0],t.chart),n=i.pixelFromTick(this.p1[0],t.chart),s=i.pixelFromTick(a[0],t.chart),o=i.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),l=i.pixelFromValueAdjusted(t,this.p1[0],this.p1[1]),h=i.pixelFromValueAdjusted(t,a[0],a[1]),c=this.lineWidth,u=this.getLineColor(),d={pattern:this.pattern,lineWidth:c},p=50,C.O90(31),m=C.D8z(l,h,o,2),C.O90(31),(g=C.t1w(n,s,r,2))<0&&(p*=-1),C.O90(23),m*=C.D8z(g,p),C.X$L(47),this.rays=[[[n,l],[s,h]],[[r,o],[C.t1w(0,s,n,"2"),C.D8z(l,h,"2",C.X$L(48))]]],n==s&&l==h||(C.X$L(7),this.rays.push([[n,l],[C.t1w(p,n),C.D8z(m,l)]],[[s,h],[C.t1w(p,s),C.D8z(m,h)]]));for(var S=0;S<this.rays.length;S++)f=this.rays[S],y=S?"ray":"segment",i.plotLine(f[0][0],f[1][0],f[0][1],f[1][1],u,y,e,t,d);this.highlighted&&("p","1",v="p0"==this.highlighted,b="p1"==this.highlighted,x="p2"==this.highlighted,this.littleCircle(e,r,o,v),this.littleCircle(e,n,l,b),this.littleCircle(e,s,h,x))}},t.Drawing.pitchfork.prototype.adjust=function(){var e,t,i,a=_e;if(e=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,e.chart),545116989,a.X$L(0),t=a.D8z("2137708937",0),i=2;for(var r=1;545116989!==a.l9L(r.toString(),r.toString().length,68899);r++)this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart),i+=2;a.i7j(i.toString(),i.toString().length,33429)!==t&&(this.setPoint(8,this.d1,this.v1,e.chart),this.setPoint(1,this.d2,this.v2,e.chart))}},t.Drawing.pitchfork.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.d2=t.d2,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.tzo2=t.tzo2,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.adjust()},t.Drawing.pitchfork.prototype.serialize=function(){return _e.c7b(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2}},t.Drawing.gartley=function(){this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,_e.c7b(),this.shape=null,this.points=[]},t.inheritsFrom(t.Drawing.gartley,t.Drawing.continuous),t.Drawing.gartley.prototype.check=function(e,t){if(!t)return!0;if(e[0]>=t[0]||e[1]==t[1])return!1;if(1==this.segment)e[1]<t[1]?this.shape="M":this.shape="W";else if(2==this.segment){if("M"==this.shape&&e[1]<t[1])return!1;if("W"==this.shape&&e[1]>t[1])return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])>=.786)return!1}else if(3==this.segment){if("M"==this.shape&&e[1]>t[1])return!1;if("W"==this.shape&&e[1]<t[1])return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])>=.786)return!1}else if(4==this.segment){if("M"==this.shape&&(e[1]<t[1]||t[1]<this.points[0][1]))return!1;if("W"==this.shape&&(e[1]>t[1]||t[1]>this.points[0][1]))return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return!0},t.Drawing.gartley.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown)return this.setPoint(0,t,i,a.chart),this.pts=[],this.penDown=!0,_e.X$L(35),this.segment=_e.t1w(32,"1"),!1;if(this.accidentalClick(t,i))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(1==this.segment&&this.points.push(this.p0),this.points.push(this.p1),this.setPoint(1,t,i,a.chart),this.segment++,this.segment>this.maxSegments)return this.setPoint(0,this.points[0][0],this.points[0][1],a.chart),this.penDown=!1,!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,t,i,a.chart)}return!1}},t.Drawing.gartley.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=_e;if("dot","t","e","d",i=this.stx.panels[this.panelName]){if(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),2==this.segment)this.drawDropZone(e,.618*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]);else if(3==this.segment)this.drawDropZone(e,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[0]);else if(4==this.segment){y.X$L(7);var v=y.D8z(3,35);y.O90(15);var b=y.D8z(9,13,19,2);y.X$L(49);var x=y.D8z(1,2,11,12);y.O90(7);var C=y.D8z(17,18);o=1.618*this.points["2"<<v][b]-.618*this.points[x][C],o="M"==this.shape?Math.max(o,this.points[0][1]):Math.min(o,this.points[0][1]),this.drawDropZone(e,o,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0])}if(l=this.lineWidth,h=this.getLineColor(),c={pattern:this.pattern,lineWidth:l},(this.penDown||this.highlighted)&&"none"==this.pattern&&(c.pattern="dotted"),this.segment<=this.maxSegments&&this.stx.plotLine(a,r,n,s,h,this.name,e,i,c),u=this.fillColor,d=[],this.points.length){e.beginPath();for(var S=1;S<this.points.length&&S<=4;S++)p=this.stx.pixelFromTick(this.points[S-1][0],i.chart),m=this.stx.pixelFromTick(this.points[S][0],i.chart),g=this.stx.pixelFromValueAdjusted(i,this.points[S-1][0],this.points[S-1][1]),f=this.stx.pixelFromValueAdjusted(i,this.points[S][0],this.points[S][1]),1==S&&d.push(p,g),d.push(m,f),this.stx.plotLine(p,m,g,f,h,this.name,e,i,c);if(2!=this.points.length&&4!=this.points.length||d.push(r,s),this.points[2]&&d.push(this.stx.pixelFromTick(this.points[2][0],i.chart),this.stx.pixelFromValueAdjusted(i,this.points[2][0],this.points[2][1])),u&&"auto"!=u&&!t.isTransparent(u)){for(var w=0;w<d.length;w+=2)0===w&&e.moveTo(d[0],d[1]),e.lineTo(d[w],d[w+1]);e.fillStyle=u,e.globalAlpha=.2,e.closePath(),e.fill(),e.globalAlpha=1}}}},t.Drawing.gartley.prototype.lineIntersection=function(e,i,a,r){var n,s;if(n=this.points,s=this.stx.panels[this.panelName],n.length!=this.maxSegments+1||!s)return!1;for(var o=0;o<n.length-1;o++)if(t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,a,"segment",n[o],n[o+1]))return!0;return!1},t.Drawing.gartley.prototype.boxIntersection=function(e,t,i){var a,r;if(!this.p0||!this.p1)return!1;if(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))return!1;a=Math.min(this.p0[1],this.p1[1]),r=Math.max(this.p0[1],this.p1[1]);for(var n=0;n<this.points.length;n++)a=Math.min(a,this.points[n][1]),r=Math.max(r,this.points[n][1]);for(var s=1;1208013339!==_e.l9L(s.toString(),s.toString().length,33775);s++)return i.y1>=r&&i.y0>a;return-203657870!==_e.i7j(2..toString(),2..toString().length,54772)?!(i.y1>r||i.y0>=a):!(i.y1>r||i.y0<a)},t.Drawing.gartley.prototype.reposition=function(e,t,i,a){var r,n,s;if(t&&(r=this.stx.panels[this.panelName],n=t.tick-i,t.tick=i,s=t.value-a,t.value=a,"move"==t.action)){this.pts=[];for(var o=0;o<this.points.length;o++)this.points[o][0]-=n,this.points[o][1]-=s,_e.X$L(0),this.setPoint(_e.t1w("1",1),this.points[o][0],this.points[o][1],r.chart),o&&o<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[o]=this.p1;this.setPoint(0,this.points[0][0],this.points[0][1],r.chart),this.render(e)}},t.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.gartley.prototype.adjust=function(){var e;e=this.stx.panels[this.panelName],_e.c7b(),e&&(this.reconstructPoints(),this.setPoint(0,this.d0,this.v0,e.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,e.chart),this.points.push(this.p1))},t.Drawing.gartley.prototype.reconstructPoints=function(){var e,i;if(e=this.stx.panels[this.panelName]){this.points=[];for(var a=0;a<this.pts.length;a+=3)(i=t.strToDateTime(this.pts[a])).setMinutes(i.getMinutes()+Number(this.pts[a+1])-i.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(t.yyyymmddhhmmssmmm(i),e.chart),this.pts[a+2]])}},t.Drawing.gartley.prototype.reconstruct=function(e,t){this.stx=e,_e.c7b(),this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.pts=t.pts.split(","),this.adjust()},t.Drawing.gartley.prototype.serialize=function(){return _e.Z_e(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,pts:this.pts.join(",")}},t.Drawing.freeform=function(){this.name="freeform",this.splineTension=.3,this.dragToDraw=!0},t.inheritsFrom(t.Drawing.freeform,t.Drawing.segment),t.Drawing.freeform.prototype.measure=function(){},t.Drawing.freeform.prototype.intersected=function(e,i,a){return _e.c7b(),a.x0>this.hiX||a.x1<this.lowX||a.y1>this.hiY||a.y0<this.lowY?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),tick:e,value:i})},t.Drawing.freeform.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,_e.c7b(),s=t.value-a,"move"==t.action&&(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.adjust(),this.render(e)))},t.Drawing.freeform.prototype.click=function(e,i,a){var r,n;if(_e.Z_e(),"au","t","o",r=this.stx.panels[this.panelName])return!1===this.penDown?(this.copyConfig(),this.startX=Math.round(this.stx.resolveX(this.stx.pixelFromTick(i,r.chart))),this.startY=Math.round(this.stx.resolveY(this.stx.pixelFromValueAdjusted(r,i,a))),n=this.stx.dateFromTick(i,r.chart,!0),this.d0=t.yyyymmddhhmmssmmm(n),this.tzo0=n.getTimezoneOffset(),this.v0=a,this.p0=[t.ChartEngine.crosshairX-this.startX,t.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=this.stx.layout.candleWidth,this.multiplier=r.yAxis.multiplier,this.interval=this.stx.layout.interval,this.periodicity=this.stx.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,document.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,document.body.style.cursor="auto",!0)},t.Drawing.freeform.prototype.move=function(e,i,a){var r,n;if(this.penDown)return r=this.stx.panels[this.panelName],n=this.stx.dateFromTick(i,r.chart,!0),this.d1=t.yyyymmddhhmmssmmm(n),this.tzo1=n.getTimezoneOffset(),this.v1=a,this.p1=[t.ChartEngine.crosshairX-this.startX,r.yAxis.flipped?this.startY-t.ChartEngine.crosshairY:t.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]||this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1])&&(this.pNodes.length--,this.nodes.length-=2),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(e),!1},t.Drawing.freeform.prototype.intervalRatio=function(e,i,a,r,n,s){var o,l,h=_e;function c(e,t){return h.c7b(),30}if(h.c7b(),o=0,e==i)o=1;else if(isNaN(e)||isNaN(i)){if(isNaN(e)){if("da","y","we","ek","month"==e)"w","e","ek","week"==i?o=5:"day"==i?o=c():isNaN(i)||(o=c()*d(n,s)/i);else if("week"==e){if("month"==i)h.X$L(50),o=h.D8z(2,3)/5;"day"==i?o=p(n,s):isNaN(i)||(o=p(n,s)*d(n,s)/i)}else if("day"==e){if("we","ek","week"==i)h.O90(20),o=h.t1w(13,10,5,14)/p(n,s);else if("month"==i){h.X$L(50),o=h.D8z(7,8)/c()}else isNaN(i)||(o=d(n,s)/i)}}else if(!isNaN(e)){-554767280,-1911856279,l=2;for(var u=1;-554767280!==h.i7j(u.toString(),u.toString().length,61175);u++)"we","e","k","month"!=i?o=e+c()/d(n,s):"week"===i?o=e-p(n,s)%d(n,s):"day"!==i&&(o=e%d(n,s)),l+=2;-1911856279!==h.i7j(l.toString(),l.toString().length,49102)&&("we","ek","m","on","th","month"==i?o=e/(c()*d(n,s)):"week"==i?o=e/(p(n,s)*d(n,s)):"day"==i&&(o=e/d(n,s)))}}else h.O90(23),o=h.D8z(i,e);function d(e,i){return t.Market.Symbology.isForexSymbol(i)?1440:390}function p(e,t){for(var i=1;68362061!==h.l9L(i.toString(),i.toString().length,60311);i++)return 6;if(-836588982!==h.l9L(2..toString(),2..toString().length,3295))return 5}return h.O90(23),o*=h.t1w(r,a)},t.Drawing.freeform.prototype.render=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p=_e;if((t=this.stx.panels[this.panelName])&&0!==(i=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,t.chart.symbol))){a=this.stx.layout.candleWidth/this.candleWidth,r=t.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,t.chart),n=this.stx.pixelFromTick(this.p0[0],t.chart),s=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),o=[],l=this.lineWidth,h=this.getLineColor(),c={pattern:this.pattern,lineWidth:l};for(var m=0;m<this.pNodes.length;m++){u=i*a*this.pNodes[m][0]+n,p.X$L(50);var g=p.t1w(16,17);d=r*this.pNodes[m][g],t.yAxis.flipped?(p.X$L(7),d=p.D8z(d,s)):d+=s,o.push(u,d)}o.length&&(p.Z_e(),this.splineTension<0?this.stx.connectTheDots(o,h,this.name,e,t,c):this.stx.plotSpline(o,this.splineTension,h,this.name,e,!0,c))}},t.Drawing.freeform.prototype.adjust=function(){var e,t,i,a,r,n,s,o,l=_e;if(e=this.stx.panels[this.panelName]){t=[this.nodes[0],this.nodes[1]],this.pNodes=[t],this.lowX=this.nodes[0],l.O90(18),this.hiX=this.nodes[l.t1w("0",32)],this.lowY=this.nodes[1],this.hiY=this.nodes[1],l.Z_e();for(var h=2;h<this.nodes.length;h+=2)l.X$L(1),i=[this.nodes[h],this.nodes[l.D8z(h,1)]],this.pNodes.push(i),this.lowX=Math.min(this.lowX,i[0]),this.hiX=Math.max(this.hiX,i[0]),this.lowY=Math.max(this.lowY,i[1]),this.hiY=Math.min(this.hiY,i[1]);0!==(a=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,e.chart.symbol))&&(r=this.stx.layout.candleWidth/this.candleWidth,n=e.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,e.chart),s=this.stx.pixelFromTick(this.p0[0],e.chart),o=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),this.lowX=this.stx.tickFromPixel(Math.floor(a*r*this.lowX)+s,e.chart),this.hiX=this.stx.tickFromPixel(Math.ceil(a*r*this.hiX)+s,e.chart),e.yAxis.flipped?(this.lowY=this.stx.valueFromPixel(o-Math.floor(n*this.lowY),e),this.hiY=this.stx.valueFromPixel(o-Math.ceil(n*this.hiY),e)):(this.lowY=this.stx.valueFromPixel(Math.floor(n*this.lowY)+o,e),this.hiY=this.stx.valueFromPixel(Math.ceil(n*this.hiY)+o,e)))}},t.Drawing.freeform.prototype.serialize=function(){return _e.Z_e(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes}},t.Drawing.freeform.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.candleWidth=t.cw,this.multiplier=t.mlt,this.d0=t.d0,this.tzo0=t.tzo0,this.v0=t.v0,this.interval=t.inter,this.periodicity=t.pd,this.nodes=t.nodes,this.adjust()},t.Drawing.callout=function(){this.name="callout",this.arr=[],this.w=0,this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={},this.stemEntry="",this.defaultWidth=50,this.defaultHeight=10,_e.c7b()},t.inheritsFrom(t.Drawing.callout,t.Drawing.annotation),t.Drawing.callout.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.callout.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),this.borderColor=this.color},t.Drawing.callout.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),_e.Z_e(),this.p0=[t,i],this.render(e))},t.Drawing.callout.prototype.onChange=function(e){var i,a;_e.Z_e(),this.stx.panels[this.panelName]&&(i=e.target,this.w=i.clientWidth,this.h=i.clientHeight,a=this.context||this.stx.chart.tempCanvas.context,t.clearCanvas(a.canvas,this.stx),this.render(a),this.edit(a))},t.Drawing.callout.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b=_e;if("a","lphabeti","c","s","tx_highlig","ht_vector",this.context=e,(i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),!isNaN(r))){e.font=this.fontString,e.textBaseline="top",n=a,s=r,b.X$L(51);var x=b.D8z(217,1,15,15,10);o=this.w/x,b.O90(31);var C=b.t1w(9,229,10,24);if(l=this.h/C,this.penDown&&(o=this.defaultWidth,(l=this.defaultHeight)||(l=this.fontSize)),(h=this.lineWidth)||(h=1.1),("auto"==(c=this.color)||t.isTransparent(c))&&(c=this.stx.defaultColor),("auto"==(u=this.borderColor)||t.isTransparent(u))&&(u=this.stx.defaultColor),this.highlighted&&(u=this.stx.getCanvasColor("stx_highlight_vector")),f=Math.min(Math.min(o,l)/2,8),this.stem&&(this.stem.t?(d=this.stx.pixelFromTick(this.stem.t),m=this.stx.pixelFromValueAdjusted(i,this.stem.t,this.stem.v)):this.stem.x&&(d=n,m=s,n+=this.stem.x,s+=this.stem.y),y="",d>=n+o?(b.O90(1),p=b.t1w(n,o),y="r"):d>n-o&&d<n+o?(p=n,y="c"):d<=n-o&&(b.O90(7),p=b.t1w(o,n),y="l"),m>=s+l?(b.X$L(1),g=b.D8z(s,l),y+="b"):m>s-l&&m<s+l?(g=s,y+="m"):m<=s-l&&(b.X$L(7),g=b.t1w(l,s),y+="t"),this.stemEntry=y,"cm"!=y&&(d=Math.round(d),p=Math.round(p),m=Math.round(m),g=Math.round(g))),this.highlighted?this.stx.canvasColor("stx_annotation_highlight_bg",e):this.fillColor?(e.fillStyle=this.fillColor,e.globalAlpha=.4):this.stem&&(e.fillStyle=this.stx.containerColor),e.strokeStyle=u,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(h,this.pattern)),e.lineDashOffset=0),u&&("l","m","r","b",e.beginPath(),e.lineWidth=h,b.O90(5),e.moveTo(b.D8z(n,f,o),b.D8z(l,s,b.X$L(7))),"rt"!=this.stemEntry?(b.X$L(1),e.quadraticCurveTo(b.t1w(n,o),b.t1w(l,s,b.O90(7)),b.D8z(n,o,b.X$L(1)),b.D8z(f,l,s,b.O90(9)))):(e.lineTo(d,m),b.O90(1),e.lineTo(b.t1w(n,o),b.D8z(f,l,s,b.O90(9)))),b.X$L(1),e.lineTo(b.D8z(n,o),b.t1w(2,f,s,b.X$L(52))),"rm"==this.stemEntry&&e.lineTo(d,m),b.O90(1),e.lineTo(b.D8z(n,o),b.t1w(2,f,s,b.X$L(53))),b.X$L(1),e.lineTo(b.D8z(n,o),b.t1w(s,f,l,b.O90(5))),"rb"!=this.stemEntry?(b.X$L(1),e.quadraticCurveTo(b.t1w(n,o),b.D8z(s,l,b.X$L(1)),b.D8z(n,f,o,b.O90(5)),b.D8z(s,l,b.X$L(1)))):(e.lineTo(d,m),b.X$L(5),e.lineTo(b.t1w(n,f,o),b.t1w(s,l,b.X$L(1)))),b.O90(53),e.lineTo(b.D8z(2,f,n),b.t1w(s,l,b.O90(1))),"cb"==this.stemEntry&&e.lineTo(d,m),b.O90(52),e.lineTo(b.D8z(2,f,n),b.D8z(s,l,b.O90(1))),b.O90(9),e.lineTo(b.t1w(f,o,n),b.D8z(s,l,b.X$L(1))),"lb"!=this.stemEntry?(b.X$L(7),e.quadraticCurveTo(b.D8z(o,n),b.t1w(s,l,b.O90(1)),b.t1w(o,n,b.O90(7)),b.D8z(s,f,l,b.X$L(5)))):(e.lineTo(d,m),b.X$L(7),e.lineTo(b.t1w(o,n),b.t1w(s,f,l,b.O90(5)))),b.X$L(7),e.lineTo(b.D8z(o,n),b.D8z(2,f,s,b.O90(53))),"lm"==this.stemEntry&&e.lineTo(d,m),b.O90(7),e.lineTo(b.t1w(o,n),b.t1w(2,f,s,b.X$L(52))),b.X$L(7),e.lineTo(b.D8z(o,n),b.t1w(f,l,s,b.X$L(9))),"lt"!=this.stemEntry?(b.X$L(7),e.quadraticCurveTo(b.t1w(o,n),b.t1w(l,s,b.O90(7)),b.t1w(f,o,n,b.O90(9)),b.t1w(l,s,b.X$L(7)))):(e.lineTo(d,m),b.O90(9),e.lineTo(b.D8z(f,o,n),b.t1w(l,s,b.O90(7)))),b.X$L(54),e.lineTo(b.D8z("2",f,n),b.D8z(l,s,b.X$L(7))),"ct"==this.stemEntry&&e.lineTo(d,m),b.X$L(53),e.lineTo(b.D8z(2,f,n),b.D8z(l,s,b.X$L(7))),b.X$L(5),e.lineTo(b.t1w(n,f,o),b.D8z(l,s,b.O90(7))),e.fill(),e.globalAlpha=1,"none"!=this.pattern&&e.stroke()),this.highlighted?("stx_annot","ation_h","ighlight",this.stx.canvasColor("stx_annotation_highlight",e)):e.fillStyle=c,s+=this.padding,!this.ta)for(var S=0;S<this.arr.length;S++)e.fillText(this.arr[S],n-o+this.padding,s-l),s+=this.fontSize;e.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&("p","0",v="p0"==this.highlighted,this.littleCircle(e,d,m,v))}},t.Drawing.callout.prototype.click=function(e,t,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,t,i,a.chart),this.penDown?(this.adjust(),this.edit(e),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},t.Drawing.callout.prototype.reposition=function(e,t,i,a){var r,n,s,o;if(t){if(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,_e.c7b(),t.stem){if("drag"==t.action){-272425528,-1491687497,o=2;for(var l=1;-272425528!==_e.i7j(l.toString(),l.toString().length,52467);l++)this.stem={d:this.stx.dateFromTick(i,r.chart,!1),v:a},o+=2;-1491687497!==_e.i7j(o.toString(),o.toString().length,4843)&&(this.stem={d:this.stx.dateFromTick(i,r.chart,!1),v:a}),this.stem={d:this.stx.dateFromTick(i,r.chart,!0),v:a}}else"move"==t.action&&(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(t.stem.d,r.chart)-n),v:t.stem.v-s});this.adjust()}else this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart);this.render(e)}},t.Drawing.callout.prototype.lineIntersection=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y=_e;if(n=this.stx.panels[this.panelName],s=this.stem,y.c7b(),o=this.p0,l=this.stx,!o||!s||!n)return!1;if(h=s.t||this.stx.tickFromDate(s.d,n.chart),c={x0:o[0],x1:h,y0:o[1],y1:s.v},d=(u=t.convertBoxToPixels(l,this.panelName,c)).x0,p=u.y0,m=u.x1,g=u.y1,"string"==typeof this.stemEntry){if(this.stemEntry.indexOf("l")>-1){y.X$L(55);var v=y.D8z(2,2,2);d-=this.w/v}else if(this.stemEntry.indexOf("r")>-1){y.X$L(56);var b=y.t1w(12,718,20,3);d+=this.w/b}if(this.stemEntry.indexOf("t")>-1){y.O90(9);var x=y.t1w(4,2,0);p-=this.h/x}else if(this.stemEntry.indexOf("b")>-1){y.O90(7);var C=y.t1w(32,34);p+=this.h/C}}return f=t.convertBoxToPixels(l,this.panelName,a),t.boxIntersects(f.x0,f.y0,f.x1,f.y1,d,p,m,g,r)},t.Drawing.callout.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c,u=_e;if(r=this.stx.panels[this.panelName],!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,a))return"d","r","a","g",this.highlighted="p0",{action:"drag",stem:!0};u.O90(57);var d=u.t1w(12,2,4);n=this.stx.pixelFromTick(this.p0[0],r.chart)-this.w/d,u.O90(58);var p=u.D8z(7,7,16,19,9);return s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1])-this.h/p,o=n+this.w,l=s+this.h,this.stem&&this.stem.x&&(n+=this.stem.x,o+=this.stem.x,s+=this.stem.y,l+=this.stem.y),h=this.stx.pixelFromTick(e,r.chart),c=this.stx.pixelFromValueAdjusted(r,e,i),u.Z_e(),h+a.r>=n&&h-a.r<=o&&c+a.r>=s&&c-a.r<=l?(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:i}):this.lineIntersection(e,i,a,"segment")?("m","o","ve",this.highlighted=!0,{action:"move",stem:t.clone(this.stem),p0:t.clone(this.p0),tick:e,value:i}):null},t.Drawing.fibonacci=function(){this.name="fibonacci",_e.Z_e(),this.configurator="fibonacci"},t.inheritsFrom(t.Drawing.fibonacci,t.Drawing.BaseTwoPoint),t.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz",display:"d"},t.Drawing.fibonacci.prototype.recommendedLevels=[-.618,-.382,0,.382,.5,.618,1,1.382,1.618],t.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth","pattern","parameters"],t.Drawing.fibonacci.prototype.initializeSettings=function(e){var t,i;if(_e.c7b(),(t=this.recommendedLevels)&&!e.currentVectorParameters.fibonacci.fibsAlreadySet){i=e.currentVectorParameters.fibonacci.fibs;for(var a=0;a<i.length;a++){delete i[a].display;for(var r=0;r<t.length;r++)i[a].level==t[r]&&(i[a].display=!0)}}},t.Drawing.fibonacci.prototype.setOuter=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g=_e;if(i=(e=this.stx).panels[this.panelName]){a=Math.max(this.p0[1],this.p1[1]),r=Math.min(this.p0[1],this.p1[1]),g.X$L(7),n=g.D8z(r,a),this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},s=e.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=e.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=e.pixelFromTick(this.p0[0],i.chart),h=e.pixelFromTick(this.p1[0],i.chart),g.X$L(35),c=g.D8z(0,"0"),u=1;for(var f=0;f<this.parameters.fibs.length;f++)(d=this.parameters.fibs[f]).level>=c&&d.level<=u||!d.display||(p=e.pixelFromValueAdjusted(i,this.p0[0],o<s?a-n*d.level:r+n*d.level),m=t.xIntersection({x0:l,x1:h,y0:s,y1:o},p),d.level<c?(c=d.level,this.outer.p1[1]=e.valueFromPixel(p,i),this.outer.p1[0]=e.tickFromPixel(m,i.chart)):d.level>u&&(u=d.level,this.outer.p0[1]=e.valueFromPixel(p,i),this.outer.p0[0]=e.tickFromPixel(m,i.chart)))}},t.Drawing.fibonacci.prototype.click=function(e,i,a){var r;if(r=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown){this.setPoint(0,i,a,r.chart),791436946,-2060017728,2;for(var n=1;791436946!==_e.i7j(n.toString(),n.toString().length,83001);n++)return this.penDown=!0,!1;if(-2060017728!==_e.l9L(2..toString(),2..toString().length,46579))return this.penDown=!1,!0}return this.accidentalClick(i,a)?this.dragToDraw:(_e.Z_e(),this.setPoint(1,i,a,r.chart),this.setOuter(),this.parameters=t.clone(this.parameters),this.penDown=!1,!0)}},t.Drawing.fibonacci.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$=_e;if("sol","i","d",(i=this.stx.panels[this.panelName])&&(a=i.yAxis,this.p1)){r=Math.max(this.p0[1],this.p1[1]),n=Math.min(this.p0[1],this.p1[1]),s=a.flipped?n-r:r-n,o=this.stx.pixelFromTick(this.p0[0],i.chart),l=this.stx.pixelFromTick(this.p1[0],i.chart),h=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),c=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),u=Math.min(c,h),d=Math.max(c,h),$.X$L(7),p=$.t1w(u,d),$.X$L(59),m=$.D8z(h,c,0,o,l),g={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=g),f=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),$.O90(1);var z=$.t1w(4,6);$.c7b(),y=e.measureText("161.8%").width+z,v=Number.MAX_VALUE,b=Number.MAX_VALUE,$.O90(60);var j=$.t1w(41,6,7);x=Number.MAX_VALUE*j,$.O90(61);var V=$.t1w(3,36,20,18);C=Number.MAX_VALUE*V,("auto"==(S=this.color)||t.isTransparent(S))&&(S=this.stx.defaultColor),this.rays=[];for(var H=0;H<this.parameters.fibs.length;H++)if("l","e","f","t",e.textAlign="left",e.fillStyle=S,(w=this.parameters.fibs[H]).display){if(k=this.stx.pixelFromValueAdjusted(i,this.p0[0],c<h?r-s*w.level:n+s*w.level),D=t.xIntersection({x0:o,x1:l,y0:h,y1:c},k),A=this.parameters.extendLeft?0:D,T=i.left+i.width,this.parameters.printLevels){$.O90(62);var B=$.D8z(1,11,3,1,2);$.O90(63);var W=$.D8z(9335,19,1054853,3,6);M=Math.round(1e3*w.level)/B+(1592<W&&"%"),T-=y,this.parameters.printValues&&("s","tx_yaxis",e.fillStyle=S,this.stx.canvasFont("stx_yaxis",e)),T<A&&(e.textAlign="right"),e.fillText(M,T,k),T<A?T+=5:T-=5}this.parameters.printValues&&D<i.width&&(_=this.stx.transformedPriceFromPixel(k,i),_=a.priceFormatter?a.priceFormatter(this.stx,i,_):this.stx.formatYAxisPrice(_,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,_,k,S,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(F=w.color)||t.isTransparent(F))&&(F=this.color),("auto"==F||t.isTransparent(F))&&(F=this.stx.defaultColor),("auto"==(P=w.color)||t.isTransparent(P))&&(P=this.fillColor),("auto"==P||t.isTransparent(P))&&(P=this.stx.defaultColor),e.fillStyle=P,L=t.clone(w.parameters),this.highlighted&&(L.opacity=1),this.stx.plotLine(A,T,k,k,this.highlighted?f:F,"segment",e,i,L),this.rays.push([[A,k],[T,k]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(T,k),e.lineTo(A,k),A?e.lineTo(l,c):e.lineTo(A,c),e.lineTo(T,c),void 0!==P&&e.fill(),e.globalAlpha=1,k<b&&(v=D,b=k),k>C&&(x=D,C=k)}for(var R=0;R<=1;R++)O=m?d-p*R:u+p*R,(O=Math.round(O))<b&&(v=t.xIntersection({x0:o,x1:l,y0:h,y1:c},O),b=O),O>C&&(x=t.xIntersection({x0:o,x1:l,y0:h,y1:c},O),C=O);E=t.clone(this.parameters.trend.parameters),this.highlighted&&(E.opacity=1),this.stx.plotLine(v,x,b,C,f,"segment",e,i,E),this.highlighted&&(I="p0"==this.highlighted,N="p1"==this.highlighted,this.littleCircle(e,o,h,I),this.littleCircle(e,l,c,N))}},t.Drawing.fibonacci.prototype.reposition=function(e,i,a,r){i&&(t.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),_e.Z_e(),this.adjust())},t.Drawing.fibonacci.prototype.intersected=function(e,i,a){var r,n,s,o,l,h;if(r=this.p0,n=this.p1,!r||!n)return null;for(var c in s={0:r,1:n})if(this.pointIntersection(s[c][0],s[c][1],a))return _e.X$L(1),this.highlighted=_e.D8z("p",c),{action:"drag",point:"p"+c};if(o=this.outer,l=this.rays,!(h=o&&this.lineIntersection(e,i,a,"segment",o.p0,o.p1)))for(var u=0;u<l.length;u++)if(this.lineIntersection(e,i,a,"ray",l[u][0],l[u][1],!0)){h=!0;break}return h?("m","o","v","e",this.highlighted=!0,{action:"move",p0:t.clone(r),p1:t.clone(n),tick:e,value:i}):null},t.Drawing.fibonacci.prototype.reconstruct=function(e,i){i=t.replaceFields(i,t.reverseObject(t.Drawing.fibonacci.mapping)),this.stx=e,this.parameters=i.parameters,this.parameters||(this.parameters=t.clone(this.stx.currentVectorParameters.fibonacci)),this.color=i.col,this.fillColor=i.fc,this.panelName=i.pnl,this.d0=i.d0,this.d1=i.d1,this.d2=i.d2,this.tzo0=i.tzo0,this.tzo1=i.tzo1,this.tzo2=i.tzo2,this.v0=i.v0,this.v1=i.v1,this.v2=i.v2,this.adjust()},t.Drawing.fibonacci.prototype.adjust=function(){var e;_e.Z_e(),(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setOuter())},t.Drawing.fibonacci.prototype.serialize=function(){var e;return _e.Z_e(),e={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2},t.replaceFields(e,t.Drawing.fibonacci.mapping)},t.Drawing.retracement=function(){_e.Z_e(),this.name="retracement"},t.inheritsFrom(t.Drawing.retracement,t.Drawing.fibonacci),t.Drawing.fibprojection=function(){_e.Z_e(),this.name="fibprojection",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.fibprojection,t.Drawing.fibonacci),t.Drawing.fibprojection.prototype.recommendedLevels=[0,.618,1,1.272,1.618,2.618,4.236],t.Drawing.fibprojection.prototype.click=function(e,i,a){var r;if(r=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,a)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],r.chart),this.parameters=t.clone(this.parameters),!0):(this.setPoint(1,i,a,r.chart),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,i,a,r.chart),this.penDown=!0,!1)},t.Drawing.fibprojection.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_=_e;if("segmen","t","m","i","ddl","e","s","ol","i","d",(i=this.stx.panels[this.panelName])&&(a=i.yAxis,this.p1)){_.O90(60);var F=_.t1w(37,3,12);_.O90(5);var P=_.t1w(3,12,10);r=this.p1[F]-this.p0["1"|P],n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),h=null,c=null,this.p2&&(h=this.stx.pixelFromTick(this.p2[0],i.chart),c=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1])),u={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=u),d=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),_.X$L(49);var L=_.D8z(2,11,1,3);if(p=e.measureText("161.8%").width+L,("auto"==(m=this.color)||t.isTransparent(m))&&(m=this.stx.defaultColor),this.p2){this.rays=[];for(var O=0;O<this.parameters.fibs.length;O++)if("unde","fined","seg","me","nt","a","u","t","o","a","u","t","o","l","e","ft",e.textAlign="left",e.fillStyle=m,(g=this.parameters.fibs[O]).display){if(f=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1]+r*g.level),y=t.xIntersection({x0:n,x1:s,y0:o,y1:l},f),v=this.parameters.extendLeft?0:n,b=i.left+i.width,this.parameters.printLevels){_.X$L(64);var E=_.t1w(67,11,263,10,10);_.O90(7);var I=_.t1w(7,17);_.O90(65);_.t1w(17,341,342,20);_.O90(7);_.t1w(6,9035);_.X$L(66);_.D8z(7,7890,15790,22106);_.O90(67);_.t1w(144080,16,7566,20);_.O90(68);_.t1w(8,17,4676,21);_.X$L(49);_.D8z(395,6326,1583,3);_.O90(7);_.t1w(9,5045);x=Math.round(g.level*E)/I+"%",b-=p,this.parameters.printValues&&(e.fillStyle=m,this.stx.canvasFont("stx_yaxis",e)),b<v&&(e.textAlign="right"),e.fillText(x,b,f),b<v?b+=5:b-=5}this.parameters.printValues&&y<i.width&&(C=this.stx.transformedPriceFromPixel(f,i),C=a.priceFormatter?a.priceFormatter(this.stx,i,C):this.stx.formatYAxisPrice(C,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,C,f,m,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(S=g.color)||t.isTransparent(S))&&(S=this.color),("auto"==S||t.isTransparent(S))&&(S=this.stx.defaultColor),("auto"==(w=g.color)||t.isTransparent(w))&&(w=this.fillColor),("auto"==w||t.isTransparent(w))&&(w=this.stx.defaultColor),e.fillStyle=w,k=t.clone(g.parameters),this.highlighted&&(k.opacity=1),this.stx.plotLine(v,b,f,f,this.highlighted?d:S,"segment",e,i,k),this.rays.push([[v,f],[b,f]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(b,f),e.lineTo(v,f),v?e.lineTo(n,c):e.lineTo(v,c),e.lineTo(b,c),"undefined"!=Me(w)&&e.fill(),e.globalAlpha=1}}D=t.clone(this.parameters.trend.parameters),this.highlighted&&(_.O90(7),D.opacity=_.t1w(0,"1")),this.stx.plotLine(n,s,o,l,d,"segment",e,i,D),this.p2&&this.stx.plotLine(s,h,l,c,d,"segment",e,i,D),this.highlighted&&(A="p0"==this.highlighted,T="p1"==this.highlighted,M="p2"==this.highlighted,this.littleCircle(e,n,o,A),this.littleCircle(e,s,l,T),this.littleCircle(e,h,c,M))}},t.Drawing.fibprojection.prototype.move=function(e,t,i){var a,r=_e;if(this.penDown){458876147,-1915082345,r.Z_e(),r.O90(35),a=r.t1w(64,"2");for(var n=1;458876147!==r.l9L(n.toString(),n.toString().length,35562);n++)this.copyConfig(),1!==this.p2?this.p1=[t,i]:this.p2=[t,i],a+=2;-1915082345!==r.i7j(a.toString(),a.toString().length,50783)&&(this.copyConfig(),5===this.p2?this.p1=[t,i]:this.p2=[t,i]),this.copyConfig(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],this.render(e)}},t.Drawing.fibprojection.prototype.reposition=function(e,t,i,a){var r,n,s;_e.c7b(),t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,"move"==t.action?(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.setPoint(1,t.p1[0]-n,t.p1[1]-s,r.chart),this.setPoint(2,t.p2[0]-n,t.p2[1]-s,r.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],r.chart),this.setPoint(1,this.p1[0],this.p1[1],r.chart),this.setPoint(2,this.p2[0],this.p2[1],r.chart),this.render(e)))},t.Drawing.fibprojection.prototype.intersected=function(e,i,a){var r,n,s,o,l,h;if(r=this.p0,n=this.p1,s=this.p2,!r||!n||!s)return null;for(var c in o={0:r,1:n,2:s})if(this.pointIntersection(o[c][0],o[c][1],a))return"d","r","ag",_e.X$L(1),this.highlighted=_e.t1w("p",c),{action:"drag",point:"p"+c};if(l=this.rays,!(h=this.lineIntersection(e,i,a,"segment",r,n)||this.lineIntersection(e,i,a,"segment",n,s)))for(var u=0;u<l.length;u++)if(this.lineIntersection(e,i,a,"ray",l[u][0],l[u][1],!0)){h=!0;break}return h?("mov","e",this.highlighted=!0,{action:"move",p0:t.clone(r),p1:t.clone(n),p2:t.clone(s),tick:e,value:i}):null},t.Drawing.fibprojection.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart))},t.Drawing.fibarc=function(){_e.c7b(),this.name="fibarc"},t.inheritsFrom(t.Drawing.fibarc,t.Drawing.fibonacci),t.Drawing.fibarc.prototype.recommendedLevels=[.382,.5,.618,1],t.Drawing.fibarc.prototype.setOuter=function(){var e,i,a,r,n,s,o;(e=this.stx.panels[this.panelName])&&(this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},i=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),a=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),r=this.stx.pixelFromTick(this.p0[0],e.chart),n=this.stx.pixelFromTick(this.p1[0],e.chart),_e.X$L(69),s=_e.D8z(0,a,i,"2"),o=t.xIntersection({x0:r,x1:n,y0:i,y1:a},s),this.outer.p0[1]=this.stx.valueFromPixel(s,e),this.outer.p0[0]=this.stx.tickFromPixel(o,e.chart))},t.Drawing.fibarc.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c,u,d,p;if("m","o","v","e",r=this.stx.panels[this.panelName]){if(n=this.p0,s=this.p1,o=this.outer,!n||!s)return null;for(var m in l={0:n,1:s})if(this.pointIntersection(l[m][0],l[m][1],a))return _e.X$L(1),this.highlighted=_e.D8z("p",m),{action:"drag",point:"p"+m};return this.lineIntersection(e,i,a,"segment",o.p0,o.p1)?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):(h={x0:n[0],x1:s[0],y0:n[1],y1:s[1]},c=t.convertBoxToPixels(this.stx,this.panelName,h),u={x:Math.abs(Math.sqrt(2)*(c.x1-c.x0)),y:Math.abs(Math.sqrt(2)*(c.y1-c.y0))},d=this.stx.pixelFromTick(e,r.chart),p=this.stx.pixelFromValueAdjusted(r,e,i),d+a.r<c.x1-u.x||d-a.r>c.x1+u.x||p+a.r<c.y1-u.y||p-a.r>c.y1+u.y||c.y0<c.y1&&p-a.r>c.y1||c.y0>c.y1&&p+a.r<c.y1?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))}},t.Drawing.fibarc.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k=_e;if("segm",k.Z_e(),"e","nt",(i=this.stx.panels[this.panelName])&&(a=i.yAxis,this.p1)){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),k.X$L(70),l=k.D8z(o,s),k.X$L(71),h=Math.abs(k.t1w(s,r,n,o)),c=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),("auto"==(u=this.color)||t.isTransparent(u))&&(u=this.stx.defaultColor);for(var D=0;D<this.parameters.fibs.length;D++)if(e.fillStyle=u,!((d=this.parameters.fibs[D]).level<0)&&d.display){k.O90(49);var A=k.D8z(2,9,0,16);k.O90(50);var T=k.D8z(14,16);p=Math.abs(this.p1[1]-this.p0[A])*Math.sqrt(T)*d.level,k.X$L(2);var M=k.D8z(0,1,7,7);k.X$L(72);var _=k.t1w(12,5,4,2);k.X$L(49);var F=k.t1w(19,2,0,19);k.X$L(73);var P=k.t1w(83,9,12,6,10);k.X$L(74);var L=k.t1w(6,5,19,7);if(m=this.p1[M]+p*(l?_:F)*(a.flipped?P:L),g=this.stx.pixelFromValueAdjusted(i,this.p0[0],m),f=t.xIntersection({x0:r,x1:n,y0:s,y1:o},g),this.parameters.printLevels){"ce","n","te","r",e.textAlign="center",k.X$L(68);var O=k.D8z(3,2,1002,3);k.X$L(57);var E=k.D8z(40,2,10);y=Math.round(d.level*O)/E+"%",this.parameters.printValues&&(e.fillStyle=u,this.stx.canvasFont("stx_yaxis",e)),e.fillText(y,n,Math.round(g-5))}e.textAlign="left",this.parameters.printValues&&f<i.width&&(v=m,v=a.priceFormatter?a.priceFormatter(this.stx,i,v):this.stx.formatYAxisPrice(v,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,v,g,u,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(b=d.color)||t.isTransparent(b))&&(b=this.color),("auto"==b||t.isTransparent(b))&&(b=this.stx.defaultColor),e.strokeStyle=this.highlight?c:b,("auto"==(x=d.color)||t.isTransparent(x))&&(x=this.fillColor),("auto"==x||t.isTransparent(x))&&(x=this.stx.defaultColor),e.fillStyle=x,e.globalAlpha=this.highlighted?1:d.parameters.opacity,e.lineWidth=d.parameters.lineWidth,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(e.lineWidth,d.parameters.pattern)),e.lineDashOffset=0),e.save(),e.beginPath(),k.X$L(75),e.scale(k.D8z(h,"1"),1),k.O90(8),e.arc(k.t1w(h,n),o,Math.abs(g-o),0,Math.PI,!l),"none"!=this.pattern&&e.stroke(),e.globalAlpha=.05,e.fill(),e.restore(),e.setLineDash&&e.setLineDash([]),k.X$L(3),e.globalAlpha=k.D8z(0,"1")}e.textAlign="left",C=t.clone(this.parameters.trend.parameters),this.highlighted&&(C.opacity=1),k.O90(38),this.stx.plotLine(n,k.t1w(r,n,2),o,k.D8z(s,o,2),c,"segment",e,i,C),this.highlighted&&(S="p0"==this.highlighted,w="p1"==this.highlighted,this.littleCircle(e,r,s,S),this.littleCircle(e,n,o,w))}},t.Drawing.fibfan=function(){this.name="fibfan",_e.Z_e()},t.inheritsFrom(t.Drawing.fibfan,t.Drawing.fibonacci),t.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],t.Drawing.fibfan.prototype.setOuter=function(){},t.Drawing.fibfan.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F=_e;if("aut","o","1","61",F.c7b(),".","8%",(i=this.stx.panels[this.panelName])&&(a=i.yAxis,this.p1)){r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=Math.min(o,s),h=Math.max(o,s),F.O90(7),c=F.t1w(l,h),F.O90(59),u=F.D8z(s,o,0,r,n),d=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),F.X$L(67);var P=F.t1w(312,20,3,14);p=e.measureText("161.8%").width+P,m=Number.MAX_VALUE,g=-1*Number.MAX_VALUE,("auto"==(f=this.color)||t.isTransparent(f))&&(f=this.stx.defaultColor),this.rays=[];for(var L=0;L<this.parameters.fibs.length;L++)if("segme","nt",e.fillStyle=f,(y=this.parameters.fibs[L]).display&&(v=this.stx.pixelFromValueAdjusted(i,this.p0[0],(this.p0[1]-this.p1[1])*y.level+this.p1[1]),b=t.xIntersection({x0:n,x1:n,y0:s,y1:o},v),x=i.left,n>r&&(x+=i.width),F.O90(76),C=F.D8z(s,x,r,s,r,v,b),!(r>x-(this.parameters.printLevels?p+5:0)&&n>r||r<x+(this.parameters.printLevels?p+5:0)&&n<r))){if(this.parameters.printLevels){F.X$L(66);var O=F.D8z(5,6,128,320);F.X$L(38);var E=F.D8z(18,710,40);F.X$L(77);var I=F.D8z(4530,453,1500);F.O90(1);var N=F.t1w(7749,11);S=Math.round(y.level*("1000"|O))/E+(9.96<I?"%":N),n>r?(x-=p,e.textAlign="left"):(x+=p,e.textAlign="right"),this.parameters.printValues&&(e.fillStyle=f,this.stx.canvasFont("stx_yaxis",e)),F.O90(76),C=F.t1w(s,x,r,s,r,v,b),e.fillText(S,x,C),n>r?(F.O90(8),x-=F.t1w(1,"5")):x+=5}e.textAlign="left",this.parameters.printValues&&b<i.width&&(w=this.stx.transformedPriceFromPixel(v,i),w=a.priceFormatter?a.priceFormatter(this.stx,i,w):this.stx.formatYAxisPrice(w,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,w,v,f,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(k=y.color)||t.isTransparent(k))&&(k=this.color),("auto"==k||t.isTransparent(k))&&(k=this.stx.defaultColor),("auto"==(D=y.color)||t.isTransparent(D))&&(D=this.fillColor),("auto"==D||t.isTransparent(D))&&(D=this.stx.defaultColor),e.fillStyle=D,this.parameters.printLevels&&(F.X$L(76),C=F.D8z(s,x,r,s,r,v,b)),A=t.clone(y.parameters),this.highlighted&&(A.opacity=1),this.stx.plotLine(r,x,s,C,this.highlighted?d:k,"segment",e,i,A),this.rays.push([[r,s],[x,C]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(x,C),e.lineTo(r,s),e.lineTo(x,s),e.fill(),e.globalAlpha=1,v<m&&(m=v),v>g&&(g=v)}for(var $=0;$<=1;$++)T=u?h-c*$:l+c*$,(T=Math.round(T))<m&&(m=T),T>g&&(g=T);this.highlighted&&(M="p0"==this.highlighted,_="p1"==this.highlighted,this.littleCircle(e,r,s,M),this.littleCircle(e,n,o,_))}},t.Drawing.fibtimezone=function(){this.name="fibtimezone",_e.c7b()},t.inheritsFrom(t.Drawing.fibtimezone,t.Drawing.fibonacci),t.Drawing.fibtimezone.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C=_e;if((i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),o=[1,0],l=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),20,h=this.p1[0]-this.p0[0],("auto"==(c=this.color)||t.isTransparent(c))&&(c=this.stx.defaultColor),e.textAlign="center",u=a,d=i.yAxis.top,p=i.yAxis.bottom,m=0,("auto"==(g=this.parameters.timezone.color)||t.isTransparent(g))&&(g=this.color),("auto"==g||t.isTransparent(g))&&(g=this.stx.defaultColor),("auto"==(f=this.parameters.timezone.color)||t.isTransparent(f))&&(f=this.fillColor),("auto"==f||t.isTransparent(f))&&(f=this.stx.defaultColor),this.parameters.printLevels&&(C.X$L(33),p-=C.D8z(20,0,"7")),y=t.clone(this.parameters.timezone.parameters),this.highlighted&&(y.opacity=1);do{if("segmen","t",u=this.stx.pixelFromTick(this.p0[0]+m*h,i.chart),a<r&&u>i.left+i.width)break;if(a>r&&u<i.left)break;this.parameters.printLevels&&(e.fillStyle=c,e.fillText(r>a?m:-1*m,u,p+7)),e.fillStyle=f,this.stx.plotLine(u,u,0,p,this.highlighted?l:g,"segment",e,i,y),e.globalAlpha=.05,e.beginPath(),e.moveTo(a,d),e.lineTo(u,d),e.lineTo(u,p),e.lineTo(a,p),e.fill(),e.globalAlpha=1,m=o[0]+o[1],o.unshift(m)}while(h);e.textAlign="left",this.stx.plotLine(a,r,n,s,l,"segment",e,i,y),this.highlighted?(v="p0"==this.highlighted,b="p1"==this.highlighted,this.littleCircle(e,a,n,v),this.littleCircle(e,r,s,b)):(x=this.stx.valueFromPixel(i.height/2,i),this.setPoint(0,this.p0[0],x,i.chart),C.O90(8),this.setPoint(C.t1w(1,"1"),this.p1[0],x,i.chart))}},t.Drawing.fibtimezone.prototype.intersected=function(e,i,a){var r,n,s,o;if(r=this.p0,n=this.p1,s=this.stx.panels[this.panelName],!r||!n||!s)return null;for(var l in o={0:r,1:n})if(this.pointIntersection(o[l][0],o[l][1],a))return _e.X$L(1),this.highlighted=_e.D8z("p",l),{action:"drag",point:"p"+l};return this.lineIntersection(e,i,a,"segment")||a.x0<=this.p0[0]&&a.x1>=r[0]?(this.highlighted=!0,{action:"move",p0:t.clone(r),p1:t.clone(n),tick:e,value:i}):(_e.Z_e(),null)},t.Drawing.arrow_v0=function(){_e.Z_e(),this.name="arrow",this.dimension=[11,11],this.points=[["M",3,0,"L",7,0,"L",7,5,"L",10,5,"L",5,10,"L",0,5,"L",3,5,"L",3,0]]},t.inheritsFrom(t.Drawing.arrow_v0,t.Drawing.shape),t.Drawing.xcross=function(){var e=_e;this.name="xcross",this.dimension=[7,7],e.O90(7),this.points=[["M",1,0,"L",3,2,"L",5,0,"L",6,1,"L",4,e.t1w(0,"3"),"L",6,5,"L",5,6,"L",3,4,"L",1,6,"L",0,5,"L",e.t1w(0,"2",e.O90(3)),3,"L",0,1,"L",1,0]]},t.inheritsFrom(t.Drawing.xcross,t.Drawing.shape),t.Drawing.check=function(){this.name="check",this.dimension=[8,9],_e.O90(8),this.points=[["M",1,5,"L",0,6,"L",_e.t1w(1,"2"),8,"L",7,1,"L",6,0,"L",2,6,"L",1,5]]},t.inheritsFrom(t.Drawing.check,t.Drawing.shape),t.Drawing.star=function(){var e=_e;this.name="star",this.dimension=[12,12],e.O90(35),e.Z_e(),this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",7,4,"L",11,4,"L",8,7,"L",e.D8z(32,"9"),11,"L",5.5,9,"L",2,e.D8z("11",10,e.X$L(0)),"L",3,7,"L",0,4]]},t.inheritsFrom(t.Drawing.star,t.Drawing.shape),t.Drawing.heart=function(){var e=_e;this.name="heart",e.O90(3),e.c7b(),this.dimension=[23,e.t1w(0,"20")],e.O90(7),this.points=[["M",11,3,"B",11,2.4,10,0,6,0,"B",0,0,0,7.5,0,7.5,"B",0,11,4,15.4,11,19,"B",18,15.4,22,11,22,7.5,"B",e.t1w(0,"22"),7.5,22,0,16,0,"B",13,0,11,2.4,11,3]]},t.inheritsFrom(t.Drawing.heart,t.Drawing.shape),t.Drawing.focusarrow=function(){this.name="focusarrow",this.dimension=[7,5],this.points=[["M",0,0,"L",2,2,"L",0,4,"L",0,0],["M",6,0,"L",4,2,"L",6,4,"L",6,0]]},t.inheritsFrom(t.Drawing.focusarrow,t.Drawing.shape),t.Drawing.crossline=function(){this.name="crossline"},t.inheritsFrom(t.Drawing.crossline,t.Drawing.horizontal),t.extend(t.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(e,t){return _e.c7b(),!1},adjust:function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.p1=t.clone(this.p0))},intersected:function(e,i,a){var r,n;if(!this.p0||!this.p1)return null;if(this.p1[0]+=1,r=this.lineIntersection(e,i,a,"line"),this.p1=t.clone(this.p0),!r&&("l","ine",this.p1[1]+=1,r=this.lineIntersection(e,i,a,"line"),this.p1=t.clone(this.p0),!r))return null;if(this.highlighted=!0,this.pointIntersection(this.p0[0],this.p0[1],a)){"p","0",1534396721,-2061433582,n=2;for(var s=1;1534396721!==_e.l9L(s.toString(),s.toString().length,23779);s++)this.highlighted="",n+=2;-2061433582!==_e.i7j(n.toString(),n.toString().length,48878)&&(this.highlighted=""),this.highlighted="p0"}return{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}},render:function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=_e;if(y.c7b(),"hori","zon","tal",a=this.stx.panels[this.panelName]){if(r=this.stx.pixelFromTick(this.p0[0],a.chart),n=this.stx.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),s=this.getLineColor(),o={pattern:this.pattern,lineWidth:this.lineWidth},y.O90(78),this.stx.plotLine(r,y.t1w(r,"100"),n,n,s,"horizontal",e,a,o),y.O90(1),this.stx.plotLine(r,r,n,y.t1w(n,100),s,"vertical",e,a,o),this.axisLabel&&!this.repositioner){this.stx.endClip(),l=this.p0[1],a.chart.transformFunc&&(l=a.chart.transformFunc(this.stx,a.chart,l)),780443048,y.X$L(0),h=-y.t1w("1766453124",0),c=2;for(var v=1;780443048!==y.l9L(v.toString(),v.toString().length,81756);v++)l=a.yAxis.priceFormatter?a.yAxis.priceFormatter(this.stx,a,l):this.stx.formatYAxisPrice(l,a),this.stx.createYAxisLabel(a,l,n,s),this.stx.startClip(a.name),c+=2;if(y.l9L(c.toString(),c.toString().length,92171)!==h&&(l=a.yAxis.priceFormatter?a.yAxis.priceFormatter(this.stx,a,l):this.stx.formatYAxisPrice(l,a),this.stx.createYAxisLabel(a,l,n,s),this.stx.startClip(a.name)),this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw){if(u=this.stx.dateFromTick(this.p0[0],a.chart,!0),t.ChartEngine.isDailyInterval(this.stx.layout.interval))u.setHours(0,0,0,0);else{y.O90(15);var b=y.t1w(1007,19,12,1);p=u.getSeconds()*b+u.getMilliseconds(),i.Date&&this.stx.displayZone&&(d=new i.Date(u.getTime(),this.stx.displayZone),u=new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes()),u=new Date(u.getTime()+p))}if(m=t.mmddhhmm(t.yyyymmddhhmm(u)),a.chart.xAxis.formatter)m=a.chart.xAxis.formatter(u,this.name,null,null,m);else if(this.stx.internationalizer){if(0!==u.getHours()||0!==u.getMinutes()){g=this.stx.internationalizer.monthDay.format(u),y.O90(5);y.t1w(5656,25,19);y.O90(79);y.t1w(29933,6,2,7,16320);g+=" "+this.stx.internationalizer.hourMinute.format(u)}else g=this.stx.internationalizer.yearMonthDay.format(u);m=g}this.stx.endClip(),this.stx.createXAxisLabel({panel:a,txt:m,x:r,backgroundColor:s,color:null,pointed:!0,padding:2}),this.stx.startClip(a.name)}}this.highlighted&&("p","0",f="p0"==this.highlighted,this.littleCircle(e,r,n,f))}}},!0),t.Drawing.speedarc=function(){this.name="speedarc",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedarc,t.Drawing.segment),t.extend(t.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},intersected:function(e,i,a){var r,n,s,o,l,h=_e;if("m","ove",!this.p0||!this.p1)return null;for(var c in r={0:this.p0,1:this.p1})if(this.pointIntersection(r[c][0],r[c][1],a))return h.X$L(1),this.highlighted=h.t1w("p",c),{action:"drag",point:"p"+c};if(this.lineIntersection(e,i,a,this.name)){this.highlighted=!0,-484368825,-104993853,2;for(var u=1;-484368825!==h.i7j(u.toString(),u.toString().length,65824);u++)return"m","ove",{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i};if(-104993853!==h.l9L(2..toString(),2..toString().length,34420))return{action:"",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}}return n=this.p1[0]-(this.p0[0]-this.p1[0]),s=this.p0[0],o=this.p1[1],h.X$L(35),h.Z_e(),l=this.p0[h.t1w(0,"1")],e>Math.max(n,s)||e<Math.min(n,s)||i>Math.max(l,o)||i<Math.min(l,o)?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i})},render:function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=_e;if("s","egment",(i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),v.O90(70),o=v.D8z(s,n),v.O90(71),l=Math.abs(v.D8z(n,a,r,s)),h=this.getLineColor(),e.strokeStyle=h,("auto"==(c=this.fillColor)||t.isTransparent(c))&&(c=this.stx.defaultColor),e.fillStyle=c,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(this.lineWidth,this.pattern)),e.lineDashOffset=0),this.stx.canvasFont("stx_yaxis",e);for(var b=1;b<3;b++){v.O90(9);var x=v.t1w(19,18,0);v.X$L(7);var C=v.D8z(5,6);v.X$L(80);var S=v.D8z(1,20,1,4,5);v.X$L(5);var w=v.t1w(0,3,6);u=Math.abs(this.p1[x]-this.p0[C])*Math.sqrt(S)*b/w,v.O90(81);var k=v.t1w(15,7,0,9);v.O90(82);var D=v.t1w(3,12,4,6);v.X$L(83);var A=v.t1w(6,16,10,463,13);v.O90(43);var T=v.D8z(107,6,0,18);v.X$L(31);var M=v.t1w(7,162,17,10);d=this.p1[k]+u*(o?D:A)*(i.yAxis.flipped?T:M),p=this.stx.pixelFromValueAdjusted(i,this.p0[0],d),e.save(),e.beginPath(),v.O90(23),e.scale(v.t1w(l,1),1),v.O90(8),e.arc(v.t1w(l,r),s,Math.abs(p-s),0,Math.PI,!o),e.globalAlpha=this.highlighted?1:this.defaultOpacity,"none"!=this.pattern&&e.stroke(),e.globalAlpha=.1,e.fill(),e.restore(),e.globalAlpha=1,this.printLevels&&("c","e","n","ter",e.fillStyle=h,e.textAlign="center",v.X$L(1),m=v.t1w(b,"/3"),e.fillText(m,r,Math.round(p-5)),e.fillStyle=c)}e.textAlign="left",g={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},this.stx.plotLine(a,r,n,s,h,"segment",e,i,g),e.setLineDash&&e.setLineDash([]),this.highlighted&&(f="p0"==this.highlighted,y="p1"==this.highlighted,this.littleCircle(e,a,n,f),this.littleCircle(e,r,s,y))}},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,_e.Z_e(),this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},serialize:function(){return _e.c7b(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}}},!0),t.Drawing.speedline=function(){_e.Z_e(),this.name="speedline",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedline,t.Drawing.speedarc),t.extend(t.Drawing.speedline.prototype,{intersected:function(e,i,a){var r,n,s,o;if(r=this.p0,n=this.p1,!r||!n)return null;for(var l in s={0:r,1:n})if(this.pointIntersection(s[l][0],s[l][1],a))return _e.O90(1),this.highlighted=_e.D8z("p",l),{action:"drag",point:"p"+l};o=this.rays,_e.c7b();for(var h=0;h<o.length;h++)if(this.lineIntersection(e,i,a,"ray",o[h][0],o[h][1],!0))return"mo","ve",this.highlighted=!0,{action:"move",p0:t.clone(r),p1:t.clone(n),tick:e,value:i};return null},render:function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D=_e;if("mi","ddle",(i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",e),o=this.getLineColor(),("auto"==(l=this.color)||t.isTransparent(l))&&(l=this.stx.defaultColor),e.strokeStyle=l,("auto"==(h=this.fillColor)||t.isTransparent(h))&&(h=this.stx.defaultColor),e.fillStyle=h,c={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},p=["1","2/3","1/3","3/2","3"],D.O90(84),m=[1,D.t1w(0,"2","3"),D.D8z(0,"1","3",D.X$L(84)),D.t1w(2,3,D.X$L(23)),3],g=[],this.rays=[];for(var A=0;A<m.length;A++)(f=m[A])>1&&!this.extension||(y=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*f),f>1?(v=t.xIntersection({x0:a,x1:r,y0:n,y1:y},s),g.push(v)):(v=t.xIntersection({x0:r,x1:r,y0:n,y1:s},y),g.push(y)),b=f>1?v:r,x=f>1?s:y,this.confineToGrid||(b=i.left,r>a&&(b+=i.width),D.X$L(76),x=D.D8z(n,b,a,n,a,y,r)),this.printLevels&&(1!=f||this.extension)&&(e.fillStyle=l,C=0,S=0,n>s?(S=-5,e.textBaseline="bottom"):(S=5,e.textBaseline="top"),a>r?(C=5,e.textAlign="right"):(C=-5,e.textAlign="left"),f>1?e.fillText(p[A],v+(this.confineToGrid?0:C),s):e.fillText(p[A],r,y+(this.confineToGrid?0:S)),e.fillStyle=h),this.stx.plotLine(a,b,n,x,this.highlighted?o:l,"segment",e,i,c),1==f&&(u=b,d=x),this.rays.push([[a,n],[b,x]]),e.globalAlpha=.1,e.beginPath(),e.moveTo(b,x),e.lineTo(a,n),e.lineTo(u,d),e.fill(),e.globalAlpha=1);e.textAlign="left",e.textBaseline="middle",this.confineToGrid&&(D.X$L(8),e.globalAlpha=D.t1w(1,"0.3"),e.beginPath(),D.X$L(7),e.strokeRect(a,n,D.t1w(a,r),D.D8z(n,s)),e.moveTo(a,g[1]),e.lineTo(r,g[1]),e.moveTo(a,g[2]),e.lineTo(r,g[2]),this.extension&&(e.moveTo(g[3],n),e.lineTo(g[3],s),e.moveTo(g[4],n),e.lineTo(g[4],s)),e.stroke(),e.globalAlpha=1),this.highlighted&&("p","0",w="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(e,a,n,w),this.littleCircle(e,r,s,k))}}},!0),t.Drawing.gannfan=function(){var e;e=2;for(var t=1;864296670!==_e.i7j(t.toString(),t.toString().length,33319);t++)this.name="",this.printLevels=!1,e+=2;335022174!==_e.l9L(e.toString(),e.toString().length,57844)&&(this.name="",this.printLevels=!0),this.name="gannfan",this.printLevels=!0},t.inheritsFrom(t.Drawing.gannfan,t.Drawing.speedline),t.extend(t.Drawing.gannfan.prototype,{render:function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w=_e;if("l","e","f","t",(i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",e),o=this.getLineColor(),("auto"==(l=this.color)||t.isTransparent(l))&&(l=this.stx.defaultColor),e.strokeStyle=l,("auto"==(h=this.fillColor)||t.isTransparent(h))&&(h=this.stx.defaultColor),e.fillStyle=h,c={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},w.O90(85),p=[1,2,3,4,8,w.D8z(1,"2"),w.D8z(3,0,"1",w.X$L(86)),w.D8z(4,1,w.X$L(23)),w.D8z(8,1,w.X$L(23))],this.rays=[];for(var k=0;k<p.length;k++)m=p[k],w.X$L(87),g=w.D8z(m,a,a,r),w.X$L(88),f=w.t1w(n,n,s,m),y=i.left,r>a&&(y+=i.width),w.O90(76),v=w.D8z(n,y,a,n,a,f,r),this.printLevels&&(e.fillStyle=l,b=0,x=0,n>s?(w.X$L(35),x=w.D8z(96,"5"),e.textBaseline="top"):("b","ot","to","m",x=-5,e.textBaseline="bottom"),a>r?(b=5,e.textAlign="left"):(b=-5,e.textAlign="right"),m>1?("x","1",w.X$L(1),e.fillText(w.D8z(m,"x1"),w.t1w(g,b),s)):(w.O90(53),e.fillText(w.t1w(m,1,"1x"),r,w.D8z(f,x,w.O90(1)))),e.fillStyle=h),this.stx.plotLine(a,y,n,v,this.highlighted?o:l,"segment",e,i,c),this.rays.push([[a,n],[y,v]]),1==m&&(u=y,d=v),e.globalAlpha=.1,e.beginPath(),e.moveTo(y,v),e.lineTo(a,n),e.lineTo(u,d),e.fill(),w.O90(35),e.globalAlpha=w.D8z(64,"1");e.textAlign="left",w.c7b(),e.textBaseline="middle",this.highlighted&&("p","1","p","0",C="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(e,a,n,C),this.littleCircle(e,r,s,S))}}},!0),t.Drawing.timecycle=function(){this.name="timecycle",_e.c7b(),this.printLevels=!0},t.inheritsFrom(t.Drawing.timecycle,t.Drawing.speedarc),t.extend(t.Drawing.timecycle.prototype,{intersected:function(e,i,a){var r,n,s,o;if(r=this.p0,n=this.p1,s=this.stx.panels[this.panelName],!r||!n||!s)return null;for(var l in o={0:r,1:n})if(this.pointIntersection(o[l][0],o[l][1],a))return _e.X$L(1),this.highlighted=_e.D8z("p",l),{action:"drag",point:"p"+l};return this.lineIntersection(e,i,a,"segment")||a.x0<=this.p0[0]&&a.x1>=r[0]?(this.highlighted=!0,{action:"move",p0:t.clone(r),p1:t.clone(n),tick:e,value:i}):null},render:function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C=_e;if("au","t","o","m","iddle",(i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),o=0,l=this.getLineColor(),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),20,h=this.p1[0]-this.p0[0],e.textAlign="center",c=a,u=i.yAxis.top,d=i.yAxis.bottom,("auto"==(p=this.color)||t.isTransparent(p))&&(p=this.stx.defaultColor),("auto"==(m=this.fillColor)||t.isTransparent(m))&&(m=this.stx.defaultColor),this.printLevels&&(C.O90(89),d-=C.D8z(20,"7")),g={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},f=[],e.save(),e.fillStyle=m,e.globalAlpha=.05;do{if(c=this.stx.pixelFromTick(this.p0[0]+o*h,i.chart),o++,a<r&&c>i.left+i.width)break;if(a>r&&c<i.left)break;c<i.left||c>i.left+i.width||(e.beginPath(),e.moveTo(a,u),e.lineTo(c,u),e.lineTo(c,d),e.lineTo(a,d),e.fill(),f.push({c:o,x:c}))}while(h);e.globalAlpha=1,y=0;for(var S=0;S<f.length;S++)if("segme","nt",this.stx.plotLine(f[S].x,f[S].x,0,d,this.highlighted?l:p,"segment",e,i,g),this.printLevels){e.fillStyle=p,C.O90(82);var w=C.t1w(10,45,14,18);this.stx.chart.context.measureText(f[S].c).width+w<this.stx.layout.candleWidth+y?(e.fillText(f[S].c,f[S].x,d+7),y=0):y+=this.stx.layout.candleWidth}e.restore(),e.textAlign="left",this.stx.plotLine(a,r,n,s,l,"segment",e,i,g),this.highlighted?("p","0",v="p0"==this.highlighted,b="p1"==this.highlighted,this.littleCircle(e,a,n,v),this.littleCircle(e,r,s,b)):(x=this.stx.valueFromPixel(i.height/2,i),this.setPoint(0,this.p0[0],x,i.chart),this.setPoint(1,this.p1[0],x,i.chart))}}},!0),t.Drawing.regression=function(){_e.Z_e(),this.name="regression"},t.inheritsFrom(t.Drawing.regression,t.Drawing.segment),t.extend(t.Drawing.regression.prototype,{configs:["color","lineWidth","pattern","active1","color1","lineWidth1","pattern1","active2","color2","lineWidth2","pattern2","active3","color3","lineWidth3","pattern3"],copyConfig:function(e){var i;t.Drawing.copyConfig(this,e),i=this.stx.currentVectorParameters,this.active1=!!i.active1,this.active2=!!i.active2,this.active3=!!i.active3,this.color1=i.color1||"auto",this.color2=i.color2||"auto",this.color3=i.color3||"auto",this.lineWidth1=i.lineWidth1,this.lineWidth2=i.lineWidth2,this.lineWidth3=i.lineWidth3,this.pattern1=i.pattern1,this.pattern2=i.pattern2,this.pattern3=i.pattern3},$controls:['cq-cvp-controller[cq-cvp-header="1"]','cq-cvp-controller[cq-cvp-header="2"]','cq-cvp-controller[cq-cvp-header="3"]'],click:function(e,t,i){var a,r,n,s;if(!(t<0)){if(this.copyConfig(),a=this.stx.panels[this.panelName],!this.penDown){if(this.setPoint(0,t,i,a.chart),this.penDown=!0,r=this.stx,this.field=r.highlightedDataSetField,!this.field&&a!=r.chart.panel){for(var o in r.chart.seriesRenderers)if((n=r.chart.seriesRenderers[o]).params.panel==a.name){this.field=n.seriesParams[0].field;break}for(var l in r.layout.studies)if((s=r.layout.studies[l]).panel==a.name){this.field=Object.keys(s.outputMap)[0];break}}return!1}return this.accidentalClick(t,i)?this.dragToDraw:(this.setPoint(1,t,i,a.chart),this.penDown=!1,!0)}},getYValue:function(e){var i,a,r,n,s,o,l;if(i=this.stx.chart.dataSet[e],a=this.stx.chart.dataSet[e],!i)return null;if(r=this.stx.panels[this.panelName],n=this.stx.getYAxisByField(r,this.field)||r.yAxis,this.stx.charts[r.name]&&r.chart.transformFunc&&n==r.yAxis&&(a=i.transform),!a)return null;if(s=null,o=null,l=this.stx.defaultPlotField||"Close",_e.Z_e(),this.field){if(!(o=t.existsInObjectChain(a,this.field)))return null;s=o=o.obj[o.member],i!=a&&(s=(s=t.existsInObjectChain(i,this.field)).obj[s.member]),"object"==Me(o)&&(o=o[l],s=s[l])}else o=a[l],s=i[l];return{transformed:o,untransformed:s}},render:function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N=_e;if("se","g","ment","segm","en","t",(t=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],t.chart),a=this.stx.pixelFromTick(this.p1[0],t.chart),i<t.left&&a<t.left||i>t.right&&a>t.right))){r=this.stx.getYAxisByField(t,this.field),n=[],s=[],o=0,l=0,h=0,N.O90(8),c=N.D8z(1,"0"),u=Math.min(this.p1[0],this.p0[0]),d=Math.max(this.p1[0],this.p0[0])+1,N.O90(7),p=N.D8z(u,d);for(var $=u;$<d;$++)(m=this.getYValue($))&&(n.push(m.transformed),s.push(m.untransformed));for(g=n.length,N.O90(90),f=N.t1w(0,2,g,"1",g),y=Math.pow(f,2),N.X$L(91),v=N.D8z(3,g,2,1,f),N.Z_e(),$=0;$<g;$++)h+=g*n[$]-o,o+=n[$],c+=g*s[$]-l,l+=s[$];if(N.X$L(92),b=N.D8z(v,o,y,g,f,h,g),N.O90(93),x=N.D8z(o,f,b,g),N.O90(92),C=N.D8z(v,l,y,g,f,c,g),N.X$L(93),S=N.D8z(l,f,b,g),this.p0[0]<this.p1[0]?(w=x,N.X$L(94),k=N.t1w(x,p,b),this.p0[1]=S,N.O90(94),this.p1[1]=N.D8z(S,p,C)):(N.O90(94),w=N.t1w(x,p,b),k=x,N.X$L(94),this.p0[1]=N.t1w(S,p,C),this.p1[1]=S),D=this.stx.pixelFromTransformedValue(w,t,r),A=this.stx.pixelFromTransformedValue(k,t,r),T=this.getLineColor(),M={pattern:this.pattern,lineWidth:this.lineWidth},this.stx.plotLine(i,a,D,A,T,"segment",e,t,M),N.O90(7),this.stx.plotLine(i,i,N.D8z(20,D),N.t1w(D,"20",N.O90(78)),T,"segment",e,t,M),N.X$L(7),this.stx.plotLine(a,a,N.t1w(20,A),N.t1w(A,20,N.X$L(1)),T,"segment",e,t,M),this.active1||this.active2||this.active3){for(N.X$L(23),_=N.t1w(g,o),F=0,$=0;$<g;$++)F+=Math.pow(n[$]-_,2);if(N.X$L(23),P={context:e,panel:t,points:{0:{x:i,v:w},1:{x:a,v:k}},stddev:Math.sqrt(N.t1w(g,F)),yAxis:r},this.lines={},this.active1&&(this.renderStddev("1","p",P),this.renderStddev("1","n",P)),this.active2){N.O90(8),L=-N.t1w(1,"1692343883"),-54397315,O=2;for(var z=1;N.l9L(z.toString(),z.toString().length,33834)!==L;z++)this.renderStddev(15812,"p",P),O+=2;-54397315!==N.i7j(O.toString(),O.toString().length,20133)&&this.renderStddev("2","p",P),this.renderStddev("2","n",P)}this.active3&&(this.renderStddev("3","p",P),this.renderStddev("3","n",P))}this.highlighted?("p","1",E="p0"==this.highlighted,I="p1"==this.highlighted,this.littleCircle(e,i,D,E),this.littleCircle(e,a,A,I)):(this.pixelX=[i,a],this.pixelY=[D,A])}},renderStddev:function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k=_e;if("m","iddle","patter","n",k.O90(95),a=k.t1w("stddev",t,e),k.X$L(1),r=k.D8z("color",e),k.O90(1),n=k.t1w("pattern",e),k.O90(1),s=k.t1w("lineWidth",e),l=(o=i.points)[0].v,h=o[1].v,c=i.stddev,u="n"===t?-1*e:1*e,d=this.stx,p=i.panel,m=i.yAxis,g={name:a,color:this.getLineColor(this[r]),type:"segment",y0:d.pixelFromTransformedValue(l+c*u,p,m),y1:d.pixelFromTransformedValue(h+c*u,p,m),params:{pattern:this[n],lineWidth:this[s]}},k.c7b(),this.lines){1280407686,1367195547,f=2;for(var D=1;1280407686!==k.i7j(D.toString(),D.toString().length,81801);D++)this.lines[a]=g,f+=2;1367195547!==k.l9L(f.toString(),f.toString().length,59625)&&(this.lines[a]=g)}y=i.context,v=o[0].x,b=o[1].x,d.plotLine(v,b,g.y0,g.y1,g.color,g.type,y,p,g.params),d.plotLine(v,v,g.y0-10,g.y0+10,g.color,g.type,y,p,g.params),d.plotLine(b,b,g.y1-10,g.y1+10,g.color,g.type,y,p,g.params),k.O90(1),x=k.t1w(e,""),k.X$L(96);var A=k.t1w(5,16,1605,20);C=Math.max(v,b)+A,S=v<b?g.y1:g.y0,y.fillStyle=g.color,y.save(),y.textBaseline="middle",y.fillText(x,C,S),y.restore(),i.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(v>=p.chart.left&&v<=p.chart.right||b>=p.chart.left&&b<=p.chart.right)&&(k.O90(97),w=k.D8z(u,c,v<b?h:l),d.endClip(),d.createYAxisLabel(p,i.formatPrice(w,m),S,g.color,null,y,m),d.startClip(p.name))},intersected:function(e,i,a){var r,n,s,o,l,h,c;if(!this.pixelX||!this.pixelY)return null;if(r=this.repositionIntersection(e,i))return r;n={0:this.pixelX,1:this.pixelY};for(var u=0;u<2;u++)if(this.pointIntersection(n[0][u],n[1][u],a,!0))return"d","r","a","g",_e.O90(1),this.highlighted=_e.D8z("p",u),{action:"drag",point:"p"+u};if(s=this,o=this.pixelX[0],l=this.pixelX[1],c=(h=function(t){var r,n;return r=[o,t.y0],n=[l,t.y1],s.lineIntersection(e,i,a,s.name,r,n,!0)})({y0:this.pixelY[0],y1:this.pixelY[1]}),_e.Z_e(),!c&&this.lines)for(var d in this.lines)if(h(this.lines[d])){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},repositionIntersection:function(e,i){return _e.c7b(),!(!this.p0||!this.p1)&&(!(this!=this.stx.repositioningDrawing||!this.highlighted)&&(!0===this.highlighted?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}:{action:"drag",point:this.highlighted}))},lineIntersection:function(e,i,a,r,n,s,o){var l,h,c;return o?(n||(n=this.p0),s||(s=this.p1),!(!n||!s)&&(l=this.stx,void 0!==(h=t.convertBoxToPixels(l,this.panelName,a)).x0&&(c={x0:n[0],x1:s[0],y0:n[1],y1:s[1]},t.boxIntersects(h.x0,h.y0,h.x1,h.y1,c.x0,c.y0,c.x1,c.y1)))):(_e.X$L(1),console.log(_e.D8z(r," lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.")),!1)},boxIntersection:function(e,t,i){return!(i.cx0>Math.max(this.pixelX[0],this.pixelX[1])||i.cx1<Math.min(this.pixelX[0],this.pixelX[1]))&&(!(!this.stx.repositioningDrawing&&(i.cy1<this.pixelY[0]||i.cy0>this.pixelY[1]))&&(_e.Z_e(),!0))},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.color1=t.col1,this.color2=t.col2,this.color3=t.col3,this.active1=t.dev1,this.active2=t.dev2,this.active3=t.dev3,this.panelName=t.pnl,this.pattern=t.ptrn,this.pattern1=t.ptrn1,this.pattern2=t.ptrn2,this.pattern3=t.ptrn3,this.lineWidth=t.lw,this.lineWidth1=t.lw1,this.lineWidth2=t.lw2,this.lineWidth3=t.lw3,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.trendline=function(){this.name="trendline"},t.inheritsFrom(t.Drawing.trendline,t.Drawing.segment),t.Drawing.trendline.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.trendline.prototype.measure=function(){},t.Drawing.trendline.prototype.reconstruct=function(e,i){t.Drawing.segment.prototype.reconstruct.call(this,e,i),this.callout=new t.Drawing.callout,this.callout.reconstruct(e,i.callout)},t.Drawing.trendline.prototype.serialize=function(){var e,i;e=t.Drawing.segment.prototype.serialize.call(this),i=2;for(var a=1;-1506743842!==_e.l9L(a.toString(),a.toString().length,19657);a++)e.callout=this.callout.serialize(),i+=2;return-1048669448!==_e.l9L(i.toString(),i.toString().length,75674)&&(e.callout=this.callout.serialize()),e},t.Drawing.trendline.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k=_e;if(k.Z_e(),(i=this.stx.panels[this.panelName])&&(t.Drawing.segment.prototype.render.call(this,e),this.callout||(this.callout=new t.Drawing.callout,a=t.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(this.stx,a)),this.callout.p0=t.clone(this.p0),r=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),isFinite(s)&&isFinite(o))){k.X$L(98),l=k.t1w(r,"2",n,2),k.X$L(4),h=k.t1w(o,2,s),this.fontSize=t.stripPX(this.font&&this.font.size||13),c=1.2*this.callout.w+("c"==this.callout.stemEntry[0]?0:50),u=Math.sqrt(Math.pow(n-r,2)+Math.pow(o-s,2)),k.O90(50);var D=k.t1w(3,4);k.X$L(50);var A=k.t1w(13,12);d=c/(u||c)*(this.p1[D]<this.p0[1]?1:A),k.O90(99),p=k.t1w(o,l,d,h),k.O90(43),m=k.t1w(h,l,n,d),this.callout.p0[0]=this.stx.tickFromPixel(p,i.chart),this.callout.p0[1]=this.stx.priceFromPixel(m,i),this.callout.v0=this.callout.p0[1],this.callout.p1=t.clone(this.p0),this.callout.stx=this.stx,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,k.O90(67);var T=k.D8z(69,14,0,5);g=this.p1[1]-this.p0[T],k.O90(6);var M=k.D8z(9,0,13,2);k.X$L(1);var _=k.t1w(0,1);k.O90(100);var F=k.D8z(2,1,16,12,14);if(this.callout.text=Number(g).toFixed(M)+(0===this.p0[_]?"":" ("+Number(100*g/this.p0[1]).toFixed(F)+"%) ")+Math.abs(this.p1[0]-this.p0[0])+" Bars",f=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<20)v=this.stx.pixelFromTick(f,i.chart),k.X$L(101),b=k.D8z(r,r,s,v,s,n,o),y=this.stx.priceFromPixel(b,i)||h;else{1214192260,k.O90(18),x=k.t1w("679717891",32),C=2;for(var P=1;1214192260!==k.i7j(P.toString(),P.toString().length,40438);P++)y=this.stx.priceFromPixel(h,i),k.X$L(8),C+=k.t1w(1,"2");k.l9L(C.toString(),C.toString().length,32119)!==x&&(y=this.stx.priceFromPixel(h,i))}this.callout.stem={t:f,v:y},this.callout.renderText(),this.callout.render(e),this.highlighted&&(S="p0"==this.highlighted,w="p1"==this.highlighted,this.littleCircle(e,r,s,S),this.littleCircle(e,n,o,w))}},t.Drawing.trendline.prototype.lineIntersection=function(e,i,a,r){return _e.c7b(),t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,a,"segment")},t.Drawing.trendline.prototype.intersected=function(e,i,a){var r,n;return this.p0&&this.p1?(r=this.callout.intersected(e,i,a),n=t.Drawing.segment.prototype.intersected.call(this,e,i,a),_e.c7b(),this.callout.highlighted=!(!r&&!n),n||(r?("mov","e",{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null)):null},t.Drawing.average=function(){this.name="average"},t.inheritsFrom(t.Drawing.average,t.Drawing.regression),t.extend(t.Drawing.average.prototype,{configs:t.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var e,i,a,r,n,s;this.p0&&this.p1&&(".mMe","asu","re",","," ","&","e","nsp;",this.stx.setMeasure(0,!1,this.p0[0],this.p1[0],!0,this.name),e=[],i="",this.active1&&e.push("1"),this.active2&&e.push("2"),this.active3&&e.push("3"),e.length&&(i="&ensp;"+e.join(", ")+" &sigma;"),a=(this.stx.drawingContainer||document).querySelector(".mMeasure"),n=(r=this.stx.controls.mSticky)&&r.querySelector(".mStickyInterior"),a&&(a.innerHTML+=i),n&&((s=[]).push(t.capitalize(this.name)),s.push(this.field||this.stx.defaultPlotField||"Close"),s.push(n.innerHTML+i),n.innerHTML=s.join("<br>")))},render:function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w=_e;if("se","gme","n","t",(t=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],t.chart),a=this.stx.pixelFromTick(this.p1[0],t.chart),i<t.left&&a<t.left||i>t.right&&a>t.right))){r=this.stx.getYAxisByField(t,this.field),n=this.stx,w.c7b(),s=Math.min(this.p1[0],this.p0[0]),w.X$L(102);var k=w.D8z(14,2,0,20,18);for(o=Math.max(this.p1[0],this.p0[0])+k,w.X$L(7),w.D8z(s,o),l=0,h=[],c=s;c<o;c++)null!==(u=this.getYValue(c))&&(l+=u.transformed,h.push(u));if(d=h.length){if(w.O90(23),p=w.D8z(d,l),m=n.pixelFromTransformedValue(p,t,r),g=this.getLineColor(),f={pattern:this.pattern,lineWidth:this.lineWidth},n.plotLine(i,a,m,m,g,"segment",e,t,f),w.X$L(7),n.plotLine(i,i,w.t1w(20,m),w.D8z(m,20,w.O90(1)),g,"segment",e,t,f),w.X$L(7),n.plotLine(a,a,w.D8z(20,m),w.t1w(m,20,w.X$L(1)),g,"segment",e,t,f),!this.axisLabel||this.highlighted||this.penDown||(i>=t.chart.left&&i<=t.chart.right||a>=t.chart.left&&a<=t.chart.right)&&(n.endClip(),n.createYAxisLabel(t,A(p,r),m,g,null,e,r),n.startClip(t.name)),this.active1||this.active2||this.active3){1817737647,931745406,y=2;for(var D=1;1817737647!==w.i7j(D.toString(),D.toString().length,79070);D++)v=1,y+=2;for(931745406!==w.l9L(y.toString(),y.toString().length,75066)&&(v=1),v=0,c=0;c<d;c++)u=h[c],v+=Math.pow(u.transformed-p,2);w.X$L(23),b=Math.sqrt(w.D8z(d,v)),x={context:e,formatPrice:A,panel:t,points:{0:{x:i,v:p},1:{x:a,v:p}},stddev:b,yAxis:r},this.lines={},this.active1&&(this.renderStddev("1","p",x),this.renderStddev("1","n",x)),this.active2&&(this.renderStddev("2","p",x),this.renderStddev("2","n",x)),this.active3&&(this.renderStddev("3","p",x),this.renderStddev("3","n",x))}this.highlighted?(C="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(e,i,m,C),this.littleCircle(e,a,m,S)):(this.pixelX=[i,a],this.pixelY=[m,m])}}function A(e,i){var a;w.Z_e(),a=2;for(var r=1;1184964041!==w.i7j(r.toString(),r.toString().length,32039);r++)e=i&&i.priceFormatter?i.priceFormatter(n,t,e):n.formatYAxisPrice(e,t,null,i),a+=2;return-211484282!==w.l9L(a.toString(),a.toString().length,41657)&&(e=i||i.priceFormatter?i.priceFormatter(n,t,e):n.formatYAxisPrice(e,t,1,i)),e}},reconstruct:function(e,i){this.axisLabel=i.al,t.Drawing.regression.prototype.reconstruct.call(this,e,i)},serialize:function(){var e;return _e.c7b(),(e=t.Drawing.regression.prototype.serialize.call(this)).al=this.axisLabel,e}},!0),t.Drawing.quadrant=function(){this.name="quadrant"},t.inheritsFrom(t.Drawing.quadrant,t.Drawing.regression),t.extend(t.Drawing.quadrant.prototype,{configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},$controls:[],render:function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S=_e;if("q","uadran","t","quadr","a","n","t","segm","e","nt",(a=(i=this.stx).panels[this.panelName])&&this.p1&&(r=i.pixelFromTick(this.p0[0],a.chart),n=i.pixelFromTick(this.p1[0],a.chart),!(r<a.left&&n<a.left||r>a.right&&n>a.right))){s=this.stx.getYAxisByField(a,this.field),o=null,l=null;for(var w=Math.min(this.p1[0],this.p0[0]);w<=Math.max(this.p1[0],this.p0[0]);w++)null!==(h=this.getYValue(w))&&((null===o||h.transformed>o)&&(o=h.transformed),(null===l||h.transformed<l)&&(l=h.transformed));c=i.pixelFromTransformedValue(o,a,s),S.O90(103),S.c7b(),u=i.pixelFromTransformedValue(S.t1w(4,l,3,o),a,s),S.X$L(104),d=i.pixelFromTransformedValue(S.t1w("3",o,l,2),a,s),S.O90(4),p=i.pixelFromTransformedValue(S.t1w(l,2,o),a,s),S.X$L(105),m=i.pixelFromTransformedValue(S.D8z(l,2,o,"3"),a,s),S.O90(106),g=i.pixelFromTransformedValue(S.t1w(0,"4",o,3,l),a,s),f=i.pixelFromTransformedValue(l,a,s),this.p0[1]=0,this.p1[1]=!1,y=this.getLineColor(),("auto"==(v=this.fillColor)||t.isTransparent(v))&&(v=i.defaultColor),e.fillStyle=v,b={pattern:this.pattern,lineWidth:this.lineWidth},i.plotLine(r,n,c,c,y,"segment",e,a,b),i.plotLine(r,n,f,f,y,"segment",e,a,b),"quadrant"==this.name?(i.plotLine(r,n,u,u,y,"segment",e,a,b),i.plotLine(r,n,g,g,y,"segment",e,a,b)):"tirone"==this.name&&("s","eg","me","nt","segmen","t",i.plotLine(r,n,d,d,y,"segment",e,a,b),i.plotLine(r,n,m,m,y,"segment",e,a,b)),i.plotLine(r,r,c,f,y,"segment",e,a,b),i.plotLine(n,n,c,f,y,"segment",e,a,b),i.plotLine(r,n,p,p,y,"segment",e,a,t.extend(b,{opacity:"tirone"==this.name?.2:1})),e.globalAlpha=.1,e.beginPath(),S.O90(7),e.fillRect(r,c,S.D8z(r,n),S.D8z(c,f)),"quadrant"==this.name?(S.X$L(7),e.fillRect(r,u,S.D8z(r,n),S.t1w(u,g))):"tirone"==this.name&&(S.O90(7),e.fillRect(r,d,S.t1w(r,n),S.t1w(d,m))),e.globalAlpha=1,this.highlighted?(x="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(e,r,p,x),this.littleCircle(e,n,p,C)):("t","ir","on","e",this.pixelX=[r,n],this.pixelY=[c,f,p],"quadrant"===this.name&&this.pixelY.push(u,g),"tirone"===this.name&&this.pixelY.push(d,m))}},intersected:function(e,i,a){var r,n,s=this,o=_e,l=this.pixelX,h=this.pixelY;if(!l||!h)return null;if(r=this.repositionIntersection(e,i))return r;for(var c=0;c<2;c++)if(this.pointIntersection(l[c],h[2],a,!0))return o.X$L(1),this.highlighted=o.t1w("p",c),{action:"drag",point:"p"+c};return n=[],l.forEach((function(e){o.Z_e(),n.push({p0:[e,h[0]],p1:[e,h[1]]})})),h.forEach((function(e){o.c7b(),n.push({p0:[l[0],e],p1:[l[1],e]})})),n.some((function(t){var r=t.p0,n=t.p1;return o.c7b(),s.lineIntersection(e,i,a,s.name,r,n,!0)}))?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},reconstruct:function(e,t){var i,a=_e;a.O90(35),i=a.t1w(64,"2");for(var r=1;-534594347!==a.l9L(r.toString(),r.toString().length,66321);r++)this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,i+=2;-893881823!==a.l9L(i.toString(),i.toString().length,43739)&&(this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0),this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.tirone=function(){_e.Z_e(),this.name="tirone"},t.inheritsFrom(t.Drawing.tirone,t.Drawing.quadrant),t.Drawing.elliottwave=function(){this.name="elliottwave",_e.X$L(8),this.lastPoint=_e.t1w(1,"0"),this.points=[],this.pts=[],this.dx=0,this.dy=-20,this.dragToDraw=!1,_e.Z_e(),this.annotationPoints=[],this.edit=null},t.inheritsFrom(t.Drawing.elliottwave,t.Drawing.annotation),t.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},t.Drawing.elliottwave.prototype.initializeSettings=function(e){_e.Z_e(),e.currentVectorParameters.waveParameters=t.clone(t.Drawing.elliottwave.defaultTemplate)},t.Drawing.elliottwave.prototype.configs=["color","lineWidth","lineColor","pattern","font","waveParameters"],t.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],t.Drawing.elliottwave.prototype.construct=function(e,t){var i;this.stx=e,this.panelName=t.name,i=e.currentVectorParameters,_e.Z_e(),Object.assign(this,i.waveParameters)},t.Drawing.elliottwave.prototype.serialize=function(){var e,i=_e;i.c7b(),e={};for(var a=0;a<this.points.length;a++)i.O90(1),e[i.D8z("d",a)]=this[i.t1w("d",a)],i.X$L(1),e[i.D8z("tzo",a)]=this[i.t1w("tzo",a)],i.X$L(1),e[i.D8z("v",a)]=this[i.D8z("v",a)];return e.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fnt:t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"}))},e)},t.Drawing.elliottwave.prototype.reconstruct=function(e,i){_e.c7b(),this.stx=e,this.color=i.col,this.panelName=i.pnl,this.pattern=i.ptrn,this.lineWidth=i.lw,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.decoration=i.decor,this.showLines=i.show,this.dx=i.dx,this.dy=i.dy,this.trend=i.trend,this.annotationPoints=i.annotations.split(","),"enclosed"===i.decor&&this.calculateRadius(e.chart.tempCanvas.context),this.maxSegments=i.mxSeg,this.reconstructPoints(i),this.adjust()},t.Drawing.elliottwave.prototype.reconstructPoints=function(e){var i,a,r,n=_e;if(i=this.stx.panels[this.panelName]){n.c7b();for(var s=0;s<this.annotationPoints.length;s++)n.O90(1),this[n.D8z("d",s)]=e[n.D8z("d",s)],n.O90(1),this[n.t1w("v",s)]=e[n.D8z("v",s)],n.X$L(1),this[n.t1w("tzo",s)]=e[n.D8z("tzo",s)],a=t.strToDateTime(e["d"+s]),r=this.stx.tickFromDate(a,i.chart),this.points.push([r,e["v"+s]])}},t.Drawing.elliottwave.prototype.calculateRadius=function(e){var t,i;this.getFontString(),e.font=this.fontString,t=0;for(var a=0;a<this.annotationPoints.length;a++)t<(i=e.measureText(this.annotationPoints[a]).width)&&(t=i);this.enclosedRadius=t},t.Drawing.elliottwave.prototype.check=function(e,t,i){var a,r,n=_e;if(1===i&&2===this.points.length)return!0;return n.O90(7),n.c7b(),!((a=this.points[n.t1w(1,i)])&&e<=a[0])&&(n.X$L(1),!((r=this.points[n.t1w(i,1)])&&e>=r[0])&&!!function(e){n.c7b();for(var t=2;t<e.length;t++)if(Math.sign(e[t][1]-e[t-1][1])==Math.sign(e[t-1][1]-e[t-2][1]))return!1;return!0}(this.points))},t.Drawing.elliottwave.prototype.move=function(e,t,i){this.copyConfig(),_e.X$L(49);var a=_e.t1w(2,4,0,6);this.points[this.lastPoint+a]=[t,i],this.render(e)},t.Drawing.elliottwave.prototype.adjust=function(){var e,i,a=_e;if(e=this.stx.panels[this.panelName]){a.Z_e();for(var r=0;this.maxSegments+1>r;r++)a.O90(1),i=this[a.t1w("d",r)],this.setPoint(r,i,this["v"+r],e.chart),this.points[r][0]=this.stx.tickFromDate(t.strToDateTime(i),e.chart),a.O90(1),this.points[r][1]=this[a.D8z("v",r)]}},t.Drawing.elliottwave.prototype.click=function(e,t,i){var a,r=_e;if(a=this.stx.panels[this.panelName]){if(r.Z_e(),this.copyConfig(),!this.penDown){this.setPoint(0,t,i,a.chart),this.points.push(this.p0),this.penDown=!0,this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),"enclosed"===this.decoration&&this.calculateRadius(e),r.X$L(1);var n=r.t1w(0,1);return this.maxSegments=this.annotationPoints.length-n,r.O90(8),this.trend=r.D8z(1,"1"),!1}return this.accidentalClick(t,i)?(this.penDown=!0,!1):!!(this.check(t,i,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,t,i,a.chart),1===this.lastPoint&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments))&&(this.penDown=!1,!0)}},t.Drawing.elliottwave.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M=_e;if("ce","nt","e","r",i=this.stx.panels[this.panelName]){if(a=this.stx,r=this.annotationPoints,n=this.pattern?t.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),e.font=this.fontString,e.textAlign="center",e.textBaseline="middle",e.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(e),this.lastFontString=this.fontString,s=this.getLineColor(),e.fillStyle=e.strokeStyle=s,e.save(),e.setLineDash(n),o=this.dx,l=this.dy,h=this.points,c=this.pts,u=!this.showLines&&this.highlighted,d=h.length,this.penDown&&this.segment){M.X$L(43);var _=M.t1w(26,12,0,2);p=this.trend*(d%_-.5)<0,i.yAxis.flipped&&(p=!p),this.drawDropZone(e,h[d-2][1],this.stx.priceFromPixel(i.yAxis[p?"top":"bottom"]),h[d-2][0])}else if("string"==typeof this.highlighted&&this.stx.repositioningDrawing){"b","ott","o","m","m","a","x",m=parseInt(this.highlighted.substring(1,this.highlighted.length),10),M.X$L(50);var F=M.t1w(16,18);p=this.trend*(m%F-.5)>0,M.X$L(107),g=h[M.D8z(64,"1",m)],M.X$L(1),f=h[M.D8z(m,1)],y=m>0?g[1]:f[1],f&&(y=Math[p?"max":"min"](y,f[1])),i.yAxis.flipped&&(p=!p),this.drawDropZone(e,y,this.stx.priceFromPixel(i.yAxis[p?"top":"bottom"]),g?g[0]:null,f?f[0]:null)}for(var P=0;P<d;P++)v=h[P],b=a.pixelFromTick(v[0],i.chart),x=a.pixelFromValueAdjusted(i,v[0],v[1]),c[P]=[b,x];if(M.X$L(0),P=M.D8z("0",0),this.showLines||u){for(e.beginPath(),u&&(e.globalAlpha=.3);P<c.length;P++)e.lineTo(c[P][0],c[P][1]);e.stroke(),P=0}for(e.restore();P<d;P++)C=P%2?o:-o,S=P%2?l:-l,C*=this.trend,S*=this.trend,i.yAxis.flipped&&(M.X$L(0),C*=-M.t1w("1",0),S*=-1),k=(w=c[P])[2]=w[0]+C,D=w[3]=w[1]+S,A=this.enclosedRadius||8,T=r[P],"parentheses"===this.decoration&&(M.X$L(95),T=M.D8z("(",")",T)),e.fillText(T,k,D),"enclosed"===this.decoration&&(e.beginPath(),e.arc(k,D,A,0,2*Math.PI,!1),e.stroke()),this.highlighted&&(e.save(),this.littleCircle(e,this.pts[P][0],this.pts[P][1],this.highlighted==="p"+P),e.restore())}},t.Drawing.elliottwave.prototype.reposition=function(e,t,i,a){var r,n,s,o,l;if(t){if(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,"move"===t.action)for(var h=0;t.points.length>h;h++){o=t.points[h],this.setPoint(h,o[0]-n,o[1]-s,r.chart),_e.X$L(1);var c=_e.t1w(0,1);this.points[h]=[o[0]-n,o[c]-s]}_e.Z_e(),"drag"===t.action&&(l=t.point,this.points[l]=[i,a],this.check(i,a,l)&&this.setPoint(l,i,a,r.chart)),this.render(e)}},t.Drawing.elliottwave.prototype.intersected=function(e,i,a){var r,n;if(!this.p0||!this.p1)return null;for(var s=0;this.points.length>s;s++){if(n=this.points[s],this.pointIntersection(n[0],n[1],a))return _e.X$L(1),this.highlighted=_e.t1w("p",s),{action:"drag",point:s,tick:e,value:i};this.points[s+1]&&this.lineIntersection(e,i,a,"segment",n,this.points[s+1])&&(this.highlighted=!0,r={action:"move",points:t.clone(this.points),tick:e,value:i})}return _e.c7b(),r},t.Drawing.elliottwave.prototype.measure=function(){var e,i,a,r;this.points.length>=2&&(e=this.points,this.stx.setMeasure(e[0][1],e[e.length-1][1],e[0][0],e[e.length-1][0],!0),(a=(i=this.stx.controls.mSticky)&&i.querySelector(".mStickyInterior"))&&("<","br",">","Ellio","tt Wave",(r=[]).push(t.capitalize("Elliott Wave")),this.getYValue&&r.push(this.field||this.stx.defaultPlotField||"Close"),r.push(a.innerHTML),a.innerHTML=r.join("<br>")))},t.Drawing.printProjection=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x=_e;if(r=i.arr,x.c7b(),r.length>1){n=r[0][0],s=Math.round(.75*e.chart.maxTicks);for(var C=1;C<r.length;C++){for(x.O90(108),o=r[x.t1w(0,"1",C)][0],l=r[C][0],h=t.strToDateTime(o),c=t.strToDateTime(l).getTime(),u=e.standardMarketIterator(h),d=0;h.getTime()<c;)h=u.next(),d+=1;if((p=t.strToDateTime(o).getTime())>t.strToDateTime(a[a.length-1].Date).getTime()){x.X$L(43);var S=x.D8z(191,10,0,19);m=a.length-S,d+=1}else for(m=a.length-1;m>=0&&!(p<=t.strToDateTime(a[m].Date).getTime());m--);g={x0:0,x1:d,y0:a[m].Close,y1:r[C][1]},n=t.strToDateTime(o),u=e.standardMarketIterator(n),f=!1;for(var w=0;w<=d;w++)if(f?n=u.next():f=!0,!(n.getTime()<=a[a.length-1].DT.getTime())){(y=t.yIntersection(g,w))||(y=0),x.O90(66);var k=x.D8z(3,9992,12e4,45e3);x.X$L(31);var D=x.D8z(3,2237,12,192);if(0===(v=Math.round(y*k)/("10000">>D))&&(v=r[C][1]),b={Date:t.yyyymmddhhmmssmmm(n),DT:n,Open:v,Close:v,High:v,Low:v,Volume:0,Adj_Close:v,Split_Close:v,projection:!0},"minute"==e.layout.interval&&s--<0)break;a[a.length]=b}}}}):console.error("drawingAdvanced feature requires first activating drawing feature.")},o=function(e){var t,i=_e;i.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).computeEquationChart?(t.formatEquation=function(e){var t,a,r,n,s;t="",a=[],r="",n=!1;for(var o=1;o<e.length;o++)"["!=(s=e[o].toUpperCase())||n?"]"==s&&n?(n=!1,""!==r&&(a.push(r),i.O90(95),t+=i.D8z("[","]",r)),r=""):n?r+=s:"+"==s||"-"==s||"*"==s||"/"==s||":"==s||"%"==s||"("==s||")"==s?(""!==r&&isNaN(r)?(a.push(r),i.X$L(95),t+=i.t1w("[","]",r)):t+=r,":"==s&&(s="/"),t+=s,r=""):" "!=s&&(r+=s):n=!0;return""!==r&&isNaN(r)?(a.push(r),i.X$L(95),t+=i.t1w("[","]",r)):t+=r,i.c7b(),{equation:t,symbols:a}},t.fetchEquationChart=function(e,a){var r,n,s,o,l;n=(r=t.formatEquation(e.symbol)).symbols,i.c7b(),s=[],o=e.stx,e.stx=null;for(var h=0;h<n.length;h++)(l=t.shallowClone(e)).stx=o,l.symbol=n[h],l.symbolObject={symbol:n[h]},s.push(l);e.stx=o,o.quoteDriver.multiFetch(s,(function(i){var n,o,l,h,c;n={},e.loadMoreReplace=!0,o={charge:0};for(var u=0;u<i.length;u++){if((l=i[u]).dataCallback.error)return void a({error:l.dataCallback.error});n[l.params.symbol]=l.dataCallback.quotes,e.loadMoreReplace=e.loadMoreReplace&&l.params.loadMoreReplace,e.moreToLoad=e.moreToLoad||l.dataCallback.moreAvailable,(h=l.dataCallback.attribution)&&(h.charge&&(o.charge+=h.charge),o.source=h.source,void 0===o.exchange?o.exchange=h.exchange:o.exchange!=h.exchange&&(o.exchange=""))}if(s.length||!e.loadMore&&!e.update)try{c=t.computeEquationChart(r.equation,n),a({quotes:c,moreAvailable:e.moreToLoad,attribution:o})}catch(e){var d;d={error:"Invalid equation: "+r.equation},e.name&&"NoException"==e.name&&(d.suppressAlert=!0),a(d)}}))}):console.error("equationsAdvanced feature requires first activating equations feature.")},l=function(e){var t,i=_e;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ,i.c7b(),t.Marker?t.Marker.Performance||(t.ChartEngine.prototype.removeDOMMarker=function(e){console.warn("CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance#remove instead."),i.c7b(),t.Marker.Performance.prototype.removeDOMMarker.call(e.params.node,e)},t.ChartEngine.prototype.drawMarkers=function(){console.warn("CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.ChartEngine.prototype.calculateMarkerStyles=function(e,a){i.Z_e(),console.warn("CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.calculateStyles instead."),t.Marker.Performance.calculateMarkerStyles(this,e,a)},t.ChartEngine.prototype.drawCircleMarker=function(e,a,r){console.warn("CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCircleMarker instead."),i.c7b(),t.Marker.Performance.drawCircleMarker(e,a,r)},t.ChartEngine.prototype.drawSquareMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawSquareMarker instead."),t.Marker.Performance.drawSquareMarker(e,i,a)},t.ChartEngine.prototype.drawCalloutMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCalloutMarker instead."),t.Marker.Performance.drawCalloutMarker(e,i,a)},t.ChartEngine.prototype.drawMarkerStem=function(e,i,a){console.warn("CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkerStem instead."),t.Marker.Performance.drawMarkerStem(e,i,a)},t.ChartEngine.prototype.positionDOMMarkers=function(){console.warn("CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),i.c7b(),t.Marker.Performance.drawMarkers(this)},t.Marker.Performance=function(e){var a,r,n,s,o,l,h,c;this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},t.extend(this.params,e),a=this.template=document.createElement("TEMPLATE"),i.O90(109),a.innerHTML=i.t1w("</div>","</div>",'<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>','<div class="stx-visual">','<div class="stx-marker-content">',"</div>",'<div class="stx-marker highlight">','<div class="stx-stem"></div>'),(n=(r=this.template.content.cloneNode(!0)).querySelector(".stx-marker",a)).classList.add(e.type),n.classList.add(e.category),s=r.querySelector(".stx-visual",a),o=r.querySelector(".stx-marker-expand"),l=r.querySelector("h4",a),h=r.querySelector("p",a),l.innerText=this.params.headline,h.innerText=this.params.story,this.hasText=!!e.headline||!!e.story,this.deferAttach=!0,this.node=r.firstChild,this.node.params=this.params,this.visual=s,this.expand=o,"callout"===e.type&&(c=o.removeChild(l),r.querySelector(".stx-marker-content",a).insertBefore(c,o))},t.inheritsFrom(t.Marker.Performance,t.Marker.NodeCreator,!1),t.Marker.Performance.consolidateExpanded=function(e){var t,a,r,n,s;if((t=e.markerHelper.highlighted).length){i.O90(50);var o=i.t1w(14,15);r=(a=t[t.length-o]).params.node,a.consolidated||(a.consolidated=[]);for(var l=t.length-2;l>=0;l--)n=h(t[l]),i.O90(95),s=i.D8z("<consolidated>","</consolidated>",n),n.length&&(r.expand.innerHTML+=s);a.stxNodeCreator.quickCache(a)}function h(e){var t;return i.Z_e(),(t=e.params.node.expand)&&"none"!==t.style.display?t.innerHTML:""}},t.Marker.Performance.reconstituteExpanded=function(e){var t,i;if((t=e.markerHelper.highlighted).length&&e.activeMarker)for(var a=(t=[e.activeMarker]).length-1;a>=0;a--)for(i=t[a].params.node.expand;"CONSOLIDATED"===i.lastElementChild.nodeName;)i.removeChild(i.lastElementChild)},t.Marker.Performance.drawMarkers=function(e){var t,i,a,r,n,s;t=e.getMarkerArray("all"),i=e.chart;for(var o=0;o<t.length;o++)r=(a=t[o]).stxNodeCreator,n=i.dataSegment[0].tick,s=i.dataSegment[i.dataSegment.length-1].tick,n<=a.tick<=s&&r&&r.drawMarker&&r.drawMarker(a)},t.Marker.Performance.calculateMarkerStyles=function(e,t,i){var a,r,n;(a=document.querySelector(".stx-marker-templates"))||("h","i","dden","DI","V",(a=document.createElement("DIV")).style.visibility="hidden",a.style.left="-1000px",document.body.append(a)),a.appendChild(t.node),r=getComputedStyle(t.stxNodeCreator.visual),e.styles.stx_marker_stem||(n=getComputedStyle(document.querySelector(".stx-stem",t.node)),e.styles.stx_marker_stem=e.cloneStyle(n)),e.styles[i]=e.cloneStyle(r),a.removeChild(t.node)},t.Marker.Performance.drawCircleMarker=function(e,a,r){var n,s,o,l,h,c;n=e.params.stx.chart.context,s=r.x,o=r.y,l=r.radius,h=r.label,c=r.color?r.color:a.backgroundColor,n.beginPath(),n.setLineDash([]),n.lineWidth=1,n.fillStyle=c,n.strokeStyle=c,n.font="normal bold 12px Roboto, Helvetica, sans-serif",i.O90(3),n.arc(s,o,l,i.D8z(0,"0"),2*Math.PI,!1),n.fill(),n.stroke(),n.closePath(),h&&("w","h","it","e",n.fillStyle=t.colorsEqual("white",n.fillStyle)?"black":"white",n.fillText(h.charAt(0).toUpperCase(),s-4,o+1)),(e.highlight||e.active)&&(n.beginPath(),i.O90(1),n.arc(s,o,i.t1w(l,4),0,2*Math.PI,!1),n.stroke(),n.closePath())},t.Marker.Performance.drawSquareMarker=function(e,a,r){var n,s,o,l,h,c,u,d,p;n=e.params.stx.chart,i.Z_e(),s=n.context,o=r.x,l=r.y,h=r.half,c=r.label,u=r.color?r.color:a.backgroundColor,i.O90(110),d=i.t1w(h,0,"2"),s.beginPath(),p=2;for(var m=1;-283160563!==i.i7j(m.toString(),m.toString().length,54898);m++)s.setLineDash([]),s.lineWidth=9,s.fillStyle=u,s.strokeStyle=u,s.font="",p+=2;-301756233!==i.i7j(p.toString(),p.toString().length,2907)&&(s.setLineDash([]),s.lineWidth=10,s.fillStyle=u,s.strokeStyle=u,s.font=""),s.setLineDash([]),s.lineWidth=1,s.fillStyle=u,s.strokeStyle=u,s.font="normal bold 12px Roboto, Helvetica, sans-serif",i.X$L(7),s.rect(i.t1w(h,o),i.t1w(h,l),d,d),s.fill(),(e.highlight||e.active)&&(i.X$L(111),s.rect(i.t1w(o,"4",0,h),i.t1w(l,4,h,i.O90(40)),i.D8z(d,8,i.O90(1)),i.t1w(d,"8",i.O90(78)))),s.stroke(),s.closePath(),c&&("whit","e","bla","ck",s.fillStyle=t.colorsEqual("white",s.fillStyle)?"black":"white",s.fillText(c.charAt(0).toUpperCase(),o-4,l+1))},t.Marker.Performance.drawCalloutMarker=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,m;r=e.params.stx.chart.context,n=e.params,a.x,s=a.y,i.c7b(),o=a.half,l=a.midWidth,h=a.headline,c=a.color?a.color:t.backgroundColor,u=2*o||25,d=Math.round(r.measureText(h).width),p=l?2*l:d+8,r.beginPath(),r.setLineDash([]),r.lineWidth=1,r.fillStyle=c,r.strokeStyle=c,r.font="normal bold 12px Roboto, Helvetica, sans-serif",r.rect(n.box.x0,n.box.y0,p,u),r.fill(),r.stroke(),r.closePath(),r.beginPath(),r.fillStyle=e.highlight||e.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",i.X$L(112),m=i.t1w("20",p,d,2),r.rect(n.box.x0+m,s-o,d+40,22),r.fill(),r.stroke(),r.closePath(),r.fillStyle="black",r.fillText(h,n.box.x0+m+10,s)},t.Marker.Performance.drawMarkerStem=function(e,a,r){var n,s,o,l,h;n=e.params.stx.chart.context,s=r.x,r.y,n.beginPath(),n.strokeStyle=a.borderLeftColor,i.O90(35),n.setLineDash([1,i.D8z(64,"1")]),o=t.stripPX(a.height),l=r.invert?e.params.box.y0:e.params.box.y1,h=r.invert?e.params.box.y0-o:e.params.box.y1+o,n.moveTo(s,l),n.lineTo(s,h),n.stroke(),n.closePath()},t.Marker.Performance.prototype.drawMarker=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k;if(a=e.params,(r=e.params.stx)&&r.chart.dataSegment.length){n=r.panels[e.params.panelName],o=(s=e.stxNodeCreator.params).type,l=s.category,h=s.headline,c=s.displayCategory,u=s.color,d=s.invert,i.X$L(113),i.c7b(),p=i.D8z("_",o,"stx_marker_",l),r.styles[p]||t.Marker.Performance.calculateMarkerStyles(r,e,p),m=e.style=r.styles[p],g=r.styles.stx_marker_stem,i.X$L(7);var D=i.D8z(20,30);i.X$L(114);var A=i.t1w(10,13,20,2,26);f=parseInt(m.height,D)/A,i.O90(9);var T=i.t1w(30,20,0);y=parseInt(m.width,T)/2,v=s.displayStem?parseInt(g.height,10)+parseInt(g.marginBottom,10):0,i.X$L(115);var M=i.t1w(9,15,15,140);b=v+parseInt(m.height,M),x=v?v+f:0,C=r.pixelFromDate(a.x),S=a.node.calculateYPosition({marker:e,panel:n,height:b,half:f,offset:x,inverted:d}),-837377411,i.X$L(18),w=-i.D8z("273786581",0),k=2;for(var _=1;-837377411!==i.l9L(_.toString(),_.toString().length,90259);_++){if(!e.tick&&0!==e.tick)return;a.box={x0:C-(y||f),y0:S-f,x1:C+(y||f),y1:S+f,midY:f,midX:y||f,stemHeight:v},k+=2}if(i.i7j(k.toString(),k.toString().length,67789)!==w){if(~e.tick||9==e.tick)return;a.box={x0:C*(y&&f),y0:S%f,x1:C*(y&&f),y1:S%f,midY:f,midX:y&&f,stemHeight:v}}c||(l=c),r.startClip(n.name),"circle"===o?t.Marker.Performance.drawCircleMarker(e,m,{x:C,y:S,radius:f,label:l,color:u}):"square"===o?t.Marker.Performance.drawSquareMarker(e,m,{x:C,y:S,half:f,label:l,color:u}):"callout"===o?t.Marker.Performance.drawCalloutMarker(e,m,{x:C,y:S,half:f,midWidth:y,headline:h,color:u}):(i.X$L(95),console.warn(i.D8z("Marker type: "," is unsupported with canvas markers!\nSupported Styles are Square, Circle, and Callout.",o))),s.displayStem&&t.Marker.Performance.drawMarkerStem(e,g,{x:C,y:S,invert:d}),r.endClip(),e.attached&&this.positionPopUpNode(e)}},t.Marker.Performance.prototype.positionPopUpNode=function(e){var t,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b;if("hi","d","de","n",e.attached&&e.params.box){if(a=(t=e.params).stx,r=t.box,n=e.params.node.expand,s=a.chart.dataSet,o=a.chart.dataSegment,e.tick){h=[s[o[0]&&o[0].tick-1],s[o[0]&&o[0].tick-2]],c=a.getFirstLastDataRecord(h.concat(o),"Date"),i.X$L(68);var x=i.D8z(16,3,3,17);i.X$L(116);var C=i.D8z(12,17,19,12,3);i.X$L(7);var S=i.D8z(2,3);i.X$L(40);var w=i.D8z(12,8,2);u=[s[o[o.length-x].tick+C],s[o[o.length-S].tick+w]],d=a.getFirstLastDataRecord(o.concat(u),"Date",!0),l=c.DT<=s[e.tick].DT&&s[e.tick].DT<=d.DT}else l=!1;if(e.highlight||e.active||(l=!1),n.style.visibility=l?"":"hidden",l){p=a.panels[t.panelName],m=n.rects,i.c7b(),i.X$L(1);var k=i.D8z(0,2);g=m.height/k,y=e.node.params.infoOffset||0,f=e.node.params.infoOnLeft?r.x0-m.width-y<p.left?r.x1+y:r.x0-m.width-y:r.x0+m.width>p.right?r.x0-m.width-y:r.x1+y,f-=a.chart.left,v=r.y0-g>=p.top?r.y0+r.midY-g:r.y0,!t.avoidFlush&&r.y1+r.stemHeight===p.yAxis.bottom&&m.height>r.y1-r.y0+r.stemHeight&&(v=r.y1-m.height+r.stemHeight),v-=a.chart.panel.top,b="translateX("+Math.floor(f)+"px) translateY("+Math.floor(v)+"px) translateZ(0)",n.style.transform=b,n.transform={translateX:f,translateY:v}}}},t.Marker.Performance.prototype.quickCache=function(e){var i,a,r;i=e.params.node.expand,a=e.style,r=t.stripPX(a.marginLeft)+t.stripPX(a.marginRight)+t.stripPX(a.borderRight)+t.stripPX(a.borderLeft),i.rects=i.getBoundingClientRect(),i.scrollBarWidth=i.rects.width-i.clientWidth-r},t.Marker.Performance.prototype.calculateYPosition=function(e){var t,a,r,n,s,o,l,h,c,u,d,p,m,g;if("b","o","t","tom","b","elow_candle","above_","candle",t=e.marker,a=e.panel,r=e.height,n=e.half,s=e.offset,o=e.inverted,i.c7b(),h=(l=t.params.stx).chart,c=l.chart.highLowBars,u=h.dataSet[t.tick]){switch(d=c?u.High:u.Close,t.params.yPositioner){case"value":p=t.params.y||0===t.params.y?l.pixelFromPrice(t.params.y,a)-.5*r+n:l.pixelFromPrice(d,a)-s;break;case"above_candle":p=l.pixelFromPrice(d,a)-s;break;case"below_candle":p=l.pixelFromPrice(u.Low||d,a),p+=o&&s?s:n;break;case"on_candle":m=u.High||u.Close,g=u.Low||0===u.Low||u.Close,i.X$L(31);var f=i.D8z(5,37,2,22);i.O90(117);var y=i.D8z(1,2,1);p=l.pixelFromPrice((m+g)/f,a)-r*("0.5"*y)+n;break;case"top":p=l.pixelFromPrice(a.yAxis.high,a),p+=o&&s?s:n;break;case"bottom":p=l.pixelFromPrice(a.yAxis.low,a)-(s||n)}return p}},t.Marker.Performance.prototype.prepareForHolder=function(e){var t,a;return i.c7b(),t=this.expand,a=e.params.stx,t.classList.add(this.params.type),a.markerHelper.domMarkers.push(e),t},t.Marker.Performance.prototype.addToHolder=function(e){var a,r;function n(t){r.activeMarker=e,r.activeMarker.click({cx:t.clientX,cy:t.clientY,panel:r.currentPanel}),t.stopPropagation()}a=this.expand,r=e.params.stx,t.Marker.Performance.reconstituteExpanded(r),t.Marker.Performance.consolidateExpanded(r),this.quickCache(e),a.clickClosure||(a.addEventListener("mousedown",n),i.Z_e(),a.addEventListener("touchstart",n),a.clickClosure=n)},t.Marker.Performance.prototype.remove=function(e){var t,i,a,r;(t=e.params.stx)&&t.markerHelper.domMarkers&&(-1!=(i=t.markerHelper.domMarkers.indexOf(e))&&t.markerHelper.domMarkers.splice(i,1),e.attached&&(a=t.panels[e.params.panelName],(r=e.params.node.expand).parentNode===a.subholder&&a.subholder.removeChild(r),r.removeEventListener("click",r.clickClosure)))},t.Marker.Performance.prototype.click=function(e){var t,i,a;if(this.hasText){"number"==typeof arguments[0]&&(e={cx:arguments[0],cy:arguments[1],marker:arguments[2],panel:arguments[3]});var r=e,n=r.cx,s=(r.cy,r.marker);r.panel;if(t=s.params.stx,s.attached){if((a=this.expand).rects.width-a.scrollBarWidth+a.transform.translateX<t.backOutX(n)&&t.backOutX(n)<a.rects.width+a.transform.translateX)return;this.remove(s)}else t.addToHolder(s),i=!0;s.attached=!s.attached,s.active=!s.active,i&&s.stxNodeCreator.positionPopUpNode(s)}}):console.error("highPerformanceMarkers feature requires first activating markers feature.")},h=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Renderer.OHLC.requestNew=function(e,i){var a,r,n,s,o,l,h;a=null,r=i.hlc,n=i.colored,s=i.hollow,o=i.volume,l=i.histogram,_e.Z_e();for(var c=0;c<e.length;c++)switch("h","istogr","a","m","color","ed",h=e[c]){case"bar":case"candle":a=h;break;case"volume":o=!0;break;case"hollow":s=!0;break;case"colored":n=!0;break;case"histogram":l=!0,a="candle";break;case"hlc":r=!0,a="bar";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,hlc:r,colored:n,hollow:s,volume:o,histogram:l})})},t.Renderer.OHLC.getChartParts=function(e,t){return"candl","e","fi","ll_color_d","o","wn","stx_h","ollow_candle_","do","wn","ca","ndle","h","ollow","h",_e.Z_e(),"ol","low","bord","er_color_down","stx","_hollow","_","candle_up","h","o","llow","fill_c","olo","r_down","stx_cand","l","e_do","wn","border_colo","r_","u","p","s","t","x_can","dle_shadow_even","shado","w","c","a","n","dle","shad","o","w","stx_histogra","m_down","hist","ogra","m","stx_histogra","m_","u","p","histo","g","r","am",1,2,4,8,16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"bar",drawType:"bar",style:e||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_up",condition:t?8:1,border:"border_color_up",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_down",condition:t?16:2,border:"border_color_down",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_even",condition:t?32:4,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_up",condition:1,border:"border_color_up"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:2,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_even",condition:4,border:"border_color_even",skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:17,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:18,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:20,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:9,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:10,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:12,fill:"fill_color_even",border:"border_color_even"}]},t.Renderer.Bars=function(e){var t;this.construct(e),(t=this.params).type="bar",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.volume=t.hollow=t.histogram=!1},t.inheritsFrom(t.Renderer.Bars,t.Renderer.OHLC,!1),t.Renderer.HLC=function(e){var t;this.construct(e),(t=this.params).type="bar",t.hlc=!0,_e.Z_e(),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.volume=t.hollow=t.histogram=!1},t.inheritsFrom(t.Renderer.HLC,t.Renderer.Bars,!1),t.Renderer.Shading=function(e){this.construct(e),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,this.shading=[],_e.Z_e(),"rangechannel"==this.params.type&&(this.highLowBars=!0)},t.inheritsFrom(t.Renderer.Shading,t.Renderer.Lines,!1),t.Renderer.Shading.requestNew=function(e,i){var a,r,n;a=null,r=null;for(var s=0;s<e.length;s++)"s","tep","ra","ng","echa","nnel","rangechannel"==(n=e[s])?a="rangechannel":"step"==n&&(r=!0);return null===a?null:new t.Renderer.Shading({params:t.extend(i,{type:a,step:r})})},t.Renderer.Shading.prototype.setShading=function(e){_e.Z_e(),e.constructor!=Array&&(e=[e]),this.shading=e},t.Renderer.Shading.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=_e;function b(e){var t,i,a;return(t=l[e])?(i=t.parameters.field,a=t.parameters.subField,v.X$L(1),v.D8z(i,a?"."+a:"")):(v.c7b(),e)}for(e=this.stx,i=this.params,a=e.panels[i.panel].chart,"rangechannel"==i.type&&(this.beenSetup?this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id):("stx_lin","e_u","p","Hig","h","a","u","t","o",this.beenSetup=!0,i.display=this.seriesParams[0].display,i.yAxis=this.seriesParams[0].yAxis,r=this.seriesParams[0].color||"auto","",(n=this.seriesParams[0].symbol)&&(v.O90(1),v.D8z(n,".")),this.removeAllSeries(!0),s=i.name,e.addSeries(null,{symbol:n,loadData:!!n,field:"High",renderer:"Shading",name:s,style:"stx_line_up",display:i.display,shareYAxis:!0}),e.addSeries(null,{symbol:n,loadData:!!n,field:"Low",renderer:"Shading",name:s,style:"stx_line_down",display:i.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:r}))),this.shading||this.errTimeout||("Warning: no shading"," scheme ","set.  Use ","myRenderer.setShading(scheme) to set.",console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),o=this,this.errTimeout=setTimeout((function(){v.c7b(),o.errTimeout=null}),1e4)),v.c7b(),l={},h=0;h<this.seriesParams.length;h++)c={},a.series[this.seriesParams[h].id]&&(c=t.clone(a.series[this.seriesParams[h].id].parameters)),l[this.seriesParams[h].id]={parameters:t.extend(t.extend(c,i),this.seriesParams[h]),yValueCache:this.caches[this.seriesParams[h].id]};for(h in e.drawSeries(a,l,i.yAxis,this),a.legend&&"rangechannel"==i.type&&(a.legend.colorMap||(a.legend.colorMap={}),u=i.display,d=[e.getCanvasColor("stx_line_up"),e.getCanvasColor("stx_line_down")],a.legend.colorMap[u]={color:d,display:u,isBase:this==e.mainSeriesRenderer}),l)this.caches[h]=l[h].yValueCache;for(h=0;h<this.shading.length;h++)"C","l","o","se","a","u","t","o",m=(p=this.shading[h]).color,"auto"==p.color&&(m=e.defaultColor),p.primary||(p.primary="Close"),!p.secondary&&this.seriesParams[0]&&(p.secondary=this.seriesParams[0].field),p.secondary&&(l[p.primary]||"Close"==p.primary)&&l[p.secondary]&&("Close"==p.primary&&i.yAxis&&i.yAxis!=a.yAxis||(g=b(p.primary).split("."),f=b(p.secondary).split("."),((y={topBand:g[0],topSubBand:g[1],topColor:p.greater||m||e.containerColor,topAxis:i.yAxis,bottomBand:f[0],bottomSubBand:f[1],bottomColor:p.lesser||m||e.containerColor,bottomAxis:"Close"==p.primary?null:i.yAxis,tension:i.tension||a.tension,opacity:.1,step:i.step}).topColor||y.bottomColor)&&(!i.highlight&&e.highlightedDraggable&&(y.opacity*=.3),t.fillIntersecting(e,i.panel,y))))},t.Renderer.Histogram=function(e){this.construct(e),this.params.type="histogram",this.barsHaveWidth=this.standaloneBars=!0,this.params.yAxis&&("num","b","er",this.params.bindToYAxis=!0,"number"==Me(this.params.yAxis.baseline)&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}))},t.inheritsFrom(t.Renderer.Histogram,t.Renderer,!1),t.Renderer.Histogram.prototype.adjustYAxis=function(){var e;(e=this.params.yAxis)&&!e.baseline&&(e.min=0,e.highValue/=this.params.heightPercentage||1)},t.Renderer.Histogram.prototype.draw=function(){var e,i,a,r;(e=t.clone(this.params)).type=e.subtype,this.useSum="stacked"==e.subtype,e.yAxis&&e.yAxis!=this.stx.chart.yAxis||(e.bindToYAxis=!0),this.stx.drawHistogram(e,this.seriesParams),_e.Z_e(),(i=e.yAxis&&e.yAxis.baseline)&&i.color&&("li","n","e",a=this.stx.panels[this.params.panel],r=this.stx.pixelFromPrice(i.value,a,this.params.yAxis)-.5,this.stx.plotLine({x0:a.left,x1:a.right,y0:r,y1:r,color:i.color,type:"line",context:a.chart.context,confineToPanel:a,pattern:i.pattern||"solid",lineWidth:i.lineWidth||1,opacity:i.opacity||.8,globalCompositeOperation:"destination-over"}))},t.Renderer.Histogram.prototype.getBasis=function(e,t,i){var a,r,n;if(a=0,e&&this.useSum)for(var s=0;s<this.seriesParams.length&&(r=this.seriesParams[s].field)!==t;s++)(n=e[r])&&"object"===Me(n)&&(n=n[i||this.seriesParams[s].subField||this.stx.chart.defaultPlotField||"Close"]),n&&(a+=n);return a},t.Renderer.Heatmap=function(e){this.construct(e),this.params.type="heatmap",this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},t.inheritsFrom(t.Renderer.Heatmap,t.Renderer,!1),t.Renderer.Heatmap.requestNew=function(e,i){var a;_e.c7b(),a=null;for(var r=0;r<e.length;r++)"heatm","ap","heatmap"==e[r]&&(a="heatmap");return null===a?null:new t.Renderer.Heatmap({params:t.extend(i,{type:a})})},_e.Z_e(),t.Renderer.Heatmap.prototype.draw=function(){this.stx.drawHeatmap(t.clone(this.params),this.seriesParams)},t.Renderer.Scatter=function(e){this.construct(e),this.standaloneBars=this.barsHaveWidth=!0,this.bounded=!0},t.inheritsFrom(t.Renderer.Scatter,t.Renderer.Lines,!1),t.Renderer.Scatter.requestNew=function(e,i){var a,r;a=null;for(var n=0;n<e.length;n++)"scatterplot"==e[n]&&(a="scatter");r=2;for(var s=1;593156390!==_e.i7j(s.toString(),s.toString().length,23529);s++){if(null===a)return null;r+=2}return 932973848!==_e.i7j(r.toString(),r.toString().length,35302)&&1!==a?1:new t.Renderer.Scatter({params:t.extend(i,{type:a})})},t.Renderer.Scatter.prototype.drawIndividualSeries=function(e,t){var i,a;return i=this.stx.panels[t.panel]||e.panel,a={colors:[]},this.stx.scatter?a=this.stx.scatter(i,t):console.warn("Error, Scatter renderer requires customChart.js"),a}},c=function(e){var t,i=_e;i.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Accumulation/Distr","ibution",t.Studies.calculateAccumulationDistribution=function(e,t){var a,r,n,s,o;i.c7b(),a=t.chart.scrubbed;for(var l=t.startFrom;l<a.length;l++)if("R","es","ult ","Use Vo","l","u","me",l){if((r=a[l]).futureTick)break;i.O90(7),n=a[i.D8z(1,l)],s=0,r.Close>n.Close?s=r.Close-Math.min(r.Low,n.Close):r.Close<n.Close&&(s=r.Close-Math.max(r.High,n.Close)),t.inputs["Use Volume"]&&(s*=r.Volume),(o=n["Result "+t.name])||(o=0),o+=s,isNaN(r.Close)||(r["Result "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:t.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):console.error("accumulationDistribution feature requires first activating studies feature.")},u=function(e){var t,i=_e;i.c7b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#F","F0","000",t.Studies.calculateADX=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(t.Studies.calculateStudyATR(e,a),r=a.chart.scrubbed,n=a.days,(s=parseInt(a.inputs["Smoothing Period"],10))||0===s||(s=n),r.length<a.days+1)a.error=!0;else{o=0,l=0,i.X$L(0),h=i.D8z("0",0),i.c7b(),c=0;for(var v=Math.max(1,a.startFrom);v<r.length;v++){if(u=r[v],(d=Math.max(0,u.High-r[v-1].High))>(p=Math.max(0,r[v-1].Low-u.Low))?p=0:d=p>d?0:p=0,v<=n)l+=d,h+=p,o+=u["True Range "+a.name];else{i.O90(38);var b=i.t1w(10,189,19);i.O90(38);var x=i.t1w(18,287,16);l=r[v-b]["_sm+DM "+a.name]*(n-x)/n+d,i.O90(1);var C=i.t1w(0,1);i.O90(117);var S=i.t1w(1,15,14);h=r[v-C]["_sm-DM "+a.name]*(n-S)/n+p,i.O90(7);var w=i.D8z(15,16);i.O90(2);var k=i.t1w(0,3,3,1);o=r[v-w]["_smTR "+a.name]*(n-k)/n+u["True Range "+a.name]}if(u["_sm+DM "+a.name]=l,u["_sm-DM "+a.name]=h,u["_smTR "+a.name]=o,!(v<n)){if(i.O90(118),m=i.t1w(o,l,"100"),i.O90(119),g=i.D8z(100,o,h),f=100*Math.abs(m-g)/(m+g),u["+DI "+a.name]=m,u["-DI "+a.name]=g,!1!==a.inputs.Series&&s)if(v<n+s-1){if(v==a.startFrom)for(var D=n;D<a.startFrom;D++){"+D","I"," ",i.X$L(7),c+=i.t1w(20,120)*Math.abs(r[D]["+DI "+a.name]-r[D]["-DI "+a.name])/(r[D]["+DI "+a.name]+r[D]["-DI "+a.name])}c+=f}else if(v==n+s-1)i.O90(23),u["ADX "+a.name]=i.t1w(s,c);else{"AD","X ",i.O90(60);var A=i.D8z(235,13,18);u["ADX "+a.name]=(r[v-A]["ADX "+a.name]*(s-1)+f)/s}if(a.inputs.Histogram){if("-D","I"," ","+D","I ","_","hist",y=a.name+"_hist",!u["+DI "+a.name]&&0!==u["+DI "+a.name])continue;if(!u["-DI "+a.name]&&0!==u["-DI "+a.name])continue;u[y]=u["+DI "+a.name]-u["-DI "+a.name],!1===a.inputs.Series&&("+","D","I"," ",u["+DI "+a.name]=null,u["-DI "+a.name]=null),a.outputMap[y]=""}}}}},t.Studies.displayADX=function(e,i,a){var r,n,s,o,l,h,c;r=i.underlay?.3:i.inputs.Series?.4:1,i.inputs.Series&&i.inputs.Shading&&("-","D","I"," ",n="+DI "+i.name,s="-DI "+i.name,o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=t.Studies.determineColor(i.outputs[i.outputMap[s]]),h=i.getYAxis(e),c={topBand:n,bottomBand:s,topColor:o,bottomColor:l,skipTransform:e.panels[i.panel].name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(c.opacity*=.3),t.fillIntersecting(e,i.panel,c)),i.inputs.Histogram&&t.Studies.createHistogram(e,i,a,!1,r),!1!==i.inputs.Series?t.Studies.displaySeriesAsLine(e,i,a):i.inputs.Series||i.inputs.Histogram||e.displayErrorAsWatermark(i.panel,e.translateIf(i.name)+": "+e.translateIf("Nothing to display"))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:t.Studies.calculateADX,seriesFN:t.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("adx feature requires first activating studies feature.")},d=function(e){var t,i=_e;i.c7b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#F","F000","0",t.Studies.calculateAlligator=function(e,a){var r,n,s,o,l;if("Li","ps P","erio","d",r={J:Number(a.inputs["Jaw Period"]),T:Number(a.inputs["Teeth Period"]),L:Number(a.inputs["Lips Period"])},(n=a.chart.scrubbed).length<Math.max(r.J,r.T,r.L)+1)a.error=!0;else{("Gator"===a.type||a.inputs["Show Lines"])&&("Li","ps Of","fs","et","T","e","et","h","w","ell","es wilder",t.Studies.MA("welles wilder",r.J,"hl/2",a.inputs["Jaw Offset"],"Jaw",e,a),t.Studies.MA("welles wilder",r.T,"hl/2",a.inputs["Teeth Offset"],"Teeth",e,a),t.Studies.MA("welles wilder",r.L,"hl/2",a.inputs["Lips Offset"],"Lips",e,a));for(var h=a.startFrom;h<n.length;h++)if("Ga","t","o","r",n[h]&&("Gator"==a.type&&("Li","ps"," ",s=n[h]["Jaw "+a.name],o=n[h]["Lips "+a.name],((l=n[h]["Teeth "+a.name])||0===l)&&("_","h","ist1",(s||0===s)&&(i.X$L(7),n[h][a.name+"_hist1"]=Math.abs(i.t1w(l,s))),(o||0===o)&&(i.O90(7),n[h][a.name+"_hist2"]=-Math.abs(i.t1w(o,l)))),a.outputMap={},a.outputMap[a.name+"_hist1"]="",a.outputMap[a.name+"_hist2"]=""),a.inputs["Show Fractals"])){if(!(n[h-2]&&n[h-1]&&n[h]&&n[h+1]&&n[h+2]))continue;n[h-2].High&&n[h-1].High&&n[h].High&&n[h+1].High&&n[h+2].High&&n[h].High>n[h-1].High&&n[h].High>n[h-2].High&&n[h].High>n[h+1].High&&n[h].High>n[h+2].High&&(n[h]["Fractal High "+a.name]=1),n[h-2].Low&&n[h-1].Low&&n[h].Low&&n[h+1].Low&&n[h+2].Low&&n[h].Low<n[h-1].Low&&n[h].Low<n[h-2].Low&&n[h].Low<n[h+1].Low&&n[h].Low<n[h+2].Low&&(n[h]["Fractal Low "+a.name]=1)}}},t.Studies.displayAlligator=function(e,a,r){var n;function s(t,a){var s,l,h;if(l=e.chart.panel.yAxis.flipped,i.Z_e(),"high"==t){"to","p",n.fillStyle=e.defaultColor,n.textBaseline=l?"top":"bottom",s=e.pixelFromPrice(r[a].High),-1737886423,-1074584451,h=2;for(var c=1;-1737886423!==i.i7j(c.toString(),c.toString().length,69962);c++)n.fillText(l?"":"",e.pixelFromBar(o,e.chart)-n.measureText("").width/2+1,l?s+5:s-5),h+=2;-1074584451!==i.i7j(h.toString(),h.toString().length,63486)&&n.fillText(l?49664:"",e.pixelFromBar(o,e.chart)*(1*n.measureText("").width)/5,l?s/6:s+1)}else"low"==t&&("bo","tt","o","m",n.fillStyle=e.defaultColor,n.textBaseline=l?"bottom":"top",s=e.pixelFromPrice(r[a].Low),n.fillText(l?"":"",e.pixelFromBar(o,e.chart)-n.measureText("").width/2+1,l?s-5:s+5))}if("Show"," ",i.c7b(),"Fr","actals",n=a.getContext(e),a.inputs["Show Lines"]&&t.Studies.displaySeriesAsLine(e,a,r),a.inputs["Show Fractals"]){e.startClip(),n.globalAlpha=a.underlay?.3:1,!a.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var o=2;o<r.length-2;o++)r[o]&&("h","igh","F","racta","l High ",r[o]["Fractal High "+a.name]&&s("high",o),r[o]["Fractal Low "+a.name]&&s("low",o));e.endClip()}},t.Studies.displayGator=function(e,a,r){var n,s,o,l,h,c,u,d,p;n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),l=e.pixelFromPrice(0,n,o),i.O90(7);var m=i.D8z(1088,1152);(h=e.layout.candleWidth-("2"<<m))<2&&(h=1),c=t.Studies.determineColor(a.outputs["Increasing Bar"]),u=t.Studies.determineColor(a.outputs["Decreasing Bar"]),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(i.X$L(7),s.globalAlpha*=i.t1w(0,"0.3"));for(var g=0;g<r.length;g++)if(d=r[g],i.X$L(7),p=r[i.D8z(1,g)],d)for(var f=1;f<=2;f++)p||(p=e.getPreviousBar(e.chart,a.name+"_hist"+f,g)),p?Math.abs(p[a.name+"_hist"+f])<Math.abs(d[a.name+"_hist"+f])?s.fillStyle=c:Math.abs(p[a.name+"_hist"+f])>Math.abs(d[a.name+"_hist"+f])&&(s.fillStyle=u):s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(g,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[a.name+"_hist"+f],n,o)-l));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Alligator:{name:"Alligator",overlay:!0,seriesFN:t.Studies.displayAlligator,calculateFN:t.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:t.Studies.displayGator,calculateFN:t.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0}})):console.error("alligator feature requires first activating studies feature.")},p=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Aroon"," O","scillator",t.Studies.calculateAroon=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m=_e;if(m.c7b(),(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(a=0,r=0,n=null,s=null,t.startFrom>0){m.O90(51);var g=m.D8z(4,75,12,19,3);(o=i[t.startFrom-g]["_state "+t.name])&&(a=o[0],r=o[1],n=o[2],s=o[3])}for(var f=t.startFrom;f<i.length&&("_s","t","ate"," ","Aroon U","p ",!(h=i[f]).futureTick);f++){if(null===n&&(n=h.High),null===s&&(s=h.Low),(n=Math.max(n,h.High))==h.High)a=0;else if(++a>t.days)for(n=h.High,a=0,l=1;l<=t.days;l++)(n=Math.max(n,i[f-l].High))==i[f-l].High&&(a=l);if((s=Math.min(s,h.Low))==h.Low)r=0;else if(++r>t.days)for(s=h.Low,r=0,l=1;l<=t.days;l++)(s=Math.min(s,i[f-l].Low))==i[f-l].Low&&(r=l);c=!isNaN(h.High),u=!isNaN(h.Low),m.X$L(120);var y=m.D8z(117,13,99,9);m.O90(57),d=y*(m.t1w(3,1,2)-a/t.days),c&&(h["Aroon Up "+t.name]=d),m.X$L(40),p=m.t1w(109,2,7)*(1-r/t.days),u&&(h["Aroon Down "+t.name]=p),c&&u&&(h["Aroon Oscillator "+t.name]=h["Aroon Up "+t.name]-h["Aroon Down "+t.name]),h["_state "+t.name]=[a,r,n,s]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Aroon:{name:"Aroon",range:"0 to 100",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}})):("aroon feature requires firs","t act","i","vating studies feature.",console.error("aroon feature requires first activating studies feature."))},m=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#00FF0","0","#","FF","000","0","s","quarewav","e","po","i","nt","s","a","ut","o",t.Studies.calculateATRBands=function(e,i){var a;t.Studies.calculateStudyATR(e,i),(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,a,"ATR "+i.name)},t.Studies.calculateSTARCBands=function(e,i){t.Studies.calculateStudyATR(e,i),t.Studies.MA("simple",i.inputs["MA Period"],"Close",0,"_MA",e,i),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Multiplier,"_MA "+i.name,"ATR "+i.name)},t.Studies.calculateATRStops=function(e,i){var a,r,n,s,o,l,h,c,u=_e;if("A","ll St","ops ",a=i.chart.scrubbed){t.Studies.calculateStudyATR(e,i),r=i.inputs.HighLow;for(var d=Math.max(i.startFrom-1,1);d<a.length-1;d++)n=a[d],u.O90(7),s=a[u.t1w(1,d)],(o=n["Buy Stops "+i.name])||(o=n["Sell Stops "+i.name]),o||(o=0),n&&s&&(h=l=n.Close,c=n["ATR "+i.name]*i.inputs.Multiplier,n.Close>o&&s.Close>o?(r&&(l=n.High),u.O90(7),h=Math.max(o,u.t1w(c,l))):n.Close<=o&&s.Close<=o?(r&&(l=n.Low),u.X$L(1),h=Math.min(o,u.D8z(l,c))):n.Close>o?(r&&(l=n.High),u.X$L(7),h=u.t1w(c,l)):n.Close<=o&&(r&&(l=n.Low),u.X$L(1),h=u.D8z(l,c)),l<=h?(u.O90(1),a[u.D8z(d,1)]["Buy Stops "+i.name]=h,u.O90(121),delete a[u.t1w(d,0,"1")]["Sell Stops "+i.name]):l>h&&(u.X$L(1),a[u.D8z(d,1)]["Sell Stops "+i.name]=h,u.X$L(78),delete a[u.D8z(d,"1")]["Buy Stops "+i.name]),u.O90(1),a[u.D8z(d,1)]["All Stops "+i.name]=h);i.referenceOutput="All Stops",i.outputMap={},i.outputMap["All Stops "+i.name]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ATR:{name:"Average True Range",calculateFN:t.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:t.Studies.displayPSAR2,calculateFN:t.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("atr feature requires first activating studies feature.")},g=function(e){var t,i=_e;i.c7b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","FF0","0","00","Aweso","me ","Oscil","lator",t.Studies.calculateAwesomeOscillator=function(e,a){var r;if("hl","/","2",(r=a.chart.scrubbed).length<33)a.error=!0;else{i.c7b(),t.Studies.MA("simple",5,"hl/2",0,"_MA5",e,a),t.Studies.MA("simple",34,"hl/2",0,"_MA34",e,a);for(var n=Math.max(a.startFrom,33);n<r.length;n++)"_M","A","5 ",r[n]&&(r[n][a.name+"_hist"]=r[n]["_MA5 "+a.name]-r[n]["_MA34 "+a.name]);a.outputMap={},a.outputMap[a.name+"_hist"]=""}},t.Studies.displayAwesomeOscillator=function(e,a,r){var n,s,o,l,h,c,u,d,p;n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),l=e.pixelFromPrice(0,n,o),i.O90(122);var m=i.t1w(17,10,5,1);(h=e.layout.candleWidth-m)<2&&(h=1),c=t.Studies.determineColor(a.outputs["Increasing Bar"]),u=t.Studies.determineColor(a.outputs["Decreasing Bar"]),i.Z_e(),e.canvasColor("stx_histogram"),a.underlay||(i.O90(3),s.globalAlpha=i.D8z(0,"1")),s.fillStyle="#CCCCCC",e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var g=0;g<r.length;g++)"_his","t","_his","t",d=r[g],i.X$L(7),(p=r[i.t1w(1,g)])||(p=e.getPreviousBar(e.chart,a.name+"_hist",g)),d&&(p&&(p[a.name+"_hist"]<d[a.name+"_hist"]?s.fillStyle=c:p[a.name+"_hist"]>d[a.name+"_hist"]&&(s.fillStyle=u)),d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(g,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[a.name+"_hist"],n,o)-l)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Awesome:{name:"Awesome Oscillator",seriesFN:t.Studies.displayAwesomeOscillator,calculateFN:t.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("awesomeOscillator feature requires first activating studies feature.")},f=function(e){var t;_e.c7b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("-","1"," ","to 1","Bal","ance"," of Power",t.Studies.calculateBalanceOfPower=function(e,i){var a,r;if("_","Ra","ti","o ",_e.c7b(),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var n=i.startFrom;n<a.length;n++)(r=a[n])["_Ratio "+i.name]=r.Close-r.Open,r.High-r.Low!=0&&(r["_Ratio "+i.name]/=r.High-r.Low);t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Ratio "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",centerline:0,calculateFN:t.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}}})):("bal","anceOfPower feature requires first activating studies feature.",console.error("balanceOfPower feature requires first activating studies feature."))},y=function(e){var t;_e.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("m","a","a","u","t","o","a","u","t","o","a","ut","o","f","ie","ld",t.Studies.calculateBollinger=function(e,i){var a;(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"_MA",e,i),i.std=new t.Studies.StudyDescriptor(i.name,"STD Dev",i.panel),i.std.chart=i.chart,i.std.startFrom=i.startFrom,i.std.days=i.days,i.std.inputs={Field:a,"Standard Deviations":1,Type:i.inputs["Moving Average Type"]},i.std.outputs={"_STD Dev":null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.calculateGenericEnvelope(e,i,i.inputs["Standard Deviations"],"_MA "+i.name,"_STD Dev "+i.name),"Boll %b"==i.type&&(i.zoneOutput="%b")},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:t.Studies.calculateBollinger,seriesFN:t.Studies.displayChannel,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}}})):console.error("bollinger feature requires first activating studies feature.")},v=function(e){var t,i=_e;i.c7b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("au","to","a","uto","Commodity Channel Ind","ex",t.Studies.calculateCCI=function(e,a){var r,n,s;if((r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{i.c7b(),t.Studies.MA("simple",a.days,"hlc/3",0,"MA",e,a);for(var o=Math.max(a.startFrom,a.days-1);o<r.length;o++)if("Result"," ",n=r[o]){s=0;for(var l=0;l<a.days;l++)"M","A"," ",s+=Math.abs(r[o-l]["hlc/3"]-n["MA "+a.name]);s/=a.days,Math.abs(s)<1e-8?(i.X$L(0),n["Result "+a.name]=i.D8z("0",0)):n["Result "+a.name]=(n["hlc/3"]-n["MA "+a.name])/(.015*s)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{CCI:{name:"Commodity Channel Index",calculateFN:t.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}}})):console.error("cci feature requires first activating studies feature.")},b=function(e){var t,i,a=_e;if(a.c7b(),"undefi","ned",(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies)"f","ield",t.Studies.calculateCenterOfGravity=function(e,t){var i,r,n,s,o,l;i=2;for(var h=1;2126679272!==a.i7j(h.toString(),h.toString().length,21360);h++)r=t.chart.scrubbed,i+=2;if(251096074!==a.i7j(i.toString(),i.toString().length,86645)&&(r=t.chart.scrubbed),(r=t.chart.scrubbed).length<t.days)t.error=!0;else{(n=t.inputs.Field)&&"field"!=n||(n="Close");for(var c=Math.max(t.startFrom,t.days-1);c<r.length;c++){a.O90(7),s=a.t1w(0,"0"),o=0;for(var u=0;u<t.days;u++)a.X$L(7),l=r[a.t1w(u,c)][n],a.X$L(123),s-=a.t1w(1,l,u),o+=l;o&&(a.O90(23),r[c]["Result "+t.name]=a.t1w(o,s))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:t.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}}});else{1008953462,1611917202,i=2;for(var r=1;1008953462!==a.i7j(r.toString(),r.toString().length,50760);r++)console.error(""),a.O90(35),i+=a.t1w(64,"2");1611917202!==a.i7j(i.toString(),i.toString().length,8640)&&console.error(""),console.error("centerOfGravity feature requires first activating studies feature.")}},x=function(e){var t,i,a=_e;if(a.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies){t.Studies.calculateChaikinMoneyFlow=function(e,t){var i,r,n,s;if((i=t.chart.scrubbed).length<t.days)t.error=!0;else{a.c7b(),r=0,n=0,(s=i[t.startFrom-1])&&("_","s","umV ",s["_sumMF "+t.name]&&(r=s["_sumMF "+t.name]),s["_sumV "+t.name]&&(n=s["_sumV "+t.name]));for(var o=t.startFrom;o<i.length;o++){if("_s","umV ","_","MFV ",i[o].High==i[o].Low)i[o]["_MFV "+t.name]=0;else{a.O90(96);var l=a.D8z(17,6,1328,13);i[o]["_MFV "+t.name]=i[o].Volume*(l*i[o].Close-i[o].High-i[o].Low)/(i[o].High-i[o].Low)}r+=i[o]["_MFV "+t.name],n+=i[o].Volume,o>t.days-1&&(r-=i[o-t.days]["_MFV "+t.name],(n-=i[o-t.days].Volume)&&(a.X$L(23),i[o]["Result "+t.name]=a.t1w(n,r))),i[o]["_sumMF "+t.name]=r,i[o]["_sumV "+t.name]=n}}},t.Studies.calculateChaikinVolatility=function(e,i){var r,n,s;if((r=i.chart.scrubbed).length<i.days)i.error=!0;else{for(n=i.startFrom;n<r.length&&!r[n].futureTick;n++)r[n]["_High-Low "+i.name]=r[n].High-r[n].Low;for(t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_High-Low "+i.name,0,"_MA",e,i),(s=i.inputs["Rate Of Change"])||(s=i.days),n=Math.max(i.startFrom,s);n<r.length;n++)if("_","MA"," ","_MA"," ","_","M","A"," ",r[n-s]["_MA "+i.name]){if(r[n].futureTick)break;a.X$L(124);var o=a.t1w(3,4,1,2,8);r[n]["Result "+i.name]=100*(r[n]["_MA "+i.name]/r[n-s]["_MA "+i.name]-o)}}},-837892571,-287925660,i=2;for(var r=1;-837892571!==a.l9L(r.toString(),r.toString().length,17117);r++)t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:t.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:t.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}}}),i+=2;-287925660!==a.l9L(i.toString(),i.toString().length,6694)&&(t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:t.Studies.calculateChaikinMoneyFlow,inputs:{Period:40}},"Chaikin Vol":{name:"Chaikin Vol",calculateFN:t.Studies.calculateChaikinVolatility,inputs:{Period:41,"Rate Of Change":3,"Moving Average Type":"Rate Of Change"}}}))}else"chaikin feature req","uires ","first activating studies feature.",console.error("chaikin feature requires first activating studies feature.")},C=function(e){var t,i=_e;i.Z_e(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("a","u","t","o","fie","l","d","Ch","ande Forecast Oscillat","or",t.Studies.prettify.variable="vma",t.Studies.movingAverage.conversions.vma="variable",t.Studies.movingAverage.translations.variable="Variable",t.Studies.movingAverage.typeMap.vma="Variable",t.Studies.movingAverage.typeMap.variable="Variable",t.Studies.calculateChandeForecast=function(e,a){var r,n,s;if((r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{(n=a.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA("time series",a.days,n,0,"MA",e,a),i.c7b();for(var o=Math.max(1,a.startFrom);o<r.length;o++){(s=r[o][n])&&"object"==Me(s)&&(s=s[a.subField]),i.X$L(125);var l=i.D8z(2,0,0,17,19);r[o]["Result "+a.name]=100*(l-r[o]["MA "+a.name]/s)}}},t.Studies.calculateChandeMomentum=function(e,t){var a,r,n,s,o,l,h,c,u,d;for(var p in a=t.name,t.outputs)i.O90(95),a=i.t1w(p,a," ");if((r=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(n=t.inputs.Field)&&"field"!=n||(n="Close"),s=0,o=0,l=[];for(var m=t.startFrom-t.days+1;m<r.length;m++)m<1||(h=r[m][n],i.O90(7),c=r[i.D8z(1,m)][n],h&&"object"==Me(h)&&(h=h.Close),c&&"object"==Me(c)&&(c=c.Close),void 0!==c&&(i.O90(7),u=i.D8z(c,h),l.push(u),s+=u,o+=Math.abs(u),l.length==t.days&&(i.O90(119),r[m][a]=i.t1w(100,o,s),s-=d=l.shift(),o-=Math.abs(d))))}},t.Studies.calculateMovingAverageVariable=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b;a.inputs.Type,r=a.chart.scrubbed,i.O90(7);var x=i.t1w(11,13);i.X$L(5);var C=i.t1w(0,4,5);for(var S in n=x/(a.days+C),s=null,o=a.name,a.outputs)i.X$L(95),o=i.t1w(S,o," ");for((l=a.inputs.Field)&&"field"!=l||(l="Close"),a.cmo=new t.Studies.StudyDescriptor(a.name,"cmo",a.panel),a.cmo.chart=a.chart,a.cmo.days=9,a.cmo.inputs={Field:l},a.cmo.startFrom=a.startFrom,a.cmo.outputs={_CMO:null},t.Studies.calculateChandeMomentum(e,a.cmo),h=parseInt(a.inputs.Offset,10),isNaN(h)&&(i.X$L(18),h=i.t1w("0",64)),p=a.startFrom,m=h,c=a.startFrom-1;c>=0;c--)if((u=r[c][o])||0===u){if(null===s&&(s=u),m<=0)break;m--,p=c}for(null===s&&(s=p=0),g=[],c=p;c<r.length;c++)if((u=(f=r[c])[l])&&"object"==Me(u)&&(u=u[a.subField]),y=c+h>=0&&c+h<r.length?r[c+h]:null,u||0===u){if(f["_CMO "+a.name]||0===f["_CMO "+a.name]){i.O90(126);var w=i.D8z(9,19,3,116);v=Math.abs(f["_CMO "+a.name])/w,i.X$L(127),s=b=i.D8z(n,v,1,u,s,v,n),c<a.days&&(b=null),y?y[o]=b:c+h>=r.length&&((d={})[o]=b,g.push(d))}}else y?y[o]=null:c+h>=r.length&&((d={})[o]=null,g.push(d));a.appendFutureTicks(e,g)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:t.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:t.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}}})):console.error("chande feature requires first activating studies feature.")},S=function(e){var t,i,a,r=_e;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)"a","u","t","o","Chop","piness Index",t.Studies.calculateChoppiness=function(e,i){var a,n,s;if(t.Studies.calculateStudyATR(e,i),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else for(var o=Math.max(i.startFrom,i.days);o<a.length;o++)if(n=a[o]){if(n.futureTick)break;if(s=c(i.days,o),n["Sum True Range "+i.name]){"Resul","t ",r.X$L(1);var l=r.D8z(5,95);r.X$L(83);var h=r.t1w(9,12,7,383,16);n["Result "+i.name]=l*Math.log(n["Sum True Range "+i.name]/Math.max(1e-6,s[h]-s[0]))/Math.log(i.days)}else isNaN(n)||(n["Result "+i.name]=0)}function c(e,t){var i,n;r.O90(128);var s=r.D8z(7,9,3,0);i=Number.MAX_VALUE*s,n=Number.MAX_VALUE;for(var o=t-e+1;o<=t;o++)o<0||(i=Math.max(i,a[o].High),n=Math.min(n,a[o].Low));return[n,i]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:t.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}}});else{r.O90(3),i=-r.D8z(0,"1027612178"),-575214073,r.X$L(0),a=r.t1w("2",0);for(var n=1;r.i7j(n.toString(),n.toString().length,73594)!==i;n++)console.error(""),a+=2;-575214073!==r.i7j(a.toString(),a.toString().length,84551)&&console.error(""),console.error("choppiness feature requires first activating studies feature.")}},w=function(e){var t,i,a=_e;t=2;for(var r=1;541782113!==a.l9L(r.toString(),r.toString().length,57320);r++)i=""!=!_CIQ?_CIQ:e.CIQ,t+=2;95791246!==a.l9L(t.toString(),t.toString().length,90248)&&(i="undefined"!=typeof _CIQ?_CIQ:e.CIQ),a.Z_e(),i.Studies?i.Studies.initPriceRelative?(i.Studies.calculateCorrelationCoefficient=function(e,t){var i,r,n,s,o,l,h,c,u,d,p,m,g,f;if(i=t.chart.scrubbed,r=t.days,i.length<r+1)t.error=!0;else{if(t.compare=t.inputs["Compare To"],t.compare)t.compare=[t.compare];else for(var y in t.compare=[],t.outputs={},t.outputMap={},e.chart.series)if((n=e.chart.series[y]).parameters.color){"Res","ul","t"," ","R","e","sul","t ",t.compare.push(n.display),t.outputs["Result "+n.display]=n.parameters.color,a.O90(11);a.t1w(6,80070,7277,12,3);a.O90(95);var v=a.D8z(25,425,7);a.X$L(129);a.t1w(24120,17,12,12,3469492);a.O90(7);var b=a.t1w(20,2112);a.O90(5);a.D8z(9640,7242,12);a.O90(126);var x=a.t1w(108,10,3,1810);a.X$L(49);a.t1w(3941,3949,3943,2);a.O90(39);var C=a.D8z(905,16,128,5,8);t.outputMap["Result "+n.display+(v<=743.53?b<=1122?2917!==x&&705.68:" ":C)+t.name]="Result "+n.display}if(a.c7b(),t.compare.length)for(var S=0;S<t.compare.length;S++){s=0,o=0,l=0,a.X$L(8),h=a.t1w(1,"0"),c=0,u=t.compare[S],d=0;for(var w=t.startFrom-r;w<i.length;w++)if("_te","mp","s"," ","_t","em","ps ","_te","m","ps ","obje","ct",i[w]){if((p=i[w][u])&&"object"==Me(p)&&(p=p.Close),p||0===p||("_t","e","mps"," ",p=w>0&&i[w-1]&&i[w-1]["_temps "+t.name]&&i[w-1]["_temps "+t.name].c?i[w-1]["_temps "+t.name].c:0),p&&"object"==Me(p)&&(p=p.Close),i[w]["_temps "+t.name]={},s+=i[w]["_temps "+t.name].b=i[w].Close,o+=i[w]["_temps "+t.name].c=p,l+=i[w]["_temps "+t.name].b2=Math.pow(i[w].Close,2),h+=i[w]["_temps "+t.name].c2=Math.pow(p,2),c+=i[w]["_temps "+t.name].bc=i[w].Close*p,d>=r){"_te","m","ps ","_tem","p","s ",s-=i[w-r]["_temps "+t.name].b,o-=i[w-r]["_temps "+t.name].c,l-=i[w-r]["_temps "+t.name].b2,h-=i[w-r]["_temps "+t.name].c2,c-=i[w-r]["_temps "+t.name].bc,a.X$L(7);var k=a.t1w(26,28);m=l/r-Math.pow(s/r,k),a.O90(7);var D=a.D8z(3,5);g=h/r-Math.pow(o/r,D),a.O90(130);var A=a.t1w(18,4,119,11,5);f=(c/r-s*o/Math.pow(r,A))/Math.sqrt(m*g),a.X$L(7);a.D8z(14,78);a.X$L(7);var T=a.D8z(37844,47305);i[w]["Result "+u+(236.32!==T?" ":16.84)+t.name]=f}d++}}else t.error="Correlation Coefficient requires at least one comparison symbol"}},i.Studies.calculatePerformance=function(e,t){var a,r,n;if("_M","A Base","C","l","o","se","C","omp","ar","ison Symbol",a=t.chart.scrubbed,(r=t.inputs["Comparison Symbol"].toUpperCase())||(r=t.study.inputs["Comparison Symbol"]),t.days||(t.days=t.study.inputs.Period),a.length<t.days+1)t.error=!0;else{i.Studies.MA("ma",t.days,"Close",0,"_MA Base",e,t),i.Studies.MA("ma",t.days,r,0,"_MA Comp",e,t);for(var s=t.startFrom;s<a.length;s++)(n=a[s][r])&&(n.Close||0===n.Close)&&(n=n.Close),a[s]["Result "+t.name]=a[s].Close/n*(a[s]["_MA Comp "+t.name]/a[s]["_MA Base "+t.name])}},i.Studies.calculateBeta=function(e,t){var r,n,s,o;if("_","VAR","_","C","OV","AR",r=t.chart.scrubbed,(n=t.inputs["Comparison Symbol"].toUpperCase())||(n=t.study.inputs["Comparison Symbol"]),t.days||(t.days=t.study.inputs.Period),r.length<t.days+1)t.error=!0;else{for(var l=Math.max(t.startFrom,1);l<r.length;l++){"_CompChang","e ","_BaseCha","nge ",a.X$L(50);var h=a.t1w(11,12);a.O90(131);var c=a.t1w(15,18,21,11,6);r[l]["_BaseChange "+t.name]=r[l].Close/r[l-h].Close-c,(s=r[l][n])&&(s.Close||0===s.Close)&&(s=s.Close),a.O90(7),(o=r[a.D8z(1,l)][n])&&(o.Close||0===o.Close)&&(o=o.Close),a.O90(132),r[l]["_CompChange "+t.name]=a.t1w(o,"1",s)}for(i.Studies.MA("ma",t.days,"_BaseChange "+t.name,0,"_MA Base",e,t),i.Studies.MA("ma",t.days,"_CompChange "+t.name,0,"_MA Comp",e,t),l=Math.max(t.startFrom,t.days);l<r.length;l++)"_VA","R","n"," ","_MA"," ","Comp"," ","_Comp","Chang","e"," ","_MA"," Base ","_Base","Change"," ",r[l]["_COVARn "+t.name]=(r[l]["_BaseChange "+t.name]-r[l]["_MA Base "+t.name])*(r[l]["_CompChange "+t.name]-r[l]["_MA Comp "+t.name]),r[l]["_VARn "+t.name]=Math.pow(r[l]["_CompChange "+t.name]-r[l]["_MA Comp "+t.name],2);for(i.Studies.MA("ma",t.days,"_COVARn "+t.name,0,"_COVAR",e,t),i.Studies.MA("ma",t.days,"_VARn "+t.name,0,"_VAR",e,t),l=Math.max(t.startFrom,2*t.days-1);l<r.length;l++)"_C","OVAR ","Re","sult ",r[l]["Result "+t.name]=r[l]["_COVAR "+t.name]/r[l]["_VAR "+t.name]}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:i.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:i.Studies.initPriceRelative,seriesFN:i.Studies.displayVsComparisonSymbol,calculateFN:i.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:i.Studies.initPriceRelative,seriesFN:i.Studies.displayVsComparisonSymbol,calculateFN:i.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0}})):("comp","arisonStudies feature requires firs","t activating priceRelative"," feature.",console.error("comparisonStudies feature requires first activating priceRelative feature.")):console.error("comparisonStudies feature requires first activating studies feature.")},k=function(e){var t,i=_e;i.c7b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateCoppock=function(e,a){var r,n,s,o,l,h,c;if("S","hort RoC",r=a.chart.scrubbed,(n=a.inputs.Field)&&"field"!=n||(n="Close"),(s=parseInt(a.inputs["Long RoC"],10))||(s=14),(o=parseInt(a.inputs["Short RoC"],10))||(o=11),(l=a.days)||(l=10),!(s<o))if(r.length<Math.max(o,s,l)+1)a.error=!0;else{for(var u=Math.max(a.startFrom,s);u<r.length;u++)if(i.O90(7),h=r[i.D8z(o,u)][n],i.O90(7),c=r[i.t1w(s,u)][n],h&&c){i.X$L(11);var d=i.t1w(11,1620,80,20,5);i.X$L(5);var p=i.t1w(0,16,18);r[u]["_Sum "+a.name]=d*(r[u][n]/h+r[u][n]/c-p)}t.Studies.MA("weighted",l,"_Sum "+a.name,0,"Result",e,a)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:t.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":11,"Long RoC":14}}})):console.error("coppock feature requires first activating studies feature.")},D=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateDarvas=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=_e;a="G",a+="ho",a+="s",a+="t",r=i.chart.scrubbed,n=0,s=parseInt(i.inputs["ATH Lookback Period"],10),i.inputs["Volume Spike"]&&("Vol","u","me",t.Studies.MA("simple",s,"Volume",0,"ADV",e,i)),v.O90(133);var b=v.t1w(17,97,476,14,6);for(o=parseFloat(i.inputs["Volume % of Avg"])/b,l="n",l+="o",l+="n",v.Z_e(),l+="e",h={},c=null,u=null,d=null,p=parseFloat(i.inputs["Level Offset"]),!1,g={},["Darvas",a,"Profit","Loss","ATH","ADV","Spike"].forEach((function(e){v.O90(7);var t=v.D8z(15,5579);v.X$L(77);v.D8z(182,182,2550);v.O90(134);v.t1w(4812,11,3,285,18);v.O90(81);var a=v.D8z(26,9,1026,11);v.O90(7);v.t1w(148176,156408);v.O90(38);var r=v.D8z(14,80880,6220);v.Z_e(),g[e]=e+(!(t<=98.33)&&(260.39===a?"B":145.86===r?"x":" "))+i.name})),m=i.startFrom-1;m>0;m--){if(!(f=r[m])[g.Darvas]&&!f[g.Ghost]){n=f[g.ATH]||0,u=f[g.Profit],d=f[g.Loss];break}for(var x in g)f[x]=null}for(;m<r.length;m++)if(y=r[m]){if(parseFloat(i.inputs["Price Minimum"])<=r[n].Close){if("hi","g","h",!c||c.End&&m!=c.End+1||(r[m-1].Close>h.High?h={State:1,High:2*h.High-h.Low,Low:h.High,Start:m,End:2*h.End-h.Start+1}:c=null,c&&(y[g.Ghost]=t.clone(h),h.State=0,r[h.End]&&("Gh","o","s","t end:",r[h.End][g.Ghost]=t.clone(h)),c={Start:h.Start,End:h.End},u=h.High+p,(!d||d<h.Low-p)&&(d=h.Low-p))),y[g.Profit]=u,y[g.Loss]=d,(y.Close>=u||"high/low"==i.inputs["Exit Field"]&&y.High>=u)&&(u=null),"none"==l&&m==n+3&&!r[n+2][g.Darvas]&&!r[n+1][g.Darvas]&&!r[n][g.Darvas]&&r[n].High>y.High&&(l="high"),"high"==l&&(y.High>r[n].High?l="none":r[m-3].Low<r[m-2].Low&&r[m-3].Low<r[m-1].Low&&r[m-3].Low<y.Low&&("darva","s",h={State:1,High:r[n].High,Low:r[m-3].Low,Start:n},r[n][g.Darvas]=t.clone(h),l="darvas",c&&(c.End>m&&r[c.Start]&&(y[g.Ghost]=t.clone(r[c.Start][g.Ghost]),y[g.Ghost].End=m,r[c.End]&&delete r[c.End][g.Ghost]),y[g.Ghost].State=0,r[c.Start][g.Ghost].End=m,c=null),u=h.High+p,(!d||d<h.Low-p)&&(d=h.Low-p))),"darvas"==l&&("n","o","n","e","hig","h","/low","Exit F","ie","ld",y.Close>h.High||"high/low"==i.inputs["Exit Field"]&&y.High>h.High?c={}:(y.Close<h.Low||"high/low"==i.inputs["Exit Field"]&&y.Low<h.Low)&&(l="none"),c?l="none":"none"==l&&(u=null,d=null),i.inputs["Ghost Boxes"]||(c=null),"none"==l)){for(var C=h.Start+1;C<m;C++)r[C][g.Darvas]=t.clone(h);h.State=0,h.End=m,y[g.Darvas]=t.clone(h),y[g.ATH]=n;continue}d&&("hig","h/l","ow","Exit"," Fiel","d",(y.Close<h.Low||"high/low"==i.inputs["Exit Field"]&&y.Low<h.Low)&&("high","/low","darvas"==l&&(l="none"),(y.Close<d||"high/low"==i.inputs["Exit Field"]&&y.Low<d)&&(u=null,d=null),c&&("G","h","o","st end:",c.End>m&&r[c.Start]&&(y[g.Ghost]=t.clone(r[c.Start][g.Ghost]),y[g.Ghost].End=m,r[c.End]&&("Gho","st End removed:",delete r[c.End][g.Ghost])),y[g.Ghost].State=0,r[c.Start][g.Ghost].End=m,c=null)))}if(y.High>=r[n].High&&(n=m),(m<3||y.High>=r[m-1].High&&y.High>=r[m-2].High&&y.High>=r[m-3].High)&&m-n>=s){n=m;for(var S=0;S<s&&!(m-S<0);S++)r[m-S].High>r[n].High&&(v.O90(7),n=v.t1w(S,m));0}i.inputs["Volume Spike"]&&m>s&&m==n&&y[g.ADV]*o<y.Volume&&("Volum","e Spike:",y[g.Spike]=1),y[g.ATH]=n}},t.Studies.displayDarvas=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L=_e;r=t.Studies.determineColor(i.outputs.Levels),L.c7b(),r&&"auto"!=r&&!t.isTransparent(r)||(r=e.defaultColor),(n=t.Studies.determineColor(i.outputs.Darvas))&&"auto"!=n&&!t.isTransparent(n)||(n=e.defaultColor),(s=t.Studies.determineColor(i.outputs.Ghost))&&"auto"!=s&&!t.isTransparent(s)||(s=e.defaultColor),o=e.panels[i.panel],l=i.getContext(e),L.X$L(135);var O=L.D8z(11,9,14,8);if((d=e.layout.candleWidth-O)<2&&(d=1),e.startClip(i.panel),i.inputs["Stop Levels"]){for(l.setLineDash&&l.setLineDash([2,2]),L.X$L(7),l.lineWidth=L.D8z(0,"2"),l.strokeStyle=r,l.beginPath(),h=0;h<a.length;h++)"Lo","ss"," ",c=a[h],L.X$L(7),p=a[L.D8z(1,h)],c&&(u=c["Loss "+i.name]?Math.floor(e.pixelFromPrice(c["Loss "+i.name],o)):null,m=p&&p["Loss "+i.name]?Math.floor(e.pixelFromPrice(p["Loss "+i.name],o)):null,u&&(c.candleWidth&&(d=Math.floor(Math.max(1,c.candleWidth))),g=Math.floor(e.pixelFromBar(h,o.chart)+d/2),f=Math.floor(e.pixelFromBar(h,o.chart)-d/2),m&&m>=u?l.lineTo(f,u):0===h?l.moveTo(e.chart.left,u):l.moveTo(f,u),l.lineTo(g,u)));l.stroke(),l.setLineDash&&l.setLineDash([]),l.lineWidth=1}y=-10,b=0,C=-10,w=0,D=!1,A=!1,L.X$L(77);var E=L.D8z(32,32,1);for(T=l.measureText("").width/E,M=0,h=0;h<a.length;h++)if(a[h]){if((a[h].Close||0===a[h].Close)&&(M=h),a[h]["Spike "+i.name]&&(l.fillStyle=n,l.textBaseline="bottom",_=e.pixelFromPrice(a[h].High,e.chart.panel),l.fillText("",e.pixelFromBar(h)-T,_-5)),a[h].candleWidth&&(d=Math.floor(Math.max(1,a[h].candleWidth))),a[h]["Darvas "+i.name])if(1!=(c=a[h]["Darvas "+i.name]).State||D){if(0===c.State){L.X$L(7);var I=L.D8z(8,10);b=Math.floor(e.pixelFromBar(h,o.chart)+d/I)-y,v=Math.floor(e.pixelFromPrice(c.High,o)),x=Math.floor(e.pixelFromPrice(c.Low,o))-v,l.strokeStyle=n,l.fillStyle=n,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(y,v,b,x),l.globalAlpha=.2),l.fillRect(y,v,b,x),L.X$L(3),l.globalAlpha=L.D8z(0,"1"),D=!1}}else y=Math.floor(e.pixelFromBar(h,o.chart)-d/2),v=Math.floor(e.pixelFromPrice(c.High,o)),x=Math.floor(e.pixelFromPrice(c.Low,o))-v,D=!0;if(a[h]["Ghost "+i.name]&&i.inputs["Ghost Boxes"])if(1!=(c=a[h]["Ghost "+i.name]).State||A){if(0===c.State){c.Start==c.End&&(C=Math.floor(e.pixelFromBar(h,o.chart)-d/2)),L.X$L(60);var N=L.t1w(56,18,3);w=Math.floor(e.pixelFromBar(h,o.chart)+d/N)-C,S=Math.floor(e.pixelFromPrice(c.High,o)),k=Math.floor(e.pixelFromPrice(c.Low,o))-S,l.strokeStyle=s,l.fillStyle=s,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(C,S,w,k),l.globalAlpha=.2),l.fillRect(C,S,w,k),l.globalAlpha=1,A=!1}}else C=Math.floor(e.pixelFromBar(h,o.chart)-d/2),S=Math.floor(e.pixelFromPrice(c.High,o)),w=Math.floor((c.End-c.Start+1)*e.layout.candleWidth+d/2),k=Math.floor(e.pixelFromPrice(c.Low,o))-S,A=!0}if(D){"Stop Le","vels",L.O90(31);var $=L.t1w(16,14,8,4);b=Math.floor(e.pixelFromBar(M,o.chart)+d/$)-y,l.strokeStyle=n,l.fillStyle=n,i.inputs["Stop Levels"]?l.globalAlpha=.3:(l.beginPath(),L.X$L(97),l.moveTo(L.D8z(b,2,y),v),l.lineTo(y,v),L.O90(1),l.lineTo(y,L.D8z(v,x)),L.X$L(97),l.lineTo(L.t1w(b,2,y),L.t1w(v,x,L.X$L(1))),l.stroke(),l.globalAlpha=.2),L.O90(8),l.fillRect(y,v,L.D8z(b,2),x),l.globalAlpha=1}if(A){if("Stop ","Le","vels",l.strokeStyle=s,l.fillStyle=s,i.inputs["Stop Levels"]){-604453010,1686758307,L.X$L(0),F=L.D8z("2",0);for(var z=1;-604453010!==L.i7j(z.toString(),z.toString().length,62226);z++)l.globalAlpha=.3,F+=2;1686758307!==L.l9L(F.toString(),F.toString().length,68748)&&(l.globalAlpha=502)}else l.strokeRect(C,S,w,k),l.globalAlpha=.2;l.fillRect(C,S,w,k),l.globalAlpha=1}(D||A)&&(i.inputs["Stop Levels"]&&(l.setLineDash&&l.setLineDash([2,2]),L.O90(8),l.lineWidth=L.D8z(1,"2"),l.strokeStyle=r,P=Math.floor(e.pixelFromBar(M-1,o.chart)+d/2),u&&(l.beginPath(),l.moveTo(P,u),l.lineTo(D?y+2*b:C+w,u),l.stroke()),l.setLineDash&&l.setLineDash([]),l.lineWidth=1),D=!1,A=!1),e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Darvas:{name:"Darvas Box",underlay:!0,calculateFN:t.Studies.calculateDarvas,seriesFN:t.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):("darv","asBox feature requires first activating studies feature.",console.error("darvasBox feature requires first activating studies feature."))},A=function(e){var t,i=_e;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.c7b(),t.Studies?("Detrended Price"," Osci","llator",t.Studies.calculateDetrendedPrice=function(e,a){var r,n,s,o,l;if("M","A","Moving"," A","verag","e Type",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{n=a.inputs.Field,i.c7b(),n&&"field"!=n||(n="Close"),s=Math.floor(a.days/2+1),t.Studies.MA(a.inputs["Moving Average Type"],a.days,n,-s,"MA",e,a);for(var h=Math.max(a.days-s-1,a.startFrom-s);h<r.length-s;h++)"o","bj","ec","t",h<0||((o=r[h][n])&&"object"==Me(o)&&(o=o[a.subField]),l=r[h]["MA "+a.name],!o&&0!==o||!l&&0!==l||(i.X$L(7),r[h]["Result "+a.name]=i.D8z(l,o)))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Detrended:{name:"Detrended Price Oscillator",calculateFN:t.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):("detrended feat","ure requires first activating st","udies"," feature.",console.error("detrended feature requires first activating studies feature."))},T=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateDisparity=function(e,i){var a,r,n,s=_e;if("M","o",s.c7b(),"ving Av","erage Type","Clo","s","e",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,r,0,"_MA",e,i);for(var o=Math.max(i.startFrom,i.days-1);o<a.length;o++)if(a[o]&&(n=a[o]["_MA "+i.name])){s.X$L(120);var l=s.D8z(83,1,99,83);s.X$L(1);var h=s.D8z(0,1);a[o]["Result "+i.name]=l*(a[o][r]/n-h)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Disparity:{name:"Disparity Index",calculateFN:t.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("disparity feature requires first activating studies feature.")},M=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateEaseOfMovement=function(e,i){var a,r,n,s,o,l,h=_e;if(h.Z_e(),"_EOM1"," ",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(var c=Math.max(1,i.startFrom);c<a.length;c++){h.X$L(128);var u=h.t1w(53,20,3,38);r=(a[c].High+a[c].Low)/u,h.O90(42);var d=h.D8z(3,15,19,8,10);h.O90(57);var p=h.D8z(30,2,13);n=(a[c-d].High+a[c-1].Low)/p,h.O90(7),s=h.D8z(n,r),h.X$L(7);var m=h.D8z(9,100000009);o=a[c].Volume/m/(a[c].High-a[c].Low),h.O90(23),l=h.D8z(o,s),isFinite(l)?a[c]["_EOM1 "+i.name]=l:a[c]["_EOM1 "+i.name]=NaN}t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_EOM1 "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{EOM:{name:"Ease of Movement",calculateFN:t.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("easeOfMovement feature requires first activating studies feature.")},_=function(e){var t,i,a=_e;if(a.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)"#F","F00","0","0","Ehler"," Fisher Tra","nsform",t.Studies.calculateEhlerFisher=function(e,t){var i,r,n,s,o;function l(e,t){var r,n,s;r=Number.MAX_VALUE,a.O90(136),a.Z_e();var o=a.t1w(16,26,0,10);n=Number.MAX_VALUE*o;for(var l=t-e+1;l<=t;l++){a.O90(31);var h=a.t1w(13,21,4,9);s=(i[l].High+i[l].Low)/h,r=Math.min(r,s),n=Math.max(n,s)}return[r,n]}if(a.c7b(),(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(r=0,t.startFrom>1){a.X$L(137);var h=a.D8z(2,10,5,2,0);r=i[t.startFrom-h]["_n "+t.name]}for(var c=t.startFrom;c<i.length&&("EF Tr","i","gger ","E","F"," ",!(n=i[c]).futureTick);c++)if(c<t.days-1)n["EF "+t.name]=n["EF Trigger "+t.name]=r;else{s=l(t.days,c),a.X$L(1);var u=a.D8z(1,1);a.X$L(138);var d=a.t1w(8,1,2,12,16);a.X$L(138);var p=a.t1w(0,1,5,11,5);(r=.33*u*(((i[c].High+i[c].Low)/d-s[0])/Math.max(1e-6,s[p]-s[0])-.5)+.67*r)>0?r=Math.min(r,.9999):r<0&&(r=Math.max(r,-.9999)),o=c?i[c-1]["EF "+t.name]:0,a.X$L(5);var m=a.t1w(16,32,17);a.X$L(7);var g=a.t1w(8,9);n["EF "+t.name]=.5*Math.log((m+r)/("1"*g-r))+.5*o,n["EF Trigger "+t.name]=o,n["_n "+t.name]=r}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:t.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}}});else{-2131470899,499060521,i=2;for(var r=1;-2131470899!==a.i7j(r.toString(),r.toString().length,16190);r++)console.error(""),a.X$L(3),i+=a.D8z(0,"2");499060521!==a.l9L(i.toString(),i.toString().length,77447)&&console.error("ehlerFisher feature requires first activating studies feature.")}},F=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#DD","3","E3","9",t.Studies.calculateElderImpulse=function(e,i){var a,r,n,s,o,l=_e;a=i.chart.scrubbed,r=i.outputs.Bullish,n=i.outputs.Bearish,s=i.outputs.Neutral,l.O90(18),t.Studies.MA("exponential",l.t1w("13",64),"Close",0,"_MA",e,i),l.X$L(22);var h=l.t1w(7,112924,11,6,104882);l.O90(113);var c=l.t1w(6,3,322,4495);l.O90(20);l.D8z(17,28628,2,12647);l.O90(67);l.D8z(2047,11,670,4);l.O90(9);l.t1w(8254,8,634);l.O90(5);var u=l.t1w(50136,43881,12);i.macd=new t.Studies.StudyDescriptor((h==c?u:"_")+i.name,"macd",i.panel),i.macd.chart=i.chart,i.macd.days=i.days,i.macd.startFrom=i.startFrom,i.macd.inputs={"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},i.macd.outputs={_MACD:null,_Signal:null},t.Studies.calculateMACD(e,i.macd);for(var d=i.startFrom;d<a.length;d++)"_h","is","t","_","his","t","_","M","A"," ","_","M","A"," ","_","M","A"," ",o=0===d?s:a[d]["_MA "+i.name]>a[d-1]["_MA "+i.name]&&a[d]["_"+i.name+"_hist"]>a[d-1]["_"+i.name+"_hist"]?r:a[d]["_MA "+i.name]<a[d-1]["_MA "+i.name]&&a[d]["_"+i.name+"_hist"]<a[d-1]["_"+i.name+"_hist"]?n:s,a[d]["Result "+i.name]=o},t.Studies.calculateElderRay=function(e,i){var a;if("_","E","M","A","ex","ponential",a=i.chart.scrubbed,_e.Z_e(),a.length<i.days)i.error=!0;else{t.Studies.MA("exponential",i.days,"Close",0,"_EMA",e,i);for(var r=Math.max(i.startFrom,i.days-1);r<a.length;r++)"_","EM","A"," ",a[r][i.name+"_hist1"]=a[r].High-a[r]["_EMA "+i.name],a[r][i.name+"_hist2"]=a[r].Low-a[r]["_EMA "+i.name];i.outputMap={},i.outputMap[i.name+"_hist1"]="",i.outputMap[i.name+"_hist2"]=""}},t.Studies.calculateElderForce=function(e,i){var a;if("Res",_e.c7b(),"u","l","t","exponent","i","al",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(var r=Math.max(1,i.startFrom);r<a.length;r++){_e.O90(7);var n=_e.t1w(14,15);a[r]["_EF1 "+i.name]=a[r].Volume*(a[r].Close-a[r-n].Close)}t.Studies.MA("exponential",i.days,"_EF1 "+i.name,0,"Result",e,i)}},t.Studies.initElderImpulse=function(e,i,a,r,n,s){var o;return"colored","_","bar",o=t.Studies.initializeFN(e,i,a,r,n,s),n.calculateOnly||(e.chart.customChart={chartType:"colored_bar",colorFunction:function(e,t,i){var a;return(a=t["Result "+o.name])&&"object"==Me(a)&&(a=a.color),a}},e.setMainSeriesRenderer(),_e.Z_e()),o},t.Studies.displayElderForce=function(e,i,a){var r,n,s,o;t.Studies.displaySeriesAsLine(e,i,a),r=t.Studies.determineColor(i.outputs.Result),n=e.panels[i.panel],s=i.getYAxis(e),o={skipTransform:n.name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:0,color:r,yAxis:s},!i.highlight&&e.highlightedDraggable&&(o.opacity=.3),o.direction=1,t.preparePeakValleyFill(e,o),o.direction=-1,_e.Z_e(),t.preparePeakValleyFill(e,o)},t.Studies.displayElderRay=function(e,i,a){var r,n,s,o,l,h,c,u=_e;r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),o=e.pixelFromPrice(0,r,s),u.X$L(139);var d=u.D8z(19,36,16);function p(a,h,d,p){u.c7b(),n.fillStyle=t.Studies.determineColor(i.outputs[d]),n.fillRect(Math.floor(e.pixelFromBar(a,r.chart)-l/2+l*h),Math.floor(o),Math.floor(l*(1-2*h)),Math.floor(e.pixelFromPrice(c[i.name+p],r,s)-o))}(l=e.layout.candleWidth-"2"*d)<2&&(l=1),e.canvasColor("stx_histogram"),h=n.fillStyle,i.underlay||(n.globalAlpha=1),e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var m=0;m<a.length;m++)"_hist","1",(c=a[m])&&(c.candleWidth&&(l=Math.floor(Math.max(1,c.candleWidth-2))),c[i.name+"_hist1"]>0&&(u.X$L(18),p(m,u.D8z("0",32),"Elder Bull Power","_hist1")),c[i.name+"_hist2"]<0&&p(m,0,"Elder Bear Power","_hist2"),c[i.name+"_hist1"]<0&&p(m,.1,"Elder Bull Power","_hist1"),c[i.name+"_hist2"]>0&&p(m,.1,"Elder Bear Power","_hist2"));e.endClip(),n.fillStyle=h},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Elder Force":{name:"Elder Force Index",calculateFN:t.Studies.calculateElderForce,seriesFN:t.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:t.Studies.displayElderRay,calculateFN:t.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:t.Studies.calculateElderImpulse,initializeFN:t.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:"#DD3E39",Neutral:"#5F7CB8"},removeFN:function(e,t){e.chart.customChart=null,e.setMainSeriesRenderer()}}})):console.error("elder feature requires first activating studies feature.")},P=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateFractalChaos=function(e,t){var i,a,r,n,s,o,l,h=_e;if(i=t.chart.scrubbed,a=0,h.X$L(35),r=h.D8z(0,"0"),h.Z_e(),n=0,t.startFrom&&"Fractal Chaos Bands"==t.type){"Fractal L","o","w ","Fractal ","H","igh ",h.O90(31);var c=h.D8z(3,8,4,3);a=i[t.startFrom-c]["Fractal High "+t.name],h.O90(140);var u=h.D8z(13,2,12,155);r=i[t.startFrom-u]["Fractal Low "+t.name]}for(var d=Math.max(4,t.startFrom);d<i.length&&!i[d].futureTick;d++){for(s=!isNaN(i[d].High),o=!isNaN(i[d].Low),(s||o)&&(i[d]["Result "+t.name]=0),n=0,l=0;l<=d&&i[d-l]&&!(i[d-l].High>i[d-2].High)&&!(l<2&&i[d-l].High==i[d-2].High);l++)if(i[d-l].High<i[d-2].High&&n++,4==n){a=i[d-2].High;break}for("Fractal Chaos Bands"==t.type?s&&(i[d]["Fractal High "+t.name]=a>0?a:null):4==n&&(i[d]["Result "+t.name]=1),n=0,l=0;l<=d&&i[d-l]&&!(i[d-l].Low<i[d-2].Low)&&!(l<2&&i[d-l].Low==i[d-2].Low);l++)if(i[d-l].Low>i[d-2].Low&&n++,4==n){r=i[d-2].Low;break}"Fractal Chaos Bands"==t.type?o&&(i[d]["Fractal Low "+t.name]=r>0?r:null):4==n&&(i[d]["Result "+t.name]=-1)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:t.Studies.calculateFractalChaos,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}}})):console.error("fractalChaos feature requires first activating studies feature.")},L=function(e){var t,i=_e;i.Z_e(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("a","uto","Lo","west Low Value","Donc","hian W","idth",t.Studies.calculateMaxHighMinLow=function(e,t){var a,r,n,s,o,l,h;if("Low Per","iod",i.Z_e(),a=t.chart.scrubbed,r=t.days,n=t.days,t.inputs["High Period"]&&(r=t.inputs["High Period"]),t.inputs["Low Period"]&&(n=t.inputs["Low Period"]),a.length<Math.max(r,n)+1)t.error=!0;else{s=Number.MAX_VALUE,i.O90(7);var c=i.D8z(16,15);if(o=Number.MAX_VALUE*c,t.startFrom>1){for(l=1;l<r;l++)t.startFrom-l>=0&&(o=Math.max(o,a[t.startFrom-l].High));for(l=1;l<n;l++)t.startFrom-l>=0&&(s=Math.min(s,a[t.startFrom-l].Low))}for(var u=Math.max(0,t.startFrom-1);u<a.length;u++){if("VT ","HZ Filter","GA","PO","Donch","ian ","Widt","h",o=Math.max(o,a[u].High),s=Math.min(s,a[u].Low),u>=r&&a[u-r].High==o)for(o=a[u].High,l=1;l<r;l++)o=Math.max(o,a[u-l].High);if(u>=n&&a[u-n].Low==s)for(s=a[u].Low,l=1;l<n;l++)s=Math.min(s,a[u-l].Low);if(h=0,"HHV"==t.type)h=o;else if("LLV"==t.type)h=s;else if("Donchian Width"==t.type)i.O90(7),h=i.D8z(s,o);else if("GAPO"==t.type||"Gopala"==t.type)h=Math.log(o-s)/Math.log(n);else{if("VT HZ Filter"==t.type){i.O90(7),h=i.D8z(s,o),a[u]["_MHML "+t.name]=h;continue}if("Williams %R"==t.type){i.O90(141),h=i.D8z(20,80)*(o-a[u].Close)/(o-s),a[u]["Result "+t.name]=h;continue}}if(u==a.length-1)break;a[u+1].futureTick||("D","onchian"," Chan","nel","Donchian Channel"==t.type?("Donchi","an Median"," ",i.X$L(1),a[i.D8z(u,1)]["Donchian High "+t.name]=o,i.O90(1),a[i.t1w(u,1)]["Donchian Low "+t.name]=s,i.O90(1),a[i.D8z(u,1)]["Donchian Median "+t.name]=i.t1w(s,2,o,i.O90(4))):("R","es","ult"," ",i.X$L(1),a[i.D8z(u,1)]["Result "+t.name]=h))}}},t.Studies.calculateVerticalHorizontalFilter=function(e,i){var a,r,n,s;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{i.mhml=new t.Studies.StudyDescriptor(i.name,i.type,i.panel),i.mhml.chart=i.chart,i.mhml.days=i.days,i.mhml.startFrom=i.startFrom,i.mhml.inputs={},i.mhml.outputs={_MHML:null},t.Studies.calculateMaxHighMinLow(e,i.mhml),r=0,n=[];for(var o=Math.max(1,i.startFrom-i.days);o<a.length;o++)s=Math.abs(a[o].Close-a[o-1].Close),n.push(s),r+=s,n.length==i.days&&(a[o]["Result "+i.name]=a[o]["_MHML "+i.name]/r,r-=n.shift())}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:t.Studies.calculateMaxHighMinLow,seriesFN:t.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:t.Studies.calculateMaxHighMinLow},HHV:{name:"Highest High Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:t.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:"High Minus Low",calculateFN:function(e,t){var a;a=t.chart.scrubbed,i.Z_e();for(var r=t.startFrom;r<a.length;r++)"R","esul","t"," ",a[r]["Result "+t.name]=a[r].High-a[r].Low},inputs:{}}})):console.error("highLowStudies feature requires first activating studies feature.")},O=function(e){var t,i=_e;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.Z_e(),t.Studies?(t.Studies.calculateIchimoku=function(e,t){var a,r,n,s,o,l,h,c;for(a=t.chart.scrubbed,r={Base:Number(t.inputs["Base Line Period"]),Conv:Number(t.inputs["Conversion Line Period"]),LeadB:Number(t.inputs["Leading Span B Period"]),Lag:Number(t.inputs["Lagging Span Period"])},n=t.startFrom;n<a.length;n++)if(a[n]){s=v(r.Conv,n),i.X$L(9);var u=i.D8z(7,11,5);i.O90(142);var d=i.D8z(4,11,10,61);a[n]["Conversion Line "+t.name]=(s[u]+s[0])/("2">>d),s=v(r.Base,n),i.O90(58);var p=i.t1w(14,18,16,6,41);i.X$L(5);var m=i.t1w(6,16,12);a[n]["Base Line "+t.name]=(s[p]+s[0])/m,n<r.Lag||(a[n-r.Lag]["Lagging Span "+t.name]=a[n].Close)}for(o=[],n=Math.max(0,t.startFrom-r.Base);n<a.length;n++){s=v(r.LeadB,n),i.X$L(143);var g=i.t1w(13,0,8,1,5);l=(a[n]["Conversion Line "+t.name]+a[n]["Base Line "+t.name])/g,i.X$L(144);var f=i.D8z(7,43,7,4,11);i.X$L(145);var y=i.t1w(3,3,8,0,10);h=(s[f]+s[0])/y,a[n+r.Base]?("Leadin","g"," Spa","n B ",a[n+r.Base]["Leading Span A "+t.name]=l,a[n+r.Base]["Leading Span B "+t.name]=h):("Le","ad","i","ng Span B ",(c={})["Leading Span A "+t.name]=l,c["Leading Span B "+t.name]=h,o.push(c))}function v(e,t){var i,r;i=Number.MAX_VALUE,r=-1*Number.MAX_VALUE;for(var n=t-e+1;n<=t;n++)n<0||(i=Math.min(i,a[n].Low),r=Math.max(r,a[n].High));return[i,r]}t.appendFutureTicks(e,o)},t.Studies.displayIchimoku=function(e,i,a){var r,n,s,o,l,h,c;r="Leading Span A "+i.name,n="Leading Span B "+i.name,s=t.Studies.determineColor(i.outputs[i.outputMap[r]]),o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=e.panels[i.panel],h=i.getYAxis(e),c={topBand:r,bottomBand:n,topColor:s,bottomColor:o,skipTransform:l.name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(c.opacity*=.3),t.fillIntersecting(e,i.panel,c),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:t.Studies.calculateIchimoku,seriesFN:t.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}}})):("ichimoku feature requires first activating st","udies feature.",console.error("ichimoku feature requires first activating studies feature."))},E=function(e){var t,i;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies){"Intraday Momentum"," ","Inde","x",t.Studies.calculateIntradayMomentum=function(e,t){var i,a,r,n,s,o,l=_e;if(i=t.chart.scrubbed,a=t.days,i.length<a+1)t.error=!0;else{if(r=0,l.c7b(),l.O90(8),n=l.t1w(1,"0"),t.startFrom>1){"_totD","n ",r=i[t.startFrom-1]["_totUp "+t.name],l.X$L(1);var h=l.t1w(0,1);n=i[t.startFrom-h]["_totDn "+t.name]}for(var c=t.startFrom;c<i.length;c++)"_t","otDn ","_totU","p ",(s=i[c].Close-i[c].Open)>0?r+=s:n-=s,c>=a&&((o=i[c-a].Close-i[c-a].Open)>0?r-=o:n+=o),l.X$L(146),i[c]["Result "+t.name]=l.D8z(n,r,"100",r,64),i[c]["_totUp "+t.name]=r,i[c]["_totDn "+t.name]=n}},47190132,1353725720,i=2;for(var a=1;47190132!==_e.l9L(a.toString(),a.toString().length,86471);a++)"In","traday Mtm",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:"auto",calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:81},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:19,studyOverBoughtColor:"auto",studyOverSoldValue:86,studyOverSoldColor:"Intraday Mtm"}}}}),i+=2;1353725720!==_e.i7j(i.toString(),i.toString().length,78115)&&("a","u","to",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:"auto",calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:81},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:19,studyOverBoughtColor:"auto",studyOverSoldValue:86,studyOverSoldColor:"Intraday Mtm"}}}})),t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})}else"intradayMomentum feature re","qu","ires first"," activating studies feature.",console.error("intradayMomentum feature requires first activating studies feature.")},I=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,_e.c7b(),t.Studies?(t.Studies.calculateKeltner=function(e,i){t.Studies.MA(i.inputs["Moving Average Type"],i.days,"Close",0,"MA",e,i),t.Studies.calculateStudyATR(e,i),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")},N=function(e){var t,i,a=_e;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)"#0","0DD00","a","u","t","o",t.Studies.calculateKlinger=function(e,i){var r,n,s,o,l,h,c,u,d,p,m;if("Klinge","rSi","gna","l","exponen","ti","al","_EM","A","-","S",r=i.chart.scrubbed,n=Number(i.inputs["Short Cycle"]),s=Number(i.inputs["Long Cycle"]),r.length<Math.max(n,s)+1)i.error=!0;else{for(o=i.name+"_hist",l="Klinger "+i.name,h="KlingerSignal "+i.name,c="_SV "+i.name,u="_EMA-S "+i.name,d="_EMA-L "+i.name,p=Math.max(1,i.startFrom);p<r.length;p++)m=r[p].Volume,r[p]["hlc/3"]<r[p-1]["hlc/3"]&&(m*=-1),m&&(r[p][c]=m);for(t.Studies.MA("exponential",n,c,0,"_EMA-S",e,i),a.O90(18),t.Studies.MA("exponential",s,c,a.t1w("0",32),"_EMA-L",e,i),p=Math.max(s,i.startFrom);p<r.length&&(!r[p].futureTick&&null!==r[p][u]&&null!==r[p][d]);p++)r[p][l]=r[p][u]-r[p][d];for(t.Studies.MA("exponential",Number(i.inputs["Signal Periods"]),l,0,"KlingerSignal",e,i),p=i.startFrom;p<r.length;p++)r[p][o]=r[p][l]-r[p][h];i.outputMap[o]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}});else{530806262,1764039854,i=2;for(var r=1;530806262!==a.i7j(r.toString(),r.toString().length,26476);r++)console.error("klinger feature requires first activating studies feature."),i+=2;1764039854!==a.l9L(i.toString(),i.toString().length,62702)&&console.error("")}},z=function(e){var t,i=_e;i.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("f","i","eld","TimeSe","ri","es","time"," serie","s","Time Ser","ies",t.Studies.prettify["time series"]="tsma",t.Studies.movingAverage.conversions.tsma="time series",t.Studies.movingAverage.translations["time series"]="Time Series",t.Studies.movingAverage.typeMap.tsma="TimeSeries",t.Studies.movingAverage.typeMap["time series"]="TimeSeries",t.Studies.calculateMovingAverageTimeSeries=function(e,a){var r,n,s,o,l,h,c,u;for(var d in a.ma=new t.Studies.StudyDescriptor(a.name,"ma",a.panel),a.ma.chart=a.chart,a.ma.days=a.days,a.ma.startFrom=a.startFrom,a.ma.inputs=a.inputs,t.Studies.calculateLinearRegressionIndicator(e,a.ma),r=a.name,a.outputs)i.X$L(95),r=i.t1w(d,r," ");n=parseInt(a.inputs.Offset,10),isNaN(n)&&(n=0),s=a.chart.scrubbed,o=n;for(var p=a.startFrom-1;p>=0;p--)if((l=s[p][r])||0===l){if(!(o>0))break;o--}for(h=[],i.Z_e(),p++;p<s.length;p++)c=s[p],p+n>=0&&("Fore","cast ",p+n<s.length?(i.O90(1),s[i.D8z(p,n)][r]=c["Forecast "+a.name]):("For","ec","as","t ",(u={})[r]=c["Forecast "+a.name],h.push(u)));a.appendFutureTicks(e,h)},t.Studies.calculateLinearRegressionIndicator=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f;if("Cl","o","s","e",(a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(r=t.inputs.Field)&&"field"!=r||(r="Close"),i.O90(126);var y=i.t1w(6,12,2,10);i.X$L(147);var v=i.t1w(4,17,151,14,22);n=t.days*(t.days+y)/v,s=Math.pow(n,2),i.O90(139);var b=i.t1w(3,12,7);i.O90(148);var x=i.t1w(20,20,5,5,1);if(o=n*(b*t.days+x)/3,l=0,h=0,c=0,t.startFrom){i.O90(149);var C=i.t1w(16,18,457,12,19);(u=a[t.startFrom-C]["_sums "+t.name])&&(h=u[0],l=u[1],c=u[2])}for(var S=t.startFrom;S<a.length;S++)if("RSquar","ed ","S","lo","p","e ",(d=a[S][r])&&"object"==Me(d)&&(d=d[t.subField]),(d||0===d)&&(h+=t.days*d-l,l+=d,i.O90(18),c+=Math.pow(d,i.D8z("2",64)),!(S<t.days-1))){if(S>t.days-1){if((p=a[S-t.days][r])&&"object"==Me(p)&&(p=p[t.subField]),!p&&0!==p)continue;l-=p,c-=Math.pow(p,2)}m=(t.days*h-n*l)/(t.days*o-s),a[S]["Slope "+t.name]=m,g=(l-m*n)/t.days,a[S]["Intercept "+t.name]=g,a[S]["Forecast "+t.name]=g+m*t.days,i.X$L(7);var w=i.D8z(4,6);f=(t.days*o-s)/(t.days*c-Math.pow(l,w)),i.X$L(150),a[S]["RSquared "+t.name]=i.t1w(f,m,m),a[S]["_sums "+t.name]=[h,l,c]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},"LR Slope":{name:"Linear Reg Slope",calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}}})):console.error("linearRegression feature requires first activating studies feature.")},j=function(e){var t,i=_e;i.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#0","0","DD","00",t.Studies.calculateMACD=function(e,a){var r,n,s,o,l,h,c,u,d,p,m;if("_","h","is","t","Sig","nal","Si","gna","l MA Typ","e","Mo","ving Averag","e"," Type",r=a.chart.scrubbed,n=a.inputs,s=a.name,a.macd1Days||(a.macd1Days=parseFloat(n["Fast MA Period"])),a.macd2Days||(a.macd2Days=parseFloat(n["Slow MA Period"])),a.signalDays||(a.signalDays=parseFloat(n["Signal Period"])),a.days||(a.days=Math.max(a.macd1Days,a.macd2Days,a.signalDays)),r.length<a.days+1){a.error=!0,829371700,643261637,2;for(var g=1;829371700!==i.l9L(g.toString(),g.toString().length,8390);g++)return;if(643261637!==i.l9L(2..toString(),2..toString().length,14820))return}for((o=a.inputs.Field)&&"field"!=o||(o="Close"),(l=n["Moving Average Type"])||(l="exponential"),t.Studies.MA(l,a.macd1Days,o,0,"_MACD1",e,a),t.Studies.MA(l,a.macd2Days,o,0,"_MACD2",e,a),h=u=Math.max(a.startFrom,a.days-1);h<r.length;h++)"_MA","CD1 ","_M","AC","D","1 ",!(c=r[h])["_MACD1 "+s]&&0!==c["_MACD1 "+s]||!c["_MACD2 "+s]&&0!==c["_MACD2 "+s]||(i.X$L(1),c[i.D8z("MACD ",s)]=c["_MACD1 "+s]-c["_MACD2 "+s]);for((d=n["Signal MA Type"])||(d="exponential"),t.Studies.MA(d,a.signalDays,"MACD "+s,0,"Signal",e,a),i.O90(1),p=i.t1w(s,"_hist"),h=u;h<r.length;h++)"MAC","D"," ",c=r[h],i.X$L(1),((m=c[i.t1w("Signal ",s)])||0===m)&&(c[p]=c["MACD "+s]-c["Signal "+s]);a.outputMap[p]=""},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:t.Studies.calculateMACD,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("macd feature requires first activating studies feature.")},V=function(e){var t,i=_e;i.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateMassIndex=function(e,a){var r,n;if("_","tota","l ","_","total ","e","xp","onentia","l",(r=a.chart.scrubbed).length<Math.max(9,a.days+1)){a.error=!0,-2052317514,-734732867,2;for(var s=1;-2052317514!==i.i7j(s.toString(),s.toString().length,91014);s++)return;i.i7j(2..toString(),2..toString().length,48096)}else{for(var o=a.startFrom;o<r.length;o++)r[o]["_High-Low "+a.name]=r[o].High-r[o].Low;if(t.Studies.MA("exponential",9,"_High-Low "+a.name,0,"_EMA",e,a),t.Studies.MA("exponential",9,"_EMA "+a.name,0,"_EMA2",e,a),i.X$L(8),n=i.t1w(1,"0"),r[a.startFrom-1]&&r[a.startFrom-1]["_total "+a.name]){i.O90(14);var l=i.t1w(4,18,13);n=r[a.startFrom-l]["_total "+a.name]}for(var h=Math.max(17,a.startFrom);h<r.length;h++){if(n+=r[h]["_EMA "+a.name]/r[h]["_EMA2 "+a.name],h>=17+a.days-1){r[h]["Result "+a.name]=n,i.O90(1);var c=i.D8z(0,1);i.X$L(151);var u=i.t1w(9,2,10,14,32);n-=r[h-a.days+c]["_EMA "+a.name]/r[h-a.days+u]["_EMA2 "+a.name]}r[h]["_total "+a.name]=n}}},t.Studies.displayMassIndex=function(e,i,a){var r,n,s,o;t.Studies.displaySeriesAsLine(e,i,a),r=i.inputs["Bulge Threshold"],e.panels[i.panel],n=i.getYAxis(e),s=t.Studies.determineColor(i.outputs.Result),o={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:r,direction:1,color:s,yAxis:n,opacity:.3},!i.highlight&&e.highlightedDraggable&&(o.opacity*=.3),t.preparePeakValleyFill(e,o),t.Studies.drawHorizontal(e,i,null,r,n,s)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Mass Idx":{name:"Mass Index",seriesFN:t.Studies.displayMassIndex,calculateFN:t.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}}})):console.error("massIndex feature requires first activating studies feature.")},H=function(e){var t,i,a=_e;if(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,a.c7b(),t.Studies){t.Studies.calculateMoneyFlowIndex=function(e,t){var i,r,n,s,o,l,h,c,u,d,p;if("_cum","MF ",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{r=0,n=0,a.X$L(152);var m=a.t1w(9,8,21,19,14);s=i[t.startFrom-m],o="_rawMF "+t.name,l="_cumMF "+t.name,h="Result "+t.name,s&&s[l]&&(r=s[l][0],n=s[l][1]),a.c7b();for(var g=t.startFrom;g<i.length;g++)c=i[g]["hlc/3"],g>0&&!i[g].futureTick&&("h","lc","/","3",a.X$L(7),u=i[a.t1w(1,g)]["hlc/3"],d=c*i[g].Volume,c>u?r+=d:c<u?n-=d*=-1:d=0,g>t.days&&((p=i[g-t.days][o])>0?r-=p:n+=p,0===n?i[g][h]=100:i[g].Volume&&(a.O90(153),i[g][h]=a.D8z(r,n,100,1,100))),i[g][o]=d,i[g][l]=[r,n])}},815561035,1443347444,i=2;for(var r=1;815561035!==a.i7j(r.toString(),r.toString().length,91358);r++)"M ","Flow",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"M Flow":{name:"M Flow",range:"0 to 100",calculateFN:t.Studies.calculateMoneyFlowIndex,inputs:{Period:74},parameters:{init:{studyOverZonesEnabled:!1,studyOverBoughtValue:90,studyOverBoughtColor:"M Flow",studyOverSoldValue:92,studyOverSoldColor:"auto"}}}}),i+=2;1443347444!==a.i7j(i.toString(),i.toString().length,76685)&&("a","u","t","o","0"," to 100","Money Flow I","n","dex",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:t.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}}))}else console.error("moneyFlow feature requires first activating studies feature.")},B=function(e){var t,i,a=_e;a.Z_e(),a.X$L(35),t=a.t1w(64,"2");for(var r=1;-1370252329!==a.l9L(r.toString(),r.toString().length,9);r++)"un","d","efined",i="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ,t+=2;1905875576!==a.l9L(t.toString(),t.toString().length,88310)&&(i=""===~_CIQ?_CIQ:e.CIQ),i.Studies?("a","u","t","o","Hig","h Low Bands","#00DD0","0","m","a","au","to","m","a","TripleEx","ponent","ial","DoubleExpon","en","tial","Hu","ll","Double Exponentia","l","3","-","exp","onential","h","u","ll",i.Studies.prettify=i.extend({"2-exponential":"dema","3-exponential":"tema",hull:"hma"},i.Studies.prettify),i.extend(i.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),i.Studies.calculateMovingAverageHull=function(e,t){var r,n,s,o,l,h,c,u;for("_","M","MA"," ","w","m","a","_W","MA1","fi","eld",r=t.chart.scrubbed,(n=t.inputs.Field)&&"field"!=n||(n="Close"),a.Z_e(),i.Studies.MA("wma",t.days,n,0,"_WMA1",e,t),i.Studies.MA("wma",Math.ceil(t.days/2),n,0,"_WMA2",e,t),s=t.startFrom-1;s>=0&&((o=r[s][n])&&"object"==Me(o)&&(o=o[t.subField]),!o&&0!==o);s--);for(s++;s<r.length;s++){"_WM","A1 ","_","M","MA ",l=r[s],a.X$L(20);var d=a.t1w(17,34,34,16);l["_MMA "+t.name]=d*l["_WMA2 "+t.name]-l["_WMA1 "+t.name]}for(var p in h=parseInt(t.inputs.Offset,10),isNaN(h)&&(h=0),c=Math.floor(Math.sqrt(t.days)),i.Studies.MA("wma",c,"_MMA "+t.name,h,"_HMA",e,t),u=t.name,t.outputs)a.O90(95),u=a.t1w(p,u," ");for(s=Math.max(t.days+c-1,t.startFrom);s<r.length;s++)r[s][u]=r[s]["_HMA "+t.name]},i.Studies.calculateMovingAverageDoubleExponential=function(e,t){var r,n,s,o,l,h,c,u,d,p,m;for(r=t.chart.scrubbed,(n=t.inputs.Field)&&"field"!=n||(n="Close"),i.Studies.MA("ema",t.days,n,0,"_EMA1",e,t),i.Studies.MA("ema",t.days,"_EMA1 "+t.name,0,"_EMA2",e,t),s=parseInt(t.inputs.Offset,10),isNaN(s)&&(s=0),h=s,o=t.startFrom-1;o>=0;o--)if((l=r[o][n])&&"object"==Me(l)&&(l=l[t.subField]),l||0===l){if(!(h>0))break;h--}for(var g in c=t.name,t.outputs)a.X$L(95),c=a.t1w(g,c," ");for(u=[],o++;o<r.length;o++){if(!(o<2*(t.days-1)))d=r[o],a.O90(154),p=a.t1w(162,2,16,10,5)*d["_EMA1 "+t.name]-d["_EMA2 "+t.name],o+s>=0&&(o+s<r.length?(a.X$L(1),r[a.t1w(o,s)][c]=p):((m={})[c]=p,u.push(m)))}t.appendFutureTicks(e,u)},i.Studies.calculateMovingAverageTripleExponential=function(e,t){var r,n,s,o,l,h,c,u,d,p,m;for("e","ma","_","E","MA1 ","C","l","os","e","fi","el","d",r=t.chart.scrubbed,(n=t.inputs.Field)&&"field"!=n||(n="Close"),i.Studies.MA("ema",t.days,n,0,"_EMA1",e,t),i.Studies.MA("ema",t.days,"_EMA1 "+t.name,0,"_EMA2",e,t),i.Studies.MA("ema",t.days,"_EMA2 "+t.name,0,"_EMA3",e,t),s=parseInt(t.inputs.Offset,10),isNaN(s)&&(s=0),h=s,a.Z_e(),o=t.startFrom-1;o>=0;o--)if((l=r[o][n])&&"object"==Me(l)&&(l=l[t.subField]),l||0===l){if(!(h>0))break;h--}for(var g in c=t.name,t.outputs)a.O90(95),c=a.D8z(g,c," ");for(u=[],o++;o<r.length;o++)if("_EM","A3"," ","_","EMA2 ",!(o<3*(t.days-1))){d=r[o],a.X$L(155);var f=a.t1w(28,8,11,12,16);a.X$L(5);var y=a.D8z(30,39,12);p=f*d["_EMA1 "+t.name]-y*d["_EMA2 "+t.name]+d["_EMA3 "+t.name],o+s>=0&&(o+s<r.length?(a.X$L(1),r[a.t1w(o,s)][c]=p):((m={})[c]=p,u.push(m)))}t.appendFutureTicks(e,u)},i.Studies.calculateMAEnvelope=function(e,t){var r,n,s;a.Z_e(),(r=t.inputs.Field)&&"field"!=r||(r="Close"),i.Studies.MA(t.inputs["Moving Average Type"],t.days,r,0,"MA",e,t),n=t.inputs["Shift Type"],s=t.inputs.Shift,n||(n="percent",s=t.inputs["Shift Percentage"]),"percent"==n?(a.O90(23),i.Studies.calculateGenericEnvelope(e,t,a.t1w(100,s),"MA "+t.name)):"points"==n&&("M","A"," ",i.Studies.calculateGenericEnvelope(e,t,null,"MA "+t.name,null,Number(s)))},i.Studies.calculateMADev=function(e,t){var r,n,s,o,l,h,c,u;if("_","M","A","Movi","ng Average"," Typ","e",(r=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(n=t.inputs.Field)&&"field"!=n||(n="Close"),(s=t.inputs["Points Or Percent"])||(s="Points"),(o=t.inputs["Moving Average Type"])||(o="exponential"),i.Studies.MA(o,t.days,n,0,"_MA",e,t),l=t.name+"_hist";for(var d=Math.max(t.startFrom,t.days-1);d<r.length;d++)"objec","t",(c=(h=r[d])[n])&&"object"==Me(c)&&(c=c[t.subField]),((u=h["_MA "+t.name])||0===u)&&("Po","ints","Points"==s?(a.X$L(7),h[l]=a.t1w(u,c)):(a.O90(156),h[l]=a.t1w(u,1,c,100)));t.outputMap={},t.outputMap[t.name+"_hist"]=""}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:i.Studies.displayChannel,calculateFN:i.Studies.calculateMAEnvelope,inputs:{Period:50,Field:"field","Shift Type":["percent","points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"MA Dev":{name:"Moving Average Deviation",calculateFN:i.Studies.calculateMADev,seriesFN:i.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:"field","Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:i.Studies.displayChannel,calculateFN:function(e,t){a.c7b(),t.inputs["Moving Average Type"]="triangular",i.Studies.calculateMAEnvelope(e,t)},inputs:{Period:10,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}}})):console.error("movingAverages feature requires first activating studies feature.")},W=function(e){var t,i=_e;i.c7b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("Parabolic SA","R",t.Studies.calculatePSAR=function(e,t){var a,r,n,s,o,l,h,c,u,d,p;if("Maxi","mu","m AF",a=t.chart.scrubbed,r=0,n=null,i.Z_e(),s=!1,o=0,l=parseFloat(t.inputs["Minimum AF"]),h=parseFloat(t.inputs["Maximum AF"]),t.startFrom>0){i.X$L(7);var m=i.D8z(9,10);o=a[t.startFrom-m]["Result "+t.name],(c=a[t.startFrom-1]["_state "+t.name])&&3==c.length&&(r=c[0],n=c[1],i.O90(7),s=c[i.t1w(0,"2")])}function g(){r=0,n=null,s=!s}for(var f=t.startFrom-1;f<a.length-1;f++)if(!(f<0)){if(a[f].futureTick)break;u=o,s?((!n||n<a[f].High)&&(n=a[f].High,i.X$L(1),r=Math.min(i.D8z(r,l),h)),i.O90(157),o=i.D8z(r,n,u,u),d=Math.min(a[Math.max(1,f)-1].Low,a[f].Low),o>a[f+1].Low?(o=n,g()):o>d&&(o=d)):((!n||n>a[f].Low)&&(n=a[f].Low,i.O90(1),r=Math.min(i.D8z(r,l),h)),i.X$L(157),o=i.D8z(r,n,u,u),p=Math.max(a[Math.max(1,f)-1].High,a[f].High),o<a[f+1].High?(o=n,g()):o<p&&(o=p)),i.X$L(78),a[i.t1w(f,"1")]["_state "+t.name]=[r,n,s],isNaN(a[f].High)&&isNaN(a[f].Low)||(i.O90(1),a[i.D8z(f,1)]["Result "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:t.Studies.calculatePSAR,seriesFN:t.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):console.error("parabolicSAR feature requires first activating studies feature.")},R=function(e){var t,i=_e;i.Z_e(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#","f","fd0","cf","#e364","60","#6","99","158","#b8","2c0b","Piv","ot ","Points",t.Studies.calculatePivotPoints=function(e,a){var r,n,s,o,l,h,c,u,d,p;function m(){i.Z_e(),i.X$L(158);var e=i.t1w(10,14,20,49,11);i.X$L(159);var t=i.D8z(15,12,19,5,7);u.pivotPoint=(u.high+u.low+r[g-e].Close)/t,u.prevHigh=u.high,u.prevLow=u.low,u.hlSpread=u.high-u.low,u.high=u.low=0}i.Z_e(),r=a.chart.scrubbed,n="day",s=e.layout.interval,o=e.layout.timeUnit,"day"==s?n="month":t.ChartEngine.isDailyInterval(s)?n="year":"second"==s||"millisecond"==s||"second"==o||"millisecond"==o?n="15min":("w","e","e","k",l=e.layout.periodicity,"minute"!=s&&(l*=s),l>=30&&(n="week")),h=null,i.O90(36),c=i.t1w(6,46,10,7,14)-t.getFromNS(e.chart,"market.beginningDayOfWeek",0),u={pivotPoint:NaN,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0},a.startFrom>1&&r[a.startFrom-1]["_pointers "+a.name]&&(u=t.clone(r[a.startFrom-1]["_pointers "+a.name]));for(var g=Math.max(1,a.startFrom);g<r.length;g++)if("_","pointers ","15mi","n","w","e","e","k","m","o","nt","h",r[g-1]){if(u.high=Math.max(u.high,r[g-1].High),u.low=Math.min(u.low>0?u.low:r[g-1].Low,r[g-1].Low),a.inputs.Continuous||"year"==n&&r[g].DT.getYear()!=r[g-1].DT.getYear()||"month"==n&&r[g].DT.getMonth()!=r[g-1].DT.getMonth()||"week"==n&&(r[g].DT.getDay()+c)%7<(r[g-1].DT.getDay()+c)%7?m():"day"==n?(null===h&&(h=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[g].DT,shiftToDateBoundary:!0})),d=new Date(new Date(+r[g].DT).setMilliseconds(r[g].DT.getMilliseconds()+h)),(p=new Date(new Date(+r[g-1].DT).setMilliseconds(r[g-1].DT.getMilliseconds()+h))).getDate()!==d.getDate()&&0!==p.getDay()&&e.chart.market.isMarketDate(d)&&(h=null,m())):"15min"!=n||r[g].DT.getHours()==r[g-1].DT.getHours()&&Math.floor(r[g].DT.getMinutes()/15)==Math.floor(r[g-1].DT.getMinutes()/15)||m(),r[g]["Pivot "+a.name]=u.pivotPoint,"fibonacci"==a.inputs.Type.toLowerCase())r[g]["Resistance 1 "+a.name]=u.pivotPoint+.382*u.hlSpread,r[g]["Resistance 2 "+a.name]=u.pivotPoint+.618*u.hlSpread,r[g]["Resistance 3 "+a.name]=u.pivotPoint+u.hlSpread,r[g]["Support 1 "+a.name]=u.pivotPoint-.382*u.hlSpread,r[g]["Support 2 "+a.name]=u.pivotPoint-.618*u.hlSpread,r[g]["Support 3 "+a.name]=u.pivotPoint-u.hlSpread;else{"Suppo","rt ","1 ",i.X$L(160);var f=i.t1w(7,16,6,8,19);r[g]["Resistance 1 "+a.name]=f*u.pivotPoint-u.prevLow,r[g]["Resistance 2 "+a.name]=u.pivotPoint+u.hlSpread,i.O90(62);var y=i.t1w(1,16,1,11,17);r[g]["Resistance 3 "+a.name]=u.prevHigh+y*(u.pivotPoint-u.prevLow),i.X$L(161);var v=i.t1w(0,258,16,20,12);r[g]["Support 1 "+a.name]=v*u.pivotPoint-u.prevHigh,r[g]["Support 2 "+a.name]=u.pivotPoint-u.hlSpread,i.O90(9);var b=i.D8z(10,8,0);r[g]["Support 3 "+a.name]=u.prevLow-b*(u.prevHigh-u.pivotPoint)}r[g]["_pointers "+a.name]=t.clone(u)}},t.Studies.displayPivotPoints=function(e,a,r){var n,s;a.noSlopes=!a.inputs.Continuous,t.Studies.displaySeriesAsLine(e,a,r),i.Z_e(),a.inputs.Shading&&("Su","pport 3","Suppor","t"," ","2","S","upport ","2 ","S","upport 1 ","P","iv","ot ","Re","sistance"," 1 ","R","e","sista","nce 3",n=e.panels[a.panel],s={noSlopes:a.noSlopes,opacity:a.parameters.opacity?a.parameters.opacity:.2,skipTransform:n.name!=a.chart.name,yAxis:a.getYAxis(e)},!a.highlight&&e.highlightedDraggable&&(s.opacity*=.3),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Resistance 3 "+a.name,bottomBand:"Resistance 2 "+a.name,color:t.Studies.determineColor(a.outputs["Resistance 3"])},s)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Resistance 2 "+a.name,bottomBand:"Resistance 1 "+a.name,color:t.Studies.determineColor(a.outputs["Resistance 2"])},s)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Resistance 1 "+a.name,bottomBand:"Pivot "+a.name,color:t.Studies.determineColor(a.outputs["Resistance 1"])},s)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Support 1 "+a.name,bottomBand:"Pivot "+a.name,color:t.Studies.determineColor(a.outputs["Support 1"])},s)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Support 2 "+a.name,bottomBand:"Support 1 "+a.name,color:t.Studies.determineColor(a.outputs["Support 2"])},s)),t.prepareChannelFill(e,t.extend({panelName:a.panel,topBand:"Support 3 "+a.name,bottomBand:"Support 2 "+a.name,color:t.Studies.determineColor(a.outputs["Support 3"])},s)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:t.Studies.displayPivotPoints,calculateFN:t.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":"#e36460","Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}}})):console.error("pivotPoints feature requires first activating studies feature.")},X=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculatePrettyGoodOscillator=function(e,i){var a,r;a=2;for(var n=1;-955189193!==_e.i7j(n.toString(),n.toString().length,74803);n++)r=i.chart.scrubbed,a+=2;if(1998956716!==_e.l9L(a.toString(),a.toString().length,10834)&&(r=i.chart.scrubbed),r.length<i.days+1)i.error=!0;else{t.Studies.MA("exponential",i.days,"trueRange",0,"_EMA",e,i),t.Studies.MA("simple",i.days,"Close",0,"_SMA",e,i);for(var s=Math.max(1,i.startFrom);s<r.length;s++)"_","E","M","A ","R","esult"," ","_","E","MA"," ","_","SMA ",r[s]["_SMA "+i.name]&&r[s]["_EMA "+i.name]&&(r[s]["Result "+i.name]=(r[s].Close-r[s]["_SMA "+i.name])/r[s]["_EMA "+i.name])}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:t.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}}}})):("prettyGoodOscillator feature requires"," first activating"," st","udies feature.",console.error("prettyGoodOscillator feature requires first activating studies feature."))},U=function(e){var t,i=_e;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ,i.Z_e(),t.Studies?("0",".05","Price Moment","um Os","c","illator",t.Studies.calculatePMO=function(e,a){var r,n,s,o,l;if(i.Z_e(),"exp","onent","ial","_R","OCx","10 ","Signal"," Period","Dou","ble Smoothin","g Period",r={Smooth:Number(a.inputs["Smoothing Period"])-1,Double:Number(a.inputs["Double Smoothing Period"])-1,Signal:Number(a.inputs["Signal Period"])},(n=a.chart.scrubbed).length<r.Smooth+r.Double)a.error=!0;else{for((s=a.inputs.Field)&&"field"!=s||(s="Close"),o=a.startFrom;o<n.length;o++)if(n[o]&&n[o-1]&&(i.X$L(7),l=n[i.t1w(1,o)][s])){i.X$L(68);var h=i.t1w(4,3,997,10);i.X$L(7);var c=i.D8z(8,9);n[o]["_ROCx10 "+a.name]=h*(n[o][s]/l-c)}t.Studies.MA("exponential",r.Smooth,"_ROCx10 "+a.name,0,"_EMAx10",e,a),t.Studies.MA("exponential",r.Double,"_EMAx10 "+a.name,0,"PMO",e,a),t.Studies.MA("exponential",r.Signal,"PMO "+a.name,0,"PMOSignal",e,a),a.zoneOutput="PMO"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:"Price Momentum Oscillator",calculateFN:t.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}}})):("priceMomentumOscillator feature requires first activating ","studies feature.",console.error("priceMomentumOscillator feature requires first activating studies feature."))},Y=function(e){var t,i=_e;i.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","ut","o","#","F","F0","000","v","d","m","a","Per","cen","t","Poin","ts",t.Studies.calculatePriceOscillator=function(e,a){var r,n,s,o,l,h,c,u,d;if("_Short M","A","Points"," Or Percent","s","imple","Mov","ing Avera","ge Type",r=a.chart.scrubbed,n=Number(a.inputs["Short Cycle"]),s=Number(a.inputs["Long Cycle"]),r.length<Math.max(n,s)+1)a.error=!0;else{o=a.inputs.Field,(l=a.inputs["Moving Average Type"])||(l="simple"),o&&"field"!=o||(o="Close"),a.parameters.isVolume&&(o="Volume",l="exponential"),(h=a.inputs["Points Or Percent"])||(h="Percent"),t.Studies.MA(l,n,o,0,"_Short MA",e,a),t.Studies.MA(l,s,o,0,"_Long MA",e,a);for(var p=Math.max(s,a.startFrom);p<r.length;p++)"_","Sh","ort MA ",(c=r[p])&&(u=c["_Short MA "+a.name],d=c["_Long MA "+a.name],!u&&0!==u||!d&&0!==d||("Increasing ","Bar","Points"==h?(i.O90(7),c["Result "+a.name]=i.D8z(d,u)):(i.X$L(156),c["Result "+a.name]=i.t1w(d,1,u,100)),a.outputs["Increasing Bar"]&&("Res","ul","t ","_h","i","s","t",c[a.name+"_hist"]=c["Result "+a.name],a.outputMap={},a.outputMap[a.name+"_hist"]="")))}},t.Studies.displayRAVI=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g;n=e.panels[a.panel],s=a.getContext(e),o=a.getYAxis(e),l=e.pixelFromPrice(0,n,o),i.O90(5);var f=i.D8z(9,27,20);(h=e.layout.candleWidth-f)<2&&(h=1),c=t.Studies.determineColor(a.outputs["Increasing Bar"]),u=t.Studies.determineColor(a.outputs["Decreasing Bar"]),e.startClip(a.panel),e.canvasColor("stx_histogram"),i.c7b(),a.underlay||(s.globalAlpha=1),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var y=0;y<r.length;y++)"#CCC","CCC","_","h","is","t","_","h","is","t",d=r[y],i.O90(108),(p=r[i.D8z(0,"1",y)])||(p=e.getPreviousBar(e.chart,a.name+"_hist",y)),d&&(m=0,g=0,a.parameters&&a.parameters.studyOverZonesEnabled&&(m=parseFloat(a.parameters.studyOverBoughtValue),g=parseFloat(a.parameters.studyOverSoldValue)),p?d[a.name+"_hist"]>m&&p[a.name+"_hist"]<d[a.name+"_hist"]?s.fillStyle=c:d[a.name+"_hist"]<g&&p[a.name+"_hist"]>d[a.name+"_hist"]?s.fillStyle=u:s.fillStyle="#CCCCCC":s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(y,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[a.name+"_hist"],n,o)-l)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Short Cycle":12,"Long Cycle":26,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},"Vol Osc":{name:"Volume Oscillator",calculateFN:t.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},RAVI:{name:"RAVI",seriesFN:t.Studies.displayRAVI,calculateFN:t.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}}})):console.error("priceVolumeOscillator feature requires first activating studies feature.")},Q=function(e){var t,i=_e;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.Z_e(),t.Studies?("au","t","o",t.Studies.calculatePrimeNumber=function(e,t){var a,r,n,s,o,l,h,c;a=[],r=t.chart.scrubbed;for(var u=t.startFrom;u<r.length;u++)if(n=r[u]){if(s=n.High,!isNaN(s)){for(var d=0;s>0&&s<=10;d++)s*=10;for(g(s)&&(s+=2),(s=Math.ceil(s))%2==0&&s++;!g(s);)s+=2;s/=Math.pow(10,d)}if(o=n.Low,!isNaN(o)){for(var p=0;o>0&&o<=10;p++)o*=10;if(g(o)&&(i.O90(8),o-=i.t1w(1,"2")),(o=Math.floor(o))%2==0&&o--,o>0){for(;!g(o);)i.X$L(3),o-=i.t1w(0,"2");o/=Math.pow(10,p)}}if("Prime Number Bands"==t.type)"Pri","me Bands Bottom ",isNaN(s)||(n["Prime Bands Top "+t.name]=s),isNaN(o)||(n["Prime Bands Bottom "+t.name]=Math.max(0,o));else{"Re","s","ul","t ","Tolerance Perc","entage",l=0,i.X$L(9);var m=i.D8z(11,15,104);h=t.inputs["Tolerance Percentage"]*(s-o)/m,i.O90(6),(c=s+o-i.t1w(13,1,17,3)*n.Close)<h?l=1:c>h&&(l=-1),l&&(n["Result "+t.name]=l)}}function g(e){var t;if(e<=0)return!1;if(e!=Math.floor(e))return!1;if(!0===a[e]||!1===a[e])return a[e];i.Z_e(),t=parseInt(Math.sqrt(e),10);for(var r=2;r<=t;r++)if(e%r==0)return a[e]=!1,!1;return a[e]=!0,!0}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Prime Number":{name:"Prime Number Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:t.Studies.calculatePrimeNumber,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}}})):console.error("primeNumber feature requires first activating studies feature.")},q=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("w","eek","ly","#00DD0","0",t.Studies.calculateKST=function(e,i){var a,r,n,s,o,l,h,c,u=_e;for("K","STSigna","l","Heaviest R","ate of Change"," Period","fie","l","d",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),s={},(n={})[1]=Number(i.inputs["Lightest Rate of Change Period"]),n[2]=Number(i.inputs["Light Rate of Change Period"]),n[3]=Number(i.inputs["Heavy Rate of Change Period"]),n[4]=Number(i.inputs["Heaviest Rate of Change Period"]),s[1]=Number(i.inputs["Lightest SMA Period"]),s[2]=Number(i.inputs["Light SMA Period"]),s[3]=Number(i.inputs["Heavy SMA Period"]),u.O90(35),s[u.t1w(32,"4")]=Number(i.inputs["Heaviest SMA Period"]),o=Number(i.inputs["Signal Period"]),l=i.startFrom;l<a.length;l++)if(a[l])for(h=1;h<=4;h++)if("_","RO","C",l>=n[h]&&a[l-n[h]]&&a[l-n[h]][r]){u.O90(22);u.t1w(13,118950,19,18,111070);u.X$L(5);var d=u.t1w(5269,0,19);u.X$L(162);u.D8z(5631,8,5639,5633);u.X$L(68);u.t1w(15,4,6853,16);u.X$L(163);var p=u.D8z(14,107380,8,8,6864956);u.O90(1);u.t1w(488,3413);u.X$L(5);var m=u.t1w(102,11,9);u.O90(164);var g=u.D8z(14,19,265,1,1);a[l]["_ROC"+h+(d>6141?1750==p||"S":" ")+i.name]=m*(a[l][r]/a[l-n[h]][r]-g)}for(h=1;h<=4;h++)t.Studies.MA("simple",s[h],"_ROC"+h+" "+i.name,0,"_SMA"+h,e,i);for(l=i.startFrom;l<a.length;l++)for("KST"," ",a[l]["KST "+i.name]=null,h=1;h<=4;h++){"KS","T ",u.X$L(113);var f=u.D8z(4,19,644,4483);u.O90(142);var y=u.D8z(14,9,14,6871);u.X$L(165);u.D8z(5308,14,5951,2,9);u.X$L(7);var v=u.t1w(8964,9960);u.X$L(77);var b=u.D8z(7877,7877,7879);u.O90(1);u.D8z(782,14);u.O90(7);var x=u.t1w(100320,109440);u.O90(95);u.D8z(143,2417,10);u.X$L(63);var C=u.t1w(1390,13,196003,13,11);((c=a[l]["_SMA"+h+(f!=y?242.47===v||(b==x||" "):C)+i.name])||0===c)&&(u.O90(8),a[l]["KST "+i.name]+=u.D8z(c,h))}t.Studies.MA("simple",o,"KST "+i.name,0,"KSTSignal",e,i)},t.Studies.calculateSpecialK=function(e,i){var a,r,n,s,o,l,h,c,u=_e;for("Clo","se",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs.Interval)||(n="daily"),s={daily:[10,15,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,52,78,104]},o={daily:[10,10,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]},l=i.startFrom;l<a.length;l++)if(a[l])for(h=0;h<s[n].length;h++)if(l>=s[n][h]&&a[l-s[n][h]]&&a[l-s[n][h]][r]){u.X$L(7);var d=u.D8z(3,103);u.O90(166);var p=u.t1w(13,146,3,15,5);a[l]["_ROC"+h+" "+i.name]=d*(a[l][r]/a[l-s[n][h]][r]-p)}for(h=0;h<o[n].length;h++)"_R","O","C",t.Studies.MA("daily"==n?"simple":"exponential",o[n][h],"_ROC"+h+" "+i.name,0,"_MA"+h,e,i);for(l=i.startFrom;l<a.length;l++)for(a[l]["Result "+i.name]=null,h=0;h<o[n].length;h++){"_","MA",u.O90(120);u.D8z(775,5,6977,155);u.O90(77);var m=u.t1w(33552,16776,8386);u.X$L(36);var g=u.D8z(15,69241,4944,17,11);u.O90(68);var f=u.D8z(17,2,519,5);((c=a[l]["_MA"+h+(m<=g?f:" ")+i.name])||0===c)&&(u.O90(167),a[l]["Result "+i.name]+=u.t1w(1,c,h,4))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:t.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:t.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}}})):console.error("pring feature requires first activating studies feature.")},Z=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Studies?t.Studies.studyLibrary.PVAT||("st","e","p","#fe6","41c","Pro","jected ","Aggregat","e Volume","+","50%","hh:","mm:ss","s","te","p","#","fe641c","-","5","0","%","+25","%","+5","0%","0"," t","o m","ax",t.Studies.initProjectedVolume=function(e,i,a,r,n,s){var o,l;var h=e.chart.market;return o="00:00",h&&(o=h.getNormalOpen()),o.match(/^[\d]{2}:[\d]{2}$/)&&(o+=":00"),a["Anchor Time"]&&a["Anchor Time"].length||(a["Anchor Time"]=o),l=t.Studies.initializeFN(e,i,a,r,n,s),e.currentlyImporting||(l.defaultAnchorTime=o),l},t.Studies.validateProjectedVolumeLookback=function(e,t){var i=e.layout,a=i.interval,r=i.periodicity;_e.Z_e();var n=t.inputs["Lookback Days"];return _e.O90(168),_e.D8z(a,n,10,r)},t.Studies.calculateProjectedVolume=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R,X,U,Y,Q,q,Z=_e;function G(e,t,i){for(;t;)e=new Date(new Date(e).setDate(e.getDate()+(i?1:-1))),se.isMarketDate(e)&&t--;return e}r="hei",r+="kina",r+="shi",n="o",n+="hl",n+="c";var K=e.layout,J=K.interval,ee=K.timeUnit,te=K.aggregationType,ie=e.chart,ae=ie.symbol,re=ie.scroll,ne=ie.scrubbed,se=ie.market;if(s="PAV"===a.type,o=a.study?a.study.name:a.type,t.ChartEngine.isDailyInterval(J)?a.error="".concat(o," is Intraday Only"):"tick"===ee?(Z.O90(1),a.error="".concat(Z.t1w("Tick mode not supported fo","r ")).concat(o)):"minute"!==ee?a.error="Sub-minute periodicities not supported for ".concat(o):te&&[n,r].includes(te)?t.Studies.validateProjectedVolumeLookback(e,a)||(a.error="Selected lookback/periodicity combo not supported for ".concat(o)):a.error="Aggregation type not supported for ".concat(o),!a.error){if(a.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,a):t.Studies.removeAnchorHandle(e,a),(l=se?se.getNormalOpen():"00:00").match(/^[\d]{2}:[\d]{2}$/)&&(l+=":00"),!e.currentlyImporting)if(a.defaultAnchorTime){if(l!==a.defaultAnchorTime)return a.defaultAnchorTime=l,a.inputs["Anchor Time"]=l,void t.Studies.repositionAnchor(e,a)}else a.defaultAnchorTime=l;var oe=a.inputs,le=oe["Lookback Days"],he=oe["Anchor Time"];Z.O90(8);var ce=De(he.split(":"),3),ue=ce[0],de=ce[1],pe=ce[2],me=void 0===pe?_e.t1w(1,"0"):pe;if(h=t.getFn("Market.Symbology.isForexSymbol")(ae),c=a.getDependents(e),Z.X$L(35),u=Z.D8z(64,"0"),d=[],c.forEach((function(e){var t,i=e.inputs,a=e.outputMap;(Z.Z_e(),i.Period)&&(u=Math.max(parseInt(i.Period),u),(t=d).push.apply(t,ke(Object.keys(a))))})),a.dependentsOutputMap=d,m=ze(ne.length-1,!0),g=Math.ceil(ne.length-1-re),Z.X$L(7),f=ze(Z.t1w(u,g)),h&&ne[f]&&t.dateToStr(ne[f].DT,"HH:mm")!==l&&(Z.X$L(7),f=ze(Z.t1w(1,f))),p=!h&&a.startFrom>f&&ne[f]&&void 0!==ne[f]["V "+a.name]&&d.every((function(e){return Z.c7b(),![void 0,null].includes(ne[f][e])}))&&!1!==m?m:f,(y=G(Ne(f),le)).setHours(0,0,0),b=((v=ze(0,!0))||0===v)&&Ve(G(ne[v].DT,le,!0)),ne[0].DT>y){if(!e.quoteDriver)return Z.X$L(1),a.error="".concat(Z.D8z("Not enough data to calc","ulate ")).concat(o);if(e.quoteDriver.extendHistoricalData({from:y}),!(b>0))return;p=b}if(!(p<0||p>ne.length-1)){if(x=ne.length-a.startFrom==1&&a.cachedFutureTicks&&a.cachedLastProjection&&+a.cachedLastProjection.DT==+ne[ne.length-1].DT&&ne[p]["PV "+a.name])"P","V ",ne[ne.length-1]["PV "+a.name]=a.cachedLastProjection.projectedValue,a.appendFutureTicks(e,a.cachedFutureTicks),p=a.startFrom;else{a.cachedFutureTicks=null,a.cachedLastProjection=null,C=[m],S=[];for(var ge=0;ge<le;ge++)w=ze(C[0]-1),C.unshift(w);for(;C[le]>=p;){if(k=C.pop(),!ne[k])return $e(k);var fe=je(ne[k].DT),ye=fe.hours,ve=fe.minutes;if(A=void 0,D=se.getClose(ne[k].DT)){for(T=se.getNextClose(ne[k].DT),A=je(D);(0!==A.hours||0!==A.minutes)&&D.getDate()===T.getDate();)D=T,T=se.getNextClose(T);0===(A=je(D)).hours&&(A.hours=24)}else A={hours:24,minutes:0};M=C.slice();for(var be=0;be<M.length;be++){if(_=M[be],!ne[_])return $e(_);var xe=je(ne[_].DT),Ce=xe.hours,Se=xe.minutes;if(Ce<ye||Ce===ye&&Se<ve)do{_++;var we=je(ne[_].DT);Ce=we.hours,Se=we.minutes}while(Ce!==ye||Se!==ve);M[be]=_}for(;ye<A.hours||ye===A.hours&&ve<A.minutes;){F=!1,P=void 0,L=void 0,O=0,E=0;for(var Ae=0;Ae<M.length;Ae++)if(null!==(I=M[Ae])){if(!(N=ne[I]))return $e(I);var Te=je(N.DT),Me=Te.hours,Fe=Te.minutes;if($=N.DT.getDate(),Me===ye&&Fe===ve)if(O+=N.Volume,E++,M[Ae]++,ne[M[Ae]].DT.getDate()!==$)M[Ae]=null;else if(!F){var Pe=je(ne[M[Ae]].DT);P=Pe.hours,L=Pe.minutes,F=!0}}if(ye=P,ve=L,0===E)break;Z.X$L(23),z=Z.t1w(E,O),ne[k]?("PV"," ",ne[k]["PV "+a.name]=z):S.push((Le={},Oe="PV "+a.name,Ee=z,Oe in Le?Object.defineProperty(Le,Oe,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):Le[Oe]=Ee,Le)),k++}C.unshift(ze(C[0]-1))}a.cachedLastProjection={DT:ne[ne.length-1].DT,projectedValue:ne[ne.length-1]["PV "+a.name]},a.cachedFutureTicks=S,a.appendFutureTicks(e,S)}var Le,Oe,Ee;if(j=null,Z.X$L(7),V=Z.t1w(0,"0"),H=0,x&&s)for(;p>0;){if(Z.X$L(7),(W=ne[Z.t1w(1,p)]["V "+a.name])||0===W){V=W;break}p--}for(var Ie=p;Ie<ne.length;Ie++)if(X=(R=ne[Ie]).Volume,U=R["PV "+a.name],R.futureTick||(B=Ie),null===j&&(j=t.Studies.getMarketOffset({stx:e,localQuoteDate:ne[Ie].DT,shiftToDateBoundary:!0})),Y=new Date(new Date(R.DT).getTime()+j),Q=ne[Ie-1]&&new Date(new Date(ne[Ie-1].DT).getTime()+j),(q=new i.Date(R.DT,se.market_def.market_tz||"America/New_York")).setHours(ue,de,me),Z.O90(1),(q=new Date(Z.D8z(q,j))).setDate(Y.getDate()),Q&&Y.getDate()!==Q.getDate()&&(j=null,V=0,H=0),Y<q)R["V "+a.name]=0,R["PV "+a.name]=0;else if(s?(V+=X,H+=U):(V=X,H=U),R["V "+a.name]=V,x||(R["PV "+a.name]=H),[NaN,null,void 0].includes(V)&&!R.futureTick)return Z.O90(95),void(a.error="".concat(o).concat(Z.D8z(" require","olume","s v")));a.cachedLastProjection.projectedValue=ne[B]["PV "+a.name],a.outputMap={},a.outputMap["V "+a.name]="",a.outputMap["PV "+a.name]="Average Line",c.forEach((function(t){t.startFrom=p,t.study.calculateFN(e,t)}))}}function Ne(t){return e.dateFromTick(t,null,!0,"scrubbed")}function $e(e){console.error("Expected data for ".concat(Ne(e).toDateString()," but found none. This may be caused by gaps in your data or an improperly configured market definition."))}function ze(i,a){var r,n,s,o,l;return r=Ne(i),s=Ve(n=se.getOpen(r)||((o=r).setHours(0),o.setMinutes(0),l=t.Studies.getMarketOffset({stx:e,localQuoteDate:o}),Z.c7b(),new Date(o.getTime()+l))),a?(s<0&&(s=Ve(G(n,1,!0))),!(s>=ne.length)&&s):s}function je(e){return{hours:e.getHours(),minutes:e.getMinutes()}}function Ve(t){return"sc","rubbed",e.tickFromDate(t,null,null,!0,"scrubbed")}},t.Studies.displayProjectedVolume=function(e,i,a){var r,n,s,o,l,h,c,u=_e;if("V"," ",i.error)return t.Studies.removeAnchorHandle(e,i);var d=i.inputs["Alert Threshold"],p=void 0===d?"":d;u.X$L(19);var m=u.t1w(0,5,19,16,14);u.O90(50);var g=u.t1w(10,20);r=parseInt(p.slice(0,m),g)/100,"object"===Me(n=i.outputs["Alert Bar"])&&(n=n.color),i.volumeField="V "+i.name,i.alignStepToSide=!0,i.extendToEndOfLastBar=!0,i.lineWidth=2,s=e.canvasStyle("stx_volume_underlay_up").opacity,o=e.canvasStyle("stx_volume_underlay_down").opacity,i.colorFunction=function(t){var a,l,h,c,d,p;var m=t.Open,g=t.Close,f=t.iqPrevClose;return a=e.colorByCandleDirection?m:f,u.X$L(169),l=u.t1w(g,a),h=t["PV "+i.name],c=t["V "+i.name],u.X$L(170),d=u.t1w("1",r,h),{fill_color:(p=r<0?c<d:c>d)&&n||(l?this.fill_color_down:this.fill_color_up),border_color:l?this.border_color_down:this.border_color_up,opacity:p?1:l?o:s,border_opacity:l?o:s}},l=i.study?i.study.name:i.type;var f=e.chart.loadingMore;if(u.c7b(),h=a.some((function(e){return"P","V"," ",u.Z_e(),e&&e[i.volumeField]&&e["PV "+i.name]})),c=a[0]&&!a[0].futureTick&&(void 0===a[0]["PV "+i.name]||(i.dependentsOutputMap||[]).some((function(e){return[void 0,null].includes(a[0][e])}))),!h&&f)return u.X$L(113),i.error="".concat(u.t1w("or","hing data f","Fetc"," ")).concat(l);t.Studies.createVolumeChart(e,i,a),t.Studies.displaySeriesAsLine(e,i,a),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,a),c&&t.Studies.calculateProjectedVolume(e,i)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PVAT:{name:"Projected Volume at Time",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%","+75%","+50%","+25%","None","-25%","-50%","-75%","-100%","-125%","-150%"],"Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):("projectedVolume feature requi","res first activating studies feature.",console.error("projectedVolume feature requires first activating studies feature."))},G=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculatePsychologicalLine=function(e,t){var i,a,r,n,s,o,l=_e;l.Z_e(),i=2;for(var h=1;1318313658!==l.l9L(h.toString(),h.toString().length,10190);h++)a=t.chart.scrubbed,i+=2;if(-1526940988!==l.l9L(i.toString(),i.toString().length,89156)&&(a=t.chart.scrubbed),a.length<t.days+1)t.error=!0;else{r=[],l.O90(129),n=l.D8z(83,8,3,17,3725)/t.days,s=0;for(var c=Math.max(t.startFrom-t.days,1);c<a.length&&("Res","u","lt"," ",!a[c].futureTick);c++)(o=Number(a[c].Close>a[c-1].Close))&&(s+=n),r.push(o),r.length>t.days&&(s-=r.shift()*n),c<t.startFrom||isNaN(a[c].Close)||(a[c]["Result "+t.name]=s)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:t.Studies.calculatePsychologicalLine,inputs:{Period:20}}})):console.error("psychologicalLine feature requires first activating studies feature.")},K=function(e){var t;_e.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("QStic","k",t.Studies.calculateQStick=function(e,i){var a;if("_Cl",_e.Z_e(),"ose-Op","en"," ","Moving Avera","ge Type",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var r=i.startFrom;r<a.length;r++)a[r]["_Close-Open "+i.name]=a[r].Close-a[r].Open;t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Close-Open "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"QStick",calculateFN:t.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}}})):console.error("qstick feature requires first activating studies feature.")},J=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("f","ie","ld","#FF","00F","F","#7F00","FF","#00","7","F","FF","#0","0F","FFF","#F","F","0","000","R","ainbow Moving Average",t.Studies.calculateRainbow=function(e,i){var a,r,n,s,o,l,h,c,u,d,p=_e;function m(e,t){var i,r;p.X$L(7);var n=p.D8z(1,0);i=Number.MAX_VALUE*n,r=Number.MAX_VALUE,p.Z_e();for(var s=t-e+1;s<=t;s++)s<0||(i=Math.max(i,a[s].Close),r=Math.min(r,a[s].Close));return[r,i]}if("fi","eld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{-1365760673,1310864647,r=2;for(var g=1;-1365760673!==p.i7j(g.toString(),g.toString().length,61315);g++)n=i.inputs.Field,r+=2;1310864647!==p.l9L(r.toString(),r.toString().length,58595)&&(n=i.inputs.Field),n&&"field"!=n||(n="Close"),s=n;for(var f=1;f<=10;f++){"S","M","A","S","MA",t.Studies.MA("simple",i.days,s,0,"SMA"+f,e,i),p.O90(171);p.t1w(16710,2,14,8348,8330);p.X$L(9);p.t1w(13,14,2);p.X$L(22);p.D8z(19,72930,20,16,67375);p.O90(44);p.D8z(17,107644,6,6341,6332);p.O90(66);p.D8z(11,5,163,1);s="SMA"+f+" "+i.name}for(var y=Math.max(i.startFrom,10);y<a.length;y++)if("O","s","c",a[y]){if(a[y].futureTick)break;o=0,l=0,p.O90(60);var v=p.D8z(31,4,8);for(h=Number.MAX_VALUE*v,c=Number.MAX_VALUE,f=1;f<=10;f++){"S","M","A",p.X$L(31);var b=p.D8z(12,51002,7,8502);p.X$L(1);var x=p.t1w(3767,3);p.X$L(7);p.D8z(54890,59880);p.X$L(11);var C=p.D8z(8,579286,44856,13,16);((u=a[y]["SMA"+f+(204.6!==b?" ":486.62<=x||C)+i.name])||0===u)&&(o+=u,l++,h=Math.max(h,u),c=Math.min(c,u))}if(i.name.indexOf("Osc")>-1&&("H","HV","/LLV Lo","okback",d=m(i.inputs["HHV/LLV Lookback"],y),l)){"Ov","e","r"," ","_","h","is","t",p.X$L(57);var S=p.D8z(200,1,100);a[y][i.name+"_hist"]=S*(a[y][n]-o/l)/Math.max(1e-6,d[1]-d[0]),p.X$L(7);var w=p.D8z(10,110);p.O90(96);var k=p.D8z(16,19,5777,19);a[y]["Over "+i.name]=w*(h-c)/Math.max(1e-6,d[k]-d[0]),a[y]["Under "+i.name]=-a[y]["Over "+i.name],a[y]["Zero "+i.name]=0}}i.name.indexOf("Osc")>-1&&("Ze","r","o"," ","Positive Ba","r",i.outputMap={},i.outputMap["Over "+i.name]="Positive Bar",i.outputMap["Under "+i.name]="Negative Bar",i.outputMap["Zero "+i.name]="",i.outputMap[i.name+"_hist"]="")}},t.Studies.displayRainbowMA=function(e,i,a){var r;r=e.panels[i.panel];for(var n=10;n>0;n--)"S","M","A",t.Studies.displayIndividualSeriesAsLine(e,i,r,"SMA"+n+" "+i.name,a)},t.Studies.displayRainbowOsc=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g=_e;t.Studies.displaySeriesAsLine(e,i,a),r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3),o=e.pixelFromPrice(0,r,s),l=r.name!=i.chart.name,h=t.Studies.determineColor(i.outputs["Positive Bar"]),n.strokeStyle=h,e.plotDataSegmentAsLine("Over "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),g.O90(3),(c=n.createLinearGradient(g.t1w(0,"0"),o,0,s.flipped?s.bottom:s.top)).addColorStop(0,e.containerColor),g.O90(8),c.addColorStop(g.t1w(1,"1"),h),t.prepareChannelFill(e,{skipTransform:l,color:c,opacity:!i.highlight&&e.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Over "+i.name,bottomBand:"Zero "+i.name,yAxis:s}),u=t.Studies.determineColor(i.outputs["Negative Bar"]),n.strokeStyle=u,e.plotDataSegmentAsLine("Under "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),g.X$L(0),(d=n.createLinearGradient(0,o,g.t1w("0",0),s.flipped?s.top:s.bottom)).addColorStop(0,e.containerColor),d.addColorStop(1,u),t.prepareChannelFill(e,{skipTransform:l,color:d,opacity:!i.highlight&&e.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Zero "+i.name,bottomBand:"Under "+i.name,yAxis:s}),g.X$L(163);var f=g.t1w(17,14,12,3,1114);(p=e.layout.candleWidth-f)<2&&(p=1),e.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3),n.fillStyle="#CCCCCC";for(var y=0;y<a.length;y++)(m=a[y])&&(m[i.name+"_hist"]>0?n.fillStyle=h:m[i.name+"_hist"]<0&&(n.fillStyle=u),m.candleWidth&&(p=Math.floor(Math.max(1,m.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(y,r.chart)-p/2),Math.floor(o),Math.floor(p),Math.floor(e.pixelFromPrice(m[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowMA,inputs:{Period:2,Field:"field"},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("rainbow feature requires first activating studies feature.")},ee=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,_e.c7b(),t.Studies?("#0","0","00","FF",t.Studies.calculateRandomWalk=function(e,t){var i,a,r,n,s,o,l,h,c;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else for(var u=Math.max(2,t.startFrom);u<i.length;u++){a=0,r=i[u].High,n=i[u].Low,s=0,o=0;for(var d=1;d<=t.days&&!i[u].futureTick;d++){if(u<=d){s=o=0;break}(l=(a+=i[u-d].trueRange)/d*Math.sqrt(d))&&(h=(r-i[u-d].Low)/l,c=(i[u-d].High-n)/l,s=Math.max(s,h),o=Math.max(o,c))}i[u].futureTick||isNaN(r)&&isNaN(n)||(i[u]["Random Walk High "+t.name]=s,i[u]["Random Walk Low "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:t.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}}})):console.error("randomWalk feature requires first activating studies feature.")},te=function(e){var t,i=_e;i.c7b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#FF0","000",t.Studies.calculateRelativeVigor=function(e,a){var r,n,s,o,l,h,c,u;if("RelVigSigna","l","triangu","lar",i.Z_e(),"tr","iangular","_Cha","ng","e"," ",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{for(n=a.startFrom;n<r.length;n++)s=r[n],isNaN(s.Close)||isNaN(s.Open)||(s["_Change "+a.name]=s.Close-s.Open),isNaN(s.High)||isNaN(s.Low)||(s["_Range "+a.name]=s.High-s.Low);for(t.Studies.MA("triangular",4,"_Change "+a.name,0,"_Numer",e,a),t.Studies.MA("triangular",4,"_Range "+a.name,0,"_Denom",e,a),o=[],l=[],n=Math.max(a.startFrom-a.days,0);n<r.length&&("_Den","om"," ",!r[n].futureTick);n++)if(null!==r[n]["_Numer "+a.name]||null!==r[n]["_Denom "+a.name]){for(o.push(r[n]["_Numer "+a.name]),l.push(r[n]["_Denom "+a.name]),o.length>a.days&&(o.shift(),l.shift()),h=0,i.X$L(18),c=i.t1w("0",0),u=0;u<o.length;u++)h+=o[u];for(u=0;u<l.length;u++)c+=l[u];0===c&&(c=1e-8),n<a.startFrom||(i.X$L(23),r[n]["Rel Vig "+a.name]=i.D8z(c,h))}for(i.X$L(35),t.Studies.MA("triangular",i.D8z(64,"4"),"Rel Vig "+a.name,0,"RelVigSignal",e,a),n=a.startFrom;n<r.length;n++)r[n][a.name+"_hist"]=r[n]["Rel Vig "+a.name]-r[n]["RelVigSignal "+a.name];a.outputMap[a.name+"_hist"]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("relativeVigor feature requires first activating studies feature.")},ie=function(e){var t,i=_e;i.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","ut","o","0 ","to ","1","00",t.Studies.calculateRSI=function(e,t){var a,r,n,s,o,l,h,c;if("Clo","se","fi","e","l","d",a=t.chart.scrubbed,(r=t.inputs.Field)&&"field"!=r||(r="Close"),i.Z_e(),a.length<t.days+1)t.error=!0;else{for(var u=t.startFrom;u<a.length;u++)if("_","avgL"," ","_","avg","G ","_a","v","gL ","_","av","gG ",u&&(n=a[u],i.O90(89),s=a[i.D8z(u,"1")],(n[r]||0===n[r])&&(s[r]||0===s[r]))){if(o=n[r]-s[r],l=Math.min(u,t.days),(h=s["_avgG "+t.name])||(i.O90(8),h=i.D8z(1,"0")),i.O90(23),h-=i.D8z(l,h),(c=s["_avgL "+t.name])||(c=0),i.X$L(23),c-=i.t1w(l,c),o>0)i.O90(23),h+=i.t1w(l,o);else{if(!(o<=0))continue;i.X$L(23),c-=i.t1w(l,o)}u>=t.days&&(!h&&0===h||!c&&0===c||(n["RSI "+t.name]=d(h,c))),n["_avgG "+t.name]=h,n["_avgL "+t.name]=c}t.zoneOutput="RSI"}function d(e,t){var a,r;i.c7b(),i.O90(7),a=i.t1w(0,"142210496");for(var n=1;i.i7j(n.toString(),n.toString().length,93840)!==a;n++)return 0===t?100:(i.O90(23),r=i.D8z(t,e),i.X$L(172),i.D8z(1,100,1,"100",r));if(617212667!==i.l9L(2..toString(),2..toString().length,84944))return 2!=t?964:(i.X$L(29),r=i.D8z(t,e),i.O90(173),i.D8z(r,102,7,"351"))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:t.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("rsi feature requires first activating studies feature.")},ae=function(e){var t,i=_e;i.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateSchaff=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f;if("M","ovin","g Ave","rage Type","_M","AC","D1","Moving A","verage Type","fi","e","l","d","Sh","o","rt Cycle",r=a.chart.scrubbed,n=a.days,s=Number(a.inputs["Short Cycle"]),o=Number(a.inputs["Long Cycle"]),r.length<Math.max(n,s,o)+1)a.error=!0;else{(l=a.inputs.Field)&&"field"!=l||(l="Close"),.5,t.Studies.MA(a.inputs["Moving Average Type"],s,l,0,"_MACD1",e,a),t.Studies.MA(a.inputs["Moving Average Type"],o,l,0,"_MACD2",e,a),h=0,c=0;for(var y=a.startFrom;y<r.length;y++)"_","M","AC","D",u=r[y],y<o-1||(d=u["_MACD1 "+a.name],p=u["_MACD2 "+a.name],(d||0===d||p||0===p)&&("_MACD"," ",i.X$L(7),u["_MACD "+a.name]=i.D8z(p,d)),m=u["_MACD "+a.name],y<o+(n-1)||(h=(g=v(n,y,"_MACD"))[1]>g[0]?100*(m-g[0])/(g[1]-g[0]):h,(m||0===m)&&("_","PF ",u["_PF "+a.name]=r[y-1]["_PF "+a.name]?r[y-1]["_PF "+a.name]+.5*(h-r[y-1]["_PF "+a.name]):h),f=u["_PF "+a.name],y<o+2*(n-1)||(c=(g=v(n,y,"_PF"))[1]>g[0]?100*(f-g[0])/(g[1]-g[0]):c,(f||0===f)&&(u["Result "+a.name]=r[y-1]["Result "+a.name]?r[y-1]["Result "+a.name]+.5*(c-r[y-1]["Result "+a.name]):c))))}function v(e,t,n){var s,o,l;i.c7b(),s=null,o=null;for(var h=t-e+1;h<=t;h++){i.X$L(7);i.D8z(40800,44200);i.X$L(65);var c=i.t1w(5,252125,43475,6);i.O90(174);var u=i.t1w(561,2257,2244,22,11);(l=r[h][n+(c===u||" ")+a.name])&&(s=null===s?l:Math.min(s,l),o=null===o?l:Math.max(o,l))}return[s,o]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:t.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}}})):("schaffTr","endCycl","e ","feature requires first activating studies feature.",console.error("schaffTrendCycle feature requires first activating studies feature."))},re=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#5","F","7","CB8","Shinohara Intensi","ty Ratio",t.Studies.calculateShinohara=function(e,i){var a,r,n=_e;if(n.c7b(),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r={weakNum:0,weakDen:0,strongNum:0,strongDen:0},i.startFrom>1&&(r=t.clone(a[i.startFrom-1]["_accums "+i.name]));for(var s=i.startFrom;s<a.length;s++){if("_","accu","m","s ",r.weakNum+=a[s].High-a[s].Close,r.weakDen+=a[s].Close-a[s].Low,s>0){n.O90(149);var o=n.t1w(0,9,2431,18,15);r.strongNum+=a[s].High-a[s-o].Close,n.X$L(49);var l=n.t1w(1,12,9,20);r.strongDen+=a[s-l].Close-a[s].Low}if(s>=i.days){"Weak"," R","atio ",r.weakNum-=a[s-i.days].High-a[s-i.days].Close,r.weakDen-=a[s-i.days].Close-a[s-i.days].Low,n.X$L(1);var h=n.t1w(5,95);if(a[s]["Weak Ratio "+i.name]=h*r.weakNum/r.weakDen,s>i.days){n.O90(113);var c=n.t1w(10,16,3,3);r.strongNum-=a[s-i.days].High-a[s-i.days-("1"<<c)].Close,r.strongDen-=a[s-i.days-1].Close-a[s-i.days].Low,a[s]["Strong Ratio "+i.name]=100*r.strongNum/r.strongDen}}a[s]["_accums "+i.name]=t.clone(r)}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:t.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":"#5F7CB8"}}})):("shinoh","ara feature requires fir","st activating studies featu","re.",console.error("shinohara feature requires first activating studies feature."))},ne=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","#","FF000","0","a","u","t","o","Stoc","hast","ics (Simple)","a","u","to","a","u","t","o",t.Studies.calculateStochastics=function(e,i){var a,r,n,s,o,l=_e;if("%","D","%","K","_Fast","%K ","%K Smoot","hing Pe","riods","%K Pe","r","io","ds",i.smooth||(i.smooth=i.inputs.Smooth),(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.inputs["%K Periods"])||(r=i.days),(n=i.chart.scrubbed).length<Math.max(r,i.days)+1)i.error=!0;else{(s=i.inputs["%K Smoothing Periods"])&&!i.inputs.Fast?i.smooth=!0:i.smooth&&(l.O90(0),s=l.t1w("3",1)),(o=i.inputs["%D Periods"])||(o=3),i.outputs.Fast&&("%D"," ","Fa","st",i.outputMap={},i.outputMap["%K "+i.name]="Fast",i.outputMap["%D "+i.name]="Slow");for(var h=Math.max(r,i.startFrom);h<n.length;h++)null!==c(h,a,r)&&(n[h]["_Fast%K "+i.name]=c(h,a,r));t.Studies.MA("simple",i.smooth?s:1,"_Fast%K "+i.name,0,"%K",e,i),t.Studies.MA("simple",o,"%K "+i.name,0,"%D",e,i)}function c(e,t,i){var a,r,s,o,h;l.O90(175),a=l.t1w("1",i,0,e),l.X$L(83);var c=l.t1w(12,15,0,359,12);r=Number.MAX_VALUE*-c,s=Number.MAX_VALUE;for(var u=a;u<=e;u++)"H","i","g","h","L","o","w","C","lose",o=n[u]["Close"==t?"Low":t],h=n[u]["Close"==t?"High":t],(o||0===o)&&(h||0===h)&&(s=Math.min(s,o),r=Math.max(r,h));return r==-1*Number.MAX_VALUE||s==Number.MAX_VALUE?null:r==s?0:(n[e][t]-s)/(r-s)*100}},t.Studies.calculateStochMomentum=function(e,i){var a,r,n,s,o,l,h,c,u=_e;function d(e,t){var i,a;i=null,a=null;for(var r=t-e+1;r<=t;r++)i=null===i?o[r].Low:Math.min(i,o[r].Low),a=null===a?o[r].High:Math.max(a,o[r].High);return[i,a]}if("%","K ","_","DH","L1 ","e","xpo","nential","e","xp","o","nential","%","D Pe","riods",a=Number(i.inputs["%K Periods"]),r=Number(i.inputs["%K Smoothing Periods"]),n=Number(i.inputs["%K Double Smoothing Periods"]),s=Number(i.inputs["%D Periods"]),(o=i.chart.scrubbed).length<a+r+n-1||o.length<s)i.error=!0;else{for(l=Math.max(a,i.startFrom)-1;l<o.length;l++){h=o[l],c=d(a,l),u.X$L(117);var p=u.D8z(19,2,19);u.O90(117);var m=u.D8z(17,3,17);h["_H "+i.name]=h.Close-(c[0]+c[p])/m,u.X$L(27);var g=u.D8z(18,8,5,9);h["_DHL "+i.name]=c[g]-c[0]}for(t.Studies.MA("exponential",r,"_H "+i.name,0,"_HS1",e,i),u.Z_e(),t.Studies.MA("exponential",n,"_HS1 "+i.name,0,"_HS2",e,i),t.Studies.MA("exponential",r,"_DHL "+i.name,0,"_DHL1",e,i),t.Studies.MA("exponential",n,"_DHL1 "+i.name,0,"_DHL2",e,i),l=a-1;l<o.length;l++){u.O90(176);var f=u.D8z(6,120,300,20);o[l]["%K "+i.name]=o[l]["_HS2 "+i.name]/(.5*o[l]["_DHL2 "+i.name])*f}t.Studies.MA(i.inputs["%D Moving Average Type"],s,"%K "+i.name,0,"%D",e,i),i.zoneOutput="%K"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:t.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},stochastics:{name:"Stochastics (Simple)",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Period:14,Field:"field",Smooth:!0},outputs:{Fast:"auto",Slow:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Stochastics:{name:"Stochastics",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Field:"field","%K Periods":14,Fast:!1,"%K Smoothing Periods":3,"%D Periods":3},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}},attributes:{"%K Smoothing Periods":{hidden:function(){return _e.c7b(),this.inputs.Fast}}},centerline:50}})):console.error("stochastics feature requires first activating studies feature.")},se=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateSupertrend=function(e,i){var a,r,n,s,o,l,h=_e;if("Tr",h.c7b(),"e","nd"," ",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.calculateStudyATR(e,i);for(var c=i.startFrom;c<a.length;c++)if("_D","owntr","en","d ","_U","ptre","nd ",r=a[c]){h.X$L(5);var u=h.t1w(22,29,9);n=(r.High+r.Low)/u,s=i.inputs.Multiplier*r["ATR "+i.name],h.X$L(7),o=h.D8z(s,n),h.O90(1),l=h.D8z(n,s),c&&("_Down","trend ","_D","ow","ntre","nd ",a[c-1]&&a[c-1].Close&&a[c-1].Close>a[c-1]["_Uptrend "+i.name]&&a[c-1]["_Uptrend "+i.name]>o&&(h.O90(7),o=a[h.t1w(1,c)]["_Uptrend "+i.name]),a[c-1]&&a[c-1].Close&&a[c-1].Close<a[c-1]["_Downtrend "+i.name]&&a[c-1]["_Downtrend "+i.name]<l&&(h.O90(7),l=a[h.D8z(1,c)]["_Downtrend "+i.name])),r["_Direction "+i.name]=1,c&&("_D","irection ","_Dire","ction ","_Dire","cti","o","n ",h.X$L(7),r["_Direction "+i.name]=a[h.t1w(1,c)]["_Direction "+i.name],r.Close>a[c-1]["_Downtrend "+i.name]?r["_Direction "+i.name]=1:r.Close<a[c-1]["_Uptrend "+i.name]&&(r["_Direction "+i.name]=-1)),r["_Uptrend "+i.name]=o,r["_Downtrend "+i.name]=l,r["Trend "+i.name]=r["_Direction "+i.name]>0?o:l}i.outputMap={},i.outputMap["Trend "+i.name]=""}},t.Studies.displaySupertrend=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p=_e;a=e.panels[t.panel],r=t.getContext(e),n=t.getYAxis(e),s={skipTransform:a.name!=t.chart.name,skipProjections:!0,label:e.preferences.labels,yAxis:n,highlight:t.highlight},r.strokeStyle=g(e,i[i.length-1]),r.lineWidth=2,t.highlight&&(p.X$L(8),r.lineWidth=p.t1w(1,"1.5")),o="Trend "+t.name;for(var m=0;a.chart.transformFunc&&n!=a.chart.yAxis&&m<i.length;m++)(l=i[m])&&l.transform&&(l.transform[o]=a.chart.transformFunc(e,a.chart,l[o]));function g(e,i,a){return i&&i["_Direction "+t.name]<0?t.outputs.Downtrend:t.outputs.Uptrend}e.plotDataSegmentAsLine(o,a,s,g),r.lineWidth=1,p.O90(35),r.globalAlpha=p.D8z(64,"1"),e.startClip(t.panel),!t.highlight&&e.highlightedDraggable&&(r.globalAlpha*=.3),p.O90(115);var f=p.t1w(13,11,9845,118161);p.X$L(9);var y=p.D8z(9,11,8476);p.O90(74);var v=p.t1w(8,15,33,9);p.O90(1);p.t1w(328,4599);p.X$L(126);var b=p.D8z(21,4,21,5);for(h=r.measureText(259.35==f?y>"463.26"*v&&404.02:"").width/b,c=0;c<i.length;c++)if("_Dir","ect","ion ",i[c]&&i[c-1])if(i[c-1]["_Direction "+t.name]>i[c]["_Direction "+t.name]){r.fillStyle=t.outputs.Downtrend,r.textBaseline="bottom",u=e.pixelFromPrice(i[c].High,a,n);for(var x=5;x<=45;x+=10)n.flipped?r.fillText("",e.pixelFromBar(c)-h,u+x):r.fillText("",e.pixelFromBar(c)-h,u-x)}else if(i[c-1]["_Direction "+t.name]<i[c]["_Direction "+t.name]){r.fillStyle=t.outputs.Uptrend,r.textBaseline="top",d=e.pixelFromPrice(i[c].Low,a,n);for(var C=5;C<=45;C+=10)n.flipped?r.fillText("",e.pixelFromBar(c)-h,d-C):r.fillText("",e.pixelFromBar(c)-h,d+C)}e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Supertrend:{name:"Supertrend",overlay:!0,seriesFN:t.Studies.displaySupertrend,calculateFN:t.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}}})):("supertrend featur","e requires firs","t activating studies feature.",console.error("supertrend feature requires first activating studies feature."))},oe=function(e){var t,i=_e;i.c7b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Ac","cumula","tive Swing Index",t.Studies.calculateSwingIndex=function(e,t){var a,r,n,s,o,l,h,c,u,d,p;if("Res","ult"," ",(null===(a=t.inputs["Limit Move Value"])||isNaN(a))&&(a=99999),r=t.chart.scrubbed,n=0,t.startFrom>1){i.O90(72);var m=i.t1w(18,7,2,2);n=r[t.startFrom-m]["Result "+t.name]}for(var g=Math.max(1,t.startFrom);g<r.length;g++){s=Math.abs(r[g].High-r[g-1].Close),o=Math.abs(r[g].Low-r[g-1].Close),l=Math.abs(r[g].High-r[g].Low),h=Math.abs(r[g-1].Close-r[g-1].Open),c=Math.max(s,o),u=Math.max(l,c),i.X$L(97),d=i.D8z(h,.25,u),u==s?(i.X$L(8),d-=i.t1w(o,.5)):u==o&&(i.O90(8),d-=i.D8z(s,.5)),i.O90(177);var f=i.t1w(9,1,43,7,9);i.O90(176);var y=i.D8z(38,19,7,16);p=f*(r[g].Close-r[g-y].Close+.5*(r[g].Close-r[g].Open)+.25*(r[g-1].Close-r[g-1].Open))/d*(c/a),0!==d&&0!==a||(p=0),"Swing"==t.type&&(n=0),n+=p,r[g]["Result "+t.name]=n}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},Swing:{name:"Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}}})):console.error("swingIndex feature requires first activating studies feature.")},le=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","au","to","f","iel","d",t.Studies.calculateTrendIntensity=function(e,i){var a,r,n,s,o,l,h,c,u=_e;if("T",u.c7b(),"II"," ","m","a",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for((r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("ma",i.days,r,0,"_SMA",e,i),n=0,s=0,h=[],c=Math.ceil(i.days/2),o=Math.max(0,i.startFrom-c);o<a.length;o++)"_","SMA ","_S","M","A ",(a[o]["_SMA "+i.name]||0===a[o]["_SMA "+i.name])&&((l=a[o][r]-a[o]["_SMA "+i.name])<0?(u.X$L(178),s+=u.t1w(l,1)):n+=l,h.push(l),h.length>c&&((l=h.shift())<0?(u.X$L(179),s-=u.t1w(0,l,"1")):n-=l),o<i.startFrom||(a[o]["TII "+i.name]=d(n,s)));t.Studies.MA("ema",i.inputs["Signal Period"],"TII "+i.name,0,"Signal",e,i)}function d(e,t){return Math.abs(t)<1e-8?100:(u.c7b(),u.X$L(180),u.D8z("100",100,t,1,e))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:t.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("trendIntensity feature requires first activating studies feature.")},he=function(e){var t,i=_e;i.c7b(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("TR","IX",t.Studies.calculateTRIX=function(e,a){var r,n,s,o,l,h;if(i.c7b(),(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{n=a.name,i.O90(1),s=["Close",i.D8z("_MA1 ",n),i.t1w("_MA2 ",n),i.D8z("_MA3 ",n)];for(var c=0;c<s.length-1;c++)"expo","nent","i","al",t.Studies.MA("exponential",a.days,s[c],0,"_MA"+(c+1).toString(),e,a);o=s[3];for(var u=Math.max(1,a.startFrom);u<r.length;u++)i.X$L(7),(l=r[i.D8z(1,u)][o])&&((h=r[u][o])||0===h)&&(i.O90(1),r[u][i.D8z("Result ",n)]=i.D8z(l,1,h,100,i.X$L(156)))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{TRIX:{name:"TRIX",calculateFN:t.Studies.calculateTRIX}})):console.error("trix feature requires first activating studies feature.")},ce=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTwiggsMoneyFlow=function(e,t){var i,a,r,n,s,o,l,h=_e;if((i=t.chart.scrubbed).length<t.days){t.error=!0,1778052099,h.X$L(7),a=h.t1w(0,"655077716"),2;for(var c=1;1778052099!==h.l9L(c.toString(),c.toString().length,39367);c++)return;if(h.i7j(2..toString(),2..toString().length,11259)!==a)return}r=0,n=0,h.X$L(1);var u=h.t1w(0,1);(s=i[t.startFrom-u])&&(s["_sumMF "+t.name]&&(r=s["_sumMF "+t.name]),s["_sumV "+t.name]&&(n=s["_sumV "+t.name]));for(var d=Math.max(1,t.startFrom);d<i.length;d++){"_M","FV"," ",o=Math.max(i[d-1].Close,i[d].High),l=Math.min(i[d-1].Close,i[d].Low),h.X$L(181);var p=h.t1w(7,2,17,16,261);h.X$L(67);var m=h.D8z(9000351,18,1000017,10);if(i[d]["_MFV "+t.name]=i[d].Volume*(p*i[d].Close-o-l)/(o-l==0?m:o-l),d>t.days-1){r*=(t.days-1)/t.days,h.O90(7);var g=h.t1w(14,15);n*=(t.days-g)/t.days}r+=i[d]["_MFV "+t.name],n+=i[d].Volume,d>t.days-1&&n&&(h.X$L(23),i[d]["Result "+t.name]=h.D8z(n>0?n:999999,r)),i[d]["_sumMF "+t.name]=r,i[d]["_sumV "+t.name]=n}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Twiggs:{name:"Twiggs Money Flow",calculateFN:t.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}})):console.error("twiggsMoneyFlow feature requires first activating studies feature.")},ue=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?t.Studies.calculateTypicalPrice?("Weig","hte","d ","Close",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:"Weighted Close",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):console.error("typicalPrice feature requires first activating medianPrice feature."):console.error("typicalPrice feature requires first activating studies feature.")},de=function(e){var t;_e.Z_e(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateUlcerIndex=function(e,i){var a,r,n,s;function o(e,t,i){var r;r=null;for(var n=t-e+1;n<=t;n++)n<0||(r=null===r?a[n][i]:Math.max(r,a[n][i]));return r}if("_","P","D","2 ",(a=i.chart.scrubbed).length<2*i.days-1)i.error=!0;else{for((r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.max(i.startFrom,i.days-1);n<a.length;n++)"_","PD","2 ",a[n]["_PD2 "+i.name]=Math.pow(100*(a[n][r]/o(i.days,n,r)-1),2);for(t.Studies.MA("simple",i.days,"_PD2 "+i.name,0,"_MA",e,i),_e.c7b(),n=Math.max(i.startFrom,2*(i.days-1));n<a.length;n++)"R","esu","lt ","_M","A ",((s=a[n]["_MA "+i.name])||0===s)&&(a[n]["Result "+i.name]=Math.sqrt(s))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:t.Studies.calculateUlcerIndex,inputs:{Period:14,Field:"field"}}})):("ulcerIndex feature requires first acti","vating studi","es feature.",console.error("ulcerIndex feature requires first activating studies feature."))},pe=function(e){var t,i=_e;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i.Z_e(),t.Studies?("a","uto","Ultimate Os","cillator",t.Studies.calculateUltimateOscillator=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b;if("C","y","cle"," 3",a=t.chart.scrubbed,r=[t.inputs["Cycle 1"],t.inputs["Cycle 2"],t.inputs["Cycle 3"]],n=Math.max(r[0],r[1],r[2]),a.length<n+1)t.error=!0;else{i.O90(131);var x=i.t1w(16,9,183,12,0);s=r[0]*r[x],i.O90(2),i.c7b();var C=i.D8z(1,3,9,1);o=r[0]*r[C],-39753017,-1260527827,l=2;for(var S=1;-39753017!==i.i7j(S.toString(),S.toString().length,73062);S++){i.X$L(7);var w=i.t1w(12,13);i.O90(163);var k=i.t1w(9,6,10,8,1198);h=r[w]*r[k],c=[0,0,0],u=[0,0,0],l+=2}if(-1260527827!==i.i7j(l.toString(),l.toString().length,66189))i.X$L(50),h=r[i.D8z(9,14)]-r[5],c=[9,1,6],u=[5,3,5];t.startFrom&&("_","acc","bp"," ","_a","ccbp ",a[t.startFrom-1]["_accbp "+t.name]&&(c=a[t.startFrom-1]["_accbp "+t.name].slice()),a[t.startFrom-1]["_acctr "+t.name]&&(u=a[t.startFrom-1]["_acctr "+t.name].slice()));for(var D=Math.max(1,t.startFrom);D<a.length;D++){"Re","sul","t ","_","accbp ",d=Math.min(a[D].Low,a[D-1].Close),p=a[D].Close-d,i.O90(42);var A=i.D8z(19,5,10,18,5);m=Math.max(a[D].High,a[D-A].Close)-d;for(var T=0;T<r.length;T++)c[T]+=p,u[T]+=m,D>r[T]&&(g=Math.min(a[D-r[T]].Low,a[D-r[T]-1].Close),f=a[D-r[T]].Close-g,y=Math.max(a[D-r[T]].High,a[D-r[T]-1].Close)-g,c[T]-=f,u[T]-=y);if(a[D]["_accbp "+t.name]=c.slice(),a[D]["_acctr "+t.name]=u.slice(),!(D<n)){i.X$L(142);var M=i.t1w(8,13,6,0);i.X$L(21);var _=i.D8z(5,20,8,178,4);i.X$L(182);var F=i.t1w(198,9,11,17);v=h*c[0]/u[0]+o*c[1]/u[M]+s*c[_]/u[F],i.O90(95),b=i.t1w(h,s,o),i.X$L(119),a[D]["Result "+t.name]=i.D8z(100,b,v)}}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:t.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("ultimateOscillator feature requires first activating studies feature.")},me=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#ff","f","69","e","#","85","c99e",t.Studies.calculateValuationLines=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=_e;a="field"==t.inputs.Field?"Close":t.inputs.Field,r=t.inputs["Average Type"],n=t.inputs["Display Average"],s=t.inputs["Display 1 Standard Deviation (1)"],o=t.inputs["Display 2 Standard Deviation (2)"],l=t.inputs["Display 3 Standard Deviation (3)"],h=[];for(var y=0;y<i.length;++y)i[y]&&!isNaN(i[y][a])&&h.push(i[y][a]);c=function(e,t){var i,a,r,n,s,o;switch("media","n",i=e.length,a=0,r=0,f.c7b(),n=0,t){case"mean":for(r=i;n<i;++n)a+=e[n];break;case"harmonic":for(a=i;n<i;++n){f.X$L(137),r+=f.t1w(1,9,9,2,0)/e[n]}break;case"median":if(f.X$L(23),s=Math.floor(f.D8z(2,i)),o=e.slice().sort((function(e,t){return e>t?1:e<t?-1:0})),i%2==0){f.X$L(7);var l=f.t1w(20,21);a=o[s]+o[s-l],r=2}else a=o[s],r=1}return f.O90(23),f.D8z(r,a)}(h,r),u=!(s||o||l)||function(e,t){var i,a;f.Z_e(),i=e.length,a=0;for(var r=0;r<i;++r)a+=Math.pow(e[r]-t,2);return f.X$L(23),Math.sqrt(f.t1w(i,a))}(h,c),t.data={Average:n?[c]:null,"1 Standard Deviation (1)":s?[c+u,c-u]:null,"2 Standard Deviation (2)":o?[c+2*u,c-2*u]:null,"3 Standard Deviation (3)":l?[c+3*u,c-3*u]:null},d=u,t.parameters||(t.parameters={}),l?(f.O90(183),t.parameters.range=[f.D8z(d,u,c,3),f.t1w(3,d,u,c,f.O90(184))]):o?(f.X$L(183),t.parameters.range=[f.t1w(d,u,c,2),f.D8z(2,d,u,c,f.O90(184))]):s?(f.X$L(40),t.parameters.range=[f.t1w(c,d,u),f.D8z(c,d,u,f.X$L(95))]):n&&(f.X$L(7),t.parameters.range=[f.t1w(d,c),f.t1w(c,d,f.O90(1))]),t.panel&&(p=e.panels[t.panel],(m=e.getYAxisByName(p,t.name))&&(m.decimalPlaces=p.chart.yAxis.printDecimalPlaces,g={yAxis:m},e.calculateYAxisRange(p,m,t.parameters.range[0],t.parameters.range[1]),e.createYAxis(p,g),e.drawYAxis(p,g)))},t.Studies.displayValuationLines=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w=_e;a=e.panels[i.panel],r=i.getYAxis(e),n=i.getContext(e),s=i.data,o=i.parameters.labels,l=i.inputs["Average Type"],h={mean:"AVG",median:"MED",harmonic:"HAVG"},c=e.canvasStyle("ciq-valuation-average-line"),u=e.canvasStyle("ciq-valuation-deviation-line"),w.O90(77);var k=w.t1w(10,10,1);for(var D in d=e.getCanvasFontSize("stx_yaxis")+3*k,s)if("Ave","r","age",s[D])for(w.X$L(185),p=w.D8z(D,"Average"),m=t.Studies.determineColor(i.outputs[D]),g=s[D],f=0;f<g.length;++f)"l","e","f","t","so","l","i","d","s","oli","d",y=g[f],(v=e.pixelFromPrice(y,a,r))<=a.top||v>=a.yAxis.bottom||(C=p?{pattern:"none"!=c.borderStyle&&c.borderStyle||"solid",lineWidth:parseFloat(c.borderWidth)||1,opacity:parseFloat(c.opacity)||1,yAxis:r}:{pattern:"none"!=u.borderStyle&&u.borderStyle||"dashed",lineWidth:parseFloat(u.borderWidth)||1,opacity:parseFloat(u.opacity)||1,yAxis:r},e.plotLine(a.left,a.right,v,v,m,"line",n,a,C),"yaxis"!==o?(v+=Math.floor(C.lineWidth/2))+d>=a.yAxis.bottom||(b=(p?h[l]+": ":D[0]+": ")+e.formatYAxisPrice(y,a),x=n.measureText(b).width,S=a.right-x-3,r&&"left"==r.position&&(S=a.left+3),w.O90(186),n.strokeText(b,S,w.D8z(2,d,.5,v))):e.createYAxisLabel(a,e.formatYAxisPrice(y,a),v,m,null,n,r))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(e,i,a){t.Studies.calculateValuationLines(e,i,a),_e.c7b(),t.Studies.displayValuationLines(e,i)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median","harmonic"],"Display Average":!0,"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1},outputs:{Average:"#00afed","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"}}})):console.error("valuationLines feature requires first activating studies feature.")},ge=function(e){var t,i=_e;i.Z_e(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("a","u","t","o","aut","o","f","iel","d","Relative Vo","lati","l","ity",t.Studies.calculateRelativeVolatility=function(e,a){var r,n,s,o,l,h,c;if("s","d","e","v","f","i","el","d","Sm","oothing Period",i.c7b(),a.days=Number(a.inputs["Smoothing Period"]),r=Number(a.inputs["STD Period"]),(n=a.chart.scrubbed).length<a.days+r)a.error=!0;else{(s=a.inputs.Field)&&"field"!=s||(s="Close"),a.std=new t.Studies.StudyDescriptor(a.name,"sdev",a.panel),a.std.chart=a.chart,a.std.days=r,a.std.startFrom=a.startFrom,a.std.inputs={Field:s,"Standard Deviations":1,Type:"ma"},a.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,a.std),o=0,l=0,a.startFrom>1&&(o=n[a.startFrom-1]["_avgG "+a.name]||0,l=n[a.startFrom-1]["_avgL "+a.name]||0);for(var u=Math.max(a.startFrom,a.days);u<n.length;u++)if("_av","gG ","_S","TD ",h=n[u],i.O90(7),c=n[i.t1w(1,u)],(h[s]||0===h[s])&&(c[s]||0===c[s])&&(h["_STD "+a.name]||0===h["_STD "+a.name])){if(h[s]>c[s]){i.X$L(5);var d=i.t1w(0,3,4);o=(o*(a.days-d)+h["_STD "+a.name])/a.days,i.X$L(7);var p=i.D8z(14,15);l=l*(a.days-p)/a.days}else{"_","ST","D"," ",i.X$L(81);var m=i.D8z(12,2,0,11);l=(l*(a.days-m)+h["_STD "+a.name])/a.days,i.X$L(7);var g=i.t1w(9,10);o=o*(a.days-g)/a.days}h["Rel Vol "+a.name]=f(o,l),h["_avgG "+a.name]=o,h["_avgL "+a.name]=l}a.zoneOutput="Rel Vol"}function f(e,t){return e+t===0?100:(i.O90(187),i.D8z(100,e,e,t))}},t.Studies.calculateHistoricalVolatility=function(e,t){var a,r,n,s,o,l,h,c,u;if("Standa","rd Deviati","ons",(a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{var d;if((r=t.inputs.Field)&&"field"!=r||(r="Close"),(n=t.inputs["Standard Deviations"])<0&&(n=1),i.X$L(130),s=i.t1w(17,86,1254,15,13)*Math.sqrt((d=t.inputs["Days Per Year"],isNaN(d)&&(d=365),"day"==e.layout.interval?d:"week"==e.layout.interval?52:"month"==e.layout.interval?12:d))*n,i.Z_e(),o=[],l=0,t.startFrom>1){i.X$L(5);var p=i.t1w(0,15,16);l=a[t.startFrom-p]["_state "+t.name][0],o=a[t.startFrom-1]["_state "+t.name][1].slice()}for(var m=Math.max(1,t.startFrom);m<a.length;m++){if(i.X$L(89),(h=a[i.t1w(m,"1")][r])&&(c=Math.log(a[m][r]/h),o.push(c),l+=c,m>=t.days)){"Re","sul","t ",u=0,l/=t.days;for(var g=0;g<o.length;g++)u+=Math.pow(o[g]-l,2);l*=t.days,l-=o.shift(),a[m]["Result "+t.name]=Math.sqrt(u/t.days)*s}a[m]["_state "+t.name]=[l,o.slice()]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:t.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:"field","Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:t.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("volatilityIndex feature requires first activating studies feature.")},fe=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ).Studies?("#","b64","a96","Vo","lume Profile",t.Studies.displayVolumeProfile=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D;if("s","tx_volume_profile","Bars"," Color","stx_volu","me_profile",e&&e.chart.dataSet&&(r=e.chart,n=i.parameters.numberOfBars,s=i.parameters.widthPercentage,o=i.parameters.displayBorder,l=i.parameters.displayVolume,(!n||n<0)&&(n=30),n=Math.ceil(n),(!s||s<0)&&(s=.25),!1!==o&&(o=!0),!0!==l&&(l=!1),0!==(h=(r.highValue-r.lowValue)/n))){c=[];for(var A=r.lowValue;A<r.highValue+.1;A+=h)c.push([A,0]);if(c.length<2)return"Not enoug","h data to re","nder the Volume Profile",void e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile"));u=0;for(var T=0;T<a.length;T++)if(d=a[T]){p=d.Volume,i.panel==r.name&&d.transform&&(d=d.transform),m=c[0][0],g=0;for(var M=1;M<c.length;M++)g=c[M][0],(d.Low>=m&&d.Low<=g||d.Low<m&&d.High>g||d.High>=m&&d.High<=g)&&(c[M][1]+=p,c[M][1]>u&&(u=c[M][1])),m=g}if(0===u)return"ch","a","r","t",void e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile"));e.setStyle("stx_volume_profile","color",t.Studies.determineColor(i.outputs["Bars Color"])),f=i.getContext(e),y="stx-float-date",e.canvasFont(y,f),v=e.getCanvasFontSize(y),b=r.panel,x=b.yAxis.bottom,C=Math.round(r.right)-.5,S=r.width*s,w=e.canvasStyle("stx_volume_profile").borderTopColor,k=!t.isTransparent(e.canvasStyle("stx_volume_profile").borderTopColor)&&o,D=e,_("stx_volume_profile",!1),k&&_("stx_volume_profile",!0),f.globalAlpha=1}function _(a,r){var n,s,o,h,d,p,m,g,y,k=_e;r||(k.X$L(35),C-=k.t1w(0,"2")),D.canvasColor(a),f.beginPath(),n=c[0][0],s=C;for(var A=1;A<c.length;A++){if(c[A][1]){k.X$L(38);var T=k.D8z(16,319,20);if(o=Math.round(C-c[A][T]*S/u)-.5,h=Math.round(D.pixelFromTransformedValue(n,b))+.5,d=Math.round(D.pixelFromTransformedValue(c[A][0],b))+.5,r||(k.X$L(7),h-=k.t1w(0,"0.5"),d+=.5,o+=.5),h>x&&(h=x),d<x)if(f.moveTo(C,h),f.lineTo(C,d),f.lineTo(o,d),f.lineTo(o,h),r)(s>o||1==A)&&f.lineTo(s,h);else if(f.lineTo(C,h),l&&(p=t.condenseInt(c[A][1]),k.X$L(7),m=k.D8z(d,h),v<=m-2)){try{g=f.measureText(p).width}catch(e){g=0}f.textBaseline="top",y=f.fillStyle,f.fillStyle=w,k.O90(111),f.fillText(p,k.t1w(o,"3",0,g),k.D8z(d,1,2,"2",v,m,k.O90(188))),f.fillStyle=y}s=o}else s=C;n=c[A][0]}!i.highlight&&e.highlightedDraggable&&(f.globalAlpha*=.3),r||f.fill(),f.strokeStyle=w,k.Z_e(),r&&f.stroke(),f.closePath()}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:t.Studies.displayVolumeProfile,calculateFN:null,inputs:{},outputs:{"Bars Color":"#b64a96"},customRemoval:!0,parameters:{init:{displayBorder:!0,displayVolume:!1,numberOfBars:30,widthPercentage:.25}},attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):("volumeProfi","le feature requires first activating studies feature.",console.error("volumeProfile feature requires first activating studies feature."))},ye=function(e){var t,i=_e;i.c7b(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","8cc176","n","o","n","e","Vo","lume Rate"," of Ch","ange","a","uto","m","a","f","ield","On B","alanc","e"," Volume","#FF","0","000","a","u","t","o","Negative ","Volume Index",t.Studies.calculateOnBalanceVolume=function(e,t){var a,r,n,s,o,l,h,c;(a=t.inputs.Field)&&"field"!=a||(a="Close"),n=!1,(r=t.inputs["Min Tick Value"])||0===r||(n=!0,i.O90(8),r=i.t1w(1,"0")),s=t.chart.scrubbed,o=0;for(var u=t.startFrom;u<s.length;u++)l=s[u],u&&l[a]&&(s[u-1][a]&&(i.O90(7),h=s[i.t1w(1,u)]),h&&(l[a]-h[a]>r?o=1:h[a]-l[a]>r?o=-1:n&&(i.O90(35),o=i.t1w(64,"0")),(c=h["Result "+t.name])||(c=0),c+=l.Volume*o,l["Result "+t.name]=c))},t.Studies.calculatePriceVolumeTrend=function(e,t){var a,r,n;if(i.Z_e(),(a=t.inputs.Field)&&"field"!=a||(a="Close"),r=t.chart.scrubbed,n=0,t.startFrom>1){i.X$L(131);var s=i.t1w(15,6,69,5,0);n=r[t.startFrom-s]["Result "+t.name]}for(var o=Math.max(1,t.startFrom);o<r.length;o++)if("Re","sult ",r[o][a]&&r[o-1][a]){i.O90(49);var l=i.D8z(3,5,0,12);n+=r[o].Volume*(r[o][a]-r[o-1][a])/r[o-l][a],r[o]["Result "+t.name]=n}},t.Studies.calculateVolumeIndex=function(e,a){var r,n,s,o,l,h,c;if("Ind","e","x ","C","l","os","e","f","ie","l","d",(r=a.inputs.Field)&&"field"!=r||(r="Close"),(n=a.chart.scrubbed).length<a.days+1)a.error=!0;else{if(s=100,a.startFrom>1){i.X$L(22);var u=i.D8z(3,10,13,4,29);s=n[a.startFrom-u]["Index "+a.name]}for(var d=Math.max(1,a.startFrom);d<n.length;d++)"N","eg Vol","o","b","j","ect",o=n[d][r],l=n[d].Volume,o&&"object"==Me(o)&&(l=o.Volume,o=o[a.subField]),i.O90(7),h=n[i.D8z(1,d)][r],c=n[d-1].Volume,h&&"object"==Me(h)&&(c=h.Volume,h=h[a.subField]),o&&h&&(("Pos Vol"==a.type&&l>c||"Neg Vol"==a.type&&l<c)&&(i.X$L(23),s*=i.t1w(h,o)),n[d]["Index "+a.name]=s);t.Studies.MA(a.inputs["Moving Average Type"],a.days,"Index "+a.name,0,"MA",e,a)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Neg Vol":{name:"Negative Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"Price Vol":{name:"Price Volume Trend",calculateFN:t.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:function(e,a){var r,n;if(i.c7b(),t.Studies.calculateRateOfChange)t.Studies.calculateRateOfChange(e,a);else{-1123530507,i.X$L(35),r=-i.D8z(0,"1125563075"),n=2;for(var s=1;-1123530507!==i.i7j(s.toString(),s.toString().length,73305);s++)console.error("Volume Rate of Change study requires first activating momentum feature."),n+=2;i.l9L(n.toString(),n.toString().length,91402)!==r&&console.error(""),t.Studies.calculateRateOfChange=function(e,t){}}},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,position:"none",zoom:0,heightFactor:.25},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(e,t){e.layout.volumeUnderlay=!1,e.changeOccurred("layout")},attributes:{panelName:{hidden:!0}}}})):console.error("volumeStudies feature requires first activating studies feature.")},ve=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0.","0","1","0",".","0","1","#FF000","0","Vor","tex Ind","ica","tor",t.Studies.calculateVortex=function(e,i){var a,r,n,s,o,l,h,c,u,d=_e;if(a=i.chart.scrubbed,r=i.days,a.length<r+1)i.error=!0;else{if(n={tr:0,vmPlus:0,vmMinus:0},i.startFrom>1){1339993391,-1377162757,s=2;for(var p=1;1339993391!==d.l9L(p.toString(),p.toString().length,52496);p++)n=t.clone(a[i.startFrom%2][""-i.name]),s+=2;-1377162757!==d.i7j(s.toString(),s.toString().length,61834)&&(n=t.clone(a[i.startFrom-1]["_totals "+i.name]))}for(var m=Math.max(i.startFrom,1);m<a.length;m++)o=a[m],d.X$L(7),l=a[d.D8z(1,m)],h=Math.abs(o.High-l.Low),c=Math.abs(o.Low-l.High),u=Math.max(o.High,l.Close)-Math.min(o.Low,l.Close),n.tr+=u,n.vmPlus+=h,n.vmMinus+=c,m>r&&(d.O90(7),n.tr-=a[d.D8z(r,m)]["_True Range "+i.name],d.O90(7),n.vmPlus-=a[d.t1w(r,m)]["_VMPlus "+i.name],d.X$L(7),n.vmMinus-=a[d.D8z(r,m)]["_VMMinus "+i.name]),o["_True Range "+i.name]=u,o["_VMPlus "+i.name]=h,o["_VMMinus "+i.name]=c,m>=r&&("-","V","I ",o["+VI "+i.name]=n.vmPlus/n.tr,o["-VI "+i.name]=n.vmMinus/n.tr),o["_totals "+i.name]=t.clone(n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Vortex:{name:"Vortex Indicator",calculateFN:t.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}}})):console.error("vortex feature requires first activating studies feature.")},be=function(e){var t,i=_e;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Me(_CIQ))?_CIQ:e.CIQ,i.c7b(),t.Studies?("#5","f","7cb8","#8b","c176",t.Studies.calculateMFI=function(e,t){var a,r,n,s,o,l;if("S","cal","e Factor",a=t.chart.scrubbed,n=0,(s=t.inputs["Scale Factor"])||(s=t.study.inputs["Scale Factor"]),i.c7b(),o=Math.pow(10,Number(s)),t.startFrom>1){i.O90(128);var h=i.D8z(20,18,17,20);n=a[t.startFrom-h]["_high "+t.name]}for(l=t.startFrom;l<a.length;l++)a[l]&&a[l].Volume&&(a[l][t.name+"_hist"]=r=o*(a[l].High-a[l].Low)/a[l].Volume,a[l]["_high "+t.name]=n=Math.max(n,r));t.outputMap={},t.outputMap[t.name+"_hist"]=""},t.Studies.displayMFI=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g;n=e.panels[a.panel],s=a.getContext(e),l=(o=a.getYAxis(e)).flipped?o.top:o.bottom,i.X$L(7);var f=i.t1w(11,13);(h=e.layout.candleWidth-f)<2&&(h=1),c=t.Studies.determineColor(a.outputs.Green),u=t.Studies.determineColor(a.outputs.Fade),d=t.Studies.determineColor(a.outputs.Fake),p=t.Studies.determineColor(a.outputs.Squat),e.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",e.startClip(a.panel),!a.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var y=0;y<r.length;y++)"_","hist",m=r[y],i.X$L(7),(g=r[i.D8z(1,y)])||(g=e.getPreviousBar(e.chart,a.name+"_hist",y)),m&&(g&&(g[a.name+"_hist"]<m[a.name+"_hist"]?g.Volume<m.Volume?s.fillStyle=c:g.Volume>m.Volume&&(s.fillStyle=d):g[a.name+"_hist"]>m[a.name+"_hist"]&&(g.Volume<m.Volume?s.fillStyle=p:g.Volume>m.Volume&&(s.fillStyle=u))),m.candleWidth&&(h=Math.floor(Math.max(1,m.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(y,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(m[a.name+"_hist"],n,o)-l)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:t.Studies.displayMFI,calculateFN:t.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:"#ffd0cf"}}})):console.error("williamsMFI feature requires first activating studies feature.")},xe={CIQ:we.c,SplinePlotter:we.d,timezoneJS:we.B,$$:we.a,$$$:we.b},_e.c7b(),"undefined"==typeof __TREE_SHAKE__||!__TREE_SHAKE__){190530277,1598321179,Ce=2;for(var Fe=1;190530277!==_e.l9L(Fe.toString(),Fe.toString().length,76356);Fe++)xe.CIQ.activateImports(n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,z,j,V,H,B,W,R,X,U,Y,Q,q,Z,G,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,be,1),Ce+=2;1598321179!==_e.l9L(Ce.toString(),Ce.toString().length,41270)&&xe.CIQ.activateImports(n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,z,j,V,H,B,W,R,X,U,Y,Q,q,Z,G,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,be,1),xe.CIQ.activateImports(n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,z,j,V,H,B,W,R,X,U,Y,Q,q,Z,G,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,be,null)}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Le=null;Se.c.deprecationWarning=function(e){Le||(Le={},setInterval((function(){for(var e in Le)console.warn(e+" ("+Le[e]+" occurrences)"),delete Le[e]}),1e4)),Le[e]?Le[e]++:Le[e]=1};var Oe=Se.c.deprecationWarning;Function.prototype.ciqInheritsFrom||(Function.prototype.ciqInheritsFrom=function(e,t){Oe("Function.prototype.ciqInheritsFrom() has been deprecated.  Use CIQ.inheritsFrom(me, ctor, autosuper) instead."),Se.c.inheritsFrom(this,e,t)},Function.prototype.stxInheritsFrom=Function.prototype.ciqInheritsFrom),String.prototype.capitalize=function(){return Oe("String.prototype.capitalize() has been deprecated.  Use CIQ.capitalize(string) instead."),Se.c.capitalize(this)},CanvasRenderingContext2D.prototype.dashedLineTo=function(e,t,i,a,r){if(Oe("CanvasRenderingContext2D.prototype.dashedLineTo() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo(), lineTo() and setLineDash() instead."),!(r instanceof Array))return r&&console.log('WARNING: Unsupported drawing pattern "'+r+'"; defaulting to "solid"'),void this.stxLine(e,t,i,a,this.strokeStyle,this.globalAlpha,this.lineWidth);if(t!==1/0&&e!==1/0&&a!==1/0&&i!==1/0){var n=function(e,t){return e-t<=1e-8},s=function(e,t){return e-t>=-1e-8},o=function(e,t){return Math.min(e,t)},l=function(e,t){return Math.max(e,t)},h={thereYet:s,cap:o},c={thereYet:s,cap:o};if(t-a>0&&(c.thereYet=n,c.cap=l),e-i>0&&(h.thereYet=n,h.cap=l),this.moveTo(e,t),!isNaN(e)&&!isNaN(t))for(var u=e,d=t,p=0,m=!0;!h.thereYet(u,i)||!c.thereYet(d,a);){var g=Math.atan2(a-t,i-e),f=r[p];u=h.cap(i,u+Math.cos(g)*f),d=c.cap(a,d+Math.sin(g)*f),m?this.lineTo(u,d):this.moveTo(u,d),p=(p+1)%r.length,m=!m}}},CanvasRenderingContext2D.prototype.stxLine=function(e,t,i,a,r,n,s,o){Oe("CanvasRenderingContext2D.prototype.stxLine() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo() and lineTo() instead."),this.beginPath(),this.lineWidth=s,this.strokeStyle=r,this.globalAlpha=n,o&&o.length?this.dashedLineTo(e,t,i,a,o):(this.moveTo(e,t),this.lineTo(i,a)),this.stroke(),this.closePath(),this.lineWidth=1},CanvasRenderingContext2D.prototype.stxCircle=function(e,t,i,a){Oe("CanvasRenderingContext2D.prototype.stxCircle() has been deprecated.  Use native CanvasRenderingContext2D methods such as arc() instead."),this.beginPath(),this.arc(e,t,i,0,2*Math.PI,!1),a&&this.fill(),this.stroke(),this.closePath()},Se.c.getAjaxServer=function(e){return Oe("CIQ.getAjaxServer() has been deprecated.  Use `new XMLHttpRequest` instead."),new XMLHttpRequest},Se.c.convertClickToTouchEnd=function(e){Oe("CIQ.convertClickToTouchEnd() has been deprecated.  Use CIQ.safeClickTouch() instead.");var t=document.getElementById(e),i=t.getAttribute("onClick");i&&(t.removeAttribute("onClick"),t.setAttribute("onTouchEnd",i))},Se.c.standardUTCDate=function(e){Oe("CIQ.standardUTCDate(dt) has been deprecated.  Use dt.toISOString() instead.");var t=e.getUTCMonth()+1;t<10&&(t="0"+t);var i=e.getUTCDate();i<10&&(i="0"+i);var a=e.getUTCHours();a<10&&(a="0"+a);var r=e.getUTCMinutes();r<10&&(r="0"+r);var n=e.getUTCSeconds();return n<10&&(n="0"+n),e.getUTCFullYear()+"-"+t+"-"+i+"T"+a+":"+r+":"+n+"Z"},Se.c.isDST=function(e){Oe("CIQ.isDST() has been deprecated.  Use dt.toISOString() instead."),e||(e=new Date);var t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1),a=Math.max(t.getTimezoneOffset(),i.getTimezoneOffset());return e.getTimezoneOffset()!=a},Se.c.getEventDOM=function(e){return Oe("CIQ.getEventDOM() has been deprecated.  Use `e.target` instead."),e?e.target:window.event.srcElement},Se.c.outerWidth=function(e){Oe("CIQ.outerWidth() has been deprecated.  Use `CIQ.elementDimensions(node, {margin:1, padding:1, border:1}).width` instead.");var t=e.offsetWidth;return t+=Se.c.stripPX(getComputedStyle(e).marginLeft),t+=Se.c.stripPX(getComputedStyle(e).marginRight)},Se.c.clearNode=function(e){if(Oe("CIQ.clearNode() has been deprecated.  Use `node.innerHTML=''` instead."),e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)},Se.c.findClosestParent=function(e,t){var i,a;if(Oe("CIQ.findClosestParent() has been deprecated.  Use `Element.parentElement.prototype.closest()` instead."),["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(i=e,!0)})),!i)return!1;for(;e;){if((a=e.parentElement)&&a[i](t))return a;e=a}return null},Se.c.appendClassName=function(e,t){if(Oe("CIQ.appendClassName() has been deprecated.  Use `node.classList.add(className)` instead."),e&&e.className!=t){for(var i=e.className.split(" "),a=0;a<i.length;a++)if(i[a]==t)return;e.className?e.className+=" "+t:e.className=t}},Se.c.unappendClassName=function(e,t){if(Oe("CIQ.unappendClassName() has been deprecated.  Use `node.classList.remove(className)` instead."),e&&-1!=e.className.indexOf(t))if(e.className==t)e.className="";else{for(var i=e.className.split(" "),a="",r=0;r<i.length;r++)i[r]!=t&&(""!==a&&(a+=" "),a+=i[r]);e.className=a}},Se.c.swapClassName=function(e,t,i){Oe("CIQ.swapClassName() has been deprecated.  Use `node.classList.replace(oldClassName, newClassName)` instead."),Se.c.unappendClassName(e,i),Se.c.appendClassName(e,t)},Se.c.hasClassName=function(e,t){return Oe("CIQ.hasClassName() has been deprecated.  Use `node.classList.contains(className)` instead."),!!e&&(" "+e.className+" ").indexOf(" "+t+" ")>-1},Se.c.toggleClassName=function(e,t){Oe("CIQ.toggleClassName() has been deprecated.  Use `node.classList.toggle(className)` instead."),Se.c.hasClassName(e,t)?Se.c.unappendClassName(e,t):Se.c.appendClassName(e,t)},function(){var e,t,i=document.attachEvent,a=navigator.userAgent.match(/Trident/),r=(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,20)},function(t){return e(t)}),n=(t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)});function s(e){var t=e.target||e.srcElement;t.__resizeRAF__&&n(t.__resizeRAF__),t.__resizeRAF__=r((function(){var i=t.__resizeTrigger__;i.__resizeListeners__.forEach((function(t){t.call(i,e)}))}))}function o(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",s)}Se.c.addResizeListener=function(e,t){Oe("CIQ.addResizeListener() has been deprecated.  Use CIQ.UI.addResizeListener() instead.");var r=document.querySelector("cq-ui-manager");if(r.length>0&&(r=r[0]).registerForResize(e),!e.__resizeListeners__)if(e.__resizeListeners__=[],i)e.__resizeTrigger__=e,e.attachEvent("onresize",s);else{var n=e.__resizeTrigger__=document.createElement("object");n.setAttribute("style","visibility:hidden; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; border:0px;"),n.__resizeElement__=e,n.onload=o,n.type="text/html",a&&e.appendChild(n),n.data="about:blank",a||e.appendChild(n)}e.__resizeListeners__.push(t)},Se.c.removeResizeListener=function(e,t){Oe("CIQ.removeResizeListener() has been deprecated.  Use CIQ.UI.removeResizeListener() instead.");var a=document.querySelector("cq-ui-manager");a.length>0&&(a=a[0]).unregisterForResize(e),e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(i?e.detachEvent("onresize",s):(e.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",s),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)))}}(),Se.c.Renderer.prototype.performCalculations=function(){Oe("CIQ.Renderer.prototype.performCalculations has been deprecated.  Use CIQ.Renderer.prototype.adjustYAxis instead.")},Se.c.ChartEngine.hideDates=function(){return Oe("CIQ.Renderer.hideDates is no longer supported.  To hide an axis, set its noDraw property.  To hide the floating date label, set stxx.controls.floatDate=null."),!1},Se.c.ChartEngine.chartShowsHighs=function(e){return Oe("CIQ.ChartEngine.prototype.chartShowsHighs has been deprecated.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),1!={line:1,colored_line:1,mountain:1,colored_mountain:1,baseline_delta:1,baseline_delta_mountain:1,histogram:1,scatterplot:1,step:1,colored_step:1}[e]},Se.c.ChartEngine.prototype.createBlock=function(e,t,i,a,r,n){Oe("CIQ.ChartEngine.prototype.createBlock has been deprecated.  Use native canvas context operation fillRect instead."),n||(n=this.chart.context),void 0!==a&&(this.canvasColor(r,n),n.fillRect(e,i,t,a),n.globalAlpha=1)},Se.c.ChartEngine.prototype.setVolumeUnderlay=function(e){Oe("CIQ.ChartEngine.prototype.setVolumeUnderlay is no longer supported.  To enable a volume underlay, use CIQ.Studies.addStudy(stxx, 'vol undr').  To disable, use CIQ.Studies.removeStudy."),this.layout.volumeUnderlay=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},Se.c.ChartEngine.prototype.serializeDrawings=function(){return Oe("CIQ.ChartEngine.prototype.serializeDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.exportDrawings instead."),this.exportDrawings()},Se.c.ChartEngine.prototype.reconstructDrawings=function(e){Oe("CIQ.ChartEngine.prototype.reconstructDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.importDrawings instead."),this.importDrawings(e)},Se.c.ChartEngine.prototype.computePosition=function(e,t){return Oe("CIQ.ChartEngine.prototype.computePosition has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromBar instead."),void 0===t&&(t=0),e*this.layout.candleWidth+t+this.micropixels},Se.c.ChartEngine.prototype.computeColor=function(e,t){return Oe("CIQ.ChartEngine.prototype.computeColor has been deprecated.  There is no suggested alternative."),e<t?"stx_candle_up":e>t?"stx_candle_down":"stx_candle_shadow"},Se.c.ChartEngine.prototype.computeLength=function(e,t){Oe("CIQ.ChartEngine.prototype.computeLength has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice to compute values and find the difference.");var i=this.pixelFromPrice(e);return this.pixelFromPrice(t)-i},Se.c.ChartEngine.prototype.setCrosshairColors=function(){Oe("CIQ.ChartEngine.prototype.setCrosshairColors is no longer supported.  Use CSS to set the crosshair color")},Se.c.ChartEngine.prototype.valueFromPixelUntransform=function(e,t,i){return Oe("CIQ.ChartEngine.prototype.valueFromPixelUntransform has been deprecated.  Use CIQ.ChartEngine.prototype.valueFromPixel instead."),this.valueFromPixel(e,t,i)},Se.c.ChartEngine.prototype.pixelFromPriceTransform=function(e,t,i){return Oe("CIQ.ChartEngine.prototype.pixelFromPriceTransform has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice instead."),this.pixelFromPrice(e,t,i)},Se.c.ChartEngine.prototype.isDailyInterval=function(e){return Oe("CIQ.ChartEngine.prototype.isDailyInterval has been deprecated. Use CIQ.ChartEngine.isDailyInterval instead."),Se.c.ChartEngine.isDailyInterval(e)},Se.c.ChartEngine.prototype.newChart=function(e,t,i,a,r){Oe("CIQ.ChartEngine.prototype.newChart has been deprecated. Use CIQ.ChartEngine.prototype.loadChart instead.");var n={masterData:t,chart:i};return Se.c.extend(n,r,!0),this.loadChart(e,n,a)},Se.c.ChartEngine.prototype.streamTrade=function(e,t,i,a){Oe("CIQ.ChartEngine.prototype.streamTrade has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead.");var r=this.chart;a||(a={}),a.chart&&(r=a.chart),a.fillGaps=this.streamParameters.fillGaps;var n="object"==Pe(e),s=n?e.last:arguments[0],o=n?e.volume:arguments[1],l=n?e.bid:null,h=n?e.ask:null;n||(t=arguments[2],i=arguments[3]),i&&(a.secondarySeries=i);var c={DT:t,Last:s,Volume:o,Bid:l,Ask:h};this.updateChartData(c,r,a)},Se.c.ChartEngine.prototype.appendMasterData=function(e,t,i){Oe("CIQ.ChartEngine.prototype.appendMasterData has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead."),this.updateChartData(e,t,i)},Se.c.ChartEngine.prototype.setPeriodicityV2=function(e,t,i,a){Oe("CIQ.ChartEngine.prototype.setPeriodicityV2 has been deprecated. Use CIQ.ChartEngine.prototype.setPeriodicity instead."),"function"==typeof i&&(a=i,i=null),this.runPrepend("setPeriodicityV2",arguments)||(this.setPeriodicity(e,t,i,a),this.runAppend("setPeriodicityV2",arguments))},Se.c.ChartEngine.prototype.addChart=function(e,t){Oe("CIQ.ChartEngine.prototype.addChart has been deprecated. Add manually to stxx.charts object instead."),t.name=e,this.charts[e]=t};var Ee=Se.c.ChartEngine.prototype.changeOccurred;Se.c.ChartEngine.prototype.changeOccurred=function(e){this.currentlyImporting||(this.changeCallback&&this.changeCallback(this,e),Ee.call(this,e))};var Ie=Se.c.ChartEngine.prototype.construct;if(Se.c.ChartEngine.prototype.construct=function(){function e(e,t,i){return e._deprecatedPropertyValues||(e._deprecatedPropertyValues={}),t in e._deprecatedPropertyValues||(e._deprecatedPropertyValues[t]=i),e._deprecatedPropertyValues[t]}function t(e,t,i){e._deprecatedPropertyValues||(e._deprecatedPropertyValues={}),e._deprecatedPropertyValues[t]=i}function i(t,i,a){return function(){return Oe("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Iterate through CIQ.ChartEngine.prototype.callbackListeners instead."),e(this,t,a||null)}}function a(e,t){return function(i){Oe("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Utilize CIQ.ChartEngine.prototype.addEventListener to add a callback, and/or CIQ.ChartEngine.prototype.removeEventListener to remove one."),this._deprecatedPropertyValues||(this._deprecatedPropertyValues={});var a=this._deprecatedPropertyValues[e];a&&t.removeEventListener(e,a),i&&t.addEventListener(e,i),this._deprecatedPropertyValues[e]=i}}var r;Ie.call(this),Object.defineProperties(this,{changeCallback:{enumerable:!0,get:function(){return e(this,"changeCallback",null)},set:function(e){Oe("CIQ.ChartEngine.prototype.changeCallback has been deprecated.  Use CIQ.ChartEngine.prototype.addEventListener instead."),t(this,"changeCallback",e)}},highLowBars:{enumerable:!0,get:function(){return Oe("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),e(this,"highLowBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,wave:!0,rangechannel:!0,none:!0})},set:function(e){Oe("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),t(this,"highLowBars",e)}},standaloneBars:{enumerable:!0,get:function(){return Oe("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),e(this,"standaloneBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0})},set:function(e){Oe("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),t(this,"standaloneBars",e)}},barsHaveWidth:{enumerable:!0,get:function(){return Oe("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),e(this,"barsHaveWidth",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0,wave:!0})},set:function(e){Oe("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),t(this,"barsHaveWidth",e)}}}),this.callbacks={},Object.defineProperties(this.callbacks,{studyOverlayEdit:{enumerable:!0,get:i("studyOverlayEdit"),set:a("studyOverlayEdit",this)},studyPanelEdit:{enumerable:!0,get:i("studyPanelEdit"),set:a("studyPanelEdit",this)},tap:{enumerable:!0,get:i("tap"),set:a("tap",this)},rightClick:{enumerable:!0,get:i("rightClick"),set:a("rightClick",this)},longhold:{enumerable:!0,get:i("longHold"),set:a("longHold",this)},move:{enumerable:!0,get:i("move"),set:a("move",this)},layout:{enumerable:!0,get:i("layout"),set:a("layout",this)},drawing:{enumerable:!0,get:i("drawing"),set:a("drawing",this)},drawingEdit:{enumerable:!0,get:i("drawingEdit"),set:a("drawingEdit",this)},preferences:{enumerable:!0,get:i("preferences"),set:a("preferences",this)},theme:{enumerable:!0,get:i("theme"),set:a("theme",this)},symbolChange:{enumerable:!0,get:i("symbolChange"),set:a("symbolChange",this)},symbolImport:{enumerable:!0,get:i("symbolImport"),set:a("symbolImport",this)},calculateTradingDecimalPlaces:{enumerable:!0,get:(r=this,function(){return Oe("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),e(this,"calculateTradingDecimalPlaces",r.chart.calculateTradingDecimalPlaces)}),set:function(e){return function(i){Oe("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),t(this,"calculateTradingDecimalPlaces",i),e.chart.calculateTradingDecimalPlaces=i}}(this)}}),Object.defineProperty(this.streamParameters,"fillGaps",{enumerable:!0,get:function(){return Oe("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),e(this,"fillGaps",!0)},set:function(e){Oe("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),t(this,"fillGaps",e)}})},"undefined"!=typeof window&&Object.defineProperties(window,{STX:{enumerable:!0,get:function(){return Oe("STX namespace has been deprecated.  Use CIQ namespace instead."),Se.c}},STXChart:{enumerable:!0,get:function(){return Oe("STXChart namespace has been deprecated.  Use CIQ.ChartEngine namespace instead."),Se.c.ChartEngine}}}),Se.c.ChartEngine.prototype.attachEngineQuoteFeed=function(e,t){Oe("CIQ.ChartEngine.prototype.attachEngineQuoteFeed has been deprecated. Use CIQ.ChartEngine.prototype.attachQuoteFeed instead."),this.attachQuoteFeed(e,t)},Se.c.ChartEngine.prototype.dragPlot=function(e){Oe("CIQ.ChartEngine.prototype.dragPlot is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},Se.c.ChartEngine.prototype.dragYAxis=function(e){Oe("CIQ.ChartEngine.prototype.dragYAxis is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},Se.c.Drawing=Se.c.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},Se.c.Drawing.prototype.setLineColor=function(){if(Oe("CIQ.Drawing.prototype.setLineColor has been deprecated.  Use CIQ.Drawing.prototype.setLineColor instead."),Se.c.Drawing.prototype.getLineColor)return Se.c.Drawing.prototype.getLineColor.apply(this,arguments)},Se.c.Studies=Se.c.Studies||function(){},Se.c.Studies.quickAddStudy=function(){if(Oe("CIQ.Studies.quickAddStudy has been deprecated.  Use CIQ.Studies.addStudy instead."),Se.c.Studies.addStudy)return Se.c.Studies.addStudy.apply(null,arguments)},Se.c.Studies.overZones=function(){if(Oe("CIQ.Studies.overZones has been deprecated.  Use CIQ.Studies.drawZones instead."),Se.c.Studies.drawZones)return Se.c.Studies.drawZones.apply(null,arguments)},Se.c.Studies.volUnderlay=function(){Oe("CIQ.Studies.volUnderlay has been deprecated.  Use CIQ.Studies.createVolumeChart instead."),Se.c.Studies.createVolumeChart&&Se.c.Studies.createVolumeChart.apply(null,arguments)},Se.c.Studies.determineMinMax=function(e,t,i){Oe("CIQ.Studies.determineMinMax is no longer supported.  The calculation is done automatically elsewhere.")},Se.c.Studies.createYAxis=function(e,t,i,a){Oe("CIQ.Studies.createYAxis is no longer supported.  The action is done automatically elsewhere.")},Se.c.Studies.volumeChart=function(e,t,i,a){Oe("CIQ.Studies.volumeChart has been deprecated.  Use CIQ.ChartEngine.prototype.drawHistogram instead.");var r,n,s=-1*Number.MAX_VALUE;for(r in i)for(var o=0;o<i[r].length;o++)(n=i[r][o])&&n>s&&(s=n);var l=e.panels[t.panel],h=Math.floor(l.yAxis.bottom)+.5,c=h-(Math.floor(l.yAxis.top)+.5),u=e.layout.candleWidth,d=null;t.parameters&&t.parameters.displayBorder||(a=null);var p=0;a||(p=(u-e.chart.tmpWidth)/2);var m=t.getContext(e);for(r in m.lineWidth=1,e.startClip(t.panel),i){a&&(d=a[r]),m.fillStyle=r,d&&(m.strokeStyle=d),m.beginPath();for(var g,f=h+.5,y=Math.floor(e.pixelFromBar(0,l.chart)),v=0;v<i[r].length;v++)if(e.chart.dataSegment[v]&&e.chart.dataSegment[v].candleWidth?(u=e.chart.dataSegment[v].candleWidth,a||(p=u/4)):(u=e.layout.candleWidth,a||(p=(u-e.chart.tmpWidth)/2)),0===v&&(g=y-=u/2),n=i[r][v]){var b,x,C=n*(c/s),S=Math.min(Math.floor(h-c+(c-C))+.5,h);b=Math.floor(g+p),x=Math.floor(g+u-p),b=Math.max(b,y),m.moveTo(b,h),m.lineTo(x,h),m.lineTo(x,S),m.lineTo(b,S),a?(f>S||0===v)&&m.lineTo(b,f):m.lineTo(b,h),f=S,g+=u}else f=h,g+=u;m.fill(),m.strokeStyle=d,a&&e.layout.candleWidth>=2&&m.stroke(),m.closePath()}e.endClip()},"undefined"!=typeof window&&Object.defineProperty(window,"STXSocial",{enumerable:!0,get:function(){return Oe("STXSocial namespace has been deprecated.  Use CIQ.Share namespace instead."),Se.c.Share}}),"function"==typeof $&&$.fn){$.fn.extend($.expr[":"],{trulyvisible:function(e,t,i){Oe("Use of jQuery has been deprecated. Use CIQ.trulyVisible() to return element visibility instead of custom pseudo-selector :trulyvisible.");var a=$(e).parents();a=a.add(e);for(var r=0;r<a.length;r++){var n=$(a[r]);if("0"===n.css("opacity"))return!1;if("hidden"===n.css("visibility"))return!1;if("0px"===n.css("height")&&"hidden"==n.css("overflow-y"))return!1;if(!n.is(":visible"))return!1}return!0}});$.fn.extend({stxtap:function(e,t){return Oe("Use of jQuery has been deprecated. Use CIQ.UI.stxtap() to attach a listener instead of $.fn.stxtap()."),this.each((function(){Se.c.installTapEvent(this),"string"==typeof e?$(this).on("stxtap",e,(function(e){t.call(this,e)})):$(this).on("stxtap",(function(t){e.call(this,t)}))}))},parentsAndMe:function(e){Oe("Use of jQuery has been deprecated. Use CIQ.climbUpDomTree() instead of $.fn.parentsAndMe().");var t=$(this).parents();return t=t.add($(this)).get().reverse()},cqvirtual:function(e){Oe("Use of jQuery has been deprecated. Use CIQ.cqvirtual() instead of $.fn.cqvirtual().");var t=this.clone(!0);return t.empty(),t.original=this,t},cqrender:function(e){if(Oe("Use of jQuery has been deprecated. Use CIQ.cqrender() instead of $.fn.cqrender()."),this[0].innerHTML==this.original[0].innerHTML)return this.original;this.original.children(":not(template)").remove();var t=this.children();if(t.length){var i=t.detach();this.original.append(i)}return this.original},guaranteedWidth:function(){Oe("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedWidth().");for(var e=this,t=e.width();!t;){if("BODY"===(e=e.parent())[0].tagName||e[0]===window)return window.innerWidth;t=e.width()}return t},guaranteedHeight:function(){Oe("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedHeight().");for(var e=this,t=e.height();!t;){if("BODY"===(e=e.parent())[0].tagName||e[0]===window)return window.innerHeight;t=e.height()}return t},emptyExceptTemplate:function(){return Oe("Use of jQuery has been deprecated. Use CIQ.removeChildIfNot(node, 'template') instead of $.fn.emptyExceptTemplate()."),this.children().not("template").remove(),this},truthyAttr:function(e){Oe("Use of jQuery has been deprecated. Use ['false','0',null,undefined].indexOf(this.getAttribute('...'))==-1 instead of $.fn.truthyAttr().");var t=this.attr(e);return void 0!==t&&("false"!=t.toLowerCase()&&"0"!=t)},attrBetter:function(e,t){return Oe("Use of jQuery has been deprecated. check attribute value before setting instead of $.fn.attrBetter()."),this.attr(e,(function(e,i){if(void 0===t&&(t="true"),t!==i)return t}))},removeAttrBetter:function(e){Oe("Use of jQuery has been deprecated. check hasAttribute before removing instead of $.fn.removeAttrBetter().");var t=this.attr(e);return!(!t&&""!==t)&&(this.removeAttr(e),!0)},textBetter:function(e){return Oe("Use of jQuery has been deprecated. check innerText before setting instead of $.fn.textBetter()."),this.text()!==e&&(this.text(e),!0)}}),$.queryString=function(e){Oe("Use of jQuery has been deprecated. Use CIQ.qs() to return an object containing querystring tokens instead of $.querystring().");for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]==e)return a[1]}return null}}function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}Se.c.UI||(Se.c.UI={}),Se.c.UI.allContexts=function(){return Oe("CIQ.UI.allContexts has been deprecated. Use document.querySelectorAll('cq-context,*[cq-context]') instead."),$("cq-context,*[cq-context]")},Se.c.UI.observe=function(e){if(Oe("CIQ.UI.observe has been deprecated.  Use CIQ.UI.observeProperty instead."),Object.observe){if("function"==typeof $&&$.fn){var t=this,i=function(e){e.forEach(a)};return Object.observe(e.obj,i,["update","add","delete"]),a({name:e.member}),i}Oe("You must include jQuery in your project to use CIQ.UI.observe.")}else Oe("You must include thirdparty/object-observe.js in your project to use CIQ.UI.observe.");function a(i){var a=!1;if(e.member){if(i.name===e.member)a=!0;else if(e.member.constructor==Array)for(var r=0;r<e.member.length;r++)i.name===e.member[r]&&(a=!0)}else a=!0;if(a){var n=$(e.selector);if(!n.length&&"callback"===e.action)return void e.value.call(t,e);"class"===e.action&&n.removeClass(e.value),n.each((function(){var i=!1;e.member&&(e.condition?e.obj[e.member]===e.condition&&(i=!0):i=e.obj[e.member]),"class"===e.action&&i&&n.addClass(e.value),"callback"===e.action&&e.value.call(t,e,this),"value"===e.action&&(e.value?this.value=e.value:e.obj[e.member]?this.value=e.obj[e.member]:this.value="")}))}}},Se.c.UI.unobserve=function(e){Oe("CIQ.UI.unobserve has been deprecated.  Use CIQ.UI.unobserveProperty instead."),Object.unobserve&&Object.unobserve(e.obj,e.handler)},Se.c.UI.trulyVisible=function(e){return Oe("CIQ.UI.trulyVisible has been deprecated.  Use CIQ.trulyVisible instead."),Se.c.trulyVisible(e)},Se.c.UI.Lookup=function(){},Se.c.UI.Lookup.Driver=function(){this.deprecated=!0},Se.c.UI.Lookup.Driver.prototype.acceptText=function(e,t,i,a){this.cb},Se.c.UI.Lookup.Driver.ChartIQ=function(e){Oe("CIQ.UI.Lookup.Driver.ChartIQ has been deprecated.  Use CIQ.ChartEngine.Driver.Lookup.ChartIQ instead."),this.exchanges=e,this.exchanges||(this.exchanges=["XNYS","XASE","XNAS","XASX","INDCBSX","INDXASE","INDXNAS","IND_DJI","ARCX","INDARCX","forex"]),this.url="https://symbols.chartiq.com/chiq.symbolserver.SymbolLookup.service",this.requestCounter=0},Se.c.inheritsFrom(Se.c.UI.Lookup.Driver.ChartIQ,Se.c.UI.Lookup.Driver),Se.c.UI.Lookup.Driver.ChartIQ.prototype.acceptText=function(e,t,i,a){"FX"==t&&(t="FOREX"),isNaN(parseInt(i,10))&&(i=100);var r=this.url+"?t="+encodeURIComponent(e)+"&m="+i+"&x=[";this.exchanges&&(r+=this.exchanges.join(",")),r+="]",t&&"ALL"!=t.toUpperCase()&&(r+="&e="+t);var n=++this.requestCounter,s=this;Se.c.postAjax({url:r,cb:function(e,t){if(!(n<s.requestCounter)&&200==e)try{for(var i=(t=JSON.parse(t)).payload.symbols,r=[],o=0;o<i.length;o++){var l=i[o].split("|"),h={symbol:l[0],name:l[1],exchDisp:l[2]};r.push({display:[h.symbol,h.name,h.exchDisp],data:h})}a(r)}catch(e){}}})},Se.c.UI.BaseComponent&&(Se.c.UI.BaseComponent.bind=function(e,t){Oe("CIQ.UI.BaseComponent.bind has been deprecated. Use CIQ.UI.BaseComponent.bindNode() instead."),Se.c.UI.BaseComponent.bindNode(e,t)});var je=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ExtendedHours=t.ExtendedHours||function(e){var i=e.stx;this.filter=e.filter,i||(i=e,this.filter=!1);var a={};this.stx=i,this.stx.extendedHours=this,this.cssRequired=!0,i.addEventListener("theme",(function(e){for(var t in a={},i.layout.marketSessions)a.session||(a.session={}),a.session[t]=i.canvasStyle("stx_market_session "+t)})),i.addEventListener("symbolChange",(function(e){"master"!=e.action||!i.layout.extended||i.chart.market.market_def&&i.chart.market.sessions.length||t.alert("There are no Extended Hours for this instrument.")})),this.prepare=function(e,t){for(var r in i.layout.extended=e,i.layout.marketSessions)a.session={},i.chart.market.disableSession(r);if(i.layout.marketSessions={},e)if(t||(t=["pre","post"]),t.length)for(var n=0;n<t.length;n++)i.layout.marketSessions[t[n]]=!0;else i.layout.marketSessions=t;for(r in i.layout.marketSessions)a.session||(a.session={}),a.session[r]=i.canvasStyle("stx_market_session "+r),i.chart.market.disableSession(r,!0)},this.complete=function(e){i.changeOccurred("layout"),i.chart.market.market_def?this.filter?(i.createDataSet(),i.draw(),e&&e()):i.loadChart(i.chart.symbol,e):e&&e()},this.set=function(e,t,i){this.prepare(e,t),this.complete(i)},this.stx.append("drawYAxis",(function(e,r){if(this.layout.extended&&e.yAxis==r.yAxis&&!1!==e.shareChartXAxis&&!e.hidden){var n=e.chart;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&(a.divider=this.canvasStyle("stx_market_session divider"),a.session)){for(var s,o,l=n.market,h=[],c={},u=0;u<n.dataSegment.length;u++){var d=n.dataSegment[u];if(d&&d.DT){var p=null;if(l.market_def)if(!s||s<=d.DT)o=l.getSession(d.DT),s=l[!(""===o||this.layout.marketSessions&&this.layout.marketSessions[o])?"getNextOpen":"getNextClose"](d.DT);var m=a.session[o];if(m&&(p=m.backgroundColor),c.color&&c.color!=p&&(h.push({start:c.start,end:c.end,color:c.color}),c={}),p){var g=this.layout.candleWidth;d.candleWidth&&(g=d.candleWidth),c.end=this.pixelFromBar(u,n)+g/2,c.start||0===c.start||(c.start=c.end-g+1),c.color=p}else c={}}}(c.start||0===c.start)&&h.push({start:c.start,end:c.end,color:c.color});var f=t.isTransparent(a.divider.backgroundColor),y=a.divider.width.replace(/px/g,""),v={y0:e.bottom,y1:e.top,color:a.divider.backgroundColor,type:"line",context:n.context,confineToPanel:e,pattern:"dashed",lineWidth:y,deferStroke:!0};for(this.startClip(e.name),n.context.beginPath(),i.highlightedDraggable&&(n.context.globalAlpha*=.3),u=0;u<h.length;u++)n.context.fillStyle=h[u].color,!f&&h[u].start>n.left&&this.plotLine(t.extend({x0:h[u].start,x1:h[u].start},v)),n.context.fillRect(h[u].start,e.top,h[u].end-h[u].start,e.bottom-e.top),!f&&h[u].end<n.right&&this.plotLine(t.extend({x0:h[u].end,x1:h[u].end},v));n.context.stroke(),this.endClip()}}}))}},Ve=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.FullScreen=t.FullScreen||function(e){if(e||(e={}),e.stx){try{if(window.location.host!==window.top.location.host)throw new Error(window.location.host+" does not match "+window.top.location.host)}catch(e){return void console.warn("Full screen mode disabled.")}this.stx=e.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){var e;this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",(e=this,function(t){e.fullScreenToggle(t),t.stopPropagation()})))},this.fullScreenToggle=function(e){document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.mozRequestFullscreen||document.documentElement.msRequestFullscreen?this.getFullScreenElement()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullscreen?document.documentElement.mozRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){var e=null;(e=this.stx.container.closest("*[cq-context], cq-context, body"))&&(!0===this.fullScreenState?(this.fullScreenButton&&this.fullScreenButton.classList.add("active"),e.classList.add("full-screen")):(this.fullScreenButton&&this.fullScreenButton.classList.remove("active"),e.classList.remove("full-screen")),window.dispatchEvent(new Event("resize")))},this.onFullScreenChange=function(){this.getFullScreenElement()?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(){return document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement},document.addEventListener("fullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("mozfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("MSFullscreenChange",this.onFullScreenChange.bind(this),!1),this.addFullScreenButton()}else console.warn("The Full Screen addon requires an stx parameter")}},He=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.InactivityTimer=t.InactivityTimer||function(e){if(e.minutes){(!e.interval||e.interval<0)&&(e.interval=60),this.stx=e.stx,this.timeout=e.minutes,this.interval=e.interval,this.wakeCB=e.wakeCB,this.sleepCB=e.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=(new Date).getTime(),this.wakeChart=function(){clearTimeout(this.sleepTimer),this.last=(new Date).getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,document.body.classList.remove("ciq-sleeping")),this.sleepTimer=setTimeout(this.sleepChart.bind(this),6e4*this.timeout),this.wakeCB&&this.wakeCB()},this.sleepChart=function(){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,document.body.classList.add("ciq-sleeping")),this.sleepCB&&this.sleepCB()};var t=this;["mousemove","mousedown","touchstart","touchmove","pointerdown","pointermove","keydown","wheel"].forEach((function(e){document.body.addEventListener(e,(function(e){t.wakeChart()}))})),this.wakeChart()}}},Be=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.RangeSlider=t.RangeSlider||function(e){this.cssRequired=!0;var i=e.stx;i.slider=this;var a=e.height?e.height:"95px",r=e.chartContainer?e.chartContainer:e.stx.container,n=document.createElement("div");n.className="ciq-chart";var s=document.createElement("div");s.className="chartContainer",n.appendChild(s),r.parentElement.parentElement.insertBefore(n,r.parentElement.nextSibling),Object.assign(n.style,{height:a,paddingTop:"5px",display:"none"}),s.style.height="100%",s.dimensionlessCanvas=!0;var o=this.slider=new t.ChartEngine({container:s,preferences:{labels:!1,whitespace:0}});o.xaxisHeight=30,o.manageTouchAndMouse=!1,o.minimumCandleWidth=0,o.chart.panel.subholder.style.cursor="ew-resize";var l=o.chart.panel.yAxis;l.drawCurrentPriceLabel=!1,Object.defineProperty(l,"position",{get:function(){return i.slider.yAxisPosition||i.chart.panel.yAxis.position},set:function(e){i.slider.yAxisPosition=e}});var h=Object.getOwnPropertyDescriptor(t.ChartEngine.YAxis.prototype,"width"),c=h.get,u=h.set;Object.defineProperty(l,"width",{get:function(){return Math.max(c.call(l),i.chart.yAxis.width)},set:function(e){u.call(l,e)}}),t.extend(l,e.yAxis),o.chart.baseline.userLevel=!1,o.controls.home&&(o.controls.home.style.width=0),o.initializeChart();var d=o.chart.panel.subholder;this.updateStyles=function(e,t,a){i.setStyle(e,t,a),this.style=i.canvasStyle("stx_range_slider shading")},this.display=function(e){if(i.layout.rangeSlider!==e)return i.layout.rangeSlider=e,void i.changeOccurred("layout");n.style.display=e?"":"none",i.resizeChart(),window.dispatchEvent(new Event("resize")),e&&(o.resizeChart(),o.initializeChart(),o.draw(),this.drawSlider())},this.setSymbol=function(e){o.chart.panel.display=o.chart.symbol=e,o.setMainSeriesRenderer(),o.resizeChart(),this.adjustRange(i.chart),o.draw(),this.drawSlider()},this.acceptLayoutChange=function(e){var a=!1;o.layout.rangeSlider!==e.rangeSlider&&i.slider.display(e.rangeSlider);["chartType","aggregationType","periodicity","interval","timeUnit","chartScale","rangeSlider","flipped","extended","marketSessions","kagi","rangebars","renko","priceLines","pandf"].forEach((function(i){t.equals(o.layout[i],e[i])||(o.layout[i]=e[i],a=!0)})),t.trulyVisible(n)&&a&&(o.setMainSeriesRenderer(),o.draw(),this.drawSlider())},this.adjustRange=function(e){if(e.dataSet&&e.endPoints&&e.endPoints.begin){var t=o.chart;if(t.width){var a=0,r=0;if(i.quoteDriver){var n={symbol:e.symbol,symbolObject:e.symbolObject,interval:i.layout.interval};"month"!=n.interval&&"week"!=n.interval||i.dontRoll||(n.interval="day");var s=i.quoteDriver.getQuoteFeed(n).behavior;s&&s.bufferSize&&(e.moreAvailable&&(a=s.bufferSize),i.isHistoricalMode()&&(r=s.bufferSize))}t.baseline.defaultLevel=e.baseline.actualLevel,t.scroll=Math.max(0,e.dataSet.length-i.tickFromDate(e.endPoints.begin)-a)+1,t.maxTicks=t.scroll-r+1,o.layout.candleWidth=t.width/t.maxTicks}}},this.copyData=function(e){if(e.dataSet){var t=o.chart;t.masterData=o.masterData=e.masterData,t.dataSet=e.dataSet,t.state=e.state,o.draw(),this.drawSlider()}},this.calculateYAxisPosition=function(){var e=o.chart.panel;o.getYAxisCurrentPosition(e.yAxis,e)!=e.yAxis.position&&o.calculateYAxisPositions()},this.drawSlider=function(){if(t.trulyVisible(n)&&i.chart.dataSet&&i.chart.dataSet.length){var e=this.style;e||(e=this.style=i.canvasStyle("stx_range_slider shading"));var a=i.chart.panel,r=o.chart.context,s=o.chart.segmentImage||[],l=o.layout.candleWidth/2,h=o.tickLeft=Math.max(i.tickFromPixel(a.left+l),0),c=o.tickRight=Math.min(i.tickFromPixel(a.right-l),i.chart.dataSet.length-1),u=o.pixelLeft=o.pixelFromTick(h)-(s[h]?s[h].candleWidth/2:l),p=o.pixelRight=o.pixelFromTick(c)+(s[c]?s[c].candleWidth/2:l),m=d.offsetLeft,g=m+d.offsetWidth;r.save(),r.beginPath(),r.fillStyle=e.backgroundColor,r.fillRect(m,d.offsetTop,u-m,d.offsetHeight),r.fillRect(g,d.offsetTop,p-g,d.offsetHeight),r.strokeStyle=e.borderTopColor,r.lineWidth=parseInt(e.borderWidth,10),r.moveTo(u,d.offsetTop),r.lineTo(u,d.offsetTop+d.offsetHeight),r.moveTo(p,d.offsetTop),r.lineTo(p,d.offsetTop+d.offsetHeight),r.stroke(),r.beginPath(),r.lineWidth=parseInt(e.width,10),r.lineCap="round",r.moveTo(u,d.offsetTop+d.offsetHeight/4),r.lineTo(u,d.offsetTop+3*d.offsetHeight/4),r.moveTo(p,d.offsetTop+d.offsetHeight/4),r.lineTo(p,d.offsetTop+3*d.offsetHeight/4),r.stroke(),r.restore()}},i.addEventListener("layout",(function(e){e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("preferences",(function(e){var i=e.stx.preferences.language;t.I18N&&o.preferences.language!=i&&t.I18N.setLocale(o,i),o.preferences.language=i,o.draw()})),i.addEventListener("symbolChange",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol)})),i.addEventListener("symbolImport",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol),e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("theme",(function(e){if(o.clearPixelCache(),o.styles={},o.chart.container.style.backgroundColor="",t.ThemeHelper){var i=new t.ThemeHelper({stx:e.stx});i.params.stx=o,i.update()}})),i.append("createDataSet",(function(){this.slider.adjustRange(this.chart),this.slider.copyData(this.chart)})),i.append("draw",(function(){t.trulyVisible(n)&&o.chart.dataSet&&(this.slider.adjustRange(this.chart),this.slider.calculateYAxisPosition(),o.draw(),this.slider.drawSlider())})),i.prepend("resizeChart",(function(){var e=r.parentElement,i=e.parentElement,a=(parseFloat(getComputedStyle(e).height),parseFloat(getComputedStyle(r).height),t.elementDimensions(i).height),s=i.querySelectorAll(".chartContainer");Array.from(s).forEach((function(e){e!==r&&t.trulyVisible(e)&&(a-=t.elementDimensions(e,{border:1,padding:1,margin:1}).height)})),e.style.height=a+"px",this.layout.rangeSlider?(o.chart.breakpoint!==this.chart.breakpoint&&o.notifyBreakpoint(this.chart.breakpoint),n.style.display="",o.resizeChart(),o.initializeChart(),o.draw(),this.slider.drawSlider()):n.style.display="none"})),["mousedown","touchstart","pointerdown"].forEach((function(e){d.addEventListener(e,(function(e){var a=o.backOutX(e.pageX);if(a||0===a){a-=e.target.offsetLeft,o.startDrag=a,o.startPixelLeft=o.pixelLeft,o.startPixelRight=o.pixelRight;var r=i.slider.style;r||(r=i.slider.style=i.canvasStyle("stx_range_slider shading"));var n=parseInt(r.borderLeftWidth,10);(a+=this.offsetLeft)<o.pixelRight-n&&(o.needsLeft=!0),a>o.pixelLeft+n&&(o.needsRight=!0),t.touchDevice||o.needsLeft&&o.needsRight&&e.target.classList.add("stx-drag-chart")}}),{passive:!1})})),["mouseup","mouseover","touchend","pointerup"].forEach((function(e){d.addEventListener(e,(function(e){var t=e.which,i=e.type;1===t&&"pointerup"!==i&&"mouseup"!==i||(e.target.classList.remove("stx-drag-chart"),o.chart.panel.subholder.style.cursor="ew-resize",o.startDrag=null,o.needsLeft=!1,o.needsRight=!1)}))})),["mousemove","touchmove","pointermove"].forEach((function(e){d.addEventListener(e,(function(e){var t=o.startDrag;if(t||0===t){var a=e.touches,r=(a&&a.length?o.backOutX(a[0].pageX):o.backOutX(e.pageX))-e.target.offsetLeft;if(r||0===r){r-=t;var n=o.tickLeft,s=o.tickRight,l=o.startPixelLeft,h=o.startPixelRight,c=o.needsLeft,u=o.needsRight;if(c)l+r<o.chart.left&&(r=o.chart.left-l),u&&h+r>=o.chart.right&&(r=o.chart.right-h,o.isHome()||(r+=o.layout.candleWidth/2)),n=o.tickFromPixel(l+r),u&&(s=n+o.tickRight-o.tickLeft);else{if(!u)return;s=Math.min(o.tickFromPixel(h+r),i.chart.dataSet.length-1)}var d=i.chart.width/(s-n+1);s>=n&&d>=i.minimumCandleWidth&&(o.tickLeft=n,o.tickRight=s,i.chart.scroll=i.chart.dataSet.length-n,c&&u||i.setCandleWidth(d),i.micropixels=0,i.draw())}}}),{passive:!1})})),this.adjustRange(i.chart),this.copyData(i.chart)}},We=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Shortcuts=t.Shortcuts||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stx,i=e.width,a=void 0===i?580:i,r=e.windowForEachChart,n=void 0===r||r,s=e.config;t?(this.stx=t,this.width=a,this.windowForEachChart=n,this.content=this.getShortcutContent(s),this.enclosingContainer=t.container.querySelector(".stx-subholder"),this.ensureMessagingAvailable(t),this.enableUI(t),this.cssRequired=!0,t.shortcuts=this):console.warn("The Shortcuts addon requires an stx parameter")},t.Shortcuts.prototype.enableUI=function(e){var i=this;e&&t.UI&&setTimeout((function(){e.uiContext.getAdvertised("Layout").showShortcuts=function(e,t){return i.toggle(t)}}))},t.Shortcuts.prototype.ensureMessagingAvailable=function(e){setTimeout((function(){var t=e.uiContext.topNode;t.querySelector("cq-floating-window")||t.append(document.createElement("cq-floating-window"))}))},t.Shortcuts.prototype.getShortcutContent=function(e){var t=(e.drawingTools||[]).filter((function(e){return e.shortcut})).map((function(e){var t=e.label,i=e.shortcut;return'<div class="ciq-shortcut">\n\t\t\t\t\t<div>'.concat(t,"</div>\n\t\t\t\t\t<div><span>Alt</span> + <span>").concat(i.toUpperCase(),"</span></div>\n\t\t\t\t</div>")})).join(""),i=function(e){return" + "===e?"<span>+</span>":e.split("+").map((function(e){return e&&" "!==e?"<span>"+e+"</span>":""})).join(" + ")},a=this.stx.container.closest("cq-context"),r=(e.hotkeyConfig&&e.hotkeyConfig.hotkeys||[]).map((function(e){var t,r=e.label,n=e.action,s=e.commands,o=e.extension;return o&&(t=o,!a.hasAttribute(t.toLowerCase()+"-active"))?"":'<div class="ciq-shortcut"><div>'.concat(r||n,"</div><div>").concat(function(e){return e.map((function(e){return e.replace(/Arrow|Key|Digit|^ | $/g,"")})).map((function(e){return e.replace(/\+/," + ")})).reduce((function(e,t){return!e.includes(t)&&(i=t).charCodeAt(i.length-1)<127?e.concat(t):e;var i}),[]).map(i).join("<br>")}(s),"</div></div>")})).join("");return'\n\t\t<div class="ciq-shortcut-container">\n\t\t\t<div>\n\t\t\t\t<div><b>Drawing tools shortcuts</b></div>\n\t\t\t\t<div>'.concat(t,"</div>\n\t\t\t</div>\n\t\t\t<hr>\n\t\t\t<div>\n\t\t\t\t<div><b>Hotkeys</b></div>\n\t\t\t\t<div>").concat(r,"</div>\n\t\t\t</div>\n\t\t</div>\n\t")},t.Shortcuts.prototype.toggle=function(e){var t=this;this.stx.dispatch("floatingWindow",{type:"shortcut",title:"Shortcuts",content:this.content,container:this.enclosingContainer,onClose:function(){return t.closed=!0},width:this.width,status:e,tag:this.windowForEachChart?void 0:"shortcut"})}},Re=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;function i(){}t.TableView=t.TableView||function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.stx,n=a.minColumnWidth,s=void 0===n?"84px":n,o=a.coverUIMaxWidth,l=void 0===o?400:o,h=a.coverContainer,c=a.usePreviousCloseForChange,u=void 0===c||c;r?(this.stx=r,this.viewAdditionalColumns=!1,this.minColumnWidth=s,this.coverUIMaxWidth=l,this.coverContainer=h,this.usePreviousCloseForChange=u,this.builder=i,this.listeners=[],r.tableView=this,this.cssRequired=!0,t.UI&&t.UI.observeProperty("uiContext",r,(function(i){var a=i.value;a&&setTimeout((function(){e.subscribeToChanges(a);var i=t.getFromNS(a.config,"hotkeyConfig.hotkeys",[]).find((function(e){return"tableView"===e.action}));i&&(i.action=function(){var e=document.body.keystrokeHub.context.stx.tableView;if(e)return e.toggle(),!0})}))}))):console.warn("The TableView addon requires an stx parameter")},t.TableView.prototype.open=function(e){var i=this;e&&(this.params=e);var a=this.params||{},r=a.config,n=void 0===r?{}:r,s=a.onClose;if(this.view&&this.close(!1),n.minColumnWidth=this.minColumnWidth,n.coverUIMaxWidth=this.coverUIMaxWidth,n.coverContainer=this.coverContainer,this.onClose=s,this.view=this.builder.createTable(this.stx,n),this.view){t.I18N&&t.I18N.translateUI(null,this.view);var o=this.stx,l=this.close.bind(this);setTimeout((function(){return i.removeCloseListener=function(e){var i=o.uiContext.topNode,a=function(e){var t=e.target;return!t.closest(".ciq-data-table-container")&&l()};i.addEventListener("click",a);var r=function(e){if("Escape"===e.code){var t=document.body.keystrokeHub.context.stx.tableView;t&&(t.close(),e.preventDefault())}};document.body.addEventListener("keydown",r);var n=t.getFn("UI.getUIManager")();n&&(e.view.show=e.view.hide=function(){},n.openMenu(e.view,{}));return function(){i.removeEventListener("click",a),document.body.removeEventListener("keydown",r),n&&n.closeMenu(e.view)}}(i)}));var h=t.getFromNS(o,"uiContext.config.scrollbarStyling");h&&(h.refresh(this.view.querySelector("tbody")),h.refresh(this.view.querySelector(".ciq-data-table-wrapper"),{suppressScrollY:!0}))}},t.TableView.prototype.close=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.view&&(this.view.remove(),this.view=null),e&&this.onClose&&this.onClose(),this.removeCloseListener&&(this.removeCloseListener(),this.removeCloseListener=null)},t.TableView.prototype.toggle=function(){this[this.view?"close":"open"]()},t.TableView.prototype.subscribeToChanges=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channels.tableView",a=t.UI.BaseComponent.prototype,r=a.channelSubscribe,n=a.channelWrite,s=e.config||{},o=s.channels,l=(o=void 0===o?{}:o).tableView,h=void 0===l?i:l,c=this.stx;r(h,(function(e){e?c.tableView.open({onClose:function(){n(h,!1,c)}}):c.tableView.close()}),c)},i.colHeaders={date:{label:"Date"},open:{label:"Open"},high:{label:"High"},low:{label:"Low"},close:{label:"Close"},pctChange:{label:"% Change",cls:"ciq-extra"},pctChangeVsAvg:{label:"% Change vs Average",cls:"ciq-extra"},volume:{label:"Volume",cls:"ciq-extra"}},i.percentDecimalPlaces=2,i.createTable=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.chart&&e.chart.dataSegment){var i=e.tableView.builder,a=i.getChartData,r=i.dataToHtml,n=i.dataToCsv,s=i.downloadCsv,o=i.getDateFormatter,l=i.getValueFormatter,h=i.getVolumeFormatter,c=i.getFilenameFormatter,u=i.getSeriesDataNames,d=i.getStudyDataNames,p=i.getChartCover,m=Object.assign({},this.colHeaders);if(e.chart.highLowBars||(delete m.open,delete m.high,delete m.low),!e.tableView.viewAdditionalColumns)for(var g in m)m[g].cls&&delete m[g];var f=Object.values(m).map((function(e){return e.label})),y=u(e);y.forEach((function(e){return m[e]={label:e}}));var v=d(e);v.forEach((function(e){f.includes(e)||(m[e]={label:e})}));var b=y.concat(v),x=t.dateFormatter,C=void 0===x?o(e):x,S=t.valueFormatter,w=void 0===S?l(e):S,k=t.percentFormatter,D=void 0===k?l(e,this.percentDecimalPlaces):k,A=t.volumeFormatter,T=void 0===A?h(e):A,M=t.fileNameFormatter,_=void 0===M?c(e):M,F=t.minColumnWidth,P=void 0===F?"84px":F,L=a(e,{dateFormatter:C,valueFormatter:w,percentFormatter:D,volumeFormatter:T,additionalDataFields:b}),O=p(e,t),E=e.chart,I=E.symbolDisplay,N=E.symbol,$=i.getCoverToolbar({symbol:I||N,viewAdditionalColumns:e.tableView.viewAdditionalColumns,copyFn:j,downloadFn:V,toggleAdditionalColumnsFn:function(){var t=e.tableView;t.viewAdditionalColumns=!t.viewAdditionalColumns,t.open()},closeFn:function(){return e.tableView.close()}});O.appendChild($);var z=r(L,{colHeaders:m,minColumnWidth:P});return O.appendChild(z),O}function j(){var t=document.createElement("textArea");document.body.appendChild(t),t.textContent=n(L,{colHeaders:m}),t.select(),document.execCommand("copy"),t.remove(),e.dispatch("notification","copytoclipboard")}function V(){var e=n(L,{colHeaders:m}),t=_(e);s(e,t)}},i.dataToHtml=function(e,t){var i=t.colHeaders,a=t.minColumnWidth,r=Object.keys(i).length,n="calc((100% - ".concat(10+4*r,"px ) / ").concat(r,")"),s=Object.entries(i).map((function(e,t){var i=$e(e,2)[1].label;return'<th\n\t\t\tscope="col"\n\t\t\tstyle="width: '.concat(n,';"\n\t\t\t>').concat(i.replace("(","  ("),"</th>")})),o=e.map((function(e){var t=Object.keys(i).map((function(t,i){var a=e[t];return 0===i?'<th scope="row"\n\t\t\t\t\t\t\t\tstyle="width: '.concat(n,'"\n\t\t\t\t\t\t\t\t>').concat(a,"</th>"):'<td style="width: '.concat(n,'">').concat(a,"</td>")})).join("");return"<tr>".concat(t,"</tr>")})),l=document.createElement("div");l.classList.add("ciq-data-table-wrapper");var h=a?"calc(".concat(r," * ").concat(a,")"):"";return l.innerHTML='\n\t\t<table class="header-fixed"\t'.concat(h?'style="min-width: '.concat(h,'"'):"",">\n\t\t<thead>").concat(s.join(""),"</thead>\n\t\t<tbody>").concat(o.join(""),"</tbody>\n\t\t</table>"),l},i.dataToCsv=function(e,t){var i=t.colHeaders,a=t.colSeparator,r=void 0===a?"\t":a,n=Object.entries(i).map((function(e){var t=$e(e,2)[1].label;return'"'.concat(t,'"')})).join(r),s=e.map((function(e){return Object.keys(i).map((function(t){return'"'.concat(e[t],'"')})).join(r)}));return"".concat(n,"\n").concat(s.join("\n"))},i.downloadCsv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filename",i=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=window.URL.createObjectURL(i,{type:"text/plain"}),a.download="".concat(t,".csv"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},i.getChartData=function(e,i){var a=i.dateFormatter,r=i.valueFormatter,n=i.percentFormatter,s=i.volumeFormatter,o=i.additionalDataFields,l=e.chart.dataSegment.filter((function(e){return null!==e})),h=e.tableView.usePreviousCloseForChange,c=[],u=0,d=l.reduce((function(e,t){var i=t.Close,a=t.iqPrevClose,r=t.Open,n=h?a:r;return void 0===i||Number.isNaN(i)||void 0===n||Number.isNaN(n)?e:(u++,e+(i-n)/n)}),0)/u;return l.forEach((function(i,l){var u=i.DT,p=i.displayDate,m=i.High,g=i.Low,f=i.Open,y=i.Close,v=i.iqPrevClose,b=i.Volume,x=h?v:f,C=(y-x)/x,S=p||(e.displayZone?t.convertTimeZone(u,e.dataZone,e.displayZone):u),w={DT:u,date:a(S),open:r(f),close:r(y),change:r(y-x),pctChange:n(100*C),pctChangeVsAvg:n(100*(C-d)),high:r(m),low:r(g),volume:s(b)};o.forEach((function(e){var t=i[e];null!=t?("object"===Ne(t)&&(t=t.Close),w[e]=r(t)):w[e]=""})),c.push(w)})),c.sort((function(e,t){return t.DT-e.DT})),c},i.getDateFormatter=function(e){return function(i,a){return i?t.displayableDate(e,e.chart,i,!0):""}},i.getValueFormatter=function(e,t){var i,a=e.chart,r=a.panel,n=a.yAxis,s=e.layout.chartScale;return i=n.originalPriceFormatter&&n.originalPriceFormatter.func?function(i){return n.originalPriceFormatter.func(e,r,i,t)}:n.priceFormatter&&"percent"!=s&&"relative"!=s?function(i){return n.priceFormatter(e,r,i,t)}:function(i){return e.formatYAxisPrice(i,r,t)},function(e){return i(e).replace(/^-*0\.0*$/,"0")}},i.getVolumeFormatter=function(e){return function(t){if(null==t)return"";if(e.internationalizer)return e.internationalizer.priceFormatters[0].format(t);var i=t.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i[0]}},i.getFilenameFormatter=function(e){return function(t){var i,a,r=e.chart.symbolDisplay||e.chart.symbol;if(t){var n=t.split("\n");if(n.length>1){var s=$e(n[1].match(/^"([^"]*)"/)||[],2)[1];i=void 0===s?"":s;var o=$e(n[n.length-1].match(/^"([^"]*)"/)||[],2)[1];a=void 0===o?"":o,i=i.replace(/:/g,".").replace(/\//g,"-"),a=a.replace(/:/g,".").replace(/\//g,"-")}}return"".concat(r).concat(i?" (".concat(i," _ ").concat(a,")"):"")}},i.getChartCover=function(e,t){var i=t.coverUIMaxWidth,a=t.coverContainer,r=a&&document.querySelector(a)||(e.uiContext&&e.container.offsetWidth<i?e.uiContext.topNode:e.container.parentElement.parentElement),n=document.createElement("div");return Object.assign(n.style,{top:0,left:0,right:0,bottom:0}),n.classList.add("ciq-data-table-container"),r.appendChild(n),n},i.getCoverToolbar=function(e){var t=e.symbol,i=e.viewAdditionalColumns,a=e.copyFn,r=e.downloadFn,n=e.toggleAdditionalColumnsFn,s=e.closeFn,o=document.createElement("div");o.classList.add("ciq-data-table-toolbar"),o.innerHTML='\n\t\t<div class="ciq-data-table-title"></div>\n\t\t<button class="ciq-data-table-copy">'.concat(this.copyLabel,'</button>\n\t\t<button class="ciq-data-table-download">').concat(this.downloadLabel,'</button>\n\t\t<button class="ciq-data-table-additionalColumns">').concat(this.getAdditionalColumnLabel(i),"</button>\n\t\t<cq-close />\n\t"),o.querySelector(".ciq-data-table-title").textContent=t;var l=o.querySelector(".ciq-data-table-copy");a?l.addEventListener("click",a):l.style.display="none";var h=o.querySelector(".ciq-data-table-download");r?h.addEventListener("click",(function(){h.blur(),r()})):h.style.display="none";var c=o.querySelector(".ciq-data-table-additionalColumns");return n?c.addEventListener("click",n):c.style.display="none",o.close=s,o},i.copyLabel="Copy",i.downloadLabel="Download",i.getAdditionalColumnLabel=function(e){return"<span>".concat(e?"- ":"+ ","</span>Additional columns")},i.getStudyDataNames=function(e){return Object.values(e.layout.studies||{}).map((function(e){return Object.keys(e.outputMap).filter(t)})).reduce((function(e,t){return e.concat(t)}),[]);function t(t){return e.chart.dataSegment.some((function(e){return e&&e[t]}))}},i.getSeriesDataNames=function(e){return Object.values(e.chart.seriesRenderers||{}).filter((function(e){return"_main_series"!==e.params.name})).map((function(e){return e.seriesParams.map((function(e){return e.symbol}))})).reduce((function(e,t){return e.concat(t)}),[])}},Xe=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Marker?t.Tooltip=t.Tooltip||function(e){if(t.Marker){this.cssRequired=!0;var i=e.stx,a=e.ohl,r=e.change,n=e.volume,s=e.series,o=e.studies,l=e.interpolation,h=e.showOverBarOnly,c=e.showBarHighlight,u=void 0===c||c,d=e.useDataZone,p=i.chart.container,m=p.querySelector("stx-hu-tooltip");m||(m=document.createElement("stx-hu-tooltip"),p.appendChild(m));var g=p.querySelector(".stx-hu-tooltip-highlight");g||((g=document.createElement("div")).classList.add("stx-hu-tooltip-highlight"),p.appendChild(g)),t.Marker.Tooltip=function(e){this.className||(this.className="CIQ.Marker.Tooltip"),this.highlightEl=g,e.label="tooltip",t.Marker.call(this,e)},t.inheritsFrom(t.Marker.Tooltip,t.Marker,!1),t.Marker.Tooltip.sameBar=function(e,t){return!(!e||!t)&&(+e.DT==+t.DT&&(e.Close==t.Close&&(e.Open==t.Open&&e.Volume==t.Volume)))},t.Marker.Tooltip.placementFunction=function(e){if(!f()){for(var i=e.stx,a=0;a<e.arr.length;a++){var r,n,s,o=e.arr[a],l=i.barFromPixel(i.cx),c=i.chart.dataSegment[l],d=!0;if("undefined"!=c&&c&&c.DT&&(r=!0,c.High&&(n=i.pixelFromPrice(c.High)),c.Low&&(s=i.pixelFromPrice(c.Low)),i.chart.highLowBars||c.Close&&(n=i.pixelFromPrice(c.Close)-15,s=i.pixelFromPrice(c.Close)+15),!h||i.cy>=n&&i.cy<=s||(d=!1)),!i.insideChart||i.openDialog||i.activeDrawing||i.grabbingScreen||!r||!d)return g.style.display="none",o.node.style.left="-50000px",o.node.style.right="auto",void(o.lastBar={});if(t.Marker.Tooltip.sameBar(i.chart.dataSegment[l],o.lastBar)&&l!=i.chart.dataSegment.length-1)return;o.lastBar=i.chart.dataSegment[l];var m=o.lastBar.candleWidth||i.layout.candleWidth;parseInt(getComputedStyle(o.node).width,10)+i.chart.panel.left+30+m<i.backOutX(t.ChartEngine.crosshairX)?(o.node.style.left="auto",o.node.style.right=Math.round(p.clientWidth-i.pixelFromBar(l)+30)+"px"):(o.node.style.left=Math.round(i.pixelFromBar(l)+30)+"px",o.node.style.right="auto");var y=parseInt(getComputedStyle(o.node).height,10),v=Math.round(t.ChartEngine.crosshairY-i.top-y/2);if(v+y>i.height&&(v=i.height-y),v<0&&(v=0),o.node.style.top=v+"px",u&&!i.layout.crosshair){var b=o.lastBar.candleWidth||i.layout.candleWidth,x=i.pixelFromBar(l)-b/2,C=b;x+C>i.chart.width&&(C=i.chart.width-x),g.style.display="block",g.style.left=x+"px",g.style.width=C+"px"}else g.style.display="none"}var S=i.overXAxis,w=i.overYAxis;i.overXAxis=i.overYAxis=!1,i.overXAxis=S,i.overYAxis=w}},i.append("deleteHighlighted",(function(){this.huTooltip.lastBar={},this.headsUpHR()})),i.append("headsUpHR",y),i.append("createDataSegment",y),i.huTooltip=new t.Marker.Tooltip({stx:i,xPositioner:"bar",chartContainer:!0,node:m})}else console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");function f(){var e=i.layout.headsUp,t=!!i.huTooltip,a="object"!==Ne(e),r=!1===e,n=e&&("floating"===e||e.floating);if(t&&(!n&&!a||r)){var s=i.huTooltip,o=(s||{}).node;return o&&(o.style.left="-50000px",o.style.right="auto",s.lastBar={},s.highlightEl&&(s.highlightEl.style.display="none")),!0}return!1}function y(){if(!f()){var e=this.barFromPixel(this.cx),h=this.chart.dataSegment[e];if(h){if(!t.Marker.Tooltip.sameBar(h,this.huTooltip.lastBar)||e==this.chart.dataSegment.length-1){var c=this.huTooltip.node;Array.from(c.parentElement.querySelectorAll("[auto]")).forEach((function(e){e.remove()})),Array.from(c.parentElement.querySelectorAll("stx-hu-tooltip-field-value")).forEach((function(e){e.innerHTML=""}));var u=this.chart.panel,p=u.yAxis,m={},g=[];if(g.push({member:"DT",display:"DT",panel:u,yAxis:p}),g.push({member:"Close",display:"Close",panel:u,yAxis:p}),m.DT=m.Close=1,r&&t.ChartEngine.isDailyInterval(this.layout.interval)&&g.push({member:"Change",display:"Change",panel:u,yAxis:p}),a&&(g.push({member:"Open",display:"Open",panel:u,yAxis:p}),g.push({member:"High",display:"High",panel:u,yAxis:p}),g.push({member:"Low",display:"Low",panel:u,yAxis:p}),m.Open=m.High=m.Low=1),n&&(g.push({member:"Volume",display:"Volume",panel:null,yAxis:null}),m.Volume=1),s){var y=this.chart.seriesRenderers;for(var v in y){var b=y[v];if(b!==this.mainSeriesRenderer){u=this.panels[b.params.panel],!(p=b.params.yAxis)&&b.params.shareYAxis&&(p=u.yAxis);for(var x=0;x<b.seriesParams.length;x++){var C=b.seriesParams[x],S=C.symbol,w=C.field;S?w&&S!=w&&(S=t.createObjectChainNames(S,w)[0]):S=w;var k=C.display||C.symbol||C.field;S&&!m[k]&&(g.push({member:S,display:k,panel:u,yAxis:p,isSeries:!0}),m[k]=1)}}}}if(o)for(var D in this.layout.studies){var A=this.layout.studies[D];for(var T in p=(u=this.panels[A.panel])&&A.getYAxis(this),this.layout.studies[D].outputMap)T&&!m[T]&&(g.push({member:T,display:T,panel:u,yAxis:p}),m[T]=1);m[D+"_hist"]||(g.push({member:D+"_hist",display:D+"_hist",panel:u,yAxis:p}),g.push({member:D+"_hist1",display:D+"_hist1",panel:u,yAxis:p}),g.push({member:D+"_hist2",display:D+"_hist2",panel:u,yAxis:p}),m[D+"_hist"]=1)}for(var M=0;M<g.length;M++){var _=g[M],F=_.member,P=_.display,L="DT"==F;!L||d||t.ChartEngine.isDailyInterval(i.layout.interval)||(F="displayDate"),u=_.panel;var O=null;(p=_.yAxis)&&(u&&u===u.chart.panel?(O=Math.max(p.printDecimalPlaces,u.chart.decimalPlaces),(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(O=Math.min(O,p.maxDecimalPlaces))):p.decimalPlaces||0===p.decimalPlaces?O=p.decimalPlaces:(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(O=p.maxDecimalPlaces));var E=null,I=t.existsInObjectChain(h,F);I?E=I.obj[I.member]:"Change"==F&&(E=h.Close-h.iqPrevClose);var N=P.replace(/^(Result )(.*)/,"$2");if(l&&g[M].isSeries&&null==E){var $=this.valueFromInterpolation(e,N,"Close",u,p);if(null===$)break;E=$}if(!E&&0!==E||!L&&"object"===Ne(E)&&!E.Close&&0!==E.Close){var z=c.querySelector('stx-hu-tooltip-field[field="'+N+'"]');if(z)""!==z.querySelector("stx-hu-tooltip-field-name").innerHTML&&(z.querySelector("stx-hu-tooltip-field-value").innerHTML="n/a")}else{var j="";(E.Close||0===E.Close)&&(E=E.Close),E.constructor==Number?j=p?p.originalPriceFormatter&&p.originalPriceFormatter.func?p.originalPriceFormatter.func(this,u,E,O):p.priceFormatter&&p.priceFormatter!=t.Comparison.priceFormat?p.priceFormatter(this,u,E,O):this.formatYAxisPrice(E,u,O,p):E:E.constructor==Date?L&&this.controls.floatDate&&this.controls.floatDate.innerHTML?j=this.chart.xAxis.noDraw?"N/A":t.displayableDate(this,u.chart,E):(j=t.yyyymmdd(E),t.ChartEngine.isDailyInterval(this.layout.interval)||(j+=" "+E.toTimeString().substr(0,8))):j=E;var V=c.querySelector('stx-hu-tooltip-field[field="'+N+'"]');if(V){V.querySelector("stx-hu-tooltip-field-value").innerHTML=j;var H=V.querySelector("stx-hu-tooltip-field-name");""===H.innerHTML&&(H.innerHTML=this.translateIf(N))}else{var B=document.createElement("stx-hu-tooltip-field");B.setAttribute("auto",!0);var W=document.createElement("stx-hu-tooltip-field-name");W.innerHTML=this.translateIf(N),B.appendChild(W);var R=document.createElement("stx-hu-tooltip-field-value");R.innerHTML=j,B.appendChild(R),c.appendChild(B)}}}this.huTooltip.render()}}else this.positionMarkers()}}}:console.error("tooltip addon requires first activating markers feature.")},Ue=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Animation=t.Animation||function(e){if(!e)throw new Error("Invalid constructor arguments.");var i,a,r;if(e instanceof t.ChartEngine?(i=arguments[0],a=arguments[1],r=arguments[2]):(i=e.stx,a=e.animationParameters,r=e.easeMachine),!i)return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");var n={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};a=t.extend(n,a),n.tension&&(i.chart.tension=a.tension),i.tickAnimator=r||new t.EaseMachine(Math.easeOutCubic,1e3);var s=new t.EaseMachine(Math.easeInOutCubic,1e3),o=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],l=0,h=20,c=0,u=!1,d=null;function p(){u=!1,d=null}i.addEventListener(["symbolChange","layout"],(function(e){p()})),i.prepend("updateCurrentMarketData",(function(e,t,i,a){t||(t=this.chart),a&&a.fromTrade&&(t.closePendingAnimation||0===t.closePendingAnimation)&&(a.finalClose=t.closePendingAnimation)})),i.prepend("updateChartData",(function(e,i,r){var n=this;if(i||(i=n.chart),i&&i.defaultChartStyleConfig&&"none"!=i.defaultChartStyleConfig&&(void 0===r||!r.animationEntry&&!r.secondarySeries)&&i.dataSegment){var s=n.tickAnimator,o=this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation;if(o){if(!s)return void console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");if(this.prevSymbol!=i.symbol&&(this.prevQuote=0,i.closePendingAnimation=null,this.prevSymbol=i.symbol),T(),s.stop(),e.length>2)return}var l=t.clone(r);l||(l={}),l.animationEntry=!0,l.bypassGovernor=!0,l.noCreateDataSet=!1,l.appending=!0,l.firstLoop=!0;var h=this.chart.symbol,c=this.layout.periodicity,p=this.layout.interval,m=this.layout.timeUnit;if(o){var g=e[e.length-1];this.prevQuote=this.currentQuote();var f=!1,y=!1;if(1==c&&2==e.length){this.prevQuote=e[0];var v=i.dataSet.length;A(this.prevQuote),v==i.dataSet.length&&(y=!0)}if(!(g&&g.Close&&this.prevQuote&&this.prevQuote.Close))return!1;if(this.extendedHours&&i.market.market_def){var b=g.DT;if(t.ChartEngine.isDailyInterval(p))u=!i.market.isMarketDate(b);else if(!d||d<=b){var x=i.market.getSession(b);u=!(""===x||this.layout.marketSessions&&this.layout.marketSessions[x]),d=i.market[u?"getNextOpen":"getNextClose"](b)}if(u)return this.draw(),!1}var C=c;"second"==p||"second"==m?C*=1e3:"minute"!=p&&"minute"!=m||(C*=6e4),isNaN(p)||(C*=p),f="day"==p||"day"==m?g.DT.getDate()!=this.prevQuote.DT.getDate():"week"==p||"week"==m?g.DT.getDate()>=this.prevQuote.DT.getDate()+7:"month"==p||"month"==m?g.DT.getMonth()!=this.prevQuote.DT.getMonth():g.DT.getTime()>=this.prevQuote.DT.getTime()+C;var S=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,w=0;if(f){if(!this.animations.zoom.hasCompleted)return!1;var k=this.layout.candleWidth;if(i.scroll<=i.maxTicks)for(;this.micropixels>0;)i.scroll++,this.micropixels-=k;i.scroll<=i.maxTicks?(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+k,w=-1*k,i.dataSegment.length<i.maxTicks-a.ticksFromEdgeOfScreen&&!a.stayPut&&(this.nextMicroPixels=this.micropixels,i.scroll++),i.animatingHorizontalScroll=S,i.previousDataSetLength=i.dataSet.length):y||i.scroll++}i.closePendingAnimation=g.Close;var D=f&&!S?g.Open:this.prevQuote.Close;return s.run(function(e,r,o){return function(u){var d=u.Close;if(!i.dataSet.length||h!=i.symbol||c!=n.layout.periodicity||p!=n.layout.interval||m!=n.layout.timeUnit)return s.stop(),void T();var g=t.clone(e);g.Adj_Close=null,g.Close=Math.round(d*a.granularity)/a.granularity,o?(g.Open||0===g.Open||(g.Open=g.Close),g.High||0===g.High||(g.High=Math.max(g.Open,g.Close)),g.Low||0===g.Low||(g.Low=Math.min(g.Open,g.Close))):(e.Close>r.High&&(g.High=g.Close),e.Close<r.Low&&(g.Low=g.Close)),i.animatingHorizontalScroll&&(n.micropixels=u.micropixels,i.lastTickOffset=u.lineOffset),l.updateDataSegmentInPlace=!s.hasCompleted;var f=[g];o&&"tick"!==n.layout.interval&&f.unshift(r),n.updateChartData(f,i,l),l.firstLoop=!1,s.hasCompleted&&T()}}(g,t.clone(this.prevQuote),f),{Close:D,micropixels:this.nextMicroPixels,lineOffset:w},{Close:g.Close,micropixels:this.micropixels,lineOffset:0}),!0}}function A(e){if(i.masterData)for(var t=i.masterData.length-1;t>=0;t--){var a=i.masterData[t];if(a.Close||0===a.Close)return a.Close=e.Close,e.LastSize&&(a.LastSize=e.LastSize),e.LastTime&&(a.LastTime=e.LastTime),n.updateCurrentMarketData({Close:a.Close,DT:a.DT,LastSize:a.LastSize,LastTime:a.LastTime}),void n.createDataSet(null,null,{appending:!0})}}function T(){if(i.animatingHorizontalScroll&&(i.animatingHorizontalScroll=!1,n.micropixels=n.nextMicroPixels=n.previousMicroPixels,i.lastTickOffset=0),null!==i.closePendingAnimation){var e=i.closePendingAnimation;i.closePendingAnimation=null,A({Close:e})}}})),i.prepend("renderYAxis",(function(e){if(!this.grabbingScreen&&this.isHome()&&(this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation)){var i=e.panel.yAxis;if(!t.Comparison||i.priceFormatter!=t.Comparison.priceFormat)if(e.prevLowValue||0===e.prevLowValue||(e.prevLowValue=e.animatedLow=e.lowValue),e.prevHighValue||0===e.prevHighValue||(e.prevHighValue=e.animatedHigh=e.highValue),s.running||(e.animatingVerticalScroll=!1),e.prevLowValue>=e.lowValue&&e.prevHighValue<=e.highValue)e.animatingVerticalScroll&&(i.highValue=e.animatedHigh,i.lowValue=e.animatedLow);else if(s.running&&s.stop(),e.lowValue||e.highValue){var a,r=e.prevLowValue,n=e.prevHighValue;e.prevLowValue=e.lowValue,e.prevHighValue=e.highValue,e.animatingVerticalScroll=!0,s.run((a=this,function(t){e.animatedLow=t.low,e.animatedHigh=t.high,a.draw()}),{low:r,high:n},{low:e.lowValue,high:e.highValue}),i.lowValue=e.animatedLow,i.highValue=e.animatedHigh}}})),i.append("draw",(function(){if(!u&&this.chart.dataSet&&this.chart.dataSet.length&&this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation){c%h==0&&(l++,c=0),c++;var e=this.chart.context,t=this.chart.panel,i=this.currentQuote();if(!i)return;var a=i.Close,r=this.pixelFromTick(i.tick,this.chart);this.chart.lastTickOffset&&(r+=this.chart.lastTickOffset);var n=this.pixelFromPrice(a,t);this.chart.yAxis.left>r&&this.chart.yAxis.top<=n&&this.chart.yAxis.bottom>=n&&(l>=o.length&&(l=0),e.beginPath(),e.moveTo(r,n),e.arc(r,n,2+1.07*l,0,2*Math.PI,!1),e.fillStyle=o[l],e.fill())}}))}},Ye=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ContinuousZoom=t.ContinuousZoom||function(e){this.cssRequired=!0,this.update(e),this.stx.continuousZoom=this,this.addSmartZoomButton=function(){var e,t=this.stx.registerChartControl&&this.stx.registerChartControl("stx-smart-zoom","SmartZoom (Alt + 0)",(e=this,function(t){e.smartZoomToggle(t),t.stopPropagation()}));t&&(this.stx.addEventListener("layout",(function(e){!0===e.stx.layout.smartzoom?t.classList.add("active"):t.classList.remove("active")})),this.stx.addEventListener("symbolImport",(function(e){!1===e.stx.layout.smartzoom&&t.classList.remove("active")})))},this.smartZoomToggle=function(e){this.smartZoomEnable(!this.stx.layout.smartzoom)},this.smartZoomEnable=function(e){this.stx.layout.smartzoom=e,this.stx.changeOccurred("layout")},this.addSmartZoomButton(),this.smartZoomEnable(!0)},t.ContinuousZoom.prototype.update=function(e){e||(e={}),this.stx=e.stx,this.periodicities=e.periodicities,this.boundaries=e.boundaries},t.ContinuousZoom.prototype.execute=function(e){function t(e){var t=e.period||e.periodicity,i=e.interval,a=e.timeUnit||"minute";switch(isNaN(i)&&(a=i,i=1),a){case"month":i*=4.35;case"week":i*=7;case"day":i*=1440;case"minute":i*=60;case"second":break;case"millisecond":i/=1e3;break;default:return null}return t*i}if(this.stx&&this.stx.layout.smartzoom){var i=this.periodicities,a=this.boundaries,r=this.stx,n=r.layout,s=r.chart;if(i&&a&&(!e&&a.maxCandleWidth&&n.candleWidth>a.maxCandleWidth||e&&a.minCandleWidth&&n.candleWidth<a.minCandleWidth||!e&&a.minTicks&&s.maxTicks<a.minTicks||e&&a.maxTicks&&s.maxTicks>a.maxTicks)){for(var o={value:e?Number.MAX_VALUE:0},l=t(n),h=0;h<i.length;h++){var c=t(i[h]);(c>l&&c<o.value&&e||c<l&&c>o.value&&!e)&&(o={value:c,periodicity:i[h]})}var u=o.periodicity;u&&r.setRange({dtLeft:s.xaxis[0].DT,dtRight:s.xaxis[s.xaxis.length-1].DT,dontSaveRangeToLayout:!0,periodicity:u})}}}},Qe=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Outliers=t.Outliers||function(e){if(e||(e={}),e.stx){Array.isArray(e.altColors)||(e.altColors=["#323390","#66308f","#0073ba","#f4932f","#0056a4","#00a99c","#00a553","#ea1d2c","#e9088c","#fff126","#912a8e","#ee652e","#00afed","#8ec648"]),this.stx=e.stx,this.stx.outliers=this,this.cssRequired=!0,this.multiplier=e.multiplier||3,this.altColors=e.altColors,this.axisData={},this.stx.addEventListener("layout",(function(e){Object.keys(e.stx.outliers.axisData).forEach(function(e){this.removeAllMarkers(this.axisData[e]),delete this.axisData[e]}.bind(e.stx.outliers))})),this.processDataSet=function(e,t,i){if(!e.length||e.length<=1)return!1;var a=[0,0];if(!this.axisData[i.name]){var r="",n=-1;Object.keys(this.axisData).forEach(function(e){this.axisData[e].panel.name==t.name&&n++}.bind(this)),n>-1&&n<this.altColors.length&&(r=this.altColors[n]),this.axisData[i.name]={axis:i,panel:t,displayState:"none",isFlipped:!1,originalZoom:i.zoom,markerColor:r,markers:{},axisMarkers:{}}}var s=this.axisData[i.name];return Object.assign(s,this.find(e)),this.refreshMarkerArray(s),this.refreshMarkers(s),"low"!==s.displayState&&"all"!==s.displayState||null===s.outlierMin?a[0]=s.trendMin:a[0]=s.outlierMin,"high"!==s.displayState&&"all"!==s.displayState||null===s.outlierMax?a[1]=s.trendMax:a[1]=s.outlierMax,a},this.find=function(e){if(e.length&&!(e.length<=0)){var t,i,a=function(e,t){return{quote:e.quote,DT:e.quote.DT,value:e.value,position:t}},r=null,n=null,s=null,o=null,l=[],h=e.slice();h.sort((function(e,t){return e.value-t.value}));var c=h.length,u=h[Math.floor(c/4)].value,d=h[Math.floor(c*(3/4))].value,p=d-u;t=u-p*this.multiplier,i=d+p*this.multiplier;for(var m=0;m<c;m++){var g=h[m],f=h[c-(m+1)];if(g.value<=t&&l.push(a(g,"low")),f.value>=i&&l.push(a(f,"high")),null===s&&g.value<=t&&(s=g.value),null===o&&f.value>=i&&(o=f.value),null===r&&g.value>t&&(r=g.value),null===n&&f.value<i&&(n=f.value),null!==r&&null!==n)break}return{minValue:t,maxValue:i,trendMin:r,trendMax:n,outlierMin:s,outlierMax:o,activeOutliers:l}}},this.refreshMarkerArray=function(e){this.deprecateMarkers(e);var t=e.markers;e.activeOutliers.forEach(function(i){var a=i.DT.getTime().toString();t[a]||(t[a]={isFresh:!0,type:"quote",value:i.value,marker:this.markOutlier(i,i.position,e)}),t[a].isFresh=!0}.bind(this)),null!==e.outlierMax&&(t.axisHigh||(t.axisHigh={isFresh:!0,type:"axis",value:e.outlierMax,marker:this.markAxis("high",e)}),t.axisHigh.isFresh=!0),null!==e.outlierMin&&(t.axisLow||(t.axisLow={isFresh:!0,type:"axis",value:e.outlierMin,marker:this.markAxis("low",e)}),t.axisLow.isFresh=!0)},this.setDisplayState=function(e,t){"high"!=e&&"low"!=e&&"all"!=e&&(e="none");var i=e;"all"==t.displayState&&"high"==e?i="low":"all"==t.displayState&&"low"==e?i="high":"high"==t.displayState&&"low"==e||"low"==t.displayState&&"high"==e?i="all":t.displayState==e&&(i="none"),t.displayState=i,t.axis.zoom=t.originalZoom,this.refreshMarkers(t),this.stx.draw()},this.deprecateMarkers=function(e){Object.keys(e.markers).forEach(function(e){var t;(t=this.markers[e]).marker&&!t.isFresh?(t.marker.remove&&t.marker.remove(),t.marker=null):t.isFresh=!1,this.markers[e].marker||delete this.markers[e]}.bind(e))},this.removeAllMarkers=function(e){Object.keys(e.markers).forEach((function(t){var i=e.markers[t].marker;i&&(i.remove&&i.remove(),i=null),i||delete e.markers[t]}))},this.updateMarkerVisibility=function(){Object.keys(this.markers).forEach(function(e){"all"==this.displayState||this.markers[e].marker.node.classList.contains(this.displayState)?this.markers[e].marker.node.style.display="none":this.markers[e].marker.node.style.display="block"}.bind(this))},this.refreshAxisMarkers=function(e,t){var i=!1;e.classList.contains("high")&&(i=!0);var a=t.axis.top;(!t.isFlipped&&!i||t.isFlipped&&i)&&(a=t.axis.bottom-50),e.classList.contains("nano")&&(a=t.axis.top+t.axis.height/2-22);var r=Math.floor(t.axis.left).toString()+"px",n=Math.floor(a).toString()+"px",s=i?t.outlierMax:t.outlierMin;e.style.transform="translate("+r+", "+n+")",e.querySelector(".outlier-value").innerText=this.stx.formatYAxisPrice(s),"0px"===r?e.classList.add("right"):e.classList.remove("right")},this.refreshMarkers=function(e){Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,r=e.markers[t].type;a>e.trendMax&&e.axis.high>=a||a<e.trendMin&&e.axis.low<=a?"quote"==r?i.node.style.display="none":"axis"==r&&i.node.classList.add("compress"):"quote"==r?i.node.style.display="block":"axis"==r&&i.node.classList.remove("compress"),"axis"==r&&this.refreshAxisMarkers(i.node,e),e.axis.height<100?i.node.classList.add("nano"):i.node.classList.remove("nano"),e.axis.height<250?i.node.classList.add("micro"):i.node.classList.remove("micro")}.bind(this,e)),e.isFlipped!==e.axis.flipped&&this.flipMarkers(e)},this.markAxis=function(e,i){var a=document.createElement("div");a.classList.add("outlier-sticker","axis","mini",e),a.innerHTML='<div class="expansion"><div class="pill"><div class="icon"></div></div><div class="tick"></div><span class="outlier-value"></div><div class="compression"><div class="pill"><div class="icon"></div></div></div></span>',this.matchYAxisStyle(a),this.setMarkerColor(a,i.markerColor);var r=this.handleMarkerClick.bind(this,e,i,a);return a.addEventListener("click",r),a.addEventListener("touchend",r),new t.Marker({stx:this.stx,xPositioner:"none",yPositioner:"none",label:"expand",permanent:!0,chartContainer:!0,node:a})},this.markOutlier=function(e,i,a){if(e){a||(a={panel:this.stx.panels.chart}),i=i||"high";var r=document.createElement("div");r.classList.add("outlier-sticker","quote","mini",i),r.innerHTML='<div class="pill"><div class="icon"></div></div><span class="outlier-value">'+this.stx.formatYAxisPrice(e.value,a.panel)+"</span>",this.matchYAxisStyle(r),this.setMarkerColor(r,a.markerColor);var n=this.handleMarkerClick.bind(this,i,a,r);return r.addEventListener("click",n),r.addEventListener("touchend",n),new t.Marker({stx:this.stx,xPositioner:"date",yPositioner:"high"==i?"top":"bottom",x:e.quote.DT,panelName:a.panel.name,node:r})}},this.handleMarkerClick=function(e,t,i){i.classList.contains("nano")&&(e="all"),this.setDisplayState(e,t),this.stx.draw()},this.matchYAxisStyle=function(e){if(this.stx.styles.stx_yaxis){var t=this.stx.styles.stx_yaxis;e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.color=t.color,e.style.borderColor=t.color}},this.setMarkerColor=function(e,t){if(""!=t)for(var i=e.querySelectorAll(".pill"),a=0;a<i.length;a++)i[a].style.backgroundColor=t},this.flipMarkers=function(e){e.isFlipped=e.axis.flipped,Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,r=e.markers[t].type;e.isFlipped?i.node.classList.add("flipped"):i.node.classList.remove("flipped"),"quote"==r&&(a>e.trendMax?e.isFlipped?i.params.yPositioner="bottom":i.params.yPositioner="top":a<e.trendMin&&(e.isFlipped?i.params.yPositioner="top":i.params.yPositioner="bottom"))}.bind(this,e))};var i=t.ChartEngine.prototype.determineMinMax.bind(this.stx);t.ChartEngine.prototype.determineMinMax=function(e,t,a,r,n,s,o,l,h){return h||(h=[]),o&&l&&this.layout.outliers&&h.push(this.outliers.processDataSet.bind(this.outliers)),i(e,t,a,r,n,s,o,l,h)}}else console.warn("The Outliers addon requires an stx parameter")}},qe=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.PlotComplementer=t.PlotComplementer||function(e){var i=e.stx,a=t.uniqueID();e.decorator||(e.decorator={});var r=e.decorator.symbol||"_"+a,n=e.decorator.display||" (addl)";i.plotComplementers||(i.plotComplementers=[]),i.plotComplementers.push(this),this.id=e.id||a,this.defaultRenderingParameters={chartType:"line",width:1,opacity:.5},e.renderingParameters&&(this.defaultRenderingParameters=e.renderingParameters);var s=this;function o(i,a,o,l){if("err"!=function(t){if(t.quoteDriver&&e.quoteFeed){for(var i=0;i<t.quoteDriver.quoteFeeds.length;i++)if(t.quoteDriver.quoteFeeds[i].engine==e.quoteFeed)return;return"err"}}(i)&&(l||(l=a),!i.isEquationChart(a)&&(o||(o={}),!o.isComparison&&l&&-1==l.indexOf(r)))){var h=l+r,c=a+r,u=i.getRendererFromSeries(l),d=t.extend({display:a+n,name:h,symbol:c,symbolObject:{symbol:c,generator:s.id,masterSymbol:a},overChart:!1,gapDisplayStyle:!0,permanent:!0,panel:o.panel,yAxis:o.yAxis,shareYAxis:!0,loadData:!!s.quoteFeed,dependentOf:u?u.params.name:i.mainSeriesRenderer.params.name},s.renderingParameters);d.color||(d.color=o.color||"auto"),i.addSeries(h,d,(function(e,t){e&&i.removeSeries(h,i.chart),i.chart.seriesRenderers[h]&&(i.chart.seriesRenderers[h].params.display=d.display)}))}}function l(e,t,i){t&&-1==t.indexOf(r)&&e.removeSeries(t+r,i)}function h(e){"master"==e.action?(e.prevSymbol||(e.prevSymbol=e.symbol),l(e.stx,e.prevSymbol,e.stx.chart),o(e.stx,e.symbol)):"add-series"==e.action?(l(e.stx,e.id,e.stx.chart),o(e.stx,e.symbol,e.parameters,e.id)):"remove-series"==e.action&&l(e.stx,e.id,e.stx.chart)}i.addEventListener("symbolChange",h),i.addEventListener("symbolImport",h),this.resetRenderingParameters=function(){this.renderingParameters=this.defaultRenderingParameters},this.setQuoteFeed=function(e){if(e.quoteFeed&&e.behavior){var a=t.clone(e.behavior);a.generator=this.id;var r=e.filter;i.attachQuoteFeed(e.quoteFeed,a,(function(e){return!(r&&!r(e))&&e.symbolObject.generator==a.generator})),this.quoteFeed=e.quoteFeed}},this.setQuoteFeed(e),this.resetRenderingParameters()}},Ze={CIQ:Se.c};"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||Ze.CIQ.activateImports(je,Ve,He,Be,We,Re,Xe,Ue,Ye,Qe,qe,null)},376:function(e,t,i){"use strict";(function(e){function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R;function X(){}i.d(t,"c",(function(){return U})),i.d(t,"d",(function(){return Y})),i.d(t,"e",(function(){return Q})),i.d(t,"a",(function(){return q})),i.d(t,"b",(function(){return Z})),function(){var e,t=["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"];if(e=new Date("2023/04/01").getTime()){var i=(new Date).getTime();if(e<=i)console.error("This license has expired!");else;}if("undefined"!=typeof document&&t&&t.length>0){for(var a=document.location.href,r=!1,n=0;n<t.length;n++)if(a.indexOf(t[n])>-1){r=!0;break}r||(alert("ERROR: Not licensed for domain "+a),console.error("ERROR: Not licensed for domain "+a))}}(),X[50848]=function(){for(var e=2;9!==e;)switch(e){case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 9:delete t.Si2mO,delete Object.prototype.Yf8DO,i=6;break;case 3:throw"";case 4:i="undefined"==typeof Si2mO?3:9;break;case 5:t.Si2mO=t,i=4;break;case 2:Object.defineProperty(Object.prototype,"Yf8DO",{get:function(){for(;;)return this},configurable:!0}),t=Yf8DO,i=5}}catch(e){t=window}return t;case 2:e="object"===("undefined"==typeof globalThis?"undefined":s(globalThis))?1:5}}(),function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}for(var a=2;124!==a;)switch(a){case 132:r(i,"replace",n[93],n[85]),a=131;break;case 105:r(i,"charCodeAt",n[93],n[29]),a=135;break;case 100:n[56]+=n[91],n[56]+=n[79],n[86]=n[18],n[86]+=n[40],a=96;break;case 116:n[92]+=n[4],n[36]=n[6],n[36]+=n[8],n[36]+=n[90],a=112;break;case 54:n[64]="",n[81]="1Ob",n[98]="k",n[52]="U",n[18]="_",n[64]="mize",a=48;break;case 131:r(t,"map",n[93],n[43]),a=130;break;case 59:n[62]="A2V",n[53]="T",n[57]="__",n[24]="",a=55;break;case 125:r(c,"apply",n[93],n[38]),a=124;break;case 33:n[59]="O",n[16]="",n[16]="1y",n[79]="",a=29;break;case 112:n[69]=n[5],n[69]+=n[3],n[69]+=n[1],n[29]=n[48],a=108;break;case 129:r(l,"test",n[93],n[33]),a=128;break;case 104:n[33]=n[24],n[33]+=n[15],n[33]+=n[96],n[56]=n[25],a=100;break;case 48:n[46]="7",n[47]="E",n[49]="__resid",n[17]="",n[15]="cVk",a=64;break;case 90:n[68]+=n[62],n[42]=n[57],n[42]+=n[17],n[42]+=n[64],n[45]=n[52],n[45]+=n[54],n[45]+=n[47],a=83;break;case 29:n[61]="k1S",n[79]="9D",n[25]="",n[91]="N",a=42;break;case 106:var r=function(e,t,i,a){for(var r=2;5!==r;)switch(r){case 2:var s=[arguments];h(n[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),r=5}};a=105;break;case 133:r(i,"substring",n[93],n[92]),a=132;break;case 83:n[71]=n[63],n[71]+=n[46],n[71]+=n[81],n[66]=n[49],n[66]+=n[28],n[66]+=n[72],a=104;break;case 128:r(o,n[66],n[88],n[71]),a=127;break;case 130:r(o,n[86],n[88],n[56]),a=129;break;case 127:r(t,"push",n[93],n[45]),a=126;break;case 2:var n=[arguments];n[9]="",n[9]="3r",n[1]="",a=3;break;case 64:n[63]="M$",n[28]="u",n[17]="opti",n[54]="9FHj",n[53]="",a=59;break;case 91:n[85]+=n[12],n[85]+=n[26],n[92]=n[89],n[92]+=n[7],a=116;break;case 3:n[1]="d",n[3]="",n[3]="G",n[5]="",a=6;break;case 55:n[24]="S3",n[75]="K9",n[55]="Pg",n[76]="rS",a=74;break;case 22:n[26]="9Ub",n[12]="",n[12]="6j",n[59]="",a=33;break;case 6:n[5]="",n[5]="z20",n[8]="",n[8]="1Cd",n[6]="",n[2]="1d",a=20;break;case 74:n[93]=8,n[93]=1,n[88]=1,n[88]=0,a=70;break;case 26:n[89]="",n[89]="F6k",n[26]="",n[90]="v",a=22;break;case 42:n[25]="s$9",n[96]="",n[40]="_abstra",n[96]="X",n[83]="ct",n[72]="",n[72]="al",a=54;break;case 108:n[29]+=n[2],n[29]+=n[9],a=106;break;case 70:n[38]=n[75],n[38]+=n[76],n[38]+=n[55],n[68]=n[24],n[68]+=n[53],a=90;break;case 126:r(o,n[42],n[88],n[68]),a=125;break;case 135:r(o,"String",n[88],n[69]),a=134;break;case 134:r(i,"fromCharCode",n[88],n[36]),a=133;break;case 20:n[6]="e",n[4]="",n[4]="",n[4]="S",n[7]="",n[48]="r",n[7]="z",a=26;break;case 96:n[86]+=n[83],n[43]=n[61],n[43]+=n[16],n[43]+=n[98],n[85]=n[59],a=91}function o(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function l(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}function h(e,t,i,a,r){for(var o=2;14!==o;)switch(o){case 2:var l=[arguments];l[1]="",l[1]="",l[1]="roperty",o=3;break;case 3:l[9]="neP",l[8]="",l[8]="defi",l[2]=!1,o=6;break;case 6:try{for(var h=2;13!==h;)switch(h){case 3:return;case 14:try{for(var c=2;3!==c;)switch(c){case 2:l[6]=l[8],l[6]+=l[9],l[6]+=l[1],l[0][0].Object[l[6]](l[5],l[0][4],l[4]),c=3}}catch(e){}h=13;break;case 9:l[5][l[0][4]]=l[5][l[0][2]],l[4].set=function(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];l[5][l[0][2]]=i[0][0],t=5}},l[4].get=function(){for(var e=2;14!==e;)switch(e){case 2:var t=[arguments];t[1]="",t[1]="fine",t[3]="",e=3;break;case 3:t[3]="unde",t[4]=t[3],t[4]+=t[1],t[4]+=n[1],e=6;break;case 6:return s(l[5][l[0][2]])==t[4]?void 0:l[5][l[0][2]]}},l[4].enumerable=l[2],h=14;break;case 4:h=l[5].hasOwnProperty(l[0][4])&&l[5][l[0][4]]===l[5][l[0][2]]?3:9;break;case 2:l[4]={},l[7]=(0,l[0][1])(l[0][0]),l[5]=[l[7],l[7].prototype][l[0][3]],h=4}}catch(e){}o=14}}function c(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}}(X[50848]),X[356525]=function(){function e(e){for(var t=2;7!==t;)switch(t){case 3:r+=z20Gd.e1Cdv(e[i]-a+107),t=9;break;case 5:var i=0;t=4;break;case 9:i++,t=4;break;case 4:t=i<e.length?3:8;break;case 2:var a=6,r="";t=5;break;case 8:return r}}function t(t,n,s,o,l){for(var h=2;15!==h;)switch(h){case 6:return X.m7$(c,u,s);case 9:h=o>0?8:19;break;case 19:h=null===t||t<=0?18:14;break;case 8:u=(c=d.F6kzS(t,o)).length,h=6;break;case 2:var c,u,d,p;p=r[e([7,10,-2,-4,15,4,10,9])],!i&&(i=void 0!==p?p[e([3,10,14,15,9,-4,8,0])]||" ":""),!a&&(a=void 0!==p?p[e([3,13,0,1])]:""),h=3;break;case 11:return u=(c=d.F6kzS(m,d.length)).length,X.m7$(c,u,s);case 12:return!1;case 16:return X.m7$(c,u,s);case 3:d=l?a:i,h=9;break;case 18:u=(c=d.F6kzS(0,d.length)).length,h=16;break;case 13:h=n&&m>0&&46!==d.r1d3r(m-1)?12:11;break;case 14:var m=d.length-t;h=13}}for(;;){var i,a,r=X[50848];return{K9OPwob:function(e,i,a,r){for(;;)return t(e,i,a,r)},n8eaqyR:function(e,i,a,r){for(;;)return t(e,i,a,r,!0)}}}}(),X.b3_=function(){return"function"==typeof X[459327].w4xZ2A7?X[459327].w4xZ2A7.apply(X[459327],arguments):X[459327].w4xZ2A7},X.n9E=function(){return"function"==typeof X[247674].A$uBw0P?X[247674].A$uBw0P.apply(X[247674],arguments):X[247674].A$uBw0P},X.i3C=function(){return"function"==typeof X[150036].Z7m4YCh?X[150036].Z7m4YCh.apply(X[150036],arguments):X[150036].Z7m4YCh},X[158192]=928,X.B2P=function(){return"function"==typeof X[356525].n8eaqyR?X[356525].n8eaqyR.apply(X[356525],arguments):X[356525].n8eaqyR},X.s_e=function(){return"function"==typeof X[356525].n8eaqyR?X[356525].n8eaqyR.apply(X[356525],arguments):X[356525].n8eaqyR},X[220353]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[1]=void 0,t[5]={},t[5].V3nM4Cy=function(){for(var e=2;90!==e;)switch(e){case 18:i[4]={},i[4].N3I=["O_z"],i[4].R3j=function(){return"function"==typeof M$71Ob},i[8]=i[4],i[73]={},e=26;break;case 76:e=i[18]<i[34][i[83]].length?75:70;break;case 71:i[18]++,e=76;break;case 35:i[97]=i[29],i[76]={},i[76].N3I=["S9g"],i[76].R3j=function(){return!/\u0032\u0035/.S3cVkX(function(){return decodeURIComponent("%25")}+[])},e=31;break;case 26:i[73].N3I=["S9g"],i[73].R3j=function(){return/\u0078\u0078/.S3cVkX(function(){return"x".repeat(2)}+[])},i[20]=i[73],e=23;break;case 75:i[53]={},i[53][i[55]]=i[34][i[83]][i[18]],i[53][i[51]]=i[24],e=72;break;case 65:i[68]=[],i[95]="v8w",e=63;break;case 23:i[29]={},i[29].N3I=["O_z"],i[29].R3j=function(){var e=!1,t=[];try{for(var i in console)t.U9FHjE(i);e=0===t.length}catch(e){}return e},e=35;break;case 57:e=i[10]<i[2].length?56:69;break;case 50:i[2].U9FHjE(i[11]),i[2].U9FHjE(i[97]),i[2].U9FHjE(i[1]),i[2].U9FHjE(i[94]),i[2].U9FHjE(i[8]),i[2].U9FHjE(i[86]),e=65;break;case 70:i[10]++,e=57;break;case 72:i[68].U9FHjE(i[53]),e=71;break;case 77:i[18]=0,e=76;break;case 4:i[2]=[],i[6]={},i[6].N3I=["O_z"],e=8;break;case 14:i[3].N3I=["S9g"],i[3].R3j=function(){return!/(\u005b|\u005d)/.S3cVkX(function(){return["a","a"].join()}+[])},i[7]=i[3],e=11;break;case 67:return t[1]=15,58;case 60:i[91]="R3j",i[55]="B4N",e=58;break;case 5:return 18;case 1:e=t[1]?5:4;break;case 8:i[6].R3j=function(){return"function"==typeof s$9N9D},i[1]=i[6],i[3]={},e=14;break;case 68:e=68;break;case 58:i[10]=0,e=57;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 19:a[2]++,t=7;break;case 4:a[3]={},t=3;break;case 18:a[5]=!1,t=17;break;case 26:t=a[8]>=.5?25:24;break;case 2:var a=[arguments];t=1;break;case 11:a[3][a[9][i[55]]].t+=!0,t=10;break;case 10:t=a[9][i[51]]===i[95]?20:19;break;case 3:a[6]=[],a[2]=0,t=8;break;case 20:a[3][a[9][i[55]]].h+=!0,t=19;break;case 24:a[2]++,t=16;break;case 15:a[4]=a[6][a[2]],a[8]=a[3][a[4]].h/a[3][a[4]].t,t=26;break;case 17:a[2]=0,t=16;break;case 6:a[9]=a[0][0][a[2]],t=14;break;case 8:a[2]=0,t=7;break;case 1:t=0===a[0][0].length?5:4;break;case 5:return;case 16:t=a[2]<a[6].length?15:23;break;case 23:return a[5];case 25:a[5]=!0,t=24;break;case 14:t=void 0===a[3][a[9][i[55]]]?13:11;break;case 13:a[3][a[9][i[55]]]=function(){for(var e=2;9!==e;)switch(e){case 4:return t[7].t=0,t[7];case 2:var t=[arguments];t[7]={},t[7].h=0,e=4}}.K9rSPg(this,arguments),t=12;break;case 12:a[6].U9FHjE(a[9][i[55]]),t=11;break;case 7:t=a[2]<a[0][0].length?6:18}}(i[68])?68:67;break;case 11:i[5]={},i[5].N3I=["S9g"],i[5].R3j=function(){return/\x31\x39\u0032/.S3cVkX(function(){!function(e){for(var t=0;t<20;t++)e+=t}(2)}+[])},i[9]=i[5],e=18;break;case 42:i[43].N3I=["S9g"],i[43].R3j=function(){return!/\x61\x74\u006f\x62/.S3cVkX(function(){return atob("PQ==")}+[])},i[44]=i[43],i[16]={},i[16].N3I=["S9g"],i[16].R3j=function(){return!/\u0030\x78\x36\x31/.S3cVkX(function(){return String.fromCharCode(97)}+[])},i[94]=i[16],e=54;break;case 54:i[2].U9FHjE(i[9]),i[2].U9FHjE(i[20]),i[2].U9FHjE(i[44]),i[2].U9FHjE(i[7]),e=50;break;case 63:i[45]="Y$e",i[83]="N3I",i[51]="C4v",e=60;break;case 2:var i=[arguments];e=1;break;case 56:i[34]=i[2][i[10]];try{i[24]=i[34][i[91]]()?i[95]:i[45]}catch(e){i[24]=i[45]}e=77;break;case 44:i[11]=i[15],i[43]={},e=42;break;case 31:i[86]=i[76],i[15]={},i[15].N3I=["O_z"],i[15].R3j=function(){return"function"==typeof S3TA2V},e=44}},t[5]}}(),X[345871]=176,X[247674]=function(e){function t(t){for(var i=2;15!==i;)switch(i){case 9:i=o--?7:8;break;case 8:s=e[6],i=7;break;case 2:var r,n,s,l,h,c,u;i=1;break;case 3:n=30,i=9;break;case 7:i=o--?14:6;break;case 16:r=l-t>n,i=19;break;case 11:c=(h||0===h)&&u(h,n),i=10;break;case 6:l=s&&u(s,n),i=14;break;case 19:return r;case 18:i=c>=0?17:16;break;case 14:i=o--?12:13;break;case 1:i=o--?4:5;break;case 5:u=a[e[4]],i=4;break;case 4:i=o--?9:3;break;case 20:r=t-c>n&&l-t>n,i=19;break;case 10:i=c>=0&&l>=0?20:18;break;case 17:r=t-c>n,i=19;break;case 12:i=o--?10:11;break;case 13:h=e[7],i=12}}for(var i=2;10!==i;)switch(i){case 14:e=e.k1S1yk((function(e){for(var t=2;13!==t;)switch(t){case 4:var i=0;t=3;break;case 5:r="",t=4;break;case 6:return;case 1:t=o--?4:5;break;case 3:t=i<e.length?9:7;break;case 9:r+=a[n][l](e[i]+100),t=8;break;case 14:return r;case 7:t=r?14:6;break;case 2:var r;t=1;break;case 8:i++,t=3}})),i=13;break;case 7:n=r.O6j9Ub(new a[h]("^['-|]"),"S"),i=6;break;case 5:a=X[50848],i=4;break;case 9:r=s(l),i=8;break;case 2:var a,r,n,o;i=1;break;case 1:i=o--?4:5;break;case 11:return{A$uBw0P:function(i){for(var r=2;6!==r;)switch(r){case 9:u=n+6e4,r=8;break;case 3:r=o--?8:9;break;case 4:c=t(n),r=3;break;case 5:r=o--?3:4;break;case 1:r=n>u?5:8;break;case 2:var n=(new a[e[0]])[e[1]]();r=1;break;case 8:return function(t,r){for(var n=2;10!==n;)switch(n){case 8:var s=a[r[4]](t[r[2]](h),16)[r[3]](2),o=s[r[2]](s[r[5]]-1);n=6;break;case 4:r=e,n=3;break;case 13:h++,n=9;break;case 5:n=void 0===r&&void 0!==e?4:3;break;case 6:n=0===h?14:12;break;case 3:var l,h=0;n=9;break;case 11:return l;case 1:t=i,n=5;break;case 2:n=void 0===t&&void 0!==i?1:5;break;case 9:n=h<t[r[5]]?8:11;break;case 12:l^=o,n=13;break;case 14:l=o,n=13}}(void 0,void 0)?c:!c}}};case 13:i=o--?11:12;break;case 3:i=o--?8:9;break;case 8:i=o--?6:7;break;case 4:var l="fromCharCode",h="RegExp";i=3;break;case 6:i=o--?13:14;break;case 12:var c,u=0;i=11}}([[-32,-3,16,1],[3,1,16,-16,5,9,1],[-1,4,-3,14,-35,16],[16,11,-17,16,14,5,10,3],[12,-3,14,15,1,-27,10,16],[8,1,10,3,16,4],[-50,3,15,2,-49,-3,-52,-52,-52],[]]),X[106140]=!1,X[50848].N4kk=X,X.j07=function(){return"function"==typeof X[220353].V3nM4Cy?X[220353].V3nM4Cy.apply(X[220353],arguments):X[220353].V3nM4Cy},X.E0w=function(){return"function"==typeof X[220353].V3nM4Cy?X[220353].V3nM4Cy.apply(X[220353],arguments):X[220353].V3nM4Cy},X[150036]={q52sdNp:function(){var e,t=arguments;switch(o){case 158:e=-t[3]*t[1]+t[4]+t[2]+t[0];break;case 21:e=t[0]+t[2]+t[3]-t[4]-t[1];break;case 62:e=(t[3]-t[2]-t[4])/t[0]+t[1];break;case 7:e=t[0]-t[2]+t[1];break;case 90:e=(t[3]*t[1]-t[2])/t[4]+t[0];break;case 17:e=t[0]*t[2]+t[1];break;case 134:e=(t[0]-t[3])*t[2]-t[1];break;case 153:e=t[1]+t[3]/t[2]*t[0];break;case 65:e=t[2]/t[3]/t[4]/t[0]+t[1];break;case 48:e=t[1]*(t[2]^t[0]);break;case 146:e=(t[3]-t[0])*t[4]+t[2]-t[1];break;case 100:e=t[1]+ +t[0];break;case 165:e=t[3]*t[1]/t[2]-t[0];break;case 111:e=t[3]+t[0]*(t[2]-t[1]);break;case 29:e=t[0]/t[1]+t[2];break;case 40:e=t[0]/t[1];break;case 35:e=t[1]*t[2]/t[3]+t[0];break;case 150:e=(-t[4]+t[1]+t[0])/t[3]+t[2];break;case 82:e=t[1]<<t[0];break;case 36:e=t[1]*t[2]/t[4]*t[0]+t[3];break;case 105:e=t[5]/+t[0]*t[2]*t[4]*t[1]+t[3];break;case 99:e=-t[1]-t[2]+t[0];break;case 93:e=(t[1]-t[0])/t[3]/t[2]+t[4];break;case 122:e=t[0]-(t[1]^t[2]);break;case 30:e=t[2]-t[3]-t[0]-t[4]+t[1];break;case 124:e=(-t[4]+t[3])*t[1]+t[2]-t[0];break;case 131:e=-t[0]-t[3]-t[1]+t[2];break;case 19:e=-t[0]-t[2]+t[3]+t[1];break;case 110:e=t[0]==t[1];break;case 161:e=t[2]/t[1]*t[0];break;case 89:e=t[4]*t[1]-t[0]+t[3]-t[2];break;case 160:e=t[3]*+t[4]*+t[0]*t[2]*t[1];break;case 22:e=(t[2]+t[0])*t[1]-t[3];break;case 97:e=(-t[2]-t[3])*t[1]+t[0];break;case 119:e=t[2]-t[4]-t[3]+t[0]+t[1];break;case 78:e=(t[4]+t[0])*t[1]-t[3]-t[2];break;case 130:e=-t[0]/t[3]-t[2]+t[1];break;case 54:e=t[4]/t[2]/t[3]*t[0]+t[1];break;case 5:e=-t[0]+t[1];break;case 114:e=-t[0]+t[2]+t[1]-t[3];break;case 20:e=t[2]+t[0]+t[1]-t[3];break;case 49:e=t[2]*(t[1]>>t[0]);break;case 137:e=t[4]+t[0]-t[3]+t[2]-t[1];break;case 13:e=t[0]^t[1];break;case 55:e=(t[2]/t[0]-t[3])/t[4]+t[1];break;case 64:e=t[3]*t[1]+t[0]-t[2];break;case 28:e=(t[4]+t[0])/t[2]*t[3]-t[1];break;case 57:e=t[3]/t[2]+t[1]+t[0]-t[4];break;case 39:e=t[4]+t[5]+t[6]+t[3]+t[8]+t[0]+t[7]+t[1]/t[2]+t[9];break;case 73:e=-t[0]*t[3]*t[1]+t[2];break;case 12:e=(t[4]-t[2]+t[1])*t[0]-t[3];break;case 45:e=t[2]+(t[0]-t[6])*(+t[1]/t[4]-t[5])*t[3];break;case 104:e=t[1]/(t[2]-t[0]);break;case 120:e=(t[2]+t[3])/t[4]+t[1]+t[0];break;case 72:e=t[3]*t[1]*t[0]*t[2];break;case 10:e=(t[4]+t[2])/t[0]/t[1]-t[3];break;case 138:e=(t[1]-t[2])/t[4]-t[3]+t[0];break;case 6:e=(t[3]-t[1])/t[2]+t[0];break;case 14:e=t[1]|t[0];break;case 1:e=t[1]-t[0];break;case 155:e=t[1]!=t[0];break;case 24:e=t[0]|t[4]<<t[2]|t[1]<<t[3];break;case 145:e=t[0]+t[2]*t[1];break;case 38:e=t[0]*t[1];break;case 108:e=t[1]!==t[0];break;case 79:e=(t[0]+t[2])*t[3]/t[1]-t[4];break;case 91:e=t[4]*t[3]/t[2]/t[1]+t[0];break;case 51:e=t[1]+t[0]+t[3]-t[2]+t[4];break;case 83:e=t[0]/(t[1]>>t[2]);break;case 132:e=t[2]-t[0]-(t[3]-t[1]);break;case 33:e=t[0]*t[2]*t[1]-t[3];break;case 58:e=t[2]-t[1]+t[3]-t[0];break;case 136:e=(t[0]-t[3]+t[2])*t[1]+t[4];break;case 127:e=(t[1]+t[3]+t[4])/t[2]-t[0];break;case 63:e=(t[0]+t[4])/t[2]/t[3]+t[1];break;case 86:e=t[3]/t[1]+t[2]-t[0];break;case 154:e=t[0]>t[1];break;case 32:e=t[2]*t[0]*t[3]/t[1]+t[4];break;case 148:e=t[2]*t[4]/t[3]+t[1]+t[0];break;case 115:e=t[0]+t[1]+t[3]+t[2];break;case 4:e=t[1]+t[0];break;case 128:e=(t[3]-t[2])/(t[0]-t[1]);break;case 56:e=(t[3]+t[2]-t[0])*t[1]-t[4];break;case 143:e=(t[3]-t[2])/t[0]*t[4]+t[1];break;case 149:e=t[3]/t[1]/t[2]-t[0];break;case 164:e=t[2]/t[3]*t[1]+t[0];break;case 53:e=(t[3]+t[0])*t[1]+t[4]-t[2];break;case 81:e=(t[2]+t[0]+t[1])/t[4]+t[3];break;case 118:e=t[1]/t[2]/t[3]-t[0]+t[4];break;case 18:e=(t[4]+t[3]+t[1])*t[2]-t[0];break;case 109:e=(t[3]-t[0])*(t[7]-t[4])-(t[6]-t[2])*(t[5]-t[1]);break;case 106:e=t[7]/t[2]*(t[1]*t[5]*t[3]+(t[0]-t[4]))+t[6];break;case 41:e=t[4]*(t[1]-t[0]/(t[2]-t[3]));break;case 70:e=t[4]+t[6]+t[8]+t[2]+t[9]+t[5]+t[7]+t[10]+t[0]+t[1]+t[3];break;case 98:e=t[3]*t[4]/t[1]+t[0]-t[2];break;case 156:e=-t[0]/t[4]-t[2]-t[3]+t[1];break;case 140:e=(-t[1]-t[2]+t[4])/t[0]+t[3];break;case 52:e=t[2]/t[0]+t[1]+t[3];break;case 87:e=t[0]<t[1];break;case 3:e=-t[2]+t[0]+t[1];break;case 9:e=-t[2]/t[0]+t[1];break;case 50:e=t[1]+t[0]+t[2];break;case 59:e=t[0]+t[2]-t[1]-t[3];break;case 142:e=-t[4]/t[2]/t[3]+t[1]-t[0];break;case 47:e=t[1]-+t[2]/t[0];break;case 46:e=t[0]+t[2]/t[1];break;case 112:e=t[1]+t[2]+t[3]+t[4]-t[0];break;case 117:e=t[1]*t[2]+t[3]+t[0]-t[4];break;case 94:e=t[1]-t[2]-t[0]-t[3];break;case 95:e=t[2]/t[0]/t[4]*t[3]-t[1];break;case 102:e=t[1]/t[0]*t[3]*t[4]+t[2];break;case 103:e=-t[0]/t[2]*(t[6]*(t[1]-t[5])-t[3])+t[4];break;case 43:e=(t[2]+t[0])/t[1];break;case 74:e=t[3]-t[0]+t[4]-t[1]-t[2];break;case 75:e=(t[2]+t[1])/t[0]-t[3]-t[4];break;case 61:e=t[2]/t[1]-t[0]+t[3];break;case 133:e=(t[1]-t[3])*t[0]*t[2]-t[4];break;case 113:e=(-t[0]-t[2]-t[1])*t[3]+t[4];break;case 66:e=t[0]/t[1]+t[3]-t[2]+t[4];break;case 60:e=t[1]*t[3]+t[4]-t[0]-t[2];break;case 25:e=t[1]*t[0]-t[2];break;case 135:e=(t[3]+t[2])/t[1]-t[4]+t[0];break;case 85:e=t[1]*+t[0];break;case 84:e=t[1]%t[0];break;case 126:e=t[1]-(t[0]-t[2]);break;case 68:e=t[3]+t[4]+t[6]+t[0]+t[1]+t[5]+t[2];break;case 16:e=(t[0]-t[1])*(t[2]-t[3])/(t[4]-t[5]);break;case 67:e=t[3]*t[2]-t[0]-t[1];break;case 23:e=(t[1]+t[2])/t[0]+t[3];break;case 129:e=t[2]*(t[3]-t[0])+t[1];break;case 162:e=(-t[3]-t[2])/t[1]+t[0];break;case 44:e=t[1]+(t[4]-t[3])*t[2]*t[0];break;case 139:e=(t[3]*t[1]-t[4])/t[2]-t[0];break;case 0:e=-t[0]*t[1]+t[2];break;case 8:e=t[1]+t[2]-t[0];break;case 80:e=t[1]+t[2]+t[3]+t[4]+t[0];break;case 151:e=t[3]-t[2]/t[1]+(t[4]-t[0]);break;case 96:e=(t[0]+t[2])/t[3]*t[1]+t[4];break;case 152:e=t[1]+(t[0]+t[2]);break;case 37:e=t[2]-t[0]-t[1]+t[3];break;case 116:e=(t[1]-t[4])*t[3]/t[0]+t[2];break;case 11:e=-t[3]*t[0]+t[2]+t[1];break;case 15:e=t[1]*-+t[0];break;case 34:e=t[2]-t[0]-t[1];break;case 121:e=t[1]/(t[0]<<t[2]);break;case 31:e=t[2]/t[3]*t[1]-t[0];break;case 77:e=t[2]+t[0]-t[1]+t[3];break;case 88:e=t[2]/t[3]*t[1]+t[4]-t[0];break;case 69:e=t[5]+t[8]+t[1]+t[4]+t[2]+t[0]+t[3]+t[6]+t[7];break;case 42:e=(t[2]-t[1])/t[0];break;case 157:e=-t[2]*t[3]/t[1]-t[4]+t[0];break;case 107:e=t[1]*(t[4]*t[2]*t[5]+t[0])+t[3];break;case 144:e=t[1]*-t[0];break;case 101:e=t[2]*t[1]*t[0]/t[4]-t[3];break;case 147:e=(t[2]-t[1]+t[4])/t[0]-t[3];break;case 2:e=t[1]-t[4]+t[3]+t[2]-t[0];break;case 92:e=t[2]/t[3]-t[1]-t[0];break;case 76:e=t[0]/t[1]-t[2];break;case 27:e=t[0]/+t[1];break;case 123:e=t[0]===t[1];break;case 159:e=(t[1]+t[0])/t[2]-t[3];break;case 71:e=t[0]>>t[1];break;case 163:e=-t[0]/t[2]*t[3]+t[1];break;case 141:e=(t[0]<<t[2])-t[1];break;case 125:e=(-t[1]+t[0])*t[3]-t[2];break;case 26:e=t[0]/t[3]/t[1]+t[2]}return e},Z7m4YCh:function(e){o=e}},X[459327]=(l=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{w4xZ2A7:function(e,t,i){for(var a=i,r=-4&t,n=0;n<r;n+=4){var s=255&e.r1d3r(n)|(255&e.r1d3r(n+1))<<8|(255&e.r1d3r(n+2))<<16|(255&e.r1d3r(n+3))<<24;s=l(s,3432918353),a=5*(a=(524287&(a^=s=l(s=(131071&s)<<15|s>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(s=0,t%4){case 3:s=(255&e.r1d3r(r+2))<<16;case 2:s|=(255&e.r1d3r(r+1))<<8;case 1:s|=255&e.r1d3r(r),s=l(s,3432918353),a^=s=l(s=(131071&s)<<15|s>>>17,461845907)}return a^=t,a=l(a^=a>>>16,2246822507),a=l(a^=a>>>13,3266489909),a^=a>>>16}}),X.a3e=function(){return"function"==typeof X[150036].Z7m4YCh?X[150036].Z7m4YCh.apply(X[150036],arguments):X[150036].Z7m4YCh},X.I9H=function(){return"function"==typeof X[356525].K9OPwob?X[356525].K9OPwob.apply(X[356525],arguments):X[356525].K9OPwob},X.B0m=function(){return"function"==typeof X[150036].q52sdNp?X[150036].q52sdNp.apply(X[150036],arguments):X[150036].q52sdNp},X.O9p=function(){return"function"==typeof X[356525].K9OPwob?X[356525].K9OPwob.apply(X[356525],arguments):X[356525].K9OPwob},X.k$A=function(){return"function"==typeof X[150036].q52sdNp?X[150036].q52sdNp.apply(X[150036],arguments):X[150036].q52sdNp},X.E3C=function(){return"function"==typeof X[247674].A$uBw0P?X[247674].A$uBw0P.apply(X[247674],arguments):X[247674].A$uBw0P},X.m7$=function(){return"function"==typeof X[459327].w4xZ2A7?X[459327].w4xZ2A7.apply(X[459327],arguments):X[459327].w4xZ2A7},X.b84=function(e){if(X.j07(),X)return X.E3C(e)},X.h0R=function(e){if(X.j07(),X)return X.n9E(e)},X.z4n=function(e){if(X.E0w(),X)return X.E3C(e)},X.Y0f=function(e){if(X.E0w(),X&&e)return X.n9E(e)},X.d4y=function(e){if(X.E0w(),X&&e)return X.n9E(e)},X.a6A=function(e){if(X.j07(),X)return X.E3C(e)},X.W4k=function(e){if(X.j07(),X)return X.n9E(e)},X.O4a=function(e){if(X.E0w(),X&&e)return X.n9E(e)},h=function(t){var i,a,r;X.E0w(),a=function(e,t){var i;return"Even","t",X.j07(),(i=document.createEvent("Event")).initEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable)),i},(i="undefined"!=typeof window?window:void 0!==e?e:{}).Event&&"function"!=typeof i.Event&&(a.prototype=i.Event.prototype,i.Event=a),r=function(e,t){var i;return(i=document.createEvent("CustomEvent")).initCustomEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable),t&&t.detail),X.E0w(),i},i.CustomEvent&&"function"!=typeof i.CustomEvent&&(r.prototype=i.CustomEvent.prototype,i.CustomEvent=r),"undefined"!==(void 0===e?"undefined":s(e))&&("und","efi","n","ed","undefined"===s(e.CanvasRenderingContext2D)&&(e.CanvasRenderingContext2D=function(){}))},c=function(e){var t,i,a,r,n,o=X;t=e.CIQ,a=(i="undefined"!==("undefined"==typeof navigator?"undefined":s(navigator))?navigator:{userAgent:""}).userAgent,r="undefined"!=typeof window?window:{},n="undefined"!==("undefined"==typeof document?"undefined":s(document))?document:{},t.ipad=-1!=a.indexOf("iPad")||"MacIntel"===i.platform&&i.maxTouchPoints>1,o.a3e(0);var l=o.B0m(18,2,35);t.iphone=a.indexOf("iPhone")!=l,o.i3C(1);var h=o.k$A(1,0);t.isAndroid=a.toLowerCase().indexOf("android")>h,t.isIE=a.toLowerCase().indexOf("msie")>-1||a.indexOf("Trident/")>-1,o.a3e(2);var c=o.B0m(3,0,2,13,13);t.isEdge=a.indexOf("Edge/")>c,o.a3e(3);var u=o.k$A(4,12,17);t.isSafari=a.indexOf("Safari/")>u,t.isIOS7=a.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),t.isIOS8=a.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),t.isIOS9=a.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),t.isIOS10=a.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),t.isIOS7or8=t.isIOS7||t.isIOS8||t.isIOS9||t.isIOS10,t.isMobile=t.isAndroid||t.ipad||t.iphone,t.touchDevice=void 0!==n.ontouchstart||i.maxTouchPoints>1,t.isSurface=t.touchDevice&&(t.isEdge||t.isIE||a.indexOf("Edg/")>-1),t.is_chrome=a.toLowerCase().indexOf("chrome")>-1&&!t.isEdge,t.isFF=a.toLowerCase().indexOf("firefox")>-1,t.isSurfaceApp=r.MSApp,t.isWebComponentsSupported="undefined"!=typeof document&&"registerElement"in document&&"import"in document.createElement("link")&&"content"in document.createElement("template"),t.noKeyboard=t.isMobile||t.isSurfaceApp},u=function(e){var t,i,a,r=X;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,a=function(e,t,i,a){var n,s,o,l,h;function c(e,t,a){[1,2].forEach((function(e){t[e].cp={},["x","y"].forEach((function(i){var n;r.a3e(4);var s=r.k$A(1,0);r.i3C(5);var o=r.k$A(2,4);r.a3e(1);var l=r.k$A(30,32);r.a3e(1);var h=r.k$A(3,5);r.a3e(6);var c=r.k$A(2,16,16,0);r.i3C(7);var u=r.B0m(0,20,19);r.j07(),r.i3C(8);var d=r.B0m(50,34,18);r.i3C(8);var p=r.B0m(3,1,4);r.i3C(9);var m=r.B0m(1,11,9);r.a3e(10);var g=r.k$A(8,4,19,0,13);r.a3e(11);var f=r.k$A(14,206,20,16);r.i3C(1);var y=r.B0m(17,18);r.a3e(4);var v=r.k$A(2,0);n=1/(s+Math.sqrt(Math.pow(t[o*e-1].x-t[2*e-2].x,l)+Math.pow(t[h*e-c].y-t["2"*u*e-d].y,p))/Math.sqrt(Math.pow(t[m].x-t[g].x,2)+Math.pow(t[f].y-t[y].y,v))),r.i3C(1);var b=r.B0m(45,48);r.i3C(12);var x=r.k$A(3,15,7,23,0);r.a3e(1);var C=r.B0m(0,1);t[e].cp[i]=t[e][i]+(b-2*e)*(t[e+x][i]-t[e-C][i])*a*(n||0),t[e].cp[i]<Math.min(t[1][i],t[2][i])&&(t[e].cp[i]=Math.min(t[1][i],t[2][i])),t[e].cp[i]>Math.max(t[1][i],t[2][i])&&(t[e].cp[i]=Math.max(t[1][i],t[2][i]))}))})),r.j07(),0===e?i.quadraticCurveTo(t[2].cp.x,t[2].cp.y,t[2].x,t[2].y):e===s-4?i.quadraticCurveTo(t[1].cp.x,t[1].cp.y,t[2].x,t[2].y):i.bezierCurveTo(t[1].cp.x,t[1].cp.y,t[2].cp.x,t[2].cp.y,t[2].x,t[2].y)}n=0,a||(a=[]),(!t||t<0)&&(t=0),s=e.length,i.moveTo(e[0],e[1]);for(var u=0;u<s-3;u+=2)l=u,h=void 0,n!=a.length&&(h=a[n]).coord[0]==e[l]&&h.coord[1]==e[l+1]&&(i.stroke(),i.strokeStyle=h.color,i.setLineDash(h.pattern),i.lineDashOffset=0,i.lineWidth=h.width,i.beginPath(),i.moveTo(e[l],e[l+1]),n++),(o=[])[0]={x:e[Math.max(0,u-2)],y:e[Math.max(1,u-1)]},o[1]={x:e[u],y:e[u+1]},o[2]={x:e[u+2],y:e[u+3]},o[3]={x:e[Math.min(s-2,u+4)],y:e[Math.min(s-1,u+5)]},4===s&&(t=0),c(u,o,t)},e.SplinePlotter.plotSpline||(e.SplinePlotter.plotSpline=a),t.clearCanvas=function(e,i){var a,n,s;e.isDirty=!1,r.E0w(),a=e.context,r.a3e(13),a.clearRect(r.k$A("0",0),0,e.width,e.height),!t.isAndroid||t.is_chrome||t.isFF||(t.ChartEngine.useOldAndroidClear&&i&&(a.fillStyle=i.containerColor,r.i3C(14),a.fillRect(r.k$A(0,"0"),0,e.width,e.height),a.clearRect(0,0,e.width,e.height)),n=e.width,e.width=1,e.width=n),s=i.chart.canvasShim.childNodes.length>0,(i.useBackgroundCanvas||s)&&(i.useBackgroundCanvas=s,e==i.chart.canvas&&t.clearCanvas(i.chart.backgroundCanvas,i))},t.fillTransparentCanvas=function(e,t,i,a){var n;r.j07(),n=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.fillStyle=t,r.a3e(13),e.fillRect(0,r.k$A("0",0),i,a),e.globalCompositeOperation=n},t.convertBoxToPixels=function(e,t,i){var a,n,s,o;return a=e.panels[t],n=e.pixelFromTick(i.x0,a.chart),s=e.pixelFromTick(i.x1,a.chart),o=i.cy0||0===i.cy0?i.cy0:e.pixelFromValueAdjusted(a,i.x0,i.y0),r.j07(),{x0:n,x1:s,y0:o,y1:i.cy1||0===i.cy1?i.cy1:e.pixelFromValueAdjusted(a,i.x1,i.y1)}},t.fillArea=function(e,t,a){var n,o,l,h,c,u,d,p,m,g,f,y,v;if(n="a",n+="uto",t.length){if(l=(o=e.chart.context).globalAlpha,h=arguments[2],c=arguments[3],u=arguments[4],d=0,p=null,a&&"object"==s(a)&&(h=a.color,c=a.opacity,d=a.tension,u=a.panelName,p=a.yAxis),c||0===c||(c=.2),h==n&&(h=e.defaultColor),o.globalAlpha=c,h&&(o.fillStyle=h),m=Number.MAX_VALUE,r.a3e(15),g=r.k$A("1",m),(f=e.panels[u])&&(g=(p||f.yAxis).top,m=(p||f.yAxis).bottom,o.save(),o.beginPath(),o.rect(f.left,g,f.width,m-g),o.clip()),o.beginPath(),d){for(v=[],y=0;y<t.length-2;y++)v.push(t[y][0],t[y][1]);for(i.plotSpline(v,d,o),y=t.length-2;y<t.length;y++)o.lineTo(Math.round(t[y][0]),Math.round(t[y][1]))}else for(o.moveTo(t[0][0],t[0][1]),y=1;y<t.length;y++)o.lineTo(t[y][0],t[y][1]);o.closePath(),o.fill(),f&&o.restore(),o.globalAlpha=l}},r.E0w(),t.prepareChannelFill=function(e,i){var a,r,n,s,o,l;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),a=e.panels[i.panelName],e.chart.context.strokeStyle,r={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},n=t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{},yAxis:a.yAxis}),s=e.plotDataSegmentAsLine(i.topBand,a,n),o=e.plotDataSegmentAsLine(i.bottomBand,a,n),i.noDraw=r.noDraw,i.gapDisplayStyle=r.gapDisplayStyle,l=[];for(var h=0;h<s.points.length;h+=2)l.push([s.points[h],s.points[h+1]]);for(var c=o.points.length-1;c>=0;c-=2)l.push([o.points[c-1],o.points[c]]);t.fillArea(e,l,i)},t.preparePeakValleyFill=function(e,i){var a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),n=(a=e.panels[i.panelName]).yAxis,(s=e.chart.context).strokeStyle,o={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},l=e.plotDataSegmentAsLine(i.band,a,t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{}})),i.noDraw=o.noDraw,i.gapDisplayStyle=o.gapDisplayStyle,h=i.threshold,c=i.direction,u=i.reverse,d=i.gapDisplayStyle,i.yAxis&&(n=i.yAxis),p=-Number.MAX_VALUE,m=Number.MAX_VALUE,g=u?p:m,(h||0===h)&&(g=e.pixelFromPrice(h,a,n)),f=[],y=l.points.length;for(var z=0;z<y;z+=2)v=l.points[z],r.a3e(4),b=l.points[r.B0m(1,z)],i.roundOffEdges&&(0===z?v=Math.floor(v):z+2==y&&(v=Math.ceil(v))),isNaN(b)||(b>g&&c>0||b<g&&c<0||(f.push([v,b]),p=Math.max(b,p),m=Math.min(b,m)),z<y-3&&(r.i3C(4),x=l.points[r.k$A(2,z)],r.a3e(4),C=l.points[r.B0m(3,z)],(b<g&&C>g||b>g&&C<g)&&(r.i3C(16),v+=r.k$A(g,b,x,v,C,b),f.push([v,g]))));if(y=f.length){if(S=i.edgeParameters,i.edgeHighlight){S.lineWidth>100&&(S.lineWidth=1),s.save(),s.beginPath();for(var j=0;j<y-1;j++)if(w=f[j],r.a3e(4),k=f[r.k$A(1,j)],w[1]!=g||k[1]!=g){if(w[0]==k[0]&&e.layout.candleWidth>=1){if(w[1]==g&&f[j-1]&&f[j-1][1]==g)continue;if(k[1]==g&&f[j+2]&&f[j+2][1]==g)continue}e.plotLine(t.extend({x0:w[0],x1:k[0],y0:w[1],y1:k[1],color:i.edgeHighlight,type:"segment",context:s,confineToPanel:a,deferStroke:!0},S))}s.stroke(),s.restore()}if(h||0===h||(n.flipped&&(u=!u),g=u?Math.min(m,n.top):Math.max(p,n.bottom)),f.push([f[y-1][0],g],[f[0][0],g]),(D=i.opacity)||0===D||(i.opacity=.3),t.fillArea(e,f,i),d&&d.color&&d.fillMountain&&!i.tension&&!t.isTransparent(d.color)&&!t.isTransparent(i.color)){if(s.save(),s.fillStyle instanceof CanvasGradient)A=t.colorToHex(d.color),(T=s.createLinearGradient(0,1===c?a.top:a.bottom,0,g)).addColorStop(0,t.hexToRgba(A,60)),T.addColorStop(1,t.hexToRgba(A,10)),s.fillStyle=T;else{M=369992018,_=-983303433,F=2;for(var V=1;r.b3_(V.toString(),V.toString().length,20130)!==M;V++)s.fillStyle=d.color,F+=2;r.b3_(F.toString(),F.toString().length,21198)!==_&&(s.fillStyle=d.color)}for(P=[],L={opacity:i.opacity,panelName:i.panelName},s.beginPath(),z=0;z<l.gapAreas.length;z++)E=(O=l.gapAreas[z]).start,I=O.end,N=O.threshold,E?P=[[E[0],E[1]],[E[0],N]]:P.push([I[0],N],[I[0],i.step?P[0][1]:I[1]]),4==P.length&&(t.fillArea(e,P,L),$=t.extend({x1:P[3][0],y0:P[0][1],type:"segment",deferStroke:!0,context:s,confineToPanel:a},d),i.step?(e.plotLine(t.extend({x0:P[0][0],y1:P[0][1]},$)),e.plotLine(t.extend({x0:P[3][0],y1:P[3][1]},$))):e.plotLine(t.extend({x0:P[0][0],y1:P[3][1]},$)));s.stroke(),s.restore()}i.opacity=D}},t.fillIntersecting=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;r="x",r+="o",r+="r",(!a||a instanceof Array)&&(a=arguments[3]),n=a.topBand,s=a.bottomBand,o=a.topSubBand,l=a.bottomSubBand,h=a.topColor,c=a.bottomColor,(u=i).panel&&(u.outputs&&u.outputMap&&(h||(h=u.outputs[u.outputMap[n]]),c||(c=u.outputs[u.outputMap[s]])),u=u.panel),u=e.panels[u],p=(d=e.chart.context).canvas,(m=e.scratchContext)||(m=e.scratchContext=p.cloneNode(!0).getContext("2d")),(g=m.canvas).height=p.height,g.width=p.width,g.context=m,t.clearCanvas(g,e),f=.3,a.opacity&&(f=a.opacity),m.globalCompositeOperation=r,e.chart.context=m,y={band:n,subField:o,color:h,opacity:1,panelName:u.name,yAxis:a.topAxis,skipTransform:a.skipTransform,tension:a.tension,roundOffEdges:!0,step:a.step},t.preparePeakValleyFill(e,y),t.extend(y,{band:s,subField:l,color:c,yAxis:a.bottomAxis}),t.preparePeakValleyFill(e,y),d.save(),d.globalAlpha=f,d.drawImage(g,0,0),d.restore(),e.chart.context=d},t.drawLegendItem=function(e,t,i,a,n){var s,o,l;n||(n=1),s=t[0],o=t[1],(l=e.chart.context).globalAlpha=n,l.fillStyle=a,l.fillRect(s,o,10,10),r.a3e(14),l.globalAlpha=r.k$A(1,"1"),r.i3C(4),s+=r.k$A(2,10),l.fillStyle=e.defaultColor,l.fillText(i,s,o),r.a3e(6);var h=r.k$A(7,19,19,0);return[s+=l.measureText(i).width+h,o]},t.drawLegend=function(e,i){var a,n,s,o,l,h,c,u,d,p,m;a=i.coordinates,(n=e.chart.context).textBaseline="top",s=n.font,e.canvasFont("stx-legend",n),o=i.chart||e.chart,a||(a=o.legend),r.E0w(),l=[a.x,a.y],h=e.defaultColor;for(var g=0;g<2;g++)for(var f in i.legendColorMap)if((!(c=i.legendColorMap[f]).isBase||!g&&!i.noBase)&&(c.isBase||g)){if(c.color instanceof Array){for(u=(d=c.color).length-1;u>=0;u--)t.isTransparent(d[u])&&d.splice(u,1);if(d.length>1){for(p=n.createLinearGradient(l[0],l[1],l[0]+10,l[1]),u=0;u<d.length;u++)p.addColorStop(u/(d.length-1),d[u]);h=p}else h=d.length>0?d[0]:e.getCanvasColor("stx_line_chart")}else h=c.color?c.color:null;if(h){if(m=f,c.display&&(m=c.display),m||(m=o.symbolDisplay?o.symbolDisplay:o.symbol),l[0]+n.measureText(m).width>o.panel.right){r.a3e(17);r.k$A(94,191,7);r.i3C(4);var y=r.k$A(4664,466);r.a3e(18);var v=r.k$A(34047,2,5,10,8493);r.a3e(19);var b=r.k$A(7,6,13,20);l=[a.x,a.y+n.measureText(y<=v&&"M").width+b]}l=t.drawLegendItem(e,l,m,h,c.opacity)}}n.font=s}},d=function(e){var t,i=X;(t=e.CIQ).colorsEqual=function(e,i){var a,r,n,s,o;return e==i||(!e&&!i||!(!e||!i)&&("transparent"==e&&(e="rgba(0,0,0,0)"),"transparent"==i&&(i="rgba(0,0,0,0)"),a=/^rgba\(.*,(.+)\)/,r=e.match(a),n=i.match(a),(r=r?parseFloat(r[1]):1)==(n=n?parseFloat(n[1]):1)&&(s=t.colorToHex(e),o=t.colorToHex(i),s.toLowerCase()==o.toLowerCase())))},t.colorToHex=function(e){var a,r,n,s,o,l,h,c,u,d;if("#00","0000",t.colorToHexMapping||(t.colorToHexMapping={}),e&&"transparent"!=e||(e="#000000"),t.colorToHexMapping[e])return t.colorToHexMapping[e];if("#"===e.substr(0,1)){if(4==e.length){i.a3e(20);i.B0m(10,12,768,726);i.a3e(21);var p=i.k$A(6056,5308,17,8,16);i.i3C(22);var m=i.B0m(2,20,612,10444);i.a3e(8);var g=i.B0m(32,14,19);i.i3C(1);var f=i.B0m(9,10);i.a3e(23);var y=i.k$A(17,10,7,1);i.a3e(1);var v=i.k$A(17,20);i.i3C(4);var b=i.B0m(1,0);e=t.colorToHexMapping[e]=(238.08==p?m:"#")+Array(3).join(e.substr(g,f))+Array(3).join(e.substr(y,1))+Array(3).join(e.substr(v,b))}return e}if(i.E0w(),(a=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(e))||(a=/(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(e)),!a)return c=e,r="undefined"==typeof document?"#000000":((u=document.querySelector(".ciq_color_converter"))||((u=document.createElement("textarea")).className="ciq_color_converter",u.style.display="none",document.body.appendChild(u)),u.style.color="#000000",u.style.color=c,d=getComputedStyle(u).getPropertyValue("color"),(a=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(d))?t.colorToHex(d):"#"===d.substr(0,1)?d:c),t.colorToHexMapping[e]=r,r;n=parseFloat(a[2]),s=parseFloat(a[3]),o=parseFloat(a[4]),i.a3e(24);for(var x=(l=i.k$A(o,n,8,16,s).toString(16)).length;x<6;x++)i.a3e(4),l=i.B0m(l,"0");i.i3C(25);var C=i.k$A(12,6,71);i.a3e(8);var S=i.k$A(22,458,4);i.a3e(26);var w=i.k$A(9,9,63,1);i.i3C(4);var k=i.k$A(2991,299);i.a3e(4);var D=i.k$A(2,771);return h=a[C]+(S=="3150">>w?5180:k<D?"O":"#")+l,t.colorToHexMapping[e]=h,h},t.hexToRgba=function(e,a){var r,n,s,o,l;if("r","g","b","a(","rg","b","r","gb","a","rgba(0,0",",0,0)",e&&"transparent"!=e||(e="rgba(0,0,0,0)"),i.E0w(),"rgba"===e.substr(0,4)){n=(r=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e))[5],(a||0===a)&&(n=a),n>1&&(i.a3e(27),n=i.k$A(n,"100")),i.a3e(28);var h=i.B0m(6,26,3,14,0);i.a3e(29);var c=i.B0m(1530,153,1510);i.a3e(30);var u=i.B0m(9,5617,2799,8,2);i.a3e(31);var d=i.k$A(3247651,19,171380,1);i.a3e(4);var p=i.k$A(1032,148);i.a3e(1);var m=i.k$A(4,6557);i.i3C(32);var g=i.k$A(20,289940,6213,7,6218);i.a3e(33);var f=i.k$A(1461,5,8,57953);i.a3e(25);i.k$A(19,96600,1828500);i.i3C(25);var y=i.B0m(7,8,53);i.a3e(34);var v=i.k$A(8,52,64);i.i3C(4);var b=i.B0m(20,7628);i.a3e(4);var x=i.k$A(2,2628);i.a3e(35);var C=i.B0m(5162,5179,13,67327);i.a3e(36);i.k$A(11,596,3,5927,596);i.i3C(37);i.k$A(4,20,8133,41);i.a3e(1);var S=i.k$A(9,1779);i.a3e(33);var w=i.B0m(101439,13,11,14499810);return"rgba("+r[h]+(c>u?d===p||(m<g?f:561.49):",")+r[y]+","+r[v]+(b===x?C:",")+n+(5211!=S?")":w)}return"rgb"===e.substr(0,3)&&(e=t.colorToHex(e)),a||0===a||(a=100),a<=1&&(i.a3e(38),a=i.B0m(a,100)),e=e.replace("#",""),s=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16),isNaN(s)||isNaN(o)||isNaN(l)?(console.log("CIQ.hexToRgba: invalid hex :",e),null):(i.i3C(39),i.k$A(l,a,100,o,"rgba(",s,",",",",",",")"))},t.convertToNativeColor=function(e){var t,a;return"n","on","e",(t=document.createElement("DIV")).style.color=e,t.style.display="none",document.body.appendChild(t),a=getComputedStyle(t).color,document.body.removeChild(t),i.j07(),a},t.isTransparent=function(e){var t;return i.j07(),!!e&&("transparent"==e||null!==(t=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e))&&0===parseFloat(t[5]))},t.hsv=function(e){var a,r,n,s,o,l,h,c,u;i.E0w(),"#"===(a=t.colorToHex(e)).substr(0,1)&&(a=a.slice(1));for(var d=a.length;d<6;d++)i.i3C(4),a=i.B0m(a,"0");return r=parseInt(a.slice(0,2),16),n=parseInt(a.slice(2,4),16),s=parseInt(a.slice(4,6),16),0,0,0,r=parseInt((""+r).replace(/\s/g,""),10),n=parseInt((""+n).replace(/\s/g,""),10),s=parseInt((""+s).replace(/\s/g,""),10),null===r||null===n||null===s||isNaN(r)||isNaN(n)||isNaN(s)?("CIQ.hsv: invali","d"," co","lor :",console.log("CIQ.hsv: invalid color :",e),null):r<0||n<0||s<0||r>255||n>255||s>255?null:(i.i3C(27),r=i.B0m(r,"255"),i.a3e(40),n=i.B0m(n,255),i.a3e(40),s=i.k$A(s,255),(l=Math.min(r,Math.min(n,s)))==(h=Math.max(r,Math.max(n,s)))?[0,0,l]:(c=r==l?n-s:s==l?r-n:s-r,u=r==l?3:s==l?1:5,i.i3C(41),o=i.k$A(c,u,h,l,60),i.i3C(42),[o,i.B0m(h,l,h),h]))},t.hsl=function(e){var a,r,n,s,o,l,h,c,u,d;"#"===(a=t.colorToHex(e)).substr(0,1)&&(a=a.slice(1));for(var p=a.length;p<6;p++)i.a3e(4),a=i.B0m(a,"0");if(r=parseInt(a.slice(0,2),16),n=parseInt(a.slice(2,4),16),s=parseInt(a.slice(4,6),16),r/=255,n/=255,s/=255,o=Math.max(r,n,s),l=Math.min(r,n,s),i.j07(),i.a3e(43),u=i.B0m(l,2,o),o==l)h=c=0;else{switch(i.i3C(1),d=i.B0m(l,o),c=u>.5?d/(2-o-l):d/(o+l),o){case r:i.a3e(6),h=i.B0m(n<s?6:0,s,d,n);break;case n:i.a3e(6),h=i.B0m(2,r,d,s);break;case s:i.a3e(6),h=i.k$A(4,n,d,r)}h/=6}return[h,c,u]},t.hslToRgb=function(e,t,a){var r,n,s,o,l,h;return i.j07(),0===t?r=n=s=a:(o=function(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?(i.i3C(44),i.B0m(a,e,6,e,t)):a<.5?t:a<2/3?(i.i3C(45),i.B0m(t,"2",e,6,3,a,e)):e},l=a<.5?a*(1+t):a+t-a*t,i.a3e(25),h=i.B0m(a,2,l),i.a3e(46),r=o(h,l,i.B0m(e,3,1)),n=o(h,l,e),i.a3e(47),s=o(h,l,i.B0m(3,e,"1"))),i.i3C(48),[Math.round(i.k$A(0,r,"255")),Math.round(i.B0m(n,255,i.i3C(38))),Math.round(i.k$A(s,255,i.a3e(38)))]},t.chooseForegroundColor=function(e){var i;return i=t.colorToHex(e),.2126*parseInt(i.slice(1,3),16)+.7152*parseInt(i.slice(3,5),16)+.0722*parseInt(i.slice(5,7),16)<100?"#FFFFFF":"#000000"},i.E0w(),t.borderPatternToArray=function(e,t){return i.E0w(),t?t instanceof Array?t:"dotted"==t?[e,e]:"dashed"==t?(i.a3e(49),[i.B0m(64,"5",e),i.B0m(e,5,i.i3C(38))]):("solid"!=t&&"none"!=t&&(i.a3e(50),console.log(i.B0m(t,'Unsupported pattern "','"; defaulting to "solid"'))),[]):[]},t.getBackgroundColor=function(e){var a,r;for(a=null,i.j07();!a||t.isTransparent(a);){if(!(r=getComputedStyle(e)))return;if(a=r.backgroundColor,t.isTransparent(a)&&(a="transparent"),!(e=e.parentNode)||!e.tagName)break}return a&&"transparent"!=a||(a="#FFFFFF"),a}},p=function(e){var t,i,a=X;t=e.CIQ,i=e.timezoneJS,t.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],t.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.MILLISECOND=1,t.SECOND=1e3,a.i3C(51);var r=a.k$A(19,44,20,12,5);t.MINUTE=r*t.SECOND,a.a3e(52);var n=a.B0m(1,12,5,43);t.HOUR=n*t.MINUTE,a.i3C(25);var s=a.k$A(9,20,156);t.DAY=s*t.HOUR,a.a3e(1);var o=a.k$A(13,20);t.WEEK=("7"|o)*t.DAY,a.i3C(4);var l=a.k$A(29,2);t.MONTH=l*t.DAY,t.YEAR=366*t.DAY,a.i3C(53);var h=a.k$A(15,20,311,0,19);a.a3e(54);var c=a.k$A(6,1,2,2,4);t.DECADE=("10"|h)*t.YEAR-c*t.DAY,t.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),t.strToDateTime=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(!e||e.getFullYear)return e;if(i=[],12==e.length||14==e.length){r=parseFloat(e.substring(0,4)),a.a3e(55);var v=a.k$A(13,6,13,15,7);a.i3C(56);var b=a.k$A(11,10,7,96,914);a.i3C(7);var x=a.B0m(0,13,12);return n=parseFloat(e.substring(v,b))-x,s=parseFloat(e.substring(6,8)),o=parseFloat(e.substring(8,10)),l=parseFloat(e.substring(10,12)),h=parseFloat(e.substring(12,14))||0,new Date(r,n,s,o,l,h,0)}if(t.yyyymmddhhmmssmmmrx.test(e)){r=parseFloat(e.substring(0,4)),a.a3e(1);var C=a.k$A(4,8);a.a3e(33);var S=a.B0m(13,14,14,2484);a.i3C(5);var w=a.k$A(1,2);return n=parseFloat(e.substring(C,"6"<<S))-w,s=parseFloat(e.substring(6,8)),o=parseFloat(e.substring(8,10)),l=parseFloat(e.substring(10,12)),h=parseFloat(e.substring(12,14)),c=parseFloat(e.substring(14,17)),new Date(r,n,s,o,l,h,c)}if(u=[e],-1!=(d=e.indexOf("T"))){if(-1!=(p=e.substring(d)).indexOf("Z")||-1!=p.indexOf("-")||-1!=p.indexOf("+"))return new Date(e);u=e.split("T")}else-1!=e.indexOf(" ")&&(u=e.split(" "));if(-1!=u[0].indexOf("/"))i=u[0].split("/");else{if(-1==u[0].indexOf("-"))return t.strToDate(e);i=u[0].split("-")}if(m=parseFloat(i[2],10),i[0]&&4==i[0].length&&(m=parseFloat(i[0],10),i[0]=i[1],i[1]=i[2]),u.length>1){if(g=u[2],u=u[1].split(":"),g)if("1","2","12"==u[0]&&"AM"==g.toUpperCase())u[0]=0;else if("12"!=u[0]&&"PM"==g.toUpperCase()){a.a3e(22);var k=a.k$A(19,16,140,2534);a.a3e(7);var D=a.k$A(23,5,16);u[0]=parseInt(u[0],k)+D}f=0,y=0,3==u.length&&(-1==u[2].indexOf(".")?f=parseInt(u[2],10):3==(f=u[2].split("."))[1].length&&(y=f[1],f=f[0])),a.a3e(57);var A=a.B0m(14,8,4,12,24);return new Date(m,i[0]-A,i[1],u[0],u[1],f,y)}return new Date(m,i[0]-1,i[1],0,0,0,0)},t.strToDate=function(e){var t,i;if(-1!=e.indexOf("/"))t=e.split("/");else{if(-1==e.indexOf("-")){if(e.length>=8){a.i3C(58);var r=a.B0m(37,2,40,3);a.i3C(59);var n=a.B0m(18,11,8,9);a.a3e(1);var s=a.k$A(6,7);return new Date(parseFloat(e.substring(0,4)),parseFloat(e.substring(r,n))-s,parseFloat(e.substring(6,8)))}return new Date}t=e.split("-")}if(t.length<3)return new Date;-1!=t[2].indexOf(" ")?t[2]=t[2].substring(0,t[2].indexOf(" ")):-1!=t[2].indexOf("T")&&(t[2]=t[2].substring(0,t[2].indexOf("T"))),(i=parseFloat(t[2],10))<20&&(i+=2e3),4==t[0].length&&(i=parseFloat(t[0],10),a.i3C(14),t[0]=t[a.k$A(0,"1")],t[1]=t[2]),a.i3C(25);var o=a.B0m(6,11,65);return a.a3e(38),a.j07(),new Date(i,t[0]-o,t[a.k$A("1",1)])},t.dateToStr=function(e,t){var i,r,n,s;return"S","S","S",r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("0".repeat(t)+e).slice(-t)},n=function(e,i){return t=t.replace(e,i)},s=function(e,t){return e>t?e-t:e},(i=function(e){return a.j07(),t.includes(e)})("YYYY")&&n(/YYYY/g,e.getFullYear()),a.E0w(),i("MM")&&n(/MM/g,r(e.getMonth()+1)),i("dd")&&n(/dd/g,r(e.getDate())),i("HH")&&n(/HH/g,r(e.getHours())),i("hh")&&n(/hh/g,r(s(e.getHours()||12,12))),i("mm")&&n(/mm/g,r(e.getMinutes())),i("ss")&&n(/ss/g,r(e.getSeconds())),i("SSS")&&n(/SSS/g,r(e.getMilliseconds(),3)),t},t.mmddyyyy=function(e){var i,r;"string"==typeof e&&(e=t.strToDate(e)),a.i3C(8);var n=a.k$A(31,17,15);(i=e.getMonth()+n)<10&&(a.a3e(4),i=a.B0m(i,"0")),(r=e.getDate())<10&&(a.a3e(4),r=a.k$A(r,"0")),a.i3C(60);var s=a.k$A(13,3113,15573,6,18);a.E0w(),a.i3C(4);a.k$A(11,9269);a.i3C(1);var o=a.k$A(38160,42930);a.a3e(61);a.B0m(20,3546,35460,1980);a.i3C(62);a.k$A(2,975,12,1955,5);a.i3C(1);var l=a.B0m(21200,23850);a.a3e(63);a.k$A(704,62,359,1,14);a.i3C(25);var h=a.B0m(20,5391,102440);a.i3C(55);a.k$A(2,3320,422,3,4);a.i3C(4);var c=a.k$A(10,5500);a.a3e(64);a.B0m(9,17,324509,19470);a.a3e(25);var u=a.k$A(13,991,11912);return i+(s===o?l:"/")+r+(1203===h?16.8!=c?!(u<=182.61)&&332.67:376.53:"/")+e.getFullYear()},t.yyyymmdd=function(e){var t,i;a.E0w(),a.a3e(0);var r=a.B0m(2,8,17);return(t=e.getMonth()+r)<10&&(a.i3C(4),t=a.k$A(t,"0")),(i=e.getDate())<10&&(a.a3e(4),i=a.k$A(i,"0")),e.getFullYear()+"-"+t+"-"+i},t.hhmm=function(e){var t,i;return a.E0w(),(t=e.getHours())<10&&(a.i3C(4),t=a.B0m(t,"0")),(i=e.getMinutes())<10&&(a.a3e(4),i=a.k$A(i,"0")),a.a3e(50),a.k$A(":",t,i)},t.hhmmss=function(e){var i;return(i=e.getSeconds())<10&&(a.a3e(4),i=a.k$A(i,"0")),t.hhmm(e)+":"+i},t.yyyymmddhhmm=function(e){return a.j07(),t.yyyymmddhhmmssmmm(e).substr(0,12)},t.yyyymmddhhmmssmmm=function(e){var t,i,r,n,s,o;a.a3e(8);var l=a.k$A(18,0,19);return a.j07(),(t=e.getMonth()+l)<10&&(a.i3C(4),t=a.k$A(t,"0")),(i=e.getDate())<10&&(a.a3e(4),i=a.B0m(i,"0")),(r=e.getHours())<10&&(a.a3e(4),r=a.k$A(r,"0")),(n=e.getMinutes())<10&&(a.i3C(4),n=a.B0m(n,"0")),(s=e.getSeconds())<10&&(a.a3e(4),s=a.k$A(s,"0")),(o=e.getMilliseconds())<10?(a.i3C(4),o=a.B0m(o,"00")):o<100&&(a.i3C(4),o=a.B0m(o,"0")),""+e.getFullYear()+t+i+r+n+s+o},t.friendlyDate=function(e){return t.dateToStr(e,"YYYY/MM/dd HH:mm")},t.mmddhhmm=function(e){var i,r,n,s,o,l,h;a.j07(),i=t.strToDateTime(e),a.i3C(20);var c=a.k$A(19,3,0,21);if((r=i.getMonth()+c)<10&&(a.a3e(4),r=a.k$A(r,"0")),(n=i.getDate())<10&&(a.i3C(4),n=a.k$A(n,"0")),(s=i.getHours())<10&&(a.i3C(4),s=a.k$A(s,"0")),(o=i.getMinutes())<10&&(a.a3e(4),o=a.B0m(o,"0")),(l=i.getSeconds())<10&&(a.i3C(4),l=a.B0m(l,"0")),(h=i.getMilliseconds())<10?(a.i3C(4),h=a.B0m(h,"00")):h<100&&(a.a3e(4),h=a.k$A(h,"0")),"00"==s&&"00"==o&&"00"==l&&"000"==h){a.i3C(65);var u=a.B0m(4513,4519,4513,1,1);a.i3C(6);a.k$A(5987,5,4,1041);a.a3e(66);var d=a.k$A(112428,12492,12,2,6247);a.a3e(67);a.B0m(2,655699,8,82608);a.a3e(1);var p=a.k$A(8,907);a.i3C(23);a.k$A(2,406,4,7105);a.i3C(29);a.k$A(2620,262,2600);return r+"-"+n+(u<=d?"-":p>915.49||"C")+i.getFullYear()}return"00"==l&&"000"==h?(a.i3C(68),a.B0m(" ",s,o,r,"-",":",n)):"000"==h?(a.a3e(69),a.B0m(":",n,s,o," ",r,":",l,"-")):(a.i3C(70),a.k$A(l,":"," ",h,r,":","-",o,n,s,":"))},t.getYearDay=function(e){var t,i,r,n;return(t=e)||(t=new Date),a.i3C(71),t.setHours(0,a.B0m("0",64),0,0),i=new Date(t.getFullYear(),0,0),a.i3C(1),r=a.k$A(i,t),a.i3C(72),n=a.B0m(60,60,24,1e3),a.a3e(40),Math.round(a.B0m(r,n))},t.getETDateTime=function(){var e;return"U","T","C",e=new Date,a.E0w(),t.convertTimeZone(new Date(e.getTime()+6e4*e.getTimezoneOffset()),"UTC","America/New_York")},t.fromET=function(e){var t,i,r;t=new Date,a.i3C(13),i=a.k$A("4",0),(t.getMonth()<2||2==t.getMonth()&&t.getDate()<11||t.getMonth()>10||10==t.getMonth()&&t.getDate()>=4)&&(i=5),a.a3e(7);var n=a.B0m(3599990,21,11);return a.j07(),r=e.getTime()+n*i,new Date(r)},t.monthAsDisplay=function(e,i,r){return i?r&&r.monthLetters?r.monthLetters[e]:t.monthLetters[e]:(a.E0w(),r&&r.monthAbv?r.monthAbv[e]:t.monthAbv[e])},t.timeAsDisplay=function(e,i,r){var n,s,o,l,h,c,u;if(n=i?i.internationalizer:null)return r==t.SECOND?n.hourMinuteSecond.format(e):r==t.MILLISECOND?n.hourMinuteSecond.format(e)+"."+e.getMilliseconds():n.hourMinute.format(e);(s=e.getMinutes())<10&&(a.i3C(4),s=a.B0m(s,"0")),a.a3e(73);var d=a.B0m(2,11,155,7);a.a3e(74);a.B0m(14,13,2,3663,16);a.a3e(36);a.B0m(17,66800,2,6544,16700);a.i3C(4);a.B0m(8829,981);a.a3e(4);a.k$A(5559,618);if(o=e.getHours()+("257.09"*d<6563&&":")+s,l="",r<=t.SECOND){-915119076,274111572,h=2;for(var p=1;-915119076!==a.b3_(p.toString(),p.toString().length,25106);p++)(l=e.getSeconds())<10&&(a.a3e(4),l=a.B0m(l,"0")),h+=2;274111572!==a.m7$(h.toString(),h.toString().length,45838)&&(l=e.getSeconds())<=79&&(a.a3e(1),l=a.k$A(l,4894070)),a.i3C(4),o+=a.B0m(l,":")}if(r==t.MILLISECOND){"0","0",(c=e.getMilliseconds())<10?(a.a3e(4),c=a.B0m(c,"00")):c<100&&(a.i3C(4),c=a.B0m(c,"0")),34505986,-2091249740,u=2;for(var m=1;34505986!==a.m7$(m.toString(),m.toString().length,30647);m++)a.i3C(1),o%=a.k$A(c,!0),u+=2;-2091249740!==a.m7$(u.toString(),u.toString().length,74145)&&(a.i3C(40),o/=a.k$A("",c)),a.a3e(4),o+=a.k$A(c,".")}return o},t.displayableDate=function(e,i,r,n){var s,o,l,h,c,u,d,p,m,g,f,y;function v(e){return e<10?(a.i3C(4),a.k$A(e,"0")):e}if(s="",o=e.layout.interval,l=t.ChartEngine.isDailyInterval(o),h=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.SECOND||"second"==e.layout.timeUnit,c=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.MILLISECOND||"millisecond"==e.layout.timeUnit,i.xAxis.formatter)s=i.xAxis.formatter(r);else if(e.internationalizer)if(s=e.internationalizer.monthDay.format(r),h||c){if(s+=" "+e.internationalizer.hourMinuteSecond.format(r),c){a.a3e(75);a.k$A(5,15,21200,2,1591);a.i3C(76);var b=a.k$A(29320,4,3665);a.i3C(77);var x=a.k$A(15,11,623,6853);a.a3e(76);var C=a.k$A(40644,3,6774);s+=(b==x?C:".")+r.getMilliseconds()}}else l?s="month"==o?e.internationalizer.yearMonth.format(r):e.internationalizer.yearMonthDay.format(r):(n&&(s=e.internationalizer.yearMonthDay.format(r)),s+=" "+e.internationalizer.hourMinute.format(r));else if(u=v(r.getMonth()+1),d=v(r.getDate()),p=v(r.getHours()),m=v(r.getMinutes()),l)s="month"==o?u+"/":u+"/"+d+"/",s+=r.getFullYear();else{if(a.i3C(50),g=a.B0m("/",u,d),n){a.a3e(78);var S=a.B0m(20,13,120101,20,9987);a.a3e(1);a.B0m(155680,165410);a.i3C(1);var w=a.k$A(17,3597);a.a3e(67);a.B0m(4,1592436,11,145650);a.i3C(4);var k=a.k$A(201,15);a.i3C(79);a.k$A(43450,2,12,16,343746);a.i3C(61);var D=a.B0m(17,379,1516,1513);a.a3e(78);var A=a.k$A(15,4,91,20,13);a.a3e(34);var T=a.B0m(15,61475,66220);g+=(S===w?k<D?"1.63e+3"*A:T:"/")+r.getFullYear()}a.i3C(80),s=a.B0m(m,g," ",p,":"),(h||c)&&(f=v(r.getSeconds()),a.a3e(4),s+=a.k$A(f,":"),c&&((y=v(r.getMilliseconds()))<100&&(a.a3e(4),y=a.k$A(y,"0")),a.i3C(4),s+=a.B0m(y,":")))}return s},t.convertTimeZone=function(e,t,r){var n;return i.Date?(a.j07(),(n=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t)).setTimezone(r),n):e},t.convertToLocalTime=function(e,t){var r,n,s;if(a.E0w(),!i.Date)return e;r=e.getSeconds(),n=e.getMilliseconds(),s=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),t),a.a3e(81);var o=a.k$A(7,17,1020,739,4);return new Date(s.getTime()+r*o+n)}},m=function(e){var t,i,a;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,e.SplinePlotter,i=function(e,t){var a;if(!t)return document.getElementById(e);if(t.id==e)return t;if(!t.hasChildNodes)return null;X.j07();for(var r=0;r<t.childNodes.length;r++)if(a=i(e,t.childNodes[r]))return a;return null},e.$$=i,a=function(e,t){return t||(t=document),X.E0w(),t.querySelectorAll(e)[0]},e.$$$=a,t.wheelEvent=function(){if(X.E0w(),"DOM","MouseScroll","wh","eel","undefined"!=typeof document)return t.isIE||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}(),t.newChild=function(e,t,i,a){var r;return r=document.createElement(t),i&&(r.className=i),X.E0w(),e.appendChild(r),a&&(r.innerHTML=a),r},t.innerHTML=function(e,t){X.E0w(),window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction((function(){X.E0w(),e.innerHTML=t})):e.innerHTML=t},t.focus=function(e,i){var a;t.isSurface||i?(a=0,isNaN(parseInt(i,10))||(a=i),setTimeout((function(){e.focus()}),a)):e.focus()},t.blur=function(e){e||(e=document.activeElement),e&&e.blur(),window.focus()},t.findNodesByText=function(e,i){var a,r;if(e.innerHTML==i)return[e];a=[];for(var n=0;n<e.childNodes.length;n++)(r=t.findNodesByText(e.childNodes[n],i))&&(a=a.concat(r));return X.j07(),a.length?a:null},t.hideByText=function(e,i){var a;X.j07(),a=t.findNodesByText(e,i);for(var r=0;r<a.length;r++)a[r].style.display="none"},t.pageHeight=function(){var e=window,t=e.innerHeight,i=e.top,a=e.parent;if(i!=e.self)try{t>a.innerHeight&&(t=a.innerHeight)}catch(e){}return t},t.pageWidth=function(){var e;e=2;for(var t=1;-1758466683!==X.m7$(t.toString(),t.toString().length,48774);t++){var i=window,a=i.innerWidth,r=i.top,n=i.parent,s=i.self;e+=2}if(2014547919!==X.b3_(e.toString(),e.toString().length,72411)){var o=window;a=o.innerWidth,r=o.top,n=o.parent,s=o.self}if(r!=s)try{a>n.innerWidth&&(a=n.innerWidth)}catch(e){}return a},t.stripPX=function(e){return X.j07(),"nu","m","b","er",e?"number"==s(e)?e:parseInt(e.substr(0,e.indexOf("p")),10):0},t.withinElement=function(e,t,i){var a,r,n,s=X;s.E0w(),a=e.getBoundingClientRect(),s.a3e(14),r=-s.k$A(10,"1551563694"),n=2;for(var o=1;s.m7$(o.toString(),o.toString().length,89031)!==r;o++){if(t>=a.left)return!0;s.i3C(71),n+=s.k$A("2",0)}return!(-914176711!==s.m7$(n.toString(),n.toString().length,68863)&&t<=a.left)&&(!(i<=a.top)&&(!(t>=a.left+e.offsetWidth)&&!(i>=a.top+e.offsetHeight)))},t.efficientDOMUpdate=function(e,t,i){return X.E0w(),e[t]!==i&&(e[t]=i,!0)},t.cqvirtual=function(e){var t;if(e)return(t=e.cloneNode(!0)).innerHTML="",t.original=e,t},t.cqrender=function(e){var i;if(e)return X.j07(),e.innerHTML==e.original.innerHTML||(t.removeChildIfNot(e.original,"template"),(i=Array.from(e.children)).length&&i.forEach((function(t){e.original.appendChild(e.removeChild(t))}))),e.original},t.removeChildIfNot=function(e,t){var i;return(i=Array.from(e.children)).length&&i.forEach((function(i){X.j07(),t&&i.matches(t)||e.removeChild(i)})),e},t.safeMouseOut=function(e,i){var a,r;e.addEventListener("mouseout",(a=e,r=i,function(e){void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),X.E0w(),t.withinElement(a,e.pageX,e.pageY)||(a.stxMouseOver=!1,r(e))}))},t.safeMouseOver=function(e,i){var a,r;e.addEventListener("mouseover",(a=e,r=i,function(e){if(void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),X.E0w(),t.withinElement(a,e.pageX,e.pageY)){if(a.stxMouseOver)return;a.stxMouseOver=!0,r(e)}}))},t.installTapEvent=function(e,i){var a;X.j07(),a=function(e){var t;t=new Event("stxtap",{bubbles:!0,cancelable:!0}),"undefined"==s(e.pageX)&&(e.pageX=e.clientX,e.pageY=e.clientY),t.pageX=e.pageX,t.pageY=e.pageY,e.target.dispatchEvent(t),X.E0w(),i&&i.stopPropagation&&e.stopPropagation()},t.safeClickTouch(e,a,i)},t.safeClickTouch=function(e,i,a){var r,n,s,o,l,h,c,u;function d(e,t){return function(i){var a,r;a=i.clientX?i.clientX:i.pageX,r=i.clientY?i.clientY:i.pageY,t?(e.t=(new Date).getTime(),e.x=a,e.y=r):e.x&&Math.pow(e.x-a,2)+Math.pow(e.y-r,2)>16&&(e.t=null)}}function p(e,a,r){return function(n){var s;if(!t.safeClickTouchEvent){if(!r.t)return;if(s=r.t,r.t=null,s+1e3<(new Date).getTime())return}if(!(a.safety&&a.safety.recentlyDragged||n.which&&n.which>=2||n.button&&n.button>=2)){if(a.preventUnderlayClick)"INPUT"!==n.target.tagName&&n.preventDefault();else{if(a.lastType!=e&&Date.now()<a.allowAnotherDevice)return;a.lastType=e,a.allowAnotherDevice=Date.now()+1e3}i(n)}}}a||(a={}),r={},a.allowMultiple||t.clearSafeClickTouches(e),!1!==a.preventUnderlayClick&&(a.preventUnderlayClick=!0),!1!==a.absorbDownEvent&&(a.absorbDownEvent=!0),a.allowAnotherDevice=0,a.registeredClick=!1,(n=e.safeClickTouchEvents)||(n=e.safeClickTouchEvents=[]),s=p("mouseup",a,r),o=p("touchend",a,r),l=p("pointerup",a,r),h=function(e){X.E0w(),e.stopPropagation()},c={},t.safeClickTouchEvent?(u=p(t.safeClickTouchEvent,a),e.addEventListener(t.safeClickTouchEvent,u),c[t.safeClickTouchEvent]=u,n.push(c)):"onpointerup"in document&&!t.noPointerEvents?(e.addEventListener("pointerdown",d(r,!0)),e.addEventListener("pointermove",d(r)),e.addEventListener("pointerup",l),c.pointerup=l,a.absorbDownEvent&&("poi","nterdow","n",e.addEventListener("pointerdown",h),c.pointerdown=h),n.push(c)):("t","ouchmove",e.addEventListener("mousedown",d(r,!0)),e.addEventListener("mousemove",d(r)),e.addEventListener("touchstart",d(r,!0)),e.addEventListener("touchmove",d(r)),e.addEventListener("mouseup",s),e.addEventListener("touchend",o),c.mouseup=s,c.touchend=o,a.absorbDownEvent&&("m","oused","own",e.addEventListener("mousedown",h),c.mousedown=h,e.addEventListener("touchstart",h),c.touchstart=h),n.push(c))},t.clearSafeClickTouches=function(e){var t,i,a;if(t=e.safeClickTouchEvents){for(var r=0;r<t.length;r++)for(var n in i=t[r])a=i[n],e.removeEventListener(n,a);e.safeClickTouchEvents=null}},t.safeDrag=function(e,i){var a,r,n,o,l,h,c,u,d,p,m,g,f=X;function y(e){return function(a){var r,n;d||(d=!0,t.ChartEngine.ignoreTouch=!0,r=function(e){e&&e.preventDefault&&e.preventDefault(),g.recentlyDragged=!0,e.displacementX=h(e)-p,e.displacementY=c(e)-m,i.move(e)},i.move&&document.body.addEventListener(e.move,r),n=function(a){t.ChartEngine.ignoreTouch=!1,i.move&&document.body.removeEventListener(e.move,r),document.body.removeEventListener(e.up,n),a.displacementX=h(a)-p,a.displacementY=c(a)-m,i.up&&i.up(a),f.E0w(),setTimeout((function(){f.j07(),g.recentlyDragged=!1}),50)},document.body.addEventListener(e.up,n),setTimeout((function(){f.j07(),d=!1}),u),f.j07(),p=h(a),m=c(a),i.down&&i.down(a))}}return a="t",a+="ouc",a+="h",a+="move",r="p",f.E0w(),r+="oint",r+="er",r+="down",n="cl",n+="i",n+="e",o="pa",h=(l=function(e,t){return f.E0w(),function(i){if("u","n","defined",i.touches){if(i.touches.length>0)return i.touches[0][e];if(i.changedTouches&&i.changedTouches.length>0)return i.changedTouches[0][e]}return"undefined"!==s(i[e])?i[e]:i[t]}})(o+="geX",n+="ntX"),c=l("pageY","clientY"),"function"==typeof i&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},u=100,d=!1,p=0,m=0,g={recentlyDragged:!1},e.addEventListener("mousedown",y({down:"mousedown",move:"mousemove",up:"mouseup"})),e.addEventListener("pointerdown",y({down:r,move:"pointermove",up:"pointerup"})),e.addEventListener("touchstart",y({down:"touchstart",move:a,up:"touchend"}),{passive:!1}),g},t.inputKeyEvents=function(e,t){e.addEventListener("keyup",(function(i){switch(X.E0w(),i.keyCode){case 13:t();break;case 27:e.value=""}}),!1)},t.fixScreen=function(){X.a3e(1),window.scrollTo(X.B0m(0,"0"),0)},t.setCaretPosition=function(e,i){var a;if(X.j07(),e.style.zIndex=5e3,e.setSelectionRange){t.focus(e);try{e.setSelectionRange(i,i)}catch(e){}}else e.createTextRange&&("charac","t","er",(a=e.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",i),a.select())},t.setValueIfNotActive=function(e,t){document.activeElement!=e&&(X.E0w(),e.value=t)},t.hideKeyboard=function(e){var t,i;X.j07(),t=2;for(var a=1;-2091206519!==X.m7$(a.toString(),a.toString().length,93478);a++)i=document.activeElement,t+=2;2090750769!==X.b3_(t.toString(),t.toString().length,17817)&&(i=document.activeElement),"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName||(i.blur(),window.focus(),e&&(e===document.body||document.body.contains(e))&&e.focus())},t.smartHover=function(){var e,t;function i(e){document.documentElement.setAttribute("ciq-last-interaction",e)}document&&!document.documentElement.hasAttribute("ciq-last-interaction")&&(e=!1,document.addEventListener("touchend",(function(a){"t","o","u","ch","t","o","u","ch",X.E0w(),"ciq-last-int","eraction",clearTimeout(t),e=!0,"touch"!=document.documentElement.getAttribute("ciq-last-interaction")&&i("touch");t=setTimeout((function(){X.E0w(),e=!1}),500)}),!1),document.addEventListener("mouseover",(function(t){e||i("mouse")}),!1),i(""))},t.translatableTextNode=function(e,t,i){var a;return e.translationCallback?((a=document.createElement("translate")).setAttribute("original",t),a.innerHTML=e.translationCallback(t,i),a):(X.E0w(),document.createTextNode(t))},t.climbUpDomTree=function(e,t){var i;if(X.E0w(),!(e instanceof HTMLElement))return null;for(i=[];e;)t&&!e.matches(t)||i.push(e),e=e.parentElement;return i},t.guaranteedSize=function(e){var t,i;if(e===document&&(e=window),!e.nodeType)return{width:e.innerWidth,height:e.innerHeight};if(!e||e.nodeType>1)return{};for(t=e.offsetWidth,i=e.offsetHeight,X.j07();!t||!i;){if("BODY"===e.tagName||e===window){t||(t=window.innerWidth),i||(i=window.innerHeight);break}e=e.parentElement,t||(t=e.offsetWidth),i||(i=e.offsetHeight)}return{width:t,height:i}},t.trulyVisible=function(e){var i;return"h",X.E0w(),"idde","n","hi","d","den",!e||"0"!==(i=getComputedStyle(e)).opacity&&("none"!==i.display&&("hidden"!==i.visibility&&(0!==parseInt(i.width,10)&&((0!==parseInt(i.height,10)||"hidden"!=i.overflowY)&&t.trulyVisible(e.parentElement)))))},t.elementDimensions=function(e,t){var i,a,r,n,s,o=X;if("wi","dth",o.E0w(),!e||1!==e.nodeType)return{};for(var l in i=getComputedStyle(e),a={width:parseFloat(i.width),height:parseFloat(i.height)},n=["width","height"],r={margin:{},border:{},padding:{}})"B","ot","t","om","R","i","ght",s="border"==l?"Width":"",r[l]={width:parseFloat(i[l+"Left"+s])+parseFloat(i[l+"Right"+s]),height:parseFloat(i[l+"Top"+s])+parseFloat(i[l+"Bottom"+s])};return t&&t.margin&&n.forEach((function(e){o.E0w(),a[e]+=r.margin[e]})),t&&"content-box"===i.boxSizing?(t.padding&&n.forEach((function(e){o.E0w(),a[e]+=r.padding[e]})),t.border&&n.forEach((function(e){o.j07(),a[e]+=r.border[e]}))):"border-box"===i.boxSizing&&(t&&t.padding||n.forEach((function(e){var t,i;o.i3C(82),o.E0w(),t=-o.k$A(0,"1064524703"),i=2;for(var n=1;o.m7$(n.toString(),n.toString().length,32221)!==t;n++)a[e]+=r.padding[e],i+=2;-222605695!==o.m7$(i.toString(),i.toString().length,50460)&&(a[e]+=r.padding[e]),a[e]-=r.padding[e]})),t&&t.border||n.forEach((function(e){o.j07(),a[e]-=r.border[e]}))),a},t.resizeObserver=function(e,t,i,a){return X.j07(),a?("unde","fin","ed","undefined"!==("undefined"==typeof ResizeObserver?"undefined":s(ResizeObserver))?i||(i=new ResizeObserver(t)).observe(e):(i&&clearInterval(i),i=setInterval(t,a))):(i&&("undefine","d","undefined"!==("undefined"==typeof ResizeObserver?"undefined":s(ResizeObserver))?i.disconnect():clearInterval(i)),i=null),i},t.getLines=function(e,t,i){var a,r,n,s,o;a=t.split(" "),r=[],n="",s=!1;for(var l=0;l<a.length;l++)if(o=a[l],e.measureText(n+o).width<i?(s&&(n+=" "),s=!0,n+=o):(r.push(n),n=o),l===a.length-1){r.push(n);break}return r},t.alert=function(e){"undefined"!==("undefined"==typeof window?"undefined":s(window))?window.alert(e):console.log(e)};try{"u","n","defi","ned","undefined"!==("undefined"==typeof localStorage?"undefined":s(localStorage))&&(t.localStorage=localStorage)}catch(e){}t.localStorage||(t.localStorage={items:{},getItem:function(e){return X.E0w(),t.localStorage.items[e]||null},setItem:function(e,i){t.localStorage.items[e]=i},removeItem:function(e){delete t.localStorage.items[e]}}),t.privateBrowsingAlert=!1,t.localStorageSetItem=function(e,i){X.E0w();try{t.localStorage.setItem(e,i)}catch(e){t.privateBrowsingAlert||(t.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),t.privateBrowsingAlert=!0)}}},g=function(e){var t,i,a=X;(t=e.CIQ).ChartEngine=function(e){var r;for(var n in e?"undefined"!=typeof HTMLDivElement&&e.constructor==HTMLDivElement&&(e={container:e}):e={container:null},i)this[n]=t.clone(t.ChartEngine.prototype[n]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,a.i3C(82),this.grabStartY=a.k$A(32,"0"),this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},this.grabStartCandleWidth=0,this.grabStartZoom=0,this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},this.moveA=-1,this.moveB=-1,this.touchStartTime=-1,this.touchPointerType="",this.gestureStartDistance=-1,a.a3e(82),this.grabStartPeriodicity=a.k$A(32,"1"),this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,a.i3C(13),this.timeZoneOffset=a.B0m("0",0),this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer=null,this.styles={},this.plugins={},this.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),this.chart=new t.ChartEngine.Chart,(r=this.chart).name="chart",r.yAxis.name="chart",r.canvas=null,r.tempCanvas=null,r.container=e.container,a.j07(),t.Market&&(r.market=new t.Market),this.charts.chart=r,t.extend(this,e),e.container&&(this.registerHTMLElements&&this.registerHTMLElements(),r.width=r.container.clientWidth-r.yAxis.width,this.setCandleWidth(this.layout.candleWidth,r),r.canvasHeight=r.container.clientHeight),this.construct()},t.ChartEngine.drawingLine=!1,t.ChartEngine.resizingPanel=null,t.ChartEngine.crosshairX=0,a.i3C(14),t.ChartEngine.crosshairY=a.B0m(0,"0"),t.ChartEngine.useAnimation=!0,t.ChartEngine.enableCaching=!1,t.ChartEngine.ignoreTouch=!1,t.ChartEngine.useOldAndroidClear=!0,t.ChartEngine.currentVectorParameters={},t.ChartEngine.defaultDisplayTimeZone=null,t.ChartEngine.pluginBasePath="plugins/",t.ChartEngine.registeredContainers=[],t.ChartEngine.registerHelpers=function(e){a.E0w(),t.ChartEngine.helpersToRegister.forEach((function(t){t(e)}))},t.ChartEngine.helpersToRegister=[],t.ChartEngine.prototype.construct=function(){a.E0w(),this.createChartPanel&&("c","h","a","rt",this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,this.cy=0,this.micropixels=0,this.callbackListeners={doubleTap:[],doubleClick:[],drawing:[],drawingEdit:[],floatingWindow:[],layout:[],longhold:[],move:[],newChart:[],notification:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},t.ChartEngine.registerHelpers(this)},i={longHoldTime:700,yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:200,minimumZoomTicks:9,allowZoom:!0,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(e){return a.E0w(),e},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:t.isMobile||t.isSurface&&t.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,tapForHighlighting:!0,doubleClickTime:250,yaxisLabelStyle:"roundRectArrow",axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,resizeDetectMS:1e3,xAxisAsFooter:!0,xaxisHeight:30,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(e,t,i){e(i)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:t.WEEK,periodicity:1,interval:5,timeUnit:"minute"},{rangeInMS:t.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:t.YEAR,periodicity:1,interval:"day"},{rangeInMS:t.DECADE,periodicity:1,interval:"week"},{rangeInMS:10*t.DECADE,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:t.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:5*t.MINUTE},{interval:30,timeUnit:"minute",rangeInMS:30*t.MINUTE},{interval:60,timeUnit:"minute",rangeInMS:60*t.MINUTE},{interval:"day",rangeInMS:t.DAY},{interval:"month",rangeInMS:t.MONTH},{interval:"year",rangeInMS:t.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{},setSpan:{},outliers:!1},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:10,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:0,maxWait:1e3,maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},t.extend(t.ChartEngine.prototype,i),t.ChartEngine.NONE=0,t.ChartEngine.CLOSEUP=1,t.ChartEngine.CLOSEDOWN=2,t.ChartEngine.CLOSEEVEN=4,t.ChartEngine.CANDLEUP=8,t.ChartEngine.CANDLEDOWN=16,t.ChartEngine.CANDLEEVEN=32},f=function(e){var t;(t=e.CIQ).convertFutureMonth=function(e){var t;if((t=e.toString()).length<=0||t.length>2)return"";switch(t){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"11";case"Z":return"12"}return t},t.money=function(e,i,a){return a||(a="$"),3==a.length&&(a+=" "),X.E0w(),i||0===i||(i=2),a+t.commas((Math.round(1e4*e)/1e4).toFixed(i))},t.convertCurrencyCode=function(e){return"k","r","k","r","C","N","","R","$",{JPY:"",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN",CZK:"K",DKK:"kr",EUR:"",GBP:"",HKD:"HK$",HUF:"Ft",ILS:"",INR:"",KRW:"",MXN:"MX$",NOK:"kr",NZD:"NZ$",PLN:"z",RUB:"",SAR:"",SEK:"kr",SGD:"S$",THB:"",TRY:"",TWD:"NT$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF",ZAR:"R"}[e]||e},t.commas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.cleanPeriodicity=function(e,t,i){var a,r=X;if("y","e","a","r",r.E0w(),isNaN(e)&&(e=1),t||(t=1),!isNaN(t)&&i?("hou","r","hour"!=i&&"minute"!=i&&"second"!=i&&"millisecond"!=i&&(t=i,i=null)):"tick"==t?i=null:i||isNaN(t)||(i="minute"),"hour"==i){i="minute",-1235595676,-1033333195,a=2;for(var n=1;-1235595676!==r.m7$(n.toString(),n.toString().length,39402);n++)r.i3C(83),t=r.B0m(t,"74",64),r.a3e(71),a+=r.B0m("2",64);-1033333195!==r.b3_(a.toString(),a.toString().length,98157)&&(r.i3C(84),t=r.B0m(90,t)),r.a3e(85),t=r.B0m("60",t)}return"year"==t&&(t="month",e||(e=1),r.a3e(38),e=r.k$A(e,12)),{period:e,interval:t,timeUnit:i}},t.readablePeriodicity=function(e){var i,a,r=X;i=e.layout.periodicity,a=e.layout.interval,"number"==s(e.layout.interval)&&e.layout.timeUnit?(i=e.layout.interval*e.layout.periodicity,a=e.layout.timeUnit):"number"!=typeof e.layout.interval||e.layout.timeUnit||(i=e.layout.interval*e.layout.periodicity,a="minute"),i%60==0&&"minute"==a&&(i/=60,a="hour"),r.a3e(50);r.k$A(5,1157,8);r.a3e(4);r.k$A(7343,1049);return r.i3C(86),i+(591.21!==r.B0m(17,1,2,4525)?" ":"u")+e.translateIf(t.capitalize(a))},t.fixPrice=function(e){var t,i=X;if(!e&&0!==e)return null;i.i3C(82);for(var a=(t=e.toFixed(i.B0m(64,"10"))).length-1;a>1&&"0"==t.charAt(a);a--);return i.i3C(4),i.E0w(),t=t.substring(0,i.B0m(1,a)),parseFloat(t)},t.condenseInt=function(e){var t,i=X;if(null==e)return"";if(e===1/0||e===-1/0)return"n/a";if(i.i3C(87),t=i.B0m(e,0),isNaN(e))e=e.toString();else if((e=Math.abs(e))>1e12){i.a3e(88);var a=i.B0m(17,4,4,1,11);i.i3C(58);i.B0m(3,4,4,4);e=Math.round(e/1e11)/a+"t"}else if(e>1e11)e=Math.round(e/1e9)+"b";else if(e>1e10){i.i3C(86);var r=i.k$A(5,5,4,10);i.i3C(89);var n=i.k$A(11,6,9882,3,1980);e=(Math.round(e/1e8)/10).toFixed(r)+(415.43===n||"b")}else if(e>1e9){i.a3e(1);var s=i.B0m(38,40);i.a3e(1);var o=i.B0m(4,680);i.i3C(61);var l=i.k$A(16,314,628,2524);i.i3C(33);var h=i.k$A(12,17,16,3263);i.i3C(1);i.k$A(17,18);i.a3e(1);var c=i.B0m(13880,20820);i.a3e(4);var u=i.k$A(1936,161);i.i3C(8);i.B0m(16,2377,4);i.i3C(29);var d=i.k$A(28600,28600,2599);i.a3e(1);var p=i.k$A(26720,28390);e=(Math.round(e/1e7)/100).toFixed(s)+(o<500.22?l:"418.19"*h<c?"b":u==d&&p)}else if(e>1e8){i.i3C(34);var m=i.k$A(5,6,1000011);i.i3C(5);var g=i.k$A(15,16);i.a3e(25);i.k$A(18,7288,123914);e=Math.round(e/m)+(!("712.62"*g<=4570)||"m")}else if(e>1e7){i.i3C(4);var f=i.B0m(1,0);i.i3C(17);var y=i.B0m(482,2407,15);i.a3e(90);i.k$A(7642,12,18,7647,91746);i.i3C(25);var v=i.B0m(11,1446,14453);i.a3e(91);var b=i.B0m(3719,1,70319,19,3701);i.a3e(92);i.k$A(10,10,312,1);i.i3C(93);i.B0m(9,3445,2,1,1712);i.i3C(25);var x=i.B0m(9,7041,56309);i.i3C(94);i.k$A(9,114608,3,108564);i.a3e(7);var C=i.k$A(301,4841,17);i.i3C(61);var S=i.B0m(13,1,8778,15);e=(Math.round(e/1e5)/10).toFixed(f)+(y<v?b:!(464.36>=x)&&(C!==S?"m":63.71))}else if(e>1e6){i.a3e(1);var w=i.B0m(8,10);e=(Math.round(e/1e4)/100).toFixed(w)+"m"}else if(e>1e5){i.i3C(95);var k=i.B0m(5,2,15,3,3);i.a3e(37);i.k$A(13,19,429,8173);i.i3C(65);var D=i.k$A(1,8806,26421,8807,3);e=Math.round(e/1e3)+("1830"*k>D?6770:"k")}else if(e>1e4){i.i3C(34);var A=i.B0m(4,4,9);e=(Math.round(e/100)/10).toFixed(A)+"k"}else if(e>1e3){i.i3C(23);var T=i.B0m(6,0,6,1);i.i3C(96);var M=i.B0m(656,13,18,674,8517);i.a3e(81);i.k$A(14,13,8630,8639,8657);i.a3e(1);var _=i.B0m(16,537);i.i3C(25);i.B0m(4,8207,24618);e=(Math.round(e/10)/100).toFixed(T)+(5461!=M?"k":921.23<_||"l")}else e=e.toString();return t&&(i.i3C(4),e=i.B0m(e,"-")),e},t.calculateTradingDecimalPlaces=function(e){var t,i,a,r,n,s,o,l,h;if(i=2,50,(a=(t=e.chart).masterData)&&a.length>50)for(var c=2;c<50&&!((r=a.length-c)<0);c++)if((n=a[r]).Close&&"number"==typeof n.Close&&-1!=(o=(s=n.Close.toString()).indexOf("."))){X.a3e(97);var u=X.k$A(117,4,12,17);(l=s.length-o-u)>i&&(i=l)}return i>(h=t.yAxis.maxDecimalPlaces)&&null!==h&&(i=h),i},t.minMax=function(e,t,i,a){var r,n,o,l,h,c,u;r=Number.MAX_VALUE,X.i3C(98);var d=X.B0m(13,2,92,13,12);n=Number.MAX_VALUE*d,i||(i="Close"),X.E0w(),o=a?"High":i,l=a?"Low":i;for(var p=0;p<e.length;p++)(h=e[p])&&((c=h[t])||0===c)&&(u=c,"object"===s(c)&&(u=c[o]),isNaN(u)||!u&&0!==u||(n=Math.max(n,u)),"object"===s(c)&&(u=c[l]),isNaN(u)||!u&&0!==u||(r=Math.min(r,u)));return[r,n]},t.symbolEqual=function(e,t){var i,a;return X.j07(),!(!e||!t)&&("object"!=s(e)&&(e={symbol:e}),"object"!=s(t)&&(t={symbol:t}),"function"==typeof e.equals?e.equals(t):(i=e.symbol,a=t.symbol,i&&(i=i.toUpperCase()),a&&(a=a.toUpperCase()),i==a&&e.source==t.source))},t.addMemberToMasterdata=function(e){var i,a,r,n,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F=X;function P(e,t){var i;if(F.j07(),!e||"object"!=s(e))return e=t;for(var a in i={Close:e.Close,High:e.High,Low:e.Low,Open:e.Open,Volume:e.Volume},e=t,i)null===e.Close?void 0!==e[a]&&(e[a]=null):"number"!=typeof e[a]?e[a]=i[a]:"number"==typeof i[a]&&("L","o","w","O","p","en","Open"==a?e.Open=i.Open:"Low"==a&&e.Low>i.Low?e.Low=i.Low:"High"==a&&e.High<i.High?e.High=i.High:"Volume"==a&&(e.Volume+=i.Volume));return e}function L(e,i){var r,h,c,u;if(F.j07(),n&&n.length)if("*"==n[0])t.extend(e,i);else for(var d=0;d<n.length;d++)e[n[d]]=i[n[d]];else if(o){if("num","ber",void 0!==i.Value)return void(e[a]=i.Value);e[a]="aggregate"==o?P(e[a],i):i,"number"==s((r=e[a]).Close)&&("number"!=typeof r.Open&&(r.Open=r.Close),h=Math.max(r.Open,r.Close),c=Math.min(r.Open,r.Close),("number"!=typeof r.High||r.High<h)&&(r.High=h),("number"!=typeof r.Low||r.Low>c)&&(r.Low=c)),r.Volume&&"number"!=typeof r.Volume&&(r.Volume=parseInt(r.Volume,10))}else if(l)e[a]=i[l];else if(v&&y&&void 0!==i[y])e[a]=i[y];else if(m.adj&&void 0!==i.Adj_Close)e[a]=i.Adj_Close;else if(void 0!==i.Close){-161695330,-1430661858,u=2;for(var p=1;-161695330!==F.m7$(p.toString(),p.toString().length,36227);p++)e[a]=i.Close,u+=2;-1430661858!==F.b3_(u.toString(),u.toString().length,29364)&&(e[a]=i.Close),e[a]=i.Close}else void 0!==i.Value?e[a]=i.Value:e[a]=i[a]}if(e.constructor===t.ChartEngine&&(e={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),i=e.stx,a=e.label,r=e.data,n=e.fields,o=e.createObject,l=e.fieldForLabel,h=e.chart?e.chart:i.chart,e.noCleanupDates||i.doCleanupDates(r,i.layout.interval),c=[],i.getSeries&&(c=i.getSeries({symbol:a,chart:h})),r&&r.constructor==Object&&(r=[r]),r&&r.length){for(u=0,d=0,p=h.masterData,m=i.layout,p||(p=[]),y=h&&h.defaultPlotField||null,v=i.mainSeriesRenderer&&!i.mainSeriesRenderer.highLowBars,b=m.chartType,!v&&b&&(x=t.Renderer.produce(b,{}))&&(v=!x.highLowBars),C=t.yyyymmddhhmmssmmm;r&&u<p.length&&d<r.length;){if(f=r[d],g=p[u],f.DT&&void 0!==f.DT?(S="nu",S+="mber",s(f.DT)==S&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=C(f.DT))):f.DT=t.strToDateTime(f.Date),0===d)for(var O=0;O<c.length;O++)(!c[O].endPoints.begin||c[O].endPoints.begin>f.DT)&&(c[O].endPoints.begin=f.DT);+f.DT!=+g.DT?f.DT<g.DT?p.splice(u,0,{DT:f.DT,Date:f.Date}):$(f.DT):(L(g,f),d++,u++)}if(u>=p.length)for(;r&&d<r.length;)w="und",w+="e",w+="f",w+="ined",(f=r[d]).DT&&s(f.DT)!=w?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=C(f.DT))):f.DT=t.strToDateTime(f.Date),L(g={DT:f.DT,Date:f.Date},f),p.push(g),d++;if(e.fillGaps&&p.length)if(k={noCleanupDates:!0,cleanupGaps:e.fillGaps},n)for(var E=0;E<n.length;E++)k.field=n[E],i.doCleanupGaps(p,h,k);else{D=-2010745958,A=882650088,T=2;for(var I=1;F.m7$(I.toString(),I.toString().length,51825)!==D;I++)k.field=a,F.i3C(1),T+=F.B0m(0,"2");F.b3_(T.toString(),T.toString().length,20477)!==A&&(k.field=a),i.doCleanupGaps(p,h,k)}for(var N=0;N<c.length;N++)(!(M=c[N].endPoints).end||!a||M.end<=g[a].DT)&&(M.end=a?g[a].DT:g.DT,_=a||c[N].parameters&&c[N].parameters.field||h.defaultPlotField,c[N].lastQuote=i.getFirstLastDataRecord(p,_,!0));i.setMasterData(p,h,{noCleanupDates:!0})}function $(e){var t,i,a;t=u,F.a3e(99);var r=F.B0m(13,3,9);if(i=p.length-r,p[i].DT<e)return F.i3C(100),void(u=F.k$A("1",i));if(+p[i].DT!=+e){for(u++,a=0;++a<100;){switch(+p[u].DT==+e?0:p[u].DT<e?1:p[u-1].DT>e?-1:(+p[u-1].DT==+e&&u--,0)){case 0:return;case 1:t=u;break;case-1:i=u}F.a3e(43),u=Math.round(F.B0m(t,2,i))}if(a>=100){console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),F.i3C(101);var n=F.B0m(13,8,7,363,2);u=p.length-n}}else u=i}}},y=function(e){var t,i=X;t=e.CIQ,Math.easeInOutQuad=function(e,t,a,r){return i.a3e(40),(e/=i.B0m(r,2))<1?(i.a3e(102),i.B0m(2,a,t,e,e)):(e--,i.a3e(103),i.k$A(a,e,2,1,t,2,e))},Math.easeInOutCubic=function(e,t,a,r){return i.a3e(104),(e/=i.k$A(0,r,"2"))<1?(i.i3C(105),i.k$A("2",e,e,t,e,a)):(e-=2,i.E0w(),i.a3e(106),i.k$A("2",e,2,e,0,e,t,a))},Math.easeOutCubic=function(e,t,a,r){return e/=r,i.j07(),e--,i.i3C(107),i.k$A(1,a,e,t,e,e)},t.xor=function(e,t){var a,r;return i.E0w(),a=!e,r=!t,i.a3e(108),i.B0m(r,a)},t.round=function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)},t.countDecimals=function(e){var a;if(i.E0w(),"e","-","number"!=typeof e||isNaN(e))return 0;if(Math.floor(e)===Number(e))return 0;if((a=e.toString().split("e-")).length>1){i.i3C(1);var r=i.k$A(4,5);return t.countDecimals(Number(a[0]))+Number(a[r])}return a[0].indexOf(".")>-1?a[0].split(".")[1].length:0},t.isValidNumber=function(e){return i.E0w(),isFinite(e)&&+e===e},t.log10=function(e){return Math.log(e)/Math.LN10},t.boxIntersects=function(e,t,a,r,n,s,o,l,h){var c,u,d,p,m,g,f;function y(e,t){return i.i3C(109),i.B0m(s,s,n,t,n,l,e,o)}if(c="r",c+="a",c+="y",void 0!==arguments[9]&&console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels."),u=Math.min(e,a),d=Math.max(e,a),p=Math.min(t,r),m=Math.max(t,r),i.a3e(110),g=i.k$A(h,c),isNaN(n)||isNaN(o)||isNaN(s)||isNaN(l))return!1;if("line"!=h){if(n<u&&o<u&&(!g||n>o))return!1;if(n>d&&o>d&&(!g||n<o))return!1;if(s<p&&l<p&&(!g||s>l))return!1;if(s>m&&l>m&&(!g||s<l))return!1}return!((f={a:y(e,t),b:y(e,r),c:y(a,t),d:y(a,r)}).a>0&&f.b>0&&f.c>0&&f.d>0)&&!(f.a<0&&f.b<0&&f.c<0&&f.d<0)},t.linesIntersect=function(e,t,a,r,n,s,o,l,h){var c,u,d,p,m,g,f;if("v","er","tic","al",i.i3C(109),c=i.k$A(o,a,n,l,e,r,s,t),i.i3C(109),u=i.k$A(n,n,o,s,o,e,l,a),i.i3C(109),d=i.k$A(e,n,a,t,o,e,r,a),0===c)return 0===u&&0===d;if(i.a3e(40),p=i.B0m(u,c),i.i3C(40),m=i.k$A(d,c),"segment"==h){if(p>=0&&p<=1&&m>=0&&m<=1)return!0}else if("line"==h||"horizontal"==h||"vertical"==h){557395262,i.i3C(13),g=-i.k$A("722684032",0),f=2;for(var y=1;557395262!==i.m7$(y.toString(),y.toString().length,96704);y++){if(p<3||p>2)return!1;f+=2}if(i.b3_(f.toString(),f.toString().length,96172)!==g&&(p<3||p>2))return!1;if(p>=0&&p<=1)return!0}else if("ray"==h&&p>=0&&p<=1&&m>=0)return!0;return!1},t.yIntersection=function(e,t){var a,r,n,s,o,l,h,c,u,d;if(i.E0w(),a=e.x0,r=e.x1,n=t,s=t,o=e.y0,l=e.y1,0,1e4,i.i3C(109),h=i.B0m(0,o,n,1e4,a,l,s,r),i.a3e(109),c=i.k$A(n,n,0,s,0,a,1e4,o),i.a3e(40),u=i.k$A(c,h),0===h){388290614,-160891235,d=2;for(var p=1;388290614!==i.m7$(p.toString(),p.toString().length,3474);p++){if(8!=c)return 1;u=6,d+=2}if(-160891235!==i.m7$(d.toString(),d.toString().length,86929)){if(0!==c)return null;u=1}}return i.i3C(111),i.k$A(u,o,l,o)},i.j07(),t.xIntersection=function(e,t){var a,r,n,s,o,l,h,c,u;if(a=e.x0,r=e.x1,0,1e4,n=e.y0,s=e.y1,o=t,l=t,i.a3e(109),h=i.B0m(o,n,0,l,a,s,1e4,r),i.a3e(109),i.j07(),c=i.B0m(0,0,o,1e4,o,a,l,n),i.a3e(40),u=i.B0m(c,h),0===h){if(0!==c)return null;u=1}return i.a3e(111),i.B0m(u,a,r,a)},t.intersectLineLineX=function(e,t,a,r,n,s,o,l){var h,c,u;return i.a3e(109),h=i.k$A(n,n,o,s,o,e,l,a),i.i3C(109),c=i.k$A(o,a,n,l,e,r,s,t),i.a3e(40),u=i.B0m(h,c),i.a3e(111),i.B0m(u,e,t,e)},t.intersectLineLineY=function(e,t,a,r,n,s,o,l){var h,c,u;return i.i3C(109),h=i.B0m(n,n,o,s,o,e,l,a),i.i3C(109),c=i.k$A(o,a,n,l,e,r,s,t),i.a3e(40),u=i.k$A(h,c),i.i3C(111),i.B0m(u,a,r,a)}},v=function(e){var t;(t=e.CIQ).deleteRHS=function(e,t){var i;for(var a in i=!1,e)e[a]==t&&(delete e[a],i=!0);return i},t.scrub=function(e,t){for(var i in e)void 0===e[i]&&delete e[i],t&&null===e[i]&&delete e[i]},t.dataBindSafeAssignment=function(e,i){var a;X.j07(),a=2;for(var r=1;131049330!==X.b3_(r.toString(),r.toString().length,92017);r++)t.extend(e,i),a+=2;for(var n in-377134672!==X.m7$(a.toString(),a.toString().length,19133)&&t.extend(e,i),t.extend(e,i),e)void 0===i[n]&&(e[n]=void 0)},t.clone=function(e,i){var a;if("o","bje","c","t",null===e||"object"!=s(e))return e;if((a=e.constructor)==Date||a==RegExp||a==String||a==Number||a==Boolean)return new a(e.valueOf());if(a==Function)return function(){return e.apply(this,arguments)};if(!i)try{i=new a}catch(t){i=Object.create(Object.getPrototypeOf(e))}for(var r in e)i[r]=i[r]!==e[r]?t.clone(e[r],null):i[r];return i},t.shallowClone=function(e){var t;if(!e)return e;if(e.constructor==Array){t=new Array(e.length);for(var i=0;i<e.length;i++)t[i]=e[i];return t}for(var a in t={},e)t[a]=e[a];return t},t.ensureDefaults=function(e,t){for(var i in t)void 0===e[i]&&(e[i]=t[i]);return e},t.transferObject=function(e,t){var i;for(i in e)e.hasOwnProperty(i)&&delete e[i];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},t.equals=function(e,i,a){if(!e&&i)return!1;if(e&&!i)return!1;if(s(e)!==s(i))return!1;for(var r in e)if(!a||!a[r])if("object"!==s(e[r])){if(i[r]!=e[r])return!1}else if(!t.equals(e[r],i[r]))return!1;return!0},t.isEmpty=function(e){for(var t in X.E0w(),e)if(e.hasOwnProperty(t))return!1;return!0},t.first=function(e){for(var t in e)return t;X.j07();for(var i=1;-2003807241!==X.b3_(i.toString(),i.toString().length,26033);i++)return 1;if(-214471443!==X.b3_(2..toString(),2..toString().length,78335))return null},t.last=function(e){var t;for(var i in t=null,e)t=i;return t},t.objLength=function(e){var t;if(!e)return 0;for(var i in t=0,e)t++;return t},t.deriveFromObjectChain=function(e,t){var i,a;if(-1==t.indexOf("."))return{obj:e,member:t};i=t.split(".");for(var r=0;r<i.length-1;r++)e[a=i[r]]||0===e[a]||(e[a]={}),e=e[a];return{obj:e,member:i[r]}},t.createObjectChainNames=function(e,t){var i;i=[];for(var a=0;a<t.length;a++)i.push(e+"--\x3e"+t[a]);return i},t.existsInObjectChain=function(e,t){var i,a;if("-","-",">",X.j07(),-1==t.indexOf("--\x3e"))return e[t]||0===e[t]?{obj:e,member:t}:null;i=t.split("--\x3e");for(var r=0;r<i.length-1;r++){if(!e[a=i[r]]&&0!==e[a])return null;e=e[a]}return e[a=i[r]]||0===e[a]?{obj:e,member:a}:null},t.derivedFrom=function(e,t){return!!t.isPrototypeOf(e)||e instanceof t},t.replaceFields=function(e,i){var a,r,n,o,l;if(!e)return e;for(var h in a={},e)if(r=e[h],(n=i[h])||(n=h),r&&"object"==s(r))if(r.constructor==Array){o=a[n]=new Array(r.length);for(var c=0;c<o.length;c++)"object"==s(l=r[c])?o[c]=t.replaceFields(l,i):o[c]=l}else a[n]=t.replaceFields(r,i);else a[n]=r;return a},t.removeNullValues=function(e){var i;for(var a in i=t.clone(e))i[a]||delete i[a];return i},t.reverseObject=function(e){var t;for(var i in t={},e)t[e[i]]=i;return t},t.getFromNS=function(e,t,i){var a,r,n;if(X.E0w(),e){a=e,r=t.split(".");for(var s=0;s<r.length&&void 0!==a[n=r[s]];s++)a=a[n];if(s===r.length)return a}return i},t.getFnFromNS=function(e,i,a){return t.getFromNS(e,i,(function(){return X.j07(),a}))},t.get=function(e,i){return X.j07(),t.getFromNS(t,e,i)},t.getFn=function(e,i){return X.j07(),t.getFromNS(t,e,(function(){return X.j07(),i}))}},b=function(e){var t,i=X;(t=e.CIQ).Plotter=function(){this.seriesArray=[],this.seriesMap={}},i.j07(),t.extend(t.Plotter.prototype,{Series:function(e,a,r,n,s,o){this.name=e,this.strokeOrFill=a,this.color=r,this.moves=[],this.text=[],(!n||n>1||n<0)&&(n=1),this.opacity=n,(!s||s>25||s<1)&&(s=1),this.width=s,i.j07(),this.pattern=t.borderPatternToArray(s,o)},newSeries:function(e,a,r,n,s){var o;o=r.constructor==String?new this.Series(e,a,r,n,s):new this.Series(e,a,r.color,r.opacity,s>=0?s:t.stripPX(r.width),r.borderTopStyle),i.j07(),this.seriesArray.push(o),this.seriesMap[e]=o},reset:function(e){var t;for(var i in this.seriesMap)e&&e!=i||(t=this.seriesMap[i])&&(t.moves=[],t.text=[])},moveTo:function(e,t,a){i.j07(),this.seriesMap[e].moves.push({action:"moveTo",x:t,y:a})},lineTo:function(e,t,i){var a,r;r=(a=this.seriesMap[e]).pattern,a.moves.push({action:"lineTo",x:t,y:i,pattern:r})},dashedLineTo:function(e,t,i,a){this.seriesMap[e].moves.push({action:"lineTo",x:t,y:i,pattern:a})},quadraticCurveTo:function(e,t,a,r,n){var s,o;s=this.seriesMap[e],i.E0w(),o=s.pattern,s.moves.push({action:"quadraticCurveTo",x0:t,y0:a,x:r,y:n,pattern:o})},bezierCurveTo:function(e,t,a,r,n,s,o){var l,h;i.E0w(),h=(l=this.seriesMap[e]).pattern,l.moves.push({action:"bezierCurveTo",x0:t,y0:a,x1:r,y1:n,x:s,y:o,pattern:h})},addText:function(e,t,i,a,r,n,s){this.seriesMap[e].text.push({text:t,x:i,y:a,bg:r})},drawText:function(e,t){for(var i,a,r,n,s=0;s<t.text.length;s++)(i=t.text[s]).bg&&("ri","g","ht",a=i.width?i.width:e.measureText(i.text).width,r=i.height?i.height:12,n=e.fillStyle,e.fillStyle=i.bg,"right"==e.textAlign?e.fillRect(i.x,i.y-r/2,-a,-r):e.fillRect(i.x,i.y-r/2,a,r),e.fillStyle=n),e.fillText(i.text,i.x,i.y)},draw:function(e,t){var a,r,n,s,o,l;a=e.lineWidth,r=e.fillStyle,n=e.strokeStyle,s=e.globalAlpha;for(var h=0;h<this.seriesArray.length;h++)if(o=this.seriesArray[h],!t||o.name==t){e.beginPath(),e.lineWidth=o.width,e.globalAlpha=o.opacity,e.fillStyle=o.color,e.strokeStyle=o.color,e.save();for(var c=0;c<o.moves.length;c++)(l=o.moves[c]).pattern?(e.setLineDash(l.pattern),e.lineDashOffset=0):e.setLineDash([]),"quadraticCurveTo"==l.action?e[l.action](l.x0,l.y0,l.x,l.y):"bezierCurveTo"==l.action?e[l.action](l.x0,l.y0,l.x1,l.y1,l.x,l.y):e[l.action](l.x,l.y);"fill"==o.strokeOrFill?e.fill():e.stroke(),e.closePath(),e.restore(),this.drawText(e,o),i.i3C(14),e.lineWidth=i.k$A(0,"1")}e.lineWidth=a,e.fillStyle=r,e.strokeStyle=n,e.globalAlpha=s}},!0)},x=function(e){var t;(t=e.CIQ).Renderer=function(){},t.Renderer.produce=function(e,i){var a,r;if(a=null,e)for(var n in t.Renderer)if((r=t.Renderer[n]).requestNew&&(a=r.requestNew(e.split("_"),i)),a)return a;return i.type="line",new t.Renderer.Lines({params:i})},t.Renderer.colorFunctions={},t.Renderer.registerColorFunction=function(e,i){t.Renderer.colorFunctions[e]=i},t.Renderer.unregisterColorFunction=function(e){X.j07(),delete t.Renderer.colorFunctions[e]},t.Renderer.prototype.adjustYAxis=function(){},t.Renderer.prototype.draw=function(){},t.Renderer.prototype.drawIndividualSeries=function(e,t){},t.Renderer.prototype.construct=function(e){var i;e||(e={}),(i=e.params?e.params:{}).name||(i.name=t.uniqueID()),i.heightPercentage||(i.heightPercentage=.7),i.opacity||(i.opacity=1),!1!==i.highlightable&&(i.highlightable=!0),i.panel||(i.panel="chart"),i.yAxis&&(i.yAxis=new t.ChartEngine.YAxis(i.yAxis),i.yAxis.name||(i.yAxis.name=i.name)),this.cb=e.callback,this.params=i,this.seriesParams=[],this.caches={},this.colors={}},t.Renderer.prototype.attachSeries=function(e,i){var a,r,n,o,l,h,c,u,d,p,m,g=X;if(!(a=this.stx))return this;if((r=a.chart.series[e])||(r={parameters:{}}),n=this.params,o=r.parameters,l={id:e,chartType:n.type,display:o.display,border_color_up:n.defaultBorders?"auto":null,fill_color_up:o.color,opacity_up:n.opacity,border_color_down:n.defaultBorders?"auto":null,fill_color_down:o.color,opacity_down:n.opacity,color:o.color,symbol:o.symbol,symbolObject:t.clone(o.symbolObject)},"string"==typeof i)l.color=l.fill_color_down=l.fill_color_up=i;else if("object"==s(i)){for(var f in i)l[f]=i[f];-2088145325,1007278948,g.a3e(14),h=g.B0m(0,"2");for(var y=1;-2088145325!==g.b3_(y.toString(),y.toString().length,98855);y++)c=l.color,u=l.border_color,h+=2;1007278948!==g.b3_(h.toString(),h.toString().length,74592)&&(c=l.color,u=l.border_color),c&&(l.fill_color_up||(l.fill_color_up=c),l.fill_color_down||(l.fill_color_down=c),l.fill_color_even||(l.fill_color_even=c)),u&&(l.border_color_up||(l.border_color_up=u),l.border_color_down||(l.border_color_down=u),l.border_color_even||(l.border_color_even=u))}for(l.symbol&&l.field!=l.symbol&&(l.subField=l.field,l.field=l.symbol),l.id||(l.id=t.uniqueID()),d=0;d<this.seriesParams.length;++d)if(this.seriesParams[d].id===l.id){this.removeSeries(l.id,!0);break}return this.seriesParams.splice(d,0,l),l.fill_color_up!=l.fill_color_down?(" ","down"," ","do","w","n"," ","d","n",g.i3C(4),this.colors[g.k$A(" up",e)]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display+" up":e+" up"},g.i3C(4),this.colors[g.k$A(" dn",e)]={color:l.fill_color_down,opacity:l.opacity_down,display:l.display?l.display+" down":e+" down"}):this.colors[e]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display:e},p=n.panel,a.panels[p]?n.yAxis?(n.yAxis=a.addYAxis(a.panels[p],n.yAxis),n.yAxis.needsInitialPadding=!0,o.yAxis=n.yAxis,a.resizeChart()):l.yAxis&&(n.yAxis=l.yAxis):((m=n.yAxis)||((m=new t.ChartEngine.YAxis).needsInitialPadding=!0),m.name=p,a.createPanel(p,p,null,null,m)),this},t.Renderer.prototype.removeSeries=function(e,t){var i,a,r,n,s,o,l,h,c,u=X;for(var d in i=null,a=!1,(n=(r=this.stx).chart).seriesRenderers){s=n.seriesRenderers[d];for(var p=0;p<s.seriesParams.length;p++)(o=s.seriesParams[p]).id==e&&this===s?i=p:!o.isComparison||o.panel!=n.panel.name||o.yAxis&&o.yAxis!=n.yAxis||(a=!0)}if(null!==i&&(n.forcePercentComparison&&!a&&this.seriesParams[i].isComparison&&"linear"!=r.layout.chartScale&&r.setChartScale(),this.seriesParams.splice(i,1)),u.i3C(4),delete this.colors[u.B0m(" up",e)],u.a3e(4),delete this.colors[u.k$A(" dn",e)],delete this.colors[e],!t){616556170,1979278518,l=2;for(var m=1;616556170!==u.m7$(m.toString(),m.toString().length,69585);m++)u.i3C(14),l+=u.B0m(2,"2");for(var g in u.b3_(l.toString(),l.toString().length,39870),n.seriesRenderers){c=n.seriesRenderers[g];for(var f=0;f<c.seriesParams.length;f++){if(c.seriesParams[f].id==e){h=!0;break}h=!1}if(h)break}!1!==h&&null===i||r.deleteSeries(e,n)}return r.deleteYAxisIfUnused(r.panels[this.params.panel],this.params.yAxis),r.resizeChart(),r.layout.symbols=r.getSymbols({"include-parameters":!0,"exclude-studies":!0}),r.changeOccurred("layout"),this},t.Renderer.prototype.modifyRenderer=function(e){var i;X.E0w(),this.params;var a=this.stx;for(var r in e)switch("t","yp","e","bas","e","line",i=e[r],r){case"baseline":i?("object"===s(i)&&(this.params.baseline=t.ensureDefaults(i,t.ChartEngine.Chart.prototype.baseline)),a.registerBaselineToHelper(this)):a.removeBaselineFromHelper(this);break;case"type":this.params.type=i;break;case"style":this.params.style=i}},t.Renderer.prototype.getDependents=function(e){var t,i;for(var a in t=[],e.chart.seriesRenderers)(i=e.chart.seriesRenderers[a]).params.dependentOf==this.params.name&&t.push(i);return t},t.Renderer.prototype.undraggable=function(e){return this==e.mainSeriesRenderer||(X.j07(),this.params.dependentOf==e.mainSeriesRenderer.params.name)},t.Renderer.prototype.removeAllSeries=function(e){var t;if(e||this===this.stx.mainSeriesRenderer){t=[];for(var i=0;i<this.seriesParams.length;i++)t.push(this.seriesParams[i].id);for(var a=0;a<t.length;a++)this.removeSeries(t[a])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),X.j07(),this},t.Renderer.prototype.getYAxis=function(e){var t,i;if(this.params)if(this.params.yAxis)t=this.params.yAxis;else{if(!(i=e.panels[this.params.panel]))return!1;t=i.yAxis}else t=e.chart.panel.yAxis;return X.E0w(),t},t.Renderer.prototype.ready=function(){return this.stx.createDataSet(),this.stx.draw(),this},t.Renderer.Lines=function(e){this.construct(e);var i=this.params;if(i.type||(i.type="line"),!i.style)switch("m","ou","ntain",i.type){case"mountain":i.baseline?i.style="stx_baseline_delta_mountain":i.colored?i.style="stx_colored_mountain_chart":i.style="stx_mountain_chart";break;default:i.style="stx_line_chart"}this.supportsAnimation=!0,"wave"==i.type||"channel"==i.type?(i.step=i.vertex=i.baseline=i.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):"step"==i.type&&(i.step=!0);var a=i.baseline;a&&"object"===s(a)&&t.ensureDefaults(i.baseline,t.ChartEngine.Chart.prototype.baseline)},t.inheritsFrom(t.Renderer.Lines,t.Renderer,!1),t.Renderer.Lines.requestNew=function(e,i){var a,r,n,s,o,l;a=null,r=i.step,n=i.colored,s=i.baseline,o=i.vertex,X.j07();for(var h=0;h<e.length;h++)switch("s","tep","ch","a","nne","l",l=e[h]){case"line":case"mountain":case"wave":case"channel":a=l;break;case"baseline":s=!0;break;case"colored":n=!0;break;case"step":r=!0;break;case"vertex":o=!0;break;case"delta":break;default:return null}return null!==a||s||r?new t.Renderer.Lines({params:t.extend(i,{type:a,step:r,colored:n,baseline:s,vertex:o})}):null},t.Renderer.Lines.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c,u;for(e=this.stx,i=this.stx.panels[this.params.panel],X.j07(),a=i.chart,r={},s=this.seriesParams,o=this.params.colorFunction,n=0;n<s.length;n++){if(l=s[n],this.params.colored){"_color","_","u","p",h=["_color_up","_color_down","_color"];for(var d=0;d<h.length;d++)"f","i","l","l",(c=l["border"+h[d]])&&"auto"!=c&&(l["fill"+h[d]]=c);o||(o=p(l)),this.params.colorFunction=o}u={},a.series[l.id]&&(u=t.clone(a.series[l.id].parameters)),r[l.id]={parameters:t.extend(t.extend(u,this.params),l),yValueCache:this.caches[l.id]},this==e.mainSeriesRenderer&&a.customChart&&a.customChart.colorFunction&&(r[l.id].parameters.colorFunction=a.customChart.colorFunction)}for(n in e.drawSeries(a,r,this.params.yAxis,this),r)this.caches[n]=r[n].yValueCache;function p(t){var i,a,r;return"st","x_line_down",i=t.fill_color_up||e.getCanvasColor("stx_line_up"),a=t.fill_color_down||e.getCanvasColor("stx_line_down"),r=t.color||e.getCanvasColor("stx_line_chart"),X.j07(),function(e,t,n){return t.iqPrevClose||0===t.iqPrevClose?t.Close>t.iqPrevClose?i:t.Close<t.iqPrevClose?a:r:r}}},t.Renderer.Lines.prototype.drawIndividualSeries=function(e,i){var a,r,n,s,o;if(X.j07(),"c","hanne","l",!i.invalid&&(a=this.stx,r=e.context,n=null,s=i.colorFunction,o=a.panels[i.panel]||e.panel,"string"!=typeof s||(s=t.Renderer.colorFunctions[s])))return i.vertex&&(r.save(),r.lineJoin="bevel"),"wave"==i.type?n=a.drawWaveChart(o,i):i.baseline?(n=a.drawBaselineChart(o,i),a.positionBaselineHandle(this)):"mountain"==i.type?(i.returnObject=!0,n=a.drawMountainChart(o,i,s)):"channel"==i.type?(i.returnObject=!0,n=a.drawChannelChart(o,s,i)):(i.returnObject=!0,n=a.drawLineChart(o,i.style,s,i)),i.vertex&&(a.scatter(o,{yAxis:i.yAxis,field:i.symbol||i.field,subField:i.subField,symbol:i.symbol,color:i.vertex_color,highlight:i.highlight}),r.restore()),n},t.Renderer.OHLC=function(e){var t;this.construct(e),(t=this.params).type||(t.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.histogram&&("ca","ndle",t.type="candle",this.highLowBars=!1,t.volume=t.hollow=!1),X.E0w(),"bar"==t.type&&(t.volume=t.hollow=t.histogram=!1),"candle"==t.type&&(t.hlc=t.colored=!1),t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.OHLC,t.Renderer,!1),t.Renderer.OHLC.requestNew=function(e,i){var a,r,n;a=null,r=i.histogram;for(var s=0;s<e.length;s++)switch(n=e[s]){case"candle":a=n;break;case"histogram":r=!0,a="candle";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,histogram:r})})},t.Renderer.OHLC.getChartParts=function(e,t){return"border_c","olor_down","ca","nd","le","ca","nd","l","e","st","x_candle_shadow_","down","candl","e","bord","er_col","or","_up","c","andle","fill_color_eve","n","bo","r","der_color_u","p","hi","stogram",8,16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},t.Renderer.OHLC.prototype.draw=function(){var e,i,a,r,n,s,o;for(X.E0w(),e=this.stx,i=this.stx.panels[this.params.panel].chart,a={},n=this.seriesParams,r=0;r<n.length;r++)s=n[r],o={},i.series[s.id]&&(o=t.clone(i.series[s.id].parameters)),a[s.id]={parameters:t.extend(t.extend(o,this.params),s)},this==e.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(a[s.id].parameters.colorFunction=i.customChart.colorFunction);for(r in e.drawSeries(i,a,this.params.yAxis,this),a)a[r].yValueCache&&(this.caches[r]=a[r].yValueCache)},t.Renderer.OHLC.prototype.getColor=function(e,i,a,r,n,s){var o,l,h,c,u;return o=s||a.color,l=this.params.yAxis||i.yAxis,r&&!(o=s||a.borderLeftColor||a["border-left-color"])?null:n?(h=e.pixelFromTransformedValue(l.highValue,i),isNaN(h)&&(h=0),c=a.backgroundColor,o&&!t.isTransparent(o)?(X.a3e(82),(u=e.chart.context.createLinearGradient(X.B0m(0,"0"),h,0,2*l[l.flipped?"top":"bottom"]-h)).addColorStop(0,o),u.addColorStop(1,c),u):c):o},t.Renderer.OHLC.prototype.drawIndividualSeries=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P=X;if(!i.invalid&&(a=this.stx,r=e.context,n=i.colorFunction,s=a.panels[i.panel]||e.panel,"string"!=typeof n||(n=t.Renderer.colorFunctions[n]))){if(o=a.layout.candleWidth-e.tmpWidth<=2&&e.tmpWidth<=3,1,2,4,8,16,32,e.state.chartType||(e.state.chartType={}),l=e.state.chartType.pass={},h=a.colorByCandleDirection,i.colorBasis&&(h="open"==i.colorBasis),c=i.histogram,u=i.type,d=i.hollow,p=a.noWicksOnCandles[u],a.startClip(s.name),m=null,g={colors:[],cache:[]},f=[],n){P.i3C(82),y=-P.k$A(0,"524872068"),324903121,P.a3e(82),v=P.B0m(64,"2");for(var L=1;P.b3_(L.toString(),L.toString().length,82454)!==y;L++)b={isHistogram:c,field:i.field,yAxis:i.yAxis,isVolume:i.volume,highlight:i.highlight},v+=2;324903121!==P.m7$(v.toString(),v.toString().length,20251)&&(b={isHistogram:c,field:i.field,yAxis:i.yAxis,isVolume:i.volume,highlight:i.highlight}),b={isHistogram:c,field:i.field,yAxis:i.yAxis,isVolume:i.volume,highlight:i.highlight},c||"bar"!=u?("candle"!=u||p||a.drawShadows(s,n,b),g=a.drawCandles(s,n,b),b.isOutline=!0,!d&&o||a.drawCandles(s,n,b)):("h","lc",b.type=i.hlc?"hlc":"bar",g=a.drawBarChart(s,"stx_bar_chart",n,b))}else{x=c&&!1!==i.gradient,C=t.Renderer.OHLC.getChartParts(i.style,h);for(var O=0;O<C.length;O++)if("cand","le","b","a","r",!(S=C[O]).skipIfPass||l.even){if(c){if("histogram"!=S.type)continue}else if("bar"==u){if("bar"!=S.type)continue;if(i.colored&&!S.condition)continue;if(!i.colored&&S.condition)continue}else if(d){if("hollow"!=S.type)continue;if("shadow"==S.drawType&&p)continue}else{if("candle"!=u)continue;if("candle"!=S.type)continue;if("shadow"==S.drawType){if("st","x_candle_shadow_up",p)continue;if(w=i.border_color_up||a.getCanvasColor("stx_candle_shadow_up"),k=i.border_color_down||a.getCanvasColor("stx_candle_shadow_down"),D=i.border_color_even||a.getCanvasColor("stx_candle_shadow_even"),t.colorsEqual(w,k)&&t.colorsEqual(w,D)&&t.colorsEqual(w,a.defaultColor)){if(S.condition)continue}else if(!S.condition)continue}}A=a.canvasStyle(S.style),T=this.getColor(a,s,A,!1,!1,i[S.fill]),M=this.getColor(a,s,A,!1,x,i[S.fill]),_=this.getColor(a,s,A,S.useBorderStyleProp&&!o,x,i[S.border]),"candle"==S.drawType&&("hollow"==S.type?("tr","ansparent",!t.isTransparent(M)&&t.colorsEqual(_,M)&&(_=S.useColorInMap?"transparent":M),S.useColorInMap||(M=a.containerColor)):"candle"==S.type&&o&&(t.isTransparent(M)?M=_:_=M)),r.globalAlpha=i.opacity,f.push(a.drawBarTypeChartInner({fillColor:M,borderColor:_,condition:S.condition,style:S.style,type:"bar"==u&&i.hlc?"hlc":S.drawType,panel:s,field:i.field,yAxis:i.yAxis,volume:i.volume&&i.hollow,highlight:i.highlight})),m||(m={}),S.useColorInMap&&(m[T]=1)}}for(var E in a.endClip(),m)i.hollow&&t.equals(E,a.containerColor)||g.colors.push(E);for(E=0;E<f.length;E++)for(var I=0;I<f[E].cache.length;I++)((F=f[E].cache[I])||0===F)&&(g.cache[I]=F);return g}},t.Renderer.Candles=function(e){var t;X.j07(),this.construct(e),(t=this.params).type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.colored=t.histogram=!1,t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.Candles,t.Renderer.OHLC,!1),t.Renderer.SimpleHistogram=function(e){var t;this.construct(e),(t=this.params).type="candle",t.histogram=!0,this.barsHaveWidth=this.standaloneBars=!0,this.highLowBars=!1,X.E0w(),t.hlc=t.colored=t.hollow=t.volume=!1},t.inheritsFrom(t.Renderer.SimpleHistogram,t.Renderer.Candles,!1)},C=function(e){var t;(t=e.CIQ).capitalize=function(e){if(X.j07(),!e)return"";X.i3C(112);var t=X.B0m(36,0,7,16,14);return e.charAt(0).toUpperCase()+e.slice(t)},t.camelCaseRegExp=/-([a-z])/g,t.makeCamelCase=function(e){return X.E0w(),e.replace(t.camelCaseRegExp,(function(e){return e[1].toUpperCase()}))},t.uniqueID=function(e){var t,i,a;return e?("fu","nction","unde","fi","ne","d",t=(new Date).getTime(),"undefined"!==("undefined"==typeof window?"undefined":s(window))&&window.performance&&"function"===s(window.performance.now)&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i,a=X;a.i3C(29);var r=a.B0m(1,1,15);a.a3e(113);var n=a.B0m(4,19,9,8,272);return a.j07(),i=(t+Math.random()*r)%n|0,a.i3C(40),t=Math.floor(a.B0m(t,16)),("x"==e?i:3&i|8).toString(16)}))):(i=new Date,X.j07(),a=i.getTime().toString(36),(a+=Math.floor(Math.random()*Math.pow(36,2)).toString(36)).toUpperCase())}},S=function(e){var t;(t=e.CIQ).getHostName=function(e){X.j07();try{return e.match(/:\/\/(.[^/]+)/)[1]}catch(e){return""}},t.qs=function(e){var t,i,a,r;t={},e||(e=window.location.search.substring(1)),i=e.split("&");for(var n=0;n<i.length;n++)(a=i[n].indexOf("="))>0?(r=i[n].substring(0,a),X.a3e(4),t[r]=i[n].substring(X.k$A(1,a))):t[r=i[n]]=null;return t},t.postAjax=function(e,i,a,r,n){var s,o,l,h,c,u,d,p=X;if("Conte","nt",p.j07(),"-Typ","e","P","OS","T","string"==typeof e&&(e={url:e,payload:i,cb:a,contentType:r,noEpoch:n,method:null,responseHeaders:!1}),s=e.url,o=e.cb,l=e.payload,o||(o=function(){}),e.ungovernable||!t.Extras||!t.Extras.RequestLimiter||!t.Extras.RequestLimiter.hitRequestLimit(s)){if(!(h=new XMLHttpRequest))return!1;if(c=new Date,e.noEpoch||("?ciqrando","m=",-1==s.indexOf("?")?s+="?ciqrandom="+c.getTime():s+="&ciqrandom="+c.getTime()),u=e.method,d=e.headers,u||(u=l?"POST":"GET"),h.open(u,s,!0),e.contentType||(e.contentType="application/x-www-form-urlencoded"),l&&h.setRequestHeader("Content-Type",e.contentType),d)for(var m in d)h.setRequestHeader(m,d[m]);e.timeout&&(h.timeout=e.timeout),h.ontimeout=function(){p.E0w(),o(408,null,{})},h.onload=function(){0===this.status?this.status="0":this.status||(this.status=200),p.j07(),o(this.status,this.responseText,function(t){var i,a,r;if(i={},e.responseHeaders){a=t.getAllResponseHeaders().split("\n");for(var n=0;n<a.length;n++){for(r=a[n].split(":");r[1]&&" "==r[1].charAt(0);)r[1]=r[1].substring(1);""!==r[0]&&(i[r.shift()]=r.join(":"))}return i}}(this))},h.onerror=function(){p.j07(),o("0",null,{})};try{h.send(l)}catch(e){o("0",e,{})}return!0}o(429,null,{})},t.loadUI=function(e,i,a){var r,n,s,o=X;if('"',"]",i&&"function"!=typeof i||(a=i,i=document.body),o.i3C(50),n=function(){var e,r,n,s;e=null;try{e=this.contentDocument}catch(e){return a(e)}if(e&&!e.title){"d","iv",r=e.body.innerHTML,n=document.createElement("div"),t.innerHTML(n,r);for(var o=0;o<n.children.length;o++)s=n.children[o].cloneNode(!0),i.appendChild(s);a(null)}else a(new Error("iFrame not found or document has a title"))},r=document.querySelector(o.k$A(e,'iframe[original-url="','"]'))){s=null;try{s=r.contentDocument}catch(e){return a(e)}"complete"===s.readyState&&s.location&&"about:blank"!==s.location.href?n.call(r):r.addEventListener("load",n)}else{"loa","d","ifr","a","me",(r=document.createElement("iframe")).setAttribute("original-url",e),o.a3e(114);var l=o.B0m(10,11,17,19);o.a3e(4);o.B0m(11,4429);o.i3C(4);o.k$A(11,714);o.i3C(115);o.k$A(1446,12,5765,7);o.i3C(116);var h=o.B0m(1,433,3064,3,11);o.a3e(33);var c=o.k$A(256,14,5,12807);o.i3C(101);o.B0m(18,10,297,17535,3);o.a3e(117);o.B0m(2,549,10,17,4967);o.a3e(4);var u=o.k$A(7232,402);o.a3e(96);var d=o.k$A(1414,17,10,712,1375);o.a3e(118);var p=o.k$A(4,1379,197,1,9653);r.src=e+(e.indexOf("?")===l?"?":h>=c||(u==d?p:"&"))+t.uniqueID(),r.hidden=!0,r.addEventListener("load",n),document.body.appendChild(r)}},t.loadScript=function(e,i,a){var r,n,s,o=X;if(o.j07(),t.loadedScripts||(t.loadedScripts={}),t.loadedScripts[e])i&&i();else{if(r=document.createElement("SCRIPT"),a?("use-","credentials",r.type="module",r.crossOrigin="use-credentials"):r.async=!0,r.onload=function(){t.loadedScripts[e]=!0,i&&i()},-1==(n=e).indexOf("?"))n=n+"?"+Date.now();else{o.i3C(25);var l=o.k$A(5,220,896);o.i3C(1);var h=o.k$A(23650,25800);o.a3e(4);o.k$A(670,37);o.i3C(29);var c=o.B0m(438,438,2629);o.i3C(119);var u=o.k$A(8,7652,1091,2,19);o.a3e(50);var d=o.B0m(8,9054,8);o.i3C(29);var p=o.B0m(2240,2240,6719);n=n+(l!==h?c<u?"&":d>p&&833.24:907.35)+Date.now()}r.src=n,(s=document.getElementsByTagName("script")[0])?s.parentNode.insertBefore(r,s.nextSibling):document.body.append(r)}},t.loadStylesheet=function(e,t){var i,a,r,n,s=X;(i=document.createElement("link")).rel="stylesheet",a=2;for(var o=1;1162378523!==s.b3_(o.toString(),o.toString().length,73981);o++)i.type="text/css",i.media="screen",a+=2;-736705629!==s.m7$(a.toString(),a.toString().length,87305)&&("te","xt/c","ss",i.type="text/css",i.media="text/css"),s.a3e(34);var l=s.B0m(9,6,8875);s.j07(),s.i3C(8);s.k$A(30872,33236,10);s.a3e(1);var h=s.k$A(100422,106001);s.i3C(4);s.B0m(15,5025);s.i3C(7);var c=s.B0m(2342,28,12);s.a3e(1);var u=s.k$A(9,10);s.a3e(120);var d=s.B0m(2320,13,2738,20,7);s.i3C(50);var p=s.k$A(8,5,51);s.a3e(66);s.k$A(2042,2,17,10,1016);s.i3C(50);s.B0m(16,52,972);s.a3e(78);var m=s.B0m(14,15,3768,2,508);s.i3C(33);var g=s.k$A(3734,8,19,563828);i.href=e+(e.indexOf(l>=h?"?":c<="6680"*u?d:825.92)===-("1"<<p)?"?":289<=m?"&":5995<=g?8412:2812)+Date.now(),i.onload=function(){s.j07(),this.loaded||(this.loaded=!0,t&&t())},r=document.getElementsByTagName("link"),s.i3C(8);var f=s.B0m(20,19,2);(n=r[r.length-"1"*f])?n.parentNode.insertBefore(i,n.nextSibling):document.head.append(i)},t.loadWidget=function(e,i,a,r){var n=X;i&&"function"!=typeof i||(a=i,i=document.body),n.i3C(4),t.loadStylesheet(n.B0m(".css",e),(function(){n.i3C(4),t.loadUI(n.k$A(".html",e),i,(function(i){i?a(i):(n.a3e(4),t.loadScript(n.B0m(".js",e),a,r))}))}))},t.waitForPlugins=function(e,i){var a,r,n,s;if(a=0,r=e.length){for(var o=0;o<r;o++)n="cq-"+e[o],(s=document.getElementsByTagName(n)[0])&&s.hasAttribute("loaded")&&a++;if(r!==a)return setTimeout((function(){t.waitForPlugins(e,i)}),0);i()}else i()},t.addInternalStylesheet=function(e){var t,i,a,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t="text",t+="/",t+="css",i="t",i+="y",i+="p",i+="e",a="s",a+="t",a+="yle",e&&(e.default&&(e=e.default),"string"==typeof e&&(n&&document.querySelector('style[path="'+n+'"]')||((r=document.createElement(a)).setAttribute(i,t),r.setAttribute("path",n),r.innerText=e,document.head.appendChild(r))))}},w=function(e){var t,i=X;i.j07(),(t=e.CIQ).ChartEngine.prototype.registerHTMLElements=function(){var e,a,r,n,s,o;for(var l in e=this.chart.container,t.ChartEngine.htmlControls)if(void 0===this.chart[l]&&void 0===this.controls[l]){if("c","har","tControls",!this.allowZoom&&"chartControls"==l)continue;if(i.i3C(4),a=e.querySelector(i.B0m(l,".")))this.chart[l]=a,this.controls[l]=a;else{if(!(r=t.ChartEngine.htmlControls[l]))continue;(n=document.createElement("DIV")).innerHTML=r,a=n.firstChild,e.appendChild(a),this.chart[l]=a,this.controls[l]=a,a.classList.add(l)}}var h,c,u,d=this.controls,p=d.chartControls,m=d.home;p&&(".s","tx-zoom","-ou","t",s=p.querySelector(".stx-zoom-in"),o=p.querySelector(".stx-zoom-out"),t.safeClickTouch(s,(c=this,function(e){c.allowZoom&&c.zoomIn(e),i.E0w(),e.stopPropagation()})),t.safeClickTouch(o,(h=this,function(e){h.allowZoom&&h.zoomOut(e),e.stopPropagation()})),t.touchDevice||(this.makeModal(s),this.makeModal(o))),m&&(t.safeClickTouch(m,(u=this,function(e){e.stopPropagation(),u.isHistoricalMode()?(delete u.layout.range,i.j07(),u.loadChart(u.chart.symbol,(function(){i.j07(),u.home({animate:!1})}))):u.home({animate:!0})})),t.touchDevice||this.makeModal(m))},t.ChartEngine.prototype.home=function(e){var t,a,r,n,o,l;if("undefine","d",this.swipe.amplitude=0,t=this.layout,"object"!=s(e)&&(e={maintainWhitespace:e}),"undefined"==s(e.maintainWhitespace)&&(e.maintainWhitespace=!0),this.cancelTouchSingleClick=!0,this.chart.dataSet&&this.chart.dataSet.length){for(var h in this.micropixels=0,a=Math.floor(this.chart.width/t.candleWidth),this.charts)if(r=this.charts[h],!e.chart||e.chart==r){for(n=0,e.maintainWhitespace&&this.preferences.whitespace>=0&&(n=this.preferences.whitespace),(e.whitespace||0===e.whitespace)&&(n=e.whitespace),(o=this.getLabelOffsetInPixels(r,t.chartType))>n&&(n=o),l=Math.min(a,r.dataSet.length),this.chart.allowScrollPast&&(l=a),this.micropixels=this.chart.width-l*t.candleWidth-n,this.preferences.whitespace=n;this.micropixels>t.candleWidth;)l++,this.micropixels-=t.candleWidth;for(;this.micropixels<0;)l--,this.micropixels+=t.candleWidth;if(this.micropixels-=t.candleWidth,l++,!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars){i.a3e(0);var c=i.B0m(17,7,121);this.micropixels+=t.candleWidth/c}e.animate?(this,this.scrollTo(r,l,u(this,r,l))):(r.scroll=l,d(this))}this.draw()}else this.draw();function u(e,t,a){return function(){i.j07(),d(e),t.scroll=a,e.draw()}}function d(e){var t;for(var i in e.panels){t=e.panels[i].yaxisLHS.concat(e.panels[i].yaxisRHS);for(var a=0;a<t.length;a++)e.calculateYAxisMargins(t[a])}}},t.ChartEngine.prototype.headsUpHR=function(){var e,a,r,n,s;function o(e){t.efficientDOMUpdate(r,"innerHTML",e)}this.runPrepend("headsUpHR",arguments)||(e=this.currentPanel)&&(a=e.chart,this.updateFloatHRLabel(e),(r=this.controls.floatDate)&&!a.xAxis.noDraw&&(n=this.barFromPixel(this.cx),(s=a.xaxis[n])&&s.DT?o(t.displayableDate(this,a,s.DT)):s&&s.index?o(s.index):o("")),this.runAppend("headsUpHR",arguments),i.j07())},t.ChartEngine.prototype.modalBegin=function(){this.openDialog="modal",i.j07(),this.undisplayCrosshairs()},t.ChartEngine.prototype.modalEnd=function(){this.cancelTouchSingleClick=!0,this.openDialog="",this.doDisplayCrosshairs()},t.ChartEngine.prototype.makeModal=function(e){var t;i.j07(),t=this,e.onmouseover=function(e){t.modalBegin()},e.onmouseout=function(e){t.modalEnd()}},t.ChartEngine.prototype.updateChartAccessories=function(){var e,a,r,n,s,o,l,h,c;if(null!==this.accessoryTimer&&clearTimeout(this.accessoryTimer),!t.ChartEngine.drawingLine&&t.touchDevice&&(new Date).getTime()-this.lastAccessoryUpdate<100)this.accessoryTimer=setTimeout((c=this,function(){i.E0w(),c.updateChartAccessories()}),10);else if(this.chart.dataSet&&!this.runPrepend("updateChartAccessories",arguments)){if(this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),(e=this.controls.floatDate)&&((a=this.currentPanel)||(a=this.chart.panel),a)){r="bot",r+="t",r+="om",n="p",n+="x",s=a.chart,o=!0===this.xAxisAsFooter?0:this.chart.canvasHeight-a.chart.bottom,i.i3C(4);var u=i.B0m(2,0);if(l=e.offsetWidth/u-.5,(h=this.pixelFromTick(this.crosshairTick,s)-l)<0)i.i3C(82),h=i.B0m(32,"0");else if(h>this.width-2*l-1){i.a3e(21);var d=i.k$A(0,9,11,19,19);h=this.width-d*l-1}t.efficientDOMUpdate(e.style,"left",h+n),t.efficientDOMUpdate(e.style,r,o+"px")}this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)}},t.ChartEngine.prototype.positionSticky=function(e){var t,a;t=Math.max(this.cy-e.offsetHeight-60,0),a=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-e.offsetWidth),i.i3C(4),e.style.top=i.B0m("px",t),i.i3C(4),e.style.right=i.B0m("px",a)},t.ChartEngine.prototype.displaySticky=function(e){var a,r,n,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E;if(a=".s",a+="tickyLongPressTex",a+="t",(r=this.controls.mSticky)&&(n=r.querySelector(".mStickyInterior")))if(o=r.querySelector(".overlayTrashCan"),l=r.querySelector(".overlayEdit"),h=r.querySelector(".mouseDeleteInstructions"),c=r.querySelector(a),h.classList.remove("no_edit"),e&&"object"==s(e)||(e={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments[4]}),u=e.message,d=e.backgroundColor,p=e.forceShow,m=e.noDelete,g=e.noEdit,f=e.type,p||u){if(v=".mStickyRig",v+="htC",v+="lick",u||(u=""),b=this.defaultColor,"auto"==d&&(d=b),p&&!u?(x="n",x+="one",n.style.backgroundColor="",n.style.color="",n.style.display=x):d?(C="inl",C+="ine-blo",C+="ck",n.style.backgroundColor=d,n.style.color=t.isTransparent(d)?b:t.chooseForegroundColor(d),n.style.display=C):(n.style.backgroundColor="",n.style.color="",n.style.display="inline-block"),n.innerHTML=u,(S=r.querySelector(v)).className="mStickyRightClick",f&&(i.a3e(4),S.classList.add(i.B0m(f,"rightclick_"))),S.style.display="",r.style.display="inline-block",(!(w=this.highlightedDraggable)||w&&w.undraggable&&w.undraggable(this))&&(k="n",k+="o",k+="ne",c.style.display=k),m||!0===this.bypassRightClick||this.bypassRightClick[f])S.style.display="none";else if(this.highlightViaTap||this.touches.length)D="h",D+="i",D+="de",A="rem",A+="o",A+="ve",T="n",T+="o",T+="ne",o&&(o.style.display="inline-block"),l&&!g&&(l.style.display="inline-block"),h&&(h.style.display="none"),c&&(c.style.display=T),r.classList[""===u?"add":A](D);else if(g&&h.classList.add("no_edit"),h&&(h.style.display="block"),c){M=-1311215396,_=-70217861,F=2;for(var I=1;i.b3_(I.toString(),I.toString().length,85165)!==M;I++)c.style.display="none",P=this.preferences.dragging,F+=2;i.m7$(F.toString(),F.toString().length,55959)!==_&&(c.style.display="",P=this.preferences.dragging),P&&e.panel&&!e.panel.noDrag&&(L="bloc",L+="k",O="ser",O+="i",O+="es",!0!==P&&!P.study||"study"!=f?!0!==P&&!P.series||f!=O||(c.style.display=L):c.style.display="block")}E=f||"default",r.setAttribute("cq-sticky-type",E),(e.positioner||this.positionSticky).call(this,r)}else y="n",y+="on",y+="e",n.innerHTML="",r.style.display="none",o&&(o.style.display="none"),l&&(l.style.display="none"),h&&(h.style.display=y),c&&(c.style.display="none")},t.ChartEngine.prototype.displayNotification=function(e,t){var a,r,n,s,o,l,h=this,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a=".me",a+="ssage",this.controls.notificationTray){var u=c.callback,d=c.dismissalListeners;n=(r=this.controls.notificationTray).querySelector("template").content.cloneNode(!0),(s=n.firstElementChild).className=e,s.querySelector(a).textContent=t,u&&(o="t",o+="o",o+="uchend",l=window.PointerEvent?"pointerup":o,s.handler=s.addEventListener(l,u)),d&&(s.listeners={},d.forEach((function(t){i.E0w(),s.listeners[e]=h.addEventListener(t.type,t.callback)}))),this.makeModal(s),i.E0w(),r.appendChild(s)}},t.ChartEngine.prototype.removeNotification=function(e){var t,i;if(this.controls.notificationTray&&(i=(t=this.controls.notificationTray).querySelector(".".concat(e)))){if(i.handler&&i.removeEventListener(i.handler),i.listeners)for(var a in i.listeners)this.removeEventListener(i.listeners[a]);this.modalEnd(),t.removeChild(i)}},t.ChartEngine.prototype.setMeasure=function(e,t,a,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S;if(o=".",o+="mMeasu",o+="r",o+="e",l="s",l+="e",l+="tMeasure",!this.runPrepend(l,arguments)){if(h=(this.drawingContainer||document).querySelector(o),c="",e||0===e){if(!1!==t&&(m=(m=Math.round(Math.abs(e-t)*this.chart.roundit)/this.chart.roundit).toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?c+=this.internationalizer.numbers.format(m):c+=m,e>0&&t>0)){if(f=" ",f+="(",i.a3e(42),g=i.B0m(e,e,t),Math.abs(g)>.1)i.a3e(38),g=Math.round(i.B0m(g,100));else if(Math.abs(g)>.01){i.i3C(67);var w=i.k$A(19,118981,15,8e3);g=Math.round(g*w)/10}else g=Math.round(1e4*g)/100;this.internationalizer?(i.i3C(121),g=this.internationalizer.percent.format(i.B0m("100",g,32))):(i.a3e(4),g=i.B0m("%",g)),i.i3C(50),c+=i.B0m(g,f,")")}if(!1!==r){i.a3e(1),y=Math.abs(i.k$A(a,r)),i.i3C(5);var k=i.B0m(12,13);y=Math.round(y)+k,v=this.translateIf("Bars"),i.i3C(115),c+=i.k$A(" ",y,v," ")}h&&(h.innerHTML=c)}else{u=-2113020364,d=-1060955309,i.a3e(38),p=i.k$A("2",1);for(var D=1;i.m7$(D.toString(),D.toString().length,64479)!==u;D++)(~this.anyHighlighted||""!==this.currentVectorParameters.vectorType)&&this.clearMeasure(),p+=2;i.m7$(p.toString(),p.toString().length,75906)!==d&&(this.anyHighlighted||""!==this.currentVectorParameters.vectorType||this.clearMeasure())}this.activeDrawing||((h=this.controls.mSticky)&&(b=".m",b+="StickyInter",b+="ior",x=h.querySelector(b),n?(C="a",C+="d",C+="d",S="i",S+="nlin",S+="e-bloc",S+="k",h.style.display="inline-block",x.style.display=S,(e||0===e)&&(x.innerHTML=c),h.classList[""===c?C:"remove"]("hide"),this.positionSticky(h)):(h.style.display="none",x.innerHTML="")),this.runAppend("setMeasure",arguments))}},t.ChartEngine.prototype.clearMeasure=function(){var e;(e=(this.drawingContainer||document).querySelector(".mMeasure"))&&(e.innerHTML="")},t.ChartEngine.prototype.zoomSet=function(e,a){var r,n,s,o,l;if(e=this.constrainCandleWidth(e),"none"!=this.chart.tempCanvas.style.display&&t.clearCanvas(this.chart.tempCanvas,this),!(r=this.mainSeriesRenderer||{}).params||!r.params.volume){if(this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<a.dataSet.length)n=this.crosshairTick||this.tickFromPixel(this.cx,a);else if(this.isHome()){i.i3C(75);var h=i.k$A(1,6,6,8,3);n=a.dataSet.length-h}else if(this.chart.scroll>this.chart.dataSet.length)n=0;else if("zoom-x"==this.grabMode)n=this.tickFromPixel(this.chart.width,a);else{-241988618,-1724057995,s=2;for(var c=1;-241988618!==i.m7$(c.toString(),c.toString().length,37436);c++)n=this.tickFromPixel(this.chart.width%9,a),s+=2;-1724057995!==i.b3_(s.toString(),s.toString().length,41380)&&(n=this.tickFromPixel(this.chart.width/2,a))}this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),i.a3e(37);var u=i.k$A(11,6,5,13);o=a.dataSet.length-u-n,l=a.scroll,i.i3C(5);var d=i.B0m(6,7);a.scroll=Math.round((this.pixelFromTick(n,a)-a.left)/e)+d+o,this.micropixels+=(l-o)*this.layout.candleWidth-(a.scroll-o)*e}this.setCandleWidth(e),a.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()}},k=function(e){var t,i=X;t=e.CIQ,i.j07(),t.ChartEngine.prototype.currentBaseline=null,t.ChartEngine.prototype.baselineHelper=null,t.ChartEngine.helpersToRegister.push((function(e){i.E0w(),e.baselineHelper=new Map})),t.ChartEngine.prototype.registerBaselineToHelper=function(e){var t,a;if(e.params.baseline){var r,n,s=this.baselineHelper;if(i.j07(),t=this,!s.has(e)){"_main_seri","es";var o=e.params.name;a=this.controls.baselineHandle,s.set(e,{styleCache:null,display:!1,handle:"_main_series"===o&&a?a:(r=o,r=r.replace(" ","_"),(n=document.createElement("cq-baseline-handle")).classList.add("stx-baseline-handle",r),t.container.append(n),t.controls["".concat(r," cq-baseline-handle")]=n,n)})}}},t.ChartEngine.prototype.removeBaselineFromHelper=function(e){var t,i,a=this.baselineHelper;a.has(e)&&("_main","_series","_main_series"!==(t=e.params.name.replace(" ","_"))&&(i=a.get(e).handle,delete this.controls["".concat(t," cq-baseline-handle")],this.container.removeChild(i)),a.delete(e))},t.ChartEngine.prototype.findBaselineHandle=function(e,t){var n,s=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=r(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,s=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw s}}}}(this.baselineHelper);try{for(s.s();!(n=s.n()).done;){var o=a(n.value,2),l=o[0],h=o[1].handle;if(e.target===h||e.composedPath&&e.composedPath().includes(h))return t&&(this.repositioningBaseline={lastDraw:Date.now(),handle:h,renderer:l},h.classList.add("stx-grab")),this.currentBaseline=l,!0}}catch(e){s.e(e)}finally{s.f()}return i.j07(),!1},t.ChartEngine.prototype.setBaselines=function(e){var t;e||(e=this.chart),t=this;var a=this.baselineHelper;a.forEach((function(r,n){var o,l,h,c,u=n.params.baseline;i.i3C(123),(o=i.k$A(u,!0))&&(u=e.baseline);var d=u,p=d.defaultLevel,m=d.userLevel;(l=n.getYAxis(t))&&(c=(h=t.getYAxisBaselineRenderer(l))&&h!=t.mainSeriesRenderer&&h.seriesParams.length&&h.seriesParams[0].id,u.actualLevel=m||0===m?m:p,u.actualLevel||0===u.actualLevel||(u.actualLevel=function(a,r){var n,o,l,h,c,u=e,d=u.dataSegment,p=u.dataSet,m=u.defaultPlotField;for(n=m,r||(n=a),o=t.getFirstLastDataRecord(d,"tick").tick;;){if(l=p[o])if("Clo","se",r&&"Close"==n){if(l.iqPrevClose||0===l.iqPrevClose)return l.iqPrevClose}else if(i.i3C(122),(h=p[i.B0m(o,"1",0)])&&(h[n]||0===h[n]))return"object"===s(c=h[n])?c[m]:c;if(--o<0)break}}(c,o)),r.display=h===n,a.set(n,r))}))},t.ChartEngine.prototype.setBaselineUserLevel=function(){var e,i,a,r=this.chart,n=this.currentPanel,o=this.repositioningBaseline,l=o.lastDraw,h=o.renderer;if(h.params.panel==n.name){var c=r.baseline;e="object"===s(h.params.baseline)?h.params.baseline:c,i=h.getYAxis(this),a=this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),n,i),e.userLevel=this.adjustIfNecessary(n,this.crosshairTick,a),Date.now()-l>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now())}},t.ChartEngine.prototype.setBaselineMinMax=function(e,t){var a,r,n;i.E0w();var o=this.baselineHelper,l=this.chart,h=this.repositioningBaseline,c=l.baseline,u=l.seriesRenderers;if(a=l.transformFunc&&t===l.panel.yAxis,!(r=t.renderers.find((function(e){return i.E0w(),o.get(u[e])}))))return e;var d=u[r].params,p=d.baseline;if("mountain"===d.type)return e;var m=(p="object"===s(p)?p:c).actualLevel;return(m||0===m)&&(a&&(m=l.transformFunc(this,l,m)),n=Math.max(m-e[0],e[1]-m),e[0]=h?t.lowValue:m-n,e[1]=h?t.highValue:m+n),e},t.ChartEngine.prototype.positionBaselineHandle=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f;if("s","t","x-g","rab",this.manageTouchAndMouse){var y=this.baselineHelper,v=this.chart,b=this.panels,x=e.params,C=x.baseline,S=x.panel;a=e.params.yAxis||e.getYAxis(this);var w=y.get(e),k=w.display,D=w.handle,A=w.styleCache;if(!0===C&&(C=v.baseline),!1!==C.userLevel&&k){r=b[S],n=D.classList.contains("stx-grab"),s="block",o=C.actualLevel,v.transformFunc&&(o=v.transformFunc(this,v,o)),o>a.high?(o=a.high,n||(s="none")):o<a.low&&(o=a.low,n||(s="none")),v.untransformFunc&&(o=v.untransformFunc(this,v,o)),l=this.pixelFromPrice(o,r,a),A||(A=getComputedStyle(D)),h=t.stripPX(A.width),i.a3e(124);var T=i.B0m(41,7,15,9,5);c="".concat(l-t.stripPX(A.height)/T,"px"),d=this.baselineHandleBuffer||2,i.a3e(125);var M=i.B0m(17,5,227,19);if(p=r.yaxisRHS.indexOf(a)+M)m=1===p?d:d*p,u="".concat(v.right-h*p-m,"px");else{i.a3e(1);var _=i.k$A(18,19);f=1===(g=r.yaxisLHS.slice(0).reverse().indexOf(a)+_)?d:d*g,i.a3e(4),u="".concat(v.left+h*g+f-h).concat(i.B0m("x","p"))}Object.assign(D.style,{display:s,top:c,left:u})}else D.style.display="none"}},t.ChartEngine.prototype.getYAxisBaselineRenderer=function(e){var t;if(!e.renderers.length)return null;var i=this.baselineHelper,a=this.chart;return(t=e.renderers.find((function(e){return i.get(a.seriesRenderers[e])})))?a.seriesRenderers[t]:null},t.ChartEngine.prototype.getYAxisBaseline=function(e){var t;i.j07();var a=this.chart.baseline;if(!(t=this.getYAxisBaselineRenderer(e)))return a;var r=t.params.baseline;return"object"===s(r)?r:a}},D=function(e){var t;(t=e.CIQ).ChartEngine.Chart=function(){this.xAxis=new t.ChartEngine.XAxis,this.yAxis=new t.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},this.xaxis=[],this.state={},this.endPoints={},this.defaultChartStyleConfig={},this.baseline=t.clone(this.baseline),this.panel=void 0},t.extend(t.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!0,roundit:100,breakpoint:null,legendRenderer:t.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:t.calculateTradingDecimalPlaces},!0)},A=function(e){var t;(t=e.CIQ).ChartEngine.prototype.resolveY=function(e){return this.top+e},t.ChartEngine.prototype.resolveX=function(e){return this.left+e},t.ChartEngine.prototype.backOutY=function(e){return e-this.top},t.ChartEngine.prototype.backOutX=function(e){return X.j07(),e-this.left},t.ChartEngine.prototype.dateFromTick=function(e,i,a){var r,n,s,o,l,h,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dataSet";return i||(i=this.chart),h=!1,0===(n=(r=i[c]).length)&&(r[0]={},r[0].DT=new Date,n=r.length,h=!0),e<0?s=(o=this.standardMarketIterator(r[0].DT))?o.previous(Math.abs(e)):r[0].DT:e>=n?(o=this.standardMarketIterator(r[n-1].DT))?(X.i3C(126),s=o.next(X.k$A(n,e,1))):s=r[n-1].DT:s=r[e].DT,X.E0w(),l=a?new Date(s.getTime()):t.yyyymmddhhmmssmmm(s).substr(0,12),h&&delete r[0].DT,l},t.ChartEngine.prototype.tickFromDate=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dataSet",S=X;if(i||(i=this.chart),!(n=i[C])||!n.length)return 0;if(S.j07(),a||(a=0),s=e.constructor==Date?e:t.strToDateTime(e),t.ChartEngine.isDailyInterval(this.layout.interval)||s.setMinutes(s.getMinutes()+a),o=s.getTime(),i.tickCache[C]||(i.tickCache[C]={}),(l=i.tickCache[C][o])||0===l)return r?Math.ceil(l):Math.floor(l);if(h=n[0].DT,c=n[n.length-1].DT,s>=h&&s<=c){for(u=0,d=n.length,p=0;++p<100;){if(S.i3C(43),+(g=n[m=Math.floor(S.B0m(u,2,d))].DT)==+s)return i.tickCache[C][o]=m,m;if(g<s&&(u=m),g>s){if(n[m-1].DT<s)return S.a3e(1),i.tickCache[C][o]=S.k$A(.5,m),r?m:m-1;if(+n[m-1].DT==+s)return S.a3e(1),i.tickCache[C][o]=S.k$A(1,m),S.i3C(1),S.B0m(1,m);d=m}}if(p>=100)return f="!!!Warning: tickFromDate",f+="() did not find match.",console.log(f),n.length}return S.a3e(87),v=(y=S.B0m(s,h))?h:c,x=(b=this.standardMarketIterator(v))?b.futureTick({end:s}):0,l=y?-1*x:n.length-1+x,i.tickCache[C][o]=l,l},t.ChartEngine.prototype.pixelFromBar=function(e,t){var i,a;X.E0w(),t||(t=this.chart),i=0,i=(a=this.chart.segmentImage)&&a[e]&&a[e].leftOffset?a[e].leftOffset:(e+.5)*this.layout.candleWidth,X.a3e(127);var r=X.k$A(7,0,4,19,13);return i=t.panel.left+Math.floor(i+this.micropixels)-r},t.ChartEngine.prototype.barFromPixel=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g=X;if(t||(t=this.chart),i=this.chart.segmentImage,a=this.micropixels,r=this.layout.candleWidth,i){n=e-t.panel.left-a,s=2,l=i.length,g.i3C(40),h=Math.round(g.k$A(l,s)),g.a3e(76);var f=g.k$A(6,2,2);g.a3e(93);var y=g.k$A(13,0,1,13,2);g.i3C(1);var v=g.B0m(8,10);if(n>(d=i[l-f].leftOffset+i[l-y].candleWidth/v))return l+Math.floor((e-d-t.panel.left-a)/r);for(var b=1;b<l&&(s*=2,o=i[h]);b++){c=o.leftOffset,g.i3C(8);var x=g.k$A(24,7,19);if(u=o.candleWidth/x,g.a3e(1),p=g.B0m(u,c),g.a3e(4),m=g.k$A(u,c),0===h||n>=p&&n<m)break;n<p?h-=Math.max(1,Math.round(l/s)):h+=Math.max(1,Math.round(l/s)),h=Math.max(0,Math.min(l-1,h))}if(!i[h])for(b=0;b<l;b++)if(o=i[b]){if(n<(c=o.leftOffset)-(u=o.candleWidth/2))return g.i3C(1),Math.max(0,g.k$A(1,b));if(n<c+u)return b;if(n>=c+u)return g.a3e(4),g.B0m(1,b)}return h}return Math.floor((e-t.panel.left-a)/r)},t.ChartEngine.prototype.tickFromPixel=function(e,t){var i;return t||(t=this.chart),i=t.dataSet.length-t.scroll,X.E0w(),t.segmentImage?i+=this.barFromPixel(e,t):i+=Math.floor((e-t.panel.left-this.micropixels)/this.layout.candleWidth),i},t.ChartEngine.prototype.pixelFromTick=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p=X;if(t||(t=this.chart),i=t.dataSegment,a=t.dataSet,r=t.segmentImage,n=this.micropixels,s=i?i.length:0,o=t.panel,l=t.scroll,h=e-a.length+l,c=s?i[h]:null,r&&(c=r[h]),p.E0w(),c&&c.leftOffset)return o.left+Math.floor(c.leftOffset+n);if(u=0,d=0,c=s?i[s-1]:null,r&&(p.i3C(1),c=r[p.k$A(1,s)]),c&&c.leftOffset&&s<e-a.length+l){p.i3C(1);var m=p.B0m(11,13);u=c.leftOffset-c.candleWidth/m,d=s}return u+o.left+Math.floor((e-d-a.length+l+.5)*this.layout.candleWidth+n)},t.ChartEngine.prototype.pixelFromDate=function(e,t,i,a){return this.pixelFromTick(this.tickFromDate(e,t,i,a),t)},t.ChartEngine.prototype.transformedPriceFromPixel=function(e,t,i){var a,r,n;if(X.E0w(),t||(t=this.chart.panel),e=(a=i||t.yAxis).bottom-e,a.semiLog)n=e*a.logShadow/a.height,a.flipped?n=a.logHigh-n:n+=a.logLow,r=Math.pow(10,n);else{if(!a.multiplier)return null;r=e/a.multiplier,a.flipped?r=a.high-r:r+=a.low}return r},t.ChartEngine.prototype.priceFromPixel=function(e,t,i){var a;return X.E0w(),t||(t=this.chart.panel),a=this.transformedPriceFromPixel(e,t,i),this.charts[t.name]&&t.chart.untransformFunc&&(i&&i!=t.yAxis||(a=t.chart.untransformFunc(this,t.chart,a,i))),a},t.ChartEngine.prototype.valueFromPixel=function(e,t,i){var a;return t||(t=this.whichPanel(e)),t||(a=Object.values(this.panels))&&a.length&&(t=e<=0?a.shift():a.pop()),this.priceFromPixel(e,t,i)},t.ChartEngine.prototype.valueFromInterpolation=function(e,i,a,r,n){var o,l,h,c,u,d,p,m,g,f,y,v,b,x=X;return"undefine","d",null===e||e<0||!i?null:(r||(r=this.chart.panel),n||(n=r.yAxis),a||(a=this.chart.defaultPlotField),(o=this.getPreviousBar(this.chart,i,e))?((h=t.existsInObjectChain(o,i))&&(l=h.obj[h.member]),"object"==s(l)&&(l=l[a]),c=this.getRendererFromSeries(i),x.j07(),c&&c.params.step||"step"===this.layout.chartType?l:(u=this.getNextBar(this.chart,i,e),(h=t.existsInObjectChain(u,i))&&(d=h.obj[h.member]),"object"==s(d)&&(d=d[a]),u?null===l||"undefined"==s(l)||null==d?null:(p=this.pixelFromPrice(l,r,n),m=this.pixelFromPrice(d,r,n),g=o.tick,f=u.tick,x.i3C(128),y=x.B0m(f,g,p,m),v=this.chart.dataSegment[e].tick,x.i3C(129),b=x.k$A(g,p,y,v),this.priceFromPixel(b,r,n)):null)):null)},t.ChartEngine.prototype.pixelFromTransformedValue=function(e,t,i){var a,r,n,s,o;return t||(t=this.chart.panel),X.j07(),r=((a=i||t.yAxis).high-e)*a.multiplier,a.semiLog&&(n=Math.max(e,0),s=Math.log(n)/Math.LN10,r=(o=a.height)-o*(s-a.logLow)/a.logShadow),r=a.flipped?a.bottom-r:a.top+r},t.ChartEngine.prototype.pixelFromPrice=function(e,t,i){return t||(t=this.chart.panel),this.charts[t.name]&&t.chart.transformFunc&&(i&&i!=t.yAxis||(e=t.chart.transformFunc(this,t.chart,e,i))),this.pixelFromTransformedValue(e,t,i)},t.ChartEngine.prototype.pixelFromValueAdjusted=function(e,t,i,a){var r,n;return this.layout.adj||!this.charts[e.name]?this.pixelFromPrice(i,e,a):(r=Math.round(t))>0&&r<e.chart.dataSet.length&&(n=e.chart.dataSet[r].ratio)?(X.a3e(38),this.pixelFromPrice(X.k$A(i,n),e,a)):this.pixelFromPrice(i,e,a)},t.ChartEngine.prototype.adjustIfNecessary=function(e,t,i){var a,r;return this.layout.adj?i:e&&this.charts[e.name]&&(a=Math.round(t))>0&&a<e.chart.dataSet.length&&(r=e.chart.dataSet[a].ratio)?(X.i3C(40),X.B0m(i,r)):i}},T=function(e){var t,i=X;t=e.CIQ,i.j07(),t.ChartEngine.prototype.positionCrosshairsAtPointer=function(){var e,a,r,n,s,o,l,h;if(e="p",e+="x",(a=this.currentPanel)&&!(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(i.E0w(),this.runPrepend("positionCrosshairsAtPointer",arguments)))){r=a.chart,n=this.container.getBoundingClientRect(),this.top=n.top,this.left=n.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),this.cx=this.backOutX(t.ChartEngine.crosshairX),s=this.crosshairTick=this.tickFromPixel(this.cx,r),i.a3e(130);var c=i.k$A(5,16,10,1);o=this.pixelFromTick(s,r)-c,this.controls.crossX&&(i.i3C(4),this.controls.crossX.style.left=i.k$A(e,o)),o>=a.right||o<=a.left?this.undisplayCrosshairs():(l="chart"==a.name?this.preferences.horizontalCrosshairField:a.horizontalCrosshairField,h=r.dataSet,l&&h&&s<h.length&&s>-1&&(this.crossYActualPos=this.pixelFromPrice(h[s][l],a)),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend("positionCrosshairsAtPointer",arguments))}},t.ChartEngine.prototype.doDisplayCrosshairs=function(){var e,a,r,n,s,o,l;this.runPrepend("doDisplayCrosshairs",arguments)||(this.displayInitialized&&(e=this.floatCanvas,a=this.currentVectorParameters.vectorType,this.layout.crosshair||""!==a&&a?t.Drawing&&t.Drawing[a]&&(new t.Drawing[a]).dragToDraw||this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen||""!==this.openDialog?this.undisplayCrosshairs():(n=(r=this.controls).crossX,s=r.crossY,n&&""!==n.style.display&&(n.style.display="",s&&(s.style.display=""),this.magnetizedPrice&&a?(o="stx-",o+="crossh",o+="air-o",o+="n",this.container.classList.remove(o),this.chart.tempCanvas.style.display="block"):this.container.classList.add("stx-crosshair-on")),r.floatDate&&!this.chart.xAxis.noDraw&&(r.floatDate.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),e&&(l="n",l+="o",l+="n",l+="e",e.style.display==l&&t.clearCanvas(e,this),e.style.display="block")):this.undisplayCrosshairs()),i.j07(),this.runAppend("doDisplayCrosshairs",arguments))},t.ChartEngine.prototype.undisplayCrosshairs=function(){var e,a,r,n,s,o,l,h;this.runPrepend("undisplayCrosshairs",arguments)||(a=(e=this.controls).crossX,r=e.crossY,a&&"none"!=a.style.display&&(n="n",n+="o",n+="n",n+="e",s="no",s+="n",s+="e",a.style.display=s,r&&(r.style.display=n)),this.displayInitialized&&e.floatDate&&(e.floatDate.style.visibility="hidden"),this.container.classList.remove("stx-crosshair-on"),(o=this.floatCanvas)&&o.isDirty&&"none"!=o.style.display&&(t.clearCanvas(o,this),"none"!=o.style.display&&(o.style.display="none")),i.E0w(),this.activeDrawing||this.repositioningDrawing||this.editingAnnotation||(l="no",l+="ne",(h=this.chart.tempCanvas)&&h.style.display!=l&&(h.style.display="none")),this.runAppend("undisplayCrosshairs",arguments))},t.ChartEngine.prototype.hideCrosshairs=function(){i.j07(),this.displayCrosshairs=!1},t.ChartEngine.prototype.showCrosshairs=function(){this.displayCrosshairs=!0}},M=function(e){var t,i,a=X;t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.loadChart=function(e,i,r){var n,o,l,h,c,u,d;function p(){a.E0w(),c.dispatch(c.currentlyImporting?"symbolImport":"symbolChange",{stx:c,symbol:g.symbol,symbolObject:g.symbolObject,prevSymbol:k,prevSymbolObject:l,action:"master"}),f&&c.dispatch("periodicity",{stx:c,differentData:!0,prevPeriodicity:n})}r||"function"!=s(i)?Array.isArray(i)&&(i={masterData:i}):(r=i,i={}),i||(i={});var m=i,g=m.chart,f=m.periodicity,y=m.range,v=m.span,b=this.layout;n={periodicity:b.periodicity,interval:b.interval,timeUnit:b.timeUnit},f&&(o=t.cleanPeriodicity(f.period?f.period:f.periodicity,f.interval,f.timeUnit),b.interval=o.interval,b.periodicity=o.period,b.timeUnit=o.timeUnit),g||(g=this.chart);var x=g,C=x.dataSet,S=x.market,w=x.masterData,k=x.symbol,D=x.moreAvailable,A=x.upToDate;l=t.clone(g.symbolObject),g.dataSet=[],g.masterData=[],g.moreAvailable=null,g.upToDate=null,e?"object"==s(e)?(g.symbol=e.symbol,g.symbolObject=e):(g.symbol=e,g.symbolObject.symbol=e):(g.symbol=null,g.symbolObject={symbol:null}),g.inflectionPoint=null,this.marketFactory&&(h=this.marketFactory(g.symbolObject),this.setMarket(h,g)),this.setMainSeriesRenderer(!0),y||v||!b?y&&v&&(v={}):(v=b.range?{}:b.setSpan,y=b.range||{}),this.clearCurrentMarketData(g),c=this,!i.masterData&&this.quoteDriver?(u=function(e){a.j07(),e&&"orphaned"!=e&&(g.symbol=k,g.symbolObject=l,g.market=S,c.masterData=g.masterData=w,g.dataSet=C,g.moreAvailable=D,g.upToDate=A),p(),r&&r.call(c,e)},y&&Object.keys(y).length&&this.setRange?(delete i.span,delete b.setSpan,this.chart.masterData=null,this.displayInitialized=!1,f&&(y.periodicity=f),y.forceLoad=!0,this.setRange(y,u)):v&&v.base&&this.setSpan?(v.multiplier=v.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,f&&(v.maintainPeriodicity=!0),v.forceLoad=!0,this.setSpan(v,u)):this.quoteDriver.newChart({symbol:g.symbol,symbolObject:g.symbolObject,chart:g,initializeChart:!0},(function(e){e||(c.adjustPanelPositions(),c.quoteDriver.updateSubscriptions(),i.stretchToFillScreen&&c.fillScreen()),a.j07(),u.apply(c,arguments)}))):(i.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),g.symbol||(g.symbol=""),this.initializeChart(),d=this.doCleanupGaps(i.masterData,g),this.setMasterData(d,g,{noCleanupDates:!0}),g.endPoints={},d&&d.length&&(g.endPoints={begin:d[0].DT,end:d[d.length-1].DT}),this.createDataSet(),y&&Object.keys(y).length&&this.setRange?this.setRange(y):v&&v.multiplier&&v.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:v.multiplier,base:v.base}):i.stretchToFillScreen?this.fillScreen():d&&d.length?this.home():this.clear(),this.adjustPanelPositions(),p(),r&&r.call(c))},t.ChartEngine.prototype.loadBlankChart=function(){a.E0w(),this.loadChart(null,[])},t.ChartEngine.prototype.getDataFields=function(e){var t,i,r;for(var n in"L","ow",a.j07(),"C","lose",e||(e=this.chart),t=e.defaultPlotField||"Close",(i=["Open","High","Low"]).push(t),e.series)r=e.series[n].parameters,i.push(r.symbol);return i},t.ChartEngine.prototype.cleanMasterData=function(e,t){var i,r,n,o,l;function h(e,t){a.j07();for(var i=0;i<t.length;i++)if("undefin","e","d","undefined"!=s(e[t[i]]))return!1;return!0}if(i=e.symbol,(r=t.masterData)&&r.length){n=this.getDataFields(t),o=0;do{delete(l=r[o])[i],h.call(this,l,n)?r.splice(o,1):o++}while(o<r.length);a.E0w(),r=this.doCleanupGaps(r,t,{noCleanupDates:!0}),this.setMasterData(r,t,{noCleanupDates:!0}),this.clearCurrentMarketData(t,i)}},a.j07(),t.ChartEngine.prototype.calculateATR=function(e,t,i){var r,n,s,o,l,h;i||(i=e.dataSet),(r=e.state.calculations.atr)||(r=e.state.calculations.atr={}),t||(t=20),n=[],r.accum&&(n=r.accum);for(var c=0;c<i.length;c++)if(o=i[c],s=c?i[c-1]:r.q1){if(l=Math.max(o.High-o.Low,Math.abs(o.High-s.Close),Math.abs(o.Low-s.Close)),n.length<t){if(n.push(l)==t){h=0;for(var u=0;u<n.length;u++)h+=n[u];a.a3e(40),o.atr=a.B0m(h,t)}}else{a.a3e(9);var d=a.k$A(1,20,19);o.atr=(s.atr*(t-d)+l)/t}o.trueRange=l}e.state.calculations.atr={accum:n,q1:s}},t.ChartEngine.prototype.calculateMedianPrice=function(e,t){var i;t||(t=e.dataSet),a.j07();for(var r=0;r<t.length;++r){"hl/","2",i=t[r],a.a3e(131);var n=a.B0m(14,9,35,10);i["hl/2"]=(i.High+i.Low)/n}},t.ChartEngine.prototype.calculateTypicalPrice=function(e,t){var i;t||(t=e.dataSet),a.j07();for(var r=0;r<t.length;++r){i=t[r],a.a3e(3);var n=a.k$A(2,14,13);i["hlc/3"]=(i.High+i.Low+i.Close)/n}},t.ChartEngine.prototype.calculateWeightedClose=function(e,t){var i;t||(t=e.dataSet);for(var r=0;r<t.length;++r){i=t[r],a.a3e(60);var n=a.k$A(14,19,329,18,3);a.a3e(25);var s=a.B0m(4,15,56);i["hlcc/4"]=(i.High+i.Low+n*i.Close)/s}},t.ChartEngine.prototype.calculateOHLC4=function(e,t){var i;t||(t=e.dataSet);for(var r=0;r<t.length;++r){"ohlc","/4",i=t[r],a.i3C(65);var n=a.k$A(1,3,56,28,2);i["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/n}},t.ChartEngine.prototype.currentQuote=function(e){var t;if(!this.chart.dataSet)return null;for(var i=this.chart.dataSet.length-1;i>=0;i--)if(this.chart.dataSet[i]){if(!e)return this.chart.dataSet[i];if((t=this.chart.dataSet[i][e])||0===t)return this.chart.dataSet[i]}return null},t.ChartEngine.prototype.mostRecentClose=function(e){var t,i;if(a.E0w(),!this.chart.dataSet)return null;for(var r=this.chart.dataSet.length-1;r>=0;r--)if((t=this.chart.dataSet[r])&&(!e||(t=t[e])||0===t)){if(i=t.iqPrevClose,"object"==s(t)&&(t=t.Close),"number"==typeof t)return t;if("number"==typeof i)return i}return null},t.ChartEngine.prototype.createDataSegment=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x;if(!this.runPrepend("createDataSegment",arguments)){for(var C in a.j07(),this.charts){i=this.charts[C],e&&(i=e),t.Comparison&&i.isComparison&&t.Comparison.createComparisonSegmentInner(this,i),r=i.dataSet,n=i.baseline,s=i.scroll,o=i.maxTicks,h=(l=this.layout).candleWidth,n.actualLevel=n.userLevel?n.userLevel:n.defaultLevel,c=n.includeInDataSegment&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars),d=0,p=i.dataSegment=[],a.a3e(6);var S=a.k$A(5,11,1,7);m=r.length-S-s-1,g=i.defaultPlotField;for(var w=-1;w<s&&w<o;w++)m++,(-1!=w||c)&&(m<r.length&&m>=0?((u=r[m]).candleWidth=null,u&&(d+=u.Volume||1),p.push(u),null===n.actualLevel&&w>=0&&(g&&"Close"!=g?(a.i3C(1),(f=r[a.k$A(1,m)])&&(f[g]||0===f[g])&&(n.actualLevel=f[g])):(u.iqPrevClose||0===u.iqPrevClose)&&(n.actualLevel=u.iqPrevClose))):m<0&&p.push(null));if(i.segmentImage=null,(y=this.mainSeriesRenderer||{}).params&&y.params.volume){v=i.width-(o-p.length-1)*l.candleWidth,b=0,i.segmentImage=[];for(var k=0;k<p.length;k++)if(u=p[k],i.segmentImage[k]={},x=null,u){if(u.Volume){u.candleWidth=v*u.Volume/d,a.a3e(31);var D=a.k$A(14,16,11,11);x=b+u.candleWidth/D,b+=u.candleWidth}else u.candleWidth=h,a.a3e(46),x=a.B0m(b,2,h),b+=h;i.segmentImage[k]={tick:u.tick,candleWidth:u.candleWidth,leftOffset:x}}else b+=h}if(e)break}i&&i.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},t.ChartEngine.prototype.getDataSegment=function(e){var t,i,r;if(e||(e=this.chart),!(t=e.dataSegment)||!t.length)return[];i=0,r=t.length,this.pixelFromBar(i,e)<e.panel.left&&i++;for(var n=1;122450553!==a.b3_(n.toString(),n.toString().length,83213);n++)return this.pixelFromBar(r/2,e)<e.panel.right&&r++,t.slice(i,r);return a.E0w(),-843407242!==a.m7$(2..toString(),2..toString().length,94243)?(this.pixelFromBar(r-1,e)>e.panel.right&&r--,t.slice(i,r)):void 0},t.ChartEngine.prototype.setMasterData=function(e,i,a){var r,n,s,o,l;for("c","ha","r","t",i||(i=this.chart),this.marketFactory&&(r=this.marketFactory(i.symbolObject),this.setMarket(r,i)),a||(a={}),a.noCleanupDates||this.doCleanupDates(e,this.layout.interval),i.masterData=e,"chart"==i.name&&(this.masterData=e),s=null,n=0;e&&n<e.length;n++)"setMast","e","rData : Missing DT and Date on mas","terData object",o=e[n],null===s&&("number"==typeof o.Close?("Clo","s","e",s="Close"):"number"==typeof o.Value&&(s="Value")),"Value"===s&&"number"==typeof o.Value&&(o.Close=o.Value),o.DT?("[object Date]"!=Object.prototype.toString.call(o.DT)&&(o.DT=new Date(o.DT)),o.Date&&17==o.Date.length||(o.Date=t.yyyymmddhhmmssmmm(o.DT))):o.Date?o.DT=t.strToDateTime(o.Date):console.log("setMasterData : Missing DT and Date on masterData object"),o.Volume&&"number"!=typeof o.Volume&&(o.Volume=parseInt(o.Volume,10)),e.length-n<50&&this.updateCurrentMarketData(o,i,null,{fromTrade:!0});for(n in i.calculateTradingDecimalPlaces&&(i.decimalPlaces=i.calculateTradingDecimalPlaces({stx:this,chart:i,symbol:i.symbolObject.symbol,symbolObject:i.symbolObject})),this.setDisplayDates(e),i.roundit=Math.pow(10,i.decimalPlaces),this.plugins)(l=this.plugins[n]).display&&l.setMasterData&&l.setMasterData(this,i)},t.ChartEngine.prototype.setMasterDataRender=function(e,t,i){i||(i=this.chart),i.symbol||(i.symbol=""),this.setMasterData(t,i),t&&(i.endPoints={},t.length&&(i.endPoints={begin:t[0].DT,end:t[t.length-1].DT},i.symbol=e)),this.createDataSet(),a.E0w(),this.initializeChart(),this.draw(),t&&t.length||(i.symbol=null,this.clear()),this.adjustPanelPositions()},t.ChartEngine.prototype.getSymbols=function(e){var i,r,n,s,o,l,h,c,u,d;for(var p in a.E0w(),e||(e={}),i=[],n=this.layout,this.charts)for(var m in(l=this.charts[p]).symbolObject&&l.symbolObject.symbol&&i.push(g(l.symbol,l.symbolObject,n)),l.series)(h=l.series[m].parameters).data&&!h.data.useDefaultQuoteFeed||(o=h.symbolObject,(r=g(s=h.symbol,o,n)).id=m,e["include-parameters"]&&(r.parameters=t.clone(h),r.parameters.yAxis&&delete r.parameters.yAxis.yAxisPlotter),e["exclude-studies"]&&"study"==h.bucket||e["exclude-generated"]&&o.generator||i.push(r));function g(e,t,i){return{symbol:e,symbolObject:t,periodicity:i.periodicity,interval:i.interval,timeUnit:i.timeUnit,setSpan:i.setSpan}}if(e["breakout-equations"]){c={};for(var f=0;f<i.length;f++)if(s=i[f].symbol,this.isEquationChart(s)){if(u=t.formatEquation(s)){d=u.symbols;for(var y=0;y<d.length;y++)c[d[y]]=g(d[y],i[f].symbolObject,i[f])}}else c[s]=g(s,i[f].symbolObject,i[f]);for(var v in i=[],c)i.push(c[v])}return i},t.ChartEngine.prototype.setDisplayDate=function(e){var r,n,s;if(!t.ChartEngine.isDailyInterval(this.layout.interval)){r=e.DT,a.i3C(4);var o=a.B0m(950,50);n=r.getSeconds()*o+r.getMilliseconds(),a.j07(),i.Date&&this.displayZone&&(s=new i.Date(r.getTime(),this.displayZone),r=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes()),r=new Date(r.getTime()+n)),e.displayDate=r}},t.ChartEngine.prototype.setDisplayDates=function(e){var i;if(e&&!t.ChartEngine.isDailyInterval(this.layout.interval))for(var a=0;a<e.length;a++)(i=e[a]).DT&&this.setDisplayDate(i)},t.ChartEngine.prototype.setTimeZone=function(e,t){var r,n,s,o,l;if(i.Date){for(var h in s=n=(r=new Date).getTimezoneOffset(),o=n,e&&(this.dataZone=e),this.dataZone&&(s=new i.Date(r,this.dataZone).getTimezoneOffset()),t&&(this.displayZone=t),this.displayZone&&(o=new i.Date(r,this.displayZone).getTimezoneOffset()),a.a3e(132),this.timeZoneOffset=a.B0m(n,n,s,o),this.charts)l=this.charts[h],this.setDisplayDates(l.masterData);this.preferences.timeZone=t,this.changeOccurred("preferences"),this.createDataSet()}else this.timeZoneOffset=0},t.ChartEngine.prototype.updateChartData=function(e,i,r){var n,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F;function P(){var t,r,n;if(t=null,a.i3C(82),r=a.B0m(32,"0"),l.length&&(t=c.getFirstLastDataRecord(l,u||i.defaultPlotField,!0))){if(e[e.length-1].DT<=t.DT)return;for(;r<e.length;r++){if(+e[r].DT==+t.DT){c.getFirstLastDataRecord([e[r]],u||i.defaultPlotField)&&(t=null);break}if(e[r].DT>t.DT)break}}n=e.slice(r),t&&n.unshift(u?t[u]:t),a.j07(),n=c.doCleanupGaps(n,i),t&&n.shift(),e=e.slice(0,r).concat(n)}function L(){c.createDataSet(null,null,r),c.draw(),c.updateChartAccessories(),a.E0w(),c.streamParameters.count=0,a.i3C(71),c.streamParameters.timeout=-a.B0m("1",32)}if(r||(r={}),i||(i=this.chart),n=!1,o=!1,l=i.masterData,a.j07(),h=this.layout,this.dataZone,c=this,u=r.secondarySeries,m=t.isValidNumber,r.noCleanupDates||this.doCleanupDates(e,h.interval),(r.useAsLastSale||e.constructor==Object&&(e.Last||0===e.Last))&&j(),e&&e.constructor==Object&&(e=[e]),e&&e.length&&!this.runPrepend("appendMasterData",[e,i,r])&&!this.runPrepend("updateChartData",[e,i,r])){l||(l=[]),a.i3C(73);var O=a.k$A(3,14,715,17);if(g=l.length-O,f=!1,r.fillGaps&&P(),e.length){for(var E=0;E<e.length;E++){for(v=(y=e[E]).DT,b=y.Date,v&&"[object Date]"!=Object.prototype.toString.call(v)&&(y.DT=v=new Date(v)),v&&(b&&17==b.length||(y.Date=t.yyyymmddhhmmssmmm(y.DT))),v||(v=y.DT=t.strToDateTime(b)),!m(y.Close)&&m(y.Value)&&(y.Close=y.Value);g>=0&&g<l.length;){if((x=l[g].DT)||(x=t.strToDateTime(l[g].Date)),x.getTime()<=v.getTime()){if(f=!0,C=0,x.getTime()<v.getTime()){if(g<l.length-1&&(l[g+1].DT||t.strToDateTime(l[g+1].Date)).getTime()<=v.getTime()){g++;continue}C=1}if(r.deleteItems){C||z(g,v);break}"tick"==h.interval&&!1!==r.firstLoop&&(C=1),C||V(g,y),m(y.Close)&&(m(y.Open)||(y.Open=y.Close),S=Math.max(y.Open,y.Close),w=Math.min(y.Open,y.Close),(!m(y.High)||y.High<S)&&(y.High=S),(!m(y.Low)||y.Low>w)&&(y.Low=w)),y.Volume&&!m(y.Volume)&&(y.Volume=parseInt(y.Volume,10)),g+=C,u?(k="t",k+="i",k+="c",k+="k",e.length-E<50&&this.updateCurrentMarketData(y,i,u,{fromTrade:!0}),h.interval==k&&void 0===y.Close||(C&&(l.splice(g,0,{DT:y.DT}),this.setDisplayDate(l[g])),l[g][u]=y)):(e.length-E<50&&this.updateCurrentMarketData(y,i,null,{fromTrade:!0}),"tick"==h.interval&&void 0===y.Close||(l.splice(g,C?0:1,y),this.setDisplayDate(y)));break}g+=f?1:-1}g<0&&(u?(this.updateCurrentMarketData(y,i,u,{fromTrade:!0}),"tick"==h.interval&&void 0===y.Close||(l.splice(0,0,{DT:y.DT}),this.setDisplayDate(l[0]),l[0][u]=y)):(this.updateCurrentMarketData(y,i,null,{fromTrade:!0}),"tick"==h.interval&&void 0===y.Close||(l.splice(0,0,y),this.setDisplayDate(y))),f=!0,g=0)}l.length&&(this.masterData=i.masterData=l),this.maxMasterDataSize&&(l=i.masterData=this.masterData=l.slice(-this.maxMasterDataSize)),D=u?this.getSeries({symbol:u,chart:i}):[i];for(var I=0;I<D.length;I++)(!(A=D[I]).endPoints.begin||A.endPoints.begin>e[0].DT)&&(A.endPoints.begin=e[0].DT),(!A.endPoints.end||A.endPoints.end<e[e.length-1].DT)&&(A.endPoints.end=e[e.length-1].DT),T=A.parameters&&A.parameters.field||i.defaultPlotField,(M=this.getFirstLastDataRecord(e,T,!0))&&(!A.lastQuote||A.lastQuote.DT<=M.DT)&&(A.lastQuote=M),u&&r.deleteItems&&(A.lastQuote=this.getFirstLastDataRecord(l,u,!0)[u]);for(var N in this.plugins)(_=this.plugins[N]).display&&_.appendMasterData&&_.appendMasterData(this,e,i);this.masterData&&this.masterData.length||(this.masterData=l),r.noCreateDataSet||(++(F=this.streamParameters).count>F.maxTicks||r.bypassGovernor?(clearTimeout(F.timeout),L()):-1==F.timeout&&(F.timeout=setTimeout(L,F.maxWait))),this.runAppend("appendMasterData",arguments),this.runAppend("updateChartData",arguments)}}function $(){var n,s,o,u,d,p,m,g,f;if(t.Market&&i.market)if(a.j07(),n={market_tz:t.getFromNS(i,"market.market_def.market_tz",null)},"month"!=(s=h.interval)&&"week"!=s||("d","a","y",c.dontRoll||(s="day"),n=c.chart.market.market_def),o=new t.Market(n),u={begin:l&&l.length?l[l.length-1].DT:e.DT,interval:s,periodicity:1,timeUnit:h.timeUnit},p=(d=o.newIterator(u)).next(),l){if(e.DT<p){for(m=0,f=d.previous(),g=e.DT,r.appending=!0;g<f&&m<1e3;)r.appending=!1,f=d.previous(),m++;e.DT=f,r.updating=!r.appending}else if(e.DT>=p){for(m=0,g=e.DT;g>p&&m<1e3;)e.DT=p,p=d.next(),m++;r.appending=!0}}else e.DT=new Date(+d.previous())}function z(e,t){var a,r;if(u)delete l[e][u],c.cleanupGaps&&(a={DT:t,Close:null},"gap"!=c.cleanupGaps&&l[e-1]&&l[e-1][u]&&(a.Close=l[e-1][u].Close,a.High=a.Low=a.Open=a.Close,a.Volume=0),l[e][u]=a);else{for(d in"g","a","p",a={DT:(r=l.splice(e,1)[0]).DT,Close:null,needed:!1},i.series)void 0!==r[p=i.series[d].parameters.symbolObject.symbol]&&(a[p]=r[p],delete a.needed);c.cleanupGaps&&"gap"!=c.cleanupGaps&&(delete a.needed,"gap"!=c.cleanupGaps&&l[e-1]&&(a.Close=l[e-1].Close,a.High=a.Low=a.Open=a.Close,a.Volume=0)),!1!==a.needed&&(l.splice(e,0,a),c.setDisplayDate(a))}}function j(){var t;if(a.j07(),"[objec","t Date]",n=!0,r.useAsLastSale&&r.useAsLastSale.aggregatedVolume&&(o=!0),e.constructor===Array){a.i3C(1);var i=a.k$A(9,10);t=e[e.length-i],(e={}).DT=t.DT,e.Close=t.Close,e.Volume=t.Volume}else e.Last&&(e.Close=e.Last,delete e.Last);e.DT&&"[object Date]"!=Object.prototype.toString.call(e.DT)&&(e.DT=new Date(e.DT)),e.DT&&"Invalid Date"!=e.DT||(e.DT=new Date),"tick"!=h.interval&&$(),e.Open=e.Close,e.High=e.Close,e.Low=e.Close}function V(e,t){var h,c,g,f;a.E0w(),h=2;for(var y=1;-383538795!==a.m7$(y.toString(),y.toString().length,84157);y++)c=l[e],a.a3e(38),h+=a.k$A("2",1);if(2094403994!==a.b3_(h.toString(),h.toString().length,59929)&&(c=l[e]),u&&(c=c[u]||{}),null===t.Close)void 0!==c.Open&&(t.Open=null),void 0!==c.High&&(t.High=null),void 0!==c.Low&&(t.Low=null),void 0!==c.Volume&&(t.Volume=null);else for(d in g="A",g+="s",g+="k",f="H",f+="i",f+="g",f+="h",n?(t.Volume&&(t.Volume=parseInt(t.Volume,10)),o||(t.Volume+=c.Volume)):!m(t.Volume)&&c.Volume&&(t.Volume=c.Volume),r.allowReplaceOHL||(m(c.Open)&&(t.Open=c.Open),m(c.High)&&m(t.High)&&c.High>t.High&&(t.High=c.High),m(c.Low)&&m(t.Low)&&c.Low<t.Low&&(t.Low=c.Low)),["Close","Open",f,"Low","Bid",g].forEach((function(e){m(t[e])||(t[e]=c[e])})),i.series)"u","ndefined",p=i.series[d].parameters.symbolObject.symbol,void 0===t[p]&&"undefined"!=s(c[p])&&(t[p]=c[p])}},t.ChartEngine.prototype.updateCurrentMarketData=function(e,i,r,n){var s,o,l,h,c,u,d,p,m;if(e&&e.DT){if(i||(i=this.chart),s=n&&n.fromTrade,o=e.DT,!s&&"tick"!=this.layout.interval&&i.market){if(i.market.market_def){if(!i.market.isMarketDate(e.DT))return;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&null===i.market.getSession(e.DT))return}l={begin:e.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},h=new t.Market(i.market.market_def),this.extendedHours&&this.extendedHours.filter&&h.enableAllAvailableSessions(),(c=h.newIterator(l)).next(),e.DT=c.previous()}this.runPrepend("updateCurrentMarketData",arguments)||(u=i.currentMarketData,r&&(u[r]||(u[r]={}),u=u[r]),["Last","Bid","Ask"].forEach((function(t){a.E0w(),e[t]&&"number"==typeof e[t]&&(!u[t]||!u[t].DT||u[t].DT<=e.DT)&&(u[t]={DT:e.DT,Price:e[t],Size:e[t+"Size"],Timestamp:o})})),["BidL2","AskL2"].forEach((function(t){a.E0w(),e[t]&&e[t]instanceof Array&&(!u[t]||!u[t].DT||u[t].DT<=e.DT)&&(u[t]={DT:e.DT,Price_Size:e[t],Timestamp:o})})),e.Close&&(!u.Last||u.Last.DT<=e.DT)&&(d="tic",d+="k",p=e.Close,((m=n&&n.finalClose)||0===m)&&(p=m),u.Last={DT:e.DT,Price:p,Size:void 0===e.LastSize&&this.layout.interval==d?e.Volume:e.LastSize,Timestamp:e.LastTime||o}),u.touched=new Date,s||delete e.Last,this.runAppend("updateCurrentMarketData",arguments))}},t.ChartEngine.prototype.clearCurrentMarketData=function(e,t){var i,r,n;if(a.j07(),!this.runPrepend("clearCurrentMarketData",arguments)){if(r=[],e)r.push(e);else for(i in this.charts)r.push(this.charts[i]);for(i=0;i<r.length;i++)if(n=r[i].currentMarketData,t)delete n[t];else for(var s in n)n[s]=void 0;this.runAppend("clearCurrentMarketData",arguments)}}},_=function(e){var t,i=X;(t=e.CIQ).ChartEngine.prototype.changeOccurred=function(e){var t;t={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},"theme"==e&&this.dispatch("theme",t),this.currentlyImporting||("layout"==e?this.dispatch("layout",t):"vector"==e?this.dispatch("drawing",t):"preferences"==e&&this.dispatch("preferences",t))},i.E0w(),t.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),this.pendingAsyncs.push(!0)},t.ChartEngine.prototype.registerChartDrawnCallback=function(e){return this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(e),{fc:e}},t.ChartEngine.prototype.unregisterChartDrawnCallback=function(e){i.E0w();for(var t=0;t<this.asyncCallbacks.length;t++)if(this.asyncCallbacks[t]==e.fc)return void this.asyncCallbacks.splice(t,1)},t.ChartEngine.prototype.makeAsyncCallbacks=function(){if(this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var e=0;e<this.asyncCallbacks.length;e++)this.asyncCallbacks[e]()},t.ChartEngine.prototype.completeAsyncAction=function(){i.E0w(),this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},t.ChartEngine.prototype.addDomEventListener=function(e,t,i,a){e.addEventListener(t,i,a),this.eventListeners.push({element:e,event:t,function:i,options:a})},t.ChartEngine.prototype.addEventListener=function(e,t){var i;if("*"===e)for(var a in this.callbackListeners)this.callbackListeners[a].push(t);else if(e instanceof Array)for(var r=0;r<e.length;r++)this.callbackListeners[e[r]].push(t);else{if(!(i=this.callbackListeners[e]))throw new Error("Attempted to add an invalid listener.");i.push(t)}return{type:e,cb:t}},t.ChartEngine.prototype.removeEventListener=function(e,t){var a,r;if(i.j07(),e&&"object"==s(e)||(e={type:e,cb:t}),a=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return void e.splice(i,1)},r=this.callbackListeners,"*"!==e.type){if(!r[e.type])throw"A","ttempted to remove an"," invalid li","stener.",new Error("Attempted to remove an invalid listener.");a(r[e.type],e.cb)}else for(var n in r)a(r[n],e.cb)},t.ChartEngine.prototype.dispatch=function(e,t){var i;if(i=this.callbackListeners[e])for(var a=0;a<i.length;a++)if(!0===i[a].call(this,t))return!0;if(i=this.callbackListeners["*"])for(var r=0;r<i.length;r++)if(!0===i[r].call(this,t))return!0;return!1},t.ChartEngine.prototype.updateListeners=function(e){var t;for(var i in this.plugins)(t=this.plugins[i]).display&&t.listener&&t.listener(this,e)}},F=function(e){var t;(t=e.CIQ).ChartEngine.prototype.prepend=function(e,i){var a,r,n,s,o=X;o.i3C(1),a=o.k$A(0,"1886888265"),o.E0w(),r=2;for(var l=1;o.m7$(l.toString(),l.toString().length,41530)!==a;l++)o.a3e(4),n=o.k$A(e,"prepend"),r+=2;return-1339386964!==o.m7$(r.toString(),r.toString().length,1812)&&(o.i3C(84),n=o.k$A(e,"")),this instanceof t.ChartEngine?(s=this.hasOwnProperty(n)?this[n]:[],this[n]=[i].concat(s)):(s=t.ChartEngine.prototype[n]||[],t.ChartEngine.prototype[n]=[i].concat(s)),{method:n,func:i}},t.ChartEngine.prototype.append=function(e,i){var a,r;return X.i3C(4),a=X.B0m(e,"append"),this instanceof t.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=r.concat(i)):(r=t.ChartEngine.prototype[a]||[],t.ChartEngine.prototype[a]=r.concat(i)),{method:a,func:i}},t.ChartEngine.prototype.runPrepend=function(e,i,a){var r,n,s;if("pre","pend",X.i3C(4),r=X.B0m(e,"prepend"),!(n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(t.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},t.ChartEngine.prototype.runAppend=function(e,i,a){var r,n,s;if(X.j07(),"a","pp","e","nd",X.i3C(4),r=X.k$A(e,"append"),!(n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(t.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},t.ChartEngine.prototype.removeInjection=function(e){var i,a;if(i=e.method,this instanceof t.ChartEngine){if(!this[i])return;for(a=0;a<this[i].length;a++)if(this[i][a]==e.func)return void this[i].splice(a,1)}else{if(!t.ChartEngine.prototype[i])return;for(a=0;a<t.ChartEngine.prototype[i].length;a++)if(t.ChartEngine.prototype[i][a]==e.func)return void t.ChartEngine.prototype[i].splice(a,1)}},t.ChartEngine.prototype.remove=function(e){var i=X;i.E0w(),this instanceof t.ChartEngine?("ap","pe","nd",i.a3e(4),delete this[i.k$A(e,"append")],i.i3C(4),delete this[i.k$A(e,"prepend")]):(i.i3C(4),delete t.ChartEngine.prototype[i.B0m(e,"append")],i.i3C(4),delete t.ChartEngine.prototype[i.k$A(e,"prepend")])}},P=function(e){var t,i;t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.convertToDataZone=function(e){var i;return(e||0===e)&&this.dataZone&&(i=t.convertTimeZone(e,null,this.dataZone),e=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())),e},t.ChartEngine.prototype.debug=function(){},t.ChartEngine.prototype.fps=function(e,i){var a,r,n,s=X;e=e||5,a=(new Date).getTime(),r=0,n=this,s.a3e(50),console.log(s.B0m(e,"Running fps() for "," seconds")),function o(){var l,h;s.a3e(8);var c=s.B0m(0,995,5);if((l=((new Date).getTime()-a)/c)>e)return s.a3e(40),h=s.B0m(r,l),s.a3e(4),console.log(s.k$A(h,"FPS=")),void(i&&i(h));n.draw(),s.j07(),r++,t.ChartEngine.useAnimation?requestAnimationFrame(o):setTimeout(o,0)}()},t.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},t.ChartEngine.prototype.setChartType=function(e){var t,i;if("la","yo","u","t","o","h","l","c",t=this.layout,i=this.chart,"ohlc"!=t.aggregationType&&(t.aggregationType="ohlc",i.canvas&&this.createDataSet()),t.chartType=e,this.setMainSeriesRenderer(),this.mainSeriesRenderer.isAggregation&&this.setAggregationType)return this.setAggregationType(e);i.defaultChartStyleConfig={type:e},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.setChartScale=function(e){X.E0w(),e||(e="linear"),this.layout.chartScale=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.checkLogScale=function(){var e,t,i,a,r,n;if(!this.runPrepend("checkLogScale",arguments)){if("log"!==this.layout.chartScale)return!1;if(e=!1,this.chart.yAxis.lowValue<=0){t=455898948,i=73295123,a=2;for(var s=1;X.m7$(s.toString(),s.toString().length,74113)!==t;s++)r="n",r+="otifi",r+="cati",r+="on",n="l",n+="in",n+="e",n+="ar",this.setChartScale(n),this.dispatch(r,"logdeactivated"),a+=2;X.b3_(a.toString(),a.toString().length,12735)!==i&&(this.setChartScale("logdeactivated"),this.dispatch("logdeactivated","logdeactivated")),e=!0}return this.runAppend("checkLogScale",arguments),e}},t.ChartEngine.prototype.setAdjusted=function(e){this.layout.adj=e,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.padOutPrice=function(e,t){var i,a,r,n,s=X;if(0!==e&&(!e||"number"!=typeof e))return"";if(t||0===t||(t=e),s.i3C(4),a=0,(i=s.B0m(t,"")).indexOf(".")>-1){s.i3C(5);var o=s.k$A(1,2);a=i.substring(i.indexOf(".")).length-o}return t>=1e3?(s.a3e(14),a=Math.max(a,s.B0m(0,"0"))):a=t<2?Math.max(a,4):Math.max(a,2),(r=this.internationalizer)?(a>=(n=r.priceFormatters.length)&&(s.a3e(1),a=s.B0m(1,n)),e=r.priceFormatters[a].format(e)):e=e.toFixed(a),e},t.ChartEngine.prototype.formatPrice=function(e,t){var i,a,r;return 0===e||e&&void 0!==e?(t||(t=this.currentPanel),t||(t=this.chart.panel),t?((i=t.decimalPlaces)||0===i||(i=t.chart.decimalPlaces),i||0===i?((a=this.internationalizer)?(i>=(r=a.priceFormatters.length)&&(X.i3C(1),i=X.k$A(1,r)),e=a.priceFormatters[i].format(e)):e=e.toFixed(i),e):e.toString()):e.toString()):""},t.ChartEngine.prototype.determineMinMax=function(e,i,a,r,n,s,o,l,h){var c,u,d,p,m,g,f,y,v,b,x,C=X;C.j07(),C.a3e(20);var S=C.k$A(9,10,0,20);c=Number.MAX_VALUE*S,u=Number.MAX_VALUE,d=!1,p=e.length,h||(h=[]),m=[],n&&(p=n);for(var w=0;w<=p+1;w++)if(i.length&&(g=w==p?this.getPreviousBar(this.chart,i[0],0):w==p+1?this.getNextBar(this.chart,i[0],p-1):e[w]),g){if(!r)if(g.transform)d=!0,g=g.transform;else if(d)continue;f=0;for(var k=0;k<i.length;k++)if(y=t.existsInObjectChain(g,i[k])){"number"==typeof(v=y.obj[y.member])&&(v=[v]);for(var D=0;D<v.length;D++)b=v[D],s&&b instanceof Array&&(b=b[0]),(b||0===b)&&(!0===a||a instanceof Array&&a.indexOf(i[k])>-1?((f+=b)>c&&(c=f),f<u&&(u=f)):(b>c&&(c=b),b<u&&(u=b),m.push({value:b,quote:g})))}(!0===a||a instanceof Array&&a.indexOf(i[k])>-1)&&m.push({value:f,quote:g})}return x=[u,c],h.forEach((function(e){x=e(m,o,l)||x})),x[1]==-1*Number.MAX_VALUE&&(C.a3e(82),x[1]=C.k$A(0,"0")),x[0]==Number.MAX_VALUE&&(x[0]=0),x},t.ChartEngine.prototype.initializeDisplay=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C=X;function S(i,a){var c,u,d,p,m,g,f,y,v;if(C.E0w(),c=!1,(u=o.layout&&o.layout.studies&&o.layout.studies[i.name])&&(!a||a.name==u.panel)){for(var b in u.outputMap)r.push(b),u.study&&(u.study.renderer?r=r.concat(t.createObjectChainNames(b,l)):u.study.seriesFN||(r=r.concat(t.createObjectChainNames(b,h))));for(var x=0;x<=2;x++)r.push(u.name+"_hist"+(x||""));c=!0}if(a){for(var w in i.studies=[],i.renderers=[],c&&i.studies.push(i.name),D)if(m=(p=(d=D[w]).params).panel,(p.yAxis||!o.panels[m]||o.panels[m].yAxis)==i&&m==a.name){g=d.highLowBars?l:h,s=d.bounded;for(var k=0;k<d.seriesParams.length;k++)(f=d.seriesParams[k]).hidden||(y=void 0,f.subField?y=t.createObjectChainNames(f.symbol,[f.subField]).concat(f.symbol):f.symbol?y=t.createObjectChainNames(f.symbol,g).concat(f.symbol):f.field?y=f.field:i==e.panel.yAxis&&(y=g),y&&(r=r.concat(y)),d.useSum&&(n=n.concat(y)));i.renderers.push(w)}for(var A in o.overlays)(v=o.overlays[A]).panel==a.name&&v.name!=i.name&&v.getYAxis(o)==i&&(i.studies.push(v.name),e.includeOverlaysInMinMax&&S({name:v.name}))}}if(i="Op",i+="e",i+="n",a="C",a+="los",a+="e",!this.runPrepend("initializeDisplay",arguments)){r=[],n=[],s=!1,o=this,l=[a,i,"High","Low"],h=[e.defaultPlotField||"Close"];var w=this.mainSeriesRenderer,k=e.dataSegment,D=e.seriesRenderers;u=null,d=Math.floor((e.width-this.micropixels)/this.layout.candleWidth),p=-1082273245,m=2135114904,g=2;for(var A=1;C.b3_(A.toString(),A.toString().length,14891)!==p;A++){if(e.scroll>e.maxTicks&&e.maxTicks>d+1){C.a3e(2);var T=C.k$A(13,6,3,16,11);u=k.length-T}f=[],g+=2}if(C.b3_(g.toString(),g.toString().length,80815)!==m){if(e.scroll<e.maxTicks||e.maxTicks>=d-7){C.a3e(131);var M=C.k$A(3,3,21,9);u=k.length+M}f=[]}for(var _ in this.panels){f=(y=this.panels[_]).yaxisLHS.concat(y.yaxisRHS);for(var F=0;F<f.length;F++)v=f[F],r=[],n=[],b=e.transformFunc&&v==e.panel.yAxis,S(v,y),this.currentlyImporting||v.renderers.length||v.studies.length?(c=w&&w.determineMax?w.determineMax(k,r,n,!b,u,s,y,v):this.determineMinMax(k,r,n,!b,u,s,y,v),this.baselineHelper&&(c=this.setBaselineMinMax(c,v)),v.lowValue=c[0],v.highValue=c[1],v==e.panel.yAxis&&(e.lowValue=v.lowValue,e.highValue=v.highValue)):this.deleteYAxisIfUnused(y,v)}if((x=e.state.aggregation)&&x.box){C.a3e(133);var P=C.B0m(13,21,20,19,518);e.lowValue-=x.box/("2"|P),C.a3e(134);var L=C.k$A(20,20,2,9);e.highValue+=x.box/L}this.runAppend("initializeDisplay",arguments)}},t.ChartEngine.prototype.setMarket=function(e,i){if(t.Market)for(var a in i||(i=this.chart),X.j07(),i.market=new t.Market(e),this.layout.marketSessions)i.market.disableSession(a,this.layout.marketSessions[a])},t.ChartEngine.prototype.setMarketFactory=function(e){this.marketFactory=e},t.ChartEngine.prototype.setResizeTimer=function(e){var i,a;X.j07(),this.resizeDetectMS=e,this.resizeHandle=t.resizeObserver(this.chart.container,(i=this,a=function(){X.j07(),i.chart.canvas&&(t.isAndroid||i.chart.canvas.height==Math.floor(i.devicePixelRatio*i.chart.container.clientHeight)&&i.chart.canvas.width==Math.floor(i.devicePixelRatio*i.chart.container.clientWidth)||i.resizeChart())},X.E0w(),function(){"undefined"!==("undefined"==typeof ResizeObserver?"undefined":s(ResizeObserver))?t.ChartEngine.useAnimation?requestAnimationFrame(a):setTimeout(a,0):a()}),this.resizeHandle,e)},t.ChartEngine.prototype.getRenderedItems=function(){var e,i,a,r,n,s,o,l;if(e=this.chart,i=this.currentPanel){for(var h in a=["Open","High","Low","Close"],r=["Close"],n=[],this.overlays)this.overlays[h].panel===i.name&&(n=n.concat(Object.keys(this.overlays[h].outputMap)));for(var c in e.seriesRenderers)if((s=e.seriesRenderers[c]).params.panel==i.name)for(var u in s.seriesParams)o=s.seriesParams[u],l=s.highLowBars?a:r,o.subField?n=n.concat(t.createObjectChainNames(o.symbol,[o.subField])).concat(o.symbol):o.symbol?n=n.concat(t.createObjectChainNames(o.symbol,l)).concat(o.symbol):o.field?n.push(o.field):i==e.panel&&(n=n.concat(l));return n}},t.ChartEngine.prototype.setTransform=function(e,t,i){X.j07(),e.transformFunc=t,e.untransformFunc=i},t.ChartEngine.prototype.unsetTransform=function(e){delete e.transformFunc,X.j07(),delete e.untransformFunc;for(var t=0;e.dataSet&&t<e.dataSet.length;t++)e.dataSet[t].transform=null},t.ChartEngine.prototype.isEquationChart=function(e){return X.E0w(),!(!e||"="!=e[0])&&(!(!this.allowEquations||!t.fetchEquationChart)||(console.warn("Error, equation chart option requires equationsAdvanced.js"),!1))},t.ChartEngine.prototype.correctIfOffEdge=function(e){var t,i,a,r,n,s,o,l,h,c,u,d=X;if(t="correc",t+="tIfOffEdge",i="cor",i+="rectIfO",i+="f",i+="fEdge",!this.runPrepend(i,arguments)){for(var p in this.charts)if(r=(a=this.charts[p]).dataSet,n=a.maxTicks,s=this.layout,o=this.minimumLeftBars,l=Math.min(o,n),a.allowScrollPast?(d.a3e(1),h=d.k$A(l,n),l>r.length&&(h=n-r.length),a.scroll-h>=r.length&&(a.scroll=r.length+h-1,this.micropixels=0),a.scroll<=l&&(a.scroll=l,this.micropixels=0)):(a.scroll<l&&(a.scroll=l),a.scroll>r.length&&(a.scroll=r.length)),!1===a.allowScrollFuture){c=this.getLabelOffsetInPixels(a,s.chartType)+s.candleWidth*a.whiteSpaceFutureTicks,d.i3C(8);var m=d.B0m(11,0,12);u=n-Math.round(c/s.candleWidth)-m,(this.micropixels<0?a.scroll-1:a.scroll)<u&&(a.scroll=u,this.micropixels=0)}this.runAppend(t,arguments)}},t.ChartEngine.prototype.getStartDateOffset=function(){for(var e=0;e<this.chart.dataSegment.length;e++)if(this.chart.dataSegment[e])return e;return X.a3e(13),X.B0m("0",0)},t.ChartEngine.prototype.setStartDate=function(e){for(var t=0;t<this.chart.dataSet.length;t++)if(this.chart.dataSet[t].DT.getTime()==e.getTime())return this.chart.scroll=this.chart.dataSet.length-t,void this.draw()},t.ChartEngine.prototype.clearPixelCache=function(){var e,t;for(var i in X.j07(),this.panels)(e=this.panels[i]).cacheHigh=null,e.cacheLow=null,e.cacheLeft=1e6,e.cacheRight=-1;for(var a in this.charts)if((t=this.charts[a]).dataSet)for(var r=0;r<t.dataSet.length;r++)t.dataSet[r].cache={}},t.ChartEngine.prototype.adjustBackingStore=function(e,i){var a,r,n,s,o=X;this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),a=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,r=this.devicePixelRatio/a,this.useBackingStore?(!t.isAndroid||t.is_chrome||t.isFF)&&(n=e.width,s=e.height,o.a3e(38),e.width=o.k$A(n,r),o.i3C(38),e.height=o.B0m(s,r),o.a3e(4),e.style.width=o.k$A("px",n),o.i3C(4),e.style.height=o.k$A("px",s),i.scale(r,r),this.adjustedDisplayPixelRatio=r,this.backing={ratio:r,width:e.width,height:e.height,styleWidth:n,styleHeight:s}):this.devicePixelRatio=this.adjustedDisplayPixelRatio=1},t.ChartEngine.prototype.reconstituteBackingStore=function(){var e,t;this.useBackingStore&&this.backing&&(e=[this.chart.canvas],this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),t=this.backing,e.forEach((function(e){e.width!=t.width&&(X.E0w(),e.width=t.width,e.height=t.height,e.context.scale(t.ratio,t.ratio))})),this.adjustedDisplayPixelRatio=t.ratio,this.draw())},t.ChartEngine.prototype.disableBackingStore=function(){var e,t;this.useBackingStore&&this.backing&&(e=[this.chart.canvas],X.j07(),this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),t=this.backing,e.forEach((function(e){e.width!=t.styleWidth&&(e.width=t.styleWidth,e.height=t.styleHeight,e.context.scale(1,1))})),X.i3C(82),this.adjustedDisplayPixelRatio=X.k$A(32,"1"),this.draw())},t.ChartEngine.prototype.getBackgroundCanvas=function(e){return X.j07(),e||(e=this.chart),this.useBackgroundCanvas?e.backgroundCanvas:e.canvas},t.ChartEngine.prototype.resizeCanvas=function(){var e,t,i,a,r,n,o,l,h=X;for(var c in"u","n","def","ined",e=this.chart.canvas,t=this.chart.context,e&&t&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=e.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=e.width=this.chart.container.clientWidth,this.adjustBackingStore(e,t),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),i=this.container.getBoundingClientRect(),this.top=i.top,this.left=i.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,h.j07(),0===this.width&&!this.container.dimensionlessCanvas&&this.container.closest("html")&&console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,"undefined"==s(a=this.layout.candleWidth)&&(a=8),this.charts){r=this.charts[c],this.setCandleWidth(a,r),r.scroll<r.width/a&&(r.scroll=Math.floor(r.width/a),n=Math.round(this.preferences.whitespace/this.layout.candleWidth),r.scroll-=n),o=10;try{"1","0",":","00",h.a3e(135);var u=h.B0m(3,1,11,0,12);l=t.measureText("10:00").width*u}catch(e){l=100}for(;o>1&&!(this.chart.width/l>o);)o/=1.5;r.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/o),r.xAxis.autoComputedTickSizePixels<1&&(h.a3e(82),r.xAxis.autoComputedTickSizePixels=h.B0m(0,"1"))}},t.ChartEngine.prototype.setCandleWidth=function(e,t){t||(t=this.chart),e=this.constrainCandleWidth(e),X.j07(),this.layout.candleWidth=e,X.a3e(136);var i=X.k$A(4,7,3,19,85);t.maxTicks=Math.round(t.width/e)+i},t.ChartEngine.prototype.constrainCandleWidth=function(e){var t,i,a;return t=this.minimumCandleWidth,i=this.maximumCandleWidth,a=this.animations.zoom,X.j07(),t&&e<t&&(e=t,a&&a.running&&a.stop()),i&&e>i&&(e=i,a&&a.running&&a.stop()),e},t.ChartEngine.prototype.resizeChart=function(e){var t,i;X.E0w(),t="resi",t+="zeCh",t+="art",this.runPrepend("resizeChart",arguments)||(!1!==e&&(e=!0),e&&this.preAdjustScroll(),i=this.chart.canvasHeight,this.resizeCanvas(),e&&this.postAdjustScroll(),(this.displayInitialized||0!==this.chart.canvasHeight&&0===i)&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend(t,arguments))},t.ChartEngine.prototype.clear=function(){var e;for(var i in X.j07(),this.displayInitialized=!1,this.layout.studies)e=this.layout.studies[i],t.getFn("Studies.removeStudy")(this,e);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},t.ChartEngine.prototype.fillScreen=function(){var e,t,i,a,r;e=this.chart,t=this.layout.candleWidth,i=e.width-this.preferences.whitespace,(a=e.dataSet.length)*t>=i?this.draw():(this.mainSeriesRenderer&&this.mainSeriesRenderer.standaloneBars||a--,X.a3e(40),r=X.k$A(i,a),this.setCandleWidth(r,e),this.home({maintainWhitespace:!0}))},t.ChartEngine.prototype.setMaxTicks=function(e,t){var i;X.j07(),t||(t={}),(e=Math.round(e))<2&&(e=2),i=t.padding?t.padding:0,this.layout.candleWidth=(this.chart.width-i)/e,this.layout.candleWidth||(this.layout.candleWidth=8),this.chart.maxTicks=Math.round(this.chart.width/this.layout.candleWidth-.499),(t.padding||0===t.padding)&&(X.a3e(100),this.chart.scroll=X.k$A("1",e))},t.ChartEngine.prototype.initializeChart=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F=X;if(i="ca",i+="n",i+="v",i+="as",a="canva",a+="s",!this.runPrepend("initializeChart",arguments)){if((r=this.chart).symbolObject.symbol||(r.symbolObject.symbol=r.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&t.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,t.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.micropixels=0,e?r.container=e:e=r.container,e.stx=this,e.CIQRegistered||(e.CIQRegistered=!0,t.ChartEngine.registeredContainers.push(e)),this.registerHTMLElements&&this.registerHTMLElements(),n=r.canvas,s=r.backgroundCanvas,o=r.tempCanvas,l=this.floatCanvas,h=r.canvasShim,n&&document.createElement(a).getContext){if(!n.id){F.a3e(1),c=F.B0m(0,"1029856105"),u=1460539916,d=2;for(var P=1;F.m7$(P.toString(),P.toString().length,25836)!==c;P++)e.removeChild(n),r.canvas=1,d+=2;F.b3_(d.toString(),d.toString().length,50752)!==u&&(e.removeChild(n),r.canvas=null)}if(o&&!o.id&&(e.removeChild(o),r.tempCanvas=null),l&&!l.id&&(e.removeChild(l),this.floatCanvas=null),s&&!s.id){e.removeChild(s),p=-1878981405,m=-893771909,g=2;for(var L=1;F.m7$(L.toString(),L.toString().length,42513)!==p;L++)F.a3e(13),r.backgroundCanvas=F.k$A("1",0),g+=2;F.b3_(g.toString(),g.toString().length,95637)!==m&&(r.backgroundCanvas=8),r.backgroundCanvas=null}}else this.setCandleWidth(this.layout.candleWidth);for(var O in r.backgroundCanvas||(s=r.backgroundCanvas=document.createElement("canvas")),e.appendChild(s),z(s),r.canvasShim||(h=r.canvasShim=document.createElement("div")),h.className="stx-canvas-shim",e.appendChild(h),r.canvas||(n=r.canvas=document.createElement(i)),e.appendChild(n),z(n),r.context=n.context,r.tempCanvas||(o=r.tempCanvas=document.createElement("canvas")),e.appendChild(o),z(o,!0),this.floatCanvas||(l=this.floatCanvas=document.createElement("canvas")),e.appendChild(l),z(l,!0),this.resizeCanvas(),t.isAndroid&&(o.ontouchstart=l.ontouchstart=function(e){e.preventDefault&&e.preventDefault()}),f=this.panels,r.panel.display=r.symbol,r.symbolDisplay&&(r.panel.display=r.symbolDisplay),this.adjustPanelPositions(),r.panel=f[r.name],f){y=f[O].yaxisLHS.concat(f[O].yaxisRHS);for(var E=0;E<y.length;E++)y[E].height=f[O].yAxis.height,this.calculateYAxisMargins(y[E])}var I;for(var N in this.initialWhitespace=this.preferences.whitespace,r.dataSet&&r.dataSet.length>0&&(r.scroll=Math.floor(r.width/this.layout.candleWidth),v=Math.round(this.preferences.whitespace/this.layout.candleWidth),r.scroll-=v),t.touchDevice&&(b=".ve",b+="c",b+="torTrashC",b+="an",x=".overlayEd",x+="it",C=e.querySelector(x),S=e.querySelector(".overlayTrashCan"),w=e.querySelector(b),k=function(e,t,i){return function(a){e.deleteHighlighted(t,i)}},C?(t.safeClickTouch(C,k(this,!0,!0)),S&&t.safeClickTouch(S,k(this,!1))):S&&t.safeClickTouch(S,k(this,!0)),w&&t.safeClickTouch(w,k(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(e.onmouseout=(I=this,function(e){I.handleMouseOut(e)}),t.smartHover()),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[],f)(D=f[N]).markerHolder&&(e.removeChild(D.markerHolder),D.markerHolder=null);for(var $ in this.plugins)(A=this.plugins[$]).display&&A.initializeChart&&A.initializeChart(this);this.resizeListenerInitialized||(T="r",T+="e",T+="si",T+="ze",M=this,this.resizeListenerInitialized=!0,_=function(){return F.E0w(),function(e){M.resizeChart()}},this.addDomEventListener(window,T,_(),!0)),r.baseline.userLevel&&(r.baseline.userLevel=null),this.setResizeTimer(this.resizeDetectMS),this.runAppend("initializeChart",arguments)}function z(e,t){var i;e.context=e.getContext("2d"),e.context.lineWidth=1,(i=e.style).position="absolute",F.E0w(),i.left="0px",t&&(i.display="none")}},t.ChartEngine.prototype.destroy=function(){var e,i,a,r,n=X;n.E0w(),this.setResizeTimer(0),this.quoteDriver&&this.quoteDriver.die(),this.styles={};for(var s=0;s<this.eventListeners.length;s++)(e=this.eventListeners[s]).element.removeEventListener(e.event,e.function,e.options);this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),(a=(i=t.ChartEngine.registeredContainers).indexOf(this.chart.container))>-1&&(n.a3e(38),i.splice(a,n.k$A("1",1))),this.slider&&(r=i.indexOf(this.slider.slider.chart.container))>-1&&(n.a3e(14),i.splice(r,n.k$A(0,"1")))},t.ChartEngine.prototype.preAdjustScroll=function(e){e||(e=this.chart),X.j07(),this.previousAdjust={chart:e,scroll:e.scroll,maxTicks:e.maxTicks}},t.ChartEngine.prototype.postAdjustScroll=function(){var e;X.E0w(),this.previousAdjust&&((e=this.previousAdjust.chart).scroll=this.previousAdjust.scroll+(e.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},t.ChartEngine.prototype.translateIf=function(e){return this.translationCallback?this.translationCallback(e):(X.E0w(),e)},t.ChartEngine.prototype.doCleanupDates=function(e,a){var r,n,s,o,l,h=X;if(e&&e.length)for(var c=0;c<e.length;c++)if((n=(r=e[c]).DT)||r.Date){if(r.DT&&"[object String]"==Object.prototype.toString.call(n)&&n.length<=10)(n=new Date(n)).setMinutes(n.getMinutes()+n.getTimezoneOffset());else{if("[ob","j","ect Date]",s=!0,r.DT||(n=t.strToDateTime(r.Date),r.Date.length<=10&&(s=!1)),"[object Date]"!=Object.prototype.toString.call(n)&&(n=new Date(n)),i.Date&&this.dataZone&&s){o=new i.Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),this.dataZone),h.a3e(137);var u=h.B0m(6,7017,13,2,8e3);l=n.getSeconds()*u+n.getMilliseconds(),n=new Date(o.getTime()+l)}t.ChartEngine.isDailyInterval(a)&&(h.i3C(82),n.setHours(h.k$A(0,"0"),0,0,0))}r.DT||(r.Date=t.yyyymmddhhmmssmmm(n)),r.DT=n}},t.ChartEngine.prototype.doCleanupGaps=function(e,i,a){var r,n,o,l,h,c,u,d,p,m,g,f,y,v=X;if("ti","c","k",!e||!e.length)return e;if(r=this.layout.interval,a=a||{},i||(i=this.chart),!t.Market||!i.market)return e;if(a.noCleanupDates||this.doCleanupDates(e,r),!1===(n=a.cleanupGaps))return e;if(n&&!0!==n||(n=this.cleanupGaps||n),v.a3e(110),o=v.k$A(n,"gap"),!n)return e;if("tick"==r)return e;if("month"==r||"week"==r){if(this.dontRoll)return e;r="day"}v.E0w(),l=function(e){return e.DT?"[object Date]"!=Object.prototype.toString.call(e.DT)?new Date(e.DT):new Date(+e.DT):(v.E0w(),t.strToDateTime(e.Date))},h=[],c=e[0],h.push(c),u={begin:l(c),interval:r,periodicity:1,timeUnit:this.layout.timeUnit},d=new t.Market(i.market.market_def),p=d.newIterator(u),this.extendedHours&&this.extendedHours.filter&&p.market.enableAllAvailableSessions(),m=i.defaultPlotField;for(var b=0;b<e.length&&void 0===e[b][m];b++)if(void 0!==e[b].Value){"V","a","l","ue",m="Value";break}function x(e,i){var r,n,s,l,u;for(void 0===(n=(r=a.field)?c[r]:c)&&(n={}),s=o?null:n[m],v.j07(),l=o?null:n.Adj_Close;+e<+i;)u={DT:e},r||(h.push(u),t.extend(u,{Open:s,High:s,Low:s,Close:s,Volume:0,Adj_Close:l})),e=p.next()}for(var C=1;C<e.length;C++){for(f=e[C],(g=p.next())<(y=l(f))&&(x(g,y),g=p.market._convertFromMarketTZ(p.begin,p.outZone));y<g;){if(++C==e.length)return h;S(c,f),h.push(f),c=f,y=l(f=e[C])}g<y?(C--,g=p.previous()):(S(c,f),h.push(f),c=f)}function S(e,i){var r,n,l;if(r=a.field)return"und","efi","ne","d","un","def","i","ned",void("undefined"!=s(e[r])&&"undefined"==s(i[r])&&(i[r]=o?null:e[r]));o||(n=e[m],l=i[m],void 0!==n&&void 0===l&&t.ensureDefaults(i,{Close:n,Open:n,High:n,Low:n,Volume:0,Adj_Close:e.Adj_Close}))}return h},t.ChartEngine.prototype.getCreatingLibrary=function(){return X.E0w(),e}},L=function(e){var t;(t=e.CIQ).ChartEngine.Panel=function(e,i){this.yAxis=i||new t.ChartEngine.YAxis,this.name=e,X.E0w(),this.state={}},t.extend(t.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0},!0),t.ChartEngine.prototype.whichPanel=function(e){var t;for(var i in this.panels)if(!(t=this.panels[i]).hidden&&e>=t.top&&e<t.bottom)return t;return null},t.ChartEngine.prototype.panelExists=function(e){for(var t in this.panels)if(this.panels[t].name==e)return!0;return!1},t.ChartEngine.prototype.storePanels=function(){var e,t;for(var i in this.layout||(this.layout={}),(e=this.layout).panels={},this.panels)t=this.panels[i],e.panels[t.name]={percent:t.percent,display:t.display,yAxis:t.yAxis}},t.ChartEngine.prototype.savePanels=function(e){this.storePanels(),!1!==e&&this.changeOccurred("layout")},t.ChartEngine.prototype.privateDeletePanel=function(e){var t,i,a;for(var r in X.j07(),this.layout.studies)(t=this.layout.studies[r]).panel==e.name&&this.cleanupRemovedStudy(t);for(var n in delete this.panels[e.name],this.overlays)this.overlays[n].panel==e.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[n]),delete this.overlays[n]);for(var s in this.chart.series)this.chart.series[s].parameters.panel==e.name&&this.removeSeries(this.chart.series[s],this.chart);if(e.holder&&(this.chart.container.removeChild(e.holder),this.getMarkerArray)){-639680506,1489667906,i=2;for(var o=1;-639680506!==X.b3_(o.toString(),o.toString().length,32368);o++)a=this.getMarkerArray("",e.name),i+=2;1489667906!==X.m7$(i.toString(),i.toString().length,13215)&&(a=this.getMarkerArray("panelName",e.name));for(var l=0;l<a.length;l++)this.removeFromHolder(a[l])}e.handle&&e.handle.remove(),this.currentPanel=null},t.ChartEngine.prototype.plotsInPanel=function(e){var t,i,a,r;for(var n in t=[],i=e,"object"==s(e)&&(i=e.name),this.layout.studies)i===(a=this.layout.studies[n]).panel&&t.push(a);for(var o in this.chart.seriesRenderers)i===(r=this.chart.seriesRenderers[o]).params.panel&&t.push(r);return t},t.ChartEngine.prototype.checkForEmptyPanel=function(e,t,i){var a,r;if(!e)return!1;if(a=e,"object"==s(e)&&(a=e.name),a===this.chart.name)return!1;i?i instanceof Array||(i=[i]):i=[],r=this.plotsInPanel(e);for(var n=0;n<r.length;n++)if(-1==i.indexOf(r[n]))return!1;return t||this.panelClose(this.panels[a]),!0},t.ChartEngine.prototype.panelClose=function(e){var i,a;if(i="pa",i+="n",i+="elClos",i+="e",e&&!this.runPrepend(i,arguments)){if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,e.soloing&&this.panelSolo(e),this.charts[e.name]){for(var r in this.panels)(a=this.panels[r]).chart.name==e.name&&this.privateDeletePanel(a);delete this.charts[e.name]}else this.privateDeletePanel(e);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),this.runAppend("panelClose",arguments)}},t.ChartEngine.prototype.deleteAllPanels=function(){var e;for(var t in this.panels)e=this.panels[t],this.privateDeletePanel(e);this.layout.panels={},this.panels={}},t.ChartEngine.prototype.panelUp=function(e){var i,a,r,n;for(r in this.cancelTouchSingleClick=!0,X.j07(),t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==e.name)break;a++}if(a){for(r in n=0,this.panels)n==a-1&&(i[e.name]=e),r!=e.name&&(i[r]=this.panels[r],n++);this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelDown=function(e){var i,a,r,n,s;for(r in this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==e.name)break;a++}for(r in n=0,this.panels)n++;if(a!=n-1){for(r in s=0,this.panels)r!=e.name?(i[r]=this.panels[r],s==a+1&&(i[e.name]=e),s++):s++;this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelSolo=function(e){var i,a,r;if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i=!0,e.soloing){if("stx","_solo_lit",i=!1,e.soloing=!1,e.solo.classList.remove("stx_solo_lit"),e.percent=e.oldPercent,"chart"!=e.name)if(this.soloPanelToFullScreen){if(1==e.percent)for(a in this.panels)(r=this.panels[a])!=e&&(e.percent-=r.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else if(e.soloing=!0,e.solo.classList.add("stx_solo_lit"),e.oldPercent=e.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,"chart"!=e.name)if(this.soloPanelToFullScreen)this.xAxisAsFooter=!0;else{this.chart.panel.oldPercent=this.chart.panel.percent,X.i3C(58);var n=X.B0m(2,15,7,11);e.percent=n-this.chart.panel.percent}for(a in this.panels)this.panels[a].hidden=i;this.soloPanelToFullScreen||(this.chart.panel.hidden=!1),e.hidden=!1,this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()},t.ChartEngine.prototype.calculatePanelPercent=function(e){var t;t=e.bottom-e.top,e.percent=t/this.chart.canvasHeight},t.ChartEngine.prototype.resizePanels=function(){var e,i,a,r,n,s,o=X;if(t.ChartEngine.resizingPanel){for(var l in n=t.ChartEngine.crosshairY>this.resolveY(t.ChartEngine.resizingPanel.top),this.panels){if(this.panels[l]==t.ChartEngine.resizingPanel)break;this.panels[l].hidden||(e=this.panels[l])}if(s=this.backOutY(t.ChartEngine.crosshairY),n)for(a=t.ChartEngine.resizingPanel.yaxisLHS.concat(t.ChartEngine.resizingPanel.yaxisRHS),r=0;r<a.length;r++){o.a3e(138);var h=o.B0m(28,8,3,19,5);i=a[r].initialMarginTop+a[r].initialMarginBottom+h,s>a[r].bottom-i&&(s=a[r].bottom-i)}else for(a=e.yaxisLHS.concat(e.yaxisRHS),r=0;r<a.length;r++){o.a3e(139);var c=o.B0m(40,7,3,22,4);i=a[r].initialMarginTop+a[r].initialMarginBottom+c,s<a[r].top+i&&(s=a[r].top+i)}t.ChartEngine.crosshairY=this.resolveY(s),e.bottom=s,t.ChartEngine.resizingPanel.top=s,this.calculatePanelPercent(e),this.calculatePanelPercent(t.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.isPanelAboveChart=function(e){for(var t in this.panels){if("chart"==t)return!1;if(t==e.name)return!0}return!1},t.ChartEngine.prototype.adjustPanelPositions=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w=X;e="st",e+="x-s",e+="how";var k=this.chart,D=this.panels;if(k.tempCanvas&&t.clearCanvas(k.tempCanvas,this),!this.runPrepend("adjustPanelPositions",arguments)){for(l in i=0,a=k.canvasHeight,r=!1,n=0,w.i3C(82),s=w.k$A(0,"0"),o=!1,D)h=D[l],(isNaN(h.percent)||h.percent<=0)&&(h.percent=.05),h.hidden||(n+=h.percent,s++,h.soloing&&(o=!0));for(l in D)if(c=0,(h=D[l]).hidden)h.markerHolder&&(h.markerHolder.style.display="none");else{if(this.manageTouchAndMouse&&(h.up&&(r?this.displayIconsUpDown&&h.up.classList.add("stx-show"):(r=!0,h.up.classList.remove("stx-show"))),h.solo&&(o?(u="st",u+="x",u+="-s",u+="how",h.soloing&&this.displayIconsSolo?h.solo.classList.add("stx-show"):h.solo.classList.remove(u)):1==s?h.solo.classList.remove("stx-show"):2!=s||this.soloPanelToFullScreen?(d="stx-sh",d+="ow",this.displayIconsSolo&&h.solo.classList.add(d)):h.solo.classList.remove("stx-show")),h.down&&(1==s?h.down.classList.remove("stx-show"):this.displayIconsUpDown&&h.down.classList.add("stx-show")),h.edit&&(h.editFunction?h.edit.classList.add("stx-show"):h.edit.classList.remove("stx-show")),h.close&&(p="s",p+="t",p+="x-sh",p+="ow",this.displayIconsClose?h.close.classList.add(p):h.close.classList.remove("stx-show"))),h.percent=h.percent/n,h.top=i,h.bottom=h.top+a*h.percent,h.height=h.bottom-h.top,h.chart.name==h.name&&(h.chart.top=h.top,h.chart.bottom=h.bottom,h.chart.height=h.height),i=h.bottom,h.yaxisLHS){m=h.yaxisLHS.concat(h.yaxisRHS);for(var A=0;A<m.length;A++)(g=m[A]).zoom&&g.height>0&&(c=g.zoom/g.height),this.adjustYAxisHeightOffset(h,g),g.height=g.bottom-g.top,c&&(g.scroll*=c*g.height/g.zoom,g.zoom=c*g.height,g.zoom>g.height&&(g.zoom=0,g.scroll=0)),g.high||0===g.high||(g.high=100,g.low=0,g.shadow=100),g.multiplier=g.height/g.shadow,"none"===g.position&&this.calculateYAxisMargins(g)}h.holder&&(f="p",f+="x",y="0",y+="p",y+="x",h.holder.style.right="0px",h.holder.style.top=h.top+"px",h.holder.style.left=y,h.holder.style.height=h.height+"px",h.subholder.style.left=h.left+"px",h.subholder.style.width=h.width+f,h.subholder.style.top="0px",h.yAxis.height>=0&&(h.subholder.style.height=h.yAxis.height+"px"))}if(l&&D[l].down&&D[l].down.classList.remove(e),this.manageTouchAndMouse&&2==s&&!o&&k.panel.solo&&k.panel.solo.classList.add("stx-show"),k.panel){if(o&&this.soloPanelToFullScreen){w.a3e(140);var T=w.B0m(26,8,20,13,2);v=k.canvasHeight-h.yAxis.bottom+T}else{w.i3C(5);var M=w.B0m(3,15);v=k.canvasHeight-k.panel.yAxis.bottom+M}var _=this.controls,F=_.chartControls,P=_.home,L=_.notificationTray;b=this.width-k.panel.right,x=1167142915,C=24072230,S=2;for(var O=1;w.m7$(O.toString(),O.toString().length,87172)!==x;O++)F&&(w.i3C(38),F.style.bottom=w.k$A(v,"")),S+=2;w.b3_(S.toString(),S.toString().length,99062)!==C&&F&&(w.a3e(4),F.style.bottom=w.B0m("px",v)),P&&(w.a3e(4),P.style.bottom=w.k$A("px",v),w.i3C(4),P.style.marginRight=w.k$A("px",b)),L&&(w.i3C(4),L.style.bottom=w.k$A("px",v),w.a3e(4),L.style.marginRight=w.B0m("px",b))}this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend("adjustPanelPositions",arguments)}},t.ChartEngine.prototype.createPanel=function(e,t,i,a,r,n){var s,o,l,h,c,u,d=X;if(s="cre",s+="a",s+="te",s+="Panel",!this.runPrepend("createPanel",arguments)){for(var p in a||(a="chart"),o=this.chart.canvasHeight,i||(d.i3C(38),i=d.k$A(o,.2)),i>o&&(d.a3e(38),i=d.k$A(o,.5)),d.i3C(40),l=d.B0m(i,o),d.i3C(1),h=d.k$A(l,1),c=!1,this.panels)(u=this.panels[p]).percent*=h,u.soloing&&(c=!0);return this.stackPanel(e,t,l,a,r),this.panels[t].hidden=c,this.panels[t].exportable=!n,this.adjustPanelPositions(),this.savePanels(!1),this.runAppend(s,arguments),this.panels[t]}},t.ChartEngine.prototype.modifyPanel=function(e,i){var a,r,n,s,o,l,h,c;a=e.name;var u=this.layout.studies,d=this.chart.series,p=i||{},m=p.name,g=p.display,f=p.yAxis;for(var y in m||(m=t.uniqueID()),g||(g=m),f||((f=e.yAxis).name=m),r={},this.panels)y===e.name?((n=this.panels[y]).name=m,n.display=g,n.yAxis=f,e=r[m]=n,this.moveMarkers&&a!==m&&this.moveMarkers(a,m)):r[y]=this.panels[y];for(var v in this.panels=r,s=!1,u)(o=u[v]).panel===a&&(o.panel=m,o.parameters&&o.parameters.panelName&&(s=!0,o.parameters.panelName=m));for(var b in d)d[b].parameters.panel===a&&(s=!0,l={panel:m},d[b].parameters.yAxis&&d[b].parameters.yAxis.name===a&&(l.yAxis=f),this.modifySeries(b,l,!0));s&&this.changeOccurred("layout"),h=!1;for(var x=0;x<this.drawingObjects.length;x++)a===(c=this.drawingObjects[x]).panelName&&(c.panelName=m,h=!0);X.j07(),h&&this.changeOccurred("vector"),this.calculateYAxisPositions()},t.ChartEngine.prototype.setPanelHeight=function(e,t){var i,a,r,n,s=X;if(t){Object.values(this.panels).slice(-1)[0]===e&&(t+=this.xaxisHeight);var o=this.chart.canvasHeight,l=e.percent;s.i3C(40),i=s.B0m(t,o),s.i3C(141),a=s.B0m("1",l,0),s.i3C(34),r=s.B0m(0,i,"1"),s.a3e(40),n=s.B0m(a,r),Object.values(this.panels).forEach((function(e){s.E0w(),e.percent/=n})),e.percent=i,this.adjustPanelPositions(),this.savePanels()}},t.ChartEngine.prototype.electNewPanelOwner=function(e,i){var a,r,n,s,o,l,h,c;if(X.E0w(),"string"==typeof e&&(e=this.panels[e]),r=e.yAxis,e&&e!=this.chart.panel){if((s=(n=e.yAxis).studies[0])&&s!=r.name||(s=n.renderers[0]),s&&s!=r.name||(s=n.studies[1]),s||(s=n.renderers[1]),i)n=e.yAxis=i,a=i.name;else if(s)(n=this.addYAxis(e,new t.ChartEngine.YAxis({name:s,position:n.position}))).renderers=e.yAxis.renderers,n.studies=e.yAxis.studies,a=s;else if(e.yaxisLHS){l=(o=e.yaxisRHS.concat(e.yaxisLHS).filter((function(e){return X.E0w(),e.name!=r.name})))[0];for(var u=0;u<o.length;u++)if(!o[u].position){l=o[u];break}l&&(n=e.yAxis=l,a=l.studies[0]||l.renderers[0])}a?(s=a,r.name!=e.name&&(s=e.name),(c=this.layout.studies)&&c[a]&&(h=c[a].inputs.display),this.modifyPanel(e,{name:s,display:h||a,yAxis:n}),this.deleteYAxisIfUnused(e,r),this.calculateYAxisMargins(this.panels[s].yAxis)):this.checkForEmptyPanel(e)}return a},t.ChartEngine.prototype.configurePanelControls=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g=X;(i=e.icons)&&(a=e.name==e.chart.name,i.classList.add("stx-show"),e.title=i.querySelector(".stx-panel-title"),g.E0w(),e.up=i.querySelector(".stx-ico-up"),e.up&&(e.up=e.up.parentNode),e.solo=i.querySelector(".stx-ico-focus"),e.solo&&(e.solo=e.solo.parentNode),e.down=i.querySelector(".stx-ico-down"),e.down&&(e.down=e.down.parentNode),e.edit=i.querySelector(".stx-ico-edit"),e.edit&&(e.edit=e.edit.parentNode),e.close=i.querySelector(".stx-ico-close"),e.close&&(e.close=e.close.parentNode),e.title&&(e.title.innerHTML="",e.display&&e.title.appendChild(document.createTextNode(e.display)),a&&("stx-","chart-pa","nel",e.title.classList.add("chart-title"),i.classList.add("stx-chart-panel"))),t.touchDevice&&!t.isSurface||this.makeModal(i),e.handle&&(t.touchDevice&&!t.isSurface||(e.handle.onmouseover=(s=this,g.E0w(),function(){s.hideCrosshairs()})),t.touchDevice&&!t.isSurface||(e.handle.onmouseout=(n=this,g.j07(),function(){n.showCrosshairs()})),r=function(e,i){return function(a){t.ChartEngine.resizingPanel||""!==e.openDialog||(g.j07(),e.grabHandle(i))}},t.isSurface?e.handle.onpointerdown=r(this,e):e.handle.onmousedown=r(this,e),t.touchDevice&&(e.handle.ontouchstart=r(this,e))),e.up&&t.safeClickTouch(e.up,(o=this,l=e,function(){g.E0w(),o.panelUp(l)})),e.down&&t.safeClickTouch(e.down,(h=this,c=e,g.j07(),function(){g.j07(),h.panelDown(c)})),e.solo&&t.safeClickTouch(e.solo,(u=this,d=e,g.E0w(),function(){g.j07(),u.panelSolo(d)})),e.close&&("chart"==e.name?e.close.style.display="none":t.safeClickTouch(e.close,(p=this,m=e,function(){g.E0w(),p.panelClose(m)}))))},t.ChartEngine.prototype.stackPanel=function(e,i,a,r,n){var s,o,l,h,c,u,d;s="s",s+="tx-panel-",X.E0w(),s+="ch",s+="art",o="stx",o+="-s",o+="ubholder",l="c",l+="har",l+="t",this.runPrepend("stackPanel",arguments)||(r||(r=l),h=this.charts[r],X.a3e(110),(c=X.k$A(i,r))&&(e=h.symbol,h.symbolDisplay&&(e=h.symbolDisplay),n||(n=h.yAxis)),u=this.panels[i]=new t.ChartEngine.Panel(i,n),!c&&h.yAxis&&u.yAxis.position==h.yAxis.position&&(u.yAxis.width=h.yAxis.width),c&&!h.panel&&(h.panel=u),u.percent=a,u.chart=h,u.display=e,u.holder=t.newChild(this.container,"div","stx-holder"),u.subholder=t.newChild(u.holder,"div",o),u.subholder.style.zIndex=1,u.holder.panel=u,d=c?s:"stx-panel-study",u.holder.classList.add(d),this.controls.handleTemplate&&this.manageTouchAndMouse&&(u.handle=this.controls.handleTemplate.cloneNode(!0),this.container.appendChild(u.handle),u.handle.panel=u),this.controls.iconsTemplate&&(u.icons=this.controls.iconsTemplate.cloneNode(!0),u.subholder.appendChild(u.icons),this.configurePanelControls(u)),this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments))},X.j07(),t.ChartEngine.prototype.setPanelEdit=function(e,i){e.editFunction=i,e.edit&&t.safeClickTouch(e.edit,i),this.adjustPanelPositions()},t.ChartEngine.prototype.drawPanels=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(e="draw",e+="Panels",t="drawPanel",t+="s",!this.runPrepend(t,arguments)){for(var b in i=!1,this.panels)if(a="se",a+="g",a+="ment",(r=this.panels[b]).state={},n=this.translateIf(r.display),r.title&&r.title.textContent!=n&&(r.title.innerHTML="",r.title.appendChild(document.createTextNode(n))),r.icons&&r.icons.classList.add("stx-show"),r.hidden)r.icons&&r.icons.classList.remove("stx-show"),r.handle&&(r.handle.style.display="none"),r.holder.style.display="none";else if(s="b",s+="l",s+="oc",s+="k","chart"!=r.name&&(o="n",o+="o",o+="ne",l="n",l+="o",l+="n",l+="e",h=this.manageTouchAndMouse,r.up&&(r.up.style.display=this.displayIconsUpDown&&h?"":l),r.down&&(r.down.style.display=this.displayIconsUpDown&&h?"":"none"),r.solo&&(r.solo.style.display=this.displayIconsSolo&&h?"":"none"),r.close&&(r.close.style.display=this.displayIconsClose&&h?"":o),r.edit&&(r.edit.style.display=r.editFunction&&h?"":"none")),r.holder.style.display=s,r.displayEdgeIfPadded&&(c="se",c+="gm",c+="e",c+="nt",u="s",u+="eg",u+="me",u+="nt",d="stx_grid",d+="_bor",d+="der",p=Math.round(r.left)+.5,m=r.yAxis.top-.5,g=r.yAxis.bottom+.5,r.yaxisCalculatedPaddingLeft&&!r.yaxisTotalWidthLeft&&this.plotLine(p,p,m,g,this.canvasStyle(d),u,this.chart.context,!1,{lineWidth:1}),p=Math.round(r.right)+.5,r.yaxisCalculatedPaddingRight&&!r.yaxisTotalWidthRight&&this.plotLine(p,p,m,g,this.canvasStyle("stx_grid_border"),c,this.chart.context,!1,{lineWidth:1})),i){if(y=r.top,y=Math.round(y)+.5,this.plotLine(r.left-.5,r.right+.5,y,y,this.canvasStyle("stx_panel_border"),a,this.chart.context,!1,{}),r.handle){this.displayPanelResize?r.handle.style.display="":(v="n",v+="o",v+="n",v+="e",r.handle.style.display=v),X.a3e(142);var x=X.k$A(16,19,1,13,13);r.handle.style.top=y-r.handle.offsetHeight/x+"px"}}else f="n",f+="one",r.handle&&(r.handle.style.display=f),i=!0;this.runAppend(e,arguments)}}},O=function(e){var t;(t=e.CIQ).ChartEngine.isDailyInterval=function(e){var t;if("day"==e)return!0;if("week"==e)return!0;t=2;for(var i=1;1907193524!==X.b3_(i.toString(),i.toString().length,71433);i++){if(""!==e)return!1;t+=2}return-1377526652!==X.b3_(t.toString(),t.toString().length,49813)&&("mon","th","month"==e)},t.ChartEngine.prototype.setPeriodicity=function(e,i){var a,r,n,o,l,h,c,u,d,p,m,g,f,y,v,b,x=X;if(a="setPeriod",a+="ici",a+="ty",!this.runPrepend("setPeriodicity",arguments)){if("object"!==s(arguments[0])){e={period:arguments[0],interval:arguments[1],timeUnit:arguments[2]},x.a3e(143);var C=x.k$A(15,20,15,0,19);i=arguments[arguments.length-C],3===arguments.length&&(e.timeUnit=void 0)}var S=e,w=S.period,k=S.interval,D=S.timeUnit;"function"!=typeof i&&(i=null);var A=t.cleanPeriodicity(w,k,D);w=A.period,k=A.interval,D=A.timeUnit;var T=this.layout;T.setSpan={},T.range={},this.chart.inflectionPoint=null,r=!1,this.chart.symbol&&(r=this.needDifferentData({period:w,interval:k,timeUnit:D}));var M=T.candleWidth,_=T.periodicity,F=T.interval,P=T.timeUnit;if(n={prvPeriodicity:_,prvInterval:F,prvTimeUnit:P},T.periodicity=w,T.interval=k,T.timeUnit=D,l={stx:o=this,differentData:r,prevPeriodicity:n},r){if(h="layou",h+="t",this.changeOccurred(h),this.clearCurrentMarketData(),this.quoteDriver)for(var L in this.charts)(c=this.charts[L]).symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:c.symbol,symbolObject:c.symbolObject,chart:c},H):this.loadChart(c.symbol,{chart:c},H));else this.dataCallback?(this.dataCallback(),H()):console.log("cannot change periodicity because neither dataCallback or quoteDriver are set");this.home()}else{for(var O in this.charts){var E=u=this.charts[O],I=E.dataSegment,N=E.dataSet,$=E.maxTicks,z=E.scroll;if(d=I?I.length:0,p=N?N.length:0,m=void 0,g=Math.round(u.maxTicks/2),this.setCandleWidth(M,u),f=!0,y=!1,z<=$?f=!1:I&&!I[g]&&(f=!1,x.i3C(1),y=x.k$A(p,z)),f&&d>0&&($<(Math.round(this.chart.width/M-.499)-1)/2&&(x.a3e(1),g=x.B0m(1,d)),g>=d?(m=I[d-1].DT,x.a3e(1),g=x.B0m(1,d)):m=I[g].DT),this.createDataSet(),f){if(d>0)for(var j=p-1;j>=0;j--)if(N[j].DT.getTime()<m.getTime()){x.i3C(37),u.scroll=x.k$A(1,j,p,g);break}}else y?u.scroll=N.length+y:(v=Math.round(this.preferences.whitespace/M),x.a3e(34),u.scroll=x.B0m(v,1,$))}if(this.displayInitialized&&this.draw(),this.changeOccurred("layout"),this.quoteDriver)for(var V in this.charts)!(b=this.charts[V]).symbol||!b.moreAvailable&&b.upToDate||this.quoteDriver.checkLoadMore(b);H(),this.runAppend(a,arguments)}}function H(){x.j07(),o.dispatch("periodicity",l),i&&i(null)}},t.ChartEngine.prototype.needDifferentData=function(e){var i,a,r,n;return"m","in","ut","e",i=this.layout,a=t.ChartEngine.isDailyInterval(e.interval),r=t.ChartEngine.isDailyInterval(i.interval),n=!1,this.dontRoll||!r?i.interval!=e.interval&&(n=!0):a!=r&&(n=!0),a||e.timeUnit||(e.timeUnit="minute"),r||i.timeUnit||(i.timeUnit="minute"),e.timeUnit!=i.timeUnit&&(n=!0),this.masterData&&this.masterData.length||(n=!0),n},t.ChartEngine.prototype.getPeriodicity=function(){var e,t,i;return t=(e=this.layout).interval,(i=e.timeUnit)||(i=t,t=1),{period:e.periodicity,interval:t,timeUnit:i}}},E=function(e){var t,i=X;(t=e.CIQ).ChartEngine.prototype.isHistoricalMode=function(){var e,a,r,n,s,o;return e=new Date,a=!0,r=this.masterData,!!this.isHistoricalModeSet&&(r.length&&(n=this.getFirstLastDataRecord(r,"DT",!0),(a=((s=this.standardMarketIterator(n.DT))?s.next():n.DT)<=e)&&t.ChartEngine.isDailyInterval(s.interval)&&(o=this.chart.market.getOpen())&&e<o&&(i.a3e(13),e.setHours(0,i.k$A("0",0),0,0),+e==+s.begin&&(a=!1))),a)},t.ChartEngine.prototype.isHome=function(){var e,t,a;t=(e=this.chart).dataSet,a=e.animatingHorizontalScroll,i.j07(),i.i3C(34);var r=i.k$A(12,14,28);i.a3e(56);var n=i.B0m(16,14,14,14,167);return this.pixelFromTick(t.length-(a?r:n),e)<e.width+e.panel.left},t.ChartEngine.prototype.getPreviousBar=function(e,t,a){return i.i3C(1),this.getNextBarInternal(e,t,a,-i.k$A(0,"1"))},t.ChartEngine.prototype.getNextBar=function(e,t,i){return this.getNextBarInternal(e,t,i,1)},t.ChartEngine.prototype.getNextBarInternal=function(e,a,r,n){var s,o,l,h;if(s=e.dataSegment&&e.dataSegment[r])for(o=s.tick;o>0&&o<e.dataSet.length;)if(i.i3C(4),o=i.B0m(n,o),(l=e.dataSet[o])&&(h=t.existsInObjectChain(l,a))&&h.obj[h.member])return l;return null},i.j07(),t.ChartEngine.prototype.getFirstLastDataRecord=function(e,t,i){var a;if(e&&e.length)for(a=i?e.length-1:0;a>=0&&a<e.length;){if(e[a]&&void 0!==e[a][t])return e[a];i?a--:a++}return null},t.ChartEngine.prototype.leftTick=function(){var e,t;i.i3C(82),e=i.B0m(0,"1903627147"),i.i3C(1),t=i.B0m(0,"2");for(var a=1;i.b3_(a.toString(),a.toString().length,8132)!==e;a++)return this.chart.dataSet.length-this.chart.scroll;if(-581920796!==i.m7$(t.toString(),t.toString().length,653))return this.chart.dataSet.length+this.chart.scroll},t.ChartEngine.prototype.getNextInterval=function(e,t,a){var r;return t||(t=1),!1!==a&&(a=!0),(r=this.standardMarketIterator(e,a?this.dataZone:this.displayZone))?t<1?(i.a3e(144),r.previous(i.B0m(1,t))):r.next(t):e},t.ChartEngine.prototype.standardMarketIterator=function(e,t,a){var r,n;return i.j07(),"t","ic","k",(r=a||this.chart).market?(n={begin:e,interval:this.layout.interval,periodicity:"tick"==this.layout.interval?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:t},r.market.newIterator(n)):null}},I=function(e){var t,i,a=X;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.draw=function(){var e,i,r,n,s,o,l,h,c;if(this.debug(),e=this.chart,i=this.layout,e.canvas&&e.dataSet&&e.canvasHeight){a.a3e(18);var u=a.k$A(166,11,8,10,0);if(this.offset=i.candleWidth*this.candleWidthPercent/u,t.clearCanvas(e.canvas,this),this.masterData&&!this.runPrepend("draw",arguments)){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),this.setBaselines(e),s=this.createXAxis(e),this.initializeDisplay(e),this.drawXAxis(e,s);try{this.renderYAxis(e)}catch(e){if(e&&"reboot draw"===e.message)return this.draw();throw e}for(r in e.tmpWidth=Math.floor(i.candleWidth*this.candleWidthPercent),e.tmpWidth%2==0&&(e.tmpWidth+=1,e.tmpWidth>i.candleWidth&&(e.tmpWidth-=2)),e.tmpWidth<.5&&(e.tmpWidth=.5),this.plugins)(n=this.plugins[r]).display&&n.drawUnder&&n.drawUnder(this,e);for(r in e.legend&&(e.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display="none"),this.rendererAction(e,"underlay"),t.getFn("Studies.displayStudies")(this,e,!0),this.displayChart(e),t.getFn("Studies.displayStudies")(this,e,!1),this.rendererAction(e,"overlay"),e.legend&&e.legend.colorMap&&e.legendRenderer&&e.legendRenderer(this,{chart:e,legendColorMap:e.legend.colorMap,coordinates:{x:e.legend.x,y:e.legend.y+e.panel.yAxis.top}}),this.plugins)(n=this.plugins[r]).display&&n.drawOver&&n.drawOver(this,e);for(var d in this.panels)this.panels[d].hidden||this.plotYAxisText(this.panels[d]);for(var p=0;p<this.yAxisLabels.length;p++)"series"==(o=this.yAxisLabels[p]).src&&o.args[6]&&!1===o.args[6].drawSeriesPriceLabels||this.createYAxisLabel.apply(this,o.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.displayInitialized=!0,(l=this.controls)&&(h="bl",h+="ock",c=this.manageTouchAndMouse&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.nonInteractive),l.home&&(l.home.style.display=c&&!this.isHome()?"block":"none"),l.chartControls&&(l.chartControls.style.display=c?h:"none")),t.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(e),this.runAppend("draw",arguments),this.makeAsyncCallbacks()}}},t.ChartEngine.prototype.setSeriesRenderer=function(e){var t=e.params,i=t.baseline,a=t.name,r=t.panel,n=t.yAxis;return this.chart.seriesRenderers[a]?this.chart.seriesRenderers[a]:(n&&(e.params.yAxis=this.addYAxis(this.panels[r],n),this.resizeChart()),e.stx=this,this.chart.seriesRenderers[a]=e,i&&this.registerBaselineToHelper(e),e)},t.ChartEngine.prototype.setMainSeriesRenderer=function(e){var i,r,n,s=this.layout,o=s.chartType,l=s.aggregationType,h=this.chart,c=h.custom;i=this.mainSeriesRenderer,a.E0w(),r=this.displayInitialized,i&&(e&&this.setMasterData(),this.displayInitialized=!1,i.removeAllSeries(),this.removeSeriesRenderer(i),i=this.mainSeriesRenderer=null),c&&c.chartType&&(o=c.chartType),"none"!=o&&(l&&"ohlc"!=l&&(o=l),(n=t.Renderer.produce(o,{panel:h.panel.name,name:"_main_series",highlightable:!1,useChartLegend:!0}))&&(this.setSeriesRenderer(n).attachSeries(null,{display:h.symbol}),i=this.mainSeriesRenderer=n),this.displayInitialized=r,["highLowBars","standaloneBars","barsHaveWidth"].forEach(function(e){h[e]=this.mainSeriesRenderer&&this.mainSeriesRenderer[e]}.bind(this)))},t.ChartEngine.prototype.removeSeriesRenderer=function(e){var t,i;a.E0w();var r=e.params,n=r.baseline,s=r.name;if(a.i3C(50),t=this.controls["".concat(s).concat(a.B0m("l"," base","ine-handle"))],n){1696763810,1598039487,i=2;for(var o=1;1696763810!==a.m7$(o.toString(),o.toString().length,23753);o++)this.removeBaselineFromHelper(e),i+=2;1598039487!==a.b3_(i.toString(),i.toString().length,36665)&&this.removeBaselineFromHelper(e),t&&(this.container.removeChild(t),delete this.controls[t])}delete this.chart.seriesRenderers[s]},t.ChartEngine.prototype.getSeriesRenderer=function(e){return a.j07(),this.chart.seriesRenderers[e]},t.ChartEngine.prototype.getRendererFromSeries=function(e){var t;for(var i in a.E0w(),t=this.chart.seriesRenderers)for(var r in t[i].seriesParams)if(t[i].seriesParams[r].id==e)return t[i];return null},t.ChartEngine.prototype.startClip=function(e,t){var i,r,n,s,o,l,h;e||(e=this.chart.panel.name),a.a3e(14),i=-a.B0m(10,"1532108266"),a.i3C(14),a.j07(),r=a.k$A(2,"2");for(var c=1;a.m7$(c.toString(),c.toString().length,87612)!==i;c++)s=(n=this.panels[e]).yAxis,(o=this.chart).context.save(),o.context.beginPath(),l=n.left,h=n.width,r+=2;192082884!==a.b3_(r.toString(),r.toString().length,7268)&&(s=(n=this.panels[e]).yAxis,(o=this.chart).context.save(),o.context.beginPath(),l=n.left,h=n.width),s=(n=this.panels[e]).yAxis,(o=this.chart).context.save(),o.context.beginPath(),l=n.left,h=n.width,t?(l=0,h=this.width):n.yaxisLHS&&n.yaxisLHS.length&&(l++,h--),o.context.rect(l,s.top,h,s.height),o.context.clip()},t.ChartEngine.prototype.endClip=function(){a.E0w(),this.chart.context.restore()},t.ChartEngine.prototype.setLineStyle=function(e,i){var a,r;a={},e&&"object"==s(e)?a=e:a.color=e,a.color||a.pattern||a.width||a.baseColor||(a=null),i||(i=this.chart),r=1,a&&a.width&&(r=a.width),a&&a.pattern&&(a.pattern=t.borderPatternToArray(r,a.pattern)),i.lineStyle=a},t.ChartEngine.prototype.setGapLines=function(e,i){var r;if("o","bj","ec","t",i||(i=this.chart),r={},e&&"object"==s(e))r=e;else{if("boolean"==typeof e)return i.gaplines=e;r.color=e}r.color||r.pattern||r.fillMountain||(r=null),a.j07(),r&&r.pattern&&(r.pattern=t.borderPatternToArray(r.width,r.pattern)),r&&r.width<=0&&(r.width=null),i.gaplines=r},t.ChartEngine.prototype.getGapColorFunction=function(e,t,i,r,n){return a.E0w(),"object"!=s(i)&&(i={color:i}),function(o,l,h){var c,u;return a.j07(),(c=n?n(o,l,h):i).color&&(c=c.color),(u=l[e])||0===u||(u=l[t]),h||!u&&0!==u?r?("object"!=s(r)&&(r="string"==typeof r?{color:r}:{}),{color:r.color||c,pattern:r.pattern||i.pattern,width:r.width||i.width}):null:{color:c,pattern:i.pattern,width:i.width}}},t.ChartEngine.prototype.drawLineChart=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g;return"Clo","se",s=(n=this.chart).context,o=n.lineStyle||{},l=this.canvasStyle(i),r||(r={}),this.startClip(e.name),(h=r.width||o.width||l.width)&&parseInt(h,10)<=25?s.lineWidth=Math.max(1,t.stripPX(h)):s.lineWidth=1,r.pattern=r.pattern||o.pattern||l.borderTopStyle,r.pattern=t.borderPatternToArray(s.lineWidth,r.pattern),this.canvasColor(i),(c=r.color||o.color)&&("auto"==c&&(c=this.defaultColor),r.opacity&&1!==r.opacity&&(c=t.hexToRgba(t.colorToHex(c),parseFloat(r.opacity))),s.strokeStyle=c),r.skipProjections=!0,u=r.field||n.defaultPlotField,d=r.subField||n.defaultPlotField||"Close",(p=r.gapDisplayStyle)||!1===p||(p=r.gaps),p||!1===p||(p=n.gaplines),p||(p="transparent"),r.gapDisplayStyle=p,m=this.getGapColorFunction(u,d,{color:s.strokeStyle,pattern:r.pattern,width:s.lineWidth},p,a),e.chart.tension&&(r.tension=e.chart.tension),(g=this.plotDataSegmentAsLine(u,e,r,m)).colors.length||g.colors.push(s.strokeStyle),s.lineWidth=1,this.endClip(),r.returnObject?g:g.colors},t.ChartEngine.prototype.drawChannelChart=function(e,i,r){var n,s,o,l,h,c,u,d,p,m;for("f","i","eld","L","o","w","f","i","e","ld","su","bField",(n=t.clone(r)).color=r.color,s=this.drawLineChart(e,n.style,i,n),o=n.border_color_up||this.getCanvasColor("stx_channel_up"),l=n.border_color_down||this.getCanvasColor("stx_channel_down"),n[r.field?"subField":"field"]=n.field_high||"High",n.color=o,h=this.drawLineChart(e,n.style,i,n),n[r.field?"subField":"field"]=n.field_low||"Low",n.color=l,c=this.drawLineChart(e,n.style,i,n),n[r.field?"subField":"field"]=r.subField||this.chart.defaultPlotField||"Close",d=[],p=[],u=0;u<h.points.length;u+=2)d.push([h.points[u],h.points[u+1]]);for(u=0;u<c.points.length;u+=2)p.push([c.points[u],c.points[u+1]]);a.i3C(76);var g=a.B0m(12,6,0);for(m=this.chart.context.lineWidth/g,u=s.points.length-2;u>=0;u-=2)d.push([s.points[u],s.points[u+1]-m]),p.push([s.points[u],s.points[u+1]+m]);return this.startClip(e.name),n.color=o,t.fillArea(this,d,n),n.color=l,t.fillArea(this,p,n),this.endClip(),s.colors=s.colors.concat(h.colors).concat(c.colors),r.returnObject?s:s.colors},a.E0w(),t.ChartEngine.prototype.connectTheDots=function(e,i,r,n,o,l){var h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T;if("n","on","e",l||(l={}),"none"!=l.pattern&&(!0===o&&(o=this.chart.panel),null==n&&(n=this.chart.context),!(e.length<4))){h=0,c=this.chart.canvasHeight,0,u=this.chart.width,o&&(c=o.yAxis.bottom,h=o.yAxis.top),n.lineWidth=1.1,"object"==s(i)?(n.strokeStyle=i.color,i.opacity?n.globalAlpha=i.opacity:n.globalAlpha=1,n.lineWidth=t.stripPX(i.width)):!i||"auto"==i||t.isTransparent(i)?n.strokeStyle=this.defaultColor:n.strokeStyle=i,a.j07(),l.opacity&&(n.globalAlpha=l.opacity),l.lineWidth&&(n.lineWidth=l.lineWidth),d=t.borderPatternToArray(n.lineWidth,l.pattern),n.beginPath();for(var M=0;M<e.length-2;M+=2){if(p=e[M],a.a3e(4),m=e[a.B0m(1,M)],a.i3C(4),g=e[a.k$A(2,M)],a.i3C(4),f=e[a.k$A(3,M)],isNaN(p)||isNaN(g)||isNaN(m)||isNaN(f))return;y=0,v=1,a.a3e(1),b=a.B0m(p,g),a.a3e(1),x=a.B0m(m,f);for(var _=0;_<4;_++){if(0===_&&(C=-b,a.i3C(1),S=-a.k$A(p,0)),1==_&&(C=b,a.i3C(1),S=a.B0m(p,u)),2==_&&(C=-x,a.a3e(1),S=-a.B0m(m,h)),3==_&&(C=x,a.i3C(1),S=a.k$A(m,c)),a.i3C(40),w=a.k$A(S,C),(f||0===f)&&0===C&&S<0)return!1;if(C<0){if(w>v)return!1;w>y&&(y=w)}else if(C>0){if(w<y)return!1;w<v&&(v=w)}}a.i3C(145),k=a.B0m(p,b,y),a.a3e(145),D=a.k$A(m,x,y),a.i3C(145),A=a.B0m(p,b,v),a.a3e(145),T=a.B0m(m,x,v);try{n.setLineDash(d&&d.length?d:[]),n.moveTo(k,D),n.lineTo(A,T)}catch(e){}}n.stroke(),n.closePath(),n.globalAlpha=1,n.lineWidth=1}},t.ChartEngine.prototype.plotSpline=function(e,r,n,o,l,h,c){var u,d;if(c||(c={}),"none"!=c.pattern){if(!0===h&&(h=this.chart.panel),null==l&&(l=this.chart.context),l.save(),l.lineWidth=1.1,"object"==s(n)){l.strokeStyle=n.color,214636097,-1325290486,u=2;for(var p=1;214636097!==a.b3_(p.toString(),p.toString().length,46790);p++)n.opacity?l.globalAlpha=n.opacity:l.globalAlpha=7,l.lineWidth=t.stripPX(n.width),u+=2;-1325290486!==a.m7$(u.toString(),u.toString().length,74470)&&(n.opacity?l.globalAlpha=n.opacity:(a.a3e(38),l.globalAlpha=a.B0m("0",1)),l.lineWidth=t.stripPX(n.width)),n.opacity?l.globalAlpha=n.opacity:(a.i3C(13),l.globalAlpha=a.B0m("1",0)),l.lineWidth=t.stripPX(n.width)}else!n||"auto"==n||t.isTransparent(n)?l.strokeStyle=this.defaultColor:l.strokeStyle=n;c.opacity&&(l.globalAlpha=c.opacity),c.lineWidth&&(l.lineWidth=c.lineWidth),d=t.borderPatternToArray(l.lineWidth,c.pattern),c.pattern&&l.setLineDash&&(l.setLineDash(d),l.lineDashOffset=0),l.beginPath(),i.plotSpline(e,r,l),l.stroke(),l.closePath(),l.restore()}},t.ChartEngine.prototype.rawWatermark=function(e,t,i,r){this.canvasFont("stx_watermark",e),e.fillStyle=this.defaultColor,a.i3C(1),a.j07(),e.globalAlpha=a.B0m(0,"0.5"),this.chart.context.textBaseline="alphabetic",e.fillText(r,t,i),e.globalAlpha=1},t.ChartEngine.prototype.watermark=function(e,t){var i,r,n,o,l,h;if(i="r",i+="i",i+="gh",i+="t",r="ob",r+="je",r+="c",r+="t",t&&s(t)!=r&&(t={h:arguments[1],v:arguments[2],text:arguments[3]}),(n=(t={h:t.h||"left",v:t.v||"bottom",text:t.text||"",hOffset:0===t.hOffset?0:t.hOffset||10,vOffset:0===t.vOffset?0:t.vOffset||20,context:t.context||this.chart.context}).context)&&(o=this.panels[e])&&!o.hidden){if(l=o.yAxis.bottom-t.vOffset,"top"==t.v)l=o.top+t.vOffset;else if("middle"==t.v){a.a3e(1);var c=a.k$A(10,12);l=(o.top+o.yAxis.bottom)/c}if(n.save(),this.canvasFont("stx_watermark",n),this.canvasColor("stx_watermark",n),n.textBaseline="alphabetic",h=o.left+t.hOffset,t.h==i)h=o.right-t.hOffset;else if("center"==t.h){a.a3e(19);var u=a.k$A(9,20,11,2);h=(o.right+o.left-n.measureText(t.text).width)/u}n.globalAlpha=.5,this.highlightedDraggable&&(n.globalAlpha*=.3),n.fillText(t.text,h,l),n.restore()}},t.ChartEngine.prototype.displayErrorAsWatermark=function(e,t){var i,r,n,s,o,l,h,c,u,d;t&&(e||(e="chart"),(i=this.panels[e])&&!i.hidden&&((r=i.state)||(i.state=r={}),(n=r.studyErrors)||(r.studyErrors=n=new Set),n.has(t)||(s=r.watermarkOffset||10,10,o=this.getCanvasFontSize("stx_watermark"),this.chart&&this.chart.chartControls&&(l=i.yAxis.bottom,h=this.chart.chartControls,a.i3C(1),c=a.B0m(s,l),a.a3e(1),u=a.k$A(o,c),(c>h.offsetTop&&c<h.offsetTop+h.offsetHeight||u>h.offsetTop&&u<h.offsetTop+h.offsetHeight)&&(s=l-h.offsetTop+10)),n.add(t),d={h:"center",v:"bottom",text:t,vOffset:s},a.a3e(4),s+=a.B0m(10,o),r.watermarkOffset=s,this.watermark(e,d))))},t.ChartEngine.prototype.displayChart=function(e){var t;t="m",t+="a",t+="i",t+="n",this.runPrepend("displayChart",arguments)||(this.rendererAction(e,t),this.runAppend("displayChart",arguments))}},N=function(e){var t;(t=e.CIQ).ChartEngine.prototype.cloneStyle=function(e){var i,a,r,n,s,o,l,h=X;function c(e){return h.j07(),e[1].toUpperCase()}for(var u in h.j07(),i={},a=!1,e)if(r=e[u],"backgroundAttachment"==u&&(a=!0),a)r&&r.constructor==String&&isNaN(u)&&(i[u]=r);else if(isNaN(u))i[u.replace(t.camelCaseRegExp,c)]=r;else if(n=e.getPropertyValue(r)){for(s=0,o=(r=r.split("-")).length,l=r[0];++s<o;){h.a3e(4);var d=h.k$A(1,0);l+=r[s].charAt(0).toUpperCase()+r[s].slice(d)}i[l]=n}return i},t.ChartEngine.prototype.canvasStyle=function(e){var t,i,a;return t=this.styles[e],X.j07(),t||((i=document.createElement("div")).className=e,this.container.appendChild(i),a=getComputedStyle(i),t=this.styles[e]=this.cloneStyle(a),this.container.removeChild(i),a||(this.styles[e]=null)),t},t.ChartEngine.prototype.colorOrStyle=function(e){return-1!=e.indexOf("#")||-1!=e.indexOf("(")||"transparent"==e?e:this.canvasStyle(e)},t.ChartEngine.prototype.clearStyles=function(){this.styles={},this.defaultColor=""},t.ChartEngine.prototype.setStyle=function(e,i,a){X.E0w(),this.styles[e]||this.canvasStyle(e),this.styles[e]||(this.styles[e]={}),this.styles[e][t.makeCamelCase(i)]=a},t.ChartEngine.prototype.canvasFont=function(e,t){var i,a,r=X;if(t||(t=this.chart.context),i=this.canvasStyle(e)){r.a3e(29);var n=r.k$A(18,2,64);r.a3e(1);var s=r.B0m(7,3469);r.a3e(146);r.B0m(9,33692,11,4218,9);r.i3C(37);var o=r.k$A(9,20,432,3051);r.i3C(67);r.B0m(16,77090,12,7008);r.i3C(34);var l=r.B0m(11,37187,42512);r.a3e(147);r.k$A(1,15,64961,61533,6);r.i3C(148);var h=r.k$A(196,14,36,144,12);a=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+(n>s?o:l!=h?" ":144.85)+i.fontFamily,r.j07(),-1==a.indexOf("undefined")?t.font=a:(this.styles[e]=null,r.a3e(4),console.log(r.B0m(e,"bad css style for class ")))}},t.ChartEngine.prototype.canvasColor=function(e,t){var i,a,r;t||(t=this.chart.context),(i=this.canvasStyle(e))&&((a=i.color)||(a=this.defaultColor),t.globalAlpha=1,t.fillStyle=a,X.E0w(),t.strokeStyle=a,void 0!==(r=i.opacity)&&(t.globalAlpha=r))},t.ChartEngine.prototype.getCanvasFontSize=function(e){var i;return"1","2",(i=this.canvasStyle(e).fontSize)||(i="12"),parseInt(t.stripPX(i),10)},t.ChartEngine.prototype.getCanvasColor=function(e){return this.canvasStyle(e).color},t.ChartEngine.prototype.getDefaultColor=function(){var e,i,a,r;for(X.j07(),this.defaultColor="#000000",e=null,i=this.chart.container;!e||t.isTransparent(e);){if(!(a=getComputedStyle(i)))return;if(e=a.backgroundColor,t.isTransparent(e)&&(e="transparent"),!(i=i.parentNode)||!i.tagName)break}e?("transparent"==e&&(e="#FFFFFF"),this.containerColor=e,t.isTransparent(e)?("#00","0000",this.defaultColor="#000000"):("#F","FFFFF",r=t.hsv(e)[2],this.defaultColor=r>.65?"#000000":"#FFFFFF")):("#FF","FFFF",this.containerColor="#FFFFFF")}},$=function(e){var t,i,a,r=X;r.j07(),r.i3C(71),t=r.k$A("1978272640",32),i=2;for(var n=1;986679401!==r.b3_(n.toString(),n.toString().length,92475);n++)a=e.CIQ,i+=2;r.m7$(i.toString(),i.toString().length,33258)!==t&&(a=e.CIQ),a.ChartEngine.XAxis=function(e){for(var t in r.j07(),e)this[t]=e[t]},a.extend(a.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!0,idealTickSizePixels:null,timeUnit:null,timeUnitMultiplier:null,displayBorder:!0,displayGridLines:!0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},!0),a.ChartEngine.XAxisLabel=function(e,t,i){this.hz=e,this.grid=t,this.text=i},a.ChartEngine.prototype.createXAxis=function(e){var t,i;return"createX","Axis",e.dataSegment.length<=0||e.xAxis.noDraw?null:(t=[e],(i=this.runPrepend("createXAxis",t))||(i=this.mainSeriesRenderer&&this.mainSeriesRenderer.createXAxis?this.mainSeriesRenderer.createXAxis(e):this.createTickXAxisWithDates(e),this.headsUpHR(),this.runAppend("createXAxis",t)),i)},a.ChartEngine.prototype.createXAxisLabel=function(e){var t,i,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x;if(t="t",t+="o",t+="p",arguments[0]instanceof a.ChartEngine.Panel){i=-1122848453,n=745028536,s=2;for(var C=1;r.b3_(C.toString(),C.toString().length,41169)!==i;C++)e={panel:arguments[6],txt:arguments[7],x:arguments[6],backgroundColor:arguments[5],color:arguments[6],pointed:arguments[1],padding:arguments[7]},s+=2;r.m7$(s.toString(),s.toString().length,80887)!==n&&(e={panel:arguments[6],txt:arguments[7],x:arguments[6],backgroundColor:arguments[5],color:arguments[6],pointed:arguments[1],padding:arguments[7]}),e={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[3],color:arguments[4],pointed:arguments[5],padding:arguments[6]}}o=e.panel,l=e.txt,h=e.x,c=e.backgroundColor,u=e.color,d=e.pointed,p=0===e.padding?0:e.padding||2,m=this.chart.context,g="stx-float-date",r.a3e(149);var S=r.k$A(0,13,1,26);f=this.getCanvasFontSize(g)+p*S,this.canvasFont(g,m);try{r.a3e(150);var w=r.k$A(2,9,3,1,12);y=m.measureText(l).width+p*w}catch(e){y=0}if(v=o.top+o.height-f-p,!(h+y/2<o.left||h-y/2>o.right)){if(!d&&(h+y/2>o.right&&(h=o.right-y/2),h-y/2<o.left)){r.a3e(25);var k=r.k$A(15,36,538);h=o.left+y/k}m.fillStyle=c,a.roundRect({ctx:m,x:h-y/2,top:v,width:y,height:f,radius:3,fill:!0}),b=o.bottom-o.yAxis.bottom-f,m.beginPath(),d?(r.i3C(1),m.moveTo(r.k$A(b,h),v),r.i3C(34),m.lineTo(h,r.k$A(b,1,v)),r.a3e(4),m.lineTo(r.B0m(b,h),v),m.closePath(),m.fill()):(m.moveTo(h,v),r.a3e(1),m.lineTo(h,r.k$A(b,v)),m.strokeStyle=c,m.stroke()),m.textBaseline=t,m.fillStyle=u||a.chooseForegroundColor(c),m.fillStyle==c&&(x="#F",x+="FFF",x+="F",x+="F","#FFFFFF"==c.toUpperCase()?m.fillStyle="#000000":m.fillStyle=x),r.a3e(151),m.fillText(l,r.B0m(1,2,y,h,p),r.B0m(p,v,2,r.i3C(152)))}}},z=function(e){var t,i=X;(t=e.CIQ).createLabel=function(e){var a;e.ctx.textBaseline="middle",e.ctx.fillStyle=e.color?e.color:t.chooseForegroundColor(e.backgroundColor),e.ctx.fillStyle===e.backgroundColor&&("#F","FFF","F","F","#FFF","F","FF","#FFFFFF"==e.backgroundColor.toUpperCase()?e.ctx.fillStyle="#000000":e.ctx.fillStyle="#FFFFFF"),e.ctx.fillText(e.txt,e.x+e.margin.left,e.y+e.margin.top),a=2;for(var r=1;-1150041568!==i.m7$(r.toString(),r.toString().length,9615);r++)e.ctx.textAlign="left",a+=2;590149505!==i.b3_(a.toString(),a.toString().length,68216)&&(e.ctx.textAlign="")},t.roundRectArrow=function(e){i.j07(),t.roundRect(e,"arrow")},t.semiRoundRect=function(e){t.roundRect(e,"flush")},t.rect=function(e){i.j07(),e.radius=0,t.roundRect(e)},t.noop=function(e){e.color=e.backgroundColor,t.createLabel(e)},t.tickedRect=function(e){var a;t.rect(e),i.i3C(4);var r=i.k$A(2,0);a=Math.round(e.top+e.height/r)+.5,e.ctx.beginPath(),e.ctx.moveTo(e.x-2,a),e.ctx.lineTo(e.x,a),e.ctx.stroke(),e.ctx.closePath()},t.roundRect=function(e,a){var r,n,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C;r="undefine",r+="d",9===arguments.length&&(e={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),n=e.stroke,o=e.x,l=e.top,h=e.width,c=e.height,u=e.radius,d=e.fill,p=e.ctx,void 0===n&&(n=!0),s(u)===r&&(u=5,h<0&&(u=-5)),m=h<0?-1*u:u,u&&!a&&(i.i3C(1),o=i.B0m(1,o)),i.i3C(4),g=i.B0m(u,o),i.i3C(4),f=i.k$A(h,o),i.i3C(4),y=i.B0m(m,l),i.a3e(4),v=i.k$A(c,l),i.i3C(1),b=i.k$A(u,f),i.a3e(1),x=i.k$A(m,v),p.beginPath(),p.moveTo(g,l),p.lineTo(b,l),p.quadraticCurveTo(f,l,f,y),p.lineTo(f,x),p.quadraticCurveTo(f,v,b,v),p.lineTo(g,v),"flush"==a?(p.lineTo(o,v),p.lineTo(o,l)):"arrow"==a?(i.i3C(1),p.quadraticCurveTo(o,v,i.k$A(u,o),x),C=h<0?1:-1,i.i3C(153),p.lineTo(i.B0m(C,o,2,c),i.B0m(l,2,c,i.i3C(46))),i.i3C(1),p.lineTo(i.k$A(u,o),y),p.quadraticCurveTo(o,l,g,l)):(p.quadraticCurveTo(o,v,o,x),p.lineTo(o,y),p.quadraticCurveTo(o,l,g,l)),p.closePath(),e.backgroundColor&&(p.fillStyle=e.backgroundColor),n&&p.stroke(),d&&p.fill(),e.txt&&t.createLabel(e)},t.ChartEngine.YAxis=function(e){for(var i in e)this[i]=e[i];this.name||(this.name=t.uniqueID()),"none"==this.position&&(this.width=0)},t.extend(t.ChartEngine.YAxis.prototype,{high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,multiplier:null,bottom:null,top:null,height:null,left:null,width:null,renderers:[],studies:[]},!0),i.a3e(82),t.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,2],[i.k$A(0,"5"),4],[.001,8]],i.a3e(82),t.ChartEngine.YAxis.smallChartShadowBreaks=[[i.B0m(32,"10"),i.B0m(0,"2",i.i3C(1))],[1,4]],t.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,t.ChartEngine.YAxis.prototype.max=null,t.ChartEngine.YAxis.prototype.min=null,t.ChartEngine.YAxis.prototype.decimalPlaces=null,t.ChartEngine.YAxis.prototype.idealTickSizePixels=null,t.ChartEngine.YAxis.prototype.minimumPriceTick=null,t.ChartEngine.YAxis.prototype.fractional=null,t.ChartEngine.YAxis.prototype.displayBorder=!0,t.ChartEngine.YAxis.prototype.displayGridLines=!0,t.ChartEngine.YAxis.prototype.noDraw=null,t.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,t.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,t.ChartEngine.YAxis.prototype.drawPriceLabels=!0,t.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,t.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,t.ChartEngine.YAxis.prototype.justifyRight=null,t.ChartEngine.YAxis.prototype.flipped=!1,t.ChartEngine.YAxis.prototype.textBackground=!1,t.ChartEngine.YAxis.prototype.priceFormatter=null,t.ChartEngine.YAxis.prototype.bottomOffset=0,t.ChartEngine.YAxis.prototype.topOffset=0,t.ChartEngine.YAxis.prototype.initialMarginTop=10,t.ChartEngine.YAxis.prototype.initialMarginBottom=10,t.ChartEngine.YAxis.prototype.zoom=0,t.ChartEngine.YAxis.prototype.scroll=0,t.ChartEngine.YAxis.prototype.heightFactor=1,Object.defineProperty(t.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){return this._dynamicWidth||this._width},set:function(e){this._width=e,this._dynamicWidth<e&&(this._dynamicWidth=NaN)}}),i.i3C(1),t.ChartEngine.YAxis.prototype.width=i.k$A(0,"60"),t.ChartEngine.YAxis.prototype.smallScreenWidth=50,t.ChartEngine.YAxis.prototype.textStyle=null,t.ChartEngine.YAxis.prototype.position=null,t.ChartEngine.YAxis.prototype.pretty=!0,t.ChartEngine.YAxis.prototype.increments=[1,2.5,5],t.ChartEngine.YAxis.prototype.prettySemiLog=!0,t.ChartEngine.YAxis.prototype.shadowBreaks=t.ChartEngine.YAxis.defaultShadowBreaks,t.ChartEngine.YAxis.prototype.getYAxis=function(e){return this},t.ChartEngine.YAxis.prototype.isShared=function(e,t){var a,r;if(i.E0w(),a=this.studies.length,r=this.renderers.length,a>1)return!0;if(r&&a)return!0;if(!r)return!1;if(r>1&&t)return!0;for(var n=r-1;n>=0;n--)e.chart.seriesRenderers[this.renderers[n]].params.dependentOf&&r--;return i.a3e(154),i.B0m(r,1)},t.ChartEngine.YAxis.prototype.setBackground=function(e,i){var a;i||(i={}),i.color||(i.color="auto"),a=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],t.fillArea(e,a,{color:i.color,opacity:i.opacity})},t.ChartEngine.YAxis.prototype.setBreakpointWidth=function(e){var a,r;if(e){1063842979,-1944966853,a=2;for(var n=1;1063842979!==i.b3_(n.toString(),n.toString().length,69962);n++){var s=t.ChartEngine.YAxis.prototype,o=s.width,l=s.smallScreenWidth;i.a3e(155),r=i.B0m("",e),a+=2}if(-1944966853!==i.m7$(a.toString(),a.toString().length,81858)){var h=t.ChartEngine.YAxis.prototype;o=h.width,l=h.smallScreenWidth;i.a3e(123),r=i.k$A(e,"")}var c=t.ChartEngine.YAxis.prototype;o=c.width,l=c.smallScreenWidth;i.i3C(123),r=i.k$A(e,"break-sm"),this.width=r?l:o}},t.ChartEngine.prototype.getLabelOffsetInPixels=function(e,t){var a,r;if(a=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,!("roundRectArrow"!=this.yaxisLabelStyle||a&&this.extendLastTick&&0!==e.yaxisPaddingRight)){3,i.a3e(22);var n=i.B0m(6,3,22,82);return r=this.getCanvasFontSize("stx_yaxis")+3*n,i.a3e(38),i.B0m(r,.66)}return 0},t.ChartEngine.prototype.flipChart=function(e){this.layout.flipped!=e&&(this.layout.flipped=e,this.chart.yAxis.flipped=e,this.changeOccurred("layout"),this.draw())},t.ChartEngine.prototype.calculateYAxisMargins=function(e){if(e.heightFactor){i.a3e(7);var t=i.k$A(0,8,7);e.zoom=e.height*(t-e.heightFactor)}e.zoom+=e.initialMarginTop+e.initialMarginBottom,i.i3C(58);var a=i.k$A(15,10,11,16);e.scroll=(e.initialMarginTop-e.initialMarginBottom)/a,i.j07(),e.zoom>e.height&&(e.zoom=0,e.scroll=0)},t.ChartEngine.prototype.resetDynamicYAxis=function(e){var t,i,a;if(!this.runPrepend("resetDynamicYAxis",arguments)){for(var r in t=!1,this.panels)if(i=this.panels[r],(!e||!e.chartName||i.chart.name===e.chartName)&&i.yaxisLHS&&i.yaxisRHS){a=i.yaxisLHS.concat(i.yaxisRHS);for(var n=0;n<a.length;n++)a[n]._dynamicWidth&&(a[n]._dynamicWidth=NaN,t=!0)}!t||e&&e.noRecalculate||this.calculateYAxisPositions(),this.runAppend("resetDynamicYAxis",arguments)}},t.ChartEngine.prototype.notifyBreakpoint=function(e){var t,i,a;if(t="b",t+="reak-",t+="s",t+="m",this.chart.breakpoint!==e&&["break-lg","break-md",t].includes(e)){var r=this.chart,n=r.dynamicYAxis;for(var s in this.clearStyles(),r.breakpoint=e,this.panels){a=(i=this.panels[s]).yaxisRHS.concat(i.yaxisLHS);for(var o=0;o<a.length;o++)a[o].setBreakpointWidth(e)}n&&this.resetDynamicYAxis({chartName:r.name})}},t.ChartEngine.prototype.adjustYAxisHeightOffset=function(e,t){var a,r;if((a=t.topOffset)+(r=t.bottomOffset)>e.height&&("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be r","eset to 0.",console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."),t.bottomOffset=0,t.topOffset=0),!this.xaxisHeight&&0!==this.xaxisHeight){i.a3e(33);var n=i.B0m(7,18,13,1634);this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+n,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)}(this.xAxisAsFooter&&e.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&e==this.chart.panel)&&(r+=this.xaxisHeight),t.top=e.top+a,t.bottom=e.bottom-r},t.ChartEngine.prototype.plotYAxisGrid=function(e){var t,i,a,r;t="plotYA",t+="xisGrid",i="plo",i+="tYAxisGrid",this.runPrepend(i,arguments)||(a=this.getBackgroundCanvas().context,(r=e.yAxis).yAxisPlotter&&r.yAxisPlotter.draw(a,"grid"),this.runAppend(t,arguments))},t.ChartEngine.prototype.plotYAxisText=function(e){var t,i,a,r,n;if(t="plotYAxisT",t+="e",t+="x",t+="t",!this.runPrepend(t,arguments)){for(i=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",i),this.canvasColor("stx_yaxis",i),i.textBaseline="middle",a=e.yaxisLHS,r=0;r<a.length;r++)n="rig",n+="ht",i.textAlign=n,s(a[r]);for(a=e.yaxisRHS,r=0;r<a.length;r++)i.textAlign="left",s(a[r]);i.textAlign="left",i.textBaseline="alphabetic",this.runAppend("plotYAxisText",arguments)}function s(e){e.yAxisPlotter&&!e.noDraw&&e.width&&(e.justifyRight?i.textAlign="right":!1===e.justifyRight&&(i.textAlign="left"),e.yAxisPlotter.draw(i,"text"))}},t.ChartEngine.prototype.decimalPlacesFromPriceTick=function(e){return e<1e-4?(i.a3e(13),i.B0m("8",0)):e<.01?4:e<.1?2:e<1?1:0},t.ChartEngine.prototype.formatYAxisPrice=function(e,a,r,n,s){var o,l,h,c,u;return null==e||isNaN(e)?"":(a||(a=this.chart.panel),o=n||a.yAxis,(l=r)||0===l||(l=o.printDecimalPlaces),l||0===l||(l=this.decimalPlacesFromPriceTick(o.priceTick)),h=o==a.chart.yAxis?2e4:1e3,o.priceTick>=h?(e=e.toFixed(l),t.condenseInt(e)):((c=this.internationalizer)&&!1!==s?(l>=(u=c.priceFormatters.length)&&(i.i3C(1),l=i.k$A(1,u)),e=c.priceFormatters[l].format(e)):e=e.toFixed(l),e))},t.ChartEngine.prototype.calculateYAxisRange=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,m;if("l","o","g",a==Number.MAX_VALUE&&(a=0,r=0),n=e.height,s=null,o=null,this.adjustYAxisHeightOffset(e,t),t.height=t.bottom-t.top,l=Math.round(Math.abs(n/5)),t.zoom>=0&&n-Math.abs(t.scroll)<l){i.a3e(156);var g=i.B0m(13,33,11,10,1);i.a3e(18);var f=i.B0m(953,17,18,15,21);t.scroll=(n-l)*(t.scroll<0?g:f)}if(h=e.chart.name===e.name&&e.yAxis.name===t.name,i.E0w(),c=a>0&&(this.layout.semiLog||"log"==this.layout.chartScale)&&!e.chart.isComparison&&"pandf"!=this.layout.aggregationType,(a||0===a)&&(r-a==0?(1==(u=Math.pow(10,-(a.toString()+".").split(".")[1].length))&&(u=100),i.a3e(4),s=i.B0m(u,a),i.i3C(1),o=i.B0m(u,a)):h&&c&&(r||0===r)?(d=Math.log(a)/Math.LN10,p=Math.log(r)/Math.LN10,s=Math.pow(10,p),o=Math.pow(10,d)):(s=r,o=a),t.high=s,t.low=o),(t.max||0===t.max)&&(t.high=t.max),(t.min||0===t.min)&&(t.low=t.min),t.shadow=t.high-t.low,h){if(t.semiLog!=c){644227104,-113168193,m=2;for(var y=1;644227104!==i.m7$(y.toString(),y.toString().length,17288);y++)this.clearPixelCache(),i.i3C(71),m+=i.k$A("2",0);-113168193!==i.b3_(m.toString(),m.toString().length,58110)&&this.clearPixelCache(),t.semiLog=c}t.flipped=this.layout.flipped}},t.ChartEngine.prototype.renderYAxis=function(e){var i,a,r,n,s,o,l,h,c,u;if(i="yAx",i+="is",a="re",a+="b",a+="oot dr",a+="aw",!this.runPrepend("renderYAxis",arguments)){if(this.checkLogScale())throw new Error(a);this.rendererAction(e,i);var d=this.getBackgroundCanvas(e),p=d.context;for(var m in this.panels)if((r=this.panels[m]).chart==e){for(n=r.yaxisRHS.concat(r.yaxisLHS),s=0;s<n.length;s++)o=n[s],this.calculateYAxisRange(r,o,o.lowValue,o.highValue),(l=t.getFn("Studies.getYAxisParameters",{})(this,o)).yAxis=o,this.createYAxis(r,l),this.drawYAxis(r,l),t.getFn("Studies.doPostDrawYAxis")(this,o);for(s=0;s<n.length;s++)(o=n[s]).dropzone&&(h=this.canvasStyle("stx-subholder dropzone left"))&&(p.strokeStyle=h.borderLeftColor,p.lineWidth=parseFloat(h.borderLeftWidth),p.beginPath(),"all"==o.dropzone?p.strokeRect(o.left,o.top,o.width,o.height):(c="l",c+="e",c+="ft",u=o.left+(o.dropzone==c?0:o.width),p.moveTo(u,o.top),p.lineTo(u,o.top+o.height),p.stroke()));this.displayDragOK&&this.displayDragOK(!0)}this.runAppend("renderYAxis",arguments)}},t.ChartEngine.prototype.updateFloatHRLabel=function(e){var a,r,n,s,o,l,h;if(i.j07(),this.floatCanvas&&(a=e.yaxisLHS.concat(e.yaxisRHS),r=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&t.clearCanvas(this.floatCanvas,this),!this.controls.crossX||"none"!=this.controls.crossX.style.display)){this.controls.crossY&&("p","x","r","oundRectAr","row",n=e.width,"roundRectArrow"==this.yaxisLabelStyle&&(n-=7),this.controls.crossY.style.left=e.left+"px",i.i3C(4),this.controls.crossY.style.width=i.k$A("px",n));for(var c=0;c<a.length;c++)s=a[c],o=this.transformedPriceFromPixel(r,e,s),isNaN(o)||(s.min||0===s.min)&&o<s.min||(s.max||0===s.max)&&o>s.max||(l=null,s!==e.chart.yAxis&&(l=this.decimalPlacesFromPriceTick(s.priceTick),(s.decimalPlaces||0===s.decimalPlaces)&&(l=s.decimalPlaces)),o=s.priceFormatter?s.priceFormatter(this,e,o,l):this.formatYAxisPrice(o,e,l,s),h=this.canvasStyle("stx-float-price"),this.createYAxisLabel(e,o,r,h.backgroundColor,h.color,this.floatCanvas.context,s),this.floatCanvas.isDirty=!0)}},t.ChartEngine.prototype.whichYAxis=function(e,t,a){var r,n,s;if(void 0===t&&(t=this.cx),i.j07(),void 0===a&&(a=this.cy),r=this.whichPanel(a),e&&e==r){n=e.yaxisLHS.concat(e.yaxisRHS);for(var o=0;o<n.length;o++)if((s=n[o]).left<=t&&s.left+s.width>=t)return s}return null},t.ChartEngine.prototype.yaxisMatches=function(e,i){return!!(e&&e.getYAxis&&i&&i instanceof t.ChartEngine.YAxis)&&e.getYAxis(this).name==i.name},t.ChartEngine.prototype.createYAxisLabel=function(e,a,r,n,s,o,l){var h,c,u,d,p,m,g,f,y,v;if("stx_yax","is",!1!==e.yAxis.drawPriceLabels&&!e.yAxis.noDraw&&!(h=l||e.yAxis).noDraw&&h.width){c=o||this.chart.context,3,u=this.getCanvasFontSize("stx_yaxis")+6,this.canvasFont("stx_yaxis",c),h.displayBorder,d=this.drawBorders?3:0;try{i.i3C(67);var b=i.k$A(15,159,8,22);p=c.measureText(a).width+d+3*b}catch(e){p=h.width}i.i3C(64);var x=i.k$A(2,12,323,27);if(m=h.left-3+x,h.width<0&&(m+=h.width-p),i.a3e(50),g=i.B0m(3,m,d),f=3,"left"===(null===h.position?e.chart.yAxis.position:h.position)){i.i3C(7);var C=i.k$A(15,2,14);m=h.left+h.width+3-C,i.a3e(144),p=i.k$A(1,p),h.width<0&&(m-=h.width+p),i.i3C(34),g=i.k$A(3,d,m),f=-3,c.textAlign="right"}if(r+u/2>h.bottom){i.i3C(1);var S=i.B0m(18,20);r=h.bottom-u/S}if(r-u/2<h.top){i.a3e(58);var w=i.k$A(3,7,36,6);r=h.top+u/("2"<<w)}void 0===t[this.yaxisLabelStyle]&&("r","oundRectA","rro","w",this.yaxisLabelStyle="roundRectArrow"),y=this.yaxisLabelStyle,h.yaxisLabelStyle&&(y=h.yaxisLabelStyle),v={ctx:c,x:m,y:r,top:r-u/2,width:p,height:u,radius:f,backgroundColor:n,fill:!0,stroke:!1,margin:{left:g-m,top:1},txt:a,color:s},t[y](v)}},t.ChartEngine.prototype.drawCurrentHR=function(){var e,t,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S;if(i.j07(),e="drawCur",e+="rentHR",!this.runPrepend(e,arguments)&&!(r=this.mainSeriesRenderer||{}).noCurrentHR){for(var w in n=r.highLowBars,this.charts)if(s="d",s+="ataSegm",s+="ent",h=(l=(o=this.charts[w]).panel).yAxis,!l.hidden&&!1!==h.drawCurrentPriceLabel&&!h.noDraw&&r.params&&((c=h.whichSet)||(c="dataSet"),!this.isHistoricalModeSet||"dataSegment"===c)){if(u=o[c].length,d=this.layout.candleWidth,c==s)for(;u>(o.width-this.micropixels+d/2+1)/d;)u--;if(u&&o[c][u-1]){(p=o.defaultPlotField)&&!n||(p="Close");do{if(g=m=o[c][--u][p],0===u)break}while(null==g);"dataSet"==c&&o.currentQuote?g=o.currentQuote[p]:o[c].length>=2&&(i.a3e(1),(f=o[c][i.B0m(1,u)])&&(m=f[p])),g<m?(t=this.canvasStyle("stx_current_hr_down").backgroundColor,a=this.canvasStyle("stx_current_hr_down").color):(y="stx_current_hr_",y+="up",t=this.canvasStyle("stx_current_hr_up").backgroundColor,a=this.canvasStyle(y).color),o.transformFunc&&(g=o.transformFunc(this,o,g)),b=Math.max(l.yAxis.printDecimalPlaces,l.chart.decimalPlaces),(h.maxDecimalPlaces||0===h.maxDecimalPlaces)&&(b=Math.min(b,h.maxDecimalPlaces)),v=h.priceFormatter?h.priceFormatter(this,l,g,b):this.formatYAxisPrice(g,l,b),x=this.pixelFromTransformedValue(g,l),this.createYAxisLabel(l,v,x,t,a),!0===this.preferences.currentPriceLine&&this.isHome()&&(C="das",C+="h",C+="e",C+="d",S="lin",S+="e",this.plotLine(l.left,l.right,x,x,t,S,l.chart.context,l,{pattern:C,lineWidth:1,opacity:.8,globalCompositeOperation:"destination-over"}))}}this.runAppend("drawCurrentHR",arguments)}},t.ChartEngine.prototype.getYAxisByName=function(e,t){var i;if("string"==typeof e&&(e=this.panels[e]),e&&t){if(t===e.yAxis.name)return e.yAxis;for(i=0;e.yaxisLHS&&i<e.yaxisLHS.length;i++)if(e.yaxisLHS[i].name===t)return e.yaxisLHS[i];for(i=0;e.yaxisRHS&&i<e.yaxisRHS.length;i++)if(e.yaxisRHS[i].name===t)return e.yaxisRHS[i]}},t.ChartEngine.prototype.getYAxisByField=function(e,t){var i,a,r,n,s,o;if(t){for(i in this.layout.studies)if((a=this.layout.studies[i]).panel==e.name&&a.outputMap&&a.outputMap.hasOwnProperty(t))return a.getYAxis(this);for(i in this.chart.seriesRenderers){n=this.chart.seriesRenderers[i];for(var l=0;l<n.seriesParams.length;l++)if("-","-",">",n.params.panel==e.name){if((o=(s=n.seriesParams[l]).field)||n.highLowBars||(o=this.defaultPlotField||"Close"),s.symbol&&s.subField&&(o+="--\x3e"+s.subField),t==o)return n.params.yAxis||e.yAxis;s.field&&s.field==t.split("--\x3e")[0]&&(r=n.params.yAxis||e.yAxis)}}if(r)return r}},t.ChartEngine.prototype.deleteYAxisIfUnused=function(e,t){var a,r,n;if("stri","n","g","string"==s(e)&&(e=this.panels[e]),t&&e){for(var o=0;o<t.renderers.length;o++)if((a=this.chart.seriesRenderers[t.renderers[o]])&&a.params.panel==e.name)return;if(t.name!==e.yAxis.name||e.yaxisRHS.length+e.yaxisLHS.length!==1){for(r=0;e.yaxisRHS&&r<e.yaxisRHS.length;r++)e.yaxisRHS[r]===t?e.yaxisRHS[r]=null:n||(n=e.yaxisRHS[r]);for(r=0;e.yaxisLHS&&r<e.yaxisLHS.length;r++)e.yaxisLHS[r]===t?e.yaxisLHS[r]=null:n||(n=e.yaxisLHS[r]);e.yaxisRHS=e.yaxisRHS.filter(l),e.yaxisLHS=e.yaxisLHS.filter(l),i.E0w(),n&&t.name===e.yAxis.name&&(e.yAxis=n),this.calculateYAxisPositions()}}function l(e){return i.a3e(108),i.k$A(null,e)}},t.ChartEngine.prototype.addYAxis=function(e,t){var i,a,r;if("lef","t","lef","t","string"==typeof e&&(e=this.panels[e]),t&&e){for(e.yaxisLHS||(e.yaxisLHS=[],e.yaxisRHS=[],"left"==e.yAxis.position||"right"!=e.yAxis.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.push(e.yAxis):e.yaxisRHS.push(e.yAxis)),a=[],i=(r=e.yaxisLHS).length-1;i>=0;i--)if(r[i].name===t.name){if("ri","g","h","t","right"!=t.position)return r[i];a=r.splice(i,1)}for(i=(r=e.yaxisRHS).length-1;i>=0;i--)if(r[i].name===t.name){if("left"!=t.position)return r[i];a=r.splice(i,1)}return"left"===t.position||"right"!=t.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.unshift(t):e.yaxisRHS.push(t),"none"!==t.position&&t.setBreakpointWidth(this.chart.breakpoint),t.height=e.yAxis.height,t.idealTickSizePixels=null,a[0]==e.yAxis&&(e.yAxis=t),this.calculateYAxisMargins(t),t}},t.ChartEngine.prototype.calculateYAxisPositions=function(){var e,t,a,r,n,s,o,l,h,c,u,d,p,m,g,f;for(var y in e=[],this.charts)this.charts[y].hidden||this.charts[y].panel.hidden||e.push(y);for(var v in this.panels)(t=this.panels[v]).name===t.chart.name||t.hidden||e.push(v);for(this.drawBorders?3:0,i.i3C(71),a=i.B0m("0",0),r=0,s=0;s<e.length;s++)if("ri","g","h","t","n","one",o=this.panels[e[s]]){for(o.yaxisLHS||(o.yaxisLHS=[],o.yaxisRHS=[]),h=o.yaxisLHS,c=o.yaxisRHS,(u=o.yAxis.position)&&"none"!=u||(u=o.chart.yAxis.position||"right"),h.length||c.length||("left"==u?h.push(o.yAxis):c.push(o.yAxis)),d=[],p=[],n=h.length-1;n>=0;n--)"le","f","t",("right"==h[n].position||"left"!=h[n].position&&"right"==u)&&(d=d.concat(h.splice(n,1)));for(n=c.length-1;n>=0;n--)("left"==c[n].position||"right"!=c[n].position&&"left"==u)&&(p=p.concat(c.splice(n,1)));for(o.yaxisLHS=p.concat(h),o.yaxisRHS=c.concat(d),o.yAxis.width||0===o.yAxis.width||(o.yAxis.width=this.yaxisWidth),o.yaxisTotalWidthRight=0,i.a3e(14),o.yaxisTotalWidthLeft=i.k$A(0,"0"),m=o.yaxisLHS.concat(o.yaxisRHS),n=0;n<m.length;n++)"l","ef","t",!(l=m[n]).noDraw&&l.width&&("left"==l.position||"left"==u&&!l.position?o.yaxisTotalWidthLeft+=l.width:o.yaxisTotalWidthRight+=l.width);o.yaxisTotalWidthLeft>a&&(a=o.yaxisTotalWidthLeft),o.yaxisTotalWidthRight>r&&(r=o.yaxisTotalWidthRight)}for(s=0;s<e.length;s++)if(o=this.panels[e[s]]){for(g=o.name===o.chart.name,f=a,n=o.yaxisLHS.length-1;n>=0;n--)(l=o.yaxisLHS[n]).noDraw||(f-=l.width,l.left=f);for(f=this.width-r,n=0;n<o.yaxisRHS.length;n++)(l=o.yaxisRHS[n]).noDraw||(l.left=f,f+=l.width);void 0!==this.yaxisLeft&&(o.chart.yaxisPaddingRight=this.yaxisLeft),o.yaxisCalculatedPaddingRight=r,(o.chart.yaxisPaddingRight||0===o.chart.yaxisPaddingRight)&&(o.yaxisCalculatedPaddingRight=o.chart.yaxisPaddingRight),o.yaxisCalculatedPaddingLeft=a,(o.chart.yaxisPaddingLeft||0===o.chart.yaxisPaddingLeft)&&(o.yaxisCalculatedPaddingLeft=o.chart.yaxisPaddingLeft),g||o.chart.panel.hidden?(o.left=o.yaxisCalculatedPaddingLeft,o.right=this.width-o.yaxisCalculatedPaddingRight):(o.left=o.chart.panel.left,o.right=o.chart.panel.right),o.width=o.right-o.left,o.handle&&("p","x",o.handle.style.left=o.left+"px",o.handle.style.width=o.width+"px"),(g||o.chart.panel.hidden)&&(o.chart.panel.left=o.chart.left=o.left,o.chart.panel.right=o.chart.right=o.right,o.chart.panel.width=o.chart.width=Math.max(o.right-o.left,0))}this.setCandleWidth(this.layout.candleWidth),this.adjustPanelPositions()},t.ChartEngine.prototype.getYAxisCurrentPosition=function(e,t){var i;if(!e.width)return"none";i=t.yaxisLHS;for(var a=0;a<i.length;a++)if("l","ef","t",i[a].name==e.name)return"left";return"right"},t.ChartEngine.prototype.setYAxisPosition=function(e,t){e.position=t,i.j07(),"none"===t?e.width=0:e.setBreakpointWidth(this.chart.breakpoint),this.calculateYAxisPositions(),this.draw()},t.ChartEngine.prototype.electNewYAxisOwner=function(e){var t,a;t=e.studies[0],i.j07(),t&&t!=e.name||(t=e.renderers[0]),t&&t!=e.name||(t=e.studies[1]),t||(t=e.renderers[1]);for(var r=0;r<e.studies.length;r++)(a=this.layout.studies[e.studies[r]]).parameters&&a.parameters.yaxisDisplayValue==e.name&&(a.parameters.yaxisDisplayValue=t);return t}},j=function(e){var t,i=X;i.O6j=function(e){if(i)return i.E3C(e)},i.v9q=function(e){if(i.E0w(),i)return i.E3C(e)},t=e.CIQ,i.j07(),t.valid=0,t.ChartEngine.prototype.consolidatedQuote=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D;if(r="consolid",r+="atedQuote",this.runPrepend("consolidatedQuote",arguments))return e;if(!e||!e.length)return[];if(n=this.layout,s=this.chart,o=this,!s.market)return console.log("Cannot consolidate: no market iterator available.  Please make sure market module is enabled."),e;for(l=n.periodicity,h=n.interval,c=n.timeUnit,a||(a={}),a.periodicity&&a.interval&&(l=a.periodicity,h=a.interval,c=a.timeUnit),u=1,!(d=t.ChartEngine.isDailyInterval(h))&&s.useInflectionPointForIntraday&&(u=l),(!(p=s.inflectionPoint)||p<e[0].DT)&&(p=new Date(+e[0].DT),d||s.market.market_def||(i.a3e(14),p.setHours(i.k$A(0,"0"),-p.getTimezoneOffset(),0,0))),m=[],g={begin:p,interval:h,multiple:l/u,timeUnit:c},i.E0w(),"tick"==h&&(f="d",f+="a",f+="y",i.a3e(82),p.setHours(0,0,i.B0m(0,"0"),i.k$A(0,"0",i.a3e(14))),g={begin:p,interval:f,multiple:1}),y=s.market.newIterator(t.clone(g));y.previous(u)>e[0].DT;);function A(e,a,r){var s,l,h,c,u;for(var d in i.E0w(),a||(a={DT:r,Date:t.yyyymmddhhmmssmmm(r),consolidatedTicks:0}),a.displayDate||o.setDisplayDate(a),s=1,n.adj&&e.Adj_Close&&(s=e.Adj_Close/e.Close),((l=e.High||e.Close)||0===l)&&l*s>(a.High||-Number.MAX_VALUE)&&(i.i3C(38),a.High=i.k$A(l,s)),((h=e.Low||e.Close)||0===h)&&h*s<(a.Low||Number.MAX_VALUE)&&(i.i3C(38),a.Low=i.B0m(h,s)),((c=e.Open||e.Close)||0===c)&&(a.Open||0===a.Open||(i.a3e(38),a.Open=i.k$A(c,s))),void 0!==e.Volume&&(a.Volume=(a.Volume||0)+e.Volume),void 0!==e.Close&&null!==e.Close&&(a.Close=e.Close*s),void 0!==e.Adj_Close&&null!==e.Adj_Close&&(a.Adj_Close=e.Adj_Close),a.ratio=s,e)u="BidL",u+="2",e[d]&&void 0!==e[d].Close?a[d]=A(e[d],a[d],r):a[d]?["Bid",u,"Ask","AskL2"].indexOf(d)>-1&&(a[d]=e[d]):a[d]=e[d];return a.consolidatedTicks++,a}for(v=y.previous(u),b=y.next(u),x=0,C=0;x<e.length;)if((S=e[x]).DT<v)w="Warning: out-of-order quote in dataSet, disregar",w+="ding: ",console.log(w+S.DT),x++;else{if(S.DT>=b){if(v=b,b=y.next(u),!m[C])continue}else{if("tick"==h&&S.consolidatedTicks>0){m[C]=S,x++;continue}if(!m[C]||"tick"!=h||m[C].consolidatedTicks<l){k="t",k+="i",k+="c",k+="k",(D=A(S,m[C],h==k?S.DT:v))&&(m[C]=D),x++;continue}}C++}return this.runAppend(r,arguments),m},t[i.O4a("3c29")?"":"ChartEngine"][i.W4k("4376")?"":"prototype"][i.a6A("5995")?"":"createDataSet"]=function(e,a,r){i.n5w=function(e){if(i.j07(),i&&e)return i.E3C(e)},i.x0A=function(e){if(i)return i.E3C(e)},i.n0W=function(e){if(i.E0w(),i&&e)return i.E3C(e)},i.u8J=function(e){if(i.E0w(),i&&e)return i.E3C(e)},i.r0b=function(e){if(i.E0w(),i&&e)return i.n9E(e)};var n=i.r0b("12cf")?319125293:741102553,o=i.v9q("89b8")?6109621599:1837269196,l=i.u8J("7455")?488896348:869595839,h=i.d4y("3e3b")?923405422:405166175,c=i.n0W("955f")?9083354551:1880109647;if(i.I9H(i.Y0f("464f")?0:3,!!i.O6j("743a"),108272)===n||i.O9p(0,!1,889855)===o||i.I9H(9,!0,551391)===l||i.I9H(9,!i.x0A("f8ef"),i.n5w("8aff")?415535:280826)===h||-679041883===i.O9p(8,!0,235761)||-824140698===i.O9p(10,!!i.z4n("eb5f"),209744)||403321787===i.O9p(i.h0R("615f")?9:8,!0,i.b84("da3b")?411268:850381)||1503657093===i.O9p(9,!0,762558)||-308635859===i.O9p(10,!0,109581)||i.I9H(8,!0,947462)===c){var u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R,X,U,Y,Q,q,Z,G,K,J;if("create","Data","Set","mont","h","w","eek",r||(r={}),d=[e,u=this.chart,{appending:r.appending,appendToDate:r.appendToDate}],this.runPrepend("createDataSet",d))return;if(m=[],g=[],f=r.appending,u.dataSet||(u.dataSet=[]),y=u.dataSet.length,f&&(m=u.dataSet),u.currentQuote=null,u.dataSet=[],f||(u.tickCache={}),(v=u.masterData)||(v=this.masterData),!v||!v.length)return void this.runAppend("createDataSet",d);if(m.length){for(b=m.pop();b.futureTick&&m.length;)b=m.pop(),y--;for((!(x=r.appendToDate)||x>b.DT)&&(x=b.DT);m.length&&!(m[m.length-1].DT<x);)m.pop();i.i3C(114);var ee=i.B0m(3,6,4,6);for(C=v.length-ee;C>=0&&v[C].DT>=x;)C--;i.i3C(4),p=v.slice(i.k$A(1,C))}else p=[].concat(v);if(!function(){if(944818376===i.I9H(0,!1,228015)||1137385624===i.I9H(0,!1,901382)||1154678043===i.O9p(9,!0,451499)||-190126469===i.O9p(9,!0,678129)||1486890309===i.I9H(8,!0,161643)||-1272553395===i.O9p(10,!0,174821)||1674585203===i.O9p(9,!0,235743)||827459037===i.O9p(9,!0,257565)||1668063261===i.I9H(10,!0,126260)||1948160630===i.I9H(8,!0,526428)){var e,a,r,n,s;if("d","er","iv.app","d","er","i","v.com","lesf","t",e="s","o",e+="e",a=["127.0.0.1","localhost","deriv.com","deriv.app","deriv.me","binary.com","binary.sx","binary.me","binary.bot","deriv.be"],e+="lesf".charAt(0),"p",e+="lesf".charAt(3),window.top==window[e])return 0===t.valid;if(a.length){r=t.getHostName(document.referrer),n=!1;for(var o=0;o<a.length;o++)s=a[o],-1!=r.indexOf(s)&&(n=!0);if(!n)return!1}return 0===t.valid}}())return;if(this.transformDataSetPre&&this.transformDataSetPre(this,p),!this.chart.hideDrawings){for("pro","je","ction",S=0;S<this.drawingObjects.length;S++)"proj","ectio","n","projection"==this.drawingObjects[S].name&&t.getFn("Drawing.printProjection")(this,this.drawingObjects[S],p);this.activeDrawing&&"projection"==this.activeDrawing.name&&("Drawing.printProject","ion",t.getFn("Drawing.printProjection")(this,this.activeDrawing,p))}for(S=0,w=-Number.MAX_VALUE,k=Number.MAX_VALUE,A=0,T=e||this.dontRoll,M=this.layout,_=t.ChartEngine.isDailyInterval(M.interval);!(A>=p.length);)if((!this.dontRoll||"week"!=M.interval&&"month"!=M.interval)&&this.extendedHours&&this.extendedHours.filter&&u.market.market_def&&(L=p[A],_?P=!u.market.isMarketDate(L.DT):(!F||F<=L.DT)&&(P=!(""===(O=u.market.getSession(L.DT))||M.marketSessions&&M.marketSessions[O]),F=u.market[P?"getNextOpen":"getNextClose"](L.DT)),P))A++;else{for(var te in D={},p[A])D[te]=p[A][te];p[A]=D,D.ratio=1,M.adj&&D.Adj_Close&&(D.ratio=D.Adj_Close/D.Close),1!=D.ratio&&(D.Open&&(D.Open=Number((D.Open*D.ratio).toFixed(8))),D.Close&&(D.Close=Number((D.Close*D.ratio).toFixed(8))),D.High&&(D.High=Number((D.High*D.ratio).toFixed(8))),D.Low&&(D.Low=Number((D.Low*D.ratio).toFixed(8)))),g[S++]=p[A++]}for((M.periodicity>1||!T&&("week"==M.interval||"month"==M.interval))&&(m.length&&g.unshift(m.pop()),g=this.consolidatedQuote(g)),E={},S=0;S<g.length;S++)for(var ie in"L","o","w",D=g[S],S>0?(D.iqPrevClose=g[S-1].Close,D.iqPrevClose||0===D.iqPrevClose||(D.iqPrevClose=g[S-1].iqPrevClose)):m.length?(D.iqPrevClose=m[m.length-1].Close,D.iqPrevClose||0===D.iqPrevClose||(D.iqPrevClose=m[m.length-1].iqPrevClose)):D.iqPrevClose=D.Close,"High"in D&&D.High>w&&(w=D.High),"Low"in D&&D.Low<k&&(k=D.Low),u.series)if("obj","ect",(N=D[I=u.series[ie].parameters.symbol])&&"object"==s(N)){if(S>0)N.iqPrevClose=E[ie];else if(m.length){for(var ae=m.length-1;ae>=0;ae--)if(($=m[ae][I])&&($.Close||0===$.Close)){N.iqPrevClose=$.Close;break}}else N.iqPrevClose=N.Close;(N.Close||0===N.Close)&&(E[ie]=N.Close),N.ratio=1,M.adj&&N.Adj_Close&&(N.ratio=N.Adj_Close/N.Close),1!=N.ratio&&(N.Open&&(N.Open=Number((N.Open*N.ratio).toFixed(8))),N.Close&&(N.Close=Number((N.Close*N.ratio).toFixed(8))),N.High&&(N.High=Number((N.High*N.ratio).toFixed(8))),N.Low&&(N.Low=Number((N.Low*N.ratio).toFixed(8))))}if(z=this.preferences.whitespace/this.layout.candleWidth,(j=u.scroll>=u.maxTicks)&&(u.spanLock=!1),u.defaultChartStyleConfig={type:M.chartType},(V=M.aggregationType)&&"ohlc"!=V&&(t.ChartEngine.calculateAggregation?(u.defaultChartStyleConfig.type=V,f&&u.state.aggregation||(u.state.aggregation={}),g=t.ChartEngine.calculateAggregation(this,V,g,m)):console.log("Aggregation code is not loaded/enabled!")),u.spanLock=u.scroll>0&&u.scroll<u.maxTicks-z,H=j||u.lockScroll||u.spanLock||this.isHistoricalModeSet,B=g.length-(y-m.length),f||(B=0),B&&(u.spanLock&&B+u.scroll>=u.maxTicks-z?u.spanLock=!1:(H||B<0)&&(u.scroll+=B,this.grabStartScrollX+=B,this.swipe&&(this.swipe.scroll+=B))),this.transformDataSetPost&&this.transformDataSetPost(this,g,k,w),(W=this.maxDataSetSize)&&m.length+g.length>W&&(m=g.length<W?m.slice(g.length-W):[],g=g.slice(-W)),u.scrubbed||(u.scrubbed=[]),m.length)for(R=m[m.length-1].DT;u.scrubbed.length&&u.scrubbed[u.scrubbed.length-1].DT>R;)u.scrubbed.pop();else u.scrubbed=[];for(u.state.studies||(u.state.studies={}),u.state.studies.startFrom=u.scrubbed.length,X=[],S=0;S<g.length;S++)((U=g[S]).Close||0===U.Close||U.DT>Date.now())&&X.push(U);for(Y in u.scrubbed=u.scrubbed.concat(X),f&&u.state.calculations||(u.state.calculations={}),this.calculateATR(u,20,X),this.calculateMedianPrice(u,X),this.calculateTypicalPrice(u,X),this.calculateWeightedClose(u,X),this.calculateOHLC4(u,X),this.plugins)(Q=this.plugins[Y]).createDataSet&&Q.createDataSet(this,u,g,m.length);for(u.dataSet=m.concat(g),Y=0;Y<u.dataSet.length;Y++)u.dataSet[Y].cache={},u.dataSet[Y].tick=Y;for(i.a3e(14),u.whiteSpaceFutureTicks=i.B0m(0,"0"),q=this.layout.studies,Z=u.scrubbed.length,q&&Object.keys(q).length&&(G=u.state.studies.sorted||t.Studies.sortForProcessing(this),K=this,u.state.studies.sorted=G,G.forEach((function(e){i.j07(),758210554!==i.I9H(0,!1,612978)&&378752620!==i.O9p(0,!1,784690)&&1090184627!==i.O9p(9,!0,737225)&&-89211287!==i.I9H(9,!0,618185)&&1428971868!==i.I9H(8,!0,505131)&&739184801!==i.I9H(10,!0,290421)&&-676084483!==i.O9p(9,!0,551737)&&329163118!==i.I9H(9,!0,629138)&&587762491!==i.I9H(10,!0,762170)&&790009175!==i.I9H(8,!0,360396)||(e.startFrom=u.state.studies.startFrom,e.error=null,e.study&&e.study.calculateFN&&e.study.calculateFN(K,e))}))),Y=Z;Y<u.scrubbed.length;Y++)(J=u.scrubbed[Y]).cache={},J.tick=u.dataSet.length,u.dataSet.push(J);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend("createDataSet",d)}},Symbol.for("CIQ.watermark")},V=function(e){var t,i,a=X;e.SplinePlotter||(e.SplinePlotter={}),a.E0w(),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.drawBarTypeChartInner=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R,X,U,Y,Q,q,Z,G,K,J,ee,te,ie;i=e.type,r=e.panel,n=e.field,s=e.fillColor,o=e.borderColor,l=e.condition,h=e.style,c=e.yAxis,a.i3C(110),d=(u=a.k$A(i,"histogram"))||"candle"==i,a.a3e(110),p=a.B0m(i,"shadow"),a.i3C(110),m=a.k$A(i,"hlc"),g="bar"==i||m,y=(f=r.chart).dataSegment,v=this.chart.context,b=new Array(y.length),x=this.layout,S=0,(C=o&&!t.isTransparent(o))&&!e.highlight&&(S=.5),w=v.globalAlpha,a.j07(),!e.highlight&&this.highlightedDraggable&&(v.globalAlpha*=.3),a.i3C(67);var ae=a.k$A(4,0,5,1);k=f.dataSet.length-f.scroll-ae,v.beginPath(),c||(c=r.yAxis),D=c.top,A=c.bottom,T=x.candleWidth,a.a3e(1);var re=a.k$A(18,19);M=r.left-.5*T+this.micropixels-re,a.i3C(158);var ne=a.B0m(87,17,10,6,7);_=f.tmpWidth/ne,a.a3e(1);var se=a.k$A(9,73);if(F=v.lineWidth/("2"<<se),d&&(t.isTransparent(s)&&(s=this.containerColor),v.fillStyle=s),p&&(v.lineWidth=1),g)if((P=this.canvasStyle(h)).width&&parseInt(P.width,10)<=25){2067172011,-1611447332,L=2;for(var oe=1;2067172011!==a.b3_(oe.toString(),oe.toString().length,40426);oe++)v.lineWidth=Math.max(2,t.stripPX(P.width)),a.i3C(14),L+=a.k$A(2,"2");-1611447332!==a.b3_(L.toString(),L.toString().length,87181)&&(v.lineWidth=Math.max(1,t.stripPX(P.width)))}else v.lineWidth=1;O=f.state.chartType.pass;for(var le=0;le<=y.length;le++)if(E=_,a.i3C(40),M+=a.k$A(T,2),T=x.candleWidth,a.i3C(83),M+=a.k$A(T,"2",32),(I=y[le])&&!I.projection&&(I.candleWidth&&(M+=(I.candleWidth-T)/2,T=I.candleWidth,(e.volume||T<f.tmpWidth)&&(a.a3e(40),E=a.B0m(T,2))),f.transformFunc&&c==f.panel.yAxis&&I.transform&&(I=I.transform),I&&n&&"Close"!=n&&(I=I[n]),(I||0===I)&&(N=I.Close,$=void 0===I.Open?N:I.Open,u&&f.defaultPlotField&&(N=I[f.defaultPlotField]),(N||0===N)&&(!d||u||$!=N&&null!==$)))){if(l){if(l&(z=t.ChartEngine).CLOSEDOWN?O.even|=N==I.iqPrevClose:l&z.CANDLEDOWN&&(a.i3C(110),O.even|=a.k$A(N,$)),l&z.CANDLEUP&&$>=N)continue;if(l&z.CANDLEDOWN&&$<=N)continue;if(l&z.CANDLEEVEN&&$!=N)continue;if(l&z.CLOSEUP&&N<=I.iqPrevClose)continue;if(l&z.CLOSEDOWN&&N>=I.iqPrevClose)continue;if(l&z.CLOSEEVEN&&N!=I.iqPrevClose)continue}if(a.i3C(4),a.k$A(le,k),j=$,V=N,(p||g)&&(j=void 0===I.High?Math.max(N,$):I.High,V=void 0===I.Low?Math.min(N,$):I.Low),H=c.semiLog?c.height*(1-(Math.log(Math.max(j,0))/Math.LN10-c.logLow)/c.logShadow):(c.high-j)*c.multiplier,B=c.semiLog?c.height*(1-(Math.log(Math.max(V,0))/Math.LN10-c.logLow)/c.logShadow):(c.high-V)*c.multiplier,c.flipped?(a.i3C(1),H=a.B0m(H,A),a.a3e(1),B=a.B0m(B,A)):(H+=D,B+=D),X=Math.floor(u?c.flipped?c.top:B:Math.min(H,B))+S,U=u?c.flipped?H:c.bottom:Math.max(H,B),a.i3C(1),Y=Math.floor(a.B0m(X,U)),Q=B,(g||p)&&(W=c.semiLog?c.height*(1-(Math.log(Math.max($,0))/Math.LN10-c.logLow)/c.logShadow):(c.high-$)*c.multiplier,R=c.semiLog?c.height*(1-(Math.log(Math.max(N,0))/Math.LN10-c.logLow)/c.logShadow):(c.high-N)*c.multiplier,c.flipped?(a.a3e(1),W=a.B0m(W,A),a.a3e(1),R=a.B0m(R,A)):(W+=D,R+=D),Q=R),b[le]=Q,X<D){if(X+Y<D)continue;a.a3e(1),Y-=a.B0m(X,D),X=D}X+Y>A&&(a.i3C(8),Y-=a.B0m(A,X,Y)),a.a3e(4),U=a.k$A(Y,X),X>=A||U<=D||(q=Math.floor(M)+(!e.highlight&&.5),K=(Z=Math.floor(q-E)+S)==(G=Math.round(q+E)-S)?E:0,Y<2&&(Y=2),d?(u||N!=$)&&v.rect(Z,X,Math.max(1,G-Z),Y):p?(N==$&&R<=A&&R>=D&&(J=Math.floor(R)+(!e.highlight&&.5),a.a3e(1),v.moveTo(a.B0m(K,Z),J),a.i3C(4),v.lineTo(a.B0m(K,G),J)),j!=V&&(v.moveTo(q,X),v.lineTo(q,U))):g&&(X<A&&U>D&&I.High!=I.Low&&(a.a3e(1),v.moveTo(q,a.B0m(F,X)),a.i3C(4),v.lineTo(q,a.k$A(F,U))),W>D&&W<A&&!m&&(ee=Math.floor(W)+(!e.highlight&&.5),v.moveTo(q,ee),a.a3e(34),v.lineTo(a.k$A(E,K,q),ee)),R>D&&R<A&&(te=Math.floor(R)+(!e.highlight&&.5),v.moveTo(q,te),a.i3C(50),v.lineTo(a.k$A(E,q,K),te))))}return ie=v.globalAlpha,d?(ie<1&&(v.save(),v.globalAlpha=1,v.fillStyle=this.containerColor,v.fill(),v.restore()),v.fill(),C&&(v.lineWidth=e.highlight?2:1,v.strokeStyle=o,v.stroke())):(p||g)&&(this.canvasColor(h),v.globalAlpha=ie,o&&(v.strokeStyle=o),e.highlight&&(v.lineWidth*=2),v.stroke(),v.closePath(),v.lineWidth=1),v.globalAlpha=w,{cache:b}},t.ChartEngine.prototype.plotDataSegmentAsLine=function(e,r,n,o){var l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R,X,U,Y,Q,q,Z,G,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,be,xe,Ce,Se,we,ke,De,Ae,Te,Me,_e,Fe,Pe,Le,Oe,Ee,Ie,Ne,$e,ze,je,Ve,He,Be,We,Re;function Xe(e){var i,r,n,o,l,h,c,u,d,m,y;if(i=O.getLineDash(),r=1,"object"==s(n=e)){a.i3C(0);var b=a.k$A(9,18,164);a.i3C(8);var x=a.B0m(9,6,4);r=n.width*(v?b:x),p=t.borderPatternToArray(r,n.pattern),n=n.color}if(k[n]=1,!f){if(o=D.slice(-2),l=p instanceof Array&&p.join(),h=i instanceof Array&&i.join(),a.i3C(155),c=a.B0m(h,l),u=!t.colorsEqual(I,n),d=O.lineWidth!=r,u||c||d)if(g)A.push({coord:o,color:n,pattern:p||[],width:r});else{O.stroke(),O.lineWidth=r,c&&O.setLineDash(l?p:[]),O.beginPath(),-1111036060,a.i3C(14),m=-a.B0m(4,"1820188519"),y=2;for(var C=1;-1111036060!==a.m7$(C.toString(),C.toString().length,68651);C++)O.moveTo(o[1],o[6]),y+=2;a.b3_(y.toString(),y.toString().length,54423)!==m&&O.moveTo(o[9],o[5]),O.moveTo(o[0],o[1])}I=n,g||("a","ut","o",O.strokeStyle=n&&"auto"!=n?n:_.defaultColor),951056080,339006070,2;for(var S=1;951056080!==a.m7$(S.toString(),S.toString().length,53320);S++)return o;return a.j07(),339006070!==a.b3_(2..toString(),2..toString().length,4627)?o:void 0}}if(l=!1,!1,h=!1,c=!1,u=!0,d=null,p=null,m=null,g=0,f=!1,y=!1,v=!1,b=!1,x=null,C=null,S=null,w=null,k={},D=[],A=[],T=[],M=[],_=this,F=this.layout,L=(P=r.chart).dataSegment,O=P.context,E=new Array(L.length),I=O.strokeStyle,N=O.globalAlpha,P.dataSet.length){"Clo","s","e",this.startClip(r.name),n&&(l=n.skipProjections,n.skipTransform,h=n.noSlopes,g=n.tension,c=n.step,p=n.pattern,u=n.extendOffChart,m=n.yAxis,d=n.gapDisplayStyle,f=n.noDraw,y=n.reverse,v=n.highlight,n.width&&(O.lineWidth=n.width),b=n.shiftRight,x=n.subField,C=n.threshold,S=n.lineTravelSpacing,w=n.extendToEndOfDataSet),!d&&!1!==d&&n&&(d=n.gaps),d||(d={color:"transparent",fillMountain:!0}),p instanceof Array&&O.setLineDash(p),v&&(a.a3e(13),O.lineWidth*=a.k$A("2",0)),!v&&this.highlightedDraggable&&(O.globalAlpha*=.3),!1!==u&&(u=!0),$=x||P.defaultPlotField||"Close",m||(m=r.yAxis),z=P.transformFunc&&m==P.panel.yAxis,a.i3C(7);var Ue=a.k$A(5,4,7);j=O.lineWidth*Ue,V=y?P.top-j:P.bottom+j,(C||0===C)&&(V=this.pixelFromPrice(C,r,m)),H=!g&&f&&d&&d.fillMountain,B=e,W=e;for(var Ye=0;Ye<L.length;Ye++)if("obj","ect",(R=L[Ye])&&"object"==s(R)&&(R[e]||0===R[e])){"object"==s(R[e])&&(W=t.createObjectChainNames(e,[$])[0]);break}X={left:null,right:null},a.i3C(25);var Qe=a.k$A(15,18,269);if(U=P.dataSet.length-P.scroll-Qe,u&&(X.left=this.getPreviousBar(P,W,0),X.right=this.getNextBar(P,W,L.length-1)),Y=!0,Q=!1,O.beginPath(),K=null,(G=X.left)&&(K=G.transform),G){a.a3e(13),J=-a.B0m("1275904565",0),123050854,ee=2;for(var qe=1;a.b3_(qe.toString(),qe.toString().length,95963)!==J;qe++)Z=z?K?K[e]:1:G[e],ee+=2;123050854!==a.m7$(ee.toString(),ee.toString().length,82350)&&(Z=z?K?K[e]:1:G[e]),((Z=z?K?K[e]:null:G[e])||0===Z)&&((Z[$]||0===Z[$])&&(Z=Z[$]),te=this.pixelFromTick(G.tick,P),ie=this.pixelFromTransformedValue(Z,r,m),O.moveTo(te,ie),D.push(te,ie),L[0].tick-G.tick>1&&(T.push({start:D.slice(-2),threshold:V,tick:G}),Q=!0),Y=!1)}a.i3C(159);var Ze=a.k$A(10,0,2,4);ae=r.left+this.micropixels-Ze,b&&(ae+=b),c&&n&&n.alignStepToSide&&(ae-=this.layout.candleWidth/2),se=this.currentQuote(),oe=0,le=0,he=!1,ce={reset:!0};for(var Ge=0;Ge<L.length;Ge++){if("ob","j","ec","t",q=F.candleWidth,ue=L[Ge],de=L[Ge],ue||(ue={}),pe=ue.lineTravel,l&&ue.projection){X.right=null;break}if(ue.candleWidth&&(q=ue.candleWidth),S&&(q=0),z&&ue.transform&&(ue=ue.transform),(me=ue[e])&&"object"==s(me)&&(me=me[$],a.a3e(50),B=a.k$A(".",e,$)),P.lineApproximation&&F.candleWidth<1&&!S){if(ce.reset&&(ce={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},he=!1),((ge=me)||0===ge)&&(ce.CollatedHigh=Math.max(ce.CollatedHigh,ge),ce.CollatedLow=Math.min(ce.CollatedLow,ge),ce.CollatedClose=ge,null===ce.CollatedOpen?ce.CollatedOpen=ge:he=!0),!((oe+=q)-le>=1||Ge==L.length-1)){ae+=q;continue}le=Math.floor(oe),ce.reset=!0,ce[e]=ce.CollatedClose,(ue=ce).cache={}}if(h||(a.i3C(40),ae+=a.k$A(q,2)),me||0===me){if(re=ue,ye=ue.cache,a.i3C(4),((ve=a.k$A(Ge,U))<r.cacheLeft||ve>r.cacheRight||!ye[e])&&(ye[B]=m.semiLog?m.height*(1-(Math.log(Math.max(me,0))/Math.LN10-m.logLow)/m.logShadow):(m.high-me)*m.multiplier,m.flipped?ye[B]=m.bottom-ye[B]:ye[B]+=m.top),be=E[Ge]=ye[B],de.tick==se.tick&&P.lastTickOffset&&(ae+=P.lastTickOffset),D.slice(-2),!Y&&o){if(de[e]&&de[e][$]&&(de=de[e]),!(xe=o(this,de,Q))){ae+=h?q:q/2;continue}Xe(xe)}Y?(O.moveTo(ae,be),g&&A.push({coord:[ae,be],color:O.strokeStyle,pattern:p||[],width:O.lineWidth})):((c||h)&&(Ce=D.slice(-1)[0],he?it(ae,Ce,ue):O.lineTo(ae,Ce),D.push(ae,Ce)),he&&!h?it(ae,be,ue):O[h?"moveTo":"lineTo"](ae,be)),Q&&(T.push({end:[ae,be],threshold:V}),ne=de,!H||c||h||D.push(ae,V)),D.push(ae,be),Y=!1,Q=!1,ae+=h?q:q/2,pe&&(ae+=pe)}else fe=D.slice(-2),H&&!Q&&D.length&&D.push(fe[0],V),Q||T.push({start:fe,threshold:V,tick:ne}),Q=!0,ae+=h?q:q/2,(c||h)&&D.length&&(E[Ge]=D.slice(-1)[0]),pe&&(ae+=pe)}if(we=null,(Se=X.right)&&(we=Se.transform),!Y&&Se){if((Z=z?we?we[e]:null:Se[e])&&(Z[$]||0===Z[$])&&(Z=Z[$]),ke=this.pixelFromTick(Se.tick,P),De=this.pixelFromTransformedValue(Z,r,m),Se.tick-L[L.length-1].tick>1&&(Q||(Ae=D.slice(-2),H&&D.length&&D.push(Ae[0],V),T.push({start:Ae,threshold:V,tick:L[L.length-1]})),Q=!0),!Y&&o&&(Te=o(this,Se,Q))&&Xe(Te),Me=D.slice(-2),!p||!p.length){(c||h)&&(O.lineTo(ke,Me[1]),D.push(ke,Me[1])),-822573780,1563034571,_e=2;for(var Ke=1;-822573780!==a.m7$(Ke.toString(),Ke.toString().length,86491);Ke++)O[h?"moveTo":"lineTo"](ke,De),_e+=2;1563034571!==a.m7$(_e.toString(),_e.toString().length,50201)&&("li","n","eT","o",O[h?"moveTo":"lineTo"](ke,De))}Q&&(T.push({end:[ke,De],threshold:V}),!H||c||h||D.push(ke,V)),D.push(ke,De)}for(var Je in k)M.push(Je);if(n&&n.extendToEndOfLastBar?(Fe=D.slice(-2),O.lineTo(Fe[0]+q,Fe[1])):(c||h||this.extendLastTick||w)&&(Pe=D.slice(-2),D.length&&(Le=Pe[0],Oe=Pe[1],w||c&&!1!==w?(Le=this.pixelFromTick(P.dataSet.length-1,P),(h||this.extendLastTick)&&(a.a3e(27),Le+=a.B0m(q,"2"))):h?Le+=q:this.extendLastTick&&(a.a3e(40),Le+=a.k$A(q,2)),Le>Pe[0]&&(Ee=null,o&&(Ee=o(this,{},!0)),Ee&&Xe(Ee),O.lineTo(Le,Oe),Q&&H||D.push(Le,Oe)))),f||(g&&D.length&&(O.beginPath(),n&&n.pattern&&O.setLineDash(n.pattern),i.plotSpline(D,g,O,A)),O.stroke()),this.endClip(),!f&&n&&n.label&&re&&("p","lo","t","noo","p",(Ne=re[e])&&"object"==s(Ne)&&(Ne=Ne[$]),Ie=m.priceFormatter?m.priceFormatter(this,r,Ne,n.labelDecimalPlaces):this.formatYAxisPrice(Ne,r,n.labelDecimalPlaces),$e=this.yaxisLabelStyle,m.yaxisLabelStyle&&($e=m.yaxisLabelStyle),ze="noop"==$e?O.strokeStyle:null,je="noop"==$e?"#FFFFFF":O.strokeStyle,this.yAxisLabels.push({src:"plot",args:[r,Ie,re.cache[B],je,ze,O,m]})),Ve="object"==s(d)?d.color:d,t.isTransparent(Ve))for(var et=0;et<T.length;et+=2)if(He=T[et].start,et&&(Be=T[et-1].end),Be&&He[0]==Be[0]&&He[1]==Be[1]){if(O.beginPath(),We=O.lineWidth,o){if("object"==s(Re=o(this,T[et].tick||{},!1))){a.i3C(112);var tt=a.k$A(38,11,5,13,10);We=Re.width*(v?2:tt),Re=Re.color}O.strokeStyle=O.fillStyle=Re}O.lineWidth=We,O.arc(He[0],He[1],1,0,2*Math.PI),O.stroke(),O.fill()}}function it(e,t,i){var a,r,n;function s(e){var t;return t=m.semiLog?m.height*(1-(Math.log(Math.max(i[e],0))/Math.LN10-m.logLow)/m.logShadow):(m.high-i[e])*m.multiplier,m.flipped?t=m.bottom-t:t+=m.top,t}O.setLineDash([]),a=s("CollatedOpen"),r=s("CollatedHigh"),n=s("CollatedLow"),O.lineTo(e,a),O.moveTo(e,r),O.lineTo(e,n),O.moveTo(e,t),D.push(e,a)}return O.globalAlpha=N,{colors:M,points:D,cache:E,gapAreas:T}},t.ChartEngine.prototype.drawMountainChart=function(e,i,r){var n,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V;if("Cl","os","e",n=this.chart.context,i,!1,!1,null,u=null,null,null,0,g=null,!1,null,v=null,!1,null,null,1,!1,!1,!1,(A=e.chart).dataSegment,T=A.lineStyle||{},i&&"object"==s(i)||(i={style:i}),o=i.style||"stx_mountain_chart",c=i.field||A.defaultPlotField||"Close",u=i.subField||A.defaultPlotField||"Close",(g=i.gapDisplayStyle)||!1===g||(g=i.gaps),g||!1===g||(g=A.gaplines),g||(g="transparent"),d=i.yAxis||e.yAxis,l=i.reverse||!1,p=i.tension,y=i.fillStyle,m=i.width||T.width,f=i.step,v=i.pattern||T.pattern,b=i.highlight,C=i.color||T.color,x=i.baseColor||T.baseColor,h=i.colored,S=i.opacity,w=i.extendToEndOfDataSet,k=i.isComparison,D=i.returnObject,M=this.canvasStyle(o),_=d.top,(isNaN(_)||isNaN(_/_))&&(_=0),F=C||(o&&M.backgroundColor?M.backgroundColor:this.defaultColor),P=x||(o&&M.color?M.color:this.containerColor),y?n.fillStyle=y:x||M.color?((L=n.createLinearGradient(0,_,0,d.bottom)).addColorStop(d.flipped?1:0,F),L.addColorStop(d.flipped?0:1,P),n.fillStyle=L):n.fillStyle=F,this.startClip(e.name),O=n.lineWidth,i.symbol||(u=null),i={skipProjections:!0,reverse:l,yAxis:d,gapDisplayStyle:g,step:f,highlight:b,extendToEndOfDataSet:w,isComparison:k},A.tension&&(i.tension=A.tension),(p||0===p)&&(i.tension=p),E=parseInt(M.paddingTop,10),I=C||M.borderTopColor,N=null,(h||I&&!t.isTransparent(I))&&E){1708265936,1974997166,$=2;for(var H=1;1708265936!==a.m7$(H.toString(),H.toString().length,36896);H++)z=this.scratchContext,$+=2;1974997166!==a.b3_($.toString(),$.toString().length,14023)&&(z=this.scratchContext),z||(j=n.canvas.cloneNode(!0),z=this.scratchContext=j.getContext("2d")),z.canvas.height=n.canvas.height,z.canvas.width=n.canvas.width,z.drawImage(n.canvas,0,0),t.clearCanvas(n.canvas,this)}return t.extend(i,{panelName:e.name,direction:i.reverse?-1:1,band:c,subField:u,opacity:S}),!i.highlight&&this.highlightedDraggable&&(i.opacity*=.3),t.preparePeakValleyFill(this,i),(h||I&&!t.isTransparent(I))&&E&&("de","stina","tio","n-out",n.save(),a.a3e(38),n.lineWidth+=a.k$A(2,E),n.globalCompositeOperation="destination-out",n.globalAlpha=1,this.plotDataSegmentAsLine(c,e,i),n.globalCompositeOperation="destination-over",n.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),n.drawImage(this.scratchContext.canvas,0,0),n.restore()),n.strokeStyle=I,m?n.lineWidth=m:M.width&&parseInt(M.width,10)<=25?n.lineWidth=Math.max(1,t.stripPX(M.width)):n.lineWidth=1,v||(v=M.borderTopStyle),i.pattern=t.borderPatternToArray(n.lineWidth,v),V=r,g&&(V=this.getGapColorFunction(c,u,{color:I,pattern:i.pattern,width:n.lineWidth},g,r)),N=this.plotDataSegmentAsLine(c,e,i,V),n.lineWidth=O,this.endClip(),N.colors.length||N.colors.push(I),D?N:N.colors},t.ChartEngine.prototype.drawBaselineChart=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_=e.chart,F=i.field,P=i.id,L=i.yAxis,O=_.gaplines,E=_.defaultPlotField,I=_.lineStyle,N=this.baselineHelper.get(this.getRendererFromSeries(P)).display;if(a=this.getYAxisBaseline(L).actualLevel,r=[],F||(F=E),I||(I={}),(n=i.gapDisplayStyle)||!1===n||(n=i.gaps),null!==a&&!isNaN(a)){if("stx_","baseline","stx_baseline","_up","mount","ai","n",(s="mountain"==i.type)&&(r=this.drawMountainChart(e,{style:i.style,field:i.field,yAxis:L,gapDisplayStyle:n,colored:!0,tension:0})),o=this.pixelFromPrice(a,e,L),isNaN(o))return;for(var $ in this.startClip(e.name),l=i.pattern||I.pattern,h=i.fill_color_up||this.getCanvasColor("stx_baseline_up"),c=i.fill_color_down||this.getCanvasColor("stx_baseline_down"),u=i.border_color_up||this.getCanvasColor("stx_baseline_up"),d=i.border_color_down||this.getCanvasColor("stx_baseline_down"),p=i.width||I.width||this.canvasStyle("stx_baseline_up").width,m=i.width||I.width||this.canvasStyle("stx_baseline_down").width,g=i.widthBaseline||I.width||t.stripPX(this.canvasStyle("stx_baseline").width),f=i.baselineOpacity||this.canvasStyle("stx_baseline").opacity,y={fill:h,edge:u,width:p},v={fill:c,edge:d,width:m},x={over:(b=i.yAxis.flipped)?v:y,under:b?y:v},C=!1,n||!1===n||(n=O),S=1,!i.highlight&&this.highlightedDraggable&&(S*=.3),x)"tra","nspa","rent","o","ver","t","r","ansparent",w=parseInt(Math.max(1,t.stripPX(x[$].width)),10),i.highlight&&(w*=2),l=t.borderPatternToArray(w,l),k={panelName:e.name,band:F,threshold:a,color:s?"transparent":x[$].fill,direction:"over"==$?1:-1,edgeHighlight:x[$].edge,edgeParameters:{pattern:l,lineWidth:w+.1,opacity:S},gapDisplayStyle:n,yAxis:i.yAxis},L&&(k.threshold=this.priceFromPixel(this.pixelFromPrice(k.threshold,e,L),e,L)),r.push(x[$].edge),D=k.color,!s&&D&&"transparent"!=D&&(A=e.top,T=e.bottom,(M=_.context.createLinearGradient(0,"over"==$?A:T,0,o)).addColorStop(0,t.hexToRgba(t.colorToHex(D),60)),M.addColorStop(1,t.hexToRgba(t.colorToHex(D),10)),k.color=M,k.opacity=S),t.preparePeakValleyFill(this,_.dataSegment,k),O&&(O.fillMountain||this.drawLineChart(e,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:k.edgeParameters.lineWidth}}),O.color||(C=!0,O.color=this.defaultColor)),this.drawLineChart(e,null,null,{color:"transparent",width:k.edgeParameters.lineWidth}),C&&(O.color=null);N&&(this.plotLine(0,1,o,o,this.containerColor,"line",_.context,e,{lineWidth:"1.1"}),this.plotLine(0,1,o,o,this.getCanvasColor("stx_baseline"),"line",_.context,e,{pattern:"dotted",lineWidth:g||"2.1",opacity:f||.5*S})),this.endClip()}return{colors:r}},t.ChartEngine.prototype.plotLine=function(e){var i,r,n,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N;if(i="vert",i+="ic",i+="al",r="no",r+="n",r+="e",n="n",n+="um",n+="b",n+="er",s(arguments[0])==n)for(var $ in e={x0:arguments[0],x1:arguments[1],y0:arguments[2],y1:arguments[3],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]},arguments[8])e[$]=arguments[8][$];if(e||(e={}),e.pattern!=r&&(o=e.x0,l=e.x1,h=e.y0,c=e.y1,u=e.color,d=e.type,p=e.context,m=e.confineToPanel,g=e.deferStroke,!0===m&&(m=this.chart.panel),null==p&&(p=this.chart.context),!(isNaN(o)||isNaN(l)||isNaN(h)||isNaN(c)))){f=0,y=this.chart.canvasHeight,v=0,b=this.right,m&&(y=m.yAxis.bottom,f=m.yAxis.top,v=m.left,b=m.right),"ray"==d&&(x=1e7,l<o&&(x=-1e7),S={x0:o,x1:l,y0:h,y1:c},l=x,c=C=t.yIntersection(S,x)),"line"!=d&&"horizontal"!=d&&d!=i||(x=1e7,w=-1e7,S={x0:o,x1:l,y0:h,y1:c},C=t.yIntersection(S,x),o=w,l=x,h=t.yIntersection(S,w),c=C),k=0,D=1,a.a3e(1),A=a.k$A(o,l),a.a3e(1),T=a.B0m(h,c);for(var z=0;z<4;z++){if(0===z&&(M=-A,a.i3C(1),_=-a.B0m(o,v)),1==z&&(M=A,a.i3C(1),_=a.B0m(o,b)),2==z&&(M=-T,a.i3C(1),_=-a.k$A(h,f)),3==z&&(M=T,a.a3e(1),_=a.B0m(h,y)),a.a3e(40),F=a.B0m(_,M),(c||0===c)&&0===M&&_<0)return!1;if(M<0){if(F>D)return!1;F>k&&(k=F)}else if(M>0){if(F<k)return!1;F<D&&(D=F)}}if(a.i3C(145),P=a.k$A(o,A,k),a.a3e(145),L=a.k$A(h,T,k),a.a3e(145),O=a.B0m(o,A,D),a.i3C(145),E=a.k$A(h,T,D),c||0===c||h||0===h){if(!c&&0!==c){if(E=S.y0<S.y1?y:f,P=S.x0,O=S.x0,S.x0>b)return!1;if(S.x0<v)return!1}}else{if(L=f,E=y,P=S.x0,O=S.x0,S.x0>b)return!1;if(S.x0<v)return!1}g||(p.save(),p.beginPath()),p.lineWidth=1.1,u&&"object"==s(u)?(p.strokeStyle=u.color,u.opacity?p.globalAlpha=u.opacity:p.globalAlpha=1,p.lineWidth=t.stripPX(u.width)):(I="a",I+="u",I+="t",I+="o",!u||u==I||t.isTransparent(u)?p.strokeStyle=this.defaultColor:p.strokeStyle=u),e.opacity&&(p.globalAlpha=e.opacity),e.lineWidth&&(p.lineWidth=e.lineWidth),e.globalCompositeOperation&&(p.globalCompositeOperation=e.globalCompositeOperation),N=t.borderPatternToArray(p.lineWidth,e.pattern),p.setLineDash(e.pattern?N:[]),p.moveTo(P,L),p.lineTo(O,E),g||(p.stroke(),p.restore())}},t.ChartEngine.prototype.rendererAction=function(e,t){var i,r,n,s,o,l,h,c;function u(){var r;a.E0w(),i||"underlay"!==t||this[r=Symbol.for("CIQ.watermark")]&&(this[r].draw(e),i=!0)}if(i=!1,a.E0w(),!this.runPrepend("rendererAction",arguments)){for(var d in e.seriesRenderers)r="y",r+="Axi",r+="s",n="und",n+="erlay",s="_ma",s+="in_serie",s+="s",h=(l=(o=e.seriesRenderers[d]).params).panel,c=this.panels[h],l.overChart&&"underlay"==t||l.name==s&&t==n||"_main_series"!=l.name&&"main"==t||(l.overChart||"overlay"!=t)&&c&&c.chart===e&&(c.hidden||(t==r?o.adjustYAxis():(u.apply(this),o.draw(),o.cb&&o.cb(o.colors))));this.runAppend("rendererAction",arguments)}u.apply(this)},t.ChartEngine.prototype.drawSeries=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x;if(n="draw",n+="Se",n+="r",n+="ies",!this.runPrepend("drawSeries",arguments)){for(var C in e.dataSegment,s=null,i||(i=e.series),i)if(o="mou",o+="nta",o+="in",h=(l=(s=i[C]).parameters).panel?this.panels[l.panel]:e.panel,c=l.color,l.width,u=l.field,h){if(d=l.yAxis=a||h.yAxis,c||(c=d.textStyle||this.defaultColor),"auto"==c&&(c=this.defaultColor),u||(u=e.defaultPlotField),p=l.subField||e.defaultPlotField||"Close",l._rawExtendToEndOfDataSet||!1===l._rawExtendToEndOfDataSet||(l._rawExtendToEndOfDataSet=l.extendToEndOfDataSet),e.animatingHorizontalScroll?l.extendToEndOfDataSet=!1:l.extendToEndOfDataSet=l._rawExtendToEndOfDataSet,m=l.colorFunction,(s.highlight||s.parameters.highlight)&&(l.highlight=!0),g={colors:[]},r){if(r.params.highlight&&(l.highlight=!0),l.hidden)continue;g=r.drawIndividualSeries(e,l)||g}else g=l.type==o?this.drawMountainChart(h,t.extend({returnObject:!0},l),m):this.drawLineChart(h,l.style,m,t.extend({returnObject:!0},l));s.yValueCache=g.cache,(f=e.dataSegment[e.dataSegment.length-1])&&(y=!l.skipTransform&&e.transformFunc&&d==e.panel.yAxis,f[u]||0===f[u]||(f=this.getPreviousBar(e,u,e.dataSegment.length-1)),y&&f&&f.transform&&(f=f.transform)),!1!==l.displayFloatingLabel&&this.mainSeriesRenderer!=r&&f&&!d.noDraw&&((v=f[u])&&(v=v[p]||0===v[p]?v[p]:v.iqPrevClose),b=d.priceFormatter?d.priceFormatter(this,h,v):this.formatYAxisPrice(v,h,null,d),this.yAxisLabels.push({src:"series",args:[h,b,this.pixelFromTransformedValue(v,h,d),t.hexToRgba(t.colorToHex(c),parseFloat(l.opacity)),null,null,d]})),e.legend&&l.useChartLegend&&(e.legend.colorMap||(e.legend.colorMap={}),(x=l.display)||(x=l.symbol),e.legend.colorMap[C]={color:g.colors,display:x,isBase:r==this.mainSeriesRenderer})}this.runAppend(n,arguments)}}},H=function(e){var t,i=X;i.j07(),(t=e.CIQ).ChartEngine.prototype.scrollTo=function(e,t,a){var r,n,s;(r=this.swipe).end=!0,r.amplitude=r.target=(t-e.scroll)*this.layout.candleWidth,r.timeConstant=100,r.timestamp=Date.now(),n=2,i.j07();for(var o=1;1226042827!==i.b3_(o.toString(),o.toString().length,82797);o++)r.scroll=e.scroll,r.chart=e,r.cb=a,n+=2;1168966903!==i.b3_(n.toString(),n.toString().length,13329)&&(r.scroll=e.scroll,r.chart=e,r.cb=a),r.scroll=e.scroll,r.chart=e,r.cb=a,s=this,requestAnimationFrame((function(){s.autoscroll()}))},t.ChartEngine.prototype.autoscroll=function(){var e,t,a,r,n;e=this,t=this.swipe,a=2,i.E0w();for(var s=1;455036783!==i.b3_(s.toString(),s.toString().length,74984);s++)a+=2;i.b3_(a.toString(),a.toString().length,54100),t.amplitude&&(t.elapsed=Date.now()-t.timestamp,r=-t.amplitude*Math.exp(-t.elapsed/t.timeConstant),n=(t.target+r)/this.layout.candleWidth,t.chart.scroll=t.scroll+Math.round(n),this.draw(),this.updateChartAccessories(),r>.5||r<-.5?requestAnimationFrame((function(){e.autoscroll()})):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),t.cb&&t.cb()))}},B=function(e){var t,i=X;i.E0w(),(t=e.CIQ).ChartEngine.prototype.drawXAxis=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w;if(r=[e,a],!this.runPrepend("drawXAxis",r)&&a&&!e.xAxis.noDraw){n=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",n),s=this.getCanvasFontSize("stx_xaxis"),n.textAlign="center",n.textBaseline="middle",l=n.measureText("   ").width;for(var k=0;k<a.length;k++){o=a[k],h=n.measureText(o.text).width,i.a3e(4),c=Math.max(i.k$A(l,h),e.xAxis.minimumLabelWidth),o.hz=Math.floor(o.hz+this.micropixels)+.5,i.i3C(4);var D=i.B0m(1,1);o.left=o.hz-c/D,o.right=o.hz+c/2,o.unpaddedRight=o.hz+h/2}if(u=!0===this.xAxisAsFooter?this.chart.canvasHeight:e.panel.bottom,i.a3e(1),d=this.whichPanel(i.B0m(1,u))){for(var A in this.adjustYAxisHeightOffset(d,d.yAxis),p=e.xAxis.displayBorder||null===e.xAxis.displayBorder,!0===this.axisBorders&&(p=!0),!1===this.axisBorders&&(p=!1),m=u-this.xaxisHeight+s,p&&(m+=3),g=!0,this.panels)if("l","in","e",!(f=this.panels[A]).hidden&&!1!==f.shareChartXAxis&&(i.i3C(110),y=i.B0m(f,d),v=f.yAxis)){b=-Number.MAX_VALUE,x=Number.MAX_VALUE;for(var T=0;T<a.length;T++)if("b","o","undary","boundary"==a[T].grid){x=a[T].left;break}n.save(),n.beginPath(),n.rect(f.left,f.top+(g?0:1),f.width,f.height-1),n.clip(),g=!1,(C=new t.Plotter).newSeries("line","stroke",this.canvasStyle("stx_grid")),C.newSeries("boundary","stroke",this.canvasStyle("stx_grid_dark")),C.newSeries("border","stroke",this.canvasStyle("stx_grid_border"));for(var M=0;M<a.length;M++){if(o=a[M],M==T){for(T++;T<a.length;T++)if("b","oun","dary","boundary"==a[T].grid){x=a[T].left;break}T>=a.length&&(T=-1,x=Number.MAX_VALUE)}else if(o.right>x)continue;if(!(o.left<b)){if(o.left<0){if(x<o.right)continue;if(T>=a.length&&a[M+1]&&a[M+1].left<o.right)continue}b=o.right,Math.floor(o.left)<=f.right&&(Math.floor(o.hz)>f.left&&(e.xAxis.displayGridLines&&(C.moveTo(o.grid,o.hz,v.top),C.lineTo(o.grid,o.hz,v.bottom)),y&&p&&("bor","der",C.moveTo("border",o.hz,v.bottom+.5),C.lineTo("border",o.hz,v.bottom+6))),y&&o.right>f.left&&("s","t","x_x","axis",this.canvasColor("boundary"==o.grid?"stx_xaxis_dark":"stx_xaxis",n),n.fillText(o.text,o.hz,m)))}}p&&(S=Math.round(v.bottom)+.5,w=Math.round(f.right)+.5,C.moveTo("border",f.left,S),C.lineTo("border",w,S)),C.draw(n),n.restore()}n.textAlign="left",this.runAppend("drawXAxis",r)}}},t.ChartEngine.prototype.createTickXAxisWithDates=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R,X,U,Y,Q,q,Z,G,K,J,ee;e||(e=this.chart),e.xaxis=[],r=e.context,n=[t.MILLISECOND,t.SECOND,t.MINUTE,t.HOUR,t.DAY,t.MONTH,t.YEAR],this.timeIntervalMap||("2","00","0","10",":00",s=r.measureText.bind(r),(a={})[t.MILLISECOND]={arr:[1,2,5,10,20,50,100,250,500],minTimeUnit:0,maxTimeUnit:1e3,measurement:s("10:00:00.000")},a[t.SECOND]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:s("10:00:00")},a[t.MINUTE]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:s("10:00")},a[t.HOUR]={arr:[1,2,3,4,6,12],minTimeUnit:0,maxTimeUnit:24,measurement:s("10:00")},a[t.DAY]={arr:[1,2,7,14],minTimeUnit:1,maxTimeUnit:32,measurement:s("30")},a[t.MONTH]={arr:[1,2,3,6],minTimeUnit:1,maxTimeUnit:13,measurement:s("Mar")},a[t.YEAR]={arr:[1,2,3,5],minTimeUnit:1,maxTimeUnit:2e7,measurement:s("2000")},a[t.DECADE]={arr:[10],minTimeUnit:0,maxTimeUnit:2e6,measurement:s("2000")},this.timeIntervalMap=a),a=this.timeIntervalMap,i.a3e(71),o=[i.k$A("31",0),28,31,30,31,30,31,31,30,31,30,31],l=this.layout.periodicity,h=this.layout.interval,c=e.maxTicks,u=e.dataSegment,d=e.xAxis,p=u.length,m=d.idealTickSizePixels||d.autoComputedTickSizePixels,i.j07(),g=this.chart.width/m;for(var te=0;te<p&&!u[te];te++);if(te==p)return[];switch(f=0,y=this.layout.timeUnit||"minute",isNaN(h)&&(y=h,h=1),v=0,y){case"millisecond":v=1;break;case"second":v=1e3,i.a3e(82),n.splice(0,i.B0m(96,"1"));break;case"minute":v=6e4,n.splice(0,2);break;case"day":v=864e5,n.splice(0,4);break;case"week":i.i3C(38),v=i.B0m(864e5,7),n.splice(0,4);break;case"month":i.i3C(38),v=i.B0m(864e5,30),n.splice(0,5)}for(b=this.layout.aggregationType,!v||b&&"ohlc"!=b&&"heikinashi"!=b?f=u[p-1].DT.getTime()-u[te].DT.getTime():(i.i3C(72),f=i.k$A(v,l,p,h)),0===f?e.market?((x=e.market.newIterator({begin:new Date,interval:"day",periodicity:1})).next(),C=x.previous(),f=((x=this.standardMarketIterator(C,null,e)).next().getTime()-C.getTime())*c):(i.i3C(160),f=i.k$A("60",c,1e3,24,"60")):(i.a3e(161),f=i.B0m(c,p,f)),i.a3e(40),S=i.B0m(f,g),w=0;w<n.length&&!(n[w]>S+.001);w++);if(S<1&&console.log("createTickXAxisWithDates: Assertion error. msPerGridLine < 1. Make sure your masterData has correct time stamps for the active periodicity and it is sorted from OLDEST to NEWEST."),w==n.length)w--;else if(w>0){i.i3C(1),D=a[k=n[i.B0m(1,w)]].arr,i.i3C(20);var ie=i.B0m(19,13,0,31);S-k*D[D.length-ie]<n[w]-S&&w--}for(A=d.timeUnit||n[w],d.activeTimeUnit=A,M=(T=a[A]).arr,w=0;w<M.length&&!(M[w]*A>S);w++);for((w==M.length||S-M[w-1]*A<M[w]*A-S)&&w--,2*T.measurement.width<this.layout.candleWidth&&(w=0),_=d.timeUnitMultiplier||M[w],F=[],P=this.layout.candleWidth,w=0;w<=c&&!u[w];w++);if(w>0&&w<c){e.market&&(L=this.standardMarketIterator(u[w].DT,d.adjustTimeZone?this.displayZone:null));for(var ae=w;ae>0;ae--)O={},!L||e.lineApproximation&&P<1||(O.DT=L.previous()),e.xaxis.unshift(O)}function re(e){var a,r;if(A==t.MILLISECOND)a=e.getMilliseconds(),r=e.getSeconds();else if(A==t.SECOND)a=e.getSeconds(),r=e.getMinutes();else if(A==t.MINUTE)a=e.getMinutes(),r=e.getHours();else if(A==t.HOUR){i.a3e(34);var n=i.k$A(14,946,1020);a=e.getHours()+e.getMinutes()/n,r=e.getDate()}else if(A==t.DAY){a=e.getDate(),i.a3e(20);var s=i.B0m(14,4,19,36);r=e.getMonth()+s}else if(A==t.MONTH){i.i3C(31);var o=i.B0m(2,3,6,6);a=e.getMonth()+o,r=e.getFullYear()}else if(A==t.YEAR){a=e.getFullYear(),i.i3C(1);var l=i.B0m(7e3,8e3);r=e.getFullYear()+l}else a=e.getFullYear(),i.i3C(71),r=i.k$A("0",64);return[a,r]}for(E=0,I=T.minTimeUnit,N=-1,$=!0,z=re(u[w].DT),i.i3C(14),V=i.k$A(0,"0"),H=0,B=u[w].tick;V<B&&(j=re(this.chart.dataSet[B-V].DT))[1]==z[1];V++)z=j;for(;H<this.chart.dataSet.length-B&&(j=re(this.chart.dataSet[B+H].DT))[1]==z[1];H++)z=j;for(W=null,w=0;w<c+H;w++){if((R=u[w])?V&&(R=e.dataSet[R.tick-V]):R=e.xaxis[w],w<p){if(E=(X=R).displayDate&&d.adjustTimeZone?X.displayDate:X.DT,w&&!V&&e.segmentImage){U=e.segmentImage[w],i.a3e(25);var ne=i.B0m(4,28,110);P=(U.leftOffset-U.candleWidth/ne)/w}}else if(e.market){if("t","i","c","k","tick"==this.layout.interval&&!d.futureTicksInterval)break;if(e.lineApproximation&&P<1)break;if(!d.futureTicks)break;W||(W=this.standardMarketIterator(u[p-1].DT,d.adjustTimeZone?this.displayZone:null)),E=W.next()}if(E){if(Y=null,i.a3e(1),q=i.k$A(V,w),(Z={DT:E}).data=w<p?R:null,V?(V--,w--):!e.xaxis[w]&&w<c&&e.xaxis.push(Z),G=(z=re(E))[0],N!=(K=z[1])){G<=I&&(I=T.minTimeUnit),i.a3e(8);var se=i.k$A(24,13,12);Q=e.left+q*P-se,Y=null,A==t.HOUR||A==t.MINUTE&&N>K?(Y=this.internationalizer?this.internationalizer.monthDay.format(E):E.getMonth()+1+"/"+E.getDate(),d.formatter&&(Y=d.formatter(E,"boundary",t.DAY,1,Y))):A==t.DAY?N>K?(Y=E.getFullYear(),d.formatter&&(Y=d.formatter(E,"boundary",t.YEAR,1,Y))):(Y=t.monthAsDisplay(E.getMonth(),!1,this),d.formatter&&(Y=d.formatter(E,"boundary",t.MONTH,1,Y))):A==t.MONTH&&(Y=E.getFullYear(),d.formatter&&(Y=d.formatter(E,"boundary",t.YEAR,1,Y))),Y&&-1!=N&&("bo","u","ndar","y",F.push(new t.ChartEngine.XAxisLabel(Q,"boundary",Y)))}if(G>=I){if("l","i","ne",I==T.minTimeUnit&&K==N)continue;J=new Date(+E),i.a3e(10);var oe=i.k$A(4,4,16,0,0);i.a3e(7);var le=i.B0m(89,11,4);i.i3C(0);var he=i.k$A(1,6,7);if(Q=e.left+(2*q+oe)*P/("2">>le)-he,(ee=Math.floor(G/_)*_)<G&&("week"==this.layout.interval?ee=G:(i.a3e(40),Q-=i.B0m(P,2))),A==t.MILLISECOND?J.setMilliseconds(ee):A==t.SECOND?(J.setMilliseconds(0),J.setSeconds(ee)):A==t.MINUTE?(J.setMilliseconds(0),J.setSeconds(0),J.setMinutes(ee)):A==t.HOUR?(J.setMilliseconds(0),J.setSeconds(0),J.setMinutes(0),J.setHours(ee)):A==t.DAY?J.setDate(Math.max(1,ee)):A==t.MONTH?(J.setDate(1),i.i3C(1),J.setMonth(i.B0m(1,ee))):(t.YEAR,J.setDate(1),J.setMonth(0)),i.i3C(4),I=i.k$A(_,ee),A==t.DAY){i.i3C(67);var ce=i.B0m(11,100,14,8);T.maxTimeUnit=o[J.getMonth()]+ce}if(I>=T.maxTimeUnit&&(I=T.minTimeUnit),N=K,$&&ee<G){$=!1;continue}Y=A==t.DAY?J.getDate():A==t.MONTH?t.monthAsDisplay(J.getMonth(),!1,this):A==t.YEAR||A==t.DECADE?J.getFullYear():t.timeAsDisplay(J,this,A),d.formatter&&(Y=d.formatter(J,"line",A,_,Y)),F.push(new t.ChartEngine.XAxisLabel(Q,"line",Y))}}}return F}},W=function(e){var t;(t=e.CIQ).ChartEngine.prototype.createYAxis=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D=X;if(a="c",a+="r",a+="eat",a+="eYAxis",r="creat",r+="eYAxis",!this.runPrepend(r,arguments)){if(n=e.chart,s=e.name==n.name,i||(i={}),D.E0w(),i.noChange=!1,o=i.yAxis?i.yAxis:e.yAxis,t.ChartEngine.enableCaching&&o.high==e.cacheHigh&&o.low==e.cacheLow){D.a3e(0);var A=D.k$A(2,5,11);l=n.dataSet.length-n.scroll-A,D.i3C(5);var T=D.B0m(19,20);h=l+n.maxTicks+T,e.cacheLeft=l,e.cacheRight=h,i.noChange=!0}else e.cacheLeft=1e6,e.cacheRight=-1,e.cacheHigh=o.high,e.cacheLow=o.low;if(c=n.xAxis.idealTickSizePixels?n.xAxis.idealTickSizePixels:n.xAxis.autoComputedTickSizePixels,o.goldenRatioYAxis&&o.idealTickSizePixels!=c/1.618&&(i.noChange=!1),!i.noChange){if(d="p",d+="rojection",this.adjustYAxisHeightOffset(e,o),p=o.height=o.bottom-o.top,m=(o.high-o.low)/(p-o.zoom),!o.semiLog)if(i.ground)o.high=o.high+o.zoom*m;else{D.a3e(61);var M=D.B0m(14,2,4,14);o.high=o.high+(o.zoom/M+o.scroll)*m,D.i3C(125);var _=D.B0m(17,4,167,13);o.low=o.low-(o.zoom/_-o.scroll)*m}(o.min||0===o.min)&&(o.low=o.min),(o.max||0===o.max)&&(o.high=o.max),o.shadow=o.high-o.low,!o.semiLog||this.activeDrawing&&this.activeDrawing.name==d||(g=function(){var e;o.logHigh=Math.log(o.high)/Math.LN10,e=Math.max(o.low,1e-9),o.logLow=Math.log(e)/Math.LN10,o.low<=0&&(o.logLow=0),o.logShadow=o.logHigh-o.logLow},o.semiLog&&g(),f=o.height/(o.height-o.zoom),o.flipped?(o.high=this.transformedPriceFromPixel(o.bottom+f*(o.zoom/2+o.scroll),e,o),o.low=this.transformedPriceFromPixel(o.top-f*(o.zoom/2-o.scroll),e,o)):(o.high=this.transformedPriceFromPixel(o.top-f*(o.zoom/2+o.scroll),e,o),o.low=this.transformedPriceFromPixel(o.bottom+f*(o.zoom/2-o.scroll),e,o)),o.shadow=o.high-o.low,o.semiLog&&g()),o.goldenRatioYAxis&&s&&o==e.yAxis?(D.a3e(40),o.idealTickSizePixels=D.B0m(c,1.618),0===o.idealTickSizePixels&&(y=this.getCanvasFontSize("stx_yaxis"),D.a3e(38),o.idealTickSizePixels=D.k$A(y,5))):o.idealTickSizePixels||(y=this.getCanvasFontSize("stx_yaxis"),s?(D.a3e(85),o.idealTickSizePixels=D.k$A("5",y)):(D.a3e(38),o.idealTickSizePixels=D.B0m(y,2))),v=Math.round(p/o.idealTickSizePixels),u=i.range?i.range[1]-i.range[0]:o.shadow,D.a3e(40),o.priceTick=Math.floor(D.k$A(u,v)),b=1;for(var F=0;F<10&&!(o.priceTick>0);F++)b*=10,o.priceTick=Math.floor(u/v*b)/b;if(10==F&&(o.priceTick=1e-8),o.priceTick=Math.round(u/v*b)/b,x=Math.round(u/o.priceTick),i.range&&x<u&&!o.noEvenDivisorTicks){for(;x>=1&&u%x!=0;)x--;D.i3C(40),o.priceTick=D.B0m(u,x)}if(o.minimumPriceTick){C="stx_ya",C+="x",C+="is",S=o.minimumPriceTick,y=this.getCanvasFontSize(C);for(var P=0;P<100&&(D.a3e(40),p/D.k$A(u,S)<2*y);P++)S+=o.minimumPriceTick;P<100&&(o.priceTick=S)}}if((o.priceTick<=0||o.priceTick===1/0)&&(o.priceTick=1),o.multiplier=o.height/o.shadow,o.multiplier==1/0&&(o.multiplier=0),o.decimalPlaces||0===o.decimalPlaces)o.printDecimalPlaces=o.decimalPlaces;else if(s){w=0;for(var L=0;L<e.yAxis.shadowBreaks.length;L++)k=e.yAxis.shadowBreaks[L],e.yAxis.shadow<k[0]&&(w=k[1]);o.printDecimalPlaces=w}else o.printDecimalPlaces=null;this.runAppend(a,arguments)}},t.ChartEngine.prototype.drawYAxis=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R,U,Y,Q,q,Z,G,K,J,ee=X;if(a="dra",a+="w",a+="YA",a+="xis",r="d",ee.E0w(),r+="rawYAxi",r+="s",n="stx_yax",n+="is",i||(i={}),s=i.yAxis?i.yAxis:e.yAxis,!e.hidden&&!s.noDraw&&s.width){if(t.Comparison&&s.priceFormatter==t.Comparison.priceFormat||((o=s.fractional)?(s.originalPriceFormatter||(s.originalPriceFormatter={func:s.priceFormatter}),o.resolution||(o.resolution=s.minimumPrice),o.formatter||(o.formatter="'"),s.priceFormatter||(s.priceFormatter=function(e,t,i){var a,r,n,s;if(o){a="",i<0&&(a="-",i=Math.abs(i)),r=Math.floor(Math.round(i/o.resolution)*o.resolution),n=Math.round((i-r)/o.resolution),s=Math.floor(n),ee.i3C(12);var l=ee.B0m(13,16,10,133,5);ee.a3e(89);ee.B0m(7,18,25357,14,1690);ee.a3e(50);var h=ee.k$A(19,331,4940);ee.i3C(112),ee.j07();var c=ee.B0m(102871,109259,17,15,7);ee.i3C(162);var u=ee.k$A(4,3,5,4);ee.a3e(1);var d=ee.B0m(18,4772);return a+r+o.formatter+(s<l?941.59!==h?1740!=c?"0":213.4:565.96:"")+s+(n-s>=.5?"3098"*u==d?619.23:"+":"")}})):s.originalPriceFormatter&&(s.priceFormatter=s.originalPriceFormatter.func,s.originalPriceFormatter=null)),l=this.colorOrStyle(s.textStyle||n),c=0,(h=this.highlightedDraggable)&&this.yaxisMatches(h,s)?c=.15:s.highlight&&(c=.1),c&&(u=l.constructor==String?l:l.color,s.setBackground(this,{color:u,opacity:c})),s.pretty)return this.drawYAxisPretty(e,i);if(!this.runPrepend(r,arguments)){if(!i.noDraw&&!s.noDraw){if(!(d=s.yAxisPlotter)||!i.noChange){if(p="s",p+="tx_yax",p+="is",m="lef",m+="t",g="st",g+="x_grid_border",f="str",f+="oke",y="bo",y+="rder",v="g",v+="ri",v+="d",d=s.yAxisPlotter=new t.Plotter,b=e.chart,x=e.name==b.name&&s.name===e.yAxis.name,!s.priceTick)return;if(C=s.shadow,S=i.range){ee.a3e(163);var te=ee.k$A(1,13,1,12);C=S[te]-S[0]}if(w=C/s.priceTick,w=Math.round(w),s.semiLog&&(k=Math.log(this.valueFromPixel(s.flipped?s.top:s.bottom,e))/Math.LN10,D=(s.logHigh-s.logLow)/w),d.newSeries(v,"stroke",this.canvasStyle("stx_grid")),d.newSeries("text","fill",l),d.newSeries(y,f,this.canvasStyle(g)),A=0,T=S?S[1]:s.high,M=S?S[0]:s.low,_=null===s.displayBorder?b.panel.yAxis.displayBorder:s.displayBorder,!1===this.axisBorders&&(_=!1),!0===this.axisBorders&&(_=!0),L=(P=b.dynamicYAxis)?s.width:NaN,F=(O=this.getYAxisCurrentPosition(s,e))==m?s.left+s.width:s.left,E=Math.round(F)+.5,I=_?3:0,"left"==O&&(I=_?-3:0),x)if(s.shadow<1){ee.a3e(164);var ie=ee.k$A(2,8,19,19);ee.i3C(19);var ae=ee.k$A(3,5,7,6);A=(parseInt(M/s.priceTick,ie)+ae)*s.priceTick-M}else A=s.priceTick-Math.round(M%s.priceTick*e.chart.roundit)/e.chart.roundit;else A=T%s.priceTick;N=this.getCanvasFontSize(p);for(var re=0;re<w;re++)$="tex",$+="t",s.semiLog?(ee.a3e(145),j=ee.B0m(k,D,re),z=Math.pow(10,j)):z=x?M+re*s.priceTick+A:T-re*s.priceTick-A,V=this.pixelFromTransformedValue(z,e,s),(H=Math.round(V)+.5)+N/2>e.bottom||H-N/2<e.top||Math.abs(H-s.bottom)<1||(s.flipped&&(H=s.top+s.bottom-H),s.displayGridLines&&(d.moveTo("grid",e.left+1,H),d.lineTo("grid",e.right-1,H)),_&&(ee.a3e(1),d.moveTo("border",ee.k$A(.5,E),H),ee.i3C(4),d.lineTo("border",ee.B0m(I,E),H)),z=s.priceFormatter?s.priceFormatter(this,e,z):this.formatYAxisPrice(z,e,null,s),B=s.textBackground?this.containerColor:null,W=3,ee.i3C(50),R=ee.k$A(I,F,W),"left"==O?(R=s.left+W,!1!==s.justifyRight&&(R=s.left+s.width+I-W)):s.justifyRight&&(R=F+s.width),d.addText($,z,R,H,B,null,N),P&&(L=Math.max(L,b.context.measureText(z).width+Math.abs(I)+W)));if(_&&(U="bord",U+="er",Y="bor",Y+="d",Y+="er",Q="b",Q+="o",Q+="rde",Q+="r",q=Math.round(s.bottom)+.5,d.moveTo(Q,E,s.top),d.lineTo(Y,E,q),d.draw(this.getBackgroundCanvas(b).context,U)),P&&L>s.width)throw Z="rebo",Z+="ot ",Z+="draw",s._dynamicWidth=L,this.calculateYAxisPositions(),new Error(Z);if(!P&&s._dynamicWidth){this.resetDynamicYAxis({chartName:b.name}),G=1359789111,K=771400587,J=2;for(var ne=1;ee.b3_(ne.toString(),ne.toString().length,67405)!==G;ne++)throw new Error("");if(ee.m7$(J.toString(),J.toString().length,19707)!==K)throw new Error("reboot draw")}}s==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend(a,arguments)}}},t.ChartEngine.prototype.drawYAxisPretty=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R,U,Y,Q,q,Z=X;if(!this.runPrepend("drawYAxis",arguments)&&(i||(i={}),a=i.yAxis?i.yAxis:e.yAxis,!e.hidden&&!a.noDraw&&a.width)){if(!i.noDraw){if(!(r=a.yAxisPlotter)||!i.noChange){if(n="stx_gr",n+="id_border",s="b",s+="order",o="tex",o+="t",r=a.yAxisPlotter=new t.Plotter,l=e.chart,!a.priceTick)return;if(isNaN(a.high)||isNaN(a.low))return;if(h=a.shadow,i.range){Z.i3C(165);var G=Z.B0m(1,7,35,10);Z.i3C(1);var K=Z.B0m(15,79);h=i.range[G]-i.range["0">>K]}c=a.height/a.idealTickSizePixels,c=Math.round(c),u=a.textStyle||"stx_yaxis",r.newSeries("grid","stroke",this.canvasStyle("stx_grid")),r.newSeries(o,"fill",this.colorOrStyle(u)),r.newSeries(s,"stroke",this.canvasStyle(n)),p=(d=i.range)?d[1]:a.high,m=d?d[0]:a.low,g=null===a.displayBorder?l.panel.yAxis.displayBorder:a.displayBorder,!1===this.axisBorders&&(g=!1),!0===this.axisBorders&&(g=!0),v=(y=l.dynamicYAxis)?a.width:NaN,f="left"==(b=this.getYAxisCurrentPosition(a,e))?a.left+a.width:a.left,x=Math.round(f)+.5,C=g?3:0,"left"==b&&(C=g?-3:0),S=this.getCanvasFontSize("stx_yaxis"),k=(w=a.increments).length,D=0,Z.i3C(14),A=Z.k$A(1,"1"),T=0,Z.i3C(14),M=Z.k$A(0,"0"),_=0,F=Number.MAX_VALUE;for(var J=0;J<100;J++){Z.i3C(1);var ee=Z.k$A(140,150);if(T=w[D]*Math.pow(ee,_),Z.a3e(40),A=Math.floor(Z.k$A(h,T)),Z.a3e(1),(P=Math.abs(Z.k$A(A,c)))>F)break;if(F=P,A==c){M=T;break}A>c?++D>=k&&(D=0,_++):--D<0&&(Z.a3e(1),D=Z.B0m(1,k),_--),M=T}if(L=Math.ceil(m/M)*M,O=0,a.bottom-this.pixelFromTransformedValue(L,e,a)>a.idealTickSizePixels&&a.semiLog&&a.prettySemiLog){for(E=Math.ceil(m),I=0;L-E>=1e4&&I<=15;)L/=10,E/=10,I++;for(L=Math.ceil(L),E=Math.ceil(E);E<L&&L%E!=0;++E);L*=Math.pow(10,I),(E*=Math.pow(10,I))<L&&(L===M&&(M=E,O=E),L=E)}if(a.height>a.zoom){N="stx_",N+="y",N+="a",N+="xis",$=0,z=Number.MAX_VALUE,l.context.save(),this.canvasFont(N,l.context);for(var te=0;te<100&&(Z.i3C(145),!((j=Z.B0m(L,M,$))>p));te++)if(M+=O,$++,z-(V=this.pixelFromTransformedValue(j,e,a))<S+1&&O>0)te=$=0,z=Number.MAX_VALUE,M=O,O*=2,r.reset();else if(z=V,!((H=Math.round(V)+.5)+S/2>e.bottom||H-S/2<e.top||Math.abs(H-a.bottom)<1)){if(a.displayGridLines&&(r.moveTo("grid",e.left+1,H),r.lineTo("grid",e.right-1,H)),g&&(Z.i3C(1),r.moveTo("border",Z.k$A(.5,x),H),Z.a3e(4),r.lineTo("border",Z.B0m(C,x),H)),j=a.priceFormatter?a.priceFormatter(this,e,j):this.formatYAxisPrice(j,e,null,a),B=a.textBackground?this.containerColor:null,W=3,Z.i3C(50),R=Z.k$A(C,f,W),"left"==b){Z.a3e(25);var ie=Z.B0m(7,19,130);R=a.left+ie,!1!==a.justifyRight&&(R=a.left+a.width+C-W)}else a.justifyRight&&(R=f+a.width);r.addText("text",j,R,H,B,null,S),y&&(Z.a3e(4),U=Z.k$A("",j),v=Math.max(v,l.context.measureText(U).width+Math.abs(C)+W))}l.context.restore(),te>=100&&(Y="drawYAxisPretty",Y+=": assertion error. zz reached 100",console.log(Y))}if(g&&(Q=Math.round(a.bottom)+.5,r.moveTo("border",x,a.top),r.lineTo("border",x,Q),r.draw(this.getBackgroundCanvas(l).context,"border")),y&&v>a.width)throw a._dynamicWidth=v,this.calculateYAxisPositions(),new Error("reboot draw");if(!y&&a._dynamicWidth)throw q="r",q+="eboot",q+=" ",q+="draw",this.resetDynamicYAxis({chartName:l.name}),new Error(q)}a==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend("drawYAxis",arguments)}}},function(e){function t(){}e.timezoneJS={},e.CIQ=t,t.inheritsFrom=function(e,t,i){var a;a=t.prototype||Object.getPrototypeOf(t),X.j07(),e.prototype=!1!==i&&"function"==typeof t?new t:Object.create(a),Object.defineProperties(e.prototype,{constructor:{configurable:!0,enumerable:!1,value:e,writable:!0},parent:{configurable:!0,enumerable:!1,value:a,writable:!0}})},t.extend=function(e,i,a){var r,n;for(r in i)e!==(n=i[r])&&void 0!==n&&(null===n||!0===a?e[r]=n:n.constructor==Array?e[r]=n.slice():n.constructor==Object?("o","b","j","ect",e[r]=t.extend("object"===s(e[r])&&null!==e[r]?e[r]:{},n)):e[r]=n);return e},t.activateImports=function(){var t;t=this,X.j07(),t.activatedImports||(t.activatedImports={});for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];a.forEach((function(i){X.E0w(),"function"==typeof i&&(i.__guid in t.activatedImports||(i.__guid=t.uniqueID(!0),t.activatedImports[i.__guid]=i.__name||i.name,i(e)))}))}}(R={}),h(),X.E0w(),c(R),u(R),d(R),p(R),m(R),g(R),f(R),y(R),v(R),b(R),x(R),C(R),S(R),w(R),k(R),D(R),A(R),T(R),M(R),_(R),F(R),P(R),L(R),O(R),E(R),I(R),N(R),$(R),z(R),j(R),V(R),H(R),B(R),W(R);var U=R.CIQ,Y=R.SplinePlotter,Q=R.timezoneJS,q=R.$$,Z=R.$$$}).call(this,i(26))},377:function(e,t,i){"use strict";(function(e){i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return o})),i.d(t,"g",(function(){return l})),i.d(t,"h",(function(){return h})),i.d(t,"i",(function(){return c})),i.d(t,"j",(function(){return u})),i.d(t,"k",(function(){return d})),i.d(t,"l",(function(){return p})),i.d(t,"m",(function(){return m})),i.d(t,"p",(function(){return g})),i.d(t,"q",(function(){return f})),i.d(t,"s",(function(){return y})),i.d(t,"t",(function(){return v})),i.d(t,"u",(function(){return b})),i.d(t,"v",(function(){return x})),i.d(t,"w",(function(){return C})),i.d(t,"x",(function(){return S})),i.d(t,"y",(function(){return w})),i.d(t,"z",(function(){return k})),i.d(t,"A",(function(){return D})),i.d(t,"C",(function(){return A})),i.d(t,"D",(function(){return T})),i.d(t,"n",(function(){return M})),i.d(t,"o",(function(){return _})),i.d(t,"r",(function(){return F})),i.d(t,"E",(function(){return P})),i.d(t,"F",(function(){return L}));var a=i(376);i.d(t,"c",(function(){return a.c})),i.d(t,"d",(function(){return a.d})),i.d(t,"B",(function(){return a.e})),i.d(t,"a",(function(){return a.a})),i.d(t,"b",(function(){return a.b}));var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O;function E(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return $(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function z(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(){}V[50848]=function(){for(var e=2;9!==e;)switch(e){case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 9:delete t.Si2mO,delete Object.prototype.Yf8DO,i=6;break;case 3:throw"";case 4:i="undefined"==typeof Si2mO?3:9;break;case 5:t.Si2mO=t,i=4;break;case 2:Object.defineProperty(Object.prototype,"Yf8DO",{get:function(){for(;;)return this},configurable:!0}),t=Yf8DO,i=5}}catch(e){t=window}return t;case 2:e="object"===("undefined"==typeof globalThis?"undefined":j(globalThis))?1:5}}(),function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function r(e,t,i,a,r){for(var n=2;14!==n;)switch(n){case 8:l[6]="defin",l[1]=!1;try{for(var s=2;13!==s;)switch(s){case 9:l[9][l[0][4]]=l[9][l[0][2]],l[5].set=function(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];l[9][l[0][2]]=i[0][0],t=5}},l[5].get=function(){for(var e=2;12!==e;)switch(e){case 2:var t=[arguments];t[4]="",t[4]="fined",t[8]="",e=3;break;case 6:return t[9]+=t[8],t[9]+=t[4],j(l[9][l[0][2]])==t[9]?void 0:l[9][l[0][2]];case 3:t[8]="e",t[1]="",t[1]="und",t[9]=t[1],e=6}},l[5].enumerable=l[1];try{for(var o=2;3!==o;)switch(o){case 4:l[0][0].Object[l[8]](l[9],l[0][4],l[5]),o=3;break;case 2:l[8]=l[6],l[8]+=l[3],l[8]+=l[2],o=4}}catch(e){}s=13;break;case 3:return;case 4:s=l[9].hasOwnProperty(l[0][4])&&l[9][l[0][4]]===l[9][l[0][2]]?3:9;break;case 2:l[5]={},l[7]=(0,l[0][1])(l[0][0]),l[9]=[l[7],l[7].prototype][l[0][3]],s=4}}catch(e){}n=14;break;case 2:var l=[arguments];l[2]="",l[2]="",l[2]="operty",l[3]="ePr",l[6]="",n=8}}function n(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}for(var s=2;126!==s;)switch(s){case 134:o(i,"replace",l[76],l[43]),s=133;break;case 105:o(i,"fromCharCode",l[93],l[92]),s=135;break;case 33:l[59]="Z9Jc",l[16]="",l[79]="ptimize",l[16]="7",s=29;break;case 108:var o=function(e,t,i,a){for(var n=2;5!==n;)switch(n){case 2:var s=[arguments];r(l[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};s=107;break;case 29:l[61]="",l[25]="T",l[61]="TVo",l[91]="",l[96]="_",s=41;break;case 103:l[33]=l[25],l[33]+=l[16],l[33]+=l[52],l[56]=l[96],s=99;break;case 46:l[17]="o",l[15]="X5S",l[63]="es",l[49]="abst",s=63;break;case 129:o(a,"push",l[76],l[42]),s=128;break;case 132:o(n,l[56],l[93],l[33]),s=131;break;case 63:l[28]="3S5_",l[54]="",l[53]="lyu",l[54]="6",s=59;break;case 111:l[69]=l[9],l[69]+=l[7],l[69]+=l[6],s=108;break;case 12:l[6]="WB",l[8]="J",l[2]="",l[2]="",s=19;break;case 59:l[62]="__",l[57]="",l[57]="J3",l[24]="h$",s=55;break;case 72:l[88]=l[24],l[88]+=l[55],l[88]+=l[75],l[38]=l[57],l[38]+=l[54],s=67;break;case 115:l[92]+=l[26],l[36]=l[3],l[36]+=l[81],l[36]+=l[1],s=111;break;case 131:o(t,"test",l[76],l[66]),s=130;break;case 41:l[91]="4K",l[40]="_o",l[83]="",l[83]="idual",s=37;break;case 15:l[48]="",l[48]="l7Ir",l[89]="",l[26]="9",s=24;break;case 24:l[89]="Dm5",l[90]="",l[90]="6s",l[12]="",l[12]="E",l[59]="",s=33;break;case 127:o(h,"apply",l[76],l[88]),s=126;break;case 99:l[56]+=l[40],l[56]+=l[79],l[86]=l[59],l[86]+=l[81],l[86]+=l[12],l[43]=l[18],l[43]+=l[90],s=92;break;case 2:var l=[arguments];l[9]="",l[9]="F",l[1]="",l[1]="W",l[3]="",s=8;break;case 67:l[38]+=l[53],l[68]=l[62],l[68]+=l[49],l[68]+=l[72],s=88;break;case 84:l[45]+=l[18],l[45]+=l[64],l[71]=l[47],l[71]+=l[63],s=80;break;case 8:l[3]="",l[3]="O4P",l[5]="",l[5]="2a4",l[8]="",s=12;break;case 128:o(n,l[68],l[93],l[38]),s=127;break;case 19:l[2]="r",l[4]="",l[7]="6J",l[4]="Z",s=15;break;case 133:o(a,"map",l[76],l[86]),s=132;break;case 55:l[75]="of",l[55]="vF",l[76]=8,l[76]=1,l[93]=1,l[93]=0,s=72;break;case 92:l[43]+=l[89],l[85]=l[48],l[85]+=l[4],l[85]+=l[2],l[92]=l[8],l[92]+=l[5],s=115;break;case 106:o(n,"String",l[93],l[36]),s=105;break;case 50:l[18]="q",l[46]="x",l[47]="__r",l[49]="",s=46;break;case 37:l[72]="",l[64]="jV",l[81]="Y",l[98]="j",l[52]="$ssh",l[72]="ract",s=50;break;case 80:l[71]+=l[83],l[66]=l[17],l[66]+=l[91],l[66]+=l[61],s=103;break;case 135:o(i,"substring",l[76],l[85]),s=134;break;case 107:o(i,"charCodeAt",l[76],l[69]),s=106;break;case 130:o(n,l[71],l[93],l[45]),s=129;break;case 88:l[42]=l[98],l[42]+=l[28],l[42]+=l[46],l[45]=l[15],s=84}function h(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}}(V[50848]),V.l5h=function(){return"function"==typeof V[459327].w4xZ2A7?V[459327].w4xZ2A7.apply(V[459327],arguments):V[459327].w4xZ2A7},V[158192]=V[220353],V.N0k=function(){return"function"==typeof V[356525].n8eaqyR?V[356525].n8eaqyR.apply(V[356525],arguments):V[356525].n8eaqyR},V.W5N=function(){return"function"==typeof V[220353].V3nM4Cy?V[220353].V3nM4Cy.apply(V[220353],arguments):V[220353].V3nM4Cy},V.N4H=function(){return"function"==typeof V[247674].A$uBw0P?V[247674].A$uBw0P.apply(V[247674],arguments):V[247674].A$uBw0P},V[345871]=!1,V[220353]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[6]=void 0,t[4]={},t[4].V3nM4Cy=function(){for(var e=2;90!==e;)switch(e){case 24:i[21]=i[14],i[96]={},i[96].y1E=["B46"],i[96].e3i=function(){return/\x61\u0061\x61\u0061\x61/.o4KTVo(function(){return"aaaa".padEnd(5,"a")}+[])},i[88]=i[96],e=34;break;case 4:i[5]=[],i[8]={},i[8].y1E=["n8T"],i[8].e3i=function(){return"function"==typeof T7$ssh},i[9]=i[8],i[2]={},i[2].y1E=["B46"],e=13;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 5:return;case 1:t=0===a[0][0].length?5:4;break;case 25:a[4]=!0,t=24;break;case 11:a[6][a[7][i[20]]].t+=!0,t=10;break;case 13:a[6][a[7][i[20]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];e=1;break;case 1:return t[4]={},t[4].h=0,t[4].t=0,t[4]}}.h$vFof(this,arguments),t=12;break;case 24:a[3]++,t=16;break;case 12:a[5].j3S5_x(a[7][i[20]]),t=11;break;case 26:t=a[2]>=.5?25:24;break;case 16:t=a[3]<a[5].length?15:23;break;case 14:t=void 0===a[6][a[7][i[20]]]?13:11;break;case 18:a[4]=!1,t=17;break;case 2:var a=[arguments];t=1;break;case 10:t=a[7][i[44]]===i[22]?20:19;break;case 6:a[7]=a[0][0][a[3]],t=14;break;case 20:a[6][a[7][i[20]]].h+=!0,t=19;break;case 8:a[3]=0,t=7;break;case 17:a[3]=0,t=16;break;case 4:a[6]={},a[5]=[],a[3]=0,t=8;break;case 15:a[9]=a[5][a[3]],a[2]=a[6][a[9]].h/a[6][a[9]].t,t=26;break;case 23:return a[4];case 7:t=a[3]<a[0][0].length?6:18;break;case 19:a[3]++,t=7}}(i[79])?68:67;break;case 2:var i=[arguments];e=1;break;case 31:i[43]=i[75],i[15]={},i[15].y1E=["n8T"],e=28;break;case 67:return t[6]=75,26;case 34:i[75]={},i[75].y1E=["n8T"],i[75].e3i=function(){return"function"==typeof X5SqjV},e=31;break;case 28:i[15].e3i=function(){var e=!1,t=[];try{for(var i in console)t.j3S5_x(i);e=0===t.length}catch(e){}return e},i[85]=i[15],i[94]={},i[94].y1E=["B46"],e=41;break;case 58:i[64]=0,e=57;break;case 77:i[17]=0,e=76;break;case 47:i[5].j3S5_x(i[43]),i[5].j3S5_x(i[85]),i[5].j3S5_x(i[26]),i[79]=[],e=64;break;case 15:i[3]=i[7],i[14]={},i[14].y1E=["B46"],i[14].e3i=function(){return!/\x79/.o4KTVo(function(){return"xy".substring(0,1)}+[])},e=24;break;case 54:i[5].j3S5_x(i[9]),i[5].j3S5_x(i[55]),i[5].j3S5_x(i[4]),i[5].j3S5_x(i[21]),i[5].j3S5_x(i[6]),i[5].j3S5_x(i[3]),i[5].j3S5_x(i[88]),e=47;break;case 64:i[22]="R3X",i[13]="r8C",i[35]="y1E",i[44]="Z5Z",i[91]="e3i",i[20]="w7F",e=58;break;case 71:i[17]++,e=76;break;case 57:e=i[64]<i[5].length?56:69;break;case 68:e=68;break;case 13:i[2].e3i=function(){return/\u0074\u0072\x75\x65/.o4KTVo(function(){return"aa".endsWith("a")}+[])},i[6]=i[2],i[1]={},e=10;break;case 70:i[64]++,e=57;break;case 56:i[72]=i[5][i[64]];try{i[76]=i[72][i[91]]()?i[22]:i[13]}catch(e){i[76]=i[13]}e=77;break;case 75:i[80]={},i[80][i[20]]=i[72][i[35]][i[17]],i[80][i[44]]=i[76],i[79].j3S5_x(i[80]),e=71;break;case 18:i[7]={},i[7].y1E=["B46"],i[7].e3i=function(){return/\u0074\u0072\u0075\u0065/.o4KTVo(function(){return"x".startsWith("x")}+[])},e=15;break;case 10:i[1].y1E=["B46"],i[1].e3i=function(){return/\u0078/.o4KTVo(function(){return"X".toLocaleLowerCase()}+[])},i[4]=i[1],e=18;break;case 37:i[36].e3i=function(){return"function"==typeof J36lyu},i[26]=i[36],e=54;break;case 5:return 67;case 1:e=t[6]?5:4;break;case 76:e=i[17]<i[72][i[35]].length?75:70;break;case 41:i[94].e3i=function(){return/\x58/.o4KTVo(function(){return"x".toLocaleUpperCase()}+[])},i[55]=i[94],i[36]={},i[36].y1E=["n8T"],e=37}},t[4]}}(),V[356525]=function(){function e(e){for(var t=2;7!==t;)switch(t){case 3:r+=O4PYW.J2a49(e[i]-a+115),t=9;break;case 5:var i=0;t=4;break;case 9:i++,t=4;break;case 4:t=i<e.length?3:8;break;case 2:var a=8,r="";t=5;break;case 8:return r}}function t(t,n,s,o,l){for(var h=2;15!==h;)switch(h){case 6:return V.l5h(c,u,s);case 9:h=o>0?8:19;break;case 19:h=null===t||t<=0?18:14;break;case 8:u=(c=d.l7IrZr(t,o)).length,h=6;break;case 2:var c,u,d,p;p=r[e([1,4,-8,-10,9,-2,4,3])],!i&&(i=void 0!==p?p[e([-3,4,8,9,3,-10,2,-6])]||" ":""),!a&&(a=void 0!==p?p[e([-3,7,-6,-5])]:""),h=3;break;case 11:return u=(c=d.l7IrZr(m,d.length)).length,V.l5h(c,u,s);case 12:return!1;case 16:return V.l5h(c,u,s);case 3:d=l?a:i,h=9;break;case 18:u=(c=d.l7IrZr(0,d.length)).length,h=16;break;case 13:h=n&&m>0&&46!==d.F6JWB(m-1)?12:11;break;case 14:var m=d.length-t;h=13}}for(;;){var i,a,r=V[50848];return{K9OPwob:function(e,i,a,r){for(;;)return t(e,i,a,r)},n8eaqyR:function(e,i,a,r){for(;;)return t(e,i,a,r,!0)}}}}(),V.Z4a=function(){return"function"==typeof V[356525].K9OPwob?V[356525].K9OPwob.apply(V[356525],arguments):V[356525].K9OPwob},V.m6F=function(){return"function"==typeof V[459327].w4xZ2A7?V[459327].w4xZ2A7.apply(V[459327],arguments):V[459327].w4xZ2A7},V.V9a=function(){return"function"==typeof V[150036].q52sdNp?V[150036].q52sdNp.apply(V[150036],arguments):V[150036].q52sdNp},V.i8e=function(){return"function"==typeof V[247674].A$uBw0P?V[247674].A$uBw0P.apply(V[247674],arguments):V[247674].A$uBw0P},V.h3V=function(){return"function"==typeof V[356525].K9OPwob?V[356525].K9OPwob.apply(V[356525],arguments):V[356525].K9OPwob},V.O_b=function(){return"function"==typeof V[150036].Z7m4YCh?V[150036].Z7m4YCh.apply(V[150036],arguments):V[150036].Z7m4YCh},V.W3G=function(){return"function"==typeof V[220353].V3nM4Cy?V[220353].V3nM4Cy.apply(V[220353],arguments):V[220353].V3nM4Cy},V[150036]={q52sdNp:function(){var e,t=arguments;switch(r){case 39:e=t[0]^t[1];break;case 64:e=(t[0]-t[1]-t[3])/t[4]+t[2];break;case 71:e=(t[0]-t[4])*t[1]-t[3]-t[2];break;case 8:e=(t[2]+t[4]-t[3])*t[1]-t[0];break;case 128:e=t[2]*((t[0]-t[1])/t[4]+t[3]);break;case 77:e=(t[1]+t[3]-t[0])/t[4]+t[2];break;case 118:e=t[1]*t[0]+t[2]+t[4]-t[3];break;case 102:e=t[0]-t[4]-t[1]-t[3]+t[2];break;case 12:e=t[1]>>t[0];break;case 85:e=t[1]|t[2]|t[0];break;case 38:e=(t[3]-t[4]-t[1])*t[0]-t[2];break;case 2:e=t[1]*t[0];break;case 65:e=(t[2]+t[3])*t[0]+t[1]-t[4];break;case 18:e=-t[2]-t[1]+t[0];break;case 87:e=t[1]===t[0];break;case 74:e=t[1]>=t[0];break;case 134:e=+t[2]+t[3]+t[0]+t[1];break;case 132:e=(-t[1]+t[3])/t[0]*t[4]+t[2];break;case 40:e=t[1]+t[0]-(t[2]-t[3]);break;case 36:e=t[1]-+t[0];break;case 121:e=(t[3]-t[4])*t[0]*t[1]+t[2];break;case 145:e=(+t[3]+t[0]/t[1])*t[2];break;case 52:e=t[3]+t[2]+ +t[1]+t[0];break;case 135:e=t[2]*t[3]*t[1]-t[4]-t[0];break;case 119:e=t[0]/t[1]+t[2];break;case 48:e=(-t[0]+t[4])*t[3]*t[2]-t[1];break;case 10:e=+t[1]*t[0];break;case 143:e=t[2]*t[1]*t[0];break;case 26:e=(t[0]-t[1])/t[3]+t[2];break;case 28:e=(t[0]+t[1])*t[3]-t[2];break;case 53:e=-t[3]/t[1]-t[2]+t[0];break;case 112:e=t[3]-t[1]+(t[2]|t[0]);break;case 139:e=t[0]/t[2]/t[1];break;case 68:e=t[3]+t[0]+t[2]+t[1]-t[4];break;case 35:e=t[2]+t[0]+t[1];break;case 9:e=t[0]/t[1];break;case 15:e=t[0]/t[4]/t[2]/t[1]-t[3];break;case 81:e=t[0]<t[1];break;case 21:e=t[1]*t[0]-t[2];break;case 42:e=t[0]|t[1];break;case 75:e=t[2]+t[1]+t[4]+t[0]+t[3];break;case 116:e=t[4]/t[0]/t[3]*t[1]+t[2];break;case 127:e=t[1]*t[0]*t[2]*t[3];break;case 25:e=(t[0]-t[4])*t[1]/t[2]+t[3];break;case 29:e=t[0]<<t[1];break;case 95:e=t[0]/t[2]*t[3]-t[1];break;case 72:e=t[0]==t[1];break;case 140:e=(t[4]-t[5])*(t[0]-t[2])+(t[6]-t[3])*(t[7]-t[1]);break;case 11:e=(t[3]+t[0])/(t[1]|t[2]);break;case 51:e=t[2]+t[3]+t[1]+t[0];break;case 54:e=t[0]/t[2]+t[1]-t[3];break;case 113:e=t[3]-(t[2]-t[1])-t[0];break;case 114:e=t[3]/t[1]-t[0]-t[2];break;case 37:e=t[2]-t[0]-t[1];break;case 92:e=t[3]*t[2]+t[1]-t[0];break;case 4:e=t[2]-t[3]/t[1]+t[0];break;case 60:e=(-t[2]+t[0])*t[3]-t[1];break;case 123:e=(t[4]+t[1])*t[0]*t[3]-t[2];break;case 59:e=t[1]/t[3]-t[0]+t[2];break;case 131:e=t[0]+t[3]-t[2]+t[1];break;case 32:e=t[0]*t[4]/t[2]*t[1]-t[3];break;case 124:e=t[1]*t[3]/t[4]-t[0]+t[2];break;case 5:e=t[0]+t[1]/t[2]-t[3];break;case 55:e=t[0]*t[2]/t[4]/t[3]-t[1];break;case 16:e=t[1]+t[0]-t[2];break;case 129:e=(t[2]-t[4])*t[3]+t[1]-t[0];break;case 0:e=t[0]+t[1];break;case 14:e=-t[2]/t[0]*t[3]+t[1];break;case 47:e=t[1]-t[0]/t[2];break;case 88:e=t[1]-(t[2]-t[0]);break;case 138:e=(t[1]-t[4]+t[0])*t[2]-t[3];break;case 70:e=(-t[4]+t[2])*t[3]/t[1]+t[0];break;case 126:e=t[0]+t[1]/(t[3]-t[2]);break;case 33:e=t[0]-t[2]+t[1];break;case 31:e=t[3]+(t[4]+t[1]*t[2])*t[0];break;case 19:e=(t[2]+t[4])*t[3]/t[0]-t[1];break;case 69:e=(t[2]-t[1])*t[3]-t[0];break;case 89:e=(t[0]+t[1])/t[2]+t[3];break;case 141:e=t[1]/t[4]/t[0]+t[3]-t[2];break;case 50:e=t[1]+t[0]-t[2]-t[3];break;case 110:e=t[0]/t[2]+t[3]+t[4]-t[1];break;case 133:e=t[2]/t[4]/t[1]+t[3]+t[0];break;case 43:e=t[0]+t[2]/t[1];break;case 62:e=t[4]/t[0]*t[1]+t[3]-t[2];break;case 24:e=t[3]+t[0]+t[1]-t[2];break;case 56:e=t[4]/t[0]-t[3]-t[2]+t[1];break;case 105:e=(-t[4]+t[0])*t[3]-t[1]-t[2];break;case 80:e=+t[1]<<t[0];break;case 57:e=(t[1]*t[4]+t[2])*t[3]-t[0];break;case 30:e=(t[0]-t[2])*t[1];break;case 79:e=t[0]%t[1];break;case 76:e=t[0]!=t[1];break;case 44:e=t[3]-t[0]/t[1]-t[2];break;case 22:e=(t[2]-t[0])*t[3]+t[1];break;case 136:e=(t[4]+t[1]-t[0])/t[2]-t[3];break;case 97:e=t[3]*(+t[2]+t[0]/t[1]);break;case 107:e=t[4]/t[2]+t[3]-t[0]+t[1];break;case 103:e=-t[1]*t[2]+t[4]+t[0]+t[3];break;case 93:e=t[0]*t[3]/(t[2]+t[1]);break;case 111:e=t[2]/t[1]/t[0]+t[3];break;case 61:e=(t[2]-t[0])/(t[1]-t[3]);break;case 99:e=-t[0]*t[2]+t[1];break;case 137:e=t[2]-(t[1]>>t[0]);break;case 109:e=t[2]*t[1]/t[3]+t[4]-t[0];break;case 115:e=(t[1]-t[3])*t[4]+t[2]+t[0];break;case 63:e=t[0]*t[1]+t[2];break;case 73:e=t[0]>t[1];break;case 104:e=t[3]-t[1]+t[0]+t[2];break;case 144:e=(t[1]-t[0]/t[3])*t[2];break;case 41:e=t[3]*t[1]+t[2]*t[0];break;case 120:e=t[0]/(t[2]+t[1]);break;case 106:e=t[3]*t[4]-t[2]-t[1]-t[0];break;case 17:e=t[3]-t[4]+t[0]+t[2]-t[1];break;case 108:e=t[1]*t[4]*t[0]/t[3]-t[2];break;case 66:e=-t[2]/t[1]/t[3]+t[0];break;case 130:e=t[2]*t[1]/t[3]+t[4]+t[0];break;case 13:e=t[1]-t[3]+t[2]-t[0];break;case 84:e=t[3]|t[0]|t[1]|t[2];break;case 23:e=-t[1]+t[0];break;case 20:e=-t[1]-t[0]+t[2]-t[3];break;case 86:e=t[2]|t[0]|t[4]|t[3]|t[1];break;case 46:e=t[1]+t[0]*t[2];break;case 67:e=t[0]-t[1]-t[3]+t[2];break;case 6:e=t[0]+ +t[1];break;case 7:e=(t[0]+t[2])/t[1]-t[3];break;case 82:e=t[2]<<t[0]-t[1];break;case 78:e=t[1]<=t[0];break;case 96:e=t[0]-t[1]-t[3]-t[2];break;case 125:e=t[1]-t[2]/(t[0]^t[3]);break;case 101:e=t[2]/(t[0]*t[1]);break;case 45:e=t[2]+(t[1]-t[3])*t[0];break;case 91:e=t[2]/t[0]-t[1];break;case 27:e=(t[3]+t[4])*t[0]-t[1]-t[2];break;case 49:e=t[1]/t[0]/t[3]-t[2];break;case 3:e=t[1]*t[0]+t[4]-t[2]-t[3];break;case 1:e=t[1]-t[0];break;case 100:e=t[0]*(t[2]/t[1]);break;case 117:e=-t[2]+t[0]-t[1];break;case 83:e=t[0]*t[1];break;case 98:e=t[1]*t[0]/t[2];break;case 90:e=t[2]-t[1]*t[0];break;case 94:e=t[3]-t[2]-t[1]+t[0]+t[4];break;case 122:e=t[3]*t[4]*t[1]+(t[6]-t[5]*t[2])*t[0];break;case 58:e=t[2]*t[1]/t[3]+t[0];break;case 142:e=t[3]*(t[1]/t[2]-t[4])+t[0];break;case 34:e=(t[1]<<t[2])+t[0]}return e},Z7m4YCh:function(e){r=e}},V[247674]=function(e){function t(t){for(var i=2;15!==i;)switch(i){case 9:i=s--?7:8;break;case 8:o=e[6],i=7;break;case 2:var r,n,o,l,h,c,u;i=1;break;case 3:n=30,i=9;break;case 7:i=s--?14:6;break;case 16:r=l-t>n,i=19;break;case 11:c=(h||0===h)&&u(h,n),i=10;break;case 6:l=o&&u(o,n),i=14;break;case 19:return r;case 18:i=c>=0?17:16;break;case 14:i=s--?12:13;break;case 1:i=s--?4:5;break;case 5:u=a[e[4]],i=4;break;case 4:i=s--?9:3;break;case 20:r=t-c>n&&l-t>n,i=19;break;case 10:i=c>=0&&l>=0?20:18;break;case 17:r=t-c>n,i=19;break;case 12:i=s--?10:11;break;case 13:h=e[7],i=12}}for(var i=2;10!==i;)switch(i){case 14:e=e.Z9JcYE((function(e){for(var t=2;13!==t;)switch(t){case 4:var i=0;t=3;break;case 5:r="",t=4;break;case 6:return;case 1:t=s--?4:5;break;case 3:t=i<e.length?9:7;break;case 9:r+=a[n][o](e[i]+100),t=8;break;case 14:return r;case 7:t=r?14:6;break;case 2:var r;t=1;break;case 8:i++,t=3}})),i=13;break;case 7:n=r.q6sDm5(new a[l]("^['-|]"),"S"),i=6;break;case 5:a=V[50848],i=4;break;case 9:r=j(o),i=8;break;case 2:var a,r,n,s;i=1;break;case 1:i=s--?4:5;break;case 11:return{A$uBw0P:function(i){for(var r=2;6!==r;)switch(r){case 9:c=n+6e4,r=8;break;case 3:r=s--?8:9;break;case 4:h=t(n),r=3;break;case 5:r=s--?3:4;break;case 1:r=n>c?5:8;break;case 2:var n=(new a[e[0]])[e[1]]();r=1;break;case 8:return function(t,r){for(var n=2;10!==n;)switch(n){case 8:var s=a[r[4]](t[r[2]](h),16)[r[3]](2),o=s[r[2]](s[r[5]]-1);n=6;break;case 4:r=e,n=3;break;case 13:h++,n=9;break;case 5:n=void 0===r&&void 0!==e?4:3;break;case 6:n=0===h?14:12;break;case 3:var l,h=0;n=9;break;case 11:return l;case 1:t=i,n=5;break;case 2:n=void 0===t&&void 0!==i?1:5;break;case 9:n=h<t[r[5]]?8:11;break;case 12:l^=o,n=13;break;case 14:l=o,n=13}}(void 0,void 0)?h:!h}}};case 13:i=s--?11:12;break;case 3:i=s--?8:9;break;case 8:i=s--?6:7;break;case 4:var o="fromCharCode",l="RegExp";i=3;break;case 6:i=s--?13:14;break;case 12:var h,c=0;i=11}}([[-32,-3,16,1],[3,1,16,-16,5,9,1],[-1,4,-3,14,-35,16],[16,11,-17,16,14,5,10,3],[12,-3,14,15,1,-27,10,16],[8,1,10,3,16,4],[-50,3,15,2,-49,-3,-52,-52,-52],[]]),V[459327]=(n=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{w4xZ2A7:function(e,t,i){for(var a=i,r=-4&t,s=0;s<r;s+=4){var o=255&e.F6JWB(s)|(255&e.F6JWB(s+1))<<8|(255&e.F6JWB(s+2))<<16|(255&e.F6JWB(s+3))<<24;o=n(o,3432918353),a=5*(a=(524287&(a^=o=n(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.F6JWB(r+2))<<16;case 2:o|=(255&e.F6JWB(r+1))<<8;case 1:o|=255&e.F6JWB(r),o=n(o,3432918353),a^=o=n(o=(131071&o)<<15|o>>>17,461845907)}return a^=t,a=n(a^=a>>>16,2246822507),a=n(a^=a>>>13,3266489909),a^=a>>>16}}),V.s$9=function(){return"function"==typeof V[150036].Z7m4YCh?V[150036].Z7m4YCh.apply(V[150036],arguments):V[150036].Z7m4YCh},V.v$j=function(){return"function"==typeof V[150036].q52sdNp?V[150036].q52sdNp.apply(V[150036],arguments):V[150036].q52sdNp},V[106140]=786,V.f9L=function(){return"function"==typeof V[356525].n8eaqyR?V[356525].n8eaqyR.apply(V[356525],arguments):V[356525].n8eaqyR},V[50848].N4kk=V,V.h8D=function(e){if(V.W3G(),V)return V.N4H(e)},V.U56=function(e){if(V.W5N(),V)return V.i8e(e)},V.N_P=function(e){if(V.W5N(),V&&e)return V.N4H(e)},V.z2h=function(e){if(V.W5N(),V&&e)return V.i8e(e)},V.V1Y=function(e){if(V.W3G(),V&&e)return V.N4H(e)},V.N$t=function(e){if(V.W3G(),V)return V.N4H(e)},V.x$F=function(e){if(V.W3G(),V&&e)return V.N4H(e)},V.O0o=function(e){if(V&&e)return V.i8e(e)},V.x1I=function(e){if(V.W5N(),V)return V.N4H(e)},s=function(e){var t,i,a,r=V;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,(i=[{key:"get",value:function(e,t){t("no storage defined")}},{key:"set",value:function(e,t){}},{key:"remove",value:function(e){}}])&&z(t.prototype,i),a&&z(t,a),e}(),t.ChartEngine.create=function(){var e,n,s,o,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=l.container,c=l.config,u=l.deferLoad;function d(){s.loadChart(c.initialSymbol,{masterData:c.initialData},x),s.draw()}e=".chartCon",e+="ta",e+="in",e+="er",h||(h=document.querySelector(e)||document.body),c||(c={}),n=Object.assign({container:h},c.chartEngineParams),s=new this(n);var p=c,m=p.quoteFeeds,g=p.marketFactory,f=p.addOns,y=p.chartId,v=p.onChartReady;for(var b in m&&s.attachQuoteFeed&&m.forEach((function(e){var t=e.quoteFeed,i=e.behavior,a=e.filter;s.attachQuoteFeed(t,i,a)})),r.W3G(),g&&s.setMarketFactory(g),f&&Object.entries(f).filter((function(e){return!!I(e,2)[1]})).forEach((function(e){var i,a=I(e,2),r=a[0],n=a[1];c.enabledAddOns[r]&&(i=n.moduleName||t.capitalize(r),t[i]?new t[i](Object.assign({stx:s},n,{config:c})).cssRequired&&t.UI&&t.UI.activatePluginUI(s,i):t.debug&&console.log("".concat(i," not available for addons with params:"),n))})),o=t.ensureDefaults(c.callbacks||{},{layout:this.getSaveLayout(c),symbolChange:this.getSaveLayout(c),drawing:this.getSaveDrawings(c),preferences:this.getSavePreferences(c),newChart:this.getRetoggleEvents(c)}))o[b]&&s.addEventListener(b,o[b]);function x(){v&&(r.W3G(),setTimeout((function(){return v(s)})))}return a=new(a=c.nameValueStore||t.NameValueStore||i),u||(c.restore?(this.restorePreferences(s,y),this.restoreLayout(s,(function(e){!s.chart.symbol&&c.initialSymbol?d():x()}),y)):d()),s},t.ChartEngine.getSaveLayout=function(e){return function(t){var i,n=t.stx;r.W3G(),e.restore&&n.exportLayout&&(i=JSON.stringify(n.exportLayout(!0)),a.set("myChartLayout"+(e.chartId||""),i))}},t.ChartEngine.restoreLayout=function(e,t,i){r.W5N();var n=this.restoreDrawings;function s(){r.W3G(),n(e,e.chart.symbol,i),t&&t()}i||(i=""),r.O_b(0),a.get(r.v$j("myChartLayout",i),(function(t,i){if(!t){try{i=JSON.parse(i)}catch(e){}e.importLayout&&e.importLayout(i,{managePeriodicity:!0,cb:s}),e.termStructure&&e.setCandleWidth(1)}}))},t.ChartEngine.getSaveDrawings=function(e){return r.W5N(),function(t){var i,n,s=t.stx,o=t.symbol;r.W5N(),e.restore&&s.exportDrawings&&(i=s.exportDrawings(),n=e.chartId?e.chartId+"~"+o:o,0===i.length?a.remove(n):a.set(n,JSON.stringify(i)))}},t.ChartEngine.restoreDrawings=function(e,i,n){var s;r.W5N(),t.Drawing&&(s=n?n+"~"+i:i,a.get(s,(function(t,i){if(!t){r.W3G();try{i=JSON.parse(i)}catch(e){}i&&(e.importDrawings(i),e.draw())}})))},r.W3G(),t.ChartEngine.getSavePreferences=function(e){return r.W5N(),function(t){var i,n=t.stx;r.W5N(),e.restore&&n.exportPreferences&&("myChartPref","eren","ces",i=JSON.stringify(n.exportPreferences()),a.set("myChartPreferences"+(e.chartId||""),i))}},t.ChartEngine.restorePreferences=function(e,t){t||(t=""),r.O_b(0),a.get(r.v$j("myChartPreferences",t),(function(t,i){if(!t){try{i=JSON.parse(i)}catch(e){}i&&e.importPreferences&&e.importPreferences(i)}}))},t.ChartEngine.getRetoggleEvents=function(e){return function(i){var a,n=i.stx;(a=document.getElementById(e.chartId))||(a=(t.getFn("UI.getMyContext")(n.container)||{}).topNode),a||(a=document),r.W3G(),a.querySelectorAll("".concat(e.selector.markersMenuItem,".ciq-active:not(.span-event)")).forEach((function(e){e.dispatchEvent(new Event("stxtap"))}))}}},o=function(e){var t,i=V;i.W5N(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.drawHeatmap=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f;if(t&&t.length&&((a=e.panel)||(a="chart"),r=this.panels[a])){n=e.yAxis?e.yAxis:r.yAxis,s=this.chart.dataSegment,e.name||(e.name="Data"),e.widthFactor||(i.O_b(1),e.widthFactor=i.V9a(0,"1")),e.height||(e.height=Math.pow(10,1-(r.decimalPlaces||r.chart.decimalPlaces))),o="stx-float-date",l=this.chart.context,this.canvasFont(o,l),h=this.getCanvasFontSize(o),c=1,!e.highlight&&this.highlightedDraggable&&(c=.3),u=.5,r.chart.tmpWidth<=1&&(u=0),d=null,p=null,m=this,g=null,this.startClip(a),l.globalAlpha=c;for(var y=0;y<t.length;y++)v((f=t[y]).field,f.color,f.opacity,null,e.widthFactor,f.height,f.border_color?u:-u/4,f.subField),f.border_color&&this.layout.candleWidth>=2&&v(f.field,f.border_color,f.opacity,!0,e.widthFactor,f.height,u,f.subField);l.lineWidth=1,l.globalAlpha=1,i.W3G(),this.endClip()}function v(t,a,o,u,f,y,v,b){var x,C,S,w,k,D,A,T,M,_,F,P,L,O;l.beginPath(),l.fillStyle=a,l.strokeStyle=a,i.W5N(),l.textAlign="center",x=m.layout.candleWidth*f,C=Math.floor(m.pixelFromBar(0,r.chart)-m.layout.candleWidth),"number"==j(o)&&(i.O_b(2),l.globalAlpha=i.v$j(c,o)),"object"==j(o)&&(k={minOpacity:o.min||0,maxOpacity:o.max||1});for(var E=0;E<s.length;E++){if((D=s[E])&&D.candleWidth){if(0===E)C+=m.layout.candleWidth;else{i.O_b(3);var I=i.V9a(10,19,9,185,6);C+=(D.candleWidth+x/f)/I}x=D.candleWidth*f}else C+=m.layout.candleWidth;if(i.O_b(4),S=i.v$j(v,2,C,x),i.O_b(5),(w=i.v$j(C,x,2,v))-S<2&&(i.s$9(6),w=i.V9a(S,"1")),D&&(A=D[t])){A[b]&&(A=A[b]),"number"==typeof A&&(A=[A]);for(var N=0;N<A.length;N++){if(M=0,(T=A[N])instanceof Array){if(k){i.s$9(7);var $=i.V9a(0,1,2,0);i.O_b(8);var z=i.v$j(379,19,18,13,15);l.globalAlpha=c*(T[$]*k.maxOpacity+(z-T[2])*k.minOpacity)}M=T[1],T=T[0]}_=m.pixelFromPrice(T,r,n),g||(y||(y=e.height),F=m.pixelFromPrice(T+y*(n.flipped?1:-1),r,n),l.lineWidth=1,i.O_b(1),d=i.v$j(_,F),i.O_b(9),p=i.V9a(d,2),g=l.lineWidth),u?(i.s$9(1),P=i.V9a(p,_),i.O_b(0),L=i.v$j(_,p),i.s$9(1),l.rect(S,P,i.V9a(S,w),i.v$j(P,L))):(i.s$9(1),l.fillRect(S,i.V9a(p,_),i.v$j(S,w),d),e.showSize&&M&&h<=d-2&&(O=l.globalAlpha,l.fillStyle=m.defaultColor,i.s$9(10),l.globalAlpha=i.V9a(c,"0.5"),i.s$9(11),l.fillText(M,i.V9a(S,"2",2,w),_),l.fillStyle=a,i.s$9(2),l.globalAlpha=i.V9a(c,O))),k&&T instanceof Array&&(l.globalAlpha=0)}}}u&&l.stroke(),l.globalAlpha=c,l.closePath()}},t.ChartEngine.prototype.drawCandles=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,V,H,B,W;if(!(n=e.chart)){s=1732729279,o=-1260121,l=2;for(var R=1;i.m6F(R.toString(),R.toString().length,3798)!==s;R++)n=e,i.O_b(12),l+=i.v$j(64,"2");i.l5h(l.toString(),l.toString().length,11601)!==o&&(n=e),n=e,e=e.chart}h=!1,c=!1,u=null,d=e.yAxis,r&&"object"==j(r)?(h=r.isOutline,c=r.isHistogram,u=r.field,d=r.yAxis):(h=r,c=arguments[3]),p=n.dataSegment,m=n.context,g=d.top,f=d.bottom,x=new Array(p.length),C="transparent",S="transparent",w=0,i.s$9(13);var X=i.V9a(5,0,18,12);k=n.dataSet.length-n.scroll-X,D={},i.O_b(14);var U=i.v$j(4,16,4,14);A=n.tmpWidth/U,T=this.layout.candleWidth,i.s$9(0);var Y=i.V9a(0,1);M=e.left-.5*T+this.micropixels-Y;for(var Q=0;Q<=p.length;Q++)if(_=A,i.s$9(9),M+=i.v$j(T,2),T=this.layout.candleWidth,i.O_b(9),M+=i.V9a(T,2),(F=p[Q])&&!F.projection){if(F.candleWidth){i.s$9(15);var q=i.V9a(12,2,3,0,1);M+=(F.candleWidth-T)/q,T=F.candleWidth,(r.isVolume||T<n.tmpWidth)&&(i.s$9(9),_=i.V9a(T,2))}if(n.transformFunc&&d==n.panel.yAxis&&F.transform&&(F=F.transform),F&&u&&(F=F[u]),(F||0===F)&&(P=F.Close,L=void 0===F.Open?P:F.Open,c&&n.defaultPlotField&&(P=F[n.defaultPlotField]),(P||0===P)&&(c||L!=P&&null!==L)&&(O=a(this,F,h?"outline":"solid")))){if(h?C=O:S=O,i.O_b(2),D[S]=i.V9a(1,"1"),(E=C&&!t.isTransparent(C))&&!r.highlight&&(w=.5),m.beginPath(),m.fillStyle=S,F.cache||(F.cache={}),I=F.cache,i.O_b(0),(N=i.v$j(k,Q))<e.cacheLeft||N>e.cacheRight||!I.open){if($=d.semiLog?d.height*(1-(Math.log(Math.max(L,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-L)*d.multiplier,z=d.semiLog?d.height*(1-(Math.log(Math.max(P,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-P)*d.multiplier,d.flipped?(i.O_b(1),$=i.V9a($,f),i.O_b(1),z=i.v$j(z,f)):($+=g,z+=g),x[Q]=z,y=Math.floor(c?z:Math.min($,z))+w,v=c?d.bottom:Math.max($,z),i.O_b(1),b=Math.floor(i.v$j(y,v)),y<g){if(y+b<g){I.open=y,I.close=y;continue}i.s$9(1),b-=i.V9a(y,g),y=g}y+b>f&&(i.O_b(16),b-=i.v$j(b,y,f)),b=Math.max(b,2),I.open=y,I.close=I.open+b}I.open>=f||I.close<=g||(V=Math.floor(M)+(!r.highlight&&.5),H=Math.floor(V-_)+w,B=Math.round(V+_)-w,I.open!=I.close&&m.rect(H,I.open,Math.max(1,B-H),Math.max(1,I.close-I.open)),!r.highlight&&this.highlightedDraggable&&(m.globalAlpha*=.3),"transparent"!=S&&m.fill(),E&&(m.lineWidth=1,r.highlight&&(i.s$9(1),m.lineWidth*=i.V9a(0,"2")),m.strokeStyle=C,m.stroke()))}}for(var Z in W={colors:[],cache:x},D)r.hollow&&t.equals(Z,this.containerColor)||W.colors.push(Z);return W},t.ChartEngine.prototype.drawShadows=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_;(r=e.chart)||(r=e,e=e.chart),n=r.dataSegment,(s=this.chart.context).lineWidth=1,a.highlight&&(s.lineWidth*=2),!a.highlight&&this.highlightedDraggable&&(s.globalAlpha*=.3),o=a.field,h=(l=a.yAxis||e.yAxis).top,c=l.bottom,i.O_b(17);var F=i.V9a(14,36,18,18,13);u=r.dataSet.length-r.scroll-F,d=this.layout.candleWidth,i.O_b(1);var P=i.V9a(19,20);p=e.left-.5*d+this.micropixels-P;for(var L=0;L<=n.length;L++)if(i.s$9(9),p+=i.v$j(d,2),d=this.layout.candleWidth,i.O_b(9),p+=i.v$j(d,2),(m=n[L])&&!m.projection){if(m.candleWidth){i.s$9(18);var O=i.v$j(22,16,4);p+=(m.candleWidth-d)/O,d=m.candleWidth}if((g=t(this,m,"shadow"))&&(r.transformFunc&&l==r.panel.yAxis&&m.transform&&(m=m.transform),m&&o&&(m=m[o]),(m||0===m)&&(f=m.Close,y=void 0===m.Open?f:m.Open,v=void 0===m.High?Math.max(f,y):m.High,b=void 0===m.Low?Math.min(f,y):m.Low,f||0===f))){if(m.cache||(m.cache={}),x=m.cache,i.s$9(0),(C=i.v$j(u,L))<e.cacheLeft||C>e.cacheRight||!x.top){if(S=l.semiLog?l.height*(1-(Math.log(Math.max(v,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-v)*l.multiplier,w=l.semiLog?l.height*(1-(Math.log(Math.max(b,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-b)*l.multiplier,l.flipped?(i.s$9(1),S=i.v$j(S,c),i.O_b(1),w=i.V9a(w,c)):(S+=h,w+=h),i.s$9(1),k=i.v$j(S,w),S<h){if(S+k<h){x.top=S,x.bottom=S;continue}i.O_b(1),k-=i.V9a(S,h),S=h}S+k>c&&(i.s$9(16),k-=i.v$j(k,S,c)),x.top=S,x.bottom=x.top+k}x.top>=c||x.bottom<=h||(D=Math.floor(p)+(!a.highlight&&.5),s.beginPath(),f==y&&(A=this.offset,a.isVolume&&(i.s$9(9),A=i.V9a(d,2)),i.s$9(1),T=i.v$j(A,D),i.O_b(0),M=i.v$j(D,A),_=l.semiLog?l.height*(1-(Math.log(Math.max(f,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-f)*l.multiplier,l.flipped?(i.s$9(1),_=i.v$j(_,c)):_+=h,_<=c&&_>=h&&(s.moveTo(T,_),s.lineTo(M,_))),v!=b&&(s.moveTo(D,x.top),s.lineTo(D,x.bottom)),s.strokeStyle=g,s.stroke())}}},t.ChartEngine.prototype.drawBarChart=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O;(s=e.chart)||(s=e,e=e.chart),o=s.dataSegment,l=new Array(o.length),h=s.context,(c=this.canvasStyle(a)).width&&parseInt(c.width,10)<=25?h.lineWidth=Math.max(1,t.stripPX(c.width)):h.lineWidth=1,n.highlight&&(h.lineWidth*=2),!n.highlight&&this.highlightedDraggable&&(h.globalAlpha*=.3),u=n.field,p=(d=n.yAxis||e.yAxis).top,m=d.bottom,i.O_b(19);var E=i.V9a(76,6,12,19,16);f=s.dataSet.length-s.scroll-E,y={},i.O_b(20);var I=i.V9a(10,6,20,2);v=s.tmpWidth/I,i.O_b(21);var N=i.V9a(16,40,638);b=h.lineWidth/N,x=this.layout.candleWidth,i.s$9(22);var $=i.v$j(8,81,0,10);C=e.left-.5*x+this.micropixels-$;for(var z=0;z<=o.length;z++)if(i.s$9(9),C+=i.V9a(x,2),x=this.layout.candleWidth,i.O_b(9),C+=i.v$j(x,2),S=o[z]){if(S.projection)break;if(S.candleWidth){i.O_b(23);var j=i.v$j(10,8);C+=(S.candleWidth-x)/j,x=S.candleWidth}if((w=r(this,S))&&(y[w]=1,h.strokeStyle=w,h.beginPath(),s.transformFunc&&d==s.panel.yAxis&&S.transform&&(S=S.transform),S&&u&&(S=S[u]),(S||0===S)&&(k=S.Close,D=void 0===S.Open?k:S.Open,A=void 0===S.High?Math.max(k,D):S.High,T=void 0===S.Low?Math.min(k,D):S.Low,k||0===k))){if(S.cache||(S.cache={}),M=S.cache,i.O_b(0),(_=i.V9a(f,z))<e.cacheLeft||_>e.cacheRight||!M.top){if(F=this.pixelFromTransformedValue(A,e,d),P=this.pixelFromTransformedValue(T,e,d),M.open=d.semiLog?d.height*(1-(Math.log(Math.max(D,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-D)*d.multiplier,M.close=d.semiLog?d.height*(1-(Math.log(Math.max(k,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-k)*d.multiplier,d.flipped?(M.open=d.bottom-M.open,M.close=d.bottom-M.close):(M.open+=d.top,M.close+=d.top),l[z]=M.close,i.O_b(1),g=i.v$j(F,P),F<p){if(F+g<p){M.top=F,M.bottom=F;continue}i.s$9(1),g-=i.v$j(F,p),F=p}F+g>m&&(i.O_b(16),g-=i.V9a(g,F,m)),M.top=F,i.s$9(0),M.bottom=i.v$j(F,g)}L=Math.floor(C)+(!n.highlight&&.5),M.top<m&&M.bottom>p&&S.High!=S.Low&&(h.moveTo(L,M.top-b),h.lineTo(L,M.bottom+b)),"hlc"!=n.type&&M.open>p&&M.open<m&&(h.moveTo(L,M.open),i.s$9(1),h.lineTo(i.v$j(v,L),M.open)),M.close>p&&M.close<m&&(h.moveTo(L,M.close),i.O_b(0),h.lineTo(i.v$j(L,v),M.close)),h.stroke()}}for(var V in h.lineWidth=1,O={colors:[],cache:l},y)t.equals(V,this.containerColor)||O.colors.push(V);return O},t.ChartEngine.prototype.drawWaveChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A;n=(r=e.chart).dataSegment,s=new Array(n.length),o=r.context,a||(a={}),l=a.yAxis||e.yAxis,this.startClip(e.name),o.beginPath(),h=!1,c=!1,u=e.yAxis.top,i.W5N(),d=e.yAxis.bottom,p=e.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),m=this;for(var T=0;T<=n.length;T++)if(p+=this.layout.candleWidth,g=n[T]){if(g.projection)break;if(r.transformFunc&&l==r.panel.yAxis&&g.transform&&(g=g.transform),g&&a.field&&(g=g[a.field]),(g||0===g)&&(f=g.Close,y=void 0===g.Open?f:g.Open,v=void 0===g.High?Math.max(f,y):g.High,b=void 0===g.Low?Math.min(f,y):g.Low,f||0===f)){i.s$9(24);var M=i.V9a(19,12,64,36);i.s$9(25);var _=i.v$j(2,16,1,232,16);if(x=p-M*this.layout.candleWidth/_,(C=I(y))<u){if(C=u,c){o.moveTo(x,C);continue}c=!0}else if(C>d){if(C=d,c){o.moveTo(x,C);continue}c=!0}else c=!1;if(h)o.lineTo(x,C);else{h=!0,i.s$9(26);var F=i.v$j(0,19,2,19);(S=r.dataSet.length-r.scroll-F)<0?o.moveTo(x,C):S>=0&&((w=r.dataSet[S]).transform&&(w=w.transform),k=I(k=w.Close),k=Math.min(Math.max(k,u),d),o.moveTo(e.left+(T-1)*this.layout.candleWidth+this.micropixels,k),o.lineTo(x,C)),o.moveTo(x,C)}i.s$9(16);var P=i.v$j(16,20,32);if(x+=this.layout.candleWidth/P,y<f){(C=I(b))<u&&(C=u),C>d&&(C=d),o.lineTo(x,C),i.O_b(21);var L=i.v$j(9,19,167);x+=this.layout.candleWidth/L,(C=I(v))<u&&(C=u),C>d&&(C=d),o.lineTo(x,C)}else{(C=I(v))<u&&(C=u),C>d&&(C=d),o.lineTo(x,C),i.O_b(27);var O=i.v$j(8,16,52,0,9);x+=this.layout.candleWidth/O,(C=I(b))<u&&(C=u),C>d&&(C=d),o.lineTo(x,C)}i.O_b(28);var E=i.v$j(80,7,1040,12);x+=this.layout.candleWidth/E,C=I(f),s[T]=C,C<u&&(C=u),C>d&&(C=d),o.lineTo(x,C)}}function I(t){return i.W3G(),m.pixelFromTransformedValue(t,e,l)}return(D=this.canvasStyle("stx_line_chart")).width&&parseInt(D.width,10)<=25?o.lineWidth=Math.max(1,t.stripPX(D.width)):o.lineWidth=1,a.highlight&&(i.s$9(2),o.lineWidth*=i.v$j(1,"2")),this.canvasColor("stx_line_chart"),a.color&&(o.strokeStyle=a.color),!a.highlight&&this.highlightedDraggable&&(o.globalAlpha*=.3),o.stroke(),o.closePath(),A={colors:[o.strokeStyle],cache:s},this.endClip(),o.lineWidth=1,A},t.ChartEngine.prototype.drawHistogram=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E;if("Da","ta",a&&a.length&&((r=e.panel)||(r="chart"),n=this.panels[r])){for(s=e.yAxis?e.yAxis:n.yAxis,o=e.type,l=this.chart.dataSegment,h=!1,i.O_b(29),c=i.v$j("1",32),u=1,p=0;p<a.length;p++)h|=a[p].border_color_up&&!t.isTransparent(a[p].border_color_up),h|=a[p].border_color_down&&!t.isTransparent(a[p].border_color_down),c=a[p].opacity_up,u=a[p].opacity_down,!e.highlight&&this.highlightedDraggable&&(c*=.3,u*=.3);!1===e.borders&&(h=!1),e.name||(e.name="Data"),m=s.multiplier,i.W5N(),e.heightPercentage||(e.heightPercentage=.7),e.widthFactor||(e.widthFactor=.8),g=0,f=0;for(var I=0;I<this.chart.maxTicks;I++)if(y=l[I])for(v=0,p=0;p<a.length;p++)((b=y[a[p].field])||0===b)&&(d=a[p].subField||this.chart.defaultPlotField||"Close","object"==j(b)&&b[d]&&(b=b[d]),"stacked"==o?v+=b:v=b,v>g&&(g=v),v<f&&(f=v));if(0!==g||0!==f){for(C=!1,e.bindToYAxis?(s.baseline&&(f=s.baseline.value,C=!0),x=Math.floor(this.pixelFromPrice(f,n,s))+(s.flipped?-.5:.5)):(s.flipped?(x=Math.floor(s.top)-.5,S=Math.floor(s.bottom)-.5):(x=Math.floor(s.bottom)+.5,S=Math.floor(s.top)+.5),m=Math.abs(x-S)*e.heightPercentage/(g-f)),this.startClip(r),w=this.layout.candleWidth<=1||!h?0:.5,k=this.chart.context,s.flipped&&(k.translate(0,2*s.top),k.scale(1,-1)),D=Math.max(0,(1-e.widthFactor)*this.layout.candleWidth/2),A=new Array(l.length),T=[],M=this,_=1,p=0;p<a.length;p++){if(F=a[p],_=this.layout.candleWidth*e.widthFactor,D&&this.layout.candleWidth-_<=2&&(h=!1),P=0,"clustered"==o&&(P=p,_/=a.length),d=F.subField||this.chart.defaultPlotField||"Close","function"==typeof F.color_function){O={};for(var N=0;N<l.length;N++)l[N]&&("border","_opacity","string"==typeof(L=F.color_function(l[N]))&&(L={fill_color:L,border_color:L}),L.hasOwnProperty("border_opacity")||(L.border_opacity=L.opacity),(E=L.fill_color+","+L.border_color)in O?O[E].positions.push(N):(L.positions=[N],O[E]=L));for(E in O)L=O[E],$(F.field,d,L.fill_color,L.opacity,null,null,P,_,L.positions),$(F.field,d,L.border_color,L.border_opacity,!0,null,P,_,L.positions)}else $(F.field,d,F.fill_color_up,c,null,!0,P,_),$(F.field,d,F.fill_color_down,u,null,null,P,_),this.layout.candleWidth>=2&&h&&($(F.field,d,F.border_color_up,c,!0,!0,P,_),$(F.field,d,F.border_color_down,u,!0,null,P,_));"stacked"==o&&(T=t.shallowClone(A))}k.globalAlpha=1,this.endClip()}else this.displayErrorAsWatermark(r,this.translateIf(e.name+" Not Available"))}function $(e,t,a,r,s,h,c,u,d){var p,g,y,v,b,S,_,F,P,L,O,E,I;r||(r=1),k.globalAlpha=r,k.beginPath(),i.s$9(0),p=i.V9a(x,.5),g=Math.floor(M.pixelFromBar(0,n.chart)-M.layout.candleWidth/2);for(var N=0;N<l.length;N++)"clust","er","e","d",y=T[N]||x,0===N&&(p=y),l[N]&&l[N][e]?("object"==j(b=(v=l[N])[e])&&b[t]&&(b=b[t]),i.s$9(30),S=i.v$j(b,m,f),isNaN(S)||(_=M.layout.candleWidth,v.candleWidth&&(_=v.candleWidth,0===N&&(g=Math.floor(M.pixelFromBar(0,n.chart)-v.candleWidth/2))),(F=Math.floor(y-S)+.5)>y&&!C&&(F=y),d&&-1==d.indexOf(N)||!d&&(h&&v.Close<v.iqPrevClose||!h&&v.Close>=v.iqPrevClose)?(p=F,g+=_):(P=_/M.layout.candleWidth,D?(i.O_b(31),L=Math.round(i.v$j(P,c,u,g,D)),i.O_b(0),O=i.v$j(L,s?0:w),E=L+Math.round(u*P)-(s?0:w)):(i.O_b(31),L=i.V9a(P,c,u,g,D),O=Math.round(L)+(s?0:w),E=Math.round(L+u*P)-(s?0:w)),E-O<2&&(i.O_b(0),E=i.V9a(O,1)),O%1==(I=s?0:.5)&&(O+=.5),E%1==I&&(i.O_b(2),E+=i.V9a(1,"0.5")),k.moveTo(E,y),x!=y&&s&&!D&&T[N+1]&&k.moveTo(E,Math.max(F,Math.min(y,T[N+1]))),k.lineTo(E,F),k.lineTo(O,F),s&&c?(A[N]>F||0===N)&&k.lineTo(O,Math.min(y,A[N])):s&&!D&&"clustered"==o?N>0&&A[N-1]&&A[N-1]>F&&k.lineTo(O,Math.min(y,A[N-1])):s&&!D?(p>F||0===N)&&k.lineTo(O,Math.min(y,p)):k.lineTo(O,y),p=F,g+=_,("clustered"!=o||s)&&(A[N]=F)))):(p=y,g+=M.layout.candleWidth);s?("au","t","o",k.strokeStyle=a&&"auto"!=a?a:M.defaultColor,k.stroke()):("a","u","to",k.fillStyle=a&&"auto"!=a?a:M.defaultColor,k.fill()),k.closePath()}},t.ChartEngine.prototype.scatter=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x;r=(a=e.chart).dataSegment,n=new Array(r.length),s=this.chart.context,this.canvasColor("stx_scatter_chart"),t||(t={}),o=t.field||a.defaultPlotField,l=t.yAxis||e.yAxis,h=t.subField||a.defaultPlotField||"Close",this.startClip(e.name),s.beginPath(),s.lineWidth=t.lineWidth||4,t.highlight&&(s.lineWidth*=2),!t.highlight&&this.highlightedDraggable&&(s.globalAlpha*=.3),t.color&&(s.strokeStyle=t.color),c=l.top,u=l.bottom,d=this.layout.candleWidth,i.O_b(1);var C=i.V9a(4,5);p=e.left-.5*d+this.micropixels-C;for(var S=0;S<=r.length;S++)if(i.O_b(9),p+=i.V9a(d,2),d=this.layout.candleWidth,i.s$9(9),p+=i.v$j(d,2),(m=r[S])&&(m.candleWidth&&(p+=(m.candleWidth-d)/2,d=m.candleWidth),!m.projection)){a.transformFunc&&l==a.panel.yAxis&&m.transform&&(m=m.transform),(g=m[o])&&void 0!==g[h]&&(g=g[h]),g instanceof Array||(g=[g]),"Scatter"in m&&(g=m.Scatter);for(var w=0;w<g.length;w++)(g[w]||0===g[w])&&(f=g[w],y=0,g[w]instanceof Array&&(f=g[w][0],y=g[w][2]),v=l.semiLog?l.height*(1-(Math.log(Math.max(f,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-f)*l.multiplier,l.flipped?(i.s$9(1),v=i.v$j(v,u)):v+=c,v<c||v>u||(b=2,y&&(i.O_b(2),b=i.v$j(y,d)),i.s$9(1),s.moveTo(i.V9a(b,p),v),i.s$9(0),s.lineTo(i.V9a(p,b),v),n[S]=v))}return s.stroke(),s.closePath(),x={colors:[s.strokeStyle],cache:n},this.endClip(),s.lineWidth=1,x}},l=function(e){var t,i,a,r=V;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine.drawingTools={},t.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},annotation:{font:{style:null,size:null,weight:null,family:null}}},t.ChartEngine.registerDrawingTool=function(e,i){t.ChartEngine.drawingTools[e]=i},t.ChartEngine.prototype.setDrawingContainer=function(e){r.W3G(),this.drawingContainer=e},t.ChartEngine.prototype.exportDrawings=function(){var e;e=[],r.W3G();for(var t=0;t<this.drawingObjects.length;t++)e.push(this.drawingObjects[t].serialize());return e},t.ChartEngine.prototype.abortDrawings=function(e){var t,i;r.O_b(29),t=r.v$j("2",64);for(var a=1;-1260672070!==r.m6F(a.toString(),a.toString().length,80440);a++)1==e&&(e=!1),t+=2;-1243885496!==r.m6F(t.toString(),t.toString().length,63266)&&!1!==e&&(e=!0);for(var n=this.drawingObjects.length-1;n>=0;n--)(i=this.drawingObjects[n]).abort(!0),!e&&i.permanent||this.drawingObjects.splice(n,1)},t.ChartEngine.prototype.importDrawings=function(e){var i,a,n;if(t.Drawing){r.W3G();for(var s=0;s<e.length;s++)"fibonacci"==(i=e[s]).name&&(i.name="retracement"),(a=t.ChartEngine.drawingTools[i.name])||t.Drawing[i.name]&&(a=t.Drawing[i.name],t.ChartEngine.registerDrawingTool(i.name,a)),a&&((n=new a).reconstruct(this,i),this.drawingObjects.push(n))}},t.ChartEngine.prototype.clearDrawings=function(e,i){var a,n;!1!==i&&(i=!0),a=this.exportDrawings(),this.abortDrawings(i),e?this.undoStamps=[]:this.undoStamp(a,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),this.draw(),r.W3G(),(n=this.controls.mSticky)&&(n.style.display="none",n.children[0].innerHTML="")},t.ChartEngine.prototype.createDrawing=function(e,i){var a,r;if(t.Drawing){for(var n in(a=new t.Drawing[e]).reconstruct(this,i),(r=new t.Drawing[e]).stx=this,r.copyConfig(),r)a[n]=a[n]||r[n];return this.drawingObjects.push(a),this.draw(),a}},t.ChartEngine.prototype.removeDrawing=function(e){for(var t=0;t<this.drawingObjects.length;t++)if(this.drawingObjects[t]==e)return"v","ector",r.s$9(2),this.drawingObjects.splice(t,r.V9a(1,"1")),this.changeOccurred("vector"),void this.draw()},t.ChartEngine.prototype.undo=function(){this.runPrepend("undo",arguments)||(this.activeDrawing&&(this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),t.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair"),t.ChartEngine.drawingLine=!1),this.runAppend("undo",arguments))},t.ChartEngine.prototype.undoStamp=function(e,t){this.undoStamps.push(e),this.dispatch("undoStamp",{before:e,after:t,stx:this})},t.ChartEngine.prototype.undoLast=function(){r.W5N(),this.activeDrawing?this.undo():this.undoStamps.length&&(this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred("vector"),this.draw())},t.ChartEngine.prototype.addDrawing=function(e){var t;t=this.exportDrawings(),this.drawingObjects.push(e),this.undoStamp(t,this.exportDrawings())},t.ChartEngine.prototype.repositionDrawing=function(e,i){var a,n,s;a=this.panels[e.panelName],r.W3G(),n=this.adjustIfNecessary(a,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),a)),s=this.chart.tempCanvas,t.clearCanvas(s,this),i?(this.drawingSnapshot=this.exportDrawings(),e.render(s.context)):(e.reposition(s.context,e.repositioner,this.crosshairTick,n),this.drawingSnapshot&&this.undoStamp(t.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),e.measure&&e.measure()},t.ChartEngine.prototype.activateRepositioning=function(e){r.W3G(),this.repositioningDrawing=e,e&&(this.draw(),this.repositionDrawing(e,!0)),this.chart.tempCanvas.style.display=e?"block":"none"},t.ChartEngine.prototype.activateDrawing=function(e,i){var a,n;if(i||(i=this.currentPanel),!e)return"no","n","e",this.activeDrawing=null,this.chart.tempCanvas.style.display="none",s(this),!1;function s(e){var t;e.layout.studies&&(r.W3G(),(t=e.layout.studies[i.name])&&!t.overlay&&delete e.overlays[t.name])}a=2,r.W3G();for(var o=1;-823830164!==r.m6F(o.toString(),o.toString().length,98162);o++)n=t.ChartEngine.drawingTools[e],a+=2;return-113927890!==r.l5h(a.toString(),a.toString().length,43136)&&(n=t.ChartEngine.drawingTools[e]),n||t.Drawing[e]&&(n=t.Drawing[e],t.ChartEngine.registerDrawingTool(e,n)),n&&(this.activeDrawing=new n,this.activeDrawing.construct(this,i),!this.charts[i.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,s(this),!1):(this.chart.tempCanvas.style.display="block",this.controls.drawOk&&(this.controls.drawOk.style.display="none"),s(this),!0)},t.ChartEngine.prototype.drawingClick=function(e,i,a){var r,n,s;if(t.Drawing&&e&&""===this.openDialog&&(this.activeDrawing||this.activateDrawing(this.currentVectorParameters.vectorType,e)))return!!this.activeDrawing&&(this.userPointerDown&&!this.activeDrawing.dragToDraw?void(t.ChartEngine.drawingLine||this.activateDrawing(null)):(r=this.tickFromPixel(i,e.chart),n=this.panels[this.activeDrawing.panelName],s=this.adjustIfNecessary(n,r,this.valueFromPixel(a,n)),this.magnetizedPrice&&(s=this.adjustIfNecessary(n,r,this.magnetizedPrice)),this.activeDrawing.click(this.chart.tempCanvas.context,r,s)?this.activeDrawing&&("s","tx_crosshair","st","x_crosshair_drawing","ve","ct","o","r",t.ChartEngine.drawingLine=!1,t.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair")):("stx_cross","ha","ir_draw","ing","stx_","crosshair",this.changeOccurred("drawing"),t.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair","stx_crosshair_drawing"),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")),!0))},t.ChartEngine.prototype.rightClickDrawing=function(e,t){var i,a;i="rightCli",i+="ck",i+="Drawing",this.runPrepend(i,arguments)||e.permanent||(this.callbackListeners.drawingEdit.length?this.dispatch("drawingEdit",{stx:this,drawing:e,forceEdit:t}):(e.abort()||(a=this.exportDrawings(),this.removeDrawing(e),this.undoStamp(a,this.exportDrawings())),this.changeOccurred("vector")),this.runAppend("rightClickDrawing",arguments))},t.ChartEngine.prototype.magnetize=function(){var e,i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T;if(e="stx-dragg",e+="a",e+="b",e+="le",i="#",i+="398dff",a="C",a+="l",a+="o",a+="se",n="L",n+="o",n+="w",s="ca",s+="ll",s+="ou",s+="t",o="f",o+="ree",o+="f",o+="orm",this.magnetizedPrice=null,this.preferences.magnet&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(l=this.currentVectorParameters.vectorType)&&"projection"!=l&&l!=o&&("annotation"!=l&&l!=s||!t.ChartEngine.drawingLine)&&(c=(h=this.currentPanel).chart,!((u=this.crosshairTick)>c.dataSet.length)&&(d=c.dataSet[u]))){(p=c.transformFunc&&h.yAxis===c.yAxis)&&d.transform&&(d=d.transform),g=this.getRenderedItems(),f=["Open","High",n,a],this.magneticHold&&this.activeDrawing&&this.activeDrawing.penDown?(y="Hi",y+="gh",g=-1!=f.indexOf(this.magneticHold)&&-1!=g.indexOf(y)?f:[this.magneticHold]):this.magneticHold=null,v=1e9,b=parseFloat(this.preferences.magnet);for(var M=0;M<g.length;M++)if(x=d[g[M]],C=this.getYAxisByField(h,g[M]),(S=t.existsInObjectChain(d,g[M]))&&(x=S.obj[S.member]),(x||0===x)&&(w=this.pixelFromTransformedValue(x,h,C),Math.abs(this.cy-w)<v)){if(v=Math.abs(this.cy-w),b&&b<=v)continue;this.magnetizedPrice=p?this.valueFromPixel(w,h):x,m=w,this.magneticHold=g[M]}k=this.pixelFromTick(u,c),D=m,t.clearCanvas(c.tempCanvas,this),(A=c.tempCanvas.context).beginPath(),A.lineWidth=1,r.s$9(32);var _=r.V9a(30,17,40,90,8);r.O_b(33);var F=r.v$j(13,1,11);T=Math.max(this.layout.candleWidth,_)/F,A.arc(k,D,Math.min(T,8),0,2*Math.PI,!1),A.fillStyle="#398dff",A.strokeStyle=i,A.fill(),A.stroke(),A.closePath(),c.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove(e),this.activeDrawing&&this.activeDrawing.move(A,this.crosshairTick,this.magnetizedPrice),this.runAppend("magnetize",arguments)}},t.ChartEngine.prototype.changeVectorType=function(e){this.currentVectorParameters.vectorType=e,t.Drawing&&t.Drawing.initializeSettings(this,e),t.ChartEngine.drawingLine&&this.undo(),this.insideChart&&this.doDisplayCrosshairs()},t.ChartEngine.prototype.changeVectorParameter=function(e,t){var i;if("fon","tSize","t","r","u","e","ax","isLa","bel","axisLabel"==e)t="true"===t.toString()||Number(t);else if("lineWidth"==e)t=Number(t);else if("fontSize"==e){r.s$9(23);var a=r.v$j(11,1);t=parseInt(t,a)+"px"}return(void 0!==(i=this.currentVectorParameters)[e]||"font"==e.substr(0,4)&&("defau","lt","fa","mily","family"==(e=e.substr(4).toLowerCase())&&"default"==t.toLowerCase()&&(t=null),void 0!==(i=i.annotation.font)[e]))&&(i[e]=t,!0)},t.ChartEngine.prototype.drawVectors=function(){var e,t,i,a,n;if(!this.vectorsShowing&&!this.runPrepend("drawVectors",arguments)){if(this.vectorsShowing=!0,!this.chart.hideDrawings&&!this.highlightedDraggable){for(e={},i=0;i<this.drawingObjects.length;i++)(a=this.drawingObjects[i]).hidden||this.repositioningDrawing!==a&&(t=a.panelName,this.panels[a.panelName]&&!this.panels[a.panelName].hidden&&(e[t]||(e[t]=[]),e[t].push(a)));for(t in e){for(this.startClip(t),n=e[t],i=0;i<n.length;i++)n[i].render(this.chart.context);this.endClip()}}r.W3G(),this.runAppend("drawVectors",arguments)}},t.ChartEngine.prototype.adjustDrawings=function(){for(var e,t=0;t<this.drawingObjects.length;t++)e=this.drawingObjects[t],this.panels[e.panelName]&&e.adjust()},t.Drawing=t.Drawing||function(){this.chartsOnly=!1,this.penDown=!1,r.W5N()},t.Drawing.getDrawingParameters=function(e,i){var a,n,s,o;r.W5N();try{a=new t.Drawing[i]}catch(e){}if(!a)return null;a.stx=e,a.copyConfig(!0),n={},s=a.configs;for(var l=0;l<s.length;l++)n[s[l]]=a[s[l]];return(o=e.canvasStyle("stx_annotation"))&&n.font&&(n.font.size=o.fontSize,n.font.family=o.fontFamily,n.font.style=o.fontStyle,n.font.weight=o.fontWeight),n},t.Drawing.saveConfig=function(e,i){var a,n;i&&((a=e.preferences).drawings||(a.drawings={}),a.drawings[i]={},(n=new t.Drawing[i]).stx=e,t.Drawing.copyConfig(n),n.configs.forEach((function(e){r.W3G(),a.drawings[i][e]=n[e]})),e.changeOccurred("preferences"))},t.Drawing.restoreDefaultConfig=function(e,i,a){var n;a?e.preferences.drawings=null:e.preferences.drawings[i]=null,e.changeOccurred("preferences"),r.W5N(),n=2;for(var s=1;-935116489!==r.m6F(s.toString(),s.toString().length,27367);s++)e.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),e.currentVectorParameters.vectorType=i,n+=2;-137411935!==r.m6F(n.toString(),n.toString().length,73385)&&(e.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),e.currentVectorParameters.vectorType=i)},t.Drawing.initializeSettings=function(e,i){var a,r;(a=t.Drawing[i])&&(r=new a).initializeSettings&&r.initializeSettings(e)},t.Drawing.updateSource=function(e,t,i,a){var r,n;if(t){for(var s in r=!1,e.drawingObjects)(n=e.drawingObjects[s]).field&&(i?n.field==t?(n.field=i,r=!0):n.field.indexOf(t)>-1&&-1==n.field.indexOf(t+"-")&&(n.field=n.field.replace(t,i),r=!0):n.field.split("--\x3e")[0]!=t&&n.panelName!=t||(n.panelName=a,r=!0));r&&e.changeOccurred("vector")}},t.Drawing.prototype.copyConfig=function(e){r.W5N(),t.Drawing.copyConfig(this,e)},t.Drawing.copyConfig=function(e,i){var a,r,n,s,o;for(a=e.stx.currentVectorParameters,r=e.configs,n=0;n<r.length;n++)"f","o","n","t","color"==(s=r[n])?e.color=a.currentColor:"parameters"==s?e.parameters=t.clone(a.fibonacci):"font"==s?e.font=t.clone(a.annotation.font):e[s]=a[s];if(i&&(o=e.stx.preferences)&&o.drawings)for(t.extend(e,o.drawings[a.vectorType]),n=0;n<r.length;n++)"f","o","n","t","p","arameters","color"==(s=r[n])?a.currentColor=e.color:"parameters"==s?a.fibonacci=t.clone(e.parameters):"font"==s?a.annotation.font=t.clone(e.font):a[s]=e[s]},t.Drawing.prototype.dragToDraw=!1,t.Drawing.prototype.permanent=!1,t.Drawing.prototype.chartsOnly=!1,t.Drawing.prototype.abort=function(e){},t.Drawing.prototype.measure=function(){},t.Drawing.prototype.construct=function(e,t){this.stx=e,this.panelName=t.name},t.Drawing.prototype.render=function(e){console.warn("must implement render function!")},t.Drawing.prototype.click=function(e,t,i){console.warn("must implement click function!")},t.Drawing.prototype.move=function(e,t,i){console.warn("must implement move function!")},t.Drawing.prototype.reposition=function(e,t,i,a){},t.Drawing.prototype.intersected=function(e,t,i){console.warn("must implement intersected function!")},t.Drawing.prototype.reconstruct=function(e,t){console.warn("must implement reconstruct function!")},t.Drawing.prototype.serialize=function(){console.warn("must implement serialize function!")},t.Drawing.prototype.adjust=function(){console.warn("must implement adjust function!")},t.Drawing.prototype.highlight=function(e){return(e&&!this.highlighted||!e&&this.highlighted)&&(this.highlighted=e),this.highlighted},t.Drawing.prototype.littleCircleRadius=function(){return 6,6},t.Drawing.prototype.littleCircle=function(e,i,a,n){var s,o;this.permanent||(s=this.stx.defaultColor,o=t.chooseForegroundColor(s),e.beginPath(),r.s$9(1),e.lineWidth=r.v$j(0,"1"),e.arc(i,a,this.littleCircleRadius(),0,2*Math.PI,!1),e.fillStyle=n?s:o,e.strokeStyle=s,e.setLineDash([]),e.fill(),e.stroke(),e.closePath())},t.Drawing.prototype.rotator=function(e,t,i,a){var n,s,o;this.permanent||(n=this.littleCircleRadius(),s=this.stx.defaultColor,e.beginPath(),e.lineWidth=2,a||(e.globalAlpha=.5),r.s$9(34),o=r.v$j(n,"4",64),e.arc(t,i,o,0,3*Math.PI/2,!1),r.s$9(35),e.moveTo(r.V9a(2,o,t),r.v$j(i,2,r.s$9(0))),r.s$9(0),e.lineTo(r.V9a(t,o),i),r.O_b(33),e.lineTo(r.V9a(t,o,2),r.V9a(i,2,r.O_b(0))),r.O_b(36),e.moveTo(r.v$j("2",t),r.v$j(2,i,o,r.O_b(16))),r.O_b(1),e.lineTo(t,r.V9a(o,i)),r.s$9(1),r.W3G(),e.lineTo(r.v$j(2,t),r.v$j(2,o,i,r.s$9(37))),e.strokeStyle=s,e.stroke(),e.closePath(),r.O_b(29),e.globalAlpha=r.v$j("1",32))},t.Drawing.prototype.mover=function(e,t,i,a){var n,s,o;if(!this.permanent){n=this.littleCircleRadius(),s=this.stx.defaultColor,5,r.s$9(0),o=r.v$j(n,1),e.save(),r.O_b(29),e.lineWidth=r.V9a("2",32),e.strokeStyle=s,e.translate(t,i),a||(e.globalAlpha=.5);for(var l=0;l<4;l++)e.rotate(Math.PI/2),e.beginPath(),e.moveTo(0,o),r.O_b(0),e.lineTo(0,r.V9a(o,5)),r.s$9(16),e.moveTo(-2,r.V9a(5,o,2)),r.O_b(0),e.lineTo(0,r.v$j(o,5)),r.s$9(16),e.lineTo(2,r.V9a(5,o,2)),e.closePath(),e.stroke();r.s$9(29),e.globalAlpha=r.v$j("1",32),e.restore()}},t.Drawing.prototype.resizer=function(e,t,i,a){var n,s,o,l;if(!this.permanent){r.W5N(),n=this.littleCircleRadius(),s=this.stx.defaultColor,r.s$9(38);var h=r.V9a(20,7,18,18,10);o=5*Math.sqrt(h),r.s$9(6),l=r.v$j(n,"1"),e.save(),e.lineWidth=2,e.strokeStyle=s,e.translate(t,i),e.rotate(-t*i/Math.abs(t*i)*Math.PI/4),a||(e.globalAlpha=.5);for(var c=0;c<2;c++)e.rotate(Math.PI),e.beginPath(),e.moveTo(0,l),r.O_b(0),e.lineTo(0,r.v$j(l,o)),r.O_b(16),e.moveTo(-2,r.V9a(o,l,2)),r.s$9(39),e.lineTo(r.V9a("0",0),r.v$j(l,o,r.s$9(0))),r.s$9(40),e.lineTo(2,r.V9a(o,l,"2",0)),e.closePath(),e.stroke();e.globalAlpha=1,e.restore()}},t.Drawing.prototype.pointIntersection=function(e,t,i,a){if(!this.stx.panels[this.panelName])return!1;if(a){if(e>=i.cx0&&e<=i.cx1&&t>=i.cy0&&t<=i.cy1)return!0}else if(e>=i.x0&&e<=i.x1&&t>=Math.min(i.y0,i.y1)&&t<=Math.max(i.y0,i.y1))return!0;return!1},t.Drawing.prototype.setPoint=function(e,i,a,n){var s,o,l,h,c;s=null,o=null,r.W5N(),"number"==j(i)?s=i:i.length>=8?o=i:s=Number(i),(a||0===a)&&(r.O_b(0),this[r.V9a("v",e)]=a),null!==s?("t","zo",l=this.stx.dateFromTick(s,n,!0),r.O_b(0),this[r.V9a("tzo",e)]=l.getTimezoneOffset(),r.O_b(0),this[r.V9a("d",e)]=t.yyyymmddhhmmssmmm(l),r.O_b(0),this[r.V9a("p",e)]=[s,a]):null!==o&&(l=t.strToDateTime(o),this["tzo"+e]||0===this["tzo"+e]||(r.O_b(0),this[r.V9a("tzo",e)]=l.getTimezoneOffset()),r.s$9(0),this[r.V9a("d",e)]=o,h=this["tzo"+e]-l.getTimezoneOffset(),l.setMinutes(l.getMinutes()+h),c=!1,"freeform"==this.name||t.ChartEngine.isDailyInterval(this.stx.layout.interval)||l.getHours()||l.getMinutes()||l.getSeconds()||l.getMilliseconds()||(c=!0),r.O_b(0),this[r.V9a("p",e)]=[this.stx.tickFromDate(t.yyyymmddhhmmssmmm(l),n,null,c),a])},t.Drawing.prototype.getLineColor=function(e){var i,a,n,s,o,l,h,c,u;if(r.W3G(),"a","u","t","o","a","u","t","o",e||(e=this.color),i=this.stx,a=e,this.highlighted)a=i.getCanvasColor("stx_highlight_vector");else if(t.isTransparent(a))a=i.defaultColor;else if("auto"==a&&(a=i.defaultColor,this.field)){for(n in i.layout.studies)if(o=(s=i.layout.studies[n]).outputs[s.outputMap[this.field]]){a=o.color||o;break}for(n in i.chart.seriesRenderers){h=i.chart.seriesRenderers[n];for(var d=0;d<h.seriesParams.length;d++){if("-","-",">",(u=(c=h.seriesParams[d]).field)||h.highLowBars||(u=this.defaultPlotField||"Close"),c.symbol&&c.subField&&(u+="--\x3e"+c.subField),this.field==u){a=c.color;break}c.field&&c.field==this.field.split("--\x3e")[0]&&(l=c.color)}}l&&(a=l)}return"auto"==a&&(a=i.defaultColor),a},t.Drawing.BaseTwoPoint=function(){r.W5N(),this.p0=null,this.p1=null,this.color=""},t.inheritsFrom(t.Drawing.BaseTwoPoint,t.Drawing),t.Drawing.BaseTwoPoint.prototype.configs=[],t.Drawing.BaseTwoPoint.prototype.lineIntersection=function(e,i,a,n,s,o,l){var h,c,u;return r.W3G(),s||(s=this.p0),o||(o=this.p1),h=this.stx,!(!s||!o)&&(void 0!==(c=t.convertBoxToPixels(h,this.panelName,a)).x0&&(u={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},l||(u=t.convertBoxToPixels(h,this.panelName,u)),t.boxIntersects(c.x0,c.y0,c.x1,c.y1,u.x0,u.y0,u.x1,u.y1,n)))},t.Drawing.BaseTwoPoint.prototype.boxIntersection=function(e,t,i){return r.W3G(),!(!this.p0||!this.p1)&&(!(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))&&!(i.y1>Math.max(this.p0[1],this.p1[1])||i.y0<Math.min(this.p0[1],this.p1[1])))},t.Drawing.BaseTwoPoint.prototype.accidentalClick=function(e,t){var i,a,n,s,o,l,h;if(i=this.stx.panels[this.panelName],a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(e,i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,e,t),r.s$9(1),l=Math.abs(r.v$j(a,n)),r.s$9(1),h=Math.abs(r.V9a(s,o)),r.O_b(41),Math.sqrt(r.v$j(h,l,h,l))<10)return this.penDown=!1,this.dragToDraw&&this.stx.undo(),!0},t.Drawing.BaseTwoPoint.prototype.click=function(e,t,i){var a,n,s;if(this.copyConfig(),a=this.stx.panels[this.panelName],!this.penDown)return this.setPoint(0,t,i,a.chart),this.penDown=!0,!1;if(r.W5N(),this.accidentalClick(t,i))return this.dragToDraw;this.setPoint(1,t,i,a.chart),this.penDown=!1,r.s$9(42),n=-r.V9a("57670071",35),s=2;for(var o=1;-1085514531!==r.m6F(o.toString(),o.toString().length,93560);o++)return!0;return r.m6F(s.toString(),s.toString().length,14266)===n&&void 0},t.Drawing.BaseTwoPoint.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart))},t.Drawing.BaseTwoPoint.prototype.move=function(e,t,i){var a;if(this.penDown){1115619788,-1774743925,a=2;for(var n=1;1115619788!==r.l5h(n.toString(),n.toString().length,14235);n++)this.copyConfig(),a+=2;-1774743925!==r.l5h(a.toString(),a.toString().length,5357)&&this.copyConfig(),this.p1=[t,i],this.render(e)}},t.Drawing.BaseTwoPoint.prototype.measure=function(){var e,i,a;this.p0&&this.p1&&(this.stx.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0,this.name),(i=(e=this.stx.controls.mSticky)&&e.querySelector(".mStickyInterior"))&&("<","br>",(a=[]).push(t.capitalize(this.name)),this.getYValue&&a.push(this.field||this.stx.defaultPlotField||"Close"),a.push(i.innerHTML),i.innerHTML=a.join("<br>")))},t.Drawing.BaseTwoPoint.prototype.reposition=function(e,t,i,a){var n,s,o;t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-a,"move"==t.action?(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),r.s$9(2),this.setPoint(r.V9a(1,"1"),t.p1[0]-s,t.p1[1]-o,n.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),this.render(e)))},t.Drawing.BaseTwoPoint.prototype.drawDropZone=function(e,t,i,a,n){var s,o,l,h,c;(s=this.stx.panels[this.panelName])&&(o=s.left,l=s.width,(a||0===a)&&(o=this.stx.pixelFromTick(a,s.chart)),(n||0===n)&&(l=this.stx.pixelFromTick(n,s.chart)),h=this.stx.pixelFromPrice(t,s),c=this.stx.pixelFromPrice(i,s),e.fillStyle="#008000",e.globalAlpha=.2,r.O_b(1),e.fillRect(o,h,r.v$j(o,l),r.V9a(h,c)),e.globalAlpha=1)},t.Drawing.annotation=function(){this.name="annotation",this.arr=[],this.w=0,this.h=0,this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={}},t.inheritsFrom(t.Drawing.annotation,t.Drawing.BaseTwoPoint),t.Drawing.annotation.prototype.getFontString=function(){var e,t;for(var i in r.W3G(),"12","p","x",this.fontDef={style:null,weight:null,size:"12px",family:null},(e=this.stx.canvasStyle("stx_annotation"))&&(e.fontStyle&&(this.fontDef.style=e.fontStyle),e.fontWeight&&(this.fontDef.weight=e.fontWeight),e.fontSize&&(this.fontDef.size=e.fontSize),e.fontFamily&&(this.fontDef.family=e.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",t=!0,this.fontDef)this.fontDef[i]&&(t?t=!1:this.fontString+=" ",this.fontString+=this.fontDef[i])},t.Drawing.annotation.prototype.configs=["color","font"],t.Drawing.annotation.prototype.measure=function(){},t.Drawing.annotation.prototype.render=function(e){var t,i,a,n,s,o,l,h,c,u,d,p,m;if(!this.ta&&(t=this.stx.panels[this.panelName])){i=this.stx.pixelFromTick(this.p0[0],t.chart),a=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),e.font=this.fontString,e.textBaseline="middle",n=i,s=a,o=this.w,l=this.h,h=this.getLineColor(),this.stem&&(this.stem.d?(c=this.stx.pixelFromTick(this.stem.t),d=this.stx.pixelFromValueAdjusted(t,this.stem.t,this.stem.v),r.O_b(43),u=r.v$j(n,2,o),r.s$9(43),p=r.v$j(s,2,l)):this.stem.x&&(c=n,d=s,n+=this.stem.x,s+=this.stem.y,r.s$9(43),u=r.V9a(n,2,o),r.O_b(43),p=r.V9a(s,2,l)),e.beginPath(),this.borderColor?e.strokeStyle=this.borderColor:e.strokeStyle=h,e.moveTo(c,d),e.lineTo(u,p),e.stroke()),m=e.lineWidth,this.highlighted?("stx_a","nnotation_highlight_bg",this.stx.canvasColor("stx_annotation_highlight_bg",e),r.O_b(1),e.fillRect(r.v$j(m,n),r.V9a(l,2,m,s,r.O_b(44)),r.v$j(m,"2",o,0,r.s$9(45)),r.V9a(2,l,m,r.O_b(46)))):this.fillColor?(e.fillStyle=this.fillColor,r.s$9(47),e.fillRect(n,r.v$j(l,s,2),o,l)):this.stem&&(e.fillStyle=this.stx.containerColor,r.s$9(47),e.fillRect(n,r.V9a(l,s,2),o,l)),this.borderColor&&(e.beginPath(),e.strokeStyle=this.highlighted?this.stx.getCanvasColor("stx_highlight_vector"):this.borderColor,r.s$9(1),e.rect(r.v$j(m,n),r.V9a(l,2,m,s,r.s$9(44)),r.v$j(2,o,m,r.s$9(46)),r.v$j(2,l,m,r.s$9(46))),e.stroke()),this.highlighted?this.stx.canvasColor("stx_annotation_highlight",e):e.fillStyle=h,r.s$9(0);var g=r.V9a(1,1);if(s+=this.padding/g,!this.ta)for(var f=0;f<this.arr.length;f++){e.fillText(this.arr[f],n+this.padding,s-l/2+this.fontSize/2),r.O_b(48);var y=r.V9a(13,28,10,3,14);s+=this.fontSize+y}e.textBaseline="alphabetic"}},t.Drawing.annotation.prototype.onChange=function(e){},t.Drawing.annotation.prototype.edit=function(e,i){var a,n,s,o,l,h,c,u,d,p,m,g;if("p","x","p","x","ann","otat","i","on",(a=this.stx.panels[this.panelName])&&(n=this.stx.controls.annotationSave,s=this.stx.controls.annotationCancel,n&&s)){var f,y,v;if(o=this.stx,l=this.ta,o.editingAnnotation=!0,o.undisplayCrosshairs(),o.openDialog="annotation",l||("plac","ehol","der",(l=this.ta=document.createElement("TEXTAREA")).className="stx_annotation",l.onkeyup=C(this),l.onmouseup=(f=o,function(e){f.manageTouchAndMouse&&t.ChartEngine.drawingLine&&f.mouseup(e)}),l.setAttribute("wrap","hard"),t.isIOS7or8&&l.setAttribute("placeholder","Enter Text"),o.chart.container.appendChild(l),l.style.position="absolute",l.style.width="100px",l.style.height="20px",l.value=this.text,t.touchDevice&&(l.ontouchstart=function(e){e.stopPropagation()})),h=this,l.oninput=function(e){"historyUndo"!=e.inputType&&"historyRedo"!=e.inputType&&h.onChange(e)},l.style.font=this.fontString,this.color&&("transparent"==this.color||"auto"==this.color?(c=getComputedStyle(l))&&t.isTransparent(c.backgroundColor)?l.style.color=o.defaultColor:l.style.color="#000":l.style.color=this.color),u=o.pixelFromTick(this.p0[0],a.chart),d=o.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),l.style.left=u+140<o.chart.canvasRight?u+"px":o.chart.canvasRight-200+"px",l.style.top=d+60<o.chart.canvasHeight?d-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px":d-60+"px","callout"==this.name){r.s$9(53);var b=r.V9a(10,10,7,10);l.style.left=t.stripPX(l.style.left)-(isNaN(this.w)?this.defaultWidth:this.w/b)+"px"}if(t.safeClickTouch(n,(y=this,r.W5N(),function(e){var i;""!==y.ta.value&&(y.text=y.ta.value,(i=y.stx).editingAnnotation=!1,y.adjust(),i.drawingSnapshot?i.undoStamp(t.shallowClone(i.drawingSnapshot),i.exportDrawings()):i.addDrawing(y),i.undo(),i.cancelTouchSingleClick=!0,i.changeOccurred("vector"))})),t.safeClickTouch(s,(v=this,function(e){var t;(t=v.stx).editingAnnotation=!1,t.undo(),t.cancelTouchSingleClick=!0})),C(this)(),n.style.display="inline-block",s.style.display="inline-block",i&&(o.drawingSnapshot=o.exportDrawings(),this.hidden=!0,o.draw(),o.activeDrawing=this,t.ChartEngine.drawingLine=!0,e=o.chart.tempCanvas.context,o.chart.tempCanvas.style.display="block",this.w=l.clientWidth,this.h=l.clientHeight,t.clearCanvas(e.canvas,o),this.render(e),this.edit(e)),l.focus(),t.isAndroid&&!t.is_chrome&&!t.isFF){this.priorBottom=o.chart.container.style.bottom,400,r.s$9(28);var x=r.v$j(1500,12,24092,16);(p=o.resolveY(d)+x)>t.pageHeight()-400&&(m=t.pageHeight()-p,r.O_b(1),g=r.V9a(m,400),r.O_b(0),o.chart.container.style.bottom=r.v$j(g,"px"))}}function C(e){return function(i){var a,o,l,h,c,u,d,p;if("p","x",i)switch(i.keyCode){case 27:return void e.stx.undo()}a=e.stx,l=(o=e.ta).value.split("\n"),h=0,a.chart.context.font=e.fontString;for(var m=0;m<l.length;m++)(c=a.chart.context.measureText(l[m]).width)>h&&(h=c);r.O_b(49),r.W3G();var g=r.V9a(3,15,0,5);r.s$9(50);var f=r.v$j(20,0,16,1);u=(l.length+g)*(e.fontSize+f),h<50&&(h=50),r.s$9(35),o.style.width=r.v$j(30,"px",h),r.O_b(0),o.style.height=r.V9a(u,"px"),d=parseInt(t.stripPX(o.style.top),10),p=t.stripPX(o.style.left),h=o.clientWidth,u=o.clientHeight,p+h+100<e.stx.chart.canvasWidth?("p","x",r.s$9(0),n.style.top=r.V9a(d,"px"),r.s$9(0),s.style.top=r.v$j(d,"px"),r.O_b(51),n.style.left=r.v$j("px",10,p,h),r.s$9(52),s.style.left=r.v$j("px","60",h,p)):d+u+30<e.stx.chart.canvasHeight?("p","x",r.s$9(51),n.style.top=r.v$j("px",10,d,u),r.O_b(51),s.style.top=r.v$j("px",10,d,u),r.O_b(0),n.style.left=r.V9a(p,"px"),r.s$9(35),s.style.left=r.V9a(50,"px",p)):("p","x",r.O_b(33),n.style.top=r.v$j(d,"px",35),r.O_b(33),s.style.top=r.v$j(d,"px",35),r.s$9(0),n.style.left=r.V9a(p,"px"),r.O_b(35),s.style.left=r.v$j(50,"px",p))}}},t.Drawing.annotation.prototype.click=function(e,t,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,t,i,a.chart),this.adjust(),this.edit(e),!1},t.Drawing.annotation.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e))},t.Drawing.annotation.prototype.intersected=function(e,i,a){var n,s,o,l,h,c,u;if(n=this.stx.panels[this.panelName],!this.p0)return null;s=this.stx.pixelFromTick(this.p0[0],n.chart),r.s$9(54);var d=r.V9a(9,6,1,14);return o=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[1])-this.h/("2"*d),l=s+this.w,h=o+this.h,r.W3G(),this.stem&&this.stem.x&&(s+=this.stem.x,l+=this.stem.x,o+=this.stem.y,h+=this.stem.y),c=this.stx.pixelFromTick(e,n.chart),u=this.stx.pixelFromValueAdjusted(n,e,i),c+a.r>=s&&c-a.r<=l&&u+a.r>=o&&u-a.r<=h&&(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:i})},t.Drawing.annotation.prototype.abort=function(){var e,i;e=this.stx.controls.annotationSave,i=this.stx.controls.annotationCancel,e&&(e.style.display="none"),r.W3G(),i&&(i.style.display="none"),this.ta&&this.stx.chart.container.removeChild(this.ta),this.ta=null,this.stx.openDialog="",this.stx.showCrosshairs(),this.stx.editingAnnotation=!1,t.clearCanvas(this.stx.chart.tempCanvas,this.stx),!t.isAndroid||t.is_chrome||t.isFF||(this.stx.chart.container.style.bottom=this.priorBottom),t.fixScreen()},t.Drawing.annotation.prototype.reconstruct=function(e,i){this.stx=e,this.color=i.col,this.panelName=i.pnl,this.d0=i.d0,this.tzo0=i.tzo0,this.v0=i.v0,this.text=e.escapeOnSerialize?decodeURIComponent(i.text):i.text,this.stem=i.stem,this.borderColor=i.bc,this.fillColor=i.bg,r.W3G(),this.lineWidth=i.lw,this.pattern=i.ptrn,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},t.Drawing.annotation.prototype.serialize=function(){var e,i;return e={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},this.font&&("s","z",i=t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"})),t.isEmpty(i)||(e.fnt=i)),this.stem&&(e.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(e.bc=this.borderColor),this.fillColor&&(e.bg=this.fillColor),this.lineWidth&&(e.lw=this.lineWidth),this.pattern&&(e.ptrn=this.pattern),e},t.Drawing.annotation.prototype.renderText=function(){var e,i,a,n,s,o;if(this.getFontString(),e=this.stx.panels[this.panelName]){this.arr=this.text.split("\n"),i=0,this.stx.chart.context.font=this.fontString;for(var l=0;l<this.arr.length;l++)(a=this.stx.chart.context.measureText(this.arr[l]).width)>i&&(i=a);if(0===i)r.s$9(17),i=r.v$j(2,3,13,1,11)*this.defaultWidth;this.fontSize=t.stripPX(this.fontDef.size),n=this.arr.length*(this.fontSize+2),t.touchDevice&&(n+=5),r.O_b(23);var h=r.v$j(11,9);this.w=i+this.padding*h,r.s$9(0);var c=r.V9a(0,2);this.h=n+this.padding*c,s=this.stx.pixelFromTick(this.p0[0],e.chart)+i,r.O_b(55);var u=r.V9a(19,0,5,1,95);o=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[u])+n,this.p1=[this.stx.tickFromPixel(s,e.chart),this.stx.valueFromPixel(o,e)],this.stem&&this.stem.d&&(this.stem.t=this.stx.tickFromDate(this.stem.d,e.chart))}},t.Drawing.annotation.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),r.W5N(),this.renderText())},t.Drawing.segment=function(){r.W3G(),this.name="segment"},t.inheritsFrom(t.Drawing.segment,t.Drawing.BaseTwoPoint),t.Drawing.segment.prototype.render=function(e){var a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b;if("n","o","ne",a=this.stx.panels[this.panelName]){if(n=this.stx.pixelFromTick(this.p0[0],a.chart),s=this.stx.pixelFromTick(this.p1[0],a.chart),o=this.stx.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),r.W5N(),l=this.stx.pixelFromValueAdjusted(a,this.p1[0],this.p1[1]),h=this.lineWidth,c=this.getLineColor(),"none"==(u={pattern:this.pattern,lineWidth:h}).pattern&&(u.pattern="solid"),this.stx.plotLine(n,s,o,l,c,this.name,e,a,u),this.axisLabel&&!this.repositioner)if("v","e","rt","ical","hor","izo","n","tal","horizontal"==this.name)this.stx.endClip(),d=this.p0[1],a.chart.transformFunc&&(d=a.chart.transformFunc(this.stx,a.chart,d)),d=a.yAxis.priceFormatter?a.yAxis.priceFormatter(this.stx,a,d):this.stx.formatYAxisPrice(d,a),this.stx.createYAxisLabel(a,d,o,c),this.stx.startClip(a.name);else if("vertical"==this.name&&this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw){if(p=this.stx.dateFromTick(this.p0[0],a.chart,!0),t.ChartEngine.isDailyInterval(this.stx.layout.interval))r.s$9(1),p.setHours(0,0,r.v$j(0,"0"),r.V9a("0",0,r.s$9(39)));else{r.O_b(56);var x=r.v$j(995,1022,15,8,995);g=p.getSeconds()*x+p.getMilliseconds(),i.Date&&this.stx.displayZone&&(m=new i.Date(p.getTime(),this.stx.displayZone),p=new Date(m.getFullYear(),m.getMonth(),m.getDate(),m.getHours(),m.getMinutes()),p=new Date(p.getTime()+g))}if(f=t.mmddhhmm(t.yyyymmddhhmm(p)),a.chart.xAxis.formatter)f=a.chart.xAxis.formatter(p,this.name,null,null,f);else if(this.stx.internationalizer){if(0!==p.getHours()||0!==p.getMinutes()){y=this.stx.internationalizer.monthDay.format(p),r.O_b(0);var C=r.v$j(6042,18);r.s$9(57);r.V9a(752574,6872,9,10,11);r.O_b(16);var S=r.V9a(20,6653,31);r.s$9(58);r.V9a(225,15,111,1);r.O_b(1);r.v$j(20,5390);r.s$9(1);var w=r.V9a(117344,124678);r.O_b(0);var k=r.v$j(4733,13);r.O_b(21);r.V9a(19,441,3969);r.O_b(0);var D=r.V9a(1450,7252);y+=(C!==S?" ":979.47<=w?447.84!==k?8576:393.32:D)+this.stx.internationalizer.hourMinute.format(p)}else y=this.stx.internationalizer.yearMonthDay.format(p);f=y}this.stx.endClip(),this.stx.createXAxisLabel({panel:a,txt:f,x:n,backgroundColor:c,color:null,pointed:!0,padding:2}),this.stx.startClip(a.name)}this.highlighted&&"horizontal"!=this.name&&"vertical"!=this.name&&(v="p0"==this.highlighted,b="p1"==this.highlighted,this.littleCircle(e,n,o,v),this.littleCircle(e,s,l,b))}},t.Drawing.segment.prototype.abort=function(){r.W5N(),this.stx.setMeasure(null,null,null,null,!1)},t.Drawing.segment.prototype.intersected=function(e,i,a){var n,s;if("vert","ical","h","orizo","ntal",!this.p0||!this.p1)return null;if("horizontal"!=(n=this.name)&&"vertical"!=n&&"gartley"!=n)for(var o in s={0:this.p0,1:this.p1})if(this.pointIntersection(s[o][0],s[o][1],a))return r.s$9(0),this.highlighted=r.v$j("p",o),{action:"drag",point:"p"+o};return"horizontal"!=n&&"vertical"!=n||(n="line"),r.W5N(),this.lineIntersection(e,i,a,n)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},t.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],t.Drawing.segment.prototype.copyConfig=function(e){r.W3G(),t.Drawing.copyConfig(this,e),"none"==this.pattern&&-1==this.configs.indexOf("fillColor")&&(this.pattern="solid")},t.Drawing.segment.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,r.W5N(),this.v1=t.v1,this.adjust()},t.Drawing.segment.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.line=function(){this.name="line"},t.inheritsFrom(t.Drawing.line,t.Drawing.segment),t.Drawing.line.prototype.dragToDraw=!1,r.W5N(),t.Drawing.line.prototype.calculateOuterSet=function(e){var i,a,n;if(this.p0[0]!=this.p1[0]&&this.p0[1]!=this.p1[1]&&!t.ChartEngine.isDailyInterval(this.stx.layout.interval)){(i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]}).x0>i.x1&&(i={x0:this.p1[0],y0:this.p1[1],x1:this.p0[0],y1:this.p0[1]}),r.O_b(59);var s=r.v$j(15,981,688,3);a=i.x0-s,r.s$9(21);var o=r.V9a(13,5e3,64e3);n=i.x1+o,this.v0B=t.yIntersection(i,a),this.v1B=t.yIntersection(i,n),this.d0B=this.stx.dateFromTick(a,e.chart),this.d1B=this.stx.dateFromTick(n,e.chart)}},t.Drawing.line.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(t,i)?this.dragToDraw:(r.W5N(),this.setPoint(1,t,i,a.chart),this.calculateOuterSet(a),this.penDown=!1,!0):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1)},t.Drawing.line.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.v1=t.v1,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,t.d0B&&(this.d0B=t.d0B,this.d1B=t.d1B,this.v0B=t.v0B,this.v1B=t.v1B),this.adjust()},t.Drawing.line.prototype.serialize=function(){var e;return e={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1},this.d0B&&(e.d0B=this.d0B,e.d1B=this.d1B,e.v0B=this.v0B,e.v1B=this.v1B),r.W5N(),e},t.Drawing.line.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,e.chart),this.setPoint(1,this.d1B,this.v1B,e.chart)))},t.Drawing.horizontal=function(){this.name="horizontal"},t.inheritsFrom(t.Drawing.horizontal,t.Drawing.segment),t.Drawing.horizontal.prototype.dragToDraw=!1,t.Drawing.horizontal.prototype.measure=function(){},t.Drawing.horizontal.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.setPoint(0,t,i,a.chart),!0},t.Drawing.horizontal.prototype.intersected=function(e,t,i){var a,r;return this.lineIntersection(e,t,i,"line")?("m","o","v","e",a=this.stx.chart.dataSet.length,r=this.p0[1],this.highlighted=!0,{action:"move",p0:[a-2,r],p1:[a-1,r],tick:e,value:t}):null},t.Drawing.horizontal.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.d0=t.d0,this.tzo0=t.tzo0,this.axisLabel=t.al,this.adjust()},t.Drawing.horizontal.prototype.serialize=function(){return r.W5N(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel}},t.Drawing.horizontal.prototype.adjust=function(){var e;if(e=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,e.chart),r.s$9(37);var t=r.v$j(4,896,1e3);this.p1=[this.p0[0]+t,this.p0[1]]}},t.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],t.Drawing.vertical=function(){this.name="vertical"},t.inheritsFrom(t.Drawing.vertical,t.Drawing.horizontal),t.Drawing.vertical.prototype.measure=function(){},a=2;for(var n=1;-221171804!==r.l5h(n.toString(),n.toString().length,4939);n++)t.Drawing.vertical.prototype.intersected=t.Drawing.segment.prototype.intersected,a+=2;-282884049!==r.l5h(a.toString(),a.toString().length,83949)&&(t.Drawing.vertical.prototype.intersected=t.Drawing.segment.prototype.intersected),t.Drawing.vertical.prototype.adjust=function(){var e;if(e=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,e.chart),r.O_b(16);var t=r.v$j(17,6,22);r.O_b(60);var i=r.V9a(18,99,8,10);this.p1=[this.p0[0],this.p0[t]+i]}},t.Drawing.measure=function(){this.name="measure"},t.inheritsFrom(t.Drawing.measure,t.Drawing.segment),t.Drawing.measure.prototype.click=function(e,t,i){return this.copyConfig(),this.penDown?(this.stx.undo(),this.penDown=!1,!0):(this.p0=[t,i],this.penDown=!0,!1)},t.Drawing.rectangle=function(){r.W5N(),this.name="rectangle"},t.inheritsFrom(t.Drawing.rectangle,t.Drawing.BaseTwoPoint),t.Drawing.rectangle.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if("s","e","gm","ent","a","u","t","o",i=this.stx.panels[this.panelName]){a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=Math.round(Math.min(a,n))+.5,h=Math.min(s,o),c=Math.max(a,n)-l,u=Math.max(s,o)-h,d=this.color,this.highlighted&&(d=this.stx.getCanvasColor("stx_highlight_vector")),-48847820,r.O_b(29),p=r.V9a("532562126",64),m=2;for(var b=1;-48847820!==r.m6F(b.toString(),b.toString().length,65541);b++)g=this.fillColor,m+=2;r.l5h(m.toString(),m.toString().length,85890)!==p&&(g=this.fillColor),g&&!t.isTransparent(g)&&"auto"!=g&&(e.beginPath(),e.rect(l,h,c,u),e.fillStyle=g,e.globalAlpha=.2,e.fill(),e.closePath(),e.globalAlpha=1),f={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&"none"==f.pattern&&("so","li","d",f.pattern="solid",.1==f.lineWidth&&(f.lineWidth=1)),this.stx.plotLine(a,n,s,s,d,"segment",e,i,f),r.O_b(36),this.stx.plotLine(n,n,r.V9a("0.5",s),r.V9a(o,.5,r.s$9(0)),d,"segment",e,i,f),this.stx.plotLine(n,a,o,o,d,"segment",e,i,f),r.O_b(0),this.stx.plotLine(a,a,r.v$j(o,.5),r.v$j("0.5",s,r.s$9(36)),d,"segment",e,i,f),this.highlighted&&(y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(e,a,s,y),this.littleCircle(e,n,o,v))}},t.Drawing.rectangle.prototype.intersected=function(e,i,a){var n;if(!this.p0||!this.p1)return null;for(var s in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[s][0],n[s][1],a))return r.s$9(0),this.highlighted=r.V9a("p",s),{action:"drag",point:"p"+s};return this.boxIntersection(e,i,a)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},t.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.rectangle.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.rectangle.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.shape=function(){this.name="shape",r.W5N(),this.radians=0,this.a=0,this.rotating=!1,this.textMeasure=!1,this.configurator="shape",this.dimension=[0,0],this.points=[]},t.inheritsFrom(t.Drawing.shape,t.Drawing.BaseTwoPoint),t.Drawing.shape.prototype.setRotationOnInitialDraw=!1,t.Drawing.shape.prototype.measure=function(){},t.Drawing.shape.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w;if(this.points.length&&(i=this.stx.panels[this.panelName])){if(a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),this.p1){if("#0","000","00",s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),e.globalAlpha=.5,e.fillStyle="#000000",this.rotating){if(r.s$9(61),this.radians=Math.atan(r.v$j(n,s,o,a)),s<a)this.radians+=Math.PI;else if(o<n){r.s$9(16);var k=r.v$j(18,19,35);this.radians+=k*Math.PI}r.O_b(1);var D=r.v$j(6,16);r.O_b(0);var A=r.v$j(1,4);this.a=parseInt((36*this.radians/Math.PI).toFixed(0),D)*A,r.s$9(12),this.a%=r.V9a(32,"360"),r.O_b(1);var T=r.V9a(1800,1980);this.radians=this.a*Math.PI/T,this.textMeasure&&e.fillText(this.a+"",s+10,o+10)}else this.penDown&&("x",",",this.sx=Math.max(1,parseFloat(Math.abs(2*(s-a)/this.dimension[0]).toFixed(1))),s<a&&(this.sx*=-1),this.sy=Math.max(1,parseFloat(Math.abs(2*(o-n)/this.dimension[1]).toFixed(1))),o<n&&(r.s$9(2),this.sy*=-r.V9a(1,"1")),this.textMeasure&&e.fillText(this.sx+"x,"+this.sy+"x",s+this.sx+5,o+this.sy+5));e.globalAlpha=1}void 0===this.sx&&(this.sx=this.sy=1),(l=this.lineWidth)||(l=1.1),h={pattern:this.pattern,lineWidth:l},this.highlighted&&"none"==h.pattern&&(h.pattern="solid",.1==h.lineWidth&&(h.lineWidth=1)),("auto"==(c=this.color)||t.isTransparent(c))&&(c=this.stx.defaultColor),this.highlighted&&(c=this.stx.getCanvasColor("stx_highlight_vector"),.1==l&&(l=1.1)),u=this.fillColor,r.s$9(62);var M=r.v$j(9,2,4,4,9);for(l/=Math.abs(this.sx*this.sy)*M/(Math.abs(this.sx)+Math.abs(this.sy)),e.save(),e.translate(a,n),e.rotate(this.radians),e.scale(this.sx,i.yAxis.flipped?-this.sy:this.sy),m={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-1)/2},d=0;d<this.points.length;d++){for(e.beginPath(),p=0;p<this.points[d].length;p++)"M"==this.points[d][p]?(g=this.points[d][++p]-m.x,f=this.points[d][++p]-m.y,e.moveTo(g,f)):"L"==this.points[d][p]?(g=this.points[d][++p]-m.x,f=this.points[d][++p]-m.y,e.lineTo(g,f)):"Q"==this.points[d][p]?(y=this.points[d][++p]-m.x,b=this.points[d][++p]-m.y,g=this.points[d][++p]-m.x,f=this.points[d][++p]-m.y,e.quadraticCurveTo(y,b,g,f)):"B"==this.points[d][p]&&(y=this.points[d][++p]-m.x,b=this.points[d][++p]-m.y,v=this.points[d][++p]-m.x,x=this.points[d][++p]-m.y,g=this.points[d][++p]-m.x,f=this.points[d][++p]-m.y,e.bezierCurveTo(y,b,v,x,g,f));e.closePath(),u&&!t.isTransparent(u)&&"auto"!=u&&(e.fillStyle=u,e.fill()),c&&"none"!=this.pattern&&(e.strokeStyle=c,e.lineWidth=l,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(l,this.pattern)),e.lineDashOffset=0),e.stroke())}e.restore(),e.save(),e.translate(a,n),e.rotate(this.radians),this.highlighted?("#0","0","000","0",C="p0"==this.highlighted,S="p1"==this.highlighted,w="p2"==this.highlighted,this.littleCircle(e,0,0,C),this.mover(e,0,0,C),this.littleCircle(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,S),this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,S),this.littleCircle(e,this.sx*this.dimension[0]/2,0,w),this.rotator(e,this.sx*this.dimension[0]/2,0,w),e.globalAlpha=.5,e.fillStyle="#000000",this.textMeasure&&(e.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),e.fillText(this.a+"",this.sx*this.dimension[0]/2+12,5)),e.globalAlpha=1):this.penDown&&(this.rotating?this.rotator(e,this.sx*this.dimension[0]/2,0,!0):this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0)),e.restore()}},t.Drawing.shape.prototype.reposition=function(e,t,i,a){var n,s,o,l,h,c,u;if(t)if(n=this.stx.panels[this.panelName],"move"==t.action)s=t.tick-i,o=t.value-a,this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.render(e);else if("ro","t","ate",l=this.stx.pixelFromTick(this.p0[0],n.chart),h=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[1]),c=this.stx.pixelFromTick(i,n.chart),u=this.stx.pixelFromValueAdjusted(n,i,a),"scale"==t.action)this[t.point]=[i,a],this.sx=parseFloat((((c-l)*Math.cos(this.radians)+(u-h)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((u-h)*Math.cos(this.radians)-(c-l)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(e);else if("rotate"==t.action){if(this[t.point]=[i,a],r.O_b(61),this.radians=Math.atan(r.V9a(h,c,u,l)),c<l)this.radians+=Math.PI;else if(u<h){r.O_b(0);var d=r.V9a(0,2);this.radians+=d*Math.PI}r.O_b(63);var p=r.v$j(1,5,5);r.s$9(0);var m=r.V9a(2,3);if(this.a=parseInt((36*this.radians/Math.PI).toFixed(0),p)*m,this.sx<0){r.O_b(21);var g=r.v$j(8,192,1356);this.a=this.a+g}this.a%=360,r.O_b(58);var f=r.v$j(171,4,1980,880);this.radians=this.a*Math.PI/f,this.render(e)}},t.Drawing.shape.prototype.intersected=function(e,i,a){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b;if(!this.p0)return null;if(this.stx.repositioningDrawing==this&&this.stx.repositioningDrawing.repositioner)return this.stx.repositioningDrawing.repositioner;n=this.stx.panels[this.panelName],s=this.stx.pixelFromTick(this.p0[0],n.chart),o=this.stx.pixelFromValueAdjusted(n,this.p0[0],this.p0[1]),l=this.stx.pixelFromTick(e,n.chart),h=this.stx.pixelFromValueAdjusted(n,e,i),c=h-=o,u=l-=s,l=Math.cos(this.radians)*u+Math.sin(this.radians)*c,h=Math.cos(this.radians)*c-Math.sin(this.radians)*u,l/=this.sx,h/=this.sy,this.padding=t.ensureDefaults(this.padding||{},{left:0,right:0,top:0,bottom:0}),d=this.padding.right+this.padding.left,p=this.padding.bottom+this.padding.top,m=Math.pow(t.touchDevice?25:5+this.littleCircleRadius(),2),g=Math.abs(m/(this.sx*this.sy)),r.s$9(16);var x=r.V9a(13,0,12);r.O_b(64);var C=r.V9a(11,16,3,18,23);r.O_b(65),r.W5N();var S=r.v$j(3,10,21,19,128);r.O_b(21);var w=r.v$j(12,5,59);r.s$9(1);var k=r.v$j(15,17);r.s$9(66);var D=r.V9a(4,1,2,1);r.O_b(53);var A=r.v$j(12,3,9,3);r.O_b(0);var T=r.v$j(0,2);f=Math.pow((this.dimension["0"*x]-d+3)/C,S)+Math.pow((this.dimension[w]-p+3)/2,k)>Math.pow(l-d/D,A)+Math.pow(h-p/2,T),r.s$9(33);var M=r.V9a(7,11,16);r.s$9(67);var _=r.V9a(17,5,3,14);y=(m-(Math.pow(l*this.sx,M)+Math.pow(h*this.sy,"2"*_)))/Math.abs(this.sx*this.sy),r.s$9(68);var F=r.v$j(4,19,6,6,33);r.O_b(18);var P=r.V9a(15,12,1);r.s$9(69);var L=r.v$j(53,6,9,18);r.O_b(1);var O=r.V9a(6,8);r.s$9(70);var E=r.V9a(5,16,6,6,14);v=g-Math.pow(l-this.dimension[0]/F,P)-Math.pow(h-this.dimension[L]/O,E),r.s$9(21);var I=r.V9a(3,40,118);r.O_b(23);var N=r.V9a(12,10);r.O_b(26);var $=r.v$j(0,14,4,7);return b=g-Math.pow(l-this.dimension[0]/I,N)-Math.pow(h,$),f?v>=b&&v>=y&&v>-1?(this.highlighted="p1",{action:"scale"}):b>=v&&b>=y&&b>-1?(this.highlighted="p2",{action:"rotate"}):(this.highlighted=!(y>-1)||"p0",{action:"move",p0:t.clone(this.p0),tick:e,value:i}):null},t.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.shape.prototype.littleCircleRadius=function(){return 3},t.Drawing.shape.prototype.click=function(e,t,i){var a;return!!this.points.length&&(this.copyConfig(),a=this.stx.panels[this.panelName],this.penDown?(this.setPoint(1,t,i,a.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1))},t.Drawing.shape.prototype.adjust=function(){var e,i,a;if("_","v",e=this.stx.panels[this.panelName]){i=this.name+"_v"+(this.version||0),t.Drawing[i]&&(a=new t.Drawing[i],this.name=a.name,this.dimension=a.dimension,this.padding=a.padding,this.points=a.points,this.version=a.version),this.setPoint(0,this.d0,this.v0,e.chart),r.s$9(3);var n=r.V9a(11,95,16,1044,20);r.O_b(71);var s=r.v$j(216,2,378,10,4);this.radians=Math.round(this.a/n)*Math.PI/s}},t.Drawing.shape.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,r.W5N(),this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.v0=t.v0,this.tzo0=t.tzo0,this.a=t.a,this.sx=t.sx,this.sy=t.sy,this.version=t.ver,this.adjust()},t.Drawing.shape.prototype.serialize=function(){return r.W5N(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,ver:this.version}},t.Drawing.arrow=function(){this.name="arrow",r.W5N(),this.version=1,r.O_b(29),this.dimension=[r.v$j("11",32),22],this.padding={left:0,right:0,top:11,bottom:0},r.O_b(29),this.points=[["M",3,r.v$j("21",64),"L",7,21,"L",7,16,"L",10,16,"L",5,11,"L",0,16,"L",3,16,"L",3,21]]},t.inheritsFrom(t.Drawing.arrow,t.Drawing.shape),t.Drawing.getDrawingToolList=function(e){var i,a;for(var r in i={},a={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},t.extend(a,e),t.Drawing)!a[r]&&t.Drawing[r].prototype.render&&(i[(new t.Drawing[r]).name]=r);return i}},h=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":j(_CIQ))?_CIQ:e.CIQ).EaseMachine=function(e,t,i,a){this.fc=e,this.ms=t,(i||0===i)&&this.reset(i,a)},t.EaseMachine.prototype.reset=function(e,t){for(var i in"o","bje",V.W3G(),"ct",e||0===e||(e=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,V.s$9(72),this.useNameValuePairs=V.V9a(j(t),"object"),this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=e,this.endValues=t):(this.startValues={default:e},this.endValues={default:t}),this.changeValues={},this.currentValues={},this.startValues)this.changeValues[i]=this.endValues[i]-this.startValues[i]},t.EaseMachine.prototype.next=function(){var e;for(var t in(e=Date.now())>=this.startTime+this.ms&&(e=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},this.changeValues)this.currentValues[t]=this.fc(e-this.startTime,this.startValues[t],this.changeValues[t],this.ms);return this.useNameValuePairs?this.currentValues:this.currentValues.default},t.EaseMachine.prototype.hasCompleted=!0,t.EaseMachine.prototype.run=function(e,t,i,a){var r;function n(){var t;r.afid=null,r.okayToRun&&(t=r.next(),e(t),V.W5N(),r.hasCompleted||(r.afid=requestAnimationFrame(n)))}V.W5N(),this.afid&&cancelAnimationFrame(this.afid),t||0===t?this.reset(t,i):(i||0===i)&&this.reset(this.currentValues,i),r=this,this.running=!0,a?this.afid=requestAnimationFrame(n):n()},t.EaseMachine.prototype.stop=function(){return this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,V.W3G(),this.hasCompleted=!0,this.running=!1,void 0===this.useNameValuePairs?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},t.ChartEngine.prototype.animations.zoom.isStub&&(t.ChartEngine.prototype.animations.zoom=new t.EaseMachine(Math.easeOutCubic,400))},V.W3G(),c=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p=V;function m(e){return p.W5N(),Math.cosh?Math.cosh(e):(Math.exp(e)+Math.exp(-e))/2}function g(){this.success=!1,this.errormsg="",p.W5N(),this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:X,cosh:m,tanh:N,asinh:f,acosh:$,atanh:W,sqrt:Math.sqrt,log:Math.log,lg:A,log10:A,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:R,"-":x,exp:Math.exp},this.ops2={"+":P,"-":D,"*":E,"/":H,"%":I,"^":Math.pow,",":b,"||":v,"==":C,"!=":k,">":y,"<":U,">=":S,"<=":O,and:B,or:M},this.functions={random:T,fac:Y,min:Math.min,max:Math.max,hypot:w,pyt:w,pow:Math.pow,atan2:Math.atan2,if:z},this.consts={E:Math.E,PI:Math.PI}}function f(e){return Math.asinh?Math.asinh(e):e===-1/0?e:(p.W3G(),Math.log(e+Math.sqrt(e*e+1)))}function y(e,t){return p.O_b(73),p.W3G(),p.V9a(e,t)}function v(e,t){return p.W5N(),p.O_b(35),p.V9a(e,t,"")}function b(e,t){return"[object Array]"!=Object.prototype.toString.call(e)?[e,t]:((e=e.slice()).push(t),e)}function x(e){return-e}function C(e,t){return p.s$9(72),p.W5N(),p.v$j(e,t)}function S(e,t){return p.s$9(74),p.V9a(t,e)}function w(){var e,t;if(Math.hypot)return Math.hypot.apply(this,arguments);e=0,p.W3G(),t=arguments.length;for(var i=0;i<t;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;e+=arguments[i]*arguments[i]}return Math.sqrt(e)}function k(e,t){return p.s$9(76),p.W5N(),p.V9a(e,t)}function D(e,t){return p.O_b(1),p.W5N(),p.V9a(t,e)}function A(e){return p.W3G(),Math.log(e)*Math.LOG10E}function T(e){p.O_b(77);var t=p.V9a(19,6,4,10,1);return Math.random()*(e||"1"*t)}function M(e,t){return Boolean(e||t)}function _(e){return p.W5N(),"string"==typeof e?(i.lastIndex=0,i.test(e)?"'"+e.replace(i,(function(e){var t;return"string"==typeof(t=a[e])?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+"'":"'"+e+"'"):e}function F(t,i,a,r){var n,s;this.type_=t,p.s$9(1),n=p.v$j(0,"1661587523"),s=2;for(var o=1;p.l5h(o.toString(),o.toString().length,3797)!==n;o++)this.index_=i&&2,s+=2;p.W3G(),986628675!==p.m6F(s.toString(),s.toString().length,25147)&&(this.index_=i||0),this.prio_=a||0,this.number_=null!=r?r:0,this.toString=function(){switch(p.W3G(),this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case e:return"CALL";default:return"Invalid Token"}}}function P(e,t){return Number(e)+Number(t)}function L(e){function t(){}return t.prototype=e,p.W3G(),new t}function O(e,t){return p.O_b(78),p.W5N(),p.v$j(t,e)}function E(e,t){return p.O_b(2),p.W3G(),p.v$j(t,e)}function I(e,t){return p.O_b(79),p.v$j(e,t)}function N(e){return p.W3G(),Math.tanh?Math.tanh(e):e===1/0?(p.O_b(42),p.v$j("1",1)):e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function $(e){return p.W3G(),Math.acosh?Math.acosh(e):Math.log(e+Math.sqrt(e*e-1))}function z(e,t,i){return e?t:i}function j(e,t,i,a){this.tokens=e,this.ops1=t,p.W3G(),this.ops2=i,this.functions=a}function H(e,t){return p.W3G(),p.O_b(9),p.V9a(e,t)}function B(e,t){return p.W3G(),Boolean(e&&t)}function W(e){return Math.atanh?Math.atanh(e):Math.log((1+e)/(1-e))/2}function R(e){return p.W3G(),Math.trunc?Math.trunc(e):e<0?Math.ceil(e):Math.floor(e)}function X(e){return p.W5N(),Math.sinh?Math.sinh(e):(Math.exp(e)-Math.exp(-e))/2}function U(e,t){return p.s$9(81),p.v$j(e,t)}function Y(e){var t;for(p.W5N(),t=e=Math.floor(e);e>1;)p.s$9(83),t=p.V9a(t,--e);return t}return"\\","n",0,1,2,3,p.O_b(29),e=p.v$j("4",64),/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i=/[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},t.extend(j.prototype,{simplify:function(e){var t,i,a,r,n,s,o,l,h;for(e=e||{},t=[],i=[],s=this.tokens.length,l=0,l=0;l<s;l++)if(0===(h=(o=this.tokens[l]).type_))t.push(o);else if(3===h&&o.index_ in e)o=new F(0,0,0,e[o.index_]),t.push(o);else if(2===h&&t.length>1)r=t.pop(),a=t.pop(),o=new F(0,0,0,(n=this.ops2[o.index_])(a.number_,r.number_)),t.push(o);else if(1===h&&t.length>0)a=t.pop(),n=this.ops1[o.index_],p.O_b(39),o=new F(0,0,p.v$j("0",0),n(a.number_)),t.push(o);else{for(;t.length>0;)i.push(t.shift());i.push(o)}for(;t.length>0;)i.push(t.shift());return new j(i,L(this.ops1),L(this.ops2),L(this.functions))},substitute:function(e,t){var i,a,r,n,s,o;for(p.W3G(),t instanceof j||(t=(new g).parse(String(t))),i=[],a=this.tokens.length,n=0,n=0;n<a;n++)if(3===(r=this.tokens[n]).type_&&r.index_===e)for(var l=0;l<t.tokens.length;l++)o=new F((s=t.tokens[l]).type_,s.index_,s.prio_,s.number_),i.push(o);else i.push(r);return new j(i,L(this.ops1),L(this.ops2),L(this.functions))},evaluate:function(t){var i,a,r,n,s,o,l,h;for(t=t||{},i=[],s=this.tokens.length,l=0,l=0;l<s;l++)if(0===(h=(o=this.tokens[l]).type_))i.push(o.number_);else if(2===h)r=i.pop(),a=i.pop(),n=this.ops2[o.index_],i.push(n(a,r));else if(3===h)if(o.index_ in t)i.push(t[o.index_]);else{if(!(o.index_ in this.functions))throw"undefined var","iabl","e: ",new Error("undefined variable: "+o.index_);i.push(this.functions[o.index_])}else if(1===h)a=i.pop(),n=this.ops1[o.index_],i.push(n(a));else{if(h!==e)throw new Error("invalid Expression");if(a=i.pop(),!(n=i.pop()).apply||!n.call)throw p.s$9(0),new Error(p.V9a(n," is not a function"));"[object Array]"==Object.prototype.toString.call(a)?i.push(n.apply(void 0,a)):i.push(n.call(void 0,a))}if(p.W3G(),i.length>1)throw"invalid Exp","ression (p","arity)",new Error("invalid Expression (parity)");return i[0]},toString:function(t){var i,a,r,n,s,o,l,h;for(i=[],s=this.tokens.length,l=0,l=0;l<s;l++)if(0===(h=(o=this.tokens[l]).type_))i.push(_(o.number_));else if(2===h)r=i.pop(),a=i.pop(),n=o.index_,t&&"^"==n?("Math.p","ow(",p.O_b(75),i.push(p.v$j(r,a,"Math.pow(",")",","))):(p.s$9(75),i.push(p.v$j(r,a,"(",")",n)));else if(3===h)i.push(o.index_);else if(1===h)a=i.pop(),"-"===(n=o.index_)?(p.s$9(51),i.push(p.v$j(")",a,"(",n))):(p.O_b(51),i.push(p.v$j(")",a,n,"(")));else{if(h!==e)throw new Error("invalid Expression");a=i.pop(),n=i.pop(),p.O_b(51),i.push(p.v$j(")",a,n,"("))}if(i.length>1)throw"invali","d Expr","e","ssion (parity)",new Error("invalid Expression (parity)");return p.W3G(),p.s$9(29),i[p.V9a("0",64)]},variables:function(){var e,t,i;e=this.tokens.length,t=[];for(var a=0;a<e;a++)3===(i=this.tokens[a]).type_&&-1==t.indexOf(i.index_)&&t.push(i.index_);return t}},!0),g.parse=function(e){return p.W5N(),(new g).parse(e)},g.evaluate=function(e,t){return g.parse(e).evaluate(t)},g.Expression=j,g.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:X,cosh:m,tanh:N,asinh:f,acosh:$,atanh:W,sqrt:Math.sqrt,log:Math.log,lg:A,log10:A,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:R,random:T,fac:Y,exp:Math.exp,min:Math.min,max:Math.max,hypot:w,pyt:w,pow:Math.pow,atan2:Math.atan2,if:z,E:Math.E,PI:Math.PI},p.O_b(29),r=p.V9a(1,0),p.O_b(29),n=p.V9a(1,1),p.O_b(29),s=p.v$j(1,2),p.s$9(29),o=p.v$j(1,3),p.s$9(29),l=p.V9a(1,4),p.s$9(29),h=p.v$j(1,5),p.s$9(80),c=p.V9a(6,"1"),p.O_b(82),u=p.v$j("7",0,1),p.s$9(29),d=p.V9a(1,8),t.extend(g.prototype,{parse:function(t){var i,a,m,g,f,y,v,b;for(this.errormsg="",this.success=!0,i=[],a=[],this.tmpprio=0,p.s$9(84),m=p.V9a(o,s,c,r),g=0,this.expression=t,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&m&c?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",g++,this.addfunc(a,i,1)),p.s$9(84),m=p.v$j(o,s,c,r)):this.isComment()||(0==(m&n)&&this.error_parsing(this.pos,"unexpected operator"),p.s$9(39),g+=p.V9a("2",0),this.addfunc(a,i,2),p.s$9(84),m=p.v$j(o,s,c,r)):this.isNumber()?(0==(m&r)&&("unexpected"," number",this.error_parsing(this.pos,"unexpected number")),f=new F(0,0,0,this.tokennumber),a.push(f),p.O_b(85),m=p.V9a(h,n,l)):this.isString()?(0==(m&r)&&this.error_parsing(this.pos,"unexpected string"),p.s$9(12),f=new F(0,0,p.v$j(0,"0"),this.tokennumber),a.push(f),p.s$9(85),m=p.V9a(h,n,l)):this.isLeftParenth()?(0==(m&o)&&("unexpecte","d",' "("',this.error_parsing(this.pos,'unexpected "("')),m&u&&(g+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(a,i,e)),p.O_b(86),m=p.V9a(o,d,r,c,s)):this.isRightParenth()?(m&d?(f=new F(0,0,0,[]),a.push(f)):0==(m&l)&&this.error_parsing(this.pos,'unexpected ")"'),p.O_b(86),m=p.V9a(l,u,n,o,h)):this.isComma()?(0==(m&h)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(a,i,2),g+=2,p.O_b(84),m=p.v$j(o,s,c,r)):this.isConst()?(0==(m&r)&&("un","expected constant",this.error_parsing(this.pos,"unexpected constant")),y=new F(0,0,0,this.tokennumber),a.push(y),p.O_b(85),m=p.V9a(h,n,l)):this.isOp2()?(0==(m&s)&&("une","xpected f","unction",this.error_parsing(this.pos,"unexpected function")),this.addfunc(a,i,2),g+=2,m=o):this.isOp1()?(0==(m&s)&&("une","xpected function",this.error_parsing(this.pos,"unexpected function")),this.addfunc(a,i,1),g++,m=o):this.isVar()?(0==(m&r)&&this.error_parsing(this.pos,"unexpected variable"),v=new F(3,this.tokenindex,0,0),a.push(v),p.s$9(86),m=p.v$j(l,u,n,o,h)):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');i.length>0;)b=i.pop(),a.push(b);return g+1!==a.length&&("parit","y",this.error_parsing(this.pos,"parity")),new j(a,L(this.ops1),L(this.ops2),L(this.functions))},evaluate:function(e,t){return p.W3G(),this.parse(e).evaluate(t)},error_parsing:function(e,t){throw this.success=!1,p.s$9(51),this.errormsg=p.v$j(t,"]: ","parse error [column ",e),this.column=e,new Error(this.errormsg)},addfunc:function(e,t,i){var a;for(a=new F(i,this.tokenindex,this.tokenprio+this.tmpprio,0);t.length>0&&a.prio_<=t[t.length-1].prio_;)e.push(t.pop());p.W3G(),t.push(a)},isNumber:function(){var e,t,i;for(e=!1,p.W3G(),t="";this.pos<this.expression.length&&((i=this.expression.charCodeAt(this.pos))>=48&&i<=57||46===i);)t+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(t),e=!0;return e},unescape:function(e,t){var i,a,r,n;p.W5N(),i=[],a=!1;for(var s=0;s<e.length;s++)if(r=e.charAt(s),a){switch(r){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("\t");break;case"u":n=parseInt(e.substring(s+1,s+5),16),i.push(String.fromCharCode(n)),s+=4;break;default:throw"Illega","l escape"," sequence:"," '\\",p.O_b(0),this.error_parsing(p.v$j(t,s),p.v$j(r,"'","Illegal escape sequence: '\\",p.O_b(35)))}a=!1}else"\\"==r?a=!0:i.push(r);return i.join("")},isString:function(){var e,t,i;if(e=!1,t="",i=this.pos,this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){if("'"==this.expression.charAt(this.pos)&&"\\"!=t.slice(-1)){this.pos++,this.tokennumber=this.unescape(t,i),e=!0;break}t+=this.expression.charAt(this.pos),this.pos++}return e},isConst:function(){var e;for(var t in this.consts)if(e=t.length,t===this.expression.substr(this.pos,e))return this.tokennumber=this.consts[t],this.pos+=e,!0;return p.W3G(),!1},isOperator:function(){var e;if(p.W5N(),43===(e=this.expression.charCodeAt(this.pos)))this.tokenprio=2,this.tokenindex="+";else if(45===e)this.tokenprio=2,this.tokenindex="-";else if(62===e)61===this.expression.charCodeAt(this.pos+1)?(">","=",this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===e){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,p.O_b(29),this.tokenprio=p.V9a("1",64),this.tokenindex="||"}else if(61===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;"=","=",this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===e){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;"a","n","d",this.pos++,this.pos++,p.O_b(39),this.tokenprio=p.v$j("0",0),this.tokenindex="and"}else if(111===e){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,p.O_b(1),this.tokenprio=p.v$j(0,"0"),this.tokenindex="or"}else if(42===e||8729===e||8226===e)this.tokenprio=3,this.tokenindex="*";else if(47===e)this.tokenprio=4,this.tokenindex="/";else if(37===e)this.tokenprio=4,this.tokenindex="%";else{if(94!==e)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var e;return 45===(e=this.expression.charCodeAt(this.pos-1))||43===e||(p.W3G(),!1)},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)&&(this.pos++,p.O_b(29),this.tmpprio+=p.v$j("10",0),!0)},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){return 44===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var e;return(32===(e=this.expression.charCodeAt(this.pos))||9===e||10===e||13===e)&&(this.pos++,!0)},isOp1:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops1&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isOp2:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops2&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isVar:function(){var e,t;p.W3G(),e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&(this.tokenindex=e,p.s$9(1),this.tokenprio=p.v$j(0,"4"),this.pos+=e.length,!0)},isComment:function(){if(47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)){p.s$9(37);var e=p.V9a(3,19,24);return this.pos=this.expression.indexOf("*/",this.pos)+e,1===this.pos&&(this.pos=this.expression.length),!0}return!1}},!0),g},t.computeEquationChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k=V;for(var D in e=e.replace(/[:]/,"/"),r=0,a)"\\","]","\\","[","\\","[",n=new RegExp("\\["+D.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),k.s$9(0),e=e.replace(n,k.V9a("symbol",r)),r++;function A(e){if(k.W3G(),e.i++,a[e.s]){if(e.i>=a[e.s].length)return 0;c=a[e.s][e.i]}return c.DT||(c.DT=t.strToDateTime(c.Date)),e.d=c.DT,1}function T(){var e,t;for(var i in e=null,k.W5N(),t=null,l)t?l[i].d.getTime()<t.d.getTime()?e=t=l[i]:l[i].d.getTime()>t.d.getTime()&&(e=t):t=l[i];return e?A(e)?-1:0:1}for(D in s=i().parse(e),o=[],l={},h=0,u=null,d=!1,p=[],a)m={sym:D,map:a[D]},a[D]?p.unshift(m):p.push(m);for(var M=0;M<p.length;M++)g=p[M],l[g.sym]={i:0,s:g.sym},g.map?(h++,c=g.map[0]):1==h&&(d=g.sym),c.DT||(c.DT=t.strToDateTime(c.Date)),l[g.sym].d=c.DT,u||(u=l[g.sym]);k.O_b(87),k.W3G(),f=k.v$j(0,h),y=1==h&&-1==e.indexOf("%");e:for(;v=T();)if(1==v){if(d)(x=a[u.s][u.i][d])&&(x.Close||0===x.Close)&&(x=x.Close),C=s.evaluate({symbol0:a[u.s][u.i].Close,symbol1:x}),C=Number(C.toFixed(8)),(b={DT:u.d,Close:C,Adj_Close:C})[u.s]=a[u.s][u.i].Close,isNaN(C)||C==1/0||o.push(b);else{if(f)throw S=s.evaluate({}),k.s$9(35),t.alert(k.V9a("=",S,e)),{name:"NoException",message:""};for(D in r=0,w={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}},a){for(var _ in w)k.O_b(0),w[_][k.v$j("symbol",r)]=a[D][l[D].i][_];r++}(b={DT:u.d}).Adj_Close=s.evaluate(w.Adj_Close),b.Close=s.evaluate(w.Close),b.Open=s.evaluate(w.Open),b.Volume=s.evaluate(w.Volume),isNaN(b.Volume)&&(b.Volume=0),y?(b.High=s.evaluate(w.High),b.Low=s.evaluate(w.Low)):(b.High=Math.max(b.Open,b.Close),b.Low=Math.min(b.Open,b.Close)),isNaN(b.Close)||b.Close==1/0||o.push(b),isNaN(b.High)||(b.High=Number(b.High.toFixed(8))),isNaN(b.Low)||(b.Low=Number(b.Low.toFixed(8))),isNaN(b.Open)||(b.Open=Number(b.Open.toFixed(8))),isNaN(b.Close)||(b.Close=Number(b.Close.toFixed(8))),isNaN(b.Adj_Close)?b.Adj_Close=b.Close:b.Adj_Close=Number(b.Adj_Close.toFixed(8))}for(D in a)if(!A(l[D]))break e}return o}},u=function(e){var t,i=V;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.setLocale=function(e,a){var r,n,s,o;if("n","ume","ri","c","n","umeri","c","n","um","e","ric","2-","d","ig","it","2","-d","igit","h","2","3","undefined"!=typeof Intl&&this.locale!=e){for(this.locale=e,(n=this.internationalizer={}).hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}),n.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"}),n.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),n.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),n.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),n.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),n.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),n.numbers=new Intl.NumberFormat(this.locale),n.priceFormatters=[],a||(a=8),r=0;r<a+1;r++)n.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:r,minimumFractionDigits:r}));for(r=0;r<5;r++)"pe","rcen","t","per","cent",s=r,o=r,r||(s="",o=2),i.O_b(0),n[i.V9a("percent",s)]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:o,maximumFractionDigits:o});t.I18N.createMonthArrays&&t.I18N.createMonthArrays(this,n.month,this.locale)}},t.I18N=function(){},t.I18N.hereDoc=function(e){return e.toString().replace(/^[^/]+\/\*!?/,"").replace(/\*\/[^/]+$/,"")},i.W5N(),t.I18N.language="en",t.I18N.longMonths={zh:!0},t.I18N.reverseColorsByLocale={zh:!0,ja:!0},t.I18N.findAllTextNodes=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(e||(e=document.body),e==document.body&&!document.querySelector(".ciq_stashed_texts")){"n","o","ne",(i=document.createElement("div")).className="ciq_stashed_texts",i.style.display="none",e.appendChild(i),a=document.querySelectorAll("input,textarea,.editable_content");for(var b=0;b<a.length;b++)"pl","aceholder",(r=a[b].getAttribute("placeholder"))&&("orig","ina","l",(n=i.appendChild(document.createElement("translate"))).setAttribute("original",r),n.placeholderFor=a[b],n.appendChild(document.createTextNode(r)))}for(o=(s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1)).nextNode(),l=new RegExp("^\\s*$"),h=new RegExp("\n|\t|\f","g"),c={},u={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};o;)d=o.nodeValue,l.test(d)||(p=o.parentNode,m=o.nextSibling,u[g=p.tagName]||("TRANSLATE"!=g?("tr","ans","late",(f=document.createElement("translate")).setAttribute("original",d),f.appendChild(o),p.insertBefore(f,m)):("orig","i","n","al",d=p.getAttribute("original")),h.test(d)&&(d=d.replace(h,"")),c[d]||(c[d]=[]),c[d].push(o))),o=s.nextNode();if(e==document.body&&(y=t.Studies?t.Studies.studyLibrary:null))for(var x in y){if(null===c[x]&&(c[x]=[]),(v=y[x]).inputs)for(var C in v.inputs)c[C]||(c[C]=[]);if(v.outputs)for(var S in v.outputs)c[S]||(c[S]=[])}return c},t.I18N.missingWordList=function(e){var a,r,n,s,o,l;for(var h in"Sho","w Zone","s",e||(e=t.I18N.language),a=t.I18N.findAllTextNodes(),r={},(n=t.I18N.wordLists[e])||(n={}),s=function(e){void 0===n[e]&&(r[e]="")},a)s(h);if(!t.Studies||!t.Studies.studyLibrary)return r;for(var c in t.Studies.studyLibrary){for(var u in s((o=t.Studies.studyLibrary[c]).name),o.inputs)switch("[object Ar","ra","y]","[obj","ect String]",s(u),l=o.inputs[u],Object.prototype.toString.call(l)){case"[object String]":s(l);break;case"[object Array]":for(var d=0;d<l.length;++d)s(l[d])}for(var p in o.outputs)s(p)}return s("Show Zones"),s("OverBought"),i.W3G(),s("OverSold"),s("Panel"),s("Show as Underlay"),s("Y-Axis"),s("Invert Y-Axis"),r},t.I18N.printableMissingWordList=function(e){return i.W3G(),JSON.stringify(t.I18N.missingWordList(e)).replace(/","/g,'",\n"')},t.I18N.translateUI=function(e,i){var a,r,n,s,o,l,h,c;if("pu"==e&&(e="pt"),t.I18N.wordLists&&(e||(e=t.I18N.language),a=t.I18N.findAllTextNodes(i),r=t.I18N.wordLists[e]))for(var u in a){n=t.I18N.translateSections(u,r),s=a[u];for(var d=0;d<s.length;d++)"o","r","igi","nal",h=(l=(o=s[d]).parentNode).getAttribute("original"),","!==n&&n||(n=h),(c=l.placeholderFor)?c.placeholder=n:o.data=n}},t.I18N.translate=function(e,a){var r,n;return a||(a=t.I18N.language),t.I18N.wordLists?(i.W5N(),n=null,(r=t.I18N.wordLists[a])&&(n=t.I18N.translateSections(e,r)||e),","===n?e:n):(console.log("Must include translations.js in order to use CIQ.I18N.translate()"),e)},t.I18N.translateSections=function(e,t){var a;return"str","i","n",i.W3G(),"g","","string"==j(e)&&-1!=e.indexOf("")?(i.s$9(35),(a=(e=e.replace(/([(),])/g,i.V9a("$1","",""))).split("")).forEach((function(e,a,r){var n,s;if(n=e.match(/^(\s*).*\S(\s*)$/),i.W3G(),s=t[e.trim()]){if(n){i.O_b(77);var o=i.v$j(13,0,3,10,3);s=n[1]+s+n[o]}r[a]=s}})),a.join("")):t[e]},t.I18N.convertCSV=function(e){var a,r,n,s,o,l,h,c,u;if('^(")','|(")$',a=new RegExp("[]|[]","g"),r=new RegExp('^(")|(")$',"g"),n=t.I18N.wordLists,i.W3G(),e||(e=t.I18N.csv),e){o=(s=e.split("\n"))[0].split(",");for(var d=0;d<o.length;d++)n[l=o[d]]||(n[l]={});for(var p=1;p<s.length;p++){c=(h=s[p].match(/(".*?"|[^",]+)(?=\s*,|\s*$)|(,(?=,))/g)||[])[0],r.test(c)&&(c=c.replace(r,"")),a.test(c)&&(c=c.replace(a,'"'));for(var m=1;m<h.length;m++)u=h[m],r.test(u)&&(u=u.replace(r,"")),n[o[m]][c]=u}}},t.I18N.setLanguage=function(e,a,r,n,s){s||(s=(e.uiContext||{}).topNode||document.body),"pu"==a&&(a="pt"),t.I18N.convertCSV(n),t.I18N.language=a,i.W5N(),t.I18N.translateUI(a,s),r||(r=t.I18N.translate),e.translationCallback=r},t.I18N.setLocale=function(e,a,r,n,s){var o,l,h;if("SC","RIPT","locale","-","data/jso","np","un","de","fin","ed",t.xor(this.reverseColorsByLocale[a],this.reverseColorsByLocale[e.locale])&&this.reverseCandles(e),"undefined"==("undefined"==typeof Intl?"undefined":j(Intl))||!Intl.__addLocaleData)return e.setLocale(a,s),void(r&&r(null));n=void 0===n?"locale-data/jsonp":n,i.O_b(51),o=i.V9a(".js",a,n,"/"),(l=document.createElement("SCRIPT")).async=!0,l.src=o,(h=document.getElementsByTagName("script")[0]).parentNode.insertBefore(l,h.nextSibling),l.onload=function(){e.setLocale(a,s),r&&r(null)},l.onerror=function(){r&&r("cannot load script")}},t.I18N.createMonthArrays=function(e,a,r){var n,s,o,l,h;e.monthAbv=[],e.monthLetters=[],n=new Date,i.W3G(),s=!0,t.I18N.longMonths&&t.I18N.longMonths[r]&&(s=!1);for(var c=0;c<12;c++)if(n.setDate(1),n.setMonth(c),o=a.format(n),s){l="";for(var u=0;u<o.length;u++)(h=o.charAt(u)).charCodeAt(0)<65||(l+=h);e.monthAbv[c]=l,e.monthLetters[c]=l[0]}else e.monthAbv[c]=o,e.monthLetters[c]=o},t.I18N.localize=function(e,t){this.setLocale(e,t),this.setLanguage(e,t)},t.I18N.reverseCandles=function(e){var t,a,r;t=e.styles,a=e.cloneStyle(t.stx_candle_down),i.W3G(),r=e.cloneStyle(t.stx_candle_up),t.stx_candle_up=a,t.stx_candle_down=r},t.I18N.wordLists={en:{}},t.I18N.languages={en:"English"}},d=function(e){var t,i,a=V;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.pointerEvents={down:[],up:[]},t.ChartEngine.prototype.manageTouchAndMouse=!0,t.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var e,i,r,n,s,o,l;this.touchAndMouseEventsRegistered||(this.touchAndMouseEventsRegistered=!0,i=(e=this.controls.chartControls||document).querySelector(".stx-zoom-in"),r=e.querySelector(".stx-zoom-out"),n=this.chart.container,s=this,o=function(e,t,i){s.addDomEventListener(n,e,(function(e){if(s.mainSeriesRenderer&&s.mainSeriesRenderer.nonInteractive)return;t(e)}),i),a.W3G()},t.touchDevice?t.isSurface?("po","inter","d","own","mou","s","edown",o("mousemove",(function(e){s.msMouseMoveProxy(e)})),o("mouseenter",(function(e){a.W3G(),s.msMouseMoveProxy(e)})),o("mousedown",(function(e){a.W5N(),s.msMouseDownProxy(e)})),o("mouseup",(function(e){s.msMouseUpProxy(e)})),o("pointerdown",(function(e){return a.W5N(),s.startProxy(e)})),o("pointermove",(function(e){a.W3G(),s.moveProxy(e)})),o("pointerenter",(function(e){return a.W3G(),s.moveProxy(e)})),o("pointerup",(function(e){return s.endProxy(e)}))):(t.isMobile||("mouseent","er",o("mousemove",(function(e){a.W3G(),s.iosMouseMoveProxy(e)})),o("mouseenter",(function(e){a.W5N(),s.iosMouseMoveProxy(e)})),o("mousedown",(function(e){a.W3G(),s.iosMouseDownProxy(e)})),o("mouseup",(function(e){a.W3G(),s.iosMouseUpProxy(e)}))),o("touchstart",(function(e){a.W3G(),s.touchstart(e)})),o("touchmove",(function(e){s.touchmove(e)})),o("touchend",(function(e){s.touchend(e)})),o("pointerdown",(function(e){s.touchPointerType=e.pointerType})),i&&("onMo","useO","ver",i.removeAttribute("onMouseOver"),i.removeAttribute("onMouseOut")),r&&("onMouseOve","r",r.removeAttribute("onMouseOver"),r.removeAttribute("onMouseOut"))):("mo","us","edown","mo","usemo","ve",o("mousemove",(function(e){s.mousemove(e)})),o("mouseenter",(function(e){a.W5N(),s.mousemove(e)})),o("mousedown",(function(e){a.W5N(),s.mousedown(e)})),o("mouseup",(function(e){a.W5N(),s.mouseup(e)}))),l=t.wheelEvent,a.W5N(),this.captureMouseWheelEvents&&o(l,(function(e){s.mouseWheel(e)}),{passive:!1}))},t.ChartEngine.prototype.mousedown=function(e){var i,r,n,s,o,l,h,c,u;if(i="moused",i+="own",!this.runPrepend(i,arguments)&&(this.grabOverrideClick=!1,this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!(this.editingAnnotation||e.button&&e.button>=2)))if(r=this.container.getBoundingClientRect(),this.top=r.top,this.left=r.left,this.right=this.left+this.width,this.bottom=this.top+this.height,e.clientX>=this.left&&e.clientX<=this.right&&e.clientY>=this.top&&e.clientY<=this.bottom){if(this.insideChart=!0,this.currentPanel){this.manageTouchAndMouse&&e&&e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,""===this.openDialog&&this.registerPointerEvent({x:e.clientX,y:e.clientY,time:this.mouseTimer},"down"),l=this.currentPanel.chart;for(var d=0;d<this.drawingObjects.length;d++)if((h=this.drawingObjects[d]).highlighted&&!h.permanent){if(this.cloneDrawing)return(c=new(0,t.ChartEngine.drawingTools[h.name])).reconstruct(this,h.serialize()),this.drawingObjects.push(c),this.activateRepositioning(c),void(c.repositioner=h.repositioner);if(u=this.currentVectorParameters.vectorType,!(t.Drawing&&u&&t.Drawing[u]&&(new t.Drawing[u]).dragToDraw))return void this.activateRepositioning(h)}this.mainSeriesRenderer||{};var p=this.baselineHelper;if(!p.size||!this.findBaselineHandle(e,!0)){if(this.controls.anchorHandles){var m=this.controls.anchorHandles;for(var g in m){var f=m[g],y=f.handle,v=f.sd,b=f.highlighted;if(b)return this.repositioningAnchorSelector={sd:v},void y.classList.add("stx-grab")}}var x;if(!(this.drawingClick&&(this.currentPanel.subholder===e.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)))this.grabbingScreen=!0,l.spanLock=!1,this.yToleranceBroken=!1,this.grabStartX=e.clientX,this.grabStartY=e.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=l.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout((x=this,a.W3G(),function(){a.W5N(),x.grabbingHand()}),100),this.swipeStart&&this.swipeStart(l),(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer(),this.runAppend("mousedown",arguments)}}}else{n=-134656921,s=-1137160748,o=2;for(var C=1;a.m6F(C.toString(),C.toString().length,41752)!==n;C++)this.insideChart=!1,o+=2;a.l5h(o.toString(),o.toString().length,20166)!==s&&(this.insideChart=!0)}},t.ChartEngine.prototype.mousemove=function(e){var i,a;i="mou",i+="se",i+="move",a=e,t.ChartEngine.crosshairX=a.clientX,t.ChartEngine.crosshairY=a.clientY,a.type.toLowerCase().indexOf("enter")>-1?this.positionCrosshairsAtPointer():this.runPrepend(i,arguments)||this.displayInitialized&&""===this.openDialog&&(this.baselineHelper.size&&this.findBaselineHandle(a),this.grabbingScreen&&1!==a.buttons&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(a.clientX,a.clientY),this.runAppend("mousemove",arguments))},t.ChartEngine.prototype.mouseup=function(e){var i,a,r,n,s,o,l,h,c,u,d;if(i="mo",i+="use",i+="up",!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250)return this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),void this.draw();this.activateRepositioning(null)}if(this.repositioningBaseline){var p=this.repositioningBaseline.handle;return this.repositioningBaseline=null,p.classList.remove("stx-grab"),(a=this.mainSeriesRenderer||{}).params&&a.params.baseline&&a.params.type,void this.draw()}if(this.repositioningAnchorSelector)return t.Studies.repositionAnchor(this,this.repositioningAnchorSelector.sd),this.repositioningAnchorSelector=null,Object.values(this.controls.anchorHandles).forEach((function(e){return e.handle.classList.remove("stx-grab")})),void this.findHighlights();if(r=this.userPointerDown,this.userPointerDown=!1,this.displayInitialized){if(n=this.backOutY(e.clientY),s=this.backOutX(e.clientX),o=e.which&&e.which>=2||e.button&&e.button>=2,""!==this.openDialog||o||this.registerPointerEvent({x:e.clientX,y:e.clientY,time:Date.now()},"up"),l=this.isDoubleClick(),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(s,n),this.currentPanel=this.whichPanel(n)),h=this.currentPanel,this.grabStartYAxis=null,this.displayDragOK(),""!==this.openDialog)return c="s",c+="tx-drag-ch",c+="ar",c+="t",void(this.insideChart&&this.container.classList.remove(c));if(this.grabOverrideClick)return u="st",u+="x-d",u+="rag-chart",this.overXAxis||this.overYAxis||!this.swipeRelease||this.swipeRelease(),this.container.classList.remove(u),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),void this.updateChartAccessories();if(this.insideChart&&this.container.classList.remove("stx-drag-chart"),!t.ChartEngine.resizingPanel)return o||e.ctrlKey?this.anyHighlighted&&!0!==this.bypassRightClick?(this.rightClickHighlighted(),e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),e.stopPropagation(),!1):(this.dispatch("rightClick",{stx:this,panel:h,x:s,y:n}),!0):void(e.clientX<this.left||e.clientX>this.right||e.clientY<this.top||e.clientY>this.bottom||(d=h&&h.subholder===e.target,l&&(d||this.overYAxis||this.overXAxis)?this.doubleClick({button:e.button,x:s,y:n}):(r&&d&&(this.longHoldTookEffect&&!this.activeDrawing||this.drawingClick(h,s,n),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:s,cy:n,panel:h})),this.longHoldTookEffect||this.activeDrawing||this.dispatch("tap",{stx:this,panel:h,x:s,y:n})),this.runAppend(i,arguments)));this.releaseHandle()}}},t.ChartEngine.prototype.registerPointerEvent=function(e,t){this.pointerEvents[t].length>1&&this.pointerEvents[t].pop(),this.pointerEvents[t].unshift(e)},a.W5N(),t.ChartEngine.prototype.resetPointerEvent=function(e){this.pointerEvents[e].splice(0)},t.ChartEngine.prototype.isDoubleClick=function(e){var t,i;t=e?1200:400,a.W5N();var r=this.pointerEvents,n=r.up,s=r.down;return this.cancelTouchSingleClick=!1,!(n.length<2||s.length<2)&&((i=s[0].time-n[1].time<this.doubleClickTime&&Math.pow(n[1].x-n[0].x,2)+Math.pow(n[1].y-n[0].y,2)<=t&&n[1].time-s[1].time<this.longHoldTime&&n[0].time-s[0].time<this.longHoldTime)&&("dow","n","u","p",this.resetPointerEvent("up"),this.resetPointerEvent("down"),this.cancelTouchSingleClick=!0),i)},t.ChartEngine.prototype.doubleClick=function(e,i,a){if(!this.runPrepend("doubleClick",arguments)&&!this.editingAnnotation)return t.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:a,panel:this.currentPanel})||this.dispatch("doubleClick",{stx:this,button:e,x:i,y:a}),this.runAppend("doubleClick",arguments)))},t.ChartEngine.prototype.handleMouseOut=function(e){var i,a,r;if(e=e||window.event,!t.withinElement(this.chart.container,e.pageX,e.pageY)){if(i="h",i+="andle",i+="M",i+="ouseOut",this.runPrepend("handleMouseOut",arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=!1,this.drawingLine=!1,a=this.backOutY(e.pageY),r=this.backOutX(e.pageX),this.drawingClick(this.currentPanel,r,a)),this.repositioningAnchorSelector&&(this.repositioningAnchorSelector=null),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),this.runAppend(i,arguments)}},t.ChartEngine.prototype.startLongHoldTimer=function(){var e,t;e=this,this.cancelLongHold=!1,this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),t=function(){e.cancelLongHold||(e.longHoldTookEffect=!0,a.W5N(),e.dispatch("longhold",{stx:e,panel:e.currentPanel,x:e.cx,y:e.cy}),e.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(t,this.longHoldTime):0===this.longHoldTime&&t()},t.ChartEngine.prototype.grabHandle=function(e){var i,r;a.W5N(),i="gr",i+="abHandle",r="s",r+="tx-grab",this.runPrepend("grabHandle",arguments)||e&&(t.ChartEngine.crosshairY=e.top+this.top,t.ChartEngine.resizingPanel=e,e.handle.classList.add(r),this.runAppend(i,arguments))},t.ChartEngine.prototype.grabbingHand=function(){this.allowScroll&&this.grabbingScreen&&(t.touchDevice||this.container.classList.add("stx-drag-chart"))},t.ChartEngine.prototype.releaseHandle=function(){if(this.runPrepend("releaseHandle",arguments))return!0;t.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),t.ChartEngine.resizingPanel&&t.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),t.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments)},t.ChartEngine.prototype.findHighlights=function(e,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R;r=this.preferences[e?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=e;var X=this.cx,U=this.cy;if(this.anyHighlighted=!1,this.currentPanel){var Y=this.currentPanel.chart;if(this.activeDrawing&&(i=!0),n=!1,s=null,o=i?{}:{forceShow:!0,type:"drawing"},l={x0:this.tickFromPixel(X-r,Y),x1:this.tickFromPixel(X+r,Y),y0:this.valueFromPixel(U-r,this.currentPanel),y1:this.valueFromPixel(U+r,this.currentPanel),cx0:X-r,cx1:X+r,cy0:U-r,cy1:U+r,r:r},this.repositioningDrawing&&l.x1-l.x0<2?(l.x1++,l.x0--):l.x1==l.x0&&(l.x0-=.5,l.x1+=.5),h=this.markerHelper&&this.markerHelper.chartMap[Y.name]&&this.markerHelper.chartMap[Y.name].markers,!Y.hideDrawings)for(var Q=this.drawingObjects.length-1;Q>=0;Q--)c=this.drawingObjects[Q],this.panels[c.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=c||(u=c.highlighted,d=c.panelName==this.currentPanel.name,c.repositioner=c.intersected(this.crosshairTick,this.crosshairValue,l),d=d&&c.repositioner,!i&&d?(u?(s=c,this.anyHighlighted&&this.singleDrawingHighlight&&(c.highlighted=!1),c.highlighted&&c.highlighted!=u&&(n=!0)):u!=c.highlight(!0)&&(s||(s=c),this.anyHighlighted&&this.singleDrawingHighlight&&(c.highlighted=!1),n=!0),this.anyHighlighted=!0):u!=c.highlight(!1)&&(n=!0),c.highlighted&&(o.noDelete=c.permanent,o.noEdit=!this.callbackListeners.drawingEdit.length)));for(p in this.layout.studies)(m=this.layout.studies[p]).prev=m.highlight,m.highlight=this.yaxisMatches(m,this.grabStartYAxis);for(p in Y.seriesRenderers){(v=Y.seriesRenderers[p]).params.highlight=this.yaxisMatches(v,this.grabStartYAxis);for(var q=0;q<v.seriesParams.length;q++)(y=v.seriesParams[q]).prev=y.highlight,y.highlight=v.params.highlight}for(g=0;h&&g<h.length;g++)(f=h[g]).params.box&&(this.activeMarker=null,f.prev=h[g].highlight,f.highlight=!1);if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!i&&!this.anyHighlighted&&this.controls.anchorHandles)for(var Z in this.controls.anchorHandles){var G=b=this.controls.anchorHandles[Z],K=G.handle,J=G.sd;if(x=this.resolveX(X),C=this.resolveY(U),K){var ee=K.getBoundingClientRect(),te=ee.left,ie=ee.top,ae=ee.right,re=ee.bottom;if(t.boxIntersects(te,ie,ae,re,x,C,x,C)){"anchorHand","le",b.highlighted=!0,this.anyHighlighted=!0,n=!0,o={message:J.name,type:"anchorHandle"};continue}!0===b.highlighted&&(b.highlighted=!1,n=!0)}}if(!i&&!this.anyHighlighted&&Y.dataSegment&&(S=this.barFromPixel(X))>=0&&S<Y.dataSegment.length){for(p in this.overlays)if((m=this.overlays[p]).panel==this.currentPanel.name&&!1!==m.study.isHighlighted)if("function"!=typeof m.study.isHighlighted){if(Y.dataSegment[S]){for(var ne in m.outputMap)if(he.call(this,S,l,ne,m.getYAxis(this))){m.name!=m.panel&&(this.anyHighlighted=!0),m.highlight=ne;break}if(m.highlight){this.highlightedDataSetField=ne;break}}}else m.study.isHighlighted(this,X,U)&&(m.highlight=!0,this.anyHighlighted=!0);for(p in Y.seriesRenderers){if(this.highlightedDataSetField)break;if(D=(k=Y.seriesRenderers[p]).params.panel,k!=this.mainSeriesRenderer&&(k.params.highlightable||this.currentVectorParameters.vectorType)&&D==this.currentPanel.name)for(g=0;g<k.seriesParams.length;g++){if("-","-",">",(A=(y=k.seriesParams[g]).field)||k.highLowBars||(A=this.defaultPlotField||"Close"),y.symbol&&y.subField&&(A+="--\x3e"+y.subField),!(T=k.params.yAxis)&&D&&(T=this.panels[D].yAxis),k.params.step&&S>0){if(!k.caches[y.id])continue;if(!(w=k.caches[y.id][S])&&0!==w)continue;a.s$9(1),(((M=k.caches[y.id][a.v$j(1,S)])||0===M)&&U+r>=w&&U-r<=M||U-r<=w&&U+r>=M)&&(y.highlight=!0,this.anyHighlighted=!0)}else he.call(this,S,l,A,T,k,y.id)&&(y.highlight=!0,this.anyHighlighted=!0);if(y.highlight){this.highlightedDataSetField=A;break}}}}for(p in F=this.preferences.dragging,this.overlays)(m=this.overlays[p]).highlight&&(this.anyHighlighted=!0,L=m.inputs.display||m.name,o={message:L=this.translateIf(L),noDelete:m.permanent,noEdit:!m.editFunction,type:"study"},s=null,(!0===F||F&&F.study)&&(_=m),P=m.getYAxis(this)),m.prev!=m.highlight&&(n=!0);for(p in a.W3G(),Y.seriesRenderers){E=(O=Y.seriesRenderers[p]).params.yAxis?O.params.yAxis.textStyle:null;for(var se=0;se<O.seriesParams.length;se++)y=O.seriesParams[se],O.params.highlightable&&y.highlight&&("a","ut","o",this.anyHighlighted=!0,"auto"==(I=y.color||E)&&(I=this.defaultColor),y.opacity&&1!==y.opacity&&(I=t.hexToRgba(t.colorToHex(I),parseFloat(y.opacity))),o={message:y.display||y.symbol,backgroundColor:I,noDelete:y.permanent,type:"series"},s=null,(!0===F||F&&F.series)&&(_=O,O.params.highlight=!0),P=O.getYAxis(this)),y.prev!=y.highlight&&(n=!0)}for(p in this.plugins)$={},(N=this.plugins[p]).findHighlights&&(($=N.findHighlights(this,e,i)).somethingChanged&&(n=!0),$.anyHighlighted&&(this.anyHighlighted=!0,o=$.stickyArgs||{}));for(var oe in z=this.whichPanel(U),j=this.whichYAxis(z,X),P||(P=j),this.currentBaseline&&(P=this.currentBaseline.getYAxis(this)),P&&(P.highlight||(n=!0),P.highlight=!0),V=[],this.panels)V=V.concat(this.panels[oe].yaxisLHS).concat(this.panels[oe].yaxisRHS);for(p=0;p<V.length;p++)(P!=V[p]||i)&&(V[p].highlight&&(n=!0),V[p].highlight=!1);for(g=0;h&&g<h.length;g++)(H=(f=h[g]).params.box)&&f.params.panelName===this.currentPanel.name&&(B=t.convertBoxToPixels(this,this.currentPanel.name,l),t.boxIntersects(B.x0,B.y0,B.x1,B.y1,H.x0,H.y0,H.x1,H.y1)&&(this.activeMarker=f,f.highlight=!0,this.markerHelper.highlighted.push(f)),f.prev!=f.highlight&&(n=!0));if(n&&(this.draw(),o.panel=z,this.anyHighlighted&&!this.grabStartYAxis?o.panel=z:o={},this.displaySticky(o),this.clearMeasure(),s&&s.measure()),(!0===F||F&&F.yaxis)&&j&&!j.noDraw&&(this.anyHighlight=!0,_=j),this.anyHighlighted||this.setMeasure(),_&&!z.noDrag){if("stx-d","raggab","le",this.longHoldTookEffect&&!this.cancelLongHold){if(_.params)for(p in _.params.dependentOf&&((_=Y.seriesRenderers[_.params.dependentOf]).params.highlight=!0),Y.seriesRenderers)Y.seriesRenderers[p].params.dependentOf==_.params.name&&(Y.seriesRenderers[p].params.highlight=!0);if(this.highlightedDraggable=_,_.getDependents)for(p in W=_.getDependents(this,!0),this.overlays)m=this.overlays[p],W.indexOf(m)>-1&&(m.highlight=!0)}this.container.classList.add("stx-draggable")}else{-333451783,-1204407705,R=2;for(var le=1;-333451783!==a.l5h(le.toString(),le.toString().length,96758);le++)"stx-","dra","gga","ble",this.container.classList.remove("stx-draggable"),R+=2;-1204407705!==a.m6F(R.toString(),R.toString().length,8656)&&this.container.classList.remove("")}this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()}function he(e,i,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,b,x,C,w,k,D,A,T,M,_,F;function P(e){var t;return e?((t=e[u])&&(t[d]||0===t[d])&&(t=t[d]),s&&s.getBasis&&(t+=s.getBasis(e,u,d)),l.transformFunc&&n==l.yAxis?e.transform&&u in e.transform?((t=e.transform[u])&&(t[d]||0===t[d])&&(t=t[d]),t):l.transformFunc(this,l,t):t):null}if("-","-",">",l=this.chart,h=this.currentPanel,n||(n=h.yAxis),c=r.split("--\x3e"),u=c[0],d=c[1],a.W3G(),d||(d="Close"),p=l.dataSegment[S],b=null,x=null,C=null,w=new Array(3),k=s&&s.caches[o],p&&k){for(f=k[S],b=p.tick,(f||0===f)&&(w[0]=1),D=S-1;D>=0;D--)if(k[D]||0===k[D]){y=k[D],a.O_b(88),x=a.v$j(D,b,S),w[1]=1;break}for(D=S+1;D<l.dataSegment.length;D++)if(k[D]||0===k[D]){v=k[D],a.s$9(88),C=a.V9a(D,b,S),w[2]=1;break}}if(null===x&&(m=this.getPreviousBar.call(this,l,r,S))&&(x=m.tick,y=P(m)),null===C&&(g=this.getNextBar.call(this,l,r,S))&&(C=g.tick,v=P(g)),null===x&&null===C)return!1;if(k||(f=P(p),y=P(m),v=P(g),b=p.tick,m&&(x=m.tick),g&&(C=g.tick)),y||0===y||(y=0,x=0),!v&&0!==v)if(f||0===f?(v=f,w[2]=w[0]):(v=y,a.s$9(39),w[a.V9a("2",0)]=w[1]),o&&l.series[o].parameters.extendToEndOfDataSet){a.s$9(23);var L=a.v$j(3,2);C=l.dataSet.length-L}else C=x;return f||0===f||(f=v,b=C,w[0]=w[2],0===y&&0===x&&(y=f,x=b,w[1]=w[0])),A=this.pixelFromTransformedValue.bind(this),f=(T=this.valueFromPixel.bind(this))(w[0]?f:A(f,h,n),h),y=T(w[1]?y:A(y,h,n),h),v=T(w[2]?v:A(v,h,n),h),M=t.convertBoxToPixels(this,h.name,i),_=t.convertBoxToPixels(this,h.name,{x0:x,y0:y,x1:b,y1:f}),F=t.convertBoxToPixels(this,h.name,{x0:b,y0:f,x1:C,y1:v}),!(!t.boxIntersects(M.x0,M.y0,M.x1,M.y1,_.x0,_.y0,_.x1,_.y1,"segment")&&!t.boxIntersects(M.x0,M.y0,M.x1,M.y1,F.x0,F.y0,F.x1,F.y1,"segment"))}},t.ChartEngine.prototype.rightClickHighlighted=function(){var e;e="rightClic",e+="kHighli",e+="gh",e+="ted",this.runPrepend("rightClickHighlighted",arguments)||(this.deleteHighlighted(!0),a.W3G(),this.runAppend(e,arguments))},t.ChartEngine.prototype.deleteHighlighted=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m;if(a="deleteH",a+="ighlighte",a+="d",!this.runPrepend(a,arguments)){if(this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),(r=!1===this.bypassRightClick)||!this.bypassRightClick.drawing)for(var g=this.drawingObjects.length-1;g>=0;g--)(n=this.drawingObjects[g]).highlighted&&(e?this.rightClickDrawing(n,i):n.permanent||(n.abort()||(s=this.exportDrawings(),this.drawingObjects.splice(g,1),this.undoStamp(s,this.exportDrawings())),this.changeOccurred("vector")));if(r||!this.bypassRightClick.study)for(var f in this.overlays)((o=this.overlays[f]).overlay||o.underlay)&&o.highlight&&!o.permanent&&(e||i?this.rightClickOverlay(f,i):this.removeOverlay(f));if(l=this.currentPanel.chart,r||!this.bypassRightClick.series)for(var y in l.seriesRenderers)if((h=l.seriesRenderers[y]).params.highlightable){u=(c=this.panels[h.params.panel])&&c.yAxis.name;for(var v=h.seriesParams.length-1;v>=0;v--)d=h.seriesParams[v],!h.params.highlight&&!d.highlight||d.permanent||(h.removeSeries(d.id),h.seriesParams.length<1&&(this.removeSeriesRenderer(h),h.params.name==u?this.electNewPanelOwner(h.params.panel):(this.checkForEmptyPanel(h.params.panel),(p=this.getYAxisByName(c,h.params.name))&&(p.name=p.studies[0]||p.renderers[1]))))}this.draw(),this.resizeChart(),this.clearMeasure(),(m=this.controls.mSticky)&&(m.style.display="none",m.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},t.ChartEngine.prototype.displayDragOK=function(e){var t,i,r,n,s,o,l,h,c,u;function d(e){var t,i;a.W3G(),t=this.translateIf(e.querySelector(".field").getAttribute("text")),(i=this.whichYAxis(this.whichPanel(this.cy),this.cx,this.cy))&&"all"==i.dropzone&&(t+="--\x3e"+this.translateIf(i.name)),e.querySelector(".field").innerHTML=t}if(t=this.controls.dragOk){if(e||this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights(this.highlightViaTap),r=(i=this.highlightedDraggable)&&i.undraggable&&i.undraggable(this),n=this.cx,s=this.cy,!e){if(i&&!r&&this.longHoldTookEffect&&!this.cancelLongHold)"stx-dr","ag-ser","ies","s","tx-","drag-axis","s","tx-drag-chart",o=i.inputs&&i.inputs.display||i.params&&(i.params.display||i.params.name)||i.name,t.querySelector(".field").setAttribute("text",o),d.call(this,t),t.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace("stx-drag-chart","stx-drag-series");else for(var p in t.style.display="none",this.draw(),this.container.classList.remove("stx-drag-series"),this.container.classList.remove("stx-drag-axis"),this.panels){for("a","ll",(l=this.panels[p].subholder.classList).remove("dropzone"),l.remove("all"),l.remove("left"),l.remove("right"),l.remove("top"),l.remove("bottom"),h=0;h<this.panels[p].yaxisLHS.length;h++)this.panels[p].yaxisLHS[h].dropzone=null;for(h=0;h<this.panels[p].yaxisRHS.length;h++)this.panels[p].yaxisRHS[h].dropzone=null}this.draw()}i&&("p","x",c=s+t.offsetHeight,u=Math.max(0,n-t.offsetWidth),a.s$9(0),t.style.top=a.v$j(c,"px"),a.s$9(0),t.style.left=a.v$j(u,"px"),d.call(this,t))}},t.ChartEngine.prototype.displayDrawOK=function(){var e,i,r,n;a.W5N(),(e=this.controls.drawOk)&&t.Drawing&&((i=t.Drawing[this.currentVectorParameters.vectorType])&&(i=new i),this.highlightedDataSetField&&i&&i.getYValue?(".f","i","e","ld","in","li","ne-blo","ck",e.style.display="inline-block",r=this.cy+e.offsetHeight,n=this.cx-e.offsetWidth,a.s$9(0),e.style.top=a.v$j(r,"px"),a.s$9(0),e.style.left=a.v$j(n,"px"),e.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField)):e.style.display="none")},t.ChartEngine.prototype.mouseWheel=function(e){var i,r,n,s,o,l,h,c,u;if(i="mouseWhee",i+="l",!this.runPrepend("mouseWheel",arguments)&&(e.preventDefault&&e.preventDefault(),""===this.openDialog&&(r=e.deltaX,n=e.deltaY,Math.abs(n)>Math.abs(r)?r=0:n=0,this.lastMouseWheelEvent=Date.now(),0!==Math.abs(r)||0!==Math.abs(n)))){if(this.allowSideswipe&&0!==r)return this.lastMove="horizontal",(s=r)>50&&(s=50),s<-50&&(s=-50),this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=t.ChartEngine.crosshairX,this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mousemoveinner(t.ChartEngine.crosshairX-s,t.ChartEngine.crosshairY),this.updateChartAccessories(),void(this.grabbingScreen=!1);if(this.lastMove="vertical",this.allowZoom&&this.displayInitialized){if(!n)if(o="mous",o+="ew",o+="h",o+="eel",t.wheelEvent==o){a.s$9(23);var d=a.V9a(4,5);a.s$9(89);var p=a.V9a(4,13,17,39);if(n=d/p*e.wheelDelta,e.wheelDeltaX){a.s$9(1);var m=a.V9a(20,19);a.s$9(0);var g=a.v$j(27,13);r=m/g*e.wheelDeltaX}}else n=e.detail;if(void 0===e.deltaMode&&(e.deltaMode="MozMousePixelScroll"==e.type?0:1),l=-n,1==e.deltaMode&&(l*=33),h=null,c=null,this.mouseWheelAcceleration&&(u=Math.max(Math.pow(Math.abs(l),.3),1),a.s$9(90),h=a.V9a(u,.1,1),a.O_b(46),c=a.V9a(.2,1,u)),this.zoomInitiatedByMouseWheel=!0,l>0?this.reverseMouseWheel?this.zoomOut(null,c):this.zoomIn(null,h):l<0&&(this.reverseMouseWheel?this.zoomIn(null,h):this.zoomOut(null,c)),!this.runAppend(i,arguments))return!1}}},t.ChartEngine.handleContextMenu=function(e){for(var i,a=0;a<t.ChartEngine.registeredContainers.length;a++)if((i=t.ChartEngine.registeredContainers[a].stx)&&i.anyHighlighted)return e.preventDefault&&e.preventDefault(),!1},"undefined"!=("undefined"==typeof document?"undefined":j(document))&&document.addEventListener("contextmenu",t.ChartEngine.handleContextMenu),t.ChartEngine.htmlControls={annotationSave:'<span class="stx-btn stx_annotation_save" style="display: none;">save</span>',annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;">cancel</span>',mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span> <span class="mStickyRightClick"><span class="overlayEdit stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="overlayTrashCan stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="mouseDeleteInstructions"><span>(</span><span class="mouseDeleteText">right-click to delete</span><span class="mouseManageText">right-click to manage</span><span class="dragAnchorText">drag to change anchor time</span><span>)</span></span></span><span class="stickyLongPressText">(long-press to drag)</span></div>',drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:'<div class="stx_drag_ok"><div class="icon"></div><div class="field"></div></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none; bottom: 22px;"><div class="chartSize"><span class="stx-zoom-out"></span><span class="stx-zoom-in"></span></div></div>',home:'<div class="stx_jump_today" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},t.ChartEngine.prototype.registerChartControl=function(e,i,r){var n,s,o;if((n=this.controls)&&n.chartControls&&!n.chartControls.querySelector("."+e))return s=null,(o=n.chartControls.querySelector(".stx-zoom-in"))?("s","p","a","n",s=document.createElement("span"),a.O_b(35),s.innerHTML=a.V9a(i,"</span>",'<span class="stx-tooltip">'),a.s$9(0),s.className=a.V9a("stx-chart-control-button ",e),o.parentNode.appendChild(s),r&&t.safeClickTouch(s,r),t.touchDevice||this.makeModal(s),s):void 0},t.ChartEngine.prototype.zoomOut=function(e,t){var i,r,n,s,o;if(i="zo",a.W5N(),i+="omOut",!this.runPrepend(i,arguments))for(var l in this.preferences.zoomOutSpeed?t=this.preferences.zoomOutSpeed:t||(a.s$9(9),t=a.v$j(1,.7)),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,r=this,this.charts)s=(n=this.charts[l]).width*t/this.layout.candleWidth,!1===n.allowScrollFuture&&!1===n.allowScrollPast&&s>n.dataSet.length&&(s=n.dataSet.length),o=this.chart.width/s,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(h(n),this.layout.candleWidth,o);function h(e){return a.W3G(),function(t){var i;if(r.zoomSet(t,e),r.animations.zoom.hasCompleted){if(i="la",i+="yout",r.runAppend("zoomOut",arguments))return;r.changeOccurred(i),r.continuousZoom&&r.continuousZoom.execute(!0)}}}},t.ChartEngine.prototype.zoomIn=function(e,t){var i,r,n,s,o;if(i="zo",i+="o",i+="m",i+="In",!this.runPrepend(i,arguments))for(var l in this.preferences.zoomInSpeed?t=this.preferences.zoomInSpeed:t||(t=.7),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,r=this,this.charts){if(s=(n=this.charts[l]).width*t/this.layout.candleWidth,n.maxTicks-s<1){a.O_b(1);var h=a.v$j(19,20);s=n.maxTicks-h}s<this.minimumZoomTicks&&(s=this.minimumZoomTicks),o=this.chart.width/s,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(c(n),this.layout.candleWidth,o)}function c(e){return function(t){var i;if(r.zoomSet(t,e),a.W5N(),r.animations.zoom.hasCompleted){if(i="z",i+="o",i+="o",i+="mIn",r.runAppend(i,arguments))return;r.changeOccurred("layout"),r.continuousZoom&&r.continuousZoom.execute()}}}},t.ChartEngine.prototype.createCrosshairs=function(){var e,t;this.runPrepend("createCrosshairs",arguments)||!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(e=this.controls.crossX,t=this.controls.crossY,e&&(e.onmousedown||(e.onmousedown=function(e){return e.preventDefault&&e.preventDefault(),!1})),t&&(t.onmousedown||(t.onmousedown=function(e){return a.W3G(),e.preventDefault&&e.preventDefault(),!1})),this.runAppend("createCrosshairs",arguments))},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){i||console.error("interaction feature requires activating movement feature."),a.W3G(),i=!0}},p=function(e){var t,i=V;i.W3G(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":j(_CIQ))?_CIQ:e.CIQ).Marker||(t.ChartEngine.helpersToRegister.push((function(e){i.W3G(),e.markerHelper={chartMap:{},classMap:{},domMarkers:[],highlighted:[]}})),t.ChartEngine.prototype.addToHolder=function(e){var a,r,n,s;a=this.panels[e.params.panelName],i.W3G(),a&&(r=e.params,n=e.node,(s=e.stxNodeCreator)&&s.prepareForHolder&&(n=s.prepareForHolder(e)),r.chartContainer?this.container.appendChild(e.node):r.includeAxis?a.holder.appendChild(e.node):a.subholder.appendChild(n),e.chart=a.chart,s&&s.addToHolder&&s.addToHolder(e),s&&s.expand&&t.Marker.initializeScrollBehavior(s))},t.ChartEngine.prototype.getMarkerArray=function(e,t){var i,a;for(var r in i=[],this.markers)for(var n=0;n<this.markers[r].length;n++)a=this.markers[r][n],"panelName"==e?a.params.panelName==t&&i.push(a):"label"==e?r==t&&i.push(a):"all"==e&&i.push(a);return i},t.ChartEngine.prototype.removeFromHolder=function(e){var t,a,r,n,s,o;if((t=this.panels[e.params.panelName])&&(e.node.parentNode==t.holder?t.holder.removeChild(e.node):e.node.parentNode==t.subholder?t.subholder.removeChild(e.node):e.node.parentNode==this.container&&this.container.removeChild(e.node)),a=this.markers[e.params.label]){for(i.W5N(),r=0;r<a.length;r++)if(a[r]===e){a.splice(r,1);break}if(n=this.markerHelper.chartMap[e.chart.name])for(r=0;r<n.markers.length;r++)if(n.markers[r]===e){n.markers.splice(r,1);break}if((s=this.markerHelper.classMap[e.className])&&(o=s[e.params.panelName]))for(r=0;r<o.length;r++)if(o[r]===e){o.splice(r,1);break}}},t.ChartEngine.prototype.moveMarkers=function(e,t){var i,a;i=this.getMarkerArray("panelName",e);for(var r=0;r<i.length;r++)i[r].params.panelName=t;for(var n in this.markerHelper.classMap)(a=this.markerHelper.classMap[n][e])&&(this.markerHelper.classMap[n][t]=a,delete this.markerHelper.classMap[n][e])},t.ChartEngine.prototype.establishMarkerTicks=function(){var e,t;for(var a in e=this.markerHelper.chartMap,i.W3G(),e)if((t=e[a]).dataSetLength!=this.charts[a].dataSet.length)for(var r=0;r<t.markers.length;r++)this.setMarkerTick(t.markers[r])},t.ChartEngine.prototype.futureTickIfDisplayed=function(e){var t,a,r,n,s,o,l,h,c;if(!((t=e.chart).dataSet.length<1)){a=t.xaxis[t.xaxis.length-1].DT,i.O_b(33);var u=i.v$j(59994,12,6);if(a=new Date(a.getTime()-this.timeZoneOffset*u),!(e.params.x>a)){r=t.maxTicks-t.dataSegment.length,n=t.dataSet.length+r,l=new Date(+t.dataSet[t.dataSet.length-1].DT),i.W3G(),h=this.standardMarketIterator(l,null,t),c=e.params.x.getTime();for(var d=t.dataSet.length;d<n;d++){if(s=l.getTime(),(o=(l=h.next()).getTime())==c)return void(e.tick=d);if(o>c&&s<c)return i.O_b(1),void(e.tick=Math.max(i.v$j(1,d),0))}}}},t.ChartEngine.prototype.setMarkerTick=function(e){var t,a,r,n;if("mast","er",t=e.chart,"master"==e.params.xPositioner&&e.params.x)e.tick=Math.floor(e.params.x/this.layout.periodicity);else if("date"==e.params.xPositioner&&e.params.x){n=e.params.x.getTime();for(var s=0;s<t.dataSet.length;s++){if(a=r=t.dataSet[s].DT.getTime(),s>0&&(a=t.dataSet[s-1].DT.getTime()),r==n)return void(e.tick=s);if(r>n&&a<n)return i.O_b(1),void(e.tick=Math.max(i.V9a(1,s),i.V9a(0,"0")));if(n<r)return void(e.tick=null)}if(t.dataSet.length<1)return;new Date(+t.dataSet[s-1].DT).getTime()<n&&(e.params.future=!0),e.tick=null}},t.ChartEngine.prototype.positionMarkers=function(){var e,t,a,r,n,s,o;function l(){var t,a,r,n;if(i.W5N(),!e.runPrepend("positionMarkers",arguments)){for(var s in e.markerTimeout=null,e.markerHelper.classMap)for(var o in e.markerHelper.classMap[s])t=e.markerHelper.classMap[s][o],a=e.panels[o],t.length&&((r={stx:e,arr:t,panel:a}).firstTick=a.chart.dataSet.length-a.chart.scroll,r.lastTick=r.firstTick+a.chart.dataSegment.length,(n=t[0].constructor.placementFunction)?n(r):e.defaultMarkerPlacement(r));e.runAppend("positionMarkers",arguments)}}if("ti",i.W5N(),"c","k",e=this,t=this.chart,e.markerHelper&&(this.markerDelay||0===this.markerDelay?this.markerTimeout||(this.markerTimeout=setTimeout(l,this.markerDelay)):l(),a=this.getFirstLastDataRecord(t.dataSegment,"tick"),r=this.getFirstLastDataRecord(t.dataSegment,"tick",!0),a&&r)){n=this.getMarkerArray("all");for(var h=0;h<n.length;h++)o=(s=n[h]).stxNodeCreator,a.tick<=s.tick&&s.tick<=r.tick?o&&o.drawMarker&&o.drawMarker(s):s.attached&&o.expand&&(o.expand.style.visibility="hidden")}},t.Marker=t.Marker||function(e){var a,r,n,s;this.params={xPositioner:"date",yPositioner:"value",panelName:"chart",permanent:!1,label:"generic",includeAxis:!1},t.extend(this.params,e),this.params.node||(this.params.node=document.createElement("DIV")),a=this.params.stx,i.W5N(),a?(this.className||(this.className="CIQ.Marker"),t.derivedFrom(this.params.node,t.Marker.NodeCreator)?(this.stxNodeCreator=this.params.node,this.node=this.stxNodeCreator.node):this.node=this.params.node,r=this.params.label,a.markers[r]||(a.markers[r]=[]),a.markers[r].push(this),n=a.panels[this.params.panelName],this.chart=n.chart,a.markerHelper.chartMap[this.chart.name]||(a.markerHelper.chartMap[this.chart.name]={dataSetLength:0,markers:[]}),a.markerHelper.chartMap[this.chart.name].markers.push(this),(s=a.markerHelper.classMap[this.className])||(s=a.markerHelper.classMap[this.className]={}),s[this.params.panelName]||(s[this.params.panelName]=[]),s[this.params.panelName].push(this),this.stxNodeCreator&&this.stxNodeCreator.deferAttach||a.addToHolder(this),a.setMarkerTick(this),this.stxNodeCreator&&this.stxNodeCreator.drawMarker&&this.stxNodeCreator.drawMarker(this)):console.log("Marker created without specifying stx")},t.Marker.prototype.remove=function(){i.W5N(),this.params.stx.removeFromHolder(this)},t.Marker.prototype.click=function(e){var t;"number"==typeof arguments[0]&&(e={cx:arguments[0],cy:arguments[1],panel:arguments[3]});var i=e,a=i.cx,r=i.cy,n=i.panel;this.params.stx&&(t=this.params.node).click&&t.click(a,r,this,n)},t.Marker.prototype.doubleClick=function(e){e.cx,e.cy,e.panel;return!1},t.Marker.prototype.render=function(){var e,t;i.W3G(),e=[this],t={stx:this.params.stx,arr:e,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(t)},t.Marker.removeByLabel=function(e,t){var i,a;i=e.getMarkerArray("label",t);for(var r=0;r<i.length;r++)a=i[r],e.removeFromHolder(a),a.stxNodeCreator&&a.stxNodeCreator.remove&&a.stxNodeCreator.remove(a);e.draw()},t.Marker.positionContentVerticalAndHorizontal=function(e){var a,r,n,s,o,l,h,c,u,d,p;(a=e.querySelectorAll(".stx-marker-expand")[0])&&t.trulyVisible(a)&&(r=a.offsetHeight,(n=a.style).left=n.right="",n.bottom=n.top="",o=(s=getComputedStyle(a)).left,i.W5N(),l=s.bottom,h=e.offsetLeft+parseInt(o,10),c=parseInt(l,10),u=e.offsetTop-(c+r-e.offsetHeight),d=e.parentNode.offsetWidth,p=e.parentNode.offsetHeight,h+a.offsetWidth>d&&(n.right=o,n.left="auto"),e.offsetTop<=p?u>p-r&&(n.top=p-e.offsetTop-r+"px",n.bottom="auto"):(i.s$9(0),n.top=i.v$j(p,"px")),e.offsetTop+e.offsetHeight>=0?u<0&&(n.top=-e.offsetTop+"px",n.bottom="auto"):("0","p","x",n.bottom="0px"))},t.Marker.initializeScrollBehavior=function(e){var i=e.expand;if(i){i.addEventListener(t.wheelEvent,(function(e){return e.stopPropagation()}));var a=(t.UI||{}).scrollbarStyling;a?a.refresh(i):i.style.overflowY="scroll"}},t.ChartEngine.prototype.getBarBounds=function(e){var t,i,a,r;return"pa","n","d","f",this.layout.chartType,t="pandf"==this.layout.aggregationType?{high:Math.max(e.pfOpen,e.pfClose),low:Math.min(e.pfOpen,e.pfClose)}:{high:e.High,low:e.Low},e.markerHigh&&(t.high=e.markerHigh),e.markerLow&&(t.low=e.markerLow),void 0===e.Open&&(i=e.Close),void 0===e.High&&(a=Math.max(e.Open||i,e.Close)),void 0===e.Low&&(r=Math.min(e.Open||i,e.Close)),t.high||0===t.high||(t.high=a),t.low||0===t.low||(t.low=r),t},t.ChartEngine.prototype.defaultMarkerPlacement=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_;a=e.panel,r=e.yAxis?e.yAxis:e.panel.yAxis,n=a.chart,s=e.stx,o=2;for(var F=1;-1374508831!==i.l5h(F.toString(),F.toString().length,5297);F++)l=s.chart.highLowBars,o+=2;-455625996!==i.l5h(o.toString(),o.toString().length,73733)&&(l=s.chart.highLowBars),(h=n.defaultPlotField)&&!l||(h="Close"),c={};for(var P=0;P<e.arr.length;P++)if("n","o","n","e",d=(u=e.arr[P]).params,!u.params.box){if(p=u.node,u.clientWidth||(u.clientWidth=p.clientWidth),u.clientHeight||(u.clientHeight=p.clientHeight),m=null,g=d.xPositioner,f=d.yPositioner,y=u.tick,v=n.dataSet,b=u.clientWidth,"none"!=g){if("bar"==g&&d.x){"p","x",d.x<n.xaxis.length&&(x=n.xaxis[d.x])&&(m=x.data),i.O_b(91);var L=i.V9a(11,0,22);i.O_b(1);var O=i.v$j(5,6);p.style.left=Math.round(s.pixelFromBar(d.x,n)-b/L)+O+"px"}else{if(!y&&0!==y){if(!(d.future&&n.scroll<n.maxTicks)){"-1000p","x",p.style.left="-1000px";continue}if(s.futureTickIfDisplayed(u),!(y=u.tick)&&0!==y){"-10","00","p","x",p.style.left="-1000px";continue}}if(y<v.length&&(m=v[y]),u.leftpx=Math.round(s.pixelFromTick(y,n)-n.left-b/2),u.rightEdge=u.leftpx+b,p.style.left=u.leftpx+"px",y<e.firstTick&&u.rightEdge<n.left-50)continue}if(!m){i.s$9(56);var E=i.V9a(23,50,8,11,23);m=v[v.length-("1">>E)]}}else if(f.indexOf("candle")>-1&&(C=getComputedStyle(p).left)&&(S=s.barFromPixel(parseInt(C,10),n))>=0&&!(m=n.xaxis[S].data)){i.s$9(49);var I=i.v$j(1,8,1,4);m=v[v.length-I]}if(p.style.top="auto",w=d.y,k=u.clientHeight,"none"!=f){"va","lue",i.O_b(67);var N=i.v$j(200,7,29,14);i.O_b(33);i.v$j(449,4049,8);if(i.s$9(24),A=f+(N==i.V9a(17,11,31,8363)||"-")+p.style.left,T=d.chartContainer?s.height:a.yAxis.bottom,M=0,0,void 0===c[A]&&(c[A]=0),_=c[A],c[A]+=k,"value"!=f||!w&&0!==w)if("below_candle"!=f&&"under_candle"!=f||!m)if("on_candle"==f&&m){if(D=m[h],l){i.O_b(89);var $=i.v$j(48,12,6,86);D=(m.Low+m.High)/("2"<<$)}i.s$9(28);var z=i.v$j(0,13,219,17);M=Math.round(T-s.pixelFromPrice(D,a,r)-k/z-_)+"px"}else"top"==f?M=Math.round(T-k-_-a.top)+"px":"bottom"==f?("p","x",M=Math.round(_)+"px"):m&&("p","x",D=m[h],l&&(D=s.getBarBounds(m)[r.flipped?"low":"high"]),M=Math.round(T-s.pixelFromPrice(D,a,r)+_)+"px");else"hi","gh",D=m[h],l&&(D=s.getBarBounds(m)[r.flipped?"high":"low"]),M=Math.round(T-s.pixelFromPrice(D,a,r)-k-_)+"px";else{i.O_b(92);var j=i.V9a(174,8,12,14);M=Math.round(T-s.pixelFromPrice(w,a,r)-k/j)+"px"}p.style.bottom!=M&&(p.style.bottom=M)}t.Marker.positionContentVerticalAndHorizontal(p)}},t.Marker.NodeCreator=function(){},t.Marker.NodeCreator.toNode=function(){return i.W5N(),this.node},t.Marker.Simple=function(e){var a,r,n,s;function o(){t.Marker.positionContentVerticalAndHorizontal(a)}(a=this.node=document.createElement("div")).className="stx-marker",a.classList.add(e.type),e.category&&a.classList.add(e.category),r=t.newChild(a,"div","stx-visual"),t.newChild(a,"div","stx-stem"),"callout"==e.type?("st","x-mark","er","-expand","h","4",s=t.newChild(r,"div","stx-marker-content"),t.newChild(s,"h4",null,e.headline),n=t.newChild(s,"div","stx-marker-expand"),t.newChild(n,"p",null,e.story)):("d","i","v",n=t.newChild(a,"div","stx-marker-expand"),t.newChild(n,"h4",null,e.headline),t.newChild(n,"p",null,e.story),t.safeClickTouch(n,(function(e){a.classList.toggle("highlight")}))),t.safeClickTouch(r,(function(e){var t,r;i.s$9(29),t=-i.V9a("1606267310",64),r=2;for(var n=1;i.m6F(n.toString(),n.toString().length,40341)!==t;n++)a.classList.toggle(""),r+=2;1903737154!==i.m6F(r.toString(),r.toString().length,29320)&&a.classList.toggle(""),a.classList.toggle("highlight"),i.W3G(),setTimeout(o,10)})),this.nodeType="Simple",this.expand=n},t.inheritsFrom(t.Marker.Simple,t.Marker.NodeCreator,!1))},m=function(e){var t,i,a,r,n,s,o;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,r=24*(a=36e5),n=t.Market,t.Market=function(e){this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",i.Date?this.tz_lib=i.Date:this.tz_lib=Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,"undefined"!=j(e)&&e&&!t.isEmpty(e)&&("und","efined",e.market_definition&&(e=e.market_definition),e.rules&&(this.rules=e.rules),e.market_tz&&(this.market_tz=e.market_tz),e.convertOnDaily&&(this.convertOnDaily=e.convertOnDaily),j(e.hour_aligned)&&(this.hour_aligned=e.hour_aligned),void 0!==e.beginningDayOfWeek&&(this.beginningDayOfWeek=e.beginningDayOfWeek),"undefined"!==j(e.enabled_by_default)&&e.enabled_by_default instanceof Array&&(this.enabled_by_default=e.enabled_by_default),this.market_def=e,void 0===this.market_def.name&&(this.market_def.name="no market name specified"),t.Market._createTimeSegments(this),this.getSessionNames())},t.Market.Symbology=function(){},t.Market.Symbology.isForeignSymbol=function(e){return V.W5N(),!1},t.Market.Symbology.isFuturesSymbol=function(e){return V.W5N(),!1},t.Market.Symbology.isRateSymbol=function(e){return V.W5N(),!1},t.Market.Symbology.isForexSymbol=function(e){return V.W5N(),!1},t.Market.Symbology.isForexMetal=function(e,t){return!1},t.Market.Symbology.isForexFuturesSymbol=function(e){return V.W5N(),!!t.Market.Symbology.isForexSymbol(e)||!!t.Market.Symbology.isFuturesSymbol(e)},t.Market.Symbology.factory=function(e){return V.W5N(),null},t.Market.Symbology.encodeTermStructureInstrumentSymbol=function(e,t){console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},n&&t.extend(t.Market,n),t.Market.prototype.sessions=null,t.Market.prototype.beginningDayOfWeek=0,t.Market.prototype.getSessionNames=function(){var e,t;return this.rules?this.sessions||(e=[],t=[],this.rules.map((function(i){i.name&&-1===e.indexOf(i.name)&&(e.push(i.name),t.push({name:i.name,enabled:!!i.enabled&&i.enabled}))})),this.sessions=t):this.sessions=[],this.sessions.slice()},t.Market.prototype._find_next_segment=function(e,t){var i,a,r,n;return this.market_def?(V.W3G(),this.rules?(i=new Date(+e),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(i)&&(r=this.zseg_match.close_parts.hours,n=this.zseg_match.close_parts.minutes,i.setHours(r),i.setMinutes(n),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})),a.next()):null):null},t.Market.prototype._find_prev_segment=function(e,t){var i,a,r,n,s;return this.market_def&&this.rules?(i=new Date(+e),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),null===(r=this._wasOpenIntraDay(i))?(i=new Date(i-6e4),r=this._wasOpenIntraDay(i)):(t&&i.getHours()===this.zseg_match.open_parts.hours&&i.getMinutes()===this.zseg_match.open_parts.minutes||!t&&i.getHours()===this.zseg_match.close_parts.hours&&i.getMinutes()===this.zseg_match.close_parts.minutes)&&(i=a.previous()),r?(n=this.zseg_match.open_parts.hours,s=this.zseg_match.open_parts.minutes,i.setHours(n),i.setMinutes(s),i=(a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})).previous(),this.zseg_match.close_parts.hours===n&&this.zseg_match.close_parts.minutes===s?t?a.next():i:this.zseg_match.adjacent_child?i:t?a.next():i):a.previous()):null},t.Market.prototype.disableSession=function(e,t){var i;if(V.W5N(),i=!1,void 0!==t&&t&&(i=!0),e){for(var a=0;a<this.normalHours.length;a++)this.normalHours[a].name===e&&(this.normalHours[a].enabled=i);for(a=0;a<this.extraHours.length;a++)this.extraHours[a].name===e&&(this.extraHours[a].enabled=i)}},t.Market.prototype.enableSession=function(e){this.disableSession(e,"enable_instead")},t.Market.prototype.enableAllAvailableSessions=function(){var e;e=this.getSessionNames();for(var t=0;t<e.length;t++)this.enableSession(e[t].name)},t.Market.prototype.getClose=function(e,t,i,a){var r,n;if(!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==t){if(this._wasOpenIntraDay(r)&&this.zseg_match.name===t)return r.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.child_;)n=n.child_;for(;!n.enabled;)n=n.parent_;return r.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNextClose=function(e,t,i){var a,r,n;if(!this.market_def)return null;if(!this.rules)return null;for(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),this._wasOpenIntraDay(a)||(a=this.newIterator({begin:a,interval:1,inZone:this.market_tz,outZone:this.market_tz}).next()),r=a.getDate(),n=this.zseg_match;n.adjacent_child;)n=n.adjacent_child,r+=1;return a.setDate(r),a.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),a=this._convertFromMarketTZ(a,i)},t.Market.prototype.getNextOpen=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_next_segment(a),V.W5N(),this.zseg_match.adjacent_parent?(a=this.getNextOpen(a,this.market_tz,this.market_tz),a=this._convertFromMarketTZ(a,i)):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getOpen=function(e,t,i,a){var r,n;if(V.W3G(),!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==t){if(this._wasOpenIntraDay(r)&&this.zseg_match.name==t)return r.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.parent_;)n=n.parent_;for(;!n.enabled;)n=n.child_;return r.setHours(n.open_parts.hours,n.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNormalOpen=function(){var e=this.market_def,t=this.rules;return e&&t?e.normal_daily_open?e.normal_daily_open:"FOREX"===e.name?"17:00":t.find((function(e){var t=e.name;return!t||""===t})).open:"00:00"},t.Market.prototype.getNormalClose=function(){var e=this.market_def,t=this.rules;return e&&t?e.normal_daily_close?e.normal_daily_close:"FOREX"===e.name?"17:00":t.filter((function(e){var t=e.dayofweek,i=e.name;return t&&(!i||""===i)})).pop().close:"24:00"},t.Market.prototype.getPreviousClose=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,V.W3G(),e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!1),this.zseg_match.adjacent_child?this.getPreviousClose(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.close_parts.hours),a.setMinutes(this.zseg_match.close_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getPreviousOpen=function(e,t,i){var a,r;if(!this.market_def)return null;if(!this.rules)return null;if(a=e,!e){-1210630352,1855777835,r=2;for(var n=1;-1210630352!==V.l5h(n.toString(),n.toString().length,30769);n++)a=new Date,t=1,r+=2;1855777835!==V.m6F(r.toString(),r.toString().length,22567)&&(a=new Date,t=null)}return a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))},t.Market.prototype.getSession=function(e,t){return e=this._convertToMarketTZ(e,t),V.W3G(),this._wasOpenIntraDay(e)&&this.zseg_match?this.zseg_match.name:null},t.Market.prototype.marketZoneNow=function(){return V.W5N(),this._convertToMarketTZ(new Date)},t.Market.prototype.isHourAligned=function(){return V.W5N(),this.hour_aligned},t.Market.prototype.isOpen=function(){var e;return e=new Date,this.market_tz&&(e=new this.tz_lib(e.getTime(),this.market_tz)),this._wasOpenIntraDay(e)},t.Market.prototype.isMarketDay=function(){var e;return V.W5N(),e=new Date,this.market_tz&&(e=new this.tz_lib(e.getTime(),this.market_tz)),this._wasOpenDaily(e)},t.Market.prototype.isMarketDate=function(e){return V.W5N(),this._wasOpenDaily(e)},t.Market.prototype.newIterator=function(e){var i,a;return"t","i","c","k",i=!1,e.periodicity?i=e.periodicity:e.multiple&&(i=e.multiple),(a=e.interval)||(a="minute"),"hour"==a&&(a=60),i||(i=1),e.begin||(e.begin=new Date,e.inZone=null),a==parseInt(a,10)&&(a=parseInt(a,10),e.periodicity<1/60?(i=i*a*6e4,a="millisecond"):e.periodicity<1?(i=i*a*60,a="second"):(i*=a,a="minute")),e.timeUnit&&("millisecond"===e.timeUnit||"second"===e.timeUnit?a=e.timeUnit:"tick"===e.timeUnit&&(a="second")),"tick"==a&&(a="second"),e.interval=a,V.W5N(),e.multiple=i,e.market=this,new t.Market.Iterator(e)},t.Market.prototype._wasOpenDaily=function(e){return V.W3G(),this._was_open(e,!1)},t.Market.prototype._wasOpenIntraDay=function(e){return this._was_open(e,!0)},t.Market.prototype._was_open=function(e,t){var i,a,r,n,s,o,l,h,c,u;if("u","n","defined",i=this.zseg_match,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;for(a=!1,r=!1,n=e.getFullYear(),s=e.getMonth()+1,o=e.getDay(),l=e.getDate(),V.W5N(),c=60*e.getHours()*60+60*e.getMinutes()+e.getSeconds(),"undefined"===j(t)&&(t=!0),u=0;u<this.normalHours.length;u++)if((h=this.normalHours[u]).enabled&&((a=h.dayofweek===o)&&t&&(a=c>=h.open&&c<h.close),a)){if(!t&&this.zseg_match&&(h.open_parts.hours>this.zopen_hour||h.open_parts.hours==this.zopen_hour&&h.open_parts.minutes>this.zopen_minute))continue;if(h===i||h.adjacent_parent||h.adjacent_child||(this.shouldResetToBeginningOfSegment=!0),this.zopen_hour=h.open_parts.hours,this.zopen_minute=h.open_parts.minutes,this.zclose_hour=h.close_parts.hours,this.zclose_minute=h.close_parts.minutes,this.zmatch_open=c===h.open,this.zseg_match=h,t)break}for(u=0;u<this.extraHours.length;u++)if((h=this.extraHours[u]).enabled&&("*"===h.year||n===h.year)&&s===h.month&&l===h.day&&(!(r=!t&&h.open||c>=h.open&&c<h.close)&&this.zseg_match&&(a=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),r)){if(!t&&this.zseg_match&&(h.open_parts.hours>this.zopen_hour||h.open_parts.hours==this.zopen_hour&&h.open_parts.minutes>this.zopen_minute))continue;if(this.zopen_hour=h.open_parts.hours,this.zopen_minute=h.open_parts.minutes,this.zclose_hour=h.close_parts.hours,this.zclose_minute=h.close_parts.minutes,this.zmatch_open=c===h.open,this.zseg_match=h,t)break}return this.zseg_match},t.Market.prototype._wasClosed=function(e){return!this._was_open(e,!0)},t.Market.prototype._wasOpen=function(e){return this._was_open(e,!0)},t.Market.prototype._tzDifferenceMillis=function(e,t,i){var a;return 0,a=e,60*(e.getTimezoneOffset()-a.getTimezoneOffset())*1e3},t.Market._createTimeSegments=function(e){var t,i,a,r,n;t=function(e,t){if(24===e.close_parts.hours&&0===t.open_parts.hours&&0===t.open_parts.minutes){if(i.dayofweek===r.dayofweek-1)return!0;if(6===i.dayofweek&&0===r.dayofweek)return!0}return!1};for(var o=0;o<e.rules.length;o++){void 0===(a=JSON.parse(JSON.stringify(e.rules[o]))).open&&void 0===a.close&&(a.open="00:00",a.close="00:00"),a.hasOwnProperty("name")||(a.name="");try{if("un","defin","ed",void 0!==a.dayofweek?(a.year="*",r=s._createDayOfWeekSegment(e,a),i&&(i.dayofweek===r.dayofweek?(i.child_=r,r.parent_=i):t(i,r)&&(i.adjacent_child=r,r.adjacent_parent=i)),i=r):"undefined"!==j(a.date)?(a.isDayOfWeek=!1,a.dayofweek=-1,r=s._createDateTimeSegment(e,a)):console.log("Error, unknown rule type "+a),e.enabled_by_default)for(var l=0;l<e.enabled_by_default.length;l++)if(n=e.enabled_by_default[l],r.name===n){r.enabled=!0;break}}catch(e){console.log("Error, creating market rules "+e)}}},t.Market._timeSegment={},(s=t.Market._timeSegment).re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,s.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s.re_split_hours_minutes=/^(\d\d):(\d\d)$/,s.re_split_hour_minutes=/^(\d):(\d\d)$/,s._hashCode=function(e){var t,i,a;if(t=0,V.W3G(),0===e.length)return t;for(i=0,a=e.length;i<a;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t},s._splitHoursMinutes=function(e){var t,i,a;if(i={hours:NaN,minutes:NaN},null===(t=s.re_split_hour_minutes.exec(e))&&null===(t=s.re_split_hours_minutes.exec(e)))return i;i.hours=parseInt(t[1],10),i.minutes=parseInt(t[2],10),a=2;for(var r=1;369040853!==V.l5h(r.toString(),r.toString().length,38265);r++)return i;return-1551662406!==V.m6F(a.toString(),a.toString().length,14709)?i:void 0},s._createDayOfWeekSegment=function(e,t){var i;return""===(i={name:t.name,isDayOfWeek:!0,dayofweek:t.dayofweek,date_str:"*",open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1}).name&&(i.enabled=!0),i.hash_code=this._hashCode((i.open+i.close).toString()),V.W3G(),e.normalHours.push(i),i},s._createDateTimeSegment=function(e,t){var i,a,r;if(null===(i=this.re_regular_iso.exec(t.date))){if(null===(i=this.re_wild_card_iso.exec(t.date)))return void console.log("Warning: invalid date format on rule -> "+t.date);a="*"}else a=parseInt(i[1],10);return""===(r={name:t.name,isDayOfWeek:!1,dayofweek:-1,year:a,month:parseInt(i[2],10),day:parseInt(i[3],10),date_str:t.date,open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),enabled:!1}).name&&(r.enabled=!0),r.hash_key=this._hashCode(r.date_str+r.open+r.close),e.extraHours.push(r),r},s._secSinceMidnight=function(e,t,i){var a,r,n;return a=t.split(":"),n=60*(r=parseInt(a[0],10))*60+60*parseInt(a[1],10),i||24===r&&(n=60*r*60+1),n},t.Market.prototype._convertToMarketTZ=function(e,t){var i;return(i=t?new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t):new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())).setTimezone&&i.setTimezone(this.market_tz),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())},t.Market.prototype._convertFromMarketTZ=function(e,t){var i;return i=new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),this.market_tz),t?(i.setTimezone&&i.setTimezone(t),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(i.getTime())},t.Market.Iterator=function(e){this.market=e.market,this.begin=e.begin,this.interval=e.interval,this.multiple=e.multiple,this.inZone=e.inZone,this.outZone=e.outZone,this.clock=new t.Market.Iterator._Clock(e.market,e.interval,e.multiple),V.W5N(),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,e.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1},t.Market.Iterator.prototype.date=function(){return this.clock._date()},t.Market.Iterator.prototype.futureTick=function(e){var t,i,a,r,n,s,o;if(this.clock.skip=1,t=0,(i=this.intraDay?this.market._convertToMarketTZ(e.end,this.inZone).getTime():e.end.getTime())===(a=this.clock.ctime))return t;if(r=2,1e3,n=0,e.sample_size&&(r=e.sample_size),s=(new Date).getTime(),i>a){for(this.clock.forward=!0;this.clock.ctime<i;)if(t+=1,n+=1,this.clock._findNext(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(this.clock.ctime-a)/t,t=Math.floor((i-a)/o);break}this.clock.ctime>i&&t--}else for(this.clock.forward=!1;this.clock.ctime>i;)if(t+=1,n+=1,this.clock._findPrevious(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(a-this.clock.ctime)/t,t=Math.floor((a-i)/o);break}return t},t.Market.Iterator.prototype.isHourAligned=function(){return!this.intraDay||this.market.isHourAligned()},t.Market.Iterator.prototype.isOpen=function(){return this.market.isOpen()},t.Market.Iterator.prototype.next=function(e){this.clock.skip=1,e&&(this.clock.skip=e),this.clock.forward=!0;for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator.prototype.peek=function(){return this.clock._peek()},t.Market.Iterator.prototype.previous=function(e){this.clock.skip=1,V.W3G(),e&&(this.clock.skip=e),this.clock.forward=!1;for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator._Clock=function(e,t,i){var n,s;i%60==0&&"second"===t&&(t="minute",i/=60),this.market=e,this.interval=t,V.W5N(),this.multiple=i,this.intra_day=!1,this.intervals=[],this.max_iters=10080,n=r,s=this._dayImpl,"millisecond"===t?(s=this._millisImpl,n=1):"second"===t?(s=this._secondImpl,n=1e3):"minute"===t?(s=this._minuteImpl,n=6e4):"hour"===t?(s=this._hourImpl,n=a):"day"===t?(s=this._dayImpl,n=r):"week"===t?(s=this._weekImpl,n=7*r):"month"===t?(s=this._monthImpl,n=30*r):console.log('Periodicity ERROR: "'+t+'" is not a valid interval. Please see setPeriodicity() for details.'),this.tick_time=n*i,this.intra_day=this.tick_time<r,this._findPrevious=this._findNext=s},(o=t.Market.Iterator._Clock.prototype)._total_minutes=function(e,t,i,a){return 60*(i-e)-t+a},o._alignMinutes=function(){var e,t,i,a,r;if(!this.market.market_def||void 0===this.market.zopen_minute)return[];for(e=this.market.zopen_minute,(t=this.market.zseg_match)&&t.adjacent_parent?e=t.adjacent_parent.open/60-1440:this.market.isHourAligned()&&this.multiple%60==0&&(e=0),i=this._total_minutes(this.market.zopen_hour,e,this.market.zclose_hour,this.market.zclose_minute),a=[],r=0;r<i;)a.push(e+r),r+=this.multiple;return a},o._alignBaseZero=function(e){var t,i;for(i=[t=0];!((t+=this.multiple)>=e);)i.push(t);return i},o._date=function(){var e,t;return e=Math.round(this.ctime),t=new Date(e),this.intra_day?this.display_date=new Date(e+this.shift_millis):this.display_date=t,V.W3G(),t},o._alignToBoundary=function(e,t){var i,a,r;i=0,a=0,r=t;for(var n=0;n<e.length-1&&(i=e[n],a=e[n+1],t!==i&&t!==a);n++){if(t>i&&t<a){r=i;break}n+1===e.length-1&&(r=a)}return V.W5N(),r},o._peek=function(){return V.W5N(),this._date().toString()},o._seekHr=function(){V.W3G(),this.forward?this.ctime-=a:this.ctime+=a},o._setStart=function(e){var t,i;t=this.market._tzDifferenceMillis(e),i=new Date(e.getTime()+t),this.shift_millis=t,this.ctime=i.getTime(),this.shift_millis=0,this.ctime=e.getTime()},o._tickTock=function(){var e;if(this.forward){-1786601353,-1885585299,e=2;for(var t=1;-1786601353!==V.l5h(t.toString(),t.toString().length,61295);t++)this.ctime+=this.tick_time,e+=2;-1885585299!==V.l5h(e.toString(),e.toString().length,73559)&&(this.ctime/=this.tick_time)}else this.ctime-=this.tick_time},o._tockTick=function(){this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},o._tickTock24=function(){V.W5N(),this.ctime+=r},o._tockTick24=function(){V.W3G(),this.ctime-=r},o._windMaybe=function(e,t){var i,a,r,n;for(V.W5N(),i=0,a=new Date(this.ctime),r=!1;!e.call(this.market,a);)if(t.call(this),r=!0,a=new Date(this.ctime),(i+=1)>this.max_iters){n="Warning! max iterations ("+this.max_iters,n+=") reached with no rule match.",console.log(n);break}return r},o._millisImpl=function(){var e,t,i,a,r,n,s,o,l,h;return e=!1,this.mperiods_aligned||(t=this._alignBaseZero(1e3),a=(i=new Date(this.ctime)).getMilliseconds(),a=this._alignToBoundary(t,a),i.setMilliseconds(0),this.ctime=i.getTime()+a,this.mperiods_aligned=!0,e=!0),r=this._date().getMinutes(),V.W5N(),this._tickTock(),n=this._date().getMinutes(),!e&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this._date().getMilliseconds(),l=this.tick_time,this.tick_time=6e4,h=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=l,this.multiple=h,this.ctime+=1e3*s+o),this._date()},o._secondImpl=function(){var e,t,i,a,r,n,s,o,l;return e=!1,this.speriod_aligned||(t=this._alignBaseZero(60),a=(i=new Date(this.ctime)).getSeconds(),a=this._alignToBoundary(t,a),i.setSeconds(a),i.setMilliseconds(0),this.ctime=i.getTime(),this.speriod_aligned=!0,e=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!e&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this.tick_time,this.tick_time=6e4,l=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=o,this.multiple=l,this.ctime+=1e3*s),this._date()},o._minuteImpl=function(){var e,t,i,a,r,n,s,o,l,h;return e=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),i=(t=new Date(this.ctime)).getTimezoneOffset(),a=t.getMinutes(),r=t.getHours(),n=this._alignMinutes(),s=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,r,a)+this.market.zopen_minute,s=e?this.forward?n[n.length-1]:n[0]:this._alignToBoundary(n,s),r=Math.floor(s/60)+this.market.zopen_hour,t.setHours(r,s%60,0,0),o=t.getTimezoneOffset()-i,(this.forward&&o<0||!this.forward&&o>0)&&t.setTime(t.getTime()-6e4*o),this.ctime=t.getTime(),this._tickTock(),l=this.market.hour_aligned&&this.multiple%60==0,(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!l&&this.shouldResetToBeginningOfSegment)&&(t=new Date(this.ctime),this.forward?(t.setMinutes(this.market.zopen_minute),t.setHours(this.market.zopen_hour)):(h=(n=this._alignMinutes())[n.length-1],t.setMinutes(h%60),t.setHours(Math.floor(h/60)+this.market.zopen_hour)),this.ctime=t.getTime()),this._date()},o._hourImpl=function(){var e,t,i,a,r;return V.W5N(),this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),e=new Date(this.ctime),this.market.isHourAligned()?e.setMinutes(0):e.setMinutes(this.market.zopen_minute),e.setSeconds(0),e.setMilliseconds(0),this.ctime=e.getTime(),this._tickTock(),t=this.market.zseg_match,(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!this.market.hour_aligned&&t!=this.market.zseg_match)&&(i=new Date(this.ctime),this.forward?(i.setMinutes(this.market.zopen_minute),i.setHours(this.market.zopen_hour)):(r=(a=this._alignMinutes())[a.length-1],i.setMinutes(r%60),i.setHours(Math.floor(r/60)+this.market.zopen_hour)),this.ctime=i.getTime()),this._date()},o._dayImpl=function(){var e,t;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),(e=new Date(this.ctime)).setHours(12,0,0,0),V.W3G(),this.ctime=e.getTime(),t=0;t<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(t+=1);return(e=new Date(this.ctime)).setHours(0),this.ctime=e.getTime(),this._date()},o._weekImpl=function(){var e,t;for(e=this.market,t=new Date(this.ctime),V.W5N(),t.setHours(12),this.ctime=t.getTime(),this._tickTock(),t=new Date(this.ctime);t.getDay()!==e.beginningDayOfWeek;)this._tockTick24(),t=new Date(this.ctime);return this._windMaybe(e._wasOpenDaily,this._tickTock24),(t=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=t.getTime(),this._date()},o._monthImpl=function(){var e;return(e=new Date(this.ctime)).setDate(15),this.ctime=e.getTime(),this._tickTock(),(e=new Date(this.ctime)).setDate(1),e.setHours(12),this.ctime=e.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),(e=new Date(this.ctime)).setHours(0,0,0,0),V.W3G(),this.ctime=e.getTime(),this._date()},o._findNext=null,o._findPrevious=null},g=function(e){var t,i,a,r=V;r.W5N(),r.m3s=function(e){if(r.W3G(),r&&e)return r.i8e(e)},r.P91=function(e){if(r.W5N(),r&&e)return r.i8e(e)},r.X86=function(e){if(r.W5N(),r)return r.i8e(e)},t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="valid",t.valid=0,t[r.x1I("73e7")?"ChartEngine":""][r.X86("76da")?"":"prototype"][r.O0o("d68e")?"mousemoveinner":""]=function(e,a){r.k_x=function(e){if(r.W5N(),r&&e)return r.N4H(e)},r.O8p=function(e){if(r.W5N(),r)return r.N4H(e)},r.K4n=function(e){if(r.W3G(),r)return r.i8e(e)};var n=-(r.x$F("359d")?601500727:186577206),s=-(r.K4n("774b")?1638252184:2428117228),o=-(r.P91("6aea")?637126e3:113100024),l=-(r.N$t("1cd8")?1636454950:2006868665),h=r.V1Y("a942")?1251022236:6248277390,c=-901100827,u=r.z2h("bf6e")?4323687070:1820977520,d=r.m3s("1cf2")?3632780311:1541769497,p=-(r.N_P("d3e2")?7321761046:1684866164),m=324260868;if(r.Z4a(0,!1,r.U56("ce63")?418193:552997)===n||r.h3V(0,!1,999056)===s||r.h3V(9,!!r.h8D("6692"),476537)===o||r.Z4a(r.O8p("6a8e")?3:9,!0,718872)===l||r.Z4a(8,!0,428923)===h||r.Z4a(10,!0,783307)===c||r.Z4a(9,!0,r.k_x("e6dd")?446240:355041)===u||r.h3V(9,!0,647601)===d||r.h3V(10,!0,523543)===p||r.Z4a(8,!0,288896)===m){var g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W=function(e){1785073975!==r.h3V(0,!1,256134)&&-1694958399!==r.Z4a(0,!1,984785)&&8214662!==r.h3V(9,!0,372746)&&837009359!==r.Z4a(9,!0,222297)&&-620899382!==r.Z4a(8,!0,931038)&&213668177!==r.Z4a(10,!0,255423)&&-391255666!==r.h3V(9,!0,550507)&&-1252475600!==r.h3V(9,!0,775878)&&-868346271!==r.Z4a(10,!0,692060)&&-111987682!==r.h3V(8,!0,493631)||(e.currentBaseline=null,e.runAppend("mousemoveinner",f))};if(!this.chart.canvas)return;if(!(t.isAndroid||t.isIOS7or8||this.chart.canvas.height==Math.floor(this.devicePixelRatio*this.chart.container.clientHeight)&&this.chart.canvas.width==Math.floor(this.devicePixelRatio*this.chart.container.clientWidth)))return void this.resizeChart();if(this.runPrepend("mousemoveinner",arguments))return;if(f=arguments,y=this.container.getBoundingClientRect(),this.top=y.top,this.left=y.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!0,t.ChartEngine.crosshairX=e,t.ChartEngine.crosshairY=a,v=this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),b=this.cx=this.crossXActualPos=this.backOutX(t.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted){r.O_b(1);var R=r.v$j(32,34);r.O_b(33);var X=r.V9a(0,20,18);if(Math.pow(this.grabStartX-e,R)+Math.pow(this.grabStartY-a,X)<36)return}if(this.cancelLongHold=!0,x=function(e,a){if(632240235===r.h3V(0,!1,223215)||1331583677===r.h3V(0,!1,461850)||-1063154332===r.h3V(9,!0,830392)||-844066008===r.Z4a(9,!0,653069)||1708338573===r.Z4a(8,!0,340290)||1191575025===r.h3V(10,!0,120563)||688634741===r.h3V(9,!0,611284)||-51586579===r.Z4a(9,!0,593265)||611343389===r.Z4a(10,!0,213465)||575504350===r.h3V(8,!0,244680)){if(0===t[i])return e.whichPanel(a)||e.chart.panel;e.draw[i]||(e.draw=function(){r.W3G();-585560611!==r.h3V(0,!1,289682)&&318241326!==r.h3V(0,!1,535056)&&-226969794!==r.h3V(9,!0,709743)&&-1253718984!==r.h3V(9,!0,432080)&&-1657146144!==r.h3V(8,!0,344704)&&-1502956068!==r.h3V(10,!0,714864)&&-927500610!==r.Z4a(9,!0,207399)&&1979631053!==r.h3V(9,!0,874399)&&1814663176!==r.h3V(10,!0,720281)&&-853062415!==r.Z4a(8,!0,331639)||t.clearCanvas(this.chart.canvas,this)},e.draw[i]=!0)}},this.currentPanel=x(this,v),!this.currentPanel)return;if((C=this.currentPanel.chart).dataSet&&(S="c",S+="hart",this.crosshairTick=this.tickFromPixel(b,C),g=this.valueFromPixel(v,this.currentPanel),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,g),(w=this.currentPanel.name==S?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField)&&this.crosshairTick<C.dataSet.length&&this.crosshairTick>-1&&(g=C.dataSet[this.crosshairTick][w],this.crossYActualPos=this.pixelFromPrice(g,this.currentPanel))),t.ChartEngine.crosshairX>=this.left&&t.ChartEngine.crosshairX<=this.right&&t.ChartEngine.crosshairY>=this.top&&t.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,k=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&t.ChartEngine.crosshairY<=k+this.top&&t.ChartEngine.crosshairY>k-this.xaxisHeight+this.top,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis))return;if(!this.displayCrosshairs&&!t.ChartEngine.resizingPanel)return void this.undisplayCrosshairs();if(this.repositioningBaseline)return this.setBaselineUserLevel(),W(this);if(this.repositioningAnchorSelector)return D=this.repositioningAnchorSelector.hoverTick,(A=this.tickFromPixel(this.cx,this.chart))>=0&&A<this.chart.dataSet.length&&(!D||0===D||A!==D)&&(this.repositioningAnchorSelector.hoverTick=A,this.draw()),W(this);if(this.grabbingScreen&&!t.ChartEngine.resizingPanel){if(this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(b,v),W(this);if(this.anyHighlighted){for(T in t.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1,this.overlays)this.overlays[T].highlight=!1;for(T in C.series)C.series[T].highlight=!1;this.displaySticky()}if(-1==this.grabStartX&&(this.grabStartX=t.ChartEngine.crosshairX,this.grabStartScrollX=C.scroll),-1==this.grabStartY&&(this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),M=t.ChartEngine.crosshairX-this.grabStartX,_=t.ChartEngine.crosshairY-this.grabStartY,0===M&&0===_)return;if(Math.abs(M)+Math.abs(_)>5&&(this.grabOverrideClick=!0),P=this.layout.candleWidth,this.allowZoom&&"pan"!=this.grabMode&&(0===this.grabMode.indexOf("zoom")||this.overXAxis||this.grabStartYAxis)){if(L="z",L+="o",L+="om",L+="-y",""===this.grabMode&&(this.overXAxis?this.grabMode="zoom-x":this.grabStartYAxis&&(this.grabMode="zoom-y")),"zoom-x"==this.grabMode?_=0:this.grabMode==L&&(M=0),M&&(this.grabStartX=t.ChartEngine.crosshairX,O=P-M/this.chart.maxTicks,this.zoomSet(O,this.chart)),this.layout.setSpan&&(this.layout.setSpan=null,this.changeOccurred("layout")),F=this.grabStartYAxis)if(F.flipped&&(_*=-1),F.zoom=Math.round(this.grabStartZoom+_),this.grabStartZoom<F.height){if(F.zoom>=F.height){r.O_b(16);var U=r.V9a(6,0,5);F.zoom=F.height-U}}else if(F.zoom<=F.height){r.O_b(14);var Y=r.V9a(2,61,10,12);F.zoom=F.height+Y}}else if(!this.overYAxis&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(E="p",E+="an",Math.abs(_)<this.yTolerance){if(!this.yToleranceBroken&&(_=0,0===M))return}else this.yToleranceBroken=!0;this.grabStartMicropixels||(this.grabStartMicropixels=0),this.grabMode=E,C.scroll=this.grabStartScrollX,r.s$9(22);var Q=r.v$j(9,167,0,18);r.O_b(1);var q=r.V9a(10,11);if(this.micropixels=this.grabStartMicropixels+M*(this.shift?Q:q),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=P,C.scroll++;for(;this.micropixels<-P;)this.micropixels+=P,C.scroll--}if(C.scroll>=C.maxTicks){I=1403366981,N=625018721,$=2;for(var Z=1;r.l5h(Z.toString(),Z.toString().length,68374)!==I;Z++)this.preferences.whitespace=this.initialWhitespace,$+=2;r.l5h($.toString(),$.toString().length,66893)!==N&&(this.preferences.whitespace=this.initialWhitespace)}else this.preferences.whitespace=(C.maxTicks-C.scroll)*P;this.currentPanel==this.grabStartPanel&&((F=this.currentPanel.yAxis).flipped&&(r.O_b(12),_*=-r.V9a(32,"1")),F.scroll=this.grabStartScrollY+_),this.dispatch("scroll",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}return z=function(e){if(r.W3G(),-1377086126===r.h3V(0,!1,679196)||-1475525855===r.Z4a(0,!1,490370)||2046097683===r.Z4a(9,!0,647191)||-636865186===r.h3V(9,!0,576063)||-1908069135===r.h3V(8,!0,514400)||155777695===r.Z4a(10,!0,528042)||153495854===r.Z4a(9,!0,222789)||1389782972===r.h3V(9,!0,985213)||-1040226959===r.Z4a(10,!0,558331)||-525125091===r.Z4a(8,!0,223583))return function(){r.W3G(),387294878!==r.h3V(0,!1,462349)&&-1999433205!==r.h3V(0,!1,529825)&&711567530!==r.Z4a(9,!0,415064)&&-1464157040!==r.h3V(9,!0,949948)&&-875208496!==r.h3V(8,!0,247884)&&-1707112626!==r.h3V(10,!0,859284)&&-743572626!==r.h3V(9,!0,873006)&&-348825631!==r.Z4a(9,!0,742460)&&1738942947!==r.Z4a(10,!0,772757)&&1215171122!==r.Z4a(8,!0,710148)||(e.draw(),e.updateChartAccessories())}},t.ChartEngine.useAnimation?window.requestAnimationFrame(z(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),void this.undisplayCrosshairs()}return this.grabMode="",this.overXAxis||this.overYAxis?(this.updateChartAccessories(),this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights(),W(this)):(this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,C)-.5+"px"),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.insideChart&&!t.ChartEngine.resizingPanel?(j=this.currentVectorParameters.vectorType,this.layout.studies&&(V=this.layout.studies[this.currentPanel.name])&&(this.preferences.dragging&&this.preferences.dragging.study||delete this.overlays[V.name],j&&(this.overlays[V.name]=V)),t.Drawing&&j&&t.Drawing[j]&&(new t.Drawing[j]).dragToDraw||this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):t.ChartEngine.drawingLine?this.activeDrawing&&(H=this.panels[this.activeDrawing.panelName],g=this.adjustIfNecessary(H,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),H)),this.magnetizedPrice&&H.name==this.currentPanel.name&&(g=this.adjustIfNecessary(H,this.crosshairTick,this.magnetizedPrice)),null===this.magnetizedPrice&&t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,g),this.activeDrawing.measure&&this.activeDrawing.measure()):t.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(B="m",B+="ov",B+="e",this.dispatch(B,{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!1}),this.tapForHighlighting&&this.touchingEvent&&!this.anyHighlighted||this.findHighlights()),W(this))}},t.ChartEngine.prototype.swipeStart=function(e){var t;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=e.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=e,this.swipe.end=!1,r.O_b(29),this.swipe.timeConstant=r.v$j("325",32),this.swipe.cb=null,t=this,requestAnimationFrame((function(){r.W3G(),t.swipeSample()}))},t.ChartEngine.prototype.swipeSample=function(){var e,i,a,n,s,o,l;(e=this.swipe).end||(i=this,20,(n=(a=Date.now())-e.timestamp)<20?requestAnimationFrame((function(){r.W3G(),i.swipeSample()})):(o=t.touchDevice?.4:.8,e.timestamp=a,s=(e.chart.scroll-e.frame)*this.layout.candleWidth+this.micropixels-e.micropixels,e.frame=e.chart.scroll,e.micropixels=this.micropixels,r.O_b(93),l=o*r.v$j(1e3,n,1,s)+.2*e.velocity,Math.abs(l)>Math.abs(e.velocity)&&(e.velocity=l),Math.abs(s)<6&&(r.O_b(42),e.velocity=r.V9a("0",0)),requestAnimationFrame((function(){i.swipeSample()}))))},t.ChartEngine.prototype.swipeRelease=function(){var e,t;r.W3G(),(e=this.swipe).velocity>3e3&&(e.velocity=3e3),e.velocity<-3e3&&(e.velocity=-3e3),(e.velocity>10||e.velocity<-10)&&(e.amplitude=.8*e.velocity,e.scroll=e.chart.scroll,e.target=e.amplitude,e.timestamp=Date.now(),t=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame((function(){t.autoscroll()})))},t.ChartEngine.prototype.dragPlotOrAxis=function(e,i){var a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,V,H,B,W,R,X,U,Y;if("drop","zo","ne","rig","h","t",(function(){var e,t,i,a;function r(t){return function(i){t.subholder.classList.contains(i)&&(t.subholder.classList.remove(i),e=!0)}}for(var n in e=!1,this.panels){for(t="t",t+="o",i="righ",["dropzone","all","left",i+="t",t+="p","bottom"].forEach(r(this.panels[n])),a=0;a<this.panels[n].yaxisLHS.length;a++)this.panels[n].yaxisLHS[a].dropzone&&(e=!0),this.panels[n].yaxisLHS[a].dropzone=null;for(a=0;a<this.panels[n].yaxisRHS.length;a++)this.panels[n].yaxisRHS[a].dropzone&&(e=!0),this.panels[n].yaxisRHS[a].dropzone=null}return e}.call(this)||this.grabbingScreen)&&(a=null,20,10,r.s$9(1),n=this.whichPanel(r.v$j(20,i)),r.O_b(0),s=this.whichPanel(r.V9a(i,20)),o=this.whichPanel(i),l=this.highlightedDraggable,o&&(!l.undraggable||!l.undraggable(this)))){for(x in h=this.whichYAxis(o,e,i),r.O_b(1),c=this.whichYAxis(o,r.v$j(10,e),i),r.s$9(0),u=this.whichYAxis(o,r.V9a(e,10),i),this.xAxisAsFooter&&o.name==Object.keys(this.panels).pop()&&(s=this.whichPanel(i+20+this.xaxisHeight),a&&(a+=this.xaxisHeight)),d=!1,p=!1,!1,r.W3G(),t.Renderer&&(d=l instanceof t.Renderer),t.Studies&&(p=l instanceof t.Studies.StudyDescriptor),g=function(e){if(!m){if("l","e","f","t","right"==e){r.s$9(94);var t=r.V9a(16,7,16,1,12);return o.right-o.width/t}if("left"==e){r.s$9(95);var i=r.v$j(9,15,3,7);return o.left+o.width/("6"|i)}}r.O_b(96);var a=r.v$j(12,5,0,5);return(o.left+o.right)/a},(m=l instanceof t.ChartEngine.YAxis)||h||(e<g("left")?c=this.whichYAxis(o,o.left-1,i):e>g("right")&&(u=this.whichYAxis(o,o.right+1,i))),f=[],l.getDependents&&(f=l.getDependents(this,!0)),y=l.panel,v=l.getYAxis(this),d?y=l.params.panel:m&&(y=this.grabStartPanel.name),b=this.panels[y],this.panels)this.panels[x].soloing&&(C=!0);if(S=v.isShared(this),w=!m&&!C&&(b!==o&&b!=n&&b!=s||!this.checkForEmptyPanel(b,!0,[l].concat(f))),k=y==o.name&&v!==h&&v!==u&&v!==c||S,!w||n&&o===n)if(!w||s&&o===s){if(o!==b)m||o.noDrag||("dr","op","zone",o.subholder.classList.add("dropzone"),o.subholder.classList.add("all"),D=o.name);else if((!o.yaxisRHS.length||1==o.yaxisRHS.length&&o.yaxisRHS[0]==v&&"none"==v.position)&&!h&&!u&&e>g("right"))"ri","gh","t",o.subholder.classList.add("dropzone"),o.subholder.classList.add("right"),A="right";else if((!o.yaxisLHS.length||1==o.yaxisLHS.length&&o.yaxisLHS[0]==v&&"none"==v.position)&&!h&&!c&&e<g("left"))o.subholder.classList.add("dropzone"),o.subholder.classList.add("left"),A="left";else if(k){if(m&&e>o.left&&e<o.right){r.s$9(1);var Q=r.v$j(2,3);T=o.yaxisLHS[o.yaxisLHS.length-Q],M=o.yaxisRHS[0],e<(_=g())&&T!=v?c=T:e>_&&M!=v&&(u=M)}m&&h===v||(F=!m&&S,!u||u===v&&!F||h&&h===u?!c||c===v&&!F||h&&h===c?h&&(u||h===v&&!F?c||h===v&&!F?h!==v&&(h.dropzone="all"):("le","ft",h.dropzone="left"):h.dropzone="right",h.dropzone&&(A=h.position||this.chart.panel.yAxis.position||"right")):("ri","gh","t","r","i","g","ht",c.dropzone="right",A=c.position||this.chart.panel.yAxis.position||"right"):(u.dropzone="left",A=u.position||this.chart.panel.yAxis.position||"right"))}}else o.subholder.classList.add("dropzone"),o.subholder.classList.add("bottom");else o.subholder.classList.add("dropzone"),o.subholder.classList.add("top"),s=o;if(this.grabbingScreen||!o.subholder.classList.contains("dropzone")&&!A)this.draw();else{if(L=-1,!D&&!A&&w){for(var q in D=p?l.inputs.id:l.params.name||t.uniqueID(),this.panels)if(L++,this.panels[q]==s)break;s||L++,this.panels[y].yAxis.name==D&&(y=this.electNewPanelOwner(y)),O=p?l.inputs.display:null,y?this.createPanel(O||D,D,a,this.chart.name,new t.ChartEngine.YAxis({name:D})):y=D,p?l.panel=y:l.params.panel=y}if(D){if(p)l.parameters||(l.parameters={}),l.parameters.panelName=D,this.highlightedDraggable=t.getFn("Studies.replaceStudy")(this,l.inputs.id,l.type,l.inputs,l.outputs,l.parameters,null,l.study);else if(d)for(var Z in l.seriesParams)E=l.seriesParams[Z],I=null,l.params.yAxis&&l.params.yAxis!==this.chart.panel.yAxis&&((I=l.params.yAxis).name=l.params.name),this.modifySeries(E.id,{panel:D,yAxis:I});if(L>-1){for(x in N={},$=0,this.panels)L==$++&&(N[D]=this.panels[D]),x!=D&&(N[x]=this.panels[x]);N[D]||(N[D]=this.panels[D]),this.panels=N}this.checkForEmptyPanel(y);for(var G=0;G<f.length;G++)f[G].params?this.checkForEmptyPanel(f[G].params.name):this.checkForEmptyPanel(f[G].name);this.adjustPanelPositions()}else if(A){if(z=function(e,i,a,n){var s,o;if("study"==a&&(i.parameters||(i.parameters={}),n?i.parameters.yaxisDisplayValue=n.position:delete i.parameters.yaxisDisplayValue,s=t.getFn("Studies.replaceStudy")(e,i.inputs.id,i.type,i.inputs,i.outputs,i.parameters,i.panel,i.study)),r.W5N(),"renderer"==a)for(var l in i.seriesParams)o=i.seriesParams[l],s=e.modifySeries(o.id,{panel:D,yAxis:n});return s},(j=h&&"all"==h.dropzone)||(m?(l.position=A,this.layout.studies&&(V=this.layout.studies[l.name])&&(V.parameters||(V.parameters={}),V.parameters.yaxisDisplayValue=A)):p?this.highlightedDraggable=z(this,l,"study",{position:A}):d&&z(this,l,"renderer",new t.ChartEngine.YAxis({name:l.params.name||t.uniqueID(),position:A})),v=this.highlightedDraggable.getYAxis(this)),!S||!j||m){for(H=v,j&&v==this.chart.panel.yAxis&&(H=h),P=0;P<o.yaxisLHS.length;P++)if(o.yaxisLHS[P]==H){o.yaxisLHS.splice(P,1);break}for(P=0;P<o.yaxisRHS.length;P++)if(o.yaxisRHS[P]==H){o.yaxisRHS.splice(P,1);break}}if(j)if(this.getYAxisByName(o,v.name)==o.yAxis&&this.electNewPanelOwner(o,h),m){for(W in R=v,X=h,v==this.chart.panel.yAxis&&(R=h,X=v),R.studies)z(this,this.layout.studies[R.studies[W]],"study",X===this.chart.panel.yAxis?null:{position:X.name});for(W in R.renderers)z(this,this.chart.seriesRenderers[R.renderers[W]],"renderer",X);this.highlightedDraggable=X}else p?this.highlightedDraggable=z(this,l,"study",{position:h.name}):d&&z(this,l,"renderer",h);else{for("none"==v.position&&(v.width=t.ChartEngine.YAxis.prototype.width),v.position=A,B="left"==A?o.yaxisLHS:o.yaxisRHS,P=0;P<B.length;P++){if(B[P]!==v)if("ri","g","h","t","left"==B[P].dropzone)B.splice(P,0,v);else{if("right"!=B[P].dropzone)continue;r.s$9(6),B.splice(r.V9a(P,"1"),0,v)}break}P==B.length&&B.push(v)}}for(var K in this.panels)for(Y=(U=this.panels[K]).yaxisLHS.concat(U.yaxisRHS),P=0;P<Y.length;P++)Y[P].height=U.yAxis.height,this.calculateYAxisMargins(Y[P]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),this.savePanels()}}},a=!1,t.ChartEngine.prototype.findHighlights=t.ChartEngine.prototype.findHighlights||function(e,t){a||console.error("movement feature requires activating interaction feature."),a=!0}},f=function(e){var t,i=V;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).NameValueStore=t.NameValueStore||function(){},t.NameValueStore.prototype.toJSONIfNecessary=function(e){if(e.constructor==String)return e;try{return JSON.stringify(e)}catch(t){return i.s$9(0),console.log(i.V9a("Cannot convert to JSON: ",e)),null}},t.NameValueStore.prototype.fromJSONIfNecessary=function(e){i.W3G();try{return JSON.parse(e)}catch(t){return e}},i.W3G(),t.NameValueStore.prototype.get=function(e,a){var r;i.W5N(),r=t.localStorage.getItem(e),a(null,this.fromJSONIfNecessary(r))},t.NameValueStore.prototype.set=function(e,a,r){i.W5N(),t.localStorageSetItem(e,this.toJSONIfNecessary(a)),r&&r(null)},t.NameValueStore.prototype.remove=function(e,a){t.localStorage.removeItem(e),i.W5N(),a&&a(null)}},y=function(e){var t,i=V;function a(){}(t="undefined"!==("undefined"==typeof _CIQ?"undefined":j(_CIQ))?_CIQ:e.CIQ).ChartEngine||(t.ChartEngine=function(){}),a.fetchInitialData=function(e,t,i,a,r){},a.fetchUpdateData=function(e,t,i,a){},a.fetchPaginationData=function(e,t,i,a,r){},a.subscribe=function(e){},a.unsubscribe=function(e){},t.QuoteFeed=t.QuoteFeed||function(){},t.QuoteFeed.prototype.fetch=function(e,t){this.v2QuoteFeed||("You must implement CIQ.QuoteFeed.[","you","rfeedname].prototype.fetch()",console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()"))},t.QuoteFeed.prototype.announceError=function(e,a){e.suppressErrors||a.suppressAlert||(i.W3G(),e.startDate||e.endDate||a.error&&t.alert("Error fetching quote:"+a.error))},t.QuoteFeed.prototype.multiFetch=function(e,t){return i.W3G(),0===e.length&&t([]),e[0].stx.driver.multiFetch(e,t)},t.QuoteFeed.Subscriptions=function(){i.W5N(),this.subscriptions=[]},t.inheritsFrom(t.QuoteFeed.Subscriptions,t.QuoteFeed),t.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(e){var t,a,r,n,s;r=e.getSymbols({"breakout-equations":!0}),n=this,i.W3G(),r=r.filter((function(t){var i;return(i=e.quoteDriver.getQuoteFeed(t))&&i.engine==n}));for(var o=0;o<this.subscriptions.length;o++)this.subscriptions[o].match=!1;for(var l=0;l<r.length;l++)for("month"!=(s=(a=r[l]).interval)&&"week"!=s||e.dontRoll||("d","a","y",s="day"),a.interval=s,a.period=1,a.match=!1,isNaN(a.interval)||("mi","nut","e",a.period=a.interval,a.interval=a.timeUnit,a.interval||(a.interval="minute")),delete a.periodicity,delete a.timeUnit,delete a.setSpan,o=0;o<this.subscriptions.length;o++){if((t=this.subscriptions[o]).symbol==a.symbol&&t.period==a.period&&t.interval==a.interval){a.match=!0,t.match=!0;break}t.symbol!=a.symbol?("sym","b","o","l","period"!=a.reason&&(a.reason="symbol"),t.reason="symbol"):("per","i","o","d",a.reason="period",t.reason="period")}this.subscriptions=this.subscriptions.filter((function(t){return t.match||(t.stx||(t.stx=e),n.unsubscribe(t)),t.match})),r.forEach((function(t){t.match||("initi","al","i","ze",t.stx||(t.stx=e),t.reason||(t.reason="initialize"),t.symbol!==e.chart.symbol&&(t.series=!0),n.subscribe(t),n.subscriptions.push(t))}))},t.QuoteFeed.Subscriptions.prototype.fetch=function(e,t){var a;a=this,this.fetchFromSource(e,(function(r){i.W5N(),r.error||a.checkSubscriptions(e.stx),t(r)}))},t.QuoteFeed.Subscriptions.prototype.subscribe=function(e){i.W5N(),console.log("subscribe",e)},t.QuoteFeed.Subscriptions.prototype.unsubscribe=function(e){console.log("unsubscribe",e)},t.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(e,t){i.W3G(),console.log("Please provide implementation of fetchFromSource")},t.QuoteFeed.prototype.requiresImmediateRefresh=function(e){return!1},t.ChartEngine.prototype.attachQuoteFeed=function(e,a,r){var n;a||(a={}),"function"!==j(e.fetchInitialData)&&"function"!==j(e.fetchUpdateData)&&"function"!=typeof e.fetchPaginationData||("function"!=typeof e.fetchPaginationData&&"function"!=typeof e.fetchUpdateData&&(a.noLoadMore=!0),e.v2QuoteFeed=!0,["multiFetch","announceError","requiresImmediateRefresh"].forEach((function(a){e[a]||!1===e[a]||(e[a]=t.QuoteFeed.prototype[a]),i.W5N()})),"function"==typeof e.subscribe&&(e.checkSubscriptions=t.QuoteFeed.Subscriptions.prototype.checkSubscriptions,e.subscriptions=[])),a.maximumTicks||(a.maximumTicks=e.maxTicks?e.maxTicks:2e4),i.W3G(),(!a.bufferSize||a.bufferSize<0)&&(a.bufferSize=0),a.bufferSize=Math.round(a.bufferSize),a.intervalTimer=null,this.quoteDriver&&(!r&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(n=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:e,behavior:a,filter:r}),n&&this.quoteDriver.quoteFeeds.push(n),this.quoteDriver.updateChartLoop(null,a))),this.quoteDriver||(this.quoteDriver=new t.ChartEngine.Driver(this,e,a,r)),r||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},t.ChartEngine.prototype.detachQuoteFeed=function(e){var t;if(t=this.quoteDriver){for(var a=t.quoteFeeds.length-1;a>=0;a--)e&&t.quoteFeeds[a].quoteFeed!=e||(t.die(t.quoteFeeds[a]),t.quoteFeeds.splice(a,1));i.W5N(),t.quoteFeeds.length?e==t.quoteFeed&&(t.quoteFeed=t.quoteFeeds[0].quoteFeed,t.behavior=t.quoteFeeds[0].behavior):t=this.quoteDriver=null}},t.ChartEngine.Driver=function(e,a,r,n){i.W3G(),this.stx=e,r||(r={}),this.quoteFeeds=[{engine:a,behavior:r,filter:n}],this.id=t.uniqueID(!0),this.behavior=r,this.quoteFeed=a,this.loadingNewChart=!1,this.updatingChart=!1,n||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},t.ChartEngine.Driver.prototype.die=function(e){for(var t,i=0;i<this.quoteFeeds.length;i++)e&&this.quoteFeeds[i]!=e||(t=this.quoteFeeds[i].behavior).intervalTimer&&(clearInterval(t.intervalTimer),t.intervalTimer=-1)},t.ChartEngine.Driver.prototype.getQuoteFeed=function(e){var t;e.symbolObject||(e.symbolObject={symbol:e.symbol});for(var i=0;i<this.quoteFeeds.length;i++)if((t=this.quoteFeeds[i]).behavior.generator==e.symbolObject.generator&&(!t.filter||t.filter(e)))return t;return null},t.ChartEngine.Driver.prototype.multiFetch=function(e,a){var r,n,s;0===e.length&&a([]),r={counter:0,finished:e.length,results:[]};for(var o=0;o<e.length;o++)(n=e[o]).stx.isEquationChart(n.symbol)?t.fetchEquationChart(n,l(n,r,a)):(s=this.getQuoteFeed(n))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.SERIES,s.engine,n,l(n,r,a));function l(e,t,a){return i.W3G(),function(r){var n;i.W5N(),t.results.push({dataCallback:r,params:e}),t.counter++,t.counter>=t.finished&&(n=t.results,t.results=[],a(n))}}i.W5N()},t.ChartEngine.Driver.prototype.updateSubscriptions=function(){for(var e=0;e<this.quoteFeeds.length;e++)this.quoteFeeds[e].checkSubscriptions&&this.quoteFeeds[e].checkSubscriptions(this.stx)},t.ChartEngine.Driver.prototype.loadDependents=function(e,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_;if(s=this,!n)return o=0,l=[],h=[],c=function(e){a&&++o>=s.quoteFeeds.length&&a(null)},u=function(t){++o<l.length||(i.W5N(),h.length||c(),h.forEach((function(t){s.loadDependents(e,c,r,t.behavior)})))},s.quoteFeeds.forEach((function(e){e.behavior.generator?h.push(e):l.push(e)})),void l.forEach((function(t){s.loadDependents(e,u,r,t.behavior)}));for(d in{},p=e.stx,g=(m=e.chart).series,p.masterData,v=[],b={},x=r==t.QuoteFeed.UPDATE,C=r==t.QuoteFeed.PAGINATION,S=t.shallowClone(e),g){if(w=(f=g[d]).parameters,!x){if(!e.future&&!1===f.moreAvailable)continue;if(e.future&&!0===f.upToDate)continue}if(!f.loading&&(!1!==w.loadData&&(!x&&!C||f.endPoints&&Object.keys(f.endPoints).length)&&(!w.data||w.data.useDefaultQuoteFeed)&&(y=w.symbolObject).symbol&&y.generator==n.generator&&(S.symbolObject=y,S.symbol=y.symbol,k=this.getQuoteFeed(S),n==(k&&k.behavior)))){D=!0,x||(f.loading=!0);for(var F=0;F<v.length;F++)t.symbolEqual(v[F],y)&&(D=!1);D&&(v.push(y),b[y.symbol]=f.endPoints)}}A=[];for(var P=0;P<v.length;P++)y=v[P],(T=t.shallowClone(e.originalState)).symbol=y.symbol,T.symbolObject=y,T.update||T.future?(T.endDate||(T.endDate=e.endDate),T.startDate=b[y.symbol].end):(T.startDate||(T.startDate=e.startDate),T.endDate=C&&!e.future?b[y.symbol].begin:e.endDate,T.ticks=e.ticks),A.push(T);if(!A.length&&x)return(M={appending:e.appending||e.originalState.update}).appending&&(M.appendToDate=e.startDate),p.createDataSet(null,null,M),e.nodraw||p.draw(),void(a&&a(null));this.multiFetch(A,(_=x,i.W3G(),function(i){var o,l,h,c,u,d,g,y,v,b;o=null;for(var x=0;x<i.length;x++)if(!(h=(l=i[x]).dataCallback.error)&&0!==h){c=l.params.symbolObject,d=(u=l.dataCallback).quotes,g=u.moreAvailable,y=u.upToDate,v=[],p.getSeries&&(v=p.getSeries({symbolObject:c})),b=!1;for(var C=0;C<v.length;C++)f=v[C],_||(e.future?(f.upToDate=!0===y||y||d.length<=(l.params.startDate?1:0),p.isHistoricalModeSet&&d.length<2&&(f.mostRecentForwardAttempt=new Date)):f.moreAvailable=!1!==g&&(g||d.length>(l.params.endDate?1:0)),f.loading=!1),b=f.parameters.fillGaps||b;d=s.cleanup(p,f,d,r,e,b),p.updateChartData(d,m,{secondarySeries:c.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),d&&d.length&&(!o||o>d[0].DT)&&(o=d[0].DT)}i.length&&(p.createDataSet(null,null,{appending:e.originalState.update||e.future,appendToDate:o}),e.nodraw||p.draw(),r==t.QuoteFeed.INITIAL&&s.resetRefreshInterval(n.refreshInterval,n)),a&&a(null)}))},t.ChartEngine.Driver.prototype.cleanup=function(e,a,r,n,s,o){var l,h,c,u,d,p,m;if(e.doCleanupDates(r,e.layout.interval),!s.missingBarsCreated&&r&&r.length&&e.cleanupGaps&&!1!==o){if(c=s.chart,a?(c=a,h=a.parameters.symbol||a.id):h=c.defaultPlotField,n!=t.QuoteFeed.PAGINATION||s.loadMoreReplace){if(n==t.QuoteFeed.UPDATE&&c.endPoints.end&&c.endPoints.end<r[0].DT){d=e.getFirstLastDataRecord(e.masterData,h,!0),2141695318,i.s$9(39),p=-i.V9a("1916707877",0),m=2;for(var g=1;2141695318!==i.m6F(g.toString(),g.toString().length,58221);g++)a&&(d=d[h]),r.unshift(d),m+=2;i.m6F(m.toString(),m.toString().length,2127)!==p&&(a&&(d=d[h]),r.unshift(d)),a&&(d=d[h]),r.unshift(d),l="shift"}}else c.endPoints.begin&&c.endPoints.begin>r[r.length-1].DT&&(u=e.getFirstLastDataRecord(e.masterData,h,!1),a&&(u=u[h]),r.push(u),l="pop");r=e.doCleanupGaps(r,s.chart,{cleanupGaps:o,noCleanupDates:!0}),l&&r[l]()}return r},t.ChartEngine.Driver.prototype.updateChart=function(e){var a,r,n,s,o,l,h,c,u;if(!this.updatingChart&&!this.loadingNewChart)for(var d in a=Object.keys(this.stx.charts).length,r=0,n=this.stx,s=n.layout.interval,o=n.layout.timeUnit,n.charts)(l=n.charts[d]).symbol&&(h=this.makeParams(l.symbol,l.symbolObject,l),c=this.getQuoteFeed(h),l.masterData&&l.masterData.length&&(h.startDate=l.endPoints.end),h.update=!0,h.originalState=t.shallowClone(h),e&&e!=h.behavior?this.loadDependents(h,null,t.QuoteFeed.UPDATE,e):(this.updatingChart=!0,u=p(this,h,l.symbol,c),n.isEquationChart(h.symbol)?t.fetchEquationChart(h,u):c&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.UPDATE,c.engine,h,u)));function p(e,l,h,c){return l.behavior.prefetchAction&&l.behavior.prefetchAction("updateChart"),function(u){var d,p;r++,(d=l.chart).masterData,h!=d.symbol||s!=n.layout.interval||o!=n.layout.timeUnit||n.isHistoricalMode()?e.updatingChart=!1:(u.error?c&&c.engine.announceError(l.originalState,u):(p=u.quotes,p=e.cleanup(n,null,p,t.QuoteFeed.UPDATE,l),n.updateChartData(p,d,{noCreateDataSet:!0,noCleanupDates:!0}),d.attribution=u.attribution),r==a&&(e.updatingChart=!1),l.behavior.callback&&l.behavior.callback(l),e.loadDependents(l,null,t.QuoteFeed.UPDATE,l.behavior),i.W3G())}}},t.ChartEngine.Driver.prototype.updateChartLoop=function(e,t){var a,r;if(t||(t=this.behavior),-1!=t.intervalTimer){t.intervalTimer&&clearInterval(t.intervalTimer),i.W5N(),a=function(e,t){return i.W5N(),function(){t.noUpdate||e.updateChart(t)}};for(var n=0;n<this.quoteFeeds.length;n++)t!=(r=this.quoteFeeds[n].behavior)||r.noUpdate||(e||0===e||(e=r.refreshInterval),e&&(t.intervalTimer=setInterval(a(this,r),1e3*e)))}},t.ChartEngine.Driver.prototype.resetRefreshInterval=function(e,t){(t||this.behavior).refreshInterval=e,this.updateChartLoop(null,t),i.W5N()},t.ChartEngine.Driver.prototype.loadAll=function(e,t){var a,r;a=this,r=0,function n(){return function(s){i.W5N(),s?t(s):!e.moreAvailable&&e.upToDate?t(null):++r>20?t("error, moreAvailable not implemented correctly in QuoteFeed"):(e.loadingMore=!1,a.checkLoadMore(e,!0,!0,n(),!0))}}()()},t.ChartEngine.Driver.prototype.checkLoadMore=function(e,a,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A;function T(t){return!t.endPoints.end||e.scroll-e.maxTicks+1<h.bufferSize||o.tickFromDate(t.endPoints.end,e,null,!0)-c.length+e.scroll-e.maxTicks+2<h.bufferSize}if(o=this.stx,this,e.loadingMore||this.loadingNewChart)return e.initialScroll=e.scroll,void(n&&n(null));if(o.isHistoricalMode()||(o.isHistoricalModeSet=!1),l=this.makeParams(e.symbol,e.symbolObject,e),o.currentlyImporting)n&&n(null);else{var M,_;if(h=l.behavior,c=e.dataSet,i.O_b(33),d=i.v$j(995,14,9)*(h.forwardPaginationRetryInterval||5),p=!1,m=!1,e.dataSet.length)for(var F in e.series)(g=e.series[F]).loading||!1!==g.parameters.loadData&&(u=!g.mostRecentForwardAttempt||g.mostRecentForwardAttempt.getTime()+d<Date.now(),!1!==g.moreAvailable&&P(g)&&(p=!0),u&&!g.upToDate&&T(g)&&(m=!0));if(u=!e.mostRecentForwardAttempt||e.mostRecentForwardAttempt.getTime()+d<Date.now(),f=(P(e)||a)&&!1!==e.moreAvailable,y=(T(e)||a)&&!e.upToDate&&u,v=f||p,b=o.isHistoricalModeSet&&!v&&(y||m),x=o.layout.interval,C=o.layout.timeUnit,S=!1,w=h.findHeadOfData||e.masterData&&e.masterData.length,!h.noLoadMore&&w&&(b||!o.maxDataSetSize||e.dataSet.length<o.maxDataSetSize)&&(v||b)){if(e.initialScroll=e.scroll,e.loadingMore=!0,(l=this.makeParams(e.symbol,e.symbolObject,e)).pagination=!0,l.future=b,e.masterData&&e.masterData.length?(b?l.startDate=e.endPoints.end:l.endDate=e.endPoints.begin,b&&!l.startDate?(k=o.getFirstLastDataRecord(e.masterData,"DT",!0))&&(l.startDate=k.DT):v&&!l.endDate&&(k=o.getFirstLastDataRecord(e.masterData,"DT"))&&(l.endDate=k.DT)):l.endDate=new Date,l.originalState=t.shallowClone(l),l.nodraw=s,!f&&p||!y&&m)return this.loadingMore=!0,this.loadDependents(l,(function(t){e.loadingMore=!1,n&&n(t)}),t.QuoteFeed.PAGINATION),void(n&&n(null));o.fetchMaximumBars[o.layout.aggregationType]&&(l.fetchMaximumBars=!0,!o.maxMasterDataSize||h.maximumTicks<o.maxMasterDataSize?l.ticks=h.maximumTicks:l.ticks=o.maxMasterDataSize),M=this,_=l,h.prefetchAction&&h.prefetchAction("checkLoadMore"),D=function(e){var a,r,o,l,c,u,d,p,m,g;i.W3G(),a=2;for(var f=1;-500040512!==i.l5h(f.toString(),f.toString().length,5185);f++)r=M.stx,o=_.chart,a+=2;if(1753553143!==i.m6F(a.toString(),a.toString().length,21552)&&(r=M.stx,o=_.chart),_.symbol==o.symbol&&x==r.layout.interval&&C==r.layout.timeUnit)if(_.loadMore||(_.chart.loadingMore=!1),e.error)M.quoteFeed.announceError(_.originalState,e),_.chart.loadingMore=!1,n&&n(e.error);else{if(e.quotes||(e.quotes=[]),l=e.quotes,c=o.masterData,(l=M.cleanup(r,null,l,t.QuoteFeed.PAGINATION,_)).length&&o.masterData&&o.masterData.length)if(_.future)(u=l[0]).DT&&u.DT==o.masterData[o.masterData.length-1].DT&&c.pop();else{i.s$9(37);var y=i.v$j(14,0,15);(d=l[l.length-y]).DT&&+d.DT==+o.masterData[0].DT&&l.pop()}_.future?(e.upToDate?o.upToDate=!0:(!1===e.upToDate||l.length>1)&&(o.upToDate=!1),r.isHistoricalModeSet&&l.length<2&&(o.mostRecentForwardAttempt=new Date)):e.moreAvailable||!1!==e.moreAvailable&&l.length?o.moreAvailable=!0:o.moreAvailable=!1,M.tickMultiplier=l.length?2:2*M.tickMultiplier,p=l[0]?l[0].DT:_.startDate,m=l[0]?l[l.length-1].DT:_.endDate,(!o.endPoints.begin||o.endPoints.begin>p)&&(o.endPoints.begin=p),(!o.endPoints.end||o.endPoints.end<m)&&(o.endPoints.end=m),o.loadingMore=!1,_.loadMoreReplace?r.setMasterData(l,o,{noCleanupDates:!0}):_.future?r.updateChartData(l,o,{noCreateDataSet:!0,noCleanupDates:!0}):t.addMemberToMasterdata({stx:r,chart:o,data:l,fields:["*"],noCleanupDates:!0}),_.future&&(g={appending:!0,appendToDate:l[0]&&l[0].DT}),r.createDataSet(void 0,void 0,g),s||r.draw(),h.callback&&h.callback(_),M.loadDependents(_,n,t.QuoteFeed.PAGINATION)}},o.isEquationChart(l.symbol)?t.fetchEquationChart(l,D):(b&&(l.appending=!0),(A=this.getQuoteFeed(l))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,A.engine,l,D)),S=!0}!S&&n&&n(null)}function P(t){return!t.endPoints.begin||c.length-e.scroll<h.bufferSize||c.length-e.scroll-o.tickFromDate(t.endPoints.begin,e)<h.bufferSize}},t.ChartEngine.Driver.prototype.extendHistoricalData=function(e){var a,r,n=e.from,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},o=this.stx;function l(e,a){return i.W3G(),function(i){var r=i.quotes,n=i.moreAvailable,l=i.error;if(a.symbol===h.symbol&&p===c.interval&&m===c.timeUnit){if(h.loadingMore=!1,l)return s(l);r=e.cleanup(o,null,r,t.QuoteFeed.PAGINATION,a),h.moreAvailable="boolean"==typeof n?n:!!r.length,h.endPoints.begin=r[0].DT,t.addMemberToMasterdata({stx:o,chart:h,data:r,fields:["*"],noCleanupDates:!0}),o.createDataSet(),o.draw()}}}var h=o.chart,c=o.layout,u=h.masterData,d=h.dataSet,p=c.interval,m=c.timeUnit;if(a=this.makeParams(h.symbol,h.symbolObject,h),r=this.getQuoteFeed(a),h.loadingMore||this.loadingNewChart||o.currentlyImporting||!u.length||!r||o.maxDataSetSize&&d.length>o.maxDataSetSize)return s(null);i.W5N(),h.loadingMore=!0,a.originalState=Object.assign({},a),a.startDate=n,a.endDate=u[0].DT,t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,r.engine,a,l(this,a))},t.ChartEngine.Driver.prototype.barsToFetch=function(e){var i,a;return"w","e","e","k",t.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),i=this.stx.layout.interval,a=e.stx.layout.periodicity,"month"!=i&&"week"!=i||this.stx.dontRoll||(a*="week"==i?7:30),e.stx.chart.maxTicks*a*this.tickMultiplier},i.W5N(),t.ChartEngine.Driver.determineStartDate=function(e,t,a){for(var r=1;301845622!==i.l5h(r.toString(),r.toString().length,64734);r++)return this.determineStartOrEndDate(e,t,a,!0);if(1812588392!==i.l5h(2..toString(),2..toString().length,9095))return this.determineStartOrEndDate(e,t,a,!1)},t.ChartEngine.Driver.determineStartOrEndDate=function(e,t,i,a){return a||e.fetchMaximumBars?e.startDate||t.previous(i):e.future?t.next(i):new Date},t.ChartEngine.Driver.prototype.makeParams=function(e,a,r){var n,s,o,l,h,c,u,d,p;if(s=(n=this.stx).layout.interval,o=this.barsToFetch({stx:n}),"month"!=s&&"week"!=s||n.dontRoll||("d","a","y",s="day"),h=(l=this.getQuoteFeed({interval:s,symbol:e,symbolObject:a}))&&l.behavior,(c=t.shallowClone(h)||{}).behavior=h,u=!1,d=[],r.market&&r.market.getSessionNames&&(d=r.market.getSessionNames()),n.extendedHours)if(n.extendedHours.filter)u=!0;else{-323888069,1668079439,i.s$9(1),p=i.v$j(0,"2");for(var m=1;-323888069!==i.l5h(m.toString(),m.toString().length,84645);m++)u=n.layout.extended,p+=2;1668079439!==i.m6F(p.toString(),p.toString().length,56844)&&(u=n.layout.extended),d=d.filter((function(e){return i.W3G(),e.enabled||n.layout.marketSessions[e.name]}))}else d=d.filter((function(e){return i.W5N(),e.enabled}));for(var g=0;g<d.length;g++)d[g]=d[g].name;return t.extend(c,{stx:n,symbol:e,symbolObject:a,chart:r,interval:s,extended:u,period:1,ticks:o,additionalSessions:d,quoteDriverID:this.id},!0),c.symbolObject||(c.symbolObject={symbol:e}),isNaN(c.interval)||(c.period=parseInt(c.interval,10),c.interval=n.layout.timeUnit,c.interval||(c.interval="minute")),c},t.ChartEngine.Driver.prototype.newChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,m;r=this.stx,n=e.symbol,s=r.layout.interval,o=r.layout.timeUnit,(l=e.chart).moreAvailable=null,l.upToDate=null,l.loadingMore=!1,l.attribution=null,h=this.makeParams(n,e.symbolObject,l),t.extend(h,e,!0),c=this.getQuoteFeed(h),u=h.behavior,(r.fetchMaximumBars[r.layout.aggregationType]||e.fetchMaximumBars)&&(!r.maxMasterDataSize||u.maximumTicks<r.maxMasterDataSize?h.ticks=u.maximumTicks:h.ticks=r.maxMasterDataSize,h.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,h.originalState=t.shallowClone(h),p=this,m=h,u.prefetchAction&&u.prefetchAction("newChart"),i.W3G(),d=function(i){var l,h,d,g;if(l=m.chart,h=i.quotes,d=!1,n==l.symbol&&s==r.layout.interval&&o==r.layout.timeUnit){for(var f in p.loadingNewChart=!1,i.error?c.engine.announceError(m.originalState,i):(h=p.cleanup(r,null,h,t.QuoteFeed.INITIAL,m),r.setMasterData(h,l,{noCleanupDates:!0}),l.endPoints={},l.endPoints.begin=h[0]?h[0].DT:m.startDate,l.endPoints.end=h[0]?h[h.length-1].DT:m.endDate,h?(l.moreAvailable=!1!==i.moreAvailable,l.upToDate=i.upToDate):(l.moreAvailable=!1,l.upToDate=!0),l.attribution=i.attribution,e.initializeChart&&r.initializeChart(),r.createDataSet(),d=!0),l.series)l.series[f].endPoints={},l.series[f].moreAvailable=null,l.series[f].upToDate=null;(g=l.masterData)&&g.length&&(m.startDate=g[0].DT,m.endDate=g[g.length-1].DT),u.callback&&u.callback(m),p.loadDependents(m,(function(){d&&!m.nodraw&&p.stx.home(),a&&a(i.error),p.stx.dispatch("newChart",{stx:p.stx,symbol:p.stx.chart.symbol,symbolObject:p.stx.chart.symbolObject,moreAvailable:p.stx.chart.moreAvailable,upToDate:p.stx.chart.upToDate,quoteDriver:p}),p.resetRefreshInterval(u.refreshInterval,u)}),t.QuoteFeed.INITIAL)}else a&&a("orphaned")},this.stx.isEquationChart(h.symbol)?t.fetchEquationChart(h,d):c&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.INITIAL,c.engine,h,d)},t.QuoteFeed.INITIAL=1,t.QuoteFeed.UPDATE=2,t.QuoteFeed.PAGINATION=3,t.QuoteFeed.SERIES=4,t.ChartEngine.Driver.fetchData=function(e,a,r,n){if(!r.symbol)return n({quotes:[]});a.v2QuoteFeed?"function"!=typeof a.subscribe?t.ChartEngine.Driver.fetchDataInContext(e,a,r,n):t.ChartEngine.Driver.fetchDataInContext(e,a,r,function(e){e.error||this.checkSubscriptions(r.stx),i.W3G(),n(e)}.bind(a)):(r.stx.convertToDataZone(r.startDate),r.stx.convertToDataZone(r.endDate),a.fetch(r,n))},t.ChartEngine.Driver.fetchDataInContext=function(e,a,r,n){var s,o,l,h,c,u,d,p,m;if(!(c=r.stx).chart.market.newIterator)return"quoteFeed feature requires first acti","vating m","arket feature",".",void console.error("quoteFeed feature requires first activating market feature.");switch(e===t.QuoteFeed.SERIES&&(r.series=!0,e=t.QuoteFeed.INITIAL,r.endDate&&!r.startDate||r.future?e=t.QuoteFeed.PAGINATION:r.startDate&&!r.endDate&&(e=t.QuoteFeed.UPDATE)),u=Math.min(r.ticks,r.maximumTicks),a.maxTicks&&(u=Math.min(u,a.maxTicks)),d=r.symbolObject.masterSymbol||r.symbol,i.W3G(),e){case t.QuoteFeed.UPDATE:if(c.isHistoricalModeSet)return void(c.quoteDriver.updatingChart=!1);r.startDate?p=r.startDate:(p=new Date,i.s$9(1),p.setHours(0,0,0,i.V9a(0,"0"))),"function"==typeof a.fetchUpdateData&&a.fetchUpdateData(d,c.convertToDataZone(p),r,n);break;case t.QuoteFeed.INITIAL:s={begin:h=r.endDate||new Date,interval:r.interval,periodicity:"tick"==r.interval?c.chart.xAxis.futureTicksInterval:r.period,outZone:c.dataZone},o=c.chart.market.newIterator(s),l=t.ChartEngine.Driver.determineStartDate(r,o,u),r.endDate&&(h=r.endDate),"function"==typeof a.fetchInitialData&&a.fetchInitialData(d,l,c.convertToDataZone(h),r,n);break;case t.QuoteFeed.PAGINATION:if(s={begin:r.endDate||r.startDate,interval:r.interval,periodicity:"tick"==r.interval?c.chart.xAxis.futureTicksInterval:r.period,outZone:c.dataZone},o=c.chart.market.newIterator(s),m=t.ChartEngine.Driver.determineStartOrEndDate(r,o,u,!r.future),l=r.startDate||m,h=r.endDate||m,r.startDate?r.stx.convertToDataZone(l):r.stx.convertToDataZone(h),"function"==typeof a.fetchPaginationData){if(c.maxMasterDataSize&&c.maxMasterDataSize<=c.masterData.length)return;a.fetchPaginationData(d,l,h,r,(function(e){h>=Date.now()&&(c.isHistoricalModeSet=!1),n&&n(e)}))}break;default:console.error("Illegal fetchData constant")}}},v=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.addSeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x;if(r="addSeri",r+="es",n=this.runPrepend(r,arguments))return n;function C(e){return function(t){var r,n;t.error||(r=t.quotes,n=i.fillGaps,m.cleanupGaps||(n=!1),r=m.doCleanupGaps(r,m.chart,{cleanupGaps:n}),m.updateChartData(r,m.chart,{secondarySeries:o,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),l.loading=!1,l.moreAvailable=t.moreAvailable,l.upToDate=t.upToDate,S(m,l)),null===i.action||u.length||m.dispatch(g?"symbolImport":"symbolChange",{stx:m,symbol:e.symbol,symbolObject:e.symbolObject,action:i.action,id:l.id,parameters:i}),a&&a.call(m,t.error,l)}}function S(a,r){var n,s,o,l,h,c=V;if("L","i","n","es",n=i.renderer||"Lines",s=i.name||e,!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||g||(i.yAxis.name=s),i.renderer||i.name||i.color||i.chartType){if(!(o=a.getSeriesRenderer(s))){l={name:s,overChart:!1!==i.overChart,useChartLegend:!0},i.chartType?o=t.Renderer.produce(i.chartType,t.extend({highlightable:i.highlightable,dependentOf:i.dependentOf,panel:i.panel,yAxis:i.yAxis,baseline:i.baseline},l)):(t.ensureDefaults(i,l),o=new t.Renderer[n]({params:i})),-1330833430,-158649269,h=2;for(var u=1;-1330833430!==c.l5h(u.toString(),u.toString().length,31078);u++){if(!o)return;c.O_b(42),h+=c.V9a("2",2)}if(-158649269!==c.l5h(h.toString(),h.toString().length,79750)&&~o)return;a.setSeriesRenderer(o)}o.attachSeries(e,i),!1!==i.loadData&&o.ready(),a.layout.symbols=a.getSymbols({"include-parameters":!0,"exclude-studies":!0}),a.changeOccurred("layout")}}return s=e||null,o=e,e||(e=t.uniqueID()),i&&!0===i.panel&&(i.panel=e),(l={parameters:i?t.clone(i):{},yValueCache:[],display:s,id:e,loading:!i||!1!==i.loadData}).parameters.yAxis=i&&i.yAxis,(i=l.parameters).symbol&&(o=i.symbol),i.isComparison&&(i.shareYAxis=!0),!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),t.ensureDefaults(i,{chartName:this.chart.name,symbolObject:{symbol:o},panel:this.chart.panel.name,fillGaps:!1,action:"add-series"}),"display"in i&&(l.display=i.display),h=this.charts[i.chartName],c=i.symbolObject,o=i.symbol=c.symbol,l.display||(l.display=o||i.field),l.endPoints={},i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),i.isComparison&&void 0===i.gapDisplayStyle&&(i.gapDisplayStyle="transparent"),u=this.getSeries({symbolObject:c,chart:h,includeMaster:!0}),d=i.panel,this.panels[d]?i.yAxis||i.shareYAxis||(i.yAxis=new t.ChartEngine.YAxis({name:e,position:"none"})):((p=i.yAxis||new t.ChartEngine.YAxis).name=e,this.createPanel(e,d,null,null,p),this.preferences.dragging&&this.preferences.dragging.series||(i.highlightable=!1)),h.series[e]=l,m=this,g=this.currentlyImporting,!i.isComparison||!h.forcePercentComparison||i.panel!=h.panel.name||i.yAxis&&i.yAxis!=h.yAxis||this.setChartScale("percent"),(f=h.masterData)||(f=h.masterData=this.masterData=[]),y=f.length,i.data&&!i.data.useDefaultQuoteFeed?C({symbol:o,symbolObject:c,action:i.action})({quotes:i.data}):u.length?(l.endPoints=u[0].endPoints,l.loading=u[0].loading,S(this),a&&setTimeout((function(){a.call(m,null,l)}),0)):this.quoteDriver&&!1!==i.loadData?(b=(v=this.quoteDriver).makeParams(o,c,h),y&&(b.startDate=f[0].DT,b.endDate=this.isHistoricalMode()?f[f.length-1].DT:new Date),b.stx.isEquationChart(b.symbol)?t.fetchEquationChart(b,C(b)):(x=v.getQuoteFeed(b))&&t.ChartEngine.Driver.fetchData(4,x.engine,b,C(b))):(S(this),a&&a.call(this,null,l)),this.runAppend("addSeries",arguments),l},t.ChartEngine.prototype.getSeries=function(e){var i,a,r,n,s;for(var o in a=(i=e.chart?e.chart:this.chart).series,(r=e.symbolObject)||(r={symbol:e.symbol}),n=[],a)s=a[o],t.symbolEqual(r,s.parameters.symbolObject)&&n.push(s);return V.W3G(),e.includeMaster&&t.symbolEqual(r,i.symbolObject)&&n.push({}),n},t.ChartEngine.prototype.modifySeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x;if(r="modi",r+="fySe",r+="rie",r+="s",n="stri",n+="ng",s="modif",s+="ySerie",s+="s",!this.runPrepend(s,arguments)&&i&&(j(e)===n?(l=e,o=(h=i.chartName?this.charts[i.chartName]:this.chart).series[l]):(l=(o=e).id,h=this.charts[o.parameters.chartName]),o)){for(var C in t.extend(o.parameters,i,!0),this.getRendererFromSeries(l).modifyRenderer(i),c=o.parameters,h.seriesRenderers){p=(d=h.seriesRenderers[C]).params,m=d.seriesParams;for(var S=0;S<m.length;++S)if(g=m[S],y=(f=this.panels[g.panel])&&f.yAxis.name,g.id===o.id){!0===c.panel&&(c.panel=c.dependentOf||c.name),p.panel=c.panel,i.yAxis&&(i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),p.yAxis=i.yAxis),c.panel!=g.panel&&p.name==y?this.electNewPanelOwner(g.panel):(v=this.getYAxisByName(c.panel,p.name))&&c.yAxis&&v.name!==c.yAxis.name&&(v.name=this.electNewYAxisOwner(v)),c.field||(c.field=null),d.attachSeries(l,t.ensureDefaults(c,g)),c.field||(c.field=c.subField),delete c.subField,!c.isComparison||!h.forcePercentComparison||c.panel!=h.panel.name||o.parameters.yAxis&&c.yAxis.name!=h.yAxis.name||this.setChartScale("percent"),u=d;break}}if(this.changeOccurred("layout"),t.getFn("Drawing.updateSource")(this,o.parameters.symbol||l,null,o.parameters.panel),this.runAppend(r,arguments),!0!==a){b=u.getDependents(this);for(var w=0;w<b.length;w++)this.modifySeries(b[w].params.name,{panel:u.params.panel,yAxis:o.parameters.yAxis},!0);(x=h.seriesRenderers[u.params.dependentOf])&&(x.params.yAxis==o.parameters.yAxis&&x.params.panel==u.params.panel||this.modifySeries(u.params.dependentOf,{panel:u.params.panel,yAxis:o.parameters.yAxis},!0))}return this.draw(),o}},t.ChartEngine.prototype.deleteSeries=function(e,t,i){var a,r,n,s,o,l,h,c,u,d;a="symbolCha",a+="nge",r="o",V.W5N(),r+="bject",n="re",n+="mov",n+="e-seri",n+="es",this.runPrepend("deleteSeries",arguments)||(s=(i=i||{}).action?i.action:n,j(e)===r?(o=e.id,t=t||this.charts[e.parameters.chartName]):(o=e,t=t||this.chart),(l=t.series[o])&&(h=l.parameters.loadData,c=l.parameters.symbolObject,delete t.series[o],u=this.getSeries({symbolObject:c,includeMaster:!0}),!1===h&&u.push(o),u.length||this.cleanMasterData(c,t),(d=this.panels[l.parameters.panel])&&this.checkForEmptyPanel(d),this.createDataSet(),u.length||this.dispatch(this.currentlyImporting?"symbolImport":a,{stx:this,symbol:c.symbol,symbolObject:c,id:o,action:s}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)))},t.ChartEngine.prototype.removeSeries=function(e,t){var i,a,r,n,s,o,l;if(i="removeSerie",i+="s",!this.runPrepend("removeSeries",arguments)){for(var h in r=!1,"object"===j(e)?(a=e.id,t=t||this.charts[e.parameters.chartName]):(a=e,t=t||this.chart),t.seriesRenderers){n=t.seriesRenderers[h],o=(s=this.panels[n.params.panel])&&s.yAxis.name;for(var c=n.seriesParams.length-1;c>=0;c--)n.seriesParams[c].id===a&&(n.removeSeries(a),n.seriesParams.length<1&&(this.removeSeriesRenderer(n),n.params.name==o?this.electNewPanelOwner(n.params.panel):this.checkForEmptyPanel(n.params.panel)||(l=this.getYAxisByName(s,n.params.name))&&(l.name=l.studies[0]||l.renderers[1])),r=!0)}r||this.deleteSeries(a,t),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),this.runAppend(i,arguments)}},t.Comparison=t.Comparison||function(){},t.Comparison.initialPrice=100,t.Comparison.getInitialPrice=function(e){var i,a,r;if("n",V.W3G(),"um","be","r",e.initialComparisonPrice)return e.initialComparisonPrice;if(e.initialComparisonPrice=100,"number"==j(i=t.Comparison.initialPrice)&&(e.initialComparisonPrice=i),"string"==typeof i&&(e.series[i]||""===i)){a="Close",e.defaultPlotField&&(e.highLowBars||(a=e.defaultPlotField));for(var n=e.dataSet.length-e.scroll-1;n<e.dataSet.length;n++)if(r=e.dataSet[n]){if(r[i]&&r[i][a]){e.initialComparisonPrice=r[i][a];break}if(""===i&&r[a]){e.initialComparisonPrice=r[a];break}}}return e.initialComparisonPrice},t.Comparison.priceToPercent=function(e,i,a){var r,n=V;r=t.Comparison.baseline||a,n.W5N(),n.s$9(71);var s=n.v$j(10014,14,130066,18,8);n.s$9(27);var o=n.V9a(10,20,1590120,16e4,14);return Math.round((a-r)/r*100*s)/o},t.Comparison.percentToPrice=function(e,i,a){var r;return r=t.Comparison.baseline||1,V.O_b(97),V.V9a(a,100,"1",r)},t.Comparison.priceToRelative=function(e,i,a){var r,n;return r=t.Comparison.baseline||a,n=t.Comparison.getInitialPrice(i),V.s$9(98),V.v$j(a,n,r)},t.Comparison.relativeToPrice=function(e,i,a){var r,n;return r=t.Comparison.baseline||1,V.W3G(),n=t.Comparison.getInitialPrice(i),V.s$9(98),V.V9a(a,r,n)},t.Comparison.createComparisonSegmentInner=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T=V;for(r in a=[],T.W3G(),i.series)(o=i.series[r].parameters).isComparison&&a.push(o.symbol);for(var M in l=["Close","Open","High","Low","iqPrevClose"],h=e.chart.highLowBars,i.defaultPlotField&&!h&&l.unshift(i.defaultPlotField),c=l[0],u=e.layout.studies)if(d=u[M],n=e.panels[d.panel],s=d.getYAxis(e),n&&n.yAxis==s){for(r in d.outputMap)l.push(r);for(var _=0;_<=2;_++)l.push(d.name+"_hist"+(_||""));d.referenceOutput&&l.push(d.referenceOutput+" "+d.name)}for(var F in e.plugins)if((p=e.plugins[F]).transformOutputs)for(r in p.transformOutputs)l.push(r);i.initialComparisonPrice=null,i.dataSegment=[],m=null,T.s$9(99);var P=T.V9a(2,31,15);g=i.dataSet.length-i.scroll-P,e.startComparisonsAtFirstVisibleBar&&(g+=1),T.O_b(1);var L=T.v$j(17,20);f=i.maxTicks+L;for(var O=0;O<=f;O++){if(O==f&&(O=-1),T.O_b(0),(y=T.V9a(g,O))<i.dataSet.length&&y>=0){if(b=(v=i.dataSet[y])[c],!m){if(0===b||null===b){if(O<0)break;continue}m=t.clone(v)}for(v.transform||(v.transform={cache:{},DT:v.DT,Date:v.Date}),!t.Comparison.baseline&&b&&(m=t.clone(v)),t.Comparison.baseline=m[c],x=0;x<l.length;x++)(v[r=l[x]]||0===v[r])&&(v.transform[r]=i.transformFunc(e,i,v[r]));for(x=0;x<a.length;x++)if(r=a[x],C=i.series[r],-1==O&&C&&C.parameters.isComparison)delete v.transform[r];else{S=v[r];for(var E=0;S&&E<l.length;E++)((w=S[l[E]])||0===w)&&((k=m[r]&&m[r][l[0]])||0===k||(m[r]||(m[r]={}),m[r][l[E]]=k=w*t.Comparison.baseline/v[c]),0!==k&&(D=t.Comparison.baseline||1,T.O_b(100),A=T.V9a(w,k,D),v.transform[r]||(v.transform[r]={}),v.transform[r][l[E]]=i.transformFunc(e,i,A)))}i.dataSegment.push(v)}else y<0&&i.dataSegment.push(null);if(O<0)break}},t.Comparison.priceFormat=function(e,t,i){var a,r,n=V;if(n.W5N(),null==i||isNaN(i))return"";if(a=t.yAxis.priceTick,r=e.internationalizer)a>=5?(n.s$9(9),i=r.percent.format(n.V9a(i,100))):a>=.5?(n.O_b(9),i=r.percent1.format(n.v$j(i,100))):a>=.05?(n.O_b(9),i=r.percent2.format(n.V9a(i,100))):a>=.005?(n.O_b(9),i=r.percent3.format(n.v$j(i,100))):(n.s$9(101),i=r.percent4.format(n.v$j("100",1,i)));else if(a>=5)i=i.toFixed(0)+"%";else if(a>=.5){n.O_b(1);var s=n.v$j(9,10);i=i.toFixed(s)+"%"}else if(a>=.05){n.s$9(102);var o=n.v$j(0,6,38,19,11);n.s$9(103);n.v$j(9,5,14,56,6);n.s$9(0);var l=n.V9a(216,3678);n.s$9(1);var h=n.V9a(35651,40744);n.s$9(1);var c=n.v$j(11,9461);i=i.toFixed(o)+(l===h?c:"%")}else if(a>=.005){n.O_b(104);var u=n.v$j(4,16,15,0);i=i.toFixed(u)+"%"}else{n.s$9(105);var d=n.v$j(12,7,66,7,1);n.O_b(106);n.v$j(104,20,19,16,9);n.s$9(107);n.v$j(13,5859,1,20,367);i=i.toFixed(d)+"%"}return 0===parseFloat(i)&&"-"==i.charAt(0)&&(i=i.substring(1)),i},t.ChartEngine.prototype.setComparison=function(e,i,a){var r,n;if("perce","nt","rel","a","tive","s","tr","i","ng",i||(i=this.chart),"string"==j(i)&&(i=this.charts[i]),(a||""===a)&&(t.Comparison.initialPrice=a),!0===e){if(i.isComparison)return;e="percent"}switch(this.resetDynamicYAxis(),n=(r=i.panel.yAxis).priceFormatter==t.Comparison.priceFormat,e){case"relative":this.setTransform(i,t.Comparison.priceToRelative,t.Comparison.relativeToPrice),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSegment",i.isComparison=!0;break;case"percent":this.setTransform(i,t.Comparison.priceToPercent,t.Comparison.percentToPrice),n||(r.originalPriceFormatter={func:r.priceFormatter},r.priceFormatter=t.Comparison.priceFormat),r.whichSet="dataSegment",i.isComparison=!0;break;default:this.unsetTransform(i),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSet",i.isComparison=!1}},t.ChartEngine.prototype.setChartScale=function(e){var i,a;i=this.chart,e||(e="linear"),(a={percent:!0,relative:!0})[e]?this.setComparison(e,i,t.Comparison.initialPrice):a[this.layout.chartScale]&&this.setComparison(!1,i),this.layout.chartScale=e,i.canvas&&this.draw(),this.changeOccurred("layout")}},b=function(e){var t,i;function a(e){var t;if("tex","t-align","fo","nt-weight","f","ill",e.style)for(var i in t=getComputedStyle(e),["alignment-baseline","dominant-baseline","fill","fill-opacity","font-family","font-size","font-variant","font-weight","text-align","text-anchor"].forEach((function(i){V.W3G(),!e.style[i]&&t[i]&&(e.style[i]=t[i])})),e.children)a(e.children[i])}function r(e,t,r){var n,s,o,l,h,c,u;if(V.W3G(),"s","v","g",t||(t={}),[],"ciq-no-share",n=document.querySelector("body"),t.hide&&t.hide instanceof Array){s=t.hide.join(", "),o=document.querySelectorAll(s);for(var d=0;d<o.length;d++)o[d].classList.add("ciq-no-share")}for(n.classList.add("sharing"),l=e.chart.container.getElementsByTagName("svg"),h=[],c=0;c<l.length;c++)u=l[c],h.push(u.innerHTML),a(u);i(e.chart.container,{allowTaint:!1,logging:!1,width:t.width||null,height:t.height||null,backgroundColor:t.background||null,useCORS:!0}).then((function(e){for("shar","i","n","g",r&&r(null,t.data?e.toDataURL("image/png"):e),c=0;c<l.length;c++)l[c].innerHTML=h[c];n.classList.remove("sharing")})).catch((function(e){for("sh","aring",r&&r(e),c=0;c<l.length;c++)l[c].innerHTML=h[c];n.classList.remove("sharing")}))}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Share=t.Share||function(){},t.Share.FullChart2PNG=function(e,a,n){if(V.W3G(),e&&e.chart){if("undefined"==typeof html2canvas)return function(e){if("unde",V.W5N(),"fi","ned","undefined"!==("undefined"==typeof html2canvas?"undefined":j(html2canvas)))return i=html2canvas,e();if("unde","fi","n","ed","undefined"!==("undefined"==typeof requirejs?"undefined":j(requirejs)))try{return requirejs(["html2canvas.min.js"],(function(t){return i=t,e()}))}catch(e){console.warn("Require loading has failed, attempting to load html2canvas manually.")}t.loadScript(function(){var e,i;if(t.Share.html2canvasLocation)return t.Share.html2canvasLocation;V.W3G(),e=document.getElementsByTagName("script");for(var a=0;a<e.length;a++)if((i=e[a]).src&&i.src.indexOf("share.js")>-1)return"third","par","ty/",i.src.replace(/standard\/share\.js/,"")+"thirdparty/";return"js/thirdparty/"}()+"html2canvas.min.js",(function(){return i=html2canvas,e()}))}((function(){return V.W3G(),r(e,a,n)}));i=html2canvas,r(e,a,n)}},t.Share.createImage=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b=V;if(r="i",r+="m",r+="g",n=[].slice.call(arguments),a=n.pop(),null!==i&&"object"==j(i)||(i={widthPX:n[1],heightPX:n[2],imageType:n[3]}),s=i.widthPX,o=i.heightPX,l=i.imageType,h=e.chart.canvas.height,c=e.chart.canvas.width,e.chart.canvas.style.height&&(h=t.stripPX(e.chart.canvas.style.height),c=t.stripPX(e.chart.canvas.style.width)),s&&o){u=-1365210961,d=-209622214,p=2;for(var x=1;b.m6F(x.toString(),x.toString().length,8753)!==u;x++)h=o,c=s,p+=2;b.m6F(p.toString(),p.toString().length,63253)!==d&&(h=o,c=s)}else if(o){m=-1835035992,b.s$9(29),g=-b.V9a("1583007615",0),f=2;for(var C=1;b.m6F(C.toString(),C.toString().length,48631)!==m;C++)c=e.chart.canvas.width+(h-e.chart.canvas.height),f+=2;b.m6F(f.toString(),f.toString().length,63192)!==g&&(c=e.chart.canvas.width*(h/e.chart.canvas.height))}else s&&(c=s,h=e.chart.canvas.height*(s/e.chart.canvas.width));y=l?"image/"+l:"image/png",(v=document.createElement(r)).onload=function(){t.Share.FullChart2PNG(e,{image:this,width:c,height:h,hide:i.hide},(function(e,t){if(b.W3G(),e)"Error producing"," canvas snapshot: ",b.O_b(0),console.warn(b.v$j("Error producing canvas snapshot: ",e));else try{a(t.toDataURL(y))}catch(e){var i;1709647944,-1990266272,i=2;for(var r=1;1709647944!==b.m6F(r.toString(),r.toString().length,56683);r++)console.warn(""),a(v.src),i+=2;-1990266272!==b.l5h(i.toString(),i.toString().length,12654)&&(console.warn(""),a(v.src)),console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),a(v.src)}}))},v.src=e.chart.canvas.toDataURL(y)},t.Share.uploadImage=function(e,i,a,r){a||(a={}),a.image=e,t.postAjax(i,JSON.stringify(a),(function(e,t){V.W3G(),200==e?r(null,t):r(e,null)}))||r(0,null)},t.Share.shareChart=function(e,i,a){var r=V;r.W3G(),t.Share.createImage(e,{},(function(n){var s,o,l,h,c;if(s=t.uniqueID(),o="https:/",o+="/share.chartiq.co",o+="m",r.O_b(35),l=r.V9a("/upload/",s,o),i&&(i.host&&(o=i.host),i.path)){r.O_b(0);r.V9a(8588,15);r.s$9(0);var u=r.v$j(9931,19);r.O_b(108);r.V9a(20,2345,53920,5,6);r.s$9(109);var d=r.v$j(31,15,1,1,17);r.O_b(26);r.V9a(5383,8,4325,5);r.O_b(37);var p=r.V9a(9,6,7845);r.O_b(110);r.v$j(8236,14,1,16,12);r.O_b(111);var m=r.V9a(3,2,564,477);l=o+i.path+(139.87==u?"808.95"*d>=p?"D":m:"/")+s}h=e.getStartDateOffset(),c={id:s,image:n,config:{layout:e.exportLayout(),drawings:e.exportDrawings(),xOffset:h,startDate:e.chart.dataSegment[h].Date,endDate:e.chart.dataSegment[e.chart.dataSegment.length-1].Date,id:s,symbol:e.chart.symbol}},t.Share.uploadImage(n,l,c,(function(e,i){null!==e?t.alert("error sharing chart: ",e):(r.O_b(0),a(r.v$j(o,i)))}))}))}},x=function(e){var t,i=V;i.W5N(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.setRange=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,V,H,B,W,R;function X(e,a,r,n,s,o){var l,h;return i.s$9(39),l=i.v$j("0",0),i.O_b(1),h=i.v$j(a,e),t.ChartEngine.isDailyInterval(r)?l="month"==r?h/t.MONTH/n:"week"==r?h/t.WEEK/n:h/t.DAY/n:isNaN(r)||("millisecond"==s?(i.s$9(101),l=i.v$j(n,r,h)):l="second"==s?h/t.SECOND/(n*r):h/t.MINUTE/(n*r)),Math.round(l)}if(r="st",r+="ri",r+="ng",t.isEmpty(e)){e={dtLeft:arguments[0],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},n=-985953697,s=-549256637,o=2;for(var U=1;i.l5h(U.toString(),U.toString().length,86618)!==n;U++)a=arguments[1],o+=2;i.m6F(o.toString(),o.toString().length,55147)!==s&&(a=arguments[4])}function Y(e){return e&&0===m?(h.scroll=M,p.setCandleWidth(_),p.layout.interval=F,p.layout.periodicity=P,p.layout.timeUnit=L,void(a&&a(e))):++m>10?("CIQ.ChartEngine.setRan","ge(): Too many loads (10) from server. Stopping. Check periodicity log","ic.",console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),void Q()):void Q()}function Q(t){var r,n,s,o,d,m,g,f,y,v,b,x,C,S,w,k;if("l","a","y","out",void 0===t&&(t=null),r=0,i.s$9(2),n=i.V9a(1,"0"),s=new Date,o=e.base,i.W5N(),d=e.periodicity,m=p.layout,e.goIntoFuture&&(!h.masterData.length||c>h.masterData[h.masterData.length-1].DT)&&(g=h.masterData.length?h.masterData.pop():{DT:c},f=p.doCleanupGaps([g,{DT:u}],h,{cleanupGaps:"gap",noCleanupDates:!0}),p.setMasterData(h.masterData.concat(f),h,{noCleanupDates:!0}),p.createDataSet(null,null,{appending:!0})),v=(y=h.dataSet).length,y&&0!==v){if("day"===o&&d&&"day"===d.interval)r=v<(x=e.multiplier)?0:v-x,i.s$9(1),n=i.V9a(1,v);else if("today"===o&&y[v-1].DT.getDate()<s.getDate()){(C=new Date(y[v-1].DT.getTime())).getTime(),b=0;for(var D=v-1;D>=0;D--)if(y[D]&&y[D].DT.getDate()!=C.getDate()){C=new Date(+y[D+1].DT),i.O_b(6),b=i.v$j(D,"1");break}r=b,i.O_b(1),n=i.v$j(1,v)}else"a","l","l",r="all"!=e.base&&(c.getTime()>=y[0].DT.getTime()||e.goIntoPast)?p.tickFromDate(c,h,null,!0):0,"all"!=e.base&&(u.getTime()<=y[v-1].DT.getTime()||e.goIntoFuture)?(n=p.tickFromDate(u,h))>v-1&&n--:(i.s$9(36),n=i.v$j("1",v));if(i.O_b(112),(S=i.v$j(0,r,"1",n))<1)a&&a(t);else{for(var A in w=e.padding||0,n<v-1&&(i.s$9(29),w=i.v$j("0",32)),k=(h.width-w)/S,p.setCandleWidth(k,h),i.O_b(113),h.scroll=i.v$j(1,v,n,S),i.s$9(42),p.micropixels=i.V9a("1",1),p.panels)p.calculateYAxisMargins(p.panels[A].yAxis);e.dontSaveRangeToLayout?delete m.range:(delete e.chart,delete m.setSpan,m.range=e),p.draw(),p.changeOccurred("layout"),l||("periodi","ci","ty",p.dispatch("periodicity",{stx:p,differentData:O,prevPeriodicity:{interval:F,periodicity:P,timeUnit:L}})),a&&a(t)}}else a&&a(t)}if(this.staticRange&&(e.goIntoPast=e.goIntoFuture=!0),e.chart||(e.chart=this.chart),void 0===e.padding&&(e.padding=0),l=!1,i.W5N(),h=e.chart,c=j(e.dtLeft)===r?new Date(e.dtLeft):e.dtLeft,u=new Date,e.dtRight&&(u="string"==typeof e.dtRight?new Date(e.dtRight):e.dtRight),c||(d=this.standardMarketIterator(u,null,h),c=d.previous(h.maxTicks),e.periodicity||(l=!0)),h.inflectionPoint=c,this.layout.range={dtLeft:c,dtRight:u},p=this,m=0,this.quoteDriver){if(l)g=this.layout.interval,y=this.layout.timeUnit,f=this.layout.periodicity;else if(e.periodicity)g=(v=t.cleanPeriodicity(e.periodicity.period,e.periodicity.interval,e.periodicity.timeUnit)).interval,y=v.timeUnit,f=v.period;else if(b=u.getTime()-c.getTime(),this.autoPickCandleWidth.turnOn){w=0,w=this.autoPickCandleWidth.candleWidth?this.autoPickCandleWidth.candleWidth:this.chart.barsHaveWidth?5:2,k=h.width/w,g=(D=this.dynamicRangePeriodicityMap)[0].interval,f=1;for(var q=0;q<D.length;q++){if((T=b/D[q].rangeInMS)<k){D[q-1]?(g=D[q-1].interval,y=D[q-1].timeUnit,i.s$9(9),f=Math.ceil(i.V9a(A,k))):(g=D[q].interval,y=D[q].timeUnit,f=1);break}A=T}}else{x=this.staticRangePeriodicityMap,C=null;for(var Z=0;Z<x.length;Z++)if(b/(S=x[Z]).rangeInMS<1.001){C=S;break}g=C.interval,f=C.periodicity,y=C.timeUnit}if(M=this.chart.scroll,_=this.layout.candleWidth,F=this.layout.interval,P=this.layout.periodicity,L=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=X(u.getTime(),c.getTime(),g,f,y,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,O=this.needDifferentData({period:f,interval:g,timeUnit:y}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>c||this.chart.endPoints.end<u)&&(O=!0),!this.chart.masterData||!this.chart.masterData.length||O||e.forceLoad){if(E="w",E+="e",E+="e",E+="k",I="mon",I+="th",this.layout.interval=g,this.layout.periodicity=f,this.layout.timeUnit=y,this.layout.timeUnit||(N="minut",N+="e",$="sec",$+="o",$+="n",$+="d",t.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:"second"==this.layout.interval?this.layout.timeUnit=$:"tick"!=this.layout.interval&&(this.layout.timeUnit=N)),z={symbol:h.symbol,symbolObject:h.symbolObject,chart:h,nodraw:!0},"tick"==this.layout.interval&&(z.startDate=c,z.endDate=u),this.displayInitialized||(z.initializeChart=!0),((V={symbol:h.symbol,symbolObject:h.symbolObject,interval:this.layout.interval}).interval==I||V.interval==E)&&!this.dontRoll){i.O_b(29),H=-i.v$j("476796062",32),B=-1890089088,W=2;for(var G=1;i.l5h(G.toString(),G.toString().length,71383)!==H;G++)V.interval="",W+=2;i.m6F(W.toString(),W.toString().length,63526)!==B&&(V.interval="day")}R=Math.max(this.quoteDriver.getQuoteFeed(V).behavior.bufferSize+50,200),d=this.standardMarketIterator(c,null,h),z.startDate=new Date(d.previous(R).getTime()),d=this.standardMarketIterator(u,null,h),z.endDate=new Date(d.next(R).getTime()),z.endDate<Date.now()&&(this.isHistoricalModeSet=!0),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(z,Y)}else this.layout.interval==g&&this.layout.periodicity==f&&this.layout.timeUnit==y&&this.chart.dataSegment&&this.chart.dataSegment[0]&&this.chart.dataSegment[0].DT==h.inflectionPoint||(this.layout.interval=g,this.layout.periodicity=f,this.layout.timeUnit=y,this.createDataSet()),Y()}else Q()},t.ChartEngine.prototype.setSpan=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k;if(r="da",r+="y",n="we",n+="ek",s="a",s+="ll",o="obj",o+="ec",o+="t",l=arguments[0],h=arguments[1],c=arguments[2],u=arguments[3],j(e)==o?(l=e.period?e.period:e.multiplier?e.multiplier:1,h=e.interval?e.interval:e.base?e.base:e.span?e.span:e.period,c=e.padding,u=e.chart):(e={period:l,interval:h,padding:c,chart:u},a=arguments[5]),u||(u=this.chart),d=u.market,(h=h.toLowerCase())==s)return e.dontSaveRangeToLayout=!0,void this.displayAll(e,a);function D(e,t){return b?(7,t?e.setHours(e.getHours()+7):(e.setHours(e.getHours()-7),d.isMarketDate(e)||e.setDate(e.getDate()-2)),e):e}function A(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),i.s$9(39),e.setMilliseconds(i.v$j("0",0)),e}m=h,g=1,"today"==h?m="day":"year"==h&&(m="month",i.O_b(2),g=i.V9a(1,"12")),f=t.shallowClone(e),v=(y={begin:d.marketZoneNow(),interval:m,period:g}).begin,b=t.Market.Symbology.isForexSymbol(u.symbol),i.W5N(),"ytd"===h?(v=A(v),i.O_b(2),v.setMonth(i.v$j(1,"0")),v.setDate(1)):"month"===h?(v=A(new Date)).setMonth(v.getMonth()-l):"year"===h?(v=A(new Date)).setFullYear(v.getFullYear()-l):h===n?(v=A(new Date)).setDate(v.getDate()-7*l):h===r&&1==l&&d.isMarketDay()?(x=v.getHours(),C=v.getMinutes(),S=v.getSeconds(),w=v.getMilliseconds(),(v=(p=d.newIterator(y)).previous()).setHours(x,C,S,w),v=d._convertFromMarketTZ(v)):"today"===h?(y.begin=D(v,!0),p=d.newIterator(y),(d.isOpen()||d.getPreviousOpen().getDate()==v.getDate())&&p.next(),D(v=p.previous()),f.goIntoFuture=!0,f.dtRight=new Date(+v),f.dtRight.setDate(v.getDate()+1),f.dtRight=d._convertFromMarketTZ(f.dtRight),b||(v.setHours(p.market.zopen_hour),v.setMinutes(p.market.zopen_minute),v.setSeconds(0)),v=d._convertFromMarketTZ(v)):("day"==h&&(y.begin=D(v,!0)),p=d.newIterator(y),1==l&&l++,i.O_b(1),v=p.previous(i.v$j(1,l)),"day"==h&&(v=d._convertFromMarketTZ(D(v)))),f.dtLeft=v,f.maintainPeriodicity&&(f.periodicity={},f.periodicity.interval=this.layout.interval,f.periodicity.period=this.layout.periodicity),u.spanLock=!1,f.dontSaveRangeToLayout=!0,k=this,this.setRange(f,(function(t){k.layout.setSpan=e,k.changeOccurred("layout"),"today"==h&&(u.spanLock=!0),a&&a(t)}))},t.ChartEngine.prototype.getSpanCandleWidth=function(e){var t,a,r,n,s;if("Y","T","D","w","ee","k","d","ay",e&&e.base&&e.multiplier){t=parseFloat(e.multiplier),a=e.base,r=new Date,n=new Date,"year"==a?n.setFullYear(n.getFullYear()-t):"month"==a?n.setMonth(n.getMonth()-t):"day"==a?n.setDate(n.getDate()-t):"week"==a?n.setDate(n.getDate()-7*t):"YTD"==a&&(n.setMonth(0),n.setDate(1)),i.s$9(114);var o=i.v$j(7,2,233,600);return s=(r.getTime()-n.getTime())/1e3/60/o/24,i.s$9(98),s=i.v$j(5,s,7),this.chart.width/s}},t.ChartEngine.prototype.displayAll=function(e,a){var r,n,s,o=this.chart,l=this.layout;function h(){var n;o.masterData&&o.masterData.length&&((n=t.clone(e)).dtLeft=o.endPoints.begin.DT,n.dtRight=o.endPoints.end.DT,n.periodicity={},n.periodicity.interval=l.interval,n.periodicity.period=l.periodicity,n.periodicity.timeUnit=l.timeUnit,r.setRange(n,(function(t){for(var n in r.layout.setSpan={base:e.base,multiplier:e.multiplier},r.changeOccurred("layout"),r.panels)r.calculateYAxisMargins(r.panels[n].yAxis);i.W5N(),r.draw(),a&&a(t)})))}function c(e){i.W3G(),e||r.quoteDriver.loadAll(o,h)}e&&e.chart&&(o=e.chart),i.W5N(),r=this,this.quoteDriver?(n=e.maintainPeriodicity?{period:l.periodicity,interval:l.interval,timeUnit:l.timeUnit}:{period:1,interval:"month",timeUnit:null},n=e.periodicity?e.periodicity:n,n=t.cleanPeriodicity(n.period,n.interval,n.timeUnit),s=this.needDifferentData(n),this.layout.periodicity=n.period,this.layout.interval=n.interval,this.layout.timeUnit=n.timeUnit,e.forceLoad||s?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({noDraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},c)):o.moreAvailable||!o.upToDate?c():(this.createDataSet(),h())):h()}},C=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.importLayout=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I=V;if(a="o",a+="bjec",a+="t",e){for(var N in r=this,n=[],j(i)!==a&&(i={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),s=this.layout,o=t.shallowClone(s),l=i.managePeriodicity,h=i.cb,c=i.seriesCB,u=i.noDataLoad,d=i.preserveTicksAndCandleWidth,p=null,this.exportDrawings&&(p=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0,s.studies)m=s.studies[N],t.getFn("Studies.removeStudy")(this,m);for(v in this.overlays={},g=t.shallowClone(this.panels),this.panels={},f=t.clone(e),s.periodicity=o.periodicity,s.interval=o.interval,s.timeUnit=o.timeUnit,s.setSpan=o.setSpan,s.range=o.range,d?s.candleWidth=o.candleWidth:s.candleWidth||(s.candleWidth=8),this.setCandleWidth(s.candleWidth),s.flipped&&this.flipChart(s.flipped),C=function(e,t){return e.index<t.index?-1:1},y=f.panels)"index"in y[v]||(C=null),(b=y[v]).name=v,n.push(b);if(s.panels={},S=null,n.length>0){C&&n.sort(C);for(var $=0;$<n.length;++$)x=(b=n[$]).yAxis?new t.ChartEngine.YAxis(b.yAxis):null,this.stackPanel(b.display,b.name,b.percent,b.chartName,x),b.soloing&&(S=this.panels[b.name])}for(var z in t.isEmpty(y)&&(w="ch",w+="a",w+="rt",k="c",k+="h",k+="ar",k+="t",this.stackPanel("chart",k,1,w)),this.resizeCanvas(),g)if(D=g[z],A=this.panels[z]){for(var H in this.container.removeChild(A.holder),D.handle&&this.container.removeChild(D.handle),{holder:!0,subholder:!0,display:!0,icons:!0})A[H]=D[H];this.configurePanelControls(A),D.chart.panel==D&&(D.chart.panel=A)}else this.privateDeletePanel(D);for(var B in this.chart.panel=this.panels.chart,X(this.panels),t.dataBindSafeAssignment(s,t.clone(f)),T=t.clone(s.studies),delete s.studies,T)M=T[B],t.getFn("Studies.addStudy")(this,M.type,M.inputs,M.outputs,M.parameters,M.panel);if(this.extendedHours&&this.extendedHours.prepare(s.extended,s.marketSessions),void 0===s.chartType&&(s.chartType="line"),this.setMainSeriesRenderer(),S&&this.panelSolo(S),this.adjustPanelPositions(),I.W5N(),X(this.panels),this.storePanels(),!u){if(f.symbols&&f.symbols.length)return _={chart:this.chart},!d&&l&&f.range&&Object.keys(f.range).length?_.range=f.range:!d&&l&&f.setSpan&&Object.keys(f.setSpan).length?_.span=f.setSpan:l&&f.interval?_.periodicity={interval:f.interval,period:f.periodicity,timeUnit:f.timeUnit}:_.periodicity={interval:o.interval,period:o.periodicity,timeUnit:o.timeUnit},F=f.symbols[0].symbolObject||f.symbols[0].symbol,void this.loadChart(F,_,(function(e){var i;if(!e){for(var a,n=1;n<f.symbols.length&&r.addSeries;++n)(a=f.symbols[n]).parameters||(a.parameters={}),i=t.clone(a.parameters),this.panels[i.panel]?r.addSeries(a.id,i,R):console.warn('Warning: Series "'+a.id+'" could not be imported due to a missing corresponding panel "'+i.panel+'"');f.chartScale&&r.setChartScale(f.chartScale)}W(e),h&&h.apply(null,arguments)}));if(l){if(!d&&this.setRange){if((P=f.range)&&Object.keys(P).length&&this.chart.symbol)return void this.setRange(P,(function(){W(),I.W3G(),h&&h()}));if(f.setSpan&&Object.keys(f.setSpan).length&&this.chart.symbol)return void this.setSpan(f.setSpan,(function(){I.W5N(),W(),h&&h()}))}return L=f.interval,O=f.periodicity,E=f.timeUnit,isNaN(O)&&(O=1),L||(L="day"),void this.setPeriodicity({period:O,interval:L,timeUnit:E},(function(){W(),h&&h()}))}}l&&(s.periodicity=f.periodicity,s.interval=f.interval,s.timeUnit=f.timeUnit,s.setSpan=f.setSpan),this.createDataSet(),d||this.home(),W(),h&&h()}else i.cb&&i.cb();function W(e){var t,i,a;if(p&&r.importDrawings(p),r.currentlyImporting=!1,!e){for(var n in a=[],r.chart.series){if(!r.removeSeries)break;"study"==(i=r.chart.series[n]).parameters.bucket&&(t=!0,r.removeSeries(i),a.push(i))}for(var s=0;s<a.length;s++)i=a[s],r.addSeries(i.id,i.parameters,o);t||r.draw(),r.updateListeners("layout"),r.changeOccurred("layout")}function o(){I.W3G(),r.createDataSet(),X(r.panels),r.calculateYAxisPositions(),r.draw()}}function R(){I.W3G(),r.calculateYAxisPositions(),X(r.panels),c&&c()}function X(e){for(var t,i=0;i<n.length;i++)s(t=n[i],"yaxisLHS"),s(t,"yaxisRHS");function a(e){return I.W3G(),!!e}function s(t,i){var r,n,s,o;if(t[i]&&t[i].length&&(r=e[t.name])){n=r[i],s=new Array(n.length);for(var l=0;l<n.length;l++)(o=t[i].indexOf(n[l].name))>-1?s[o]=n[l]:s.push(n[l]);s.length&&(r[i]=s.filter(a))}}I.W5N(),r.chart.yAxis=r.chart.panel.yAxis}},t.ChartEngine.prototype.exportLayout=function(e){var i,a,r,n,s,o;function l(e){var t;t=[];for(var i=0;i<e.length;i++)t.push(e[i].name);return t}for(var h in i={},this.layout)"studies"!=h&&"panels"!=h&&"drawing"!=h?i[h]=t.clone(this.layout[h]):"studies"==h?i.studies={}:"panels"==h&&(i.panels={});for(var c in a=0,this.panels)!1!==(r=this.panels[c]).exportable&&((n=i.panels[c]={}).percent=r.percent,n.display=r.display,n.chartName=r.chart.name,n.soloing=r.soloing,n.index=a++,n.yAxis={name:r.yAxis.name,position:r.yAxis.position},r.yaxisLHS&&(n.yaxisLHS=l(r.yaxisLHS)),r.yaxisRHS&&(n.yaxisRHS=l(r.yaxisRHS)));for(var u in this.layout.studies)s=i.studies[u]={},o=this.layout.studies[u],s.type=o.type,s.inputs=t.clone(o.inputs),s.outputs=t.clone(o.outputs),s.panel=o.panel,s.parameters=t.clone(o.parameters);return e?i.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0}):delete i.symbols,i},t.ChartEngine.prototype.importPreferences=function(e){t.extend(this.preferences,e),e.timeZone&&this.setTimeZone(this.dataZone,e.timeZone),e.language&&t.I18N&&t.I18N.localize(this,e.language),this.changeOccurred("preferences")},V.W3G(),t.ChartEngine.prototype.exportPreferences=function(){return this.preferences}},S=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine&&(t.ChartEngine.prototype.rightClickOverlay=function(e,t){var i,a,r;i="r",i+="ightClickOverl",i+="ay",a="rig",a+="htClickOverl",a+="ay",this.runPrepend(a,arguments)||((r=this.overlays[e]).editFunction?r.editFunction(t):this.removeOverlay(e),this.runAppend(i,arguments))},t.ChartEngine.prototype.addOverlay=function(e){this.runPrepend("addOverlay",arguments)||(this.overlays[e.name]=e,this.runAppend("addOverlay",arguments))},t.ChartEngine.prototype.removeOverlay=function(e){var i,a,r,n,s;if(V.W3G(),i="rem",i+="o",i+="ve",i+="Overlay",!this.runPrepend("removeOverlay",arguments)){for(var o in a=this.overlays[e],this.overlays){r="Fi",r+="e",r+="l",r+="d",n=this.overlays[o],s=[r],t.Studies&&(s=t.Studies.getFieldInputs(n));for(var l=0;l<s.length;l++)a.outputMap[n.inputs[s[l]]]&&this.removeOverlay(n.name)}a&&(this.cleanupRemovedStudy(a),this.panels[a.panel],delete this.overlays[e],this.checkForEmptyPanel(a.panel)),this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),this.resetDynamicYAxis(),this.runAppend(i,arguments)}},t.ChartEngine.prototype.cleanupRemovedStudy=function(e){if(e){for(var i in e.study.removeFN&&e.study.removeFN(this,e),this.plugins)i.indexOf("{"+e.id+"}")>-1&&delete this.plugins[i];this.layout.studies&&delete this.layout.studies[e.name],delete this.overlays[e.name],t.Studies&&t.Studies.removeStudySymbols(e,this),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),t.Studies=t.Studies||function(){},t.Studies.DEFAULT_INPUTS={Period:14},t.Studies.DEFAULT_OUTPUTS={Result:"auto"},t.Studies.sortForProcessing=function(e){var t,i,a,r,n=V;t=[],n.O_b(39),i=-n.v$j("950106683",0),a=2;for(var s=1;n.l5h(s.toString(),s.toString().length,86030)!==i;s++)r=e.layout.studies,a+=2;return-32912493!==n.m6F(a.toString(),a.toString().length,1890)&&(r=e.layout.studies),r&&function t(i,a){n.W3G(),i.forEach((function(i){var r;-1==a.indexOf(i)&&((r=i.getDependents(e)).length&&t(r,a),a.unshift(i))}))}(Object.values(r),t),n.W3G(),t},t.Studies.StudyDescriptor=function(e,i,a,r,n,s){var o;this.name=e,V.W5N(),this.type=i,this.panel=a,this.inputs=r,this.outputs=n,this.parameters=s,this.outputMap={},this.min=null,this.max=null,this.startFrom=0,this.subField="Close",(o=t.Studies.studyLibrary[i])||(o={},("chart"==a||!a&&s&&"chart"==s.chartName)&&(this.overlay=!0)),void 0===o.inputs&&(o.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===o.outputs&&(o.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),this.study=o,this.libraryEntry=o},t.Studies.StudyDescriptor.prototype.getYAxis=function(e){var t,i,a;return t=this.yAxis,this.parameters&&(i=this.parameters.yaxisDisplayValue),V.W5N(),t||(a=e.panels[this.panel])&&(t=e.getYAxisByName(a,i)||e.getYAxisByName(a,this.name)||a.yAxis),t||(t=e.getYAxisByName(e.chart.panel,i)||e.chart.panel.yAxis),t},t.Studies.StudyDescriptor.prototype.getContext=function(e){return e.chart.context},t.Studies.StudyDescriptor.prototype.getDependents=function(e,i){var a,r,n;for(var s in a=[],e.layout.studies)if((r=e.layout.studies[s])!=this){n=t.Studies.getFieldInputs(r);for(var o=0;o<n.length;o++)if(r.inputs[n[o]].includes(this.name)){if(i&&r.parameters&&r.parameters.panelName)continue;a.push(r),a=a.concat(r.getDependents(e,i));break}}return a},t.Studies.StudyDescriptor.prototype.undraggable=function(e){var t;if(t=this.study.attributes,V.W5N(),t){if(t.panelName&&t.panelName.hidden)return!0;if(t.yaxisDisplayValue&&t.yaxisDisplayValue.hidden)return!0}return!1},t.Studies.StudyDescriptor.prototype.appendFutureTicks=function(e,t){var i,a,r,n;if((i=e.chart.scrubbed).length){for(a=e.standardMarketIterator(i[i.length-1].DT),r=t.length-1;r>=0;r--){for(var s in n=t[r])if(n[s]||0===n[s]){r=-1;break}if(-1==r)break;t.pop()}for(V.W5N(),r=0;r<t.length;r++)(n=t[r]).DT||(n.DT=a.next()),n.displayDate||e.setDisplayDate(n),n.futureTick=!0,i.push(n)}},t.Studies.generateID=function(e,i,a,r,n){var s,o,l,h,c,u,d=V;if(s=t.Studies.studyLibrary[i],d.s$9(35),o=d.V9a(n||i,"",""),s&&s.customRemoval)return o;if(!t.isEmpty(a)){for(var p in l=!0,a)"f","i","el","d",h="Ancho",h+="r",h+=" Sele",["id","display","Shading",h+="ctor"].includes(p)||"field"!=(c=a[p])&&(c=c.toString(),void 0!==t.Studies.prettify[c]&&(c=t.Studies.prettify[c]),l?(l=!1,o+=" ("):c&&(o+=","),o+=c);l||(o+=")")}if(r&&0===r.indexOf(o))return r;if(e.layout.studies&&e.layout.studies[o])for(var m=2;m<50;m++)if(d.s$9(35),u=d.V9a("-",m,o),!e.layout.studies[u]){o=u;break}return o},t.Studies.DialogHelper=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P=V;function L(e){var t,a,r;t={},a=e.defaults,r={name:e.name,heading:i.translateIf(e.label),defaultValue:a[0],value:e.value,options:t,type:"select"};for(var n=0;n<a.length;n++)t[a[n]]=i.translateIf(a[n]);return void 0!==e.color&&(r.defaultColor=i.defaultColor,r.color=e.color),r}function O(e){return{name:e.name,heading:i.translateIf(e.label),defaultValue:e.defaults,value:e.value,type:"checkbox"}}for(var E in i=this.stx=e.stx,a=this.sd=e.sd,this.name=a?a.type:e.name,this.signal=1,this.inputs=[],this.outputs=[],P.W3G(),this.parameters=[],void 0===(r=this.libraryEntry=a?a.study:t.Studies.studyLibrary[e.name]).inputs&&(r.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===r.outputs&&(r.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),s=(n=a&&i.panels[a.panel]?i.panels[a.panel]:i.chart.panel).chart,this.title=i.translateIf(r.name),this.attributes=t.clone(r.attributes),this.attributes||(this.attributes={}),this.attributes)for(var I in o=this.attributes[E])"function"==typeof o[I]&&(o[I]=o[I].call(a));for(var N in l=[],h=i.layout.studies,c=[],a&&(c=Array.prototype.concat(a,a.getDependents(i))),h)if(!(c.indexOf(h[N])>-1))for(var $ in h[N].outputMap)l.push($);for(var z in r.inputs)if(u={},this.inputs.push(u),u.name=z,u.heading=i.translateIf(z),d=r.inputs[z],a&&a.inputs&&void 0!==a.inputs[z]&&null!==a.inputs[z]?u.value=a.inputs[z]:u.value=r.inputs[z],u.defaultInput=r.inputs[z],this.attributes[z]||(this.attributes[z]=t.Studies.inputAttributeDefaultGenerator(u.defaultInput)),d.constructor==Number)u.type="number";else if(d.constructor==String)if("f","i","e","ld",p=t.Studies.movingAverageHelper(i,u.defaultInput))"o","p","tion","s",u.type="select",u.defaultInput=p,(m=t.Studies.movingAverageHelper(i,u.value))||(m=u.value),u.value=m,u.options=t.Studies.movingAverageHelper(i,"options");else if("field"==d){"fie","l","d",g="hl",g+="cc/4",f="h",f+="l/2",y="C",y+="lose",v="Hi",v+="gh",u.type="select",u.options={},b=["Open",v,"Low",y,"Adj_Close",f,"hlc/3",g,"ohlc/4",s.defaultPlotField].concat(l);for(var j=0;j<b.length;j++)x=b[j],u.options[x]=i.translateIf(x);"field"==u.value&&("Clo","se",u.value="Close"),"field"==u.defaultInput&&(u.defaultInput="Close")}else"ti","me","yyyy","-mm-d","d",u.type="text","yyyy-mm-dd"==this.attributes[z].placeholder?u.type="date":"hh:mm:ss"==this.attributes[z].placeholder&&(u.type="time");else if(d.constructor==Boolean)"tru","e","ch","eck","bo","x",u.type="checkbox",!0!==u.value&&"true"!=u.value&&"on"!=u.value||(u.value=!0);else if(d.constructor==Array){"selec","t",u.type="select",u.options={};for(var H=0;H<d.length;H++)u.options[d[H]]=i.translateIf(d[H]);u.value.constructor==Array&&(u.value=u.value[0]),this.attributes[z].defaultSelected?u.defaultInput=this.attributes[z].defaultSelected:u.defaultInput=d[0]}function B(e){var t;if("alias"==M)for(var a in t=1,i.panels){if(a==e)return r(a,t);t++}function r(e,t){return P.W5N(),"Panel "+t.toString()}return e}this.dateTimeInputs=[];for(var W=0;W<this.inputs.length;W++)if("da","te","date"==(C=this.inputs[W]).type){" D","a","t","e",S=C.name.substring(0,C.name.indexOf(" Date"));for(var R=0;R<this.inputs.length;R++)if("time"==(w=this.inputs[R]).type&&w.name==S+" Time"){this.dateTimeInputs.push(S);break}}for(z in this.adjustInputTimesForDisplayZone(),r.outputs)"a","uto",(k={name:z,heading:i.translateIf(z)}).color=k.defaultOutput=r.outputs[z],a&&a.outputs&&a.outputs[z]&&(k.color=a.outputs[z]),"auto"==k.color&&(k.color=i.defaultColor),this.outputs.push(k);function X(e,t){P.W3G(),this.attributes[e]||(this.attributes[e]={}),t&&(this.attributes[e].hidden=!0)}D=a?a.parameters:null,r.parameters&&(A=r.parameters.init)&&(void 0!==A.studyOverZonesEnabled&&("c","hec","kbo","x",T={name:"studyOverZones",heading:i.translateIf("Show Zones"),defaultValue:A.studyOverZonesEnabled,value:A.studyOverZonesEnabled},D&&(D.studyOverZonesEnabled||!1===D.studyOverZonesEnabled)&&(T.value=D.studyOverZonesEnabled),T.type="checkbox",this.parameters.push(T)),void 0!==A.studyOverBoughtValue&&("stu","dyOverBought",T={name:"studyOverBought",heading:i.translateIf("OverBought"),defaultValue:A.studyOverBoughtValue,value:A.studyOverBoughtValue,defaultColor:A.studyOverBoughtColor,color:A.studyOverBoughtColor},D&&D.studyOverBoughtValue&&(T.value=D.studyOverBoughtValue),D&&D.studyOverBoughtColor&&(T.color=D.studyOverBoughtColor),"auto"==T.color&&(T.color=i.defaultColor),T.type="text",this.parameters.push(T)),void 0!==A.studyOverSoldValue&&("t","e","xt","OverS","old",T={name:"studyOverSold",heading:i.translateIf("OverSold"),defaultValue:A.studyOverSoldValue,value:A.studyOverSoldValue,defaultColor:A.studyOverSoldColor,color:A.studyOverSoldColor},D&&D.studyOverSoldValue&&(T.value=D.studyOverSoldValue),D&&D.studyOverSoldColor&&(T.color=D.studyOverSoldColor),"auto"==T.color&&(T.color=i.defaultColor),T.type="text",this.parameters.push(T)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})),M=this.panelSelect=e.panelSelect,_=this.axisSelect=e.axisSelect,e.addWhenDone&&(_=M=!1),(_||M)&&("flippe","dEna","bled",a||(a=t.Studies.addStudy(i,e.name,null,null,{calculateOnly:!0}),t.Studies.removeStudy(i,a)),M&&("un","d","erlay","Show as U","nderlay","A","uto","pan","e","lNa","me","P","a","ne","l",this.parameters.push(L({label:"Panel",name:"panelName",defaults:function(){var e;for(var t in P.W5N(),(e=[]).push("Auto"),i.panels)t==a.panel&&D&&D.panelName||e.push(B(t));return i.checkForEmptyPanel(a.panel,!0,a)||e.push("New panel"),e}(),value:D&&D.panelName?B(D.panelName):"Auto"}),O({label:"Show as Underlay",name:"underlay",defaults:!1,value:a.underlay||a.parameters&&a.parameters.underlayEnabled}))),F=i.getYAxisByName(n,a.name),_&&this.parameters.push(L({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var e,t;e=n.yaxisLHS.concat(n.yaxisRHS),(t=[]).push("default","right","left","none","shared"),P.W5N();for(var i=0;i<e.length;i++)e[i]!=F&&t.push(e[i].name);return t}(),value:D&&D.yaxisDisplayValue||F&&F.position||(a.panel!=a.name?"shared":n.yAxis.position||"default"),color:F&&F.textStyle?F.textStyle:"auto"}),O({label:"Invert Y-Axis",name:"flipped",defaults:!1,value:D?D.flippedEnabled:!!F&&F.flipped})),X.call(this,"flippedEnabled",!F&&a.panel!=a.name),X.call(this,"underlayEnabled",r.underlay),X.call(this,"panelName",null===r.seriesFN),X.call(this,"yaxisDisplayValue",null===r.seriesFN||r.yAxis&&r.yAxis.noDraw))},t.Studies.DialogHelper.prototype.updateStudy=function(e){var i,a,r,n;for(var s in i={},a=this.sd,(r=this.libraryEntry)||(r={}),a||(a=r),i.inputs=t.clone(a.inputs),i.outputs=t.clone(a.outputs),i.parameters=t.clone(a.parameters),this.adjustInputTimesForDisplayZone(e),e.parameters&&e.parameters.panelName&&(e.parameters.panelName=function(e){var t;if("alias"==this.panelSelect&&(a=e,V.W3G(),t=(r=a.match(/.* (\d)/))&&r[1]))for(var i in this.stx.panels)if(!--t)return i;var a,r;return e}.call(this,e.parameters.panelName)),t.extend(i,e),i.parameters||(i.parameters={}),a=i.inputs&&i.inputs.id?t.Studies.replaceStudy(this.stx,i.inputs.id,this.name,i.inputs,i.outputs,i.parameters,null,a.study):t.Studies.addStudy(this.stx,this.name,i.inputs,i.outputs,i.parameters,null,a.study),n=new t.Studies.DialogHelper({stx:this.stx,sd:a,axisSelect:this.axisSelect,panelSelect:this.panelSelect}))"signal"!=s&&(this[s]=n[s]);this.signal*=-1},t.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(e){var i,a,r,n,s,o,l,h,c=V;if(c.W5N(),this.stx.displayZone)for(var u=0;u<this.dateTimeInputs.length;u++){for(i=this.dateTimeInputs[u],o="",e&&e.inputs&&(" ","D","a","te",c.s$9(0),r=e.inputs[c.v$j(i," Date")],c.s$9(0),r&&(o=r),(n=e.inputs[c.V9a(i," Time")])&&(o+=n)),a=0;a<this.inputs.length;a++)" D","at","e",s=this.inputs[a],r||""===r||s.name!=i+" Date"?n||""===n||s.name!=i+" Time"||(o+=s.value):o=s.value+o;if((o=o.replace(/\D/g,"")).length<12)return;if(l=t.strToDateTime(o),!isNaN(l.valueOf()))if(e)" ","Da","t","e",e.inputs||(e.inputs={}),h=t.convertTimeZone(l,this.stx.displayZone),c.s$9(0),e.inputs[c.V9a(i," Date")]=t.yyyymmdd(h),c.O_b(0),e.inputs[c.V9a(i," Time")]=t.hhmmss(h);else for(h=t.convertTimeZone(l,null,this.stx.displayZone),a=0;a<this.inputs.length;a++)" D","at","e",(s=this.inputs[a]).name==i+" Date"&&(s.value=t.yyyymmdd(h)),s.name==i+" Time"&&(s.value=t.hhmmss(h))}},t.Studies.prepareStudy=function(e,i,a){var r=V;if("u","nd",r.W3G(),"efined","undefined"==j(i.calculateFN)&&(i.useRawValues=!0),t.isEmpty(a.outputMap))for(var n in a.outputs)if(i.useRawValues)a.outputMap[n]=n;else{r.s$9(1);r.V9a(10920,11700);r.s$9(111);var s=r.v$j(1,691,691,9668);r.O_b(16);var o=r.V9a(12,9899,10);r.O_b(0);var l=r.V9a(38,529);r.O_b(108);var h=r.V9a(10,31620,437410,10,14);r.O_b(115);r.v$j(1949,1890,16,19,4);r.O_b(1);var c=r.v$j(49150,58980);r.O_b(18);var u=r.v$j(33,14,18);r.s$9(116);var d=r.V9a(384,5,59,1,384);r.O_b(1);var p=r.v$j(8,8858);a.outputMap[n+(s===o?"X":l<h?c<("7233"|u)?"0x5f"<<d:" ":p)+a.name]=n}},t.Studies.rejiggerDerivedStudies=function(e,i,a){var r,n,s,o,l,h;r=i.name,i.panel,n=i.getDependents(e);for(var c=0;c<n.length;c++)if(s=n[c],l=(o=t.clone(s.inputs)).id){!1,h=t.Studies.getFieldInputs(s);for(var u=0;u<h.length;u++)o[h[u]]=o[h[u]].replace(r,a);delete t.Studies.replaceStudy(e,l,s.type,o,s.outputs,t.extend(s.parameters,{rejiggering:!0}),null,s.study).parameters.rejiggering}},t.Studies.removeStudySymbols=function(e,t){if(e.series)for(var i in e.series)t.deleteSeries(e.series[i],null,{action:"remove-study"})},t.Studies.replaceStudy=function(e,i,a,r,n,s,o,l){var h,c,u,d;for(u in s||(s={}),i&&(s.replaceID=i),i=s.replaceID,h=e.layout.studies[i],t.Studies.removeStudySymbols(h,e),h.attribution&&e.removeFromHolder(h.attribution.marker),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),r&&(r.id==r.display&&delete r.display,delete r.id),(c=t.Studies.addStudy(e,a,r,n,s,o,l)).highlight=h.highlight,c.uniqueId=h.uniqueId,d={},e.layout.studies)u==i?d[c.name]=c:d[u]=e.layout.studies[u];for(u in e.layout.studies=d,d={},e.overlays)u==i?(c.overlay||c.underlay)&&(d[c.name]=c):d[u]=e.overlays[u];return e.overlays=d,e.overlays[c.name]||!c.overlay&&!c.underlay||e.addOverlay(c),e.checkForEmptyPanel(h.panel),s.rejiggering||(e.initializeDisplay(e.chart),t.Studies.rejiggerDerivedStudies(e,h,c.inputs.id,c.panel),e.changeOccurred("layout"),e.currentlyImporting||s.calculateOnly||!c.chart.dataSet||e.createDataSet(null,c.chart),e.draw()),t.transferObject(h,c),e.layout.studies[c.name]=h,e.overlays[c.name]=h,e.chart.state.studies.sorted=null,h},t.Studies.addStudy=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$=V;if("c","h","ar","t",l=o||t.Studies.studyLibrary[i],n||(n={}),l){if(l.inputs){for(var z in h=t.clone(l.inputs))h[z]instanceof Array&&(l.attributes&&l.attributes[z]&&l.attributes[z].defaultSelected?h[z]=l.attributes[z].defaultSelected:h[z]=h[z][0]);a=t.extend(h,a)}l.outputs&&(r=t.extend(t.clone(l.outputs),r)),(c=l.parameters)&&c.init&&(n=t.extend(t.clone(c.init),n)),c&&!n.display&&(n.display=c.display)}if($.W3G(),a||(a=t.clone(t.Studies.DEFAULT_INPUTS)),r||(r=t.clone(t.Studies.DEFAULT_OUTPUTS)),n.chartName||(n.chartName="chart"),"Auto"!=n.panelName&&"Default panel"!=n.panelName||(n.panelName=""),a.Period<1&&(a.Period=1),u=null,e.layout.studies||(e.layout.studies={}),!(u=l&&l.initializeFN?l.initializeFN(e,i,a,r,n,s,o):t.Studies.initializeFN(e,i,a,r,n,s,o)))return $.s$9(0),void console.log($.V9a("CIQ.Studies.addStudy: initializeFN() returned null for ",i));if(o=u.study,u.chart=e.charts[n.chartName],u.type=i,u.permanent=o.permanent,u.customLegend=o.customLegend,u.uniqueId=t.uniqueID(),t.Studies.prepareStudy(e,o,u),(d=e.chart.state.studies)||(d=e.chart.state.studies={}),d.sorted=null,n.replaceID?(p=!0,delete n.replaceID):(e.layout.studies[u.inputs.id]=u,(u.overlay||u.underlay)&&e.addOverlay(u),e.currentlyImporting||n.calculateOnly||!u.chart.dataSet||e.createDataSet(null,u.chart)),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),n.calculateOnly)return e.changeOccurred("layout"),u;if(m=e.panels[u.panel],g=!1,(f=!(u.overlay||u.underlay))&&o.horizontalCrosshairFieldFN&&(m.horizontalCrosshairField=o.horizontalCrosshairFieldFN(e,u)),e.editCallback?g=!0:f?e.callbackListeners.studyPanelEdit&&e.callbackListeners.studyPanelEdit.length&&(g=!0):e.callbackListeners.studyOverlayEdit&&e.callbackListeners.studyOverlayEdit.length&&(g=!0),g){for(var j in n.editMode=!0,y=!1,u.inputs)if("id"!=j&&"display"!=j){y=!0;break}if(!y)for(var H in u.outputs){y=!0;break}y&&(void 0!==u.study.edit?u.study.edit&&(O=e,E=u,I=a,N=r,v=function(){t.clearCanvas(O.chart.tempCanvas,O),$.W3G(),E.study.edit(E,{stx:O,inputs:I,outputs:N,parameters:n})},e.setPanelEdit(m,v),u.editFunction=v):f?e.editCallback?("cha","r","t",k=e,D=u,A=a,T=r,$.W3G(),v=function(){var e;$.W5N(),e=k.editCallback(k,D),t.clearCanvas(k.chart.tempCanvas,k),t.Studies.studyDialog(k,i,e,{inputs:A,outputs:T,parameters:n})},"chart"!=m.name&&e.setPanelEdit(m,v)):("cha","rt",b=e,x=u,C=a,S=r,w=n,$.W5N(),v=function(){$.W5N(),t.clearCanvas(b.chart.tempCanvas,b),b.dispatch("studyPanelEdit",{stx:b,sd:x,inputs:C,outputs:S,parameters:w})},"chart"!=m.name&&(e.setPanelEdit(m,v),u.editFunction=v)):(M=e,_=u,F=a,P=r,L=n,v=function(e){t.clearCanvas(M.chart.tempCanvas,M),$.W5N(),M.dispatch("studyOverlayEdit",{stx:M,sd:_,inputs:F,outputs:P,parameters:L,forceEdit:e})},u.editFunction=v))}return e.changeOccurred("layout"),p||e.draw(),u},t.Studies.removeStudy=function(e,t){var i,a,r,n;a=(i=e.panels[t.panel])&&i.yAxis.name,(t.overlay||t.underlay)&&e.removeOverlay(t.name),r=e.panels[t.panel],t.attribution&&e.removeFromHolder(t.attribution.marker),delete e.layout.studies[t.name],r&&!e.checkForEmptyPanel(r)&&(a==t.name&&e.electNewPanelOwner(r),(n=e.getYAxisByName(t.panel,t.name))&&(n.name=n.studies[1]||n.renderers[0])),e.draw(),e.resizeChart()},t.Studies.getPanelFromFieldName=function(e,i){var a,r,n,s,o;if(!(a=t.Studies.getFieldInputs(i)).length)return null;if(!(r=e.layout.studies))return null;for(var l in n={},r)for(var h in r[l].outputMap)n[h]=r[l].panel;V.W5N();for(var c=0;c<a.length;c++)if((s=i.inputs[a[c]])&&(o=n[s]))return o;return null},t.Studies.createLibraryHash=function(){return Object.keys(t.Studies.studyLibrary).join("|")},t.Studies.displayStudies=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(V.W5N(),a&&(i.studyLibraryHash=t.Studies.createLibraryHash()),r=e.layout.studies)for(var v in(n={})[i.name]=!0,r)if((o=(s=r[v]).study)&&(l=s.underlay||s.parameters&&s.parameters.underlayEnabled,!(a&&!l||!a&&l)))if(!(h=t.clone(o.renderer))||h instanceof Array||(h=[h]),c=e.panels[s.panel]){if(c.chart==i&&!c.hidden)if(n[c.name]||(u=s.permanent||!e.manageTouchAndMouse,c.closeX?u&&(c.closeX.style.display="none"):c.close&&("n","o","ne",u&&(c.close.style.display="none")),c.edit&&u&&(c.edit.style.display="none"),n[c.name]=u),d=s.chart.dataSegment,s.panel!=s.parameters.chartName||s.parameters&&s.parameters.panelName||(p=t.Studies.getPanelFromFieldName(e,s))&&s.panel!=p&&(s.panel=p),void 0===o.seriesFN){if(h){s.overlay||t.Studies.createYAxis(e,s,d,c);for(var b=0;b<h.length;b++){for(var x in m=h[b],s.outputMap)s.outputMap[x]==m.field&&(m.field=x);if(m.field){if(m.panel=s.panel,g=m.binding)for(var C in g)(f=t.Studies.determineColor(s.outputs[g[C]]))&&"auto"!=f&&(m[C]=f);m.yAxis=null,(y=t.Renderer.produce(m.type,m)).stx=e,y.attachSeries(null,m).draw()}}}else t.Studies.displaySeriesAsLine(e,s,d);c&&t.Studies.displayError(e,s)}else o.seriesFN&&c&&(o.seriesFN(e,s,d),t.Studies.displayError(e,s))}else e.currentlyImporting&&delete r[v]},t.Studies.displayError=function(e,t,i){var a,r;t.error&&(a=i&&i.panel?i.panel:t.panel,r=!0===t.error?e.translateIf("Not enough data to compute ")+e.translateIf(t.study.name):e.translateIf(t.error),!i||"center"===i.h&&"bottom"===i.v?e.displayErrorAsWatermark(a,r):e.watermark(a,i))},t.Studies.calculateMinMaxForDataPoint=function(e,t,i){var a,r,n;a=Number.MAX_VALUE,V.O_b(67);var s=V.v$j(7,7,18,19);r=Number.MAX_VALUE*s;for(var o=0;o<i.length;o++)null!=(n=i[o][t])&&(isNaN(n)||(a=Math.min(n,a),r=Math.max(n,r)));return{min:a,max:r}},t.Studies.getYAxisParameters=function(e,t){var i,a,r,n=V;return n.W5N(),i={},(a=e.layout.studies&&e.layout.studies[t.name])&&((r=a.study).yaxis||r.yAxisFN?i.noDraw=!0:(r.parameters&&r.parameters.excludeYAxis&&(i.noDraw=!0),i.ground=r.yAxis&&r.yAxis.ground,t&&("byp","a","ss","bypass"!=r.range&&("-","1 ","t","o 1","0 t","o ","1","00","0 to 100"==r.range?(n.s$9(42),i.range=[n.v$j("0",0),n.V9a("100",0,n.s$9(29))]):"-1 to 1"==r.range?i.range=[-1,1]:"0 to max"==r.range?i.range=[0,Math.max(0,t.high)]:(r.centerline||0===r.centerline)&&(i.range=[Math.min(r.centerline,t.low),Math.max(r.centerline,t.high)])),i.range&&(n.s$9(1),t.low=i.range[n.V9a(0,"0")],t.high=i.range[1]),a.min&&(t.min=a.min),a.max&&(t.max=a.max),a.parameters&&a.parameters.studyOverZonesEnabled&&(i.noDraw=!0)))),i},t.Studies.doPostDrawYAxis=function(e,i){var a,r,n,s;for(var o in e.layout.studies)a=e.layout.studies[o],(r=e.panels[a.panel])&&!r.hidden&&a.getYAxis(e)==i&&(n=a.study,i.name==a.name&&(n.yaxis&&n.yaxis(e,a),n.yAxisFN&&n.yAxisFN(e,a)),t.Studies.drawZones(e,a),a.error||((s=n.centerline)||0===s||null!==s&&i.highValue>0&&i.lowValue<0)&&t.Studies.drawHorizontal(e,a,null,s||0,i))},t.Studies.displaySeriesAsLine=function(e,i,a){var r;if(a.length&&(r=e.panels[i.panel])&&!r.hidden)for(var n in V.W3G(),i.outputMap)t.Studies.displayIndividualSeriesAsLine(e,i,r,n,a)},t.Studies.displaySeriesAsHistogram=function(e,t,i){var a,r,n,s,o,l,h,c,u,d;if("overl","aid",i.length&&(a=e.panels[t.panel])&&!a.hidden){for(var p in r=[],t.outputMap)"o","bj","e","ct",(n=t.outputs[t.outputMap[p]])&&(V.s$9(1),s=V.v$j(0,"0.3"),"object"==j(n)&&(s=n.opacity,n=n.color),o={field:p,fill_color_up:n,border_color_up:n,fill_color_down:n,border_color_down:n},t.underlay&&(o.opacity_up=o.opacity_down=s||.3),r.push(o));V.W5N(),l=t.getYAxis(e),c=(h=t.inputs).WidthFactor,t.study&&t.study.parameters&&void 0!==(u=t.study.parameters).widthFactor&&(c=u.widthFactor),d={name:t.name,type:h.HistogramType?h.HistogramType:"overlaid",panel:t.panel,yAxis:l,widthFactor:c||.5,bindToYAxis:!0,highlight:t.highlight},e.drawHistogram(d,r)}},t.Studies.displayIndividualSeriesAsLine=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,b,x;if("tran","s","parent","au",V.W3G(),"t","o","s","t","ring",a.height||(a.height=a.bottom-a.top),s=i.getContext(e),o=i.outputs[i.outputMap[r]]){if(s.save(),"string"===j(o)&&(o={color:o,width:1}),s.lineWidth=o.width||1,"auto"==(l=o.color)&&(l=e.defaultColor),s.strokeStyle=l,h=o.pattern,s.setLineDash(t.borderPatternToArray(s.lineWidth,h)),s.lineDashOffset=0,c=0,u=i.study,d=i.getYAxis(e),c=e.decimalPlacesFromPriceTick(d.priceTick),(i.overlay||i.underlay)&&(c=null),(d.decimalPlaces||0===d.decimalPlaces)&&(c=d.decimalPlaces),p=null,i.parameters&&(p=i.parameters.label),(m=u.parameters)||(m={}),g="step"==m.plotType,i.series)for(var C in i.series)"s","te","p",(f=i.series[C].parameters.type)&&(V.O_b(72),g=V.V9a(f,"step"));m.noLabels&&(p=!1),i.noSlopes||!1===i.noSlopes||(i.noSlopes=m.noSlopes),i.extendToEnd||!1===i.extendToEnd||(i.extendToEnd=m.extendToEnd),y=p||e.preferences.labels&&!1!==p,!1===(v=i.gaplines)&&(v="transparent"),b=i.inputs.Symbol,x=v?e.getGapColorFunction(b,r,o,v):null,e.plotDataSegmentAsLine(r,a,{yAxis:d,skipTransform:e.panels[i.panel].name!=i.chart.name,label:y,labelDecimalPlaces:c,noSlopes:i.noSlopes,step:g,alignStepToSide:i.alignStepToSide,extendToEndOfLastBar:i.extendToEndOfLastBar,width:i.lineWidth,extendToEndOfDataSet:i.extendToEnd,gapDisplayStyle:v,highlight:i.highlight},x),u.appendDisplaySeriesAsLine&&u.appendDisplaySeriesAsLine(e,i,n,r,a),s.restore()}},t.Studies.drawHorizontal=function(e,t,i,a,r,n){var s,o,l;V.W5N(),s=e.panels[t.panel],o=e.getBackgroundCanvas().context,s&&(n||(n=r.textStyle),(l=e.pixelFromPrice(a,s,r))>r.top&&l<r.bottom&&e.plotLine(s.left,s.right,l,l,n,"segment",o,!1,{opacity:n&&n.opacity?n.opacity:.5}))},t.Studies.displayHistogramWithSeries=function(e,i,a){var r;e.panels[i.panel],r=.5,i.underlay&&(r=.3),t.Studies.createHistogram(e,i,a,!1,r),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.drawZones=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M=V;if("b","ord","er","l","e","f",M.W3G(),"t",i.parameters&&i.parameters.studyOverZonesEnabled){if(r=parseFloat(i.parameters.studyOverSoldValue),n=parseFloat(i.parameters.studyOverBoughtValue),s=i.parameters.studyOverSoldColor,o=i.parameters.studyOverBoughtColor,(l=i.zoneOutput)||(l="Result"),(h=t.Studies.determineColor(i.outputs[l]))&&"auto"!=h&&!t.isTransparent(h)||(h=e.defaultColor),s||(s=h),s&&"auto"!=s&&!t.isTransparent(s)||(s=e.defaultColor),o||(o=h),o&&"auto"!=o&&!t.isTransparent(o)||(o=e.defaultColor),c=e.panels[i.panel],d=(u=i.getYAxis(e)).displayBorder,!1===e.axisBorders&&(d=!1),!0===e.axisBorders&&(d=!0),0===u.width&&(d=!1),p=e.getYAxisCurrentPosition(u,c),M.O_b(72),m=M.v$j(p,"left"),(g=u.justifyRight)||!1===g||(g=e.chart.yAxis.justifyRight||!1===e.chart.yAxis.justifyRight?e.chart.yAxis.justifyRight:m),f=Math.round(u.left+(m?u.width:0))+.5,y=d?3:0,b=(v=e.getBackgroundCanvas().context).fillStyle,v.globalAlpha=.2,e.startClip(c.name,!0),v.beginPath(),x=Math.round(e.pixelFromPrice(n,c,u))+.5,v.strokeStyle=o,v.moveTo(c.left,x),v.lineTo(c.right,x),v.stroke(),v.closePath(),v.beginPath(),C=Math.round(e.pixelFromPrice(r,c,u))+.5,v.strokeStyle=s,v.moveTo(c.left,C),v.lineTo(c.right,C),v.stroke(),v.closePath(),(S=new t.Plotter).newSeries("border","stroke",e.canvasStyle("stx_grid_border")),d&&(w=m?f-y:f-.5,k=m?f+.5:f+y,S.moveTo("border",w,x),S.lineTo("border",k,x),S.moveTo("border",w,C),S.lineTo("border",k,C)),v.fillStyle=b,D={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:l+" "+i.name,yAxis:u,opacity:.3},!i.highlight&&e.highlightedDraggable&&(D.opacity*=.3),t.preparePeakValleyFill(e,t.extend(D,{threshold:n,direction:u.flipped?-1:1,color:o})),t.preparePeakValleyFill(e,t.extend(D,{threshold:r,direction:u.flipped?1:-1,color:s})),v.globalAlpha=1,!(i.study&&i.study.yaxis||(d&&("b","order","bor","d","e","r",A=Math.round(u.bottom)+.5,S.moveTo("border",f,u.top),S.lineTo("border",f,A),S.draw(v,"border")),0===u.width))){if(e.canvasFont("stx_yaxis",v),e.canvasColor("stx_yaxis",v),v.textAlign=g?"right":"left",m){if(T=u.left+3,g){M.s$9(0);var _=M.v$j(0,3);T=u.left+u.width-y-_}}else{M.s$9(16);var F=M.v$j(8,18,23);T=u.left+y+F,g&&(T=u.left+u.width)}v.fillStyle=o,v.fillText(n,T,x),v.fillStyle=s,v.fillText(r,T,C),v.fillStyle=b}e.endClip(),v.globalAlpha=1,u.name==i.name&&(u.yAxisPlotter=new t.Plotter)}},t.Studies.createHistogram=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D=V;s=e.panels[i.panel],o=i.getContext(e),l=i.getYAxis(e),e.startClip(s.name),D.O_b(24);var A=D.V9a(17,7,38,16);(h=e.layout.candleWidth-A)<2&&(h=1),c=e.pixelFromPrice(0,s,l),l.min>0&&(c=e.pixelFromPrice(l.min,s,l)),r&&(c=Math.floor(s.top+s.height/2)),u=i.name+"_hist",e.canvasColor("stx_histogram"),d=o.fillStyle,(n||0===n)&&(o.globalAlpha=n),!i.highlight&&e.highlightedDraggable&&(o.globalAlpha*=.3),p=null,m=null,g=i.outputs;for(var T=0;T<a.length;T++)if(f=a[T]){if(f.candleWidth&&(h=Math.floor(Math.max(1,f.candleWidth-2))),y=Math.floor(e.pixelFromBar(T,s.chart)-h/2),v=Math.floor(h),null===p){D.s$9(117);var M=D.V9a(13,4,8);p=(b=e.tickFromPixel(y,s.chart)-M)<0?m:e.pixelFromPrice(e.chart.dataSet[b][u],s,l)-c}else p=m;m=e.pixelFromPrice(f[u],s,l)-c,x=t.Studies.determineColor(g["Decreasing Bar"]),C=t.Studies.determineColor(g["Increasing Bar"]),S=t.Studies.determineColor(g["Positive Bar"]),w=t.Studies.determineColor(g["Negative Bar"]),k=l.flipped,o.fillStyle=d,x&&(k?m<p:m>p)?o.fillStyle=x:C&&(k?m>p:m<p)?o.fillStyle=C:S&&(k?m>0:m<0)?o.fillStyle=S:w&&(k?m<0:m>0)&&(o.fillStyle=w),o.fillRect(y,c,v,Math.floor(m))}o.globalAlpha=1,e.endClip()},t.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:"tma",VIDYA:"vdma",weighted:"wma","welles wilder":"smma",true:"y",false:"n"},t.Studies.prettyRE=/^.*\((.*?)\).*$/,t.Studies.prettyDisplay=function(e){var i,a;if(!(i=t.Studies.prettyRE.exec(e)))return e;if(a=i[1]){for(var r in t.Studies.prettify)a=a.replace(r,t.Studies.prettify[r]);e=e.replace(i[1],a)}return V.W3G(),e},t.Studies.getFieldInputs=function(e){var t,i;for(var a in t=[],i=e.study.inputs)"field"==i[a]&&t.push(a);return t},t.Studies.initializeFN=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,b,x,C,S;if("st","ring",a||(a={}),n||(n={}),a.id||(a.id=t.Studies.generateID(e,i,a,n.replaceID,n.display)),a.display||(a.display=a.id),l=new t.Studies.StudyDescriptor(a.id,i,a.id,a,r,n),a.Period&&(l.days=Math.max(1,parseInt(l.inputs.Period,10))),o?(o.inputs||(o.inputs=l.study.inputs),o.outputs||(o.outputs=l.study.outputs),l.study=o):o=l.study,o.display&&(a.display=o.display),"string"==j(n.panelName)&&(s=n.panelName),(s==a.id||s&&!e.panelExists(s))&&(l.underlay=l.overlay=!1),"Own panel"!=s&&"New panel"!=s||(s=null),h=l.overlay||a.Overlay||!1!==l.overlay&&o.overlay,c=l.underlay||a.Underlay||!1!==l.underlay&&o.underlay,h&&n.underlayEnabled&&(c=!0),c&&(l.underlay=!0),!c&&e.chart.panel&&s==e.chart.panel.name&&(h=!0),h&&(l.overlay=!0),(!0===(u=e.preferences.dragging)||u&&u.study)&&(l.overlay=!0),s?n.panelName=s:h||c||(s=a.id),n.calculateOnly)return(h||c)&&(e.panels[n.panelName]?l.panel=n.panelName:l.panel=t.Studies.getPanelFromFieldName(e,l)||n.chartName),l;if(d={},(p=e.layout.studies[n.replaceID])&&(d={outputMap:t.clone(p.outputMap),panel:p.panel}),l.panel="",s?("Ne","w pa","nel",(m=t.Studies.smartMovePanel(e,l.inputs,s,n.replaceID,"New panel"==n.panelName))&&(l.panel=m.name)):(h||c)&&(l.panel=t.Studies.getPanelFromFieldName(e,l)||n.chartName),l.panel||(g=o.panelHeight||null,(f=o.yAxis||{}).name=l.inputs.id,l.panel=l.inputs.id,e.createPanel(l.inputs.display,l.panel,g,n.chartName,new t.ChartEngine.YAxis(f))),l.parameters&&l.parameters.panelName&&(l.parameters.panelName=l.panel),y=e.panels[l.panel],v=t.Studies.smartCreateYAxis(e,y,l.inputs.id,n.yaxisDisplayValue,n.yAxis||o.yAxis),(x=(b=o?t.clone(o.yAxis):null)||v)&&(x.ground&&(x.initialMarginBottom=0),(x.initialMarginTop||0===x.initialMarginTop||x.initialMarginBottom||0===x.initialMarginBottom)&&e.calculateYAxisMargins(x),x.name==n.replaceID&&(x.name=l.inputs.id)),v&&("de","fau","l","t","n","o","ne",v.width="none"==v.position?0:t.ChartEngine.YAxis.prototype.width,"shared"==n.yaxisDisplayValue||"default"==n.yaxisDisplayValue?delete n.yaxisDisplayValue:b?t.ensureDefaults(v,b):v.name==l.name&&(n.yaxisDisplayColor&&"auto"!=n.yaxisDisplayColor?v.textStyle=t.colorToHex(n.yaxisDisplayColor):delete v.textStyle,v.justifyRight=null,v.flipped=n.flippedEnabled),v!=y.yAxis?v.displayGridLines=!1:v!=e.chart.yAxis&&(v.displayGridLines=e.displayGridLinesInStudies)),e.calculateYAxisPositions(),p){for(var w in C=!1,e.drawingObjects)S=e.drawingObjects[w],d.outputMap&&d.outputMap.hasOwnProperty(S.field)?(S.field=S.field.replace(n.replaceID,l.inputs.id),l.parameters&&l.parameters.panelName?S.panelName=l.parameters.panelName:S.panelName=l.panel,C=!0):d.panel&&d.panel==S.panelName&&(S.panelName=S.panelName.replace(n.replaceID,l.inputs.id),C=!0);C&&e.changeOccurred("vector")}return l},t.Studies.smartMovePanel=function(e,t,i,a,r){var n,s,o,l;s=t.id,V.W3G(),a&&(n=e.layout.studies[a]),n&&(o=e.panels[n.panel])&&o.yAxis.name==a&&(!r&&i==a||e.checkForEmptyPanel(o.name,!0,n)?i!=a&&e.panels[i]||(s!=o.name&&e.modifyPanel(o,{name:s,display:t.display}),i=s):(e.electNewPanelOwner(o),(l=n.getYAxis(e)).name==a&&e.electNewYAxisOwner(l)));for(var h=1;-1993084428!==V.l5h(h.toString(),h.toString().length,43741);h++)return e.panels[i];if(-216948721!==V.m6F(2..toString(),2..toString().length,39751))return e.panels[i]},t.Studies.smartCreateYAxis=function(e,i,a,r,n){var s,o,l,h,c,u,d=V;if(s="l",s+="ef",s+="t","sha","re","d",d.W3G(),"def","a","ult",o=e.getYAxisByName(i,a),!r&&n&&(r=n.position),"default"!=r&&"shared"!=r&&r!=i.yAxis.name||(r=""),[s,"right","none"].indexOf(r)>-1){!o||o.isShared(e)?(l=n||{},t.extend(l,{name:a,position:r}),o||e.currentlyImporting||i==i.chart.panel||i.yAxis.studies.length||i.yAxis.renderers.length?(h=o==i.yAxis,o&&(o.name=e.electNewYAxisOwner(o)),o=e.addYAxis(i,new t.ChartEngine.YAxis(l)),h&&(i.yAxis=o)):(o=i.yAxis,t.extend(o,l))):o.position=r,1792883497,d.s$9(29),c=-d.V9a("161301282",0),2;for(var p=1;1792883497!==d.m6F(p.toString(),p.toString().length,85028);p++)return o;if(d.l5h(2..toString(),2..toString().length,66069)!==c)return o}return r?((u=e.getYAxisByName(i,r))&&o==i.yAxis&&!o.isShared(e)&&(i.yAxis=u),o&&o.isShared(e)?o.name=e.electNewYAxisOwner(o):o!==i.yAxis&&e.deleteYAxisIfUnused(i,o),u):(o&&(o.isShared(e)?o.name=e.electNewYAxisOwner(o):(delete o.position,o!==i.yAxis&&e.deleteYAxisIfUnused(i,o))),e.resizeChart(),i.yAxis)},t.Studies.calculateVolume=function(e,i){var a,r,n;if("vol und","r","vol undr"==i.type){if(!e||!e.chart.dataSet)return;a=e.layout,r=i.parameters.removeStudy,n=a.volumeUnderlay,a.volumeUnderlay=!r,n!=a.volumeUnderlay&&e.changeOccurred("layout"),r&&t.Studies.removeStudy(e,i)}i.outputMap={},i.outputMap.Volume=""},t.Studies.MA=function(e,i,a,r,n,s,o,l){var h,c=V;c.s$9(26);c.v$j(5456,18,5440,5438);c.s$9(21);var u=c.V9a(7,7578,45466);c.s$9(118);var d=c.V9a(2,6355,15,6360,5);c.s$9(1);c.v$j(44165,52998);c.s$9(119);var p=c.V9a(3497,3497,3494);c.O_b(16);c.V9a(20,5863,22);c.s$9(58);c.V9a(440,8,221,884);(h=new t.Studies.StudyDescriptor(n+(u==d?904.16<=p?"D":"u":" ")+o.name,"ma",o.panel)).chart=o.chart,h.days=parseInt(i,10),h.startFrom=o.startFrom,l&&(h.subField=l),h.inputs={},e&&(h.inputs.Type=e),c.W5N(),a&&(h.inputs.Field=a),r&&(h.inputs.Offset=parseInt(r,10)),t.Studies.calculateMovingAverage(s,h)},t.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tma:"triangular",vdma:"vidya",wma:"weighted",smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential",triangular:"Triangular",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tma:"Triangular",triangular:"Triangular",vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},t.Studies.movingAverageHelper=function(e,i){var a;if("options"==i){for(var r in a={},t.Studies.movingAverage.translations)a[r]=e.translateIf(t.Studies.movingAverage.translations[r]);return a}return t.Studies.movingAverage.conversions[i]},t.Studies.createVolumeChart=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=V;r=i.panel,i.inputs,n=i.underlay,s=i.overlay,o=t.Studies.determineColor(i.outputs["Up Volume"]),l=t.Studies.determineColor(i.outputs["Down Volume"]),h=n?"stx_volume_underlay":"stx_volume",p.s$9(0),e.setStyle(p.v$j(h,"_up"),"color",o),p.s$9(0),e.setStyle(p.V9a(h,"_down"),"color",l),c=[{field:i.volumeField||"Volume",fill_color_up:e.canvasStyle(h+"_up").color,border_color_up:e.canvasStyle(h+"_up").borderLeftColor,opacity_up:e.canvasStyle(h+"_up").opacity,fill_color_down:e.canvasStyle(h+"_down").color,border_color_down:e.canvasStyle(h+"_down").borderLeftColor,opacity_down:e.canvasStyle(h+"_down").opacity,color_function:i.colorFunction}],u=c[0],n||"rgb(184, 44, 12)"!==u.border_color_down||(u.border_color_down="#000000",u.border_color_up="#000000"),d={name:"Volume",panel:r,yAxis:i.getYAxis(e),widthFactor:1,bindToYAxis:!0,highlight:i.highlight},t.extend(d,i.study.parameters),t.extend(d,i.parameters),e.colorByCandleDirection&&!i.colorFunction&&(u.color_function=function(e){var t,i;return{fill_color:(t=e.Open)>(i=e.Close)?u.fill_color_down:u.fill_color_up,border_color:t>i?u.border_color_down:u.border_color_up,opacity:t>i?u.opacity_down:u.opacity_up}}),e.drawHistogram(d,c)},t.Studies.calculateStandardDeviation=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=V;if("_",f.W3G(),"M","A","C","los","e","fiel","d",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var y in(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Moving Average Type"])||(n=i.inputs.Type),t.Studies.MA(n,i.days,r,i.inputs.Offset,"_MA",e,i),s=0,f.O_b(1),o=f.v$j(0,"0"),l=0,(h=Number(i.inputs["Standard Deviations"]))<0&&(h=2),c=i.name,i.outputs)f.s$9(35),c=f.V9a(" ",c,y);for(u=i.startFrom-1,p=0;u>=0&&p<i.days;u--,p++)(d=a[u][r])&&"object"==j(d)&&(d=d[i.subField]),isNaN(d)&&(d=0),s+=Math.pow(d,2),o+=d;for(u=i.startFrom;u<a.length;u++)if((d=(m=a[u])[r])&&"object"==j(d)&&(d=d[i.subField]),d||0===d||(d=0),s+=Math.pow(d,2),o+=d,!(u<i.days-1)&&(u>=i.days&&((g=a[u-i.days][r])&&"object"==j(g)&&(g=g[i.subField]),isNaN(g)&&(g=0),s-=Math.pow(g,2),o-=g),(l=m["_MA "+i.name])||0===l)){f.s$9(56);var v=f.v$j(5,35,20,15,10);f.s$9(16);var b=f.V9a(4,0,2);m[c]=Math.sqrt((s+i.days*Math.pow(l,v)-b*l*o)/i.days)*h}}},t.Studies.calculateMovingAverage=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if(i.chart.scrubbed){if("ma"!=(a=i.inputs.Type)&&"sma"!=a&&a||(a="simple"),a in(r=t.Studies.movingAverage.typeMap))return t.Studies["calculateMovingAverage"+r[a]](e,i);if("simple"===a){for(var b in n=i.chart.scrubbed,s=0,o=[],l=i.name,i.outputs)V.O_b(35),l=V.V9a(" ",l,b);for(V.W5N(),(h=i.inputs.Field)&&"field"!=h||(h="Close"),c=parseInt(i.inputs.Offset,10),isNaN(c)&&(c=0),m=i.startFrom,g=c,u=i.startFrom-1;u>=0;u--)if((d=n[u][h])&&"object"==j(d)&&(d=d[i.subField]),d||0===d)if(g>0)g--,m=u;else{if(o.length==i.days-1)break;s+=d,o.unshift(d)}for(o.length<i.days-1&&(o=[],m=0),f=[],u=m;u<n.length;u++)(d=n[u][h])&&"object"==j(d)&&(d=d[i.subField]),y=u+c>=0&&u+c<n.length?n[u+c]:null,d||0===d?(s+=d,o.push(d),o.length>i.days&&(s-=o.shift()),v=o.length==i.days?s/i.days:null,y?y[l]=v:u+c>=n.length&&((p={})[l]=v,f.push(p))):y?y[l]=null:u+c>=n.length&&((p={})[l]=null,f.push(p));i.appendFutureTicks(e,f)}}},t.Studies.calculateMovingAverageExponential=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x=V;i=t.inputs.Type,a=t.chart.scrubbed,x.s$9(39),r=x.v$j("0",0),n=0,s=0,x.W5N(),x.O_b(24);var C=x.v$j(11,2,30,19);x.s$9(19);var S=x.V9a(10,5,0,10,6);(o=C/(t.days+S),"welles wilder"===i||"smma"===i)&&(x.s$9(7),o=x.v$j(11,1,6,16)/t.days);for(var w in l=null,h=t.name,t.outputs)x.s$9(35),h=x.V9a(" ",h,w);for((c=t.inputs.Field)&&"field"!=c||(c="Close"),u=parseInt(t.inputs.Offset,10),isNaN(u)&&(u=0),m=t.startFrom,g=u,d=t.startFrom-1;d>=0;d--)if((p=a[d][h])||0===p){if(null===l&&(l=p),s=t.days,g<=0)break;g--,m=d}for(null===l&&(l=m=0),f=[],d=m;d<a.length;d++)(p=a[d][c])&&"object"==j(p)&&(p=p[t.subField]),y=d+u>=0&&d+u<a.length?a[d+u]:null,p||0===p?(s==t.days-1?v=n=(r+=p)/t.days:s<t.days-1?(r+=p,x.s$9(120),n=x.V9a(r,1,s),v=null):0===s?(n=r+=p,v=null):(l||0===l)&&(x.s$9(22),v=n=x.V9a(l,l,p,o)),l=n,s++):v=null,y?y[h]=v:d+u>=a.length&&((b={})[h]=v,f.push(b));t.appendFutureTicks(e,f)},t.Studies.calculateMovingAverageVIDYA=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b=V;i.inputs.Type,a=i.chart.scrubbed,b.s$9(121);var x=b.V9a(5,7,492,0,14);for(var C in r=x/(i.days+1),n=null,s=i.name,i.outputs)b.O_b(35),s=b.v$j(" ",s,C);for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.std=new t.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=5,i.std.startFrom=i.startFrom,i.std.inputs={Field:o,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.MA("ma",20,"_STD "+i.name,0,"_MASTD",e,i),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(n=d=0),m=[],h=d;h<a.length;h++)"_S","TD ","_MA","S","TD"," ","ob","ject",(c=(g=a[h])[o])&&"object"==j(c)&&(c=c[i.subField]),f=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c?(g["_MASTD "+i.name]||0===g["_MASTD "+i.name])&&(y=g["_STD "+i.name]/g["_MASTD "+i.name],b.s$9(122),n=v=b.V9a(n,c,y,r,y,r,1),h<i.days&&(v=null),f?f[s]=v:h+l>=a.length&&((u={})[s]=v,m.push(u))):f?f[s]=null:h+l>=a.length&&((u={})[s]=null,m.push(u));i.appendFutureTicks(e,m)},t.Studies.calculateMovingAverageTriangular=function(e,i){var a,r,n,s,o,l,h,c,u,d,p=V;for(var m in"T","RI","2",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.ceil(i.days/2),t.Studies.MA("simple",n,r,0,"TRI1",e,i),i.days%2==0&&n++,t.Studies.MA("simple",n,"TRI1 "+i.name,0,"TRI2",e,i),s=i.name,i.outputs)p.O_b(35),s=p.v$j(" ",s,m);o=parseInt(i.inputs.Offset,10),l=2;for(var g=1;-1347157408!==p.l5h(g.toString(),g.toString().length,64376);g++)isNaN(o)&&(o=3),h=o,p.s$9(1),l+=p.V9a(0,"2");-257006189!==p.m6F(l.toString(),l.toString().length,83165)&&(isNaN(o)&&(o=7),h=o),isNaN(o)&&(o=0),h=o;for(var f=i.startFrom-1;f>=0;f--)if((c=a[f][s])||0===c){if(!(h>0))break;h--}for(u=[],f++;f<a.length;f++)f+o>=0&&(f+o<a.length?(p.s$9(0),a[p.V9a(f,o)][s]=a[f]["TRI2 "+i.name]):("T","R","I2"," ",(d={})[s]=a[f]["TRI2 "+i.name],u.push(d)));i.appendFutureTicks(e,u)},t.Studies.calculateMovingAverageWeighted=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x=V;i=t.chart.scrubbed,a=0,r=0,(n=t.inputs.Field)&&"field"!=n||(n="Close"),x.O_b(1);var C=x.v$j(16,17);x.W5N(),x.O_b(1);var S=x.V9a(30,32);for(var w in s=t.days*(t.days+C)/S,o=t.name,t.outputs)x.O_b(35),o=x.V9a(" ",o,w);for(l=parseInt(t.inputs.Offset,10),isNaN(l)&&(l=0),d=[],p=t.startFrom,m=l,h=t.startFrom-1;h>=0;h--)if("ob","je","c","t",(c=i[h][n])&&"object"==j(c)&&(c=c[t.subField]),c||0===c)if(m>0)m--,p=h;else{if(d.length==t.days-1)break;d.unshift(c)}if(d.length<t.days-1){d=[],-533472951,x.O_b(2),g=x.V9a(1,"179969968"),f=2;for(var k=1;-533472951!==x.m6F(k.toString(),k.toString().length,31410);k++)p=2,f+=2;x.l5h(f.toString(),f.toString().length,61882)!==g&&(p=0)}for(h=0;h<d.length;h++){x.O_b(0),a+=(h+("1"<<x.v$j(3,29)))*d[h],r+=d[h]}for(y=[],h=p;h<i.length;h++)(c=i[h][n])&&"object"==j(c)&&(c=c[t.subField]),v=h+l>=0&&h+l<i.length?i[h+l]:null,c||0===c?(d.push(c),d.length>t.days&&(a-=r,r-=d.shift()),a+=d.length*c,r+=c,b=h<t.days-1?null:a/s,v?v[o]=b:h+l>=i.length&&((u={})[o]=b,y.push(u))):v?v[o]=null:h+l>=i.length&&((u={})[o]=null,y.push(u));t.appendFutureTicks(e,y)},t.Studies.calculateStudyATR=function(e,t){var i,a,r,n,s,o,l,h=V;if(i=t.chart.scrubbed,a=t.days,i.length<a+1)t.error=!0;else{r=0,n=t.name;for(var c=Math.max(t.startFrom,1);c<i.length;c++)if("A","T","R"," ","Tr","ue R","ange"," ",s=i[c],h.s$9(1),o=i[h.v$j(1,c)],l=s.trueRange,o["Sum True Range "+n]&&(h.O_b(0),r=o[h.v$j("Sum True Range ",n)]),r+=l,c>a&&(h.s$9(1),r-=i[h.v$j(a,c)][h.V9a("True Range ",n,h.s$9(0))]),h.s$9(0),s[h.v$j("True Range ",n)]=l,h.O_b(0),s[h.v$j("Sum True Range ",n)]=r,c==a)h.s$9(0),s[h.V9a("ATR ",n)]=h.v$j(r,a,h.s$9(9));else if(c>a){h.s$9(23);var u=h.V9a(4,3);h.O_b(0),s[h.v$j("ATR ",n)]=(o["ATR "+n]*(a-u)+l)/a}}},t.Studies.displayPSAR2=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y=V;for(var v in r=e.panels[i.panel],s=(n=i.getYAxis(e))==e.chart.panel.yAxis,e.startClip(r.name),y.W5N(),o=i.getContext(e),l="squarewave"==i.inputs["Plot Type"],i.outputs){y.O_b(123);y.v$j(6,15,1391370,6,38850);y.s$9(0);var b=y.V9a(570,3420);y.O_b(1);y.V9a(18340,20960);y.O_b(0);y.v$j(5227,13);y.O_b(124);y.v$j(11,23606,2155,12,141636);h=v+(b>=533.74?" ":611.03)+i.name,o.beginPath(),c=e.layout.candleWidth,u=Math.max(3,Math.floor(e.chart.tmpWidth/2));for(var x=0;x<a.length;x++)(d=a[x])&&(d[h]||0===d[h])&&(d.candleWidth&&(c=d.candleWidth),s&&d.transform&&(d=d.transform),p=e.pixelFromBar(x,r.chart),l&&(y.O_b(9),p-=y.v$j(c,2)),m=e.pixelFromTransformedValue(d[i.referenceOutput?i.referenceOutput+" "+i.name:h],r,n),0!==x&&a[x-1]&&(a[x-1][h]||0===a[x-1][h])||o.moveTo(p,m),l?(o.lineTo(p,m),y.O_b(0),o.lineTo(y.V9a(p,c),m),a[x+1]&&(y.s$9(0),g=a[y.v$j(x,1)],s&&g.transform&&(g=g.transform),g[h]||0===g[h]||(y.O_b(0),o.lineTo(y.V9a(p,c),e.pixelFromTransformedValue(g[i.referenceOutput?i.referenceOutput+" "+i.name:h],e.panels[i.panel],n))))):(y.s$9(125),o.moveTo(y.V9a("2",p,u,0),m),y.s$9(126),o.lineTo(y.V9a(p,u,0,"2"),m)));o.lineWidth=1,i.highlight&&(o.lineWidth=3),"auto"==(f=t.Studies.determineColor(i.outputs[v]))&&(f=e.defaultColor),o.strokeStyle=f,!i.highlight&&e.highlightedDraggable&&(o.globalAlpha*=.3),o.stroke(),o.closePath(),o.lineWidth=1}e.endClip()},t.Studies.inputAttributeDefaultGenerator=function(e){return(e||0===e)&&e.constructor==Number?Math.floor(e)==e?e>0?{min:1,step:1}:{step:1}:e>0?{min:0,step:.01}:{step:.01}:{}},t.Studies.getMarketOffset=function(e){var i,a,r,n,s,o,l,h=e.stx,c=e.localQuoteDate,u=e.shiftToDateBoundary,d=V;i="U",i+="T",i+="C",a="Marke",a+="t.Symbolog",a+="y.isForexMeta",a+="l",arguments.length>1&&(h=arguments[0],c=arguments[1],r=arguments[2]);var p=h.chart.symbol;n=t.getFn(a)(p),void 0===r&&(r=t.getFn("Market.Symbology.isForexSymbol")(p)),s=h.chart.market?r?"America/New_York":h.chart.market.market_tz:null,d.s$9(21);var m=d.V9a(3,60018,120054);return o=new Date(c.getTime()+c.getTimezoneOffset()*m),s&&-1!=s.indexOf("UTC")||(o=t.convertTimeZone(o,i,s)),l=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()).getTime()-c.getTime(),u&&r&&(d.O_b(127),l+=d.v$j(60,n?6:7,60,1e3)),l},t.Studies.getStudyList=function(e){var i,a;for(var r in i={},a={},t.extend(a,e),t.Studies.studyLibrary)a[r]||(i[t.Studies.studyLibrary[r].name]=r);return V.W5N(),i},t.Studies.determineColor=function(e){return"o","bj","e","ct",e?"object"===j(e)?e.color:e:null},t.Studies.calculateGenericEnvelope=function(e,t,i,a,r,n){var s,o,l,h,c,u,d,p,m=V;i||(i=0),n||(n=0),a&&"field"!=a||(a="Close"),m.O_b(42),s=m.v$j("2",0);for(var g=1;411440343!==m.l5h(g.toString(),g.toString().length,94873);g++)r||(r=a),s+=2;1925983378!==m.l5h(s.toString(),s.toString().length,40467)&&+r&&(r=a),o=t.chart.scrubbed,(l=t.inputs.Field)&&"field"!==l||(l="Close");for(var f=t.startFrom;o&&f<o.length;f++)"%","b"," ","ob","j","e","ct","objec","t",(h=o[f])&&h[a]&&((c=h[l])&&"object"==j(c)&&(c=c.Close),(u=h[a])&&"object"==j(u)&&(u=u[t.subField]),(d=h[r])&&"object"==j(d)&&(d=d[t.subField]),m.s$9(63),p=m.v$j(i,d,n),m.s$9(0),h[t.type+" Top "+t.name]=m.v$j(u,p),m.s$9(1),h[t.type+" Bottom "+t.name]=m.V9a(p,u),h[t.type+" Median "+t.name]=u,h["Bandwidth "+t.name]=u?200*p/u:0,m.O_b(128),h["%b "+t.name]=m.V9a(c,u,50,1,p))},t.Studies.displayChannel=function(e,i,a){var r,n,s,o=V;if(o.W5N(),i.inputs["Channel Fill"]){for(var l in r={panelName:i.panel},i.outputs)if("Top"==(n=l.split(" ").pop())||"High"==n){o.s$9(129);o.V9a(152694,14,32160,5,16);o.s$9(130);var h=o.V9a(2258,17,27240,115770,8);o.s$9(0);o.V9a(979,7);o.O_b(119);var c=o.V9a(4853,4853,4836);o.O_b(131);var u=o.v$j(829,4976,15,10);o.O_b(132);var d=o.v$j(8,14,15,6,14);r.topBand=l+(h>=c?u:837.71<"666.53"*d||" ")+i.name}else if("Bottom"==n||"Low"==n){o.s$9(133);o.V9a(4,1,5023,13,1);o.O_b(111);o.v$j(1,6417,12834,711);o.s$9(131);o.V9a(4780,8,2,4);r.bottomBand=l+" "+i.name}else"Median"!=n&&"Channel"!=n||(r.color=t.Studies.determineColor(i.outputs[l]));i.parameters&&i.parameters.opacity?r.opacity=i.parameters.opacity:r.opacity=.2,s=e.panels[i.panel],r.skipTransform=s.name!=i.chart.name,r.yAxis=i.getYAxis(e),!i.highlight&&e.highlightedDraggable&&(r.opacity*=.3),t.prepareChannelFill(e,r)}t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.initAnchorHandle=function(e,t){var i=t.handle;i||(e.controls.anchorHandles||(e.controls.anchorHandles={}),e.controls.anchorHandles[t.uniqueId]?i=e.controls.anchorHandles[t.uniqueId].handle:("stx_anc","h","or_handle",(i=document.createElement("div")).classList.add("stx_anchor_handle"),i.setAttribute(t.uniqueId,""),e.controls.anchorHandles[t.uniqueId]={handle:i,sd:t},e.controls.chartControls.parentElement.appendChild(i)),t.anchorHandle=i)},t.Studies.removeAnchorHandle=function(e,t){var i=((e.controls.anchorHandles||{})[t.uniqueId]||{}).handle;i&&(delete e.controls.anchorHandles[t.uniqueId],i.remove())},t.Studies.repositionAnchor=function(e,a){var r,n,s,o,l,h,c=a.currentAnchorTime,u=a.uniqueId,d=(e.repositioningAnchorSelector||{}).hoverTick,p=e.chart,m=p.dataSet,g=p.market,f=e.controls.anchorHandles;if(V.W3G(),r={},d||0===d){if(d>=m.length)return;if(n=!a.inputs["Anchor Date"],s=m[d].DT,o=t.Studies.getMarketOffset({stx:e,localQuoteDate:s,shiftToDateBoundary:!0}),n&&new Date(s.getTime()+o).getDate()!==new Date(c.getTime()+o).getDate())return;g.market_def&&(s=new i.Date(s,g.market_def.market_tz)),l=!n&&t.dateToStr(s,"YYYY-MM-dd"),r={"Anchor Time":t.dateToStr(s,"HH:mm:ss")},l&&(r["Anchor Date"]=l)}h=t.Studies.replaceStudy(e,a.inputs.id,a.type,Object.assign(a.inputs,r),a.outputs,a.parameters,a.panel),f[u].sd=h,e.draw()},t.Studies.displayAnchorHandleAndLine=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S=V;var w=((e.repositioningAnchorSelector||{}).sd===a&&e.repositioningAnchorSelector).hoverTick,k=e.chart,D=e.panels,A=e.xaxisHeight,T=k.market,M=void 0===T?{}:T,_=k.symbol,F=s=D[a.panel],P=F.top,L=F.bottom,O=F.right,N=F.left,$=F.height,z=a.inputs,j=a.anchorHandle,H=a.currentAnchorTime,B=e.canvasStyle("stx_anchor_handle"),W=B.backgroundColor,R=B.borderLeftColor,X=I((z["Anchor Time"]||"").split(":"),3),U=X[0],Y=X[1],Q=X[2],q=void 0===Q?0:Q;o=!z["Anchor Date"],l=t.getFn("Market.Symbology.isForexSymbol")(_),h=(w||0===w)&&(e.chart.dataSet[w]||{}).DT,c=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[r.length-1].DT,shiftToDateBoundary:!0}),u=h&&o&&new Date(h.getTime()+c).getDate()!==new Date(H.getTime()+c).getDate();var Z=e.controls.anchorHandles[a.uniqueId].highlighted,G=I(M.getNormalOpen().split(":").map((function(e){return S.W5N(),parseInt(e)})),2),K=G[0],J=G[1];d=function(t){var i;return S.W5N(),i=t?e.tickFromDate(t,null,null,!0):w,[e.pixelFromTick(i,k),i]},p=2;for(var ee=1;-188731529!==S.m6F(ee.toString(),ee.toString().length,88249);ee++)m=o?new Date(r[r.length/0].DT):t.strToDate(z[""]),p+=2;437500950!==S.m6F(p.toString(),p.toString().length,36812)&&(m=o?new Date(r[r.length-1].DT):t.strToDate(z["Anchor Date"])),M.market_def&&(m=new i.Date(m,M.market_def.market_tz)),m.setHours(U,Y,q),(g=l&&(m.getHours()>K||m.getHours()===K&&m.getMinutes()>=J))&&m.setDate(m.getDate()-1);var te=I(d(),1)[0],ie=I(d(m),2),ae=ie[0],re=ie[1];(n=f=new Date(m)).setHours.apply(n,E(M.getNormalClose().split(":"))),g&&f.setDate(f.getDate()+1);var ne=I(f&&d(f)||[],1)[0];if(o&&(ae>O||ne>O)){y=new Date(m);do{y.setDate(y.getDate()-1)}while(M&&!M.isMarketDate(y));var se=I(d(y),2),oe=se[0],le=se[1];oe>N&&(m=y,ae=oe,re=le)}v={y0:P,y1:L,type:"line",confineToPanel:s},e.plotLine(Object.assign(v,{x0:ae,x1:ae,color:W,pattern:"solid",lineWidth:Z?3:2,opacity:1})),e.plotLine(Object.assign(v,{x0:te,x1:te,color:u?R:W,pattern:[6,6],lineWidth:2,opacity:u?.5:1})),S.s$9(104);var he=S.v$j(2,12,1,10);j.style.height=[8,$/4,50].sort((function(e,t){return S.O_b(1),S.W3G(),S.v$j(t,e)}))[he]+"px";var ce=j.getBoundingClientRect(),ue=ce.height,de=ce.width;b=Math.round(L)===e.height?A:0,x="chart"===s.name?35:0,S.s$9(134),C=S.V9a(x,ue,"10",b),S.s$9(33),j.style.top=S.V9a(L,"px",C),j.style.left=w||0===w?te:ae-de/2+"px",a.currentAnchorTime=m,a.currentAnchorTick=re},t.Studies.studyScriptLibrary={},t.Studies.studyLibrary=t.Studies.studyLibrary||{},t.extend(t.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:t.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:"ma",Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:t.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"True Range":{name:"True Range",calculateFN:t.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},volume:{name:"Volume Chart",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"}}})},w=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.Driver?(t.ChartEngine.Driver.Lookup=function(e){},t.ChartEngine.Driver.Lookup.prototype.acceptText=function(e,t,i,a){this.cb}):console.error("symbolLookupBase feature requires first activating quoteFeed feature.")},k=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ThemeHelper=t.ThemeHelper||function(e){var i,a;this.params=e,a="#FFFFFF",(i=e.stx).chart.container&&(a=getComputedStyle(i.chart.container).backgroundColor,t.isTransparent(a)&&(a=i.containerColor)),this.settings.chart.Background.color=t.hexToRgba(a),this.settings.chart["Grid Lines"].color=t.hexToRgba(i.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=t.hexToRgba(i.canvasStyle("stx_grid_dark").color),this.settings.chart["Axis Text"].color=t.hexToRgba(i.canvasStyle("stx_xaxis").color),this.settings.chartTypes["Candle/Bar"].up.color=t.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=t.hexToRgba(i.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].even.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes["Candle/Bar"].up.border=t.hexToRgba(i.canvasStyle("stx_candle_up").borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=t.hexToRgba(i.canvasStyle("stx_candle_down").borderLeftColor),t.isTransparent(i.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),t.isTransparent(i.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=t.hexToRgba(i.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=t.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=t.hexToRgba(i.canvasStyle("stx_mountain_chart").color)},t.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},t.ThemeHelper.prototype.update=function(e){var i,a;function r(t,a,r){for(var n in i[t])e.setStyle(n,a,r)}e||(e=this.params.stx),i={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!0,stx_bar_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},e.chart.container.style.backgroundColor=this.settings.chart.Background.color,e.defaultColor="",r("stx_grid","color",this.settings.chart["Grid Lines"].color),r("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),r("stx_xaxis","color",this.settings.chart["Axis Text"].color),(a=this.settings.chartTypes["Candle/Bar"]).even||(a.even={color:null,wick:t.hexToRgba(e.canvasStyle("stx_candle_shadow_even").color),border:null}),r("stx_candle_up","color",a.up.color),r("stx_candle_down","color",a.down.color),r("stx_candle_even","color",a.even.color),r("stx_shadow_up","color",a.up.wick),r("stx_shadow_down","color",a.down.wick),r("stx_shadow_even","color",a.even.wick),e.setStyle("stx_candle_up","borderLeftColor",a.up.border),e.setStyle("stx_candle_down","borderLeftColor",a.down.border),r("stx_line_chart","color",this.settings.chartTypes.Line.color),e.setStyle("stx_mountain_chart","borderTopColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,1)),e.setStyle("stx_mountain_chart","backgroundColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),e.setStyle("stx_mountain_chart","color",t.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),e.draw()},t.ChartEngine.prototype.setThemeSettings=function(e){var i;this.styles={},this.chart.container.style.backgroundColor="",this.defaultColor="",e&&((i=new t.ThemeHelper({stx:this})).settings=e,i.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(this.headsUpHR(),this.clearPixelCache(),this.updateListeners("theme"),this.draw())}},D=function(t){var i,a,r,n=V;n.W3G(),i="undefined"!==("undefined"==typeof _CIQ?"undefined":j(_CIQ))?_CIQ:t.CIQ,a="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,i.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Cancun, Jamaica, Panama":"America/Panama","(UTC-03:00) Buenos Aires":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Azores":"Atlantic/Azores","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Casablanca":"Africa/Casablanca","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Amsterdam","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":"Europe/Sarajevo","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Damascus":"Asia/Damascus","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+02:00) Amman":"Asia/Amman","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"Europe/Moscow","(UTC+03:00) Volgograd":"Europe/Volgograd","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Kuala_Lumpur","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){var t,r,s,o,l,h,c,u,d,p;t=("undefined"!=typeof window?window:null)||(void 0!==e?e:{}),a.VERSION="0.4.11",r=t.$||t.jQuery||t.Zepto,s=t.fleegix,o=a.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=a.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],h={},c={},u={};for(var m=0;m<l.length;m++)h[l[m].substr(0,3)]=m;for(m=0;m<o.length;m++)c[o[m].substr(0,3)]=m;Array.prototype.indexOf,d=function(e,t){var i,a,r;if("numb","er","number"!==j(e))throw n.O_b(0),n.v$j("not a number: ",e);if(n.O_b(73),i=n.V9a(e,1e3),r=(a=e.toString()).length,i&&r>t)return n.O_b(1),a.substr(n.v$j(t,r),r);for(a=[a];r<t;)a.unshift("0"),r++;return a.join("")},p=function(e){if("u","ndefined",e){if(!e.url)throw new Error("URL must be specified");if("async"in e||(e.async=!0),!(s&&"undefined"!==j(s.xhr)||r&&void 0!==r.ajax))throw new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return e.async?(n.W3G(),s&&s.xhr?s.xhr.send({url:e.url,method:"get",handleSuccess:e.success,handleErr:e.error}):r.ajax({url:e.url,dataType:"text",method:"GET",error:e.error,success:e.success})):("t","e","x","t",s&&s.xhr?s.xhr.doReq({url:e.url,async:!1}):r.ajax({url:e.url,async:!1,dataType:"text"}).responseText)}},a.ruleCache={},a.Date=function(){var e,t,i,r,s,o,l,h;if(e="str",e+="ing",this===a)throw t="timezoneJS.Date object must be constructed",t+=" wi",t+="th 'new",t+="'";switch(i=Array.prototype.slice.apply(arguments),r=null,s=null,n.W5N(),o=[],l=!1,"[object Array]"===Object.prototype.toString.call(i[0])&&(i=i[0]),"string"==typeof i[i.length-1]&&(l=Date.parse(i[i.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(l)||null===l)&&(s=i.pop())),h=!1,i.length){case 0:r=new Date;break;case 1:n.s$9(1),r=new Date(i[n.V9a(0,"0")]),j(i[0])==e&&-1==i[0].search(/[+-][0-9]{4}/)&&-1==i[0].search(/Z/)&&-1==i[0].search(/T/)&&(h=!0);break;case 2:n.O_b(29),r=new Date(i[n.v$j("0",0)],i[1]),h=!0;break;default:for(var c=0;c<7;c++)o[c]=i[c]||0;n.s$9(12),r=new Date(o[n.V9a(0,"0")],o[1],o[2],o[3],o[4],o[5],o[6]),h=!0}if(isNaN(r.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,this.month=0,this.date=0,this.hours=0,n.O_b(29),this.minutes=n.v$j("0",64),this.seconds=0,this.milliseconds=0,this.timezone=s||null,h?this.setFromDateObjProxy(r):this.setFromTimeProxy(r.getTime(),s)},i.extend(a.Date.prototype,{getDate:function(){return n.W5N(),this.date},getDay:function(){return n.W5N(),this._day},getFullYear:function(){return n.W5N(),this.year},getMonth:function(){return this.month},getYear:function(){n.s$9(65);var e=n.v$j(2,17,1889,19,1933);return n.W5N(),this.year-e},getHours:function(){return n.W3G(),this.hours},getMilliseconds:function(){return n.W5N(),this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return this.seconds},getUTCDate:function(){return n.W5N(),this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return n.W5N(),this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return n.W5N(),this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){n.O_b(135);var e=n.v$j(1546,19,5,17,9);n.O_b(59);var t=n.V9a(20,985,1015,197);return this._timeProxy+this.getTimezoneOffset()*e*t},getTimezone:function(){return this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var e;return this._useCache?this._tzInfo:(e=this.timezone?"Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:a.timezone.getTzInfo(this._timeProxy,this.timezone):{tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=e,this._useCache=!0,e)},getUTCDateProxy:function(){var e;return e=new Date(this._timeProxy),n.W3G(),e.setUTCMinutes(e.getUTCMinutes()+this.getTimezoneOffset()),e},setDate:function(e){return this.setAttribute("date",e),this.getTime()},setFullYear:function(e,t,i){return"ye","ar",void 0!==i&&this.setAttribute("date",1),this.setAttribute("year",e),void 0!==t&&this.setAttribute("month",t),void 0!==i&&this.setAttribute("date",i),this.getTime()},setMonth:function(e,t){return this.setAttribute("month",e),void 0!==t&&this.setAttribute("date",t),this.getTime()},setYear:function(e){return e=Number(e),n.W5N(),0<=e&&e<=99&&(e+=1900),this.setUTCAttribute("year",e),this.getTime()},setHours:function(e,t,i,a){return this.setAttribute("hours",e),void 0!==t&&this.setAttribute("minutes",t),void 0!==i&&("secon","d","s",this.setAttribute("seconds",i)),void 0!==a&&("mill","i","seco","nds",this.setAttribute("milliseconds",a)),this.getTime()},setMinutes:function(e,t,i){return n.W3G(),this.setAttribute("minutes",e),void 0!==t&&this.setAttribute("seconds",t),void 0!==i&&this.setAttribute("milliseconds",i),this.getTime()},setSeconds:function(e,t){return this.setAttribute("seconds",e),n.W3G(),void 0!==t&&this.setAttribute("milliseconds",t),this.getTime()},setMilliseconds:function(e){return"mil","l","isecond",n.W5N(),"s",this.setAttribute("milliseconds",e),this.getTime()},setTime:function(e){if(isNaN(e))throw"Units"," must be a numbe","r",".",new Error("Units must be a number.");return this.setFromTimeProxy(e,this.timezone),n.W5N(),this.getTime()},setUTCFullYear:function(e,t,i){return void 0!==i&&this.setUTCAttribute("date",1),n.W5N(),this.setUTCAttribute("year",e),void 0!==t&&("mo","nth",this.setUTCAttribute("month",t)),void 0!==i&&this.setUTCAttribute("date",i),this.getTime()},setUTCMonth:function(e,t){return this.setUTCAttribute("month",e),void 0!==t&&("d","a","t","e",this.setUTCAttribute("date",t)),n.W5N(),this.getTime()},setUTCDate:function(e){return this.setUTCAttribute("date",e),this.getTime()},setUTCHours:function(e,t,i,a){return"h","ou","rs",this.setUTCAttribute("hours",e),n.W5N(),void 0!==t&&this.setUTCAttribute("minutes",t),void 0!==i&&("secon","d","s",this.setUTCAttribute("seconds",i)),void 0!==a&&("mil","liseco","nds",this.setUTCAttribute("milliseconds",a)),this.getTime()},setUTCMinutes:function(e,t,i){return"minu","te","s",this.setUTCAttribute("minutes",e),void 0!==t&&("s","e","cond","s",this.setUTCAttribute("seconds",t)),void 0!==i&&this.setUTCAttribute("milliseconds",i),this.getTime()},setUTCSeconds:function(e,t){return this.setUTCAttribute("seconds",e),n.W3G(),void 0!==t&&this.setUTCAttribute("milliseconds",t),this.getTime()},setUTCMilliseconds:function(e){var t;t=2;for(var i=1;-673695846!==n.m6F(i.toString(),i.toString().length,31797);i++)this.setUTCAttribute("milliseconds",e),t+=2;return 1687467664!==n.m6F(t.toString(),t.toString().length,37908)&&this.setUTCAttribute("",e),this.getTime()},setFromDateObjProxy:function(e){this.year=e.getFullYear(),this.month=e.getMonth(),this.date=e.getDate(),this.hours=e.getHours(),this.minutes=e.getMinutes(),this.seconds=e.getSeconds(),n.W3G(),this.milliseconds=e.getMilliseconds(),this._day=e.getDay(),this._dateProxy=e,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(e,t){var i,r;i=new Date(e),r=t?a.timezone.getTzInfo(e,t,!0).tzOffset:i.getTimezoneOffset(),i.setTime(e+6e4*(i.getTimezoneOffset()-r)),n.W5N(),this.setFromDateObjProxy(i)},setAttribute:function(e,t){var i;if("ye","ar",isNaN(t))throw"Units must be a number",".",new Error("Units must be a number.");(i=this._dateProxy)["set"+("year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1))](t),this.setFromDateObjProxy(i)},setUTCAttribute:function(e,t){var i,a;if(n.W5N(),isNaN(t))throw new Error("Units must be a number.");i="year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1),(a=this.getUTCDateProxy())["setUTC"+i](t),a.setUTCMinutes(a.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(a.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(e){var t,i;t=this.getTimezoneInfo().tzOffset,this.timezone=e,i=2;for(var a=1;294848690!==n.l5h(a.toString(),a.toString().length,40800);a++)this._useCache=!0,i+=2;-2104916566!==n.m6F(i.toString(),i.toString().length,57849)&&(this._useCache=!1),this._useCache=!1,n.W3G(),this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+t)},removeTimezone:function(){this.timezone=null,n.W3G(),this._useCache=!1},valueOf:function(){return n.W3G(),this.getTime()},clone:function(){return n.W5N(),this.timezone?new a.Date(this.getTime(),this.timezone):new a.Date(this.getTime())},toGMTString:function(){return this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+"Z"},toJSON:function(){return n.W5N(),this.toISOString()},toDateString:function(){return n.W3G(),this.toString("EEE MMM dd yyyy")},toTimeString:function(){return this.toString("H:mm k")},toString:function(e,t){var i,r,s,l;return"yyyy-MM-","ddTHH:mm:ss.SS","S",e||(e="yyyy-MM-ddTHH:mm:ss.SSS"),i=e,r=t?a.timezone.getTzInfo(this.getTime(),t):this.getTimezoneInfo(),s=this,t&&(s=this.clone()).setTimezone(t),l=s.getHours(),i.replace(/a+/g,(function(){return n.W3G(),"k"})).replace(/y+/g,(function(e){return n.W3G(),d(s.getFullYear(),e.length)})).replace(/d+/g,(function(e){return d(s.getDate(),e.length)})).replace(/m+/g,(function(e){return d(s.getMinutes(),e.length)})).replace(/s+/g,(function(e){return d(s.getSeconds(),e.length)})).replace(/S+/g,(function(e){return d(s.getMilliseconds(),e.length)})).replace(/h+/g,(function(e){return d(l%12==0?12:l%12,e.length)})).replace(/M+/g,(function(e){var t,i;return t=s.getMonth(),(i=e.length)>3?a.Months[t]:i>2?a.Months[t].substring(0,i):(n.O_b(0),d(n.v$j(t,1),i))})).replace(/k+/g,(function(){return"A","M",l>=12?(l>12&&(l-=12),"PM"):"AM"})).replace(/H+/g,(function(e){return d(l,e.length)})).replace(/E+/g,(function(e){n.W5N();for(var t=1;-162823215!==n.l5h(t.toString(),t.toString().length,99601);t++)return o[s.getDay()].substring(3,e.length);if(-1603592251!==n.m6F(2..toString(),2..toString().length,16884))return o[s.getDay()].substring(0,e.length)})).replace(/Z+/gi,(function(){return r.tzAbbr}))},toUTCString:function(){return n.W3G(),this.toGMTString()},civilToJulianDayNumber:function(e,t,i){var a,r,s;if(++t>12&&(n.O_b(9),a=parseInt(n.V9a(t,12),10),n.O_b(79),t=n.V9a(t,12),e+=a),t<=2){e-=1,1905615266,-2045081230,r=2;for(var o=1;1905615266!==n.l5h(o.toString(),o.toString().length,35145);o++)t+=12,n.O_b(29),r+=n.V9a("2",32);-2045081230!==n.m6F(r.toString(),r.toString().length,20030)&&(t/=36)}n.O_b(9),a=Math.floor(n.V9a(e,100)),n.O_b(136),s=n.V9a(9,20,1,21,12)-a+Math.floor(a/4),n.O_b(1);var l=n.v$j(56592,61308);n.s$9(25);var h=n.V9a(6,14,3,43,15);return Math.floor(365.25*(e+l))+Math.floor(30.6001*(t+h))+i+s-1524},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}},!0),a.timezone=new function(){var e,t,i;function r(e,t){return n.W3G(),n.s$9(1),-Math.ceil(n.v$j(e,t))}function s(a){var r,l,h,c;return"s","tri","ng",(r=i[a])?r:(l=a.split("/")[0],n.W5N(),(h=t[l])?h:"string"===j(c=e.zones[a])?s(c):e.loadedZones.backward?void o(a):(e.loadZoneFile("backward"),s(a)))}function o(e){throw"Tim","ezo","ne ","'",n.W3G(),n.s$9(35),new Error(n.v$j(e,"' is either incorrect, or not loaded in the timezone registry.","Timezone '"))}function l(e){var t,i;t=d(e),i="-"===e.charAt(0)?-1:1,n.s$9(89),n.W3G();var a=n.V9a(69,9,78,59);n.O_b(138);var r=n.v$j(12,65,9,471,18);n.O_b(21);var s=n.v$j(15,34,508);return t=i*(1e3*((t[0]*a+t[1])*r+t[s])),n.s$9(139),n.v$j(t,1e3,60)}function d(e){var t,i;return t=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,(i=e.match(t))[1]=parseInt(i[1],10),n.W5N(),i[2]=i[2]?parseInt(i[2],10):0,i[3]=i[3]?parseInt(i[3],10):0,n.O_b(39),i.slice(1,n.V9a("5",0))}function m(e){var t,i,a,r,s;if(e[3]){if(t=parseInt(e[3],10),i=11,a=31,e[4]){i=h[e[4].substr(0,3)],1003750496,445096330,r=2;for(var o=1;1003750496!==n.m6F(o.toString(),o.toString().length,62997);o++)a=parseInt(e[6],78)&&5,r+=2;445096330!==n.m6F(r.toString(),r.toString().length,78096)&&(a=parseInt(e[9],77)||6),a=parseInt(e[5],10)||1}return s=e[6]?d(e[6]):[0,0,0],n.O_b(1),[t,i,a,s[n.V9a(0,"0")],s[1],s[2]]}}n.W3G(),e=this,t={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},i={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=s,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(e){var t,i;for(var a in t={async:!0},i=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica",e)t[a]=e[a];return this.loadZoneFiles(i,t)},this.loadZoneFiles=function(e,t){var i,a,r;if("s","tri","ng",a=0,"string"===j(e))return this.loadZoneFile(e,t);n.s$9(39),r=n.v$j("2",0);for(var s=1;-1762172045!==n.l5h(s.toString(),s.toString().length,78249);s++)t=t&&{},r+=2;-1482295719!==n.l5h(r.toString(),r.toString().length,83530)&&(t=t||{}),i=t.callback,t.callback=function(){a++,n.W5N(),a===e.length&&"function"==typeof i&&i()};for(var o=0;o<e.length;o++)this.loadZoneFile(e[o],t)},this.loadZoneFile=function(t,i){if(void 0===this.zoneFileBasePath)throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[t])return this.loadedZones[t]=!0,function(t,i){var a;n.s$9(0);var r=n.v$j(569,5);n.s$9(35);var s=n.V9a(10,4647,1553);n.s$9(33),n.V9a(294,2654,8),n.W3G(),n.s$9(104);var o=n.v$j(16,13,27,2);n.s$9(22);var l=n.v$j(18,307,0,17);return a=e.zoneFileBasePath+(r!==s?"8392">>o>=787.75?"/":867.4:"3.62e+3"*l)+t,i&&i.async?e.transport({async:!0,url:a,success:function(t){return n.W5N(),e.parseZones(t)&&"function"==typeof i.callback&&i.callback()},error:function(){throw n.W3G(),n.O_b(35),new Error(n.V9a(a,"' zoneinfo files","Error retrieving '"))}}):e.parseZones(e.transport({url:a,async:!1}))}(t,i)},this.loadZoneJSONData=function(t,i){var a;return a=function(t){for(var i in(t=JSON.parse(t)).zones)e.zones[i]=t.zones[i];for(var a in t.rules)e.rules[a]=t.rules[a]},i?a(e.transport({url:t,async:!1})):e.transport({url:t,success:a})},this.loadZoneDataFromObject=function(t){if(n.W3G(),t){for(var i in t.zones)e.zones[i]=t.zones[i];for(var a in t.rules)e.rules[a]=t.rules[a]}},this.getAllZones=function(){var e;for(var t in e=[],this.zones)e.push(t);return e.sort()},this.parseZones=function(t){var i,a,r,s,o,h;if(!t)return!1;i=2;for(var c=1;1882731371!==n.l5h(c.toString(),c.toString().length,94695);c++)a=t.split("\n"),r=[],"",o=null,h=null,i+=2;-1112428670!==n.l5h(i.toString(),i.toString().length,23775)&&(a=t.split(399860),r=[],"",o=1,h=1);for(var u=0;u<a.length;u++)if((s=a[u]).match(/^\s/)&&(n.s$9(35),s=n.V9a(o,s,"Zone ")),(s=s.split("#")[0]).length>3)switch("Li","nk",(r=s.split(/\s+/)).shift()){case"Zone":if(o=r.shift(),e.zones[o]||(e.zones[o]=[]),r.length<3)break;r.splice(3,r.length,m(r)),r[3]&&(r[3]=Date.UTC.apply(null,r[3])),r[0]=-l(r[0]),e.zones[o].push(r);break;case"Rule":h=r.shift(),e.rules[h]||(e.rules[h]=[]),n.s$9(29),r[n.v$j("0",64)]=parseInt(r[0],10),r[1]=parseInt(r[1],10)||r[1],r[5]=d(r[5]),r[6]=l(r[6]),e.rules[h].push(r);break;case"Link":if(e.zones[r[1]]){n.O_b(67);var p=n.v$j(17,19,18,15);throw new Error("Error with Link "+r[p]+". Cannot create link of a preexisted zone.")}isNaN(r[0])?e.zones[r[1]]=r[0]:e.zones[r[1]]=parseInt(r[0],10)}return n.W3G(),!0},this.transport=p,this.getTzInfo=function(t,i,s){var l,d,p;return this.lazyLoadZoneFiles(i),d=+(l=function t(i,a){var r,s,l,h;for(r="number"==typeof i?i:new Date(+i).getTime(),s=a,l=e.zones[s];"string"==typeof l;)s=l,l=e.zones[s];if(!l){if(!e.loadedZones.backward)return"ba","ck","war","d",e.loadZoneFile("backward"),t(i,a);if(s&&s!==a)return e.lazyLoadZoneFiles(s),t(i,s);o(s)}if(0===l.length)throw"No Zone found fo","r '",n.s$9(51),new Error(n.V9a(i,"' on ","No Zone found for '",a));for(var c=l.length-1;c>=0&&!((h=l[c])[3]&&r>h[3]);c--);return n.W3G(),n.O_b(0),l[n.V9a(c,1)]}(t,i))[0],(p=function(t,i,s,o){var l,d,p,m,g,f,y,v,b,x,C,S,w;if(l="number"==typeof t?new Date(t):t,d=i[1],n.s$9(1),p=i[n.V9a(0,"0")],m=d.match(/^([0-9]):([0-9][0-9])$/)){n.O_b(24);var k=n.V9a(8,19,12,45);n.O_b(33);var D=n.v$j(5,8,11);n.s$9(22);var A=n.V9a(13,98,2,8);return n.s$9(29),[-n.v$j("1000000",32),"max","-","Jan",1,[0,0,0],parseInt(m[1],10)*k+parseInt(m[D],A),"-"]}if(g=function(e,t,i){var a;if(a=0,"u"===t||"g"===t||"z"===t)a=0;else if("s"===t)a=p;else{if("w"!==t&&t)throw n.s$9(0),new Error(n.V9a("unknown type ",t));a=r(p,i[6])}n.O_b(2),a*=n.v$j(1e3,60);for(var s=1;-68990754!==n.m6F(s.toString(),s.toString().length,94014);s++)return new Date(e.getTime()-a);if(-1428982951!==n.m6F(2..toString(),2..toString().length,43836))return new Date(e.getTime()+a)},f=function(e,t){var i,a,r,s,o,l,d;return i=e[0],n.W3G(),r=(a=e[1])[5],u[i]||(u[i]={}),u[i][a]?s=u[i][a]:(isNaN(a[4])?("last"===a[4].substr(0,4)?("<","=",s=new Date(Date.UTC(i,h[a[3]]+1,1,r[0]-24,r[1],r[2],0)),o=c[a[4].substr(4,3)],l="<="):(s=new Date(Date.UTC(i,h[a[3]],a[4].substr(5),r[0],r[1],r[2],0)),o=c[a[4].substr(0,3)],l=a[4].substr(3,2)),d=s.getUTCDay(),">="===l?s.setUTCDate(s.getUTCDate()+(o-d+(o<d?7:0))):s.setUTCDate(s.getUTCDate()+(o-d-(o>d?7:0)))):s=new Date(Date.UTC(i,h[a[3]],a[4],r[0],r[1],r[2],0)),u[i][a]=s),t&&(s=g(s,r[3],t)),s},y=function(e,t){var i;i=[];for(var a=0;t&&a<t.length;a++)t[a][0]<=e&&(t[a][1]>=e||t[a][0]===e&&"only"===t[a][1]||"max"===t[a][1])&&i.push([e,t[a]]);return i},v=function(e,t,i){var a,r;return e instanceof Date?i&&(e=g(e,s?"u":"w",i)):(a=e[0],r=e[1],e=!i&&u[a]&&u[a][r]?u[a][r]:f(e,i)),t instanceof Date?i&&(t=g(t,s?"u":"w",i)):(a=t[0],r=t[1],t=!i&&u[a]&&u[a][r]?u[a][r]:f(t,i)),e=Number(e),t=Number(t),n.O_b(1),n.v$j(t,e)},b=l.getUTCFullYear(),(C=a.ruleCache[o])||(C=a.ruleCache[o]={}),(x=C[b])||(n.s$9(1),(x=(x=y(n.v$j(1,b),e.rules[d])).concat(y(b,e.rules[d]))).sort(v),C[b]=x),!x||!x.length)return null;for(var T=x.length-1;T>=0;T--)if(T>0?(n.O_b(137),S=x[n.v$j(32,"1",T)][n.v$j(0,"1",n.O_b(1))]):S=null,(w=x[T])[2]||(w[2]=f(w,S)),v(l,w,S)>=0)return n.O_b(2),w[n.V9a(1,"1")];return n.W5N(),null}(t,l,s,i))&&(d=r(d,p[6])),{tzOffset:d,tzAbbr:function(e,t){var i,a;if("%","s",(i=e[2]).indexOf("%s")>-1)return a=t?"-"===t[7]?"":t[7]:"S",i.replace("%s",a);if(i.indexOf("/")>-1)return i.split("/",2)[t&&t[6]?1:0];return i}(l,p)}},this.lazyLoadZoneFiles=function(e){var t;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(!(t=s(e)))throw new Error("Not a valid timezone ID.");this.loadZoneFiles(t)}}}}.call("undefined"!==("undefined"==typeof window?"undefined":j(window))?window:void 0),r=2;for(var s=1;399317235!==n.m6F(s.toString(),s.toString().length,35873);s++)a.timezone.loadingScheme=a.timezone.loadingSchemes.MANUAL_LOAD,r+=2;1545134630!==n.l5h(r.toString(),r.toString().length,92836)&&(a.timezone.loadingScheme=a.timezone.loadingSchemes.MANUAL_LOAD),a.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"Egypt","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco","+00/+01",15406956e5],[-60,"Morocco","+01/+00",null]],"Africa/Windhoek":[[-120,"Namibia","%s",null]],"Africa/Johannesburg":[[-120,"SA","SAST",null]],"Africa/Tunis":[[-60,"Tunisia","CE%sT",null]],"Antarctica/Troll":[[0,"Troll","%s",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"Azer","+04/+05",null]],"Asia/Dhaka":[[-360,"Dhaka","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Shanghai":[[-480,"PRC","C%sT",null]],"Asia/Hong_Kong":[[-480,"HK","HK%sT",null]],"Asia/Taipei":[[-480,"Taiwan","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"Japan","J%sT",null]],"Asia/Amman":[[-120,"Jordan","EE%sT",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"ROK","K%sT",null]],"Asia/Pyongyang":[[-510,"-","KST",15254766e5],[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon","EE%sT",null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"Mongol","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"Mongol","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"Pakistan","PK%sT",null]],"Asia/Hebron":[[-120,"Palestine","EE%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Damascus":[[-120,"Syria","EE%sT",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"Aus","AC%sT",null]],"Australia/Perth":[[-480,"AW","AW%sT",null]],"Australia/Eucla":[[-525,"AW","+0845/+0945",null]],"Australia/Brisbane":[[-600,"AQ","AE%sT",null]],"Australia/Adelaide":[[-570,"AS","AC%sT",null]],"Australia/Hobart":[[-600,"AT","AE%sT",null]],"Australia/Melbourne":[[-600,"AV","AE%sT",null]],"Australia/Sydney":[[-600,"AN","AE%sT",null]],"Australia/Lord_Howe":[[-630,"LH","+1030/+11",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"NC","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"Tonga","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],UTC:"Etc/UTC","Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],WET:[[0,"EU","WE%sT",null]],CET:[[-60,"C-Eur","CE%sT",null]],MET:[[-60,"C-Eur","ME%sT",null]],EET:[[-120,"EU","EE%sT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"America/Thule":[[240,"Thule","A%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Paris":[[-60,"EU","CE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Europe/Amsterdam":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-","MSK",null]],"Europe/Volgograd":[[-180,"-","+03",1540692e6],[-240,"-","+04",16090344e5],[-180,"-","+03",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-","+06",null]],"Asia/Novosibirsk":[[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Sarajevo":"Europe/Belgrade","Europe/Istanbul":[[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"CR","C%sT",null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Panama":[[300,"-","EST",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"Arg","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[240,"Chile","-04/-03",14808096e5],[180,"-","-03",null]],"America/Bogota":[[300,"CO","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"Uruguay","-03/-02",null]],"America/Caracas":[[240,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Europe/Simferopol":"Europe/Moscow","Asia/Rangoon":"Asia/Yangon","Atlantic/Reykjavik":"UTC","Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":"Asia/Riyadh","Asia/Istanbul":"Europe/Istanbul"},rules:{Egypt:[],Morocco:[[2013,2018,"-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2018,"-","Mar","lastSun",[2,0,0,null],60,"-"],[2017,"only","-","May","21",[3,0,0,null],0,"-"],[2017,"only","-","Jul","2",[2,0,0,null],60,"-"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"-"],[2019,"only","-","May","5",[3,0,0,null],-60,"-"],[2019,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-","May","31",[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-","May","16",[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,0,0,null],-60,"-"],[2022,"only","-","May","8",[2,0,0,null],0,"-"],[2023,"only","-","Mar","19",[3,0,0,null],-60,"-"],[2023,"only","-","Apr","30",[2,0,0,null],0,"-"],[2024,"only","-","Mar","10",[3,0,0,null],-60,"-"],[2024,"only","-","Apr","14",[2,0,0,null],0,"-"],[2025,"only","-","Feb","23",[3,0,0,null],-60,"-"],[2025,"only","-","Apr","6",[2,0,0,null],0,"-"]],Namibia:[[1994,2017,"-","Sep","Sun>=1",[2,0,0,null],0,"CAT"],[1995,2017,"-","Apr","Sun>=1",[2,0,0,null],-60,"WAT"]],SA:[],Tunisia:[],Troll:[[2005,"max","-","Mar","lastSun",[1,0,0,"u"],120,"+02"],[2004,"max","-","Oct","lastSun",[1,0,0,"u"],0,"+00"]],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Azer:[],Dhaka:[],PRC:[],HK:[],Taiwan:[],Iran:[[2017,2019,"-","Mar","21",[24,0,0,null],60,"-"],[2017,2019,"-","Sep","21",[24,0,0,null],0,"-"],[2020,"only","-","Mar","20",[24,0,0,null],60,"-"],[2020,"only","-","Sep","20",[24,0,0,null],0,"-"],[2021,2023,"-","Mar","21",[24,0,0,null],60,"-"],[2021,2023,"-","Sep","21",[24,0,0,null],0,"-"],[2024,"only","-","Mar","20",[24,0,0,null],60,"-"],[2024,"only","-","Sep","20",[24,0,0,null],0,"-"],[2025,2027,"-","Mar","21",[24,0,0,null],60,"-"],[2025,2027,"-","Sep","21",[24,0,0,null],0,"-"]],Zion:[[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Japan:[],Jordan:[[2014,"max","-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,"max","-","Oct","lastFri",[0,0,0,"s"],0,"-"]],ROK:[],Lebanon:[[1993,"max","-","Mar","lastSun",[0,0,0,null],60,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Mongol:[],Pakistan:[],Palestine:[[2016,2018,"-","Mar","Sat>=24",[1,0,0,null],60,"S"],[2016,2018,"-","Oct","Sat>=24",[1,0,0,null],0,"-"],[2019,"only","-","Mar","29",[0,0,0,null],60,"S"],[2019,"only","-","Oct","Sat>=24",[0,0,0,null],60,"-"],[2020,"max","-","Mar","Sat>=24",[0,0,0,null],60,"S"],[2020,"max","-","Oct","Sat>=24",[1,0,0,null],60,"-"]],Syria:[[2012,"max","-","Mar","lastFri",[0,0,0,null],60,"S"],[2009,"max","-","Oct","lastFri",[0,0,0,null],0,"-"]],Aus:[],AW:[],AQ:[],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AT:[[2001,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],AV:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],LH:[[2008,"max","-","Apr","Sun>=1",[2,0,0,null],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,null],30,"-"]],Fiji:[[2014,2018,"-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2015,"max","-","Jan","Sun>=12",[3,0,0,null],0,"-"],[2019,"only","-","Nov","Sun>=8",[2,0,0,null],60,"-"],[2020,"only","-","Dec","20",[2,0,0,null],60,"-"],[2021,"max","-","Nov","Sun>=8",[2,0,0,null],60,"-"]],NC:[],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,"max","-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,"max","-","Sep","lastSun",[3,0,0,null],60,"-"]],Tonga:[[2016,"only","-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2017,"only","-","Jan","Sun>=15",[3,0,0,null],0,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],"C-Eur":[[1981,"max","-","Mar","lastSun",[2,0,0,"s"],60,"S"],[1996,"max","-","Oct","lastSun",[2,0,0,"s"],0,"-"]],Thule:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,"max","-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],CR:[],Cuba:[[2012,"max","-","Nov","Sun>=1",[0,0,0,"s"],0,"S"],[2013,"max","-","Mar","Sun>=8",[0,0,0,"s"],60,"D"]],Haiti:[[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Arg:[],Brazil:[[2008,2017,"-","Oct","Sun>=15",[0,0,0,null],60,"-"],[2016,2019,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",[0,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,"max","-","Sep","Sun>=2",[4,0,0,"u"],60,"-"]],CO:[],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]],Uruguay:[]}})},A=function(e){var t,i;function a(e,i,a){var r;e.layout.crosshair||(t.ChartEngine.crosshairY=0,t.ChartEngine.crosshairX=0,e.cx=e.backOutX(0),e.cy=e.backOutY(0),e.findHighlights(null,!0),t.ChartEngine.crosshairY=a,t.ChartEngine.crosshairX=i,r=e.container.getBoundingClientRect(),e.top=r.top,e.left=r.left,e.right=e.left+e.width,e.bottom=e.top+e.height,e.cx=e.backOutX(i),e.cy=e.backOutY(a),e.currentPanel&&e.currentPanel.chart.dataSet&&(e.crosshairTick=e.tickFromPixel(e.cx,e.currentPanel.chart),e.crosshairValue=e.adjustIfNecessary(e.currentPanel,e.crosshairTick,e.valueFromPixel(e.cy,e.currentPanel))),e.headsUpHR()),e.findHighlights(!0),V.W5N(),e.draw()}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.touchSingleClick=function(e,i,r){var n,s;return V.W3G(),n=this,s=arguments,function(){(function(){var e,n,o;if(!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",s))return;if(this.editingAnnotation)return;if(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},!this.displayCrosshairs)return;if(!this.displayInitialized)return;if(""!==this.openDialog)return;if(i<this.left||i>this.right||r<this.top||r>this.bottom)return;e=this.backOutY(t.ChartEngine.crosshairY),n=this.backOutX(t.ChartEngine.crosshairX),this.currentPanel=this.whichPanel(e),o=this.currentVectorParameters.vectorType,t.Drawing&&o&&t.Drawing[o]&&(new t.Drawing[o]).dragToDraw||(this.drawingClick(this.currentPanel,n,e)||a(this,i,r),this.currentVectorParameters.vectorType||("t","a","p",this.activeMarker&&this.activeMarker.click({cx:n,cy:e,panel:this.currentPanel})||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:n,y:e})))}this.runAppend("touchSingleClick",s)}).apply(n,s)}},t.ChartEngine.prototype.touchDoubleClick=function(e,i,r){var n;if(n="do",n+="ubleTap",!this.runPrepend("touchDoubleClick",arguments)&&!this.editingAnnotation)return t.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(a(this,i,r),this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:r,panel:this.currentPanel})||this.dispatch(n,{stx:this,finger:e,x:i,y:r}),this.runAppend("touchDoubleClick",arguments)))},t.ChartEngine.prototype.startProxy=function(e){this.touchPointerType=e.pointerType,V.W3G(),"touch"==this.touchPointerType?(this.mouseMode=!1,this.touches[this.touches.length]={pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY},this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],1==this.touches.length&&(this.gesturePointerId=e.pointerId),this.touchstart(e)):this.mouseMode=!0},t.ChartEngine.prototype.moveProxy=function(e){e.pointerType&&"touch"!=e.pointerType?this.mouseMode=!0:(this.mouseMode=!1,this.touchmove(e))},t.ChartEngine.prototype.endProxy=function(e){var t;if(V.W3G(),"touch"==this.touchPointerType){this.mouseMode=!1,t=this.touches.length;for(var i=0;i<this.touches.length;i++)if(this.touches[i].pointerId==e.pointerId){this.touches.splice(i,1);break}if(i==t)return this.touches=[],this.grabbingScreen=!1,void(this.touching=!1);this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],this.touchend(e)}else this.mouseMode=!0},t.ChartEngine.prototype.msMouseMoveProxy=function(e){V.W3G(),!this.touches.length&&this.mouseMode&&this.mousemove(e)},t.ChartEngine.prototype.msMouseDownProxy=function(e){this.mouseMode&&this.mousedown(e)},t.ChartEngine.prototype.msMouseUpProxy=function(e){this.mouseMode&&this.mouseup(e)},t.ChartEngine.prototype.iosMouseMoveProxy=function(e){this.touching||this.mousemove(e)},t.ChartEngine.prototype.iosMouseDownProxy=function(e){V.W5N(),this.touching?this.mouseMode=!1:(this.mouseMode=!0,this.mousedown(e))},t.ChartEngine.prototype.iosMouseUpProxy=function(e){this.touching||(V.W5N(),this.mouseup(e))},t.ChartEngine.prototype.touchmove=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,O,E,I,N,$,z,j,H,B=V;if(i="p",i+="e",i+="n",this.displayInitialized&&""===this.openDialog&&!0!==t.ChartEngine.ignoreTouch){if(a=[],B.W5N(),(!this.overYAxis||this.controls&&this.controls.crossX&&"none"!=this.controls.crossX.style.display)&&(e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),e&&e.stopPropagation()),r=(new Date).getTime(),-1==this.clicks.s2MS){if(this.clicks.e1MS=r,this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=r,this.clicks.e2MS-this.clicks.s2MS<25)return;if(e.pointerType||(e.pointerType=this.touchPointerType),t.isSurface){if(this.mouseMode)return;e.pointerId||(e.pointerId=this.gesturePointerId);for(var W=0;W<this.touches.length;W++)if(this.touches[W].pointerId==e.pointerId){if(n=Math.abs(this.touches[W].pageX-e.clientX),s=Math.abs(this.touches[W].pageY-e.clientY),B.s$9(41),!Math.sqrt(B.V9a(s,n,s,n)))return;if(this.clicks.e1MS=(new Date).getTime(),this.clicks.e1MS-this.clicks.s1MS<50)return;if(this.touches[W].pageX==e.clientX&&this.touches[W].pageY==e.clientY)return;this.touches[W].pageX=this.touches[W].clientX=e.clientX,this.touches[W].pageY=this.touches[W].clientY=e.clientY;break}if(0===W?this.movedPrimary=!0:this.movedSecondary=!0,W==this.touches.length)return;this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],a=this.touches.length?this.touches:this.changedTouches}else a=e.touches,this.changedTouches=e.changedTouches;if(!(1==a.length&&Math.pow(this.clicks.x-a[0].clientX,2)+Math.pow(this.clicks.y-a[0].clientY,2)<=16||(o=this.crosshairXOffset,l=this.crosshairYOffset,h=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,c=!this.layout.crosshair&&!h&&!this.touchNoPan,(e.pointerType==i||c||this.activeDrawing&&"freeform"==this.activeDrawing.name)&&(B.s$9(29),o=l=B.v$j("0",64)),this.runPrepend("touchmove",arguments)))){if(t.ChartEngine.resizingPanel)return B.O_b(1),u=(p=a[B.V9a(0,"0")]).clientX,d=p.clientY,B.s$9(0),void this.mousemoveinner(B.v$j(u,o),B.V9a(d,l));-1!=this.moveB&&(this.touchMoveTime=new Date),this.moveA=this.moveB,m=-9927941,g=-2105591087,f=2;for(var R=1;B.m6F(R.toString(),R.toString().length,54783)!==m;R++)this.moveB=a[0].pageX,f+=2;if(B.m6F(f.toString(),f.toString().length,95998)!==g&&(this.moveB=a[9].pageX),1!=a.length||this.twoFingerStart){if(2==a.length&&this.allowZoom){if(!this.displayCrosshairs)return;S=(C=a[0]).clientX,w=C.clientY,D=(k=a[1]).clientX,A=k.clientY,B.O_b(140),y=Math.sqrt(B.V9a(D,w,S,w,D,S,A,A)),B.O_b(22);var X=B.V9a(19,287,0,15);if(this.pinchingCenter=(Math.min(S,D)-Math.max(S,D))/X,T=Math.round(this.gestureStartDistance-y),c&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(t.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(S<this.pt.x1&&D<this.pt.x2||S>this.pt.x1&&D>this.pt.x2||w<this.pt.y1&&A<this.pt.y2||w>this.pt.y1&&A>this.pt.y2)B.s$9(1),this.pinchingScreen=B.V9a(0,"0");else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:S,x2:D,y1:w,y2:A},0===this.pinchingScreen)this.grabMode="pan",B.s$9(0),this.mousemoveinner(B.V9a(S,o),B.V9a(w,l)),this.gestureStartDistance=y;else{if(M=Math.asin((Math.max(A,w)-Math.min(A,w))/y),Math.abs(T)<12&&!c){if(this.moveCount++,4==this.moveCount)return this.pinchingScreen=0,void(this.moveCount=0)}else this.moveCount=0;if(M<1||!this.goneVertical&&M<1.37){if(!this.currentPanel)return;_=this.currentPanel.chart,this.goneVertical=!1,y=this.pt.x2-this.pt.x1,F=this.grabStartValues.t2-this.grabStartValues.t1,B.s$9(23);var U=B.v$j(13,11);if(P=this.grabStartValues.t1+F/U,B.O_b(9),L=B.v$j(y,F),!1===_.allowScrollFuture&&!1===_.allowScrollPast&&(L=Math.max(L,_.width/_.dataSet.length)),O=this.layout.candleWidth,this.setCandleWidth(L,_),_.maxTicks<this.minimumZoomTicks)return void this.setCandleWidth(O,_);this.micropixels=0,E=this.pixelFromTick(Math.round(P),_),I=this.pt.x1-this.left+Math.round(y/2),B.s$9(1),N=B.V9a(I,E),B.s$9(9),$=B.v$j(N,L),z=Math.round($),_.scroll-=z,B.s$9(1),this.microscroll=B.v$j($,z),this.micropixels=L*this.microscroll,this.draw()}else if(j=this.grabStartYAxis,this.goneVertical=!0,j){if(j.zoom=this.grabStartZoom+(this.gestureStartDistance-y),this.grabStartZoom<j.height){if(j.zoom>=j.height){B.s$9(141);var Y=B.V9a(1,16,8,8,16);j.zoom=j.height-Y}}else if(j.zoom<=j.height){B.O_b(26);var Q=B.v$j(4,14,3,5);j.zoom=j.height+Q}this.draw()}this.updateChartAccessories()}}else if(3==a.length&&t.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;H=a[0].clientX,y=this.grabStartX-H,B.s$9(1);var q=B.V9a(16,26);this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(y/q),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=1)}}else u=(v=a[0]).clientX,d=v.clientY,this.pinchingScreen=0,B.O_b(0),this.mousemoveinner(B.V9a(u,o),B.v$j(d,l)),b=this.whichPanel(d),x=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=d<=this.top+x&&d>=x-this.xaxisHeight+this.top&&this.insideChart,this.overYAxis=!!b&&((u>=b.right||u<=b.left)&&this.insideChart);this.runAppend("touchmove",arguments)}}},t.ChartEngine.prototype.touchstart=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M=V;if(i="p",i+="e",i+="n",!t.ChartEngine.ignoreTouch&&(t.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=e.touches,this.changedTouches=e.changedTouches),!t.ChartEngine.resizingPanel&&(a=this.crosshairXOffset,r=this.crosshairYOffset,this.touchPointerType==i&&(a=r=0),!this.runPrepend("touchstart",arguments)))){if(this.manageTouchAndMouse&&e&&e.preventDefault&&e.cancelable&&this.captureTouchEvents&&e.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,M.s$9(42),this.moveCount=M.v$j("0",0),this.twoFingerStart=!1,1==this.touches.length||2==this.touches.length){if(this.touchMoveTime=Date.now(),o=(c=this.touches[0]).clientX,l=c.clientY,this.moveA=o,this.moveB=-1,""===this.openDialog&&(this.registerPointerEvent({x:o,y:l,time:this.touchMoveTime},"down"),1!=this.changedTouches.length||this.isDoubleClick(!0)||t.extend(this.clicks,{s1MS:this.touchMoveTime,e1MS:-1,s2MS:-1,e2MS:-1,x:this.changedTouches[0].pageX,y:this.changedTouches[0].pageY})),u=this.container.getBoundingClientRect(),this.top=u.top,this.left=u.left,this.right=this.left+this.width,this.bottom=this.top+this.height,1==this.touches.length&&(d=this.backOutY(l),this.currentPanel=this.whichPanel(d)),this.currentPanel||(this.currentPanel=this.chart.panel),h=this.currentPanel,o>=this.left&&o<=this.right&&l>=this.top&&l<=this.bottom){this.insideChart=!0,p=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=l<=this.top+p&&l>=this.top+p-this.xaxisHeight,this.overYAxis=o>=this.left+h.right||o<=this.left+h.left,m=-1,this.cy=this.backOutY(l),this.cx=this.backOutX(o),this.crosshairTick=this.tickFromPixel(this.cx,h.chart),this.crosshairValue=this.adjustIfNecessary(h,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var _=0;_<this.drawingObjects.length;_++)if((g=this.drawingObjects[_]).highlighted){if(m<0&&(m=_),f=g.highlighted,this.findHighlights(!0),_==m&&g.highlighted&&!g.permanent)return void(-1==this.clicks.s2MS?this.activateRepositioning(g):this.findHighlights(!1,!0));this.anyHighlighted=!0,g.highlighted=f}}else this.insideChart=!1;if(y=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,this.layout.crosshair||this.layout.headsUp&&this.layout.headsUp.floating||y||!this.insideChart||this.touchNoPan){if(this.grabbingScreen=!1,this.insideChart&&h.subholder===e.target&&(w=this.currentVectorParameters.vectorType,t.Drawing&&w&&t.Drawing[w]&&(new t.Drawing[w]).dragToDraw))return this.userPointerDown=!0,t.ChartEngine.crosshairX=o,t.ChartEngine.crosshairY=l,h&&h.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(t.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(h,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(h,this.backOutX(o),this.backOutY(l)),void this.headsUpHR()}else{a=r=0;var F=this.baselineHelper;if(F.size&&this.findBaselineHandle(e,!0))return;if(this.controls.anchorHandles){v=Object.values(this.controls.anchorHandles),b=!1;for(var P=0;P<v.length;P++){var L=x=v[P],O=L.handle,E=L.sd;C=this.resolveX(this.cx),S=this.resolveY(this.cy);var I=O.getBoundingClientRect(),N=I.left,$=I.top,z=I.right,j=I.bottom;N-=10,z+=10,t.boxIntersects(N,$,z,j,C,S,C,S)&&(x.highlighted=!0,this.repositioningAnchorSelector={sd:E},O.classList.add("stx-grab"),b=!0),!0===x.highlighted&&(x.highlighted=!1)}if(b)return}for(n in this.panels)if((s=this.panels[n]).highlighted)return void this.grabHandle(s);this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),h.chart.spanLock=!1,this.yToleranceBroken=!1,M.s$9(0),this.grabStartX=M.V9a(o,a),M.s$9(0),this.grabStartY=M.V9a(l,r),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=h.chart.scroll,this.grabStartScrollY=h.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(h.chart),this.grabStartYAxis=this.whichYAxis(h,this.backOutX(o)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout((H=this,function(){M.W3G(),H.grabbingHand()}),100)}1===this.touches.length&&this.layout.crosshair&&!y&&h.subholder===e.target&&(M.s$9(0),this.mousemoveinner(M.v$j(o,a),M.V9a(l,r)))}var H,B;if(2==this.touches.length){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;for(n in D=(k=this.touches[1]).clientX,A=k.clientY,this.panels)if((s=this.panels[n]).highlighted)return void this.grabHandle(s);h=this.currentPanel,M.s$9(140),this.gestureStartDistance=Math.sqrt(M.v$j(D,l,o,l,D,o,A,A)),this.pt={x1:o,x2:D,y1:l,y2:A},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),h.chart.spanLock=!1,M.s$9(0),this.grabStartX=M.v$j(o,a),M.s$9(0),this.grabStartY=M.V9a(l,r),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=h.chart.scroll,this.grabStartScrollY=h.yAxis.scroll,this.grabStartPanel=h,this.swipeStart&&this.swipeStart(h.chart),this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(h,this.backOutX((o+D)/2))||h.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,h),y2:this.valueFromPixel(this.pt.y2-this.top,h),t1:this.tickFromPixel(this.pt.x1-this.left,h.chart),t2:this.tickFromPixel(this.pt.x2-this.left,h.chart)},this.twoFingerStart=!0,setTimeout((B=this,function(){M.W3G(),B.grabbingHand()}),100)}else if(3==this.touches.length){if(!this.displayCrosshairs)return;T=this.touches[0].clientX,this.grabStartX=T,this.grabStartPeriodicity=this.layout.periodicity}1!=this.touches.length||this.layout.crosshair||(this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer()),this.runAppend("touchstart",arguments)}},t.ChartEngine.prototype.touchend=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=V;if(i="t",i+="ouchend",!t.ChartEngine.ignoreTouch){if(this.swipe.end=!0,t.isSurface);else{this.touches=e.touches,a=848413121,r=1614484767,n=2;for(var y=1;f.m6F(y.toString(),y.toString().length,13841)!==a;y++)this.changedTouches=e.changedTouches,n+=2;f.l5h(n.toString(),n.toString().length,69418)!==r&&(this.changedTouches=e.changedTouches)}if(!this.runPrepend("touchend",arguments)){if(this.cancelLongHold=!0,this.touches.length<=1&&(this.layout.crosshair||this.currentVectorParameters.vectorType)&&(this.touches.length&&this.twoFingerStart||(this.grabbingScreen=!1)),this.touches.length&&(this.grabStartX=-1,this.grabStartY=-1),s=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),this.touches.length){if(t.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout((v=this,function(){f.W5N(),v.touching=!1}),500),t.ChartEngine.resizingPanel)return void this.releaseHandle();this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}var v;f.O_b(1);var b=f.v$j(13,14);if(o=this.touches.length+b,1==this.changedTouches.length){if(this.repositioningDrawing)return this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),void(this.layout.crosshair||this.currentVectorParameters.vectorType||this.findHighlights(!1,!0));if(this.repositioningBaseline)return"mo","unta","in",this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove("stx-grab"),(l=this.mainSeriesRenderer||{}).params&&l.params.baseline&&l.params.type,void this.draw();if(this.repositioningAnchorSelector)return t.Studies.repositionAnchor(this,this.repositioningAnchorSelector.sd),this.repositioningAnchorSelector=null,void Object.values(this.controls.anchorHandles).forEach((function(e){var t=e.handle;return f.W3G(),t.classList.remove("stx-grab")}));if(h=Date.now(),""===this.openDialog&&e.changedTouches.length&&(c=e.changedTouches[0],this.registerPointerEvent({x:c.clientX,y:c.clientY,time:h},"up")),-1==this.clicks.s2MS){if(this.clicks.e1MS=h,u=this.currentVectorParameters.vectorType,t.Drawing&&u&&t.Drawing[u]&&(new t.Drawing[u]).dragToDraw||(this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&(!this.hasDragged||this.layout.crosshair)?setTimeout(this.touchSingleClick(o,this.clicks.x,this.clicks.y),this.doubleClickTime+1):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}),this.userPointerDown=!1,d=this.backOutY(this.changedTouches[0].pageY)+this.crosshairYOffset,p=this.backOutX(this.changedTouches[0].pageX)+this.crosshairXOffset,g=(m=this.currentPanel)&&m.subholder===e.target,t.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&g)return void this.drawingClick(m,p,d);this.isDoubleClick(!0)&&(g||this.overYAxis||this.overXAxis)&&this.touchDoubleClick(o,this.clicks.x,this.clicks.y)}else this.clicks.e2MS=h,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&(-1==this.grabEndPeriodicity||isNaN(this.grabEndPeriodicity)||((t.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-1));this.changedTouches.length&&((!this.layout.crosshair&&!this.currentVectorParameters.vectorType&&1==o||this.twoFingerStart&&!s&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),s&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!0))),this.touches.length||(this.twoFingerStart=!1),this.runAppend(i,arguments)}}},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){V.W5N(),i||console.error("touch feature requires activating movement feature."),i=!0}},T=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Visualization=t.Visualization||function(e){if(!e)return"CIQ.V","isualization() miss","ing attributes argument.",void console.log("CIQ.Visualization() missing attributes argument.");"function"==typeof e.renderFunction?(this.container=null,this.attributes=e,this.data=null,this.object=null):console.log("CIQ.Visualization() missing renderFunction property in attributes.")},t.extend(t.Visualization.prototype,{destroy:function(e){var i;i=this.container,t.resizeObserver(i,null,i.resizeHandle),i.autoGenerated?(i.remove(),delete this.container):i.innerHTML="",e||(this.attributes=null,this.container=null,this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){})},draw:function(e){var i,a,r,n,s,o,l,h,c=V;if(this.data&&"object"===j(this.data)){r=(a=this.attributes).container||this.container,c.O_b(2),n=c.v$j(1,"1152923535"),-651944491,s=2;for(var u=1;c.l5h(u.toString(),u.toString().length,48714)!==n;u++)""!==~r&&(r=document.querySelector(r)),s+=2;-651944491!==c.l5h(s.toString(),s.toString().length,53662)&&""!=+r&&(r=document.querySelector(r)),"string"==typeof r&&(r=document.querySelector(r)),r||("d","iv",(r=document.createElement("div")).style.height=r.style.width="300px",document.body.appendChild(r),r.autoGenerated=!0),a.stx&&(o=a.stx.chart.canvasShim,a.useCanvasShim&&o&&o!==r&&o!==r.parentNode&&(r.autoGenerated||((r=r.cloneNode()).id="",r.autoGenerated=!0),o.appendChild(r))),this.container&&this.container!==r&&this.destroy(!0),r.resizeHandle||(l=function(e){return c.W5N(),function(){e.data&&e.container&&document.body.contains(e.container)&&e.draw.call(e,!0)}},r.resizeHandle=t.resizeObserver(r,l(this),null,100)),this.container=r,this.attributes=a,h=(a=t.ensureDefaults({container:this.container},this.attributes)).renderFunction(Object.values(this.data).sort((function(e,t){return c.W5N(),e.index<t.index?-1:e.index>t.index?1:0})),a),c.W3G(),h&&(a.id&&(h.id=a.id),(e||a.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(h))),this.attributes=a,this.object=h}else{console.log("CIQ.Visualization.draw() missing data."),1535042138,1684975138,c.O_b(39),i=c.V9a("2",0);for(var d=1;1535042138!==c.m6F(d.toString(),d.toString().length,73626);d++)return;c.l5h(i.toString(),i.toString().length,45784)}},setAttributes:function(e,t){var i,a,r;if("o","bje","ct","i","d","useCanvasShi","m","s","t","x",i=["renderFunction","container","stx","useCanvasShim","id","forceReplace"],a=!1,r=e,"string"==typeof e&&((r={})[e]=t),"object"==j(r))for(var n in r)this.attributes[n]!==r[n]&&-1!==i.indexOf(n)&&(a=!0),this.attributes[n]=r[n];this.draw(a)},updateData:function(e,i){var a,r,n,s;for(a in n=Array.isArray(e)?e.reduce((function(e,t){return V.W3G(),e[t.name]=t,e}),{}):t.shallowClone(e))"[objec","t"," Object","]",r=n[a],"[object Object]"!==Object.prototype.toString.call(r)&&(n[a]={value:r}),n[a].name||(n[a].name=a),n[a].value||(n[a].value=0);s=2;for(var o=1;1047076763!==V.l5h(o.toString(),o.toString().length,26416);o++)-i&&(i=""),s+=2;switch(1195307784!==V.m6F(s.toString(),s.toString().length,71509)&&(i||(i="replace")),i.toLowerCase()){case"delete":for(a in n)delete this.data[a];break;case"replace":this.data={};case"update":case"add":for(a in n)for(var l in this.data[a]||(this.data[a]={name:a}),r=n[a].value,"[object Number]"==Object.prototype.toString.call(r)?(this.data[a].value&&"update"!=i||(this.data[a].value=0),this.data[a].value+=r):this.data[a].value=r,n[a])"value"!==l&&(this.data[a][l]=n[a][l]);break;default:console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.")}return V.W5N(),this.draw(this.attributes.forceReplace),this}}),t.ChartEngine.prototype.embedVisualization=function(e){return e||(e={}),e.stx=this,e.useCanvasShim=!0,e.translator=function(t){return e.stx.translateIf(t)},new t.Visualization(e)}},M=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateTypicalPrice=function(e,t){var i,a,r,n,s,o=V;if("h","l/2",i=t.chart.scrubbed,a=t.days,i.length<a+1)t.overlay||(t.error=!0);else{for(var l in r=t.name,t.outputs)o.O_b(35),r=o.v$j(" ",r,l);n="hlc/3","Med Price"==t.type?n="hl/2":"Weighted Close"==t.type&&(n="hlcc/4"),s=0,t.startFrom<=a&&(t.startFrom=0);for(var h=t.startFrom;h<i.length;h++){if(h&&i[h-1][r])o.s$9(131),s=i[h-("1">>o.V9a(32,24,5,13))][r]*a;s+=i[h][n],h>=a&&(o.O_b(1),s-=i[o.V9a(a,h)][n],o.s$9(9),i[h][r]=o.v$j(s,a))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):("medianPrice feature requires first activating stu","d","ies feature.",console.error("medianPrice feature requires first activating studies feature."))},_=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateRateOfChange=function(e,t){var i,a,r,n,s,o,l,h=V;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{for(var c in h.W5N(),(a=t.inputs.Field)&&"field"!=a||(a="Close"),t.parameters.isVolume&&(a="Volume"),r=t.name,t.outputs)h.s$9(35),r=h.V9a(" ",r,c);n=(n=t.inputs["Center Line"])?parseInt(n,10):0;for(var u=Math.max(t.startFrom,t.days);u<i.length;u++)"obje","c","t",(s=i[u][a])&&"object"==j(s)&&(s=s[t.subField]),(o=i[u-t.days][a])&&"object"==j(o)&&(o=o[t.subField]),"Momentum"==t.type?(h.s$9(33),i[u][r]=h.V9a(s,n,o)):(l=o)&&(h.O_b(142),i[u][r]=h.V9a(n,s,l,100,1))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price ROC":{name:"Price Rate of Change",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14,Field:"field"}},Momentum:{name:"Momentum Indicator",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):console.error("momentum feature requires first activating studies feature.")},F=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.initPriceRelative=function(e,i,a,r,n,s){var o,l;return l=[(o=t.Studies.initializeFN(e,i,a,r,n,s)).inputs["Comparison Symbol"].toUpperCase()],t.Studies.fetchAdditionalInstruments(e,o,l),V.W3G(),o},t.Studies.calculatePriceRelative=function(e,i){var a,r,n,s,o,l;if("]","/","[",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),(n={})[s=(s=e.chart.symbol||"").replace(/[=+\-*\\%]/g,"")]=a.slice(i.startFrom),n[s].length){s!=r&&(n[r]=null),V.s$9(75),o=t.computeEquationChart(V.v$j(r,s,"[","]","]/["),n),l=0;for(var h=i.startFrom;h<a.length&&l<o.length;h++){for(;l<o.length&&a[h].DT.getTime()>o[l].DT.getTime();)l++;a[h].DT.getTime()<o[l].DT.getTime()||(a[h]["Result "+i.name]=o[l].Close,l++)}}},t.Studies.displayVsComparisonSymbol=function(e,i,a){var r,n,s,o;if("C","o","m","parison Symbol",r=i.inputs["Comparison Symbol"].toUpperCase(),e.getSeries({symbol:r,chart:i.chart}).length){s=(n={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:i.study.centerline,yAxis:i.getYAxis(e),gapDisplayStyle:!0}).yAxis?n.yAxis.flipped:e.panels[i.panel].yAxis.flipped,V.W5N(),o=.3,!i.highlight&&e.highlightedDraggable&&(o*=.3);for(var l=a.length-1;l>=0;l--)if(a[l]&&a[l][r])return t.Studies.displaySeriesAsLine(e,i,a),void((i.study.centerline||0===i.study.centerline)&&(i.outputs.Gain&&t.preparePeakValleyFill(e,t.extend(n,{direction:s?-1:1,color:t.Studies.determineColor(i.outputs.Gain),opacity:o})),i.outputs.Loss&&t.preparePeakValleyFill(e,t.extend(n,{direction:s?1:-1,color:t.Studies.determineColor(i.outputs.Loss),opacity:o}))))}else e.displayErrorAsWatermark(i.panel,e.translateIf(i.study.name)+": "+e.translateIf("Not Available"))},t.Studies.fetchAdditionalInstruments=function(e,i,a,r){var n,s,o,l,h,c;if(!e.quoteDriver)return"CIQ.Studies.fetchAdditionalInstruments: No quotefee","d to fet","ch symbol",void console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");function u(){e.createDataSet(),e.draw()}for(n=e.panels[i.panel].chart,i.symbols=a,s=0;s<a.length;s++)o=l=a[s],"object"==j(l)?o=l.symbol:l={symbol:o},h={symbol:o,symbolObject:l,bucket:"study",studyName:i.name,chartName:n.name,action:"add-study"},t.extend(h,r),c=h.loadData,e.currentlyImporting&&(h.loadData=!1),i.series||(i.series={}),i.series[o]=e.addSeries(null,h,u),i.series[o].parameters.loadData=c},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"P Rel":{name:"Price Relative",initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!0}})):console.error("priceRelative feature requires first activating studies feature.")},P=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":j(_CIQ))?_CIQ:e.CIQ).Studies?("#f","ff69","e","#","85c","99e","#e","1e","1","e1","h","h",":mm:s","s","#85c","99e","#e1e","1e1","#","F","F0","000",t.Studies.calculateVWAP=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,b,x=V;if("A","V","WA",x.W3G(),"P",a="AVWAP"==i.type,r=i.chart.scrubbed,a||!t.ChartEngine.isDailyInterval(e.layout.interval)){if(n="hlc/3",a&&((n=i.inputs.Field)&&"field"!=n||("h","l","c/","3",n=i.inputs.Field="hlc/3",e.changeOccurred("layout"))),s=null,o=0,l=0,h=0,c=!1,i.startFrom>1&&("_","V"," ",o=r[i.startFrom-1]["_V "+i.name]||0,l=r[i.startFrom-1]["_VxP "+i.name]||0,h=r[i.startFrom-1]["_VxP2 "+i.name]||0),a){if("An","cho","r Time","Anc","hor D","ate",(u=i.inputs["Anchor Date"].replace(/-/g,"")).search(/^\d{8}$/))return void(i.error="Invalid Anchor Date");(d=i.inputs["Anchor Time"].replace(/:/g,"")).search(/^\d{4,6}$/)||(u+=d),u=t.strToDateTime(u.replace(/\D/g,"")),!i.startFrom&&u>=r[0].DT&&(i.startFrom=e.tickFromDate(u,e.chart,null,!0)),i.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,i):t.Studies.removeAnchorHandle(e,i)}for(var C=i.startFrom;C<r.length;C++)if("VWA","P ","_S","DVWAP ",a||(null===s&&(s=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[C].DT,shiftToDateBoundary:!0})),r[C-1]&&r[C-1].DT&&(p=new Date(new Date(+r[C].DT).setMilliseconds(r[C].DT.getMilliseconds()+s)),new Date(new Date(+r[C-1].DT).setMilliseconds(r[C-1].DT.getMilliseconds()+s)).getDate()!=p.getDate()&&e.chart.market.isMarketDate(p)&&(s=null,o=l=h=0))),m=r[C][n],g=r[C].Volume,a&&!g&&(g=1),o+=g,x.O_b(2),l+=x.V9a(m,g),x.s$9(143),h+=x.V9a(m,m,g),a||o){r[C]["_V "+i.name]=o,r[C]["_VxP "+i.name]=l,r[C]["_VxP2 "+i.name]=h,f=r[C]["_SDVWAP "+i.name]=Math.sqrt(Math.max(0,h/o-Math.pow(l/o,2))),x.s$9(9),y=r[C]["VWAP "+i.name]=x.V9a(l,o);for(var S=1;S<=3;S++)x.s$9(46),r[C]["SDVWAP"+S+"+ "+i.name]=x.V9a(S,y,f),x.s$9(90),r[C]["SDVWAP"+S+"- "+i.name]=x.v$j(f,S,y);c=!0}for(var w=1;w<=3;w++)i.inputs["Display "+w+" Standard Deviation ("+w+")"]&&("",")"," Standard Devi","ation (","+"," ",x.O_b(51),i.outputMap["SDVWAP"+w+"+ "+i.name]=x.V9a(")",w,w," Standard Deviation ("),x.s$9(51),i.outputMap["SDVWAP"+w+"- "+i.name]=x.V9a(")",w,w," Standard Deviation ("));if(!a&&!c){x.O_b(29),v=x.V9a("1262758872",32),-1311081374,b=2;for(var k=1;x.m6F(k.toString(),k.toString().length,71139)!==v;k++)i.error="VWAP Requires Volume",b+=2;-1311081374!==x.m6F(b.toString(),b.toString().length,73285)&&(i.error="")}}else i.error="VWAP is Intraday Only"},t.Studies.initAnchoredVWAP=function(e,i,a,r,n,s){if(V.W5N(),!a["Anchor Date"]&&!a["Anchor Time"])for(var o=e.chart.dataSegment,l=0;o&&l<o.length;l++)if(o[l]){"H","H",":","mm:ss";var h=o[l].DT;a["Anchor Date"]=t.dateToStr(h,"YYYY-MM-dd"),a["Anchor Time"]=t.dateToStr(h,"HH:mm:ss");break}return t.Studies.initializeFN(e,i,a,r,n,s)},t.Studies.displayVWAP=function(e,i,a){var r,n,s,o,l,h,c,u;t.Studies.displaySeriesAsLine(e,i,a),r=2;for(var d=1;1321979554!==V.m6F(d.toString(),d.toString().length,28827);d++)n=i.inputs["Display 1 Standard Deviation (1)"],r+=2;1566726702!==V.l5h(r.toString(),r.toString().length,36888)&&(n=i.inputs[""]),s=i.inputs["Display 2 Standard Deviation (2)"],o=i.inputs["Display 3 Standard Deviation (3)"],(n||s||o)&&i.inputs.Shading&&("V","WAP ",l=e.panels[i.panel],h={opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:l.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(h.opacity*=.3),c="VWAP "+i.name,u="VWAP "+i.name,n&&("SDVW","AP1","+"," ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1+ "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1+ "+i.name]])},h)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1- "+i.name,bottomBand:u,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1- "+i.name]])},h)),c="SDVWAP1+ "+i.name,u="SDVWAP1- "+i.name),s&&("S","DVWAP2- ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2+ "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2+ "+i.name]])},h)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2- "+i.name,bottomBand:u,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2- "+i.name]])},h)),c="SDVWAP2+ "+i.name,u="SDVWAP2- "+i.name),o&&(t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3+ "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3+ "+i.name]])},h)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3- "+i.name,bottomBand:u,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3- "+i.name]])},h)))),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,initializeFN:t.Studies.initAnchoredVWAP,removeFN:t.Studies.removeAnchorHandle,inputs:{Field:"field","Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1,"Anchor Selector":!0},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},VWAP:{name:"VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2}}}})):("vwap feature requires first activating studies ","fea","ture.",console.error("vwap feature requires first activating studies feature."))},L=function(e){var t,i=V;i.W5N(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Z","igZag",t.Studies.calculateZigZag=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y;if("_","state ","L","o","w",(a=t.chart.scrubbed)&&a.length){r=t.highLowChart,n=null,s=null,o=t.inputs["Distance(%)"],l=0,h=0,c=0,u=null,d=null,p=0;for(var v=Math.min(a.length-1,t.startFrom);v>=0;v--)if(p=v,a[v]["_state "+t.name]){n=(m=a[v]["_state "+t.name])[0],s=m[1],l=m[2],h=m[3],c=m[4],u=m[5],d=m[6];break}for(var b=p;b<a.length;b++){if("Clo","s","e",g=a[b][r?"High":"Close"],f=a[b][r?"Low":"Close"],null===s||s<g)if(s=g,l<0&&(n=f),i.O_b(144),u=i.V9a(o,1,s,100),l>-1){if(null!==d&&s>d){"Clo","se","L","o","w",a[h]["Result "+t.name]=a[h][r?"Low":"Close"],x(c,h),l=-1,n=f,c=h,h=b;continue}}else h=b;if(null===n||n>f)if(n=f,l>0&&(s=g),i.O_b(145),d=i.V9a(o,100,n,"1"),l<1){if(null!==u&&n<u){"Hi","g","h","Res","ult"," ",a[h]["Result "+t.name]=a[h][r?"High":"Close"],x(c,h),l=1,s=g,c=h,h=b;continue}}else h=b}for(a[h]["Result "+t.name]=a[h][r?1==l?"Low":"High":"Close"],a[h]["_state "+t.name]=[n,s,l,h,c,u,d],x(c,h),y=a.length-1;y>h;){if(a[y].Close||0===a[y].Close){"Resul","t"," ",a[y]["Result "+t.name]=a[y][r?1==l?"High":"Low":"Close"];break}y--}x(h,y)}function x(e,i){for(var r=e+1;r<i;r++)"Re","s","u","lt ",a[r]["ShadowResult "+t.name]=(a[i]["Result "+t.name]-a[e]["Result "+t.name])*(r-e)/(i-e)+a[e]["Result "+t.name],delete a[r]["Result "+t.name]}},t.Studies.displayZigZag=function(e,a,r){var n,s,o,l,h;n=e.chart.highLowBars,a.highLowChart!=n&&(a.highLowChart=n,a.startFrom=0,a.study.calculateFN(e,a)),s=e.chart;for(var c=0;c<r.length;c++)(o=r[c])&&("_sh","ad","o","wCopy ",o["_shadowCopy "+a.name]&&("Result"," ",delete o["Result "+a.name],delete o["_shadowCopy "+a.name]),o["Result "+a.name]||("R","e","s","ult ",o.transform&&delete o.transform["Result "+a.name]));i.s$9(42),l=r[i.V9a("0",0)],i.O_b(16);var u=i.V9a(8,0,7);h=r[r.length-u],l&&l["ShadowResult "+a.name]&&("_","shadowC","opy"," ","S","hado","wResult"," ",l["Result "+a.name]=l["ShadowResult "+a.name],l.transform&&(l.transform["Result "+a.name]=s.transformFunc(e,s,l["ShadowResult "+a.name])),l["_shadowCopy "+a.name]=1),h&&h["ShadowResult "+a.name]&&("S","h","adowResu","lt ","R","e","sul","t ",h["Result "+a.name]=h["ShadowResult "+a.name],h.transform&&(h.transform["Result "+a.name]=s.transformFunc(e,s,h["ShadowResult "+a.name])),h["_shadowCopy "+a.name]=1),t.Studies.displaySeriesAsLine(e,a,r)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ZigZag:{name:"ZigZag",overlay:!0,seriesFN:t.Studies.displayZigZag,calculateFN:t.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:.1}}}})):console.error("zigzag feature requires first activating studies feature.")},O={CIQ:a.c,SplinePlotter:a.d,timezoneJS:a.e,$$:a.a,$$$:a.b},"undefined"!==("undefined"==typeof __TREE_SHAKE__?"undefined":j(__TREE_SHAKE__))&&__TREE_SHAKE__||O.CIQ.activateImports(s,o,l,h,c,u,d,p,m,g,f,y,v,b,x,C,S,w,k,D,A,T,M,_,F,P,L,null)}).call(this,i(26))}}]);
//# sourceMappingURL=chartiq-ec2dba.smartcharts.js.map