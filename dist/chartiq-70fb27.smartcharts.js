(window.webpackJsonpsmartcharts=window.webpackJsonpsmartcharts||[]).push([[0],{348:function(e,t,i){"use strict";i.r(t),i.d(t,"CIQ",(function(){return Se.c})),i.d(t,"SplinePlotter",(function(){return Se.d})),i.d(t,"timezoneJS",(function(){return Se.e})),i.d(t,"$$",(function(){return Se.a})),i.d(t,"$$$",(function(){return Se.b})),i.d(t,"createEngine",(function(){return Ce.e})),i.d(t,"customCharts",(function(){return Ce.f})),i.d(t,"drawing",(function(){return Ce.g})),i.d(t,"easeMachine",(function(){return Ce.h})),i.d(t,"equations",(function(){return Ce.i})),i.d(t,"i18n",(function(){return Ce.j})),i.d(t,"interaction",(function(){return Ce.k})),i.d(t,"markers",(function(){return Ce.l})),i.d(t,"market",(function(){return Ce.m})),i.d(t,"movement",(function(){return Ce.p})),i.d(t,"nameValueStore",(function(){return Ce.q})),i.d(t,"quoteFeed",(function(){return Ce.s})),i.d(t,"series",(function(){return Ce.t})),i.d(t,"share",(function(){return Ce.u})),i.d(t,"span",(function(){return Ce.v})),i.d(t,"storage",(function(){return Ce.w})),i.d(t,"studies",(function(){return Ce.x})),i.d(t,"symbolLookupBase",(function(){return Ce.y})),i.d(t,"theme",(function(){return Ce.z})),i.d(t,"timezone",(function(){return Ce.A})),i.d(t,"touch",(function(){return Ce.C})),i.d(t,"visualization",(function(){return Ce.D})),i.d(t,"medianPrice",(function(){return Ce.n})),i.d(t,"momentum",(function(){return Ce.o})),i.d(t,"priceRelative",(function(){return Ce.r})),i.d(t,"vwap",(function(){return Ce.E})),i.d(t,"zigzag",(function(){return Ce.F})),i.d(t,"aggregations",(function(){return n})),i.d(t,"drawingAdvanced",(function(){return s})),i.d(t,"equationsAdvanced",(function(){return o})),i.d(t,"highPerformanceMarkers",(function(){return l})),i.d(t,"renderersAdvanced",(function(){return h})),i.d(t,"accumulationDistribution",(function(){return c})),i.d(t,"adx",(function(){return u})),i.d(t,"alligator",(function(){return d})),i.d(t,"aroon",(function(){return p})),i.d(t,"atr",(function(){return m})),i.d(t,"awesomeOscillator",(function(){return g})),i.d(t,"balanceOfPower",(function(){return f})),i.d(t,"bollinger",(function(){return y})),i.d(t,"cci",(function(){return v})),i.d(t,"centerOfGravity",(function(){return x})),i.d(t,"chaikin",(function(){return b})),i.d(t,"chande",(function(){return S})),i.d(t,"choppiness",(function(){return C})),i.d(t,"comparisonStudies",(function(){return k})),i.d(t,"coppock",(function(){return w})),i.d(t,"darvasBox",(function(){return D})),i.d(t,"detrended",(function(){return A})),i.d(t,"disparity",(function(){return T})),i.d(t,"easeOfMovement",(function(){return M})),i.d(t,"ehlerFisher",(function(){return P})),i.d(t,"elder",(function(){return F})),i.d(t,"fractalChaos",(function(){return _})),i.d(t,"highLowStudies",(function(){return E})),i.d(t,"ichimoku",(function(){return L})),i.d(t,"intradayMomentum",(function(){return q})),i.d(t,"keltner",(function(){return I})),i.d(t,"klinger",(function(){return N})),i.d(t,"linearRegression",(function(){return O})),i.d(t,"macd",(function(){return H})),i.d(t,"massIndex",(function(){return R})),i.d(t,"moneyFlow",(function(){return j})),i.d(t,"movingAverages",(function(){return z})),i.d(t,"parabolicSAR",(function(){return V})),i.d(t,"pivotPoints",(function(){return Q})),i.d(t,"prettyGoodOscillator",(function(){return B})),i.d(t,"priceMomentumOscillator",(function(){return U})),i.d(t,"priceVolumeOscillator",(function(){return W})),i.d(t,"primeNumber",(function(){return Y})),i.d(t,"pring",(function(){return X})),i.d(t,"projectedVolume",(function(){return Z})),i.d(t,"psychologicalLine",(function(){return G})),i.d(t,"qstick",(function(){return K})),i.d(t,"rainbow",(function(){return J})),i.d(t,"randomWalk",(function(){return ee})),i.d(t,"relativeVigor",(function(){return te})),i.d(t,"rsi",(function(){return ie})),i.d(t,"schaffTrendCycle",(function(){return ae})),i.d(t,"shinohara",(function(){return re})),i.d(t,"stochastics",(function(){return ne})),i.d(t,"supertrend",(function(){return se})),i.d(t,"swingIndex",(function(){return oe})),i.d(t,"trendIntensity",(function(){return le})),i.d(t,"trix",(function(){return he})),i.d(t,"twiggsMoneyFlow",(function(){return ce})),i.d(t,"typicalPrice",(function(){return ue})),i.d(t,"ulcerIndex",(function(){return de})),i.d(t,"ultimateOscillator",(function(){return pe})),i.d(t,"valuationLines",(function(){return me})),i.d(t,"volatilityIndex",(function(){return ge})),i.d(t,"volumeProfile",(function(){return fe})),i.d(t,"volumeStudies",(function(){return ye})),i.d(t,"vortex",(function(){return ve})),i.d(t,"williamsMFI",(function(){return xe})),i.d(t,"animation",(function(){return Oe})),i.d(t,"continuousZoom",(function(){return He})),i.d(t,"extendedHours",(function(){return Re})),i.d(t,"fullScreen",(function(){return je})),i.d(t,"inactivityTimer",(function(){return ze})),i.d(t,"outliers",(function(){return Ve})),i.d(t,"plotComplementer",(function(){return Qe})),i.d(t,"rangeSlider",(function(){return Be})),i.d(t,"tableView",(function(){return Ue})),i.d(t,"tooltip",(function(){return We}));var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,V,Q,B,U,W,Y,X,Z,G,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,xe,be,Se=i(349),Ce=i(350);function ke(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||De(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||De(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){if(e){if("string"==typeof e)return Ae(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ae(e,t):void 0}}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(){}function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Me[354008]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"===("undefined"==typeof globalThis?"undefined":Te(globalThis))?1:5;break;case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"zHaX9",{get:function(){for(;;)return this},configurable:!0}),(t=zHaX9).K3ECm=t,i=4;break;case 4:i="undefined"==typeof K3ECm?3:9;break;case 3:throw"";case 9:delete t.K3ECm,delete Object.prototype.zHaX9,i=6}}catch(e){t=window}return t}}(),Me[452167]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;11!==i;)switch(i){case 2:var a=[arguments];a[8]="",a[8]="X",a[1]="",i=3;break;case 3:a[1]="",a[1]="u3",a[3]=1,a[9]=a[1],a[9]+=a[8],a[9]+=a[8],i=13;break;case 13:var r=function(e,t,i,r){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=12;break;case 12:r(t,"charCodeAt",a[3],a[9]),i=11}function n(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[7]="",s[3]="eProperty",s[7]="efin",n=3;break;case 3:s[4]="d",s[1]=6;try{for(var o=2;8!==o;)switch(o){case 2:s[5]={},s[9]=(0,s[0][1])(s[0][0]),o=5;break;case 5:s[6]=[s[1],s[9].prototype][s[0][3]],s[5].value=s[6][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 2:s[2]=s[4],s[2]+=s[7],s[2]+=s[3],s[0][0].Object[s[2]](s[6],s[0][4],s[5]),l=3}}catch(e){}s[6][s[0][4]]=s[5].value,o=8}}catch(e){}n=7}}}(Me[354008]),Me[261964]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}function r(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 3:l[9]="",l[9]="def";try{for(var s=2;8!==s;)switch(s){case 2:l[6]={},l[5]=(0,l[0][1])(l[0][0]),l[8]=[l[5],l[5].prototype][l[0][3]],s=4;break;case 4:l[6].value=l[8][l[0][2]],s=3;break;case 3:try{for(var o=2;3!==o;)switch(o){case 2:l[4]=l[9],l[4]+=l[2],l[4]+=l[1],l[0][0].Object[l[4]](l[8],l[0][4],l[6]),o=3}}catch(e){}l[8][l[0][4]]=l[6].value,s=8}}catch(e){}n=7;break;case 2:var l=[arguments];l[1]="",l[1]="perty",l[2]="inePro",n=3}}function n(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}for(var s=2;74!==s;)switch(s){case 14:o[3]="m",o[5]="",o[7]="X3",o[5]="__",o[4]="",s=20;break;case 24:o[35]="",o[35]="_",o[40]="",o[40]="h",s=35;break;case 48:o[63]+=o[9],o[63]+=o[45],o[88]=o[3],o[88]+=o[8],o[88]+=o[6],s=64;break;case 35:o[10]=1,o[75]="Q3",o[17]="3h",o[65]="a",o[58]="U",s=30;break;case 57:l(i,o[73],o[53],o[69]),s=56;break;case 39:o[85]=o[35],o[85]+=o[25],o[85]+=o[44],o[64]=o[4],s=54;break;case 75:l(a,"apply",o[10],o[46]),s=74;break;case 54:o[64]+=o[17],o[64]+=o[58],o[84]=o[81],o[84]+=o[40],o[84]+=o[58],o[63]=o[5],s=48;break;case 20:o[9]="o",o[45]="ptimize",o[4]="W",o[44]="",o[81]="U3",s=15;break;case 43:o[46]+=o[58],o[70]=o[75],o[70]+=o[40],o[70]+=o[58],s=39;break;case 64:o[69]=o[7],o[69]+=o[40],o[69]+=o[58],o[73]=o[5],s=60;break;case 9:o[8]="",o[1]="ract",o[8]="3",o[3]="",s=14;break;case 30:o[53]=7,o[53]=0,o[46]=o[65],o[46]+=o[17],s=43;break;case 76:l(i,o[85],o[53],o[70]),s=75;break;case 60:o[73]+=o[2],o[73]+=o[1],s=58;break;case 2:var o=[arguments];o[2]="",o[2]="abst",o[6]="",o[6]="hU",s=9;break;case 15:o[44]="",o[44]="ual",o[25]="",o[25]="_resid",s=24;break;case 58:var l=function(e,t,i,a){for(var n=2;5!==n;)switch(n){case 2:var s=[arguments];r(o[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};s=57;break;case 56:l(t,"push",o[10],o[88]),s=55;break;case 55:l(i,o[63],o[53],o[84]),s=77;break;case 77:l(n,"test",o[10],o[64]),s=76}}(Me[354008]),Me[520910]="Z$z",Me.h50=function(){return"function"==typeof Me[69146].y4B?Me[69146].y4B.apply(Me[69146],arguments):Me[69146].y4B},Me[64901]="Wyu",Me[69146]=(a=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{y4B:function(e,t,i){for(var r=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.u3XX(s)|(255&e.u3XX(s+1))<<8|(255&e.u3XX(s+2))<<16|(255&e.u3XX(s+3))<<24;o=a(o,3432918353),r=5*(r=(524287&(r^=o=a(o=(131071&o)<<15|o>>>17,461845907)))<<13|r>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.u3XX(n+2))<<16;case 2:o|=(255&e.u3XX(n+1))<<8;case 1:o|=255&e.u3XX(n),o=a(o,3432918353),r^=o=a(o=(131071&o)<<15|o>>>17,461845907)}return r^=t,r=a(r^=r>>>16,2246822507),r=a(r^=r>>>13,3266489909),r^=r>>>16}}),Me.j1kc=function(){return"function"==typeof Me[401065].F1kc?Me[401065].F1kc.apply(Me[401065],arguments):Me[401065].F1kc},Me[401065]={F1kc:function(){var e,t=arguments;switch(r){case 61:e=(t[3]-(t[2]+t[0]))/t[1];break;case 16:e=t[1]*t[0];break;case 15:e=t[0]|t[1];break;case 57:e=t[4]+t[6]+t[3]+t[2]+t[7]+t[1]+t[0]+t[5];break;case 5:e=t[1]-t[0]+t[3]+t[2];break;case 19:e=t[0]*t[2]<t[1];break;case 85:e=t[1]==t[0];break;case 10:e=t[1]/t[0];break;case 80:e=t[1]-t[2]/(t[3]+t[0]);break;case 60:e=t[1]-t[2]-t[0];break;case 54:e=(t[4]+t[0]*t[3])/(t[2]|t[1]);break;case 39:e=t[0]+(t[1]-t[2])/t[3];break;case 81:e=t[1]*-t[0];break;case 73:e=t[3]+t[2]*(t[1]-t[0]);break;case 46:e=t[1]*t[0]+t[2];break;case 30:e=t[0]%t[1];break;case 4:e=t[1]-t[0];break;case 26:e=t[0]-t[1]/t[2];break;case 18:e=(t[2]-t[0])/t[1];break;case 32:e=(t[4]-t[3])/(t[1]-t[2])>t[0];break;case 82:e=+t[3]-+t[1]/(t[4]+t[0]/t[2]);break;case 55:e=(t[1]+t[0]*t[3])/t[2];break;case 29:e=t[2]*(t[0]%+t[1]);break;case 79:e=t[1]*(t[2]+t[0]);break;case 40:e=t[0]-t[2]*(t[1]-t[3]);break;case 33:e=t[1]*t[0]-t[2];break;case 45:e=(t[1]-t[2]*t[0])/t[3];break;case 62:e=t[2]+t[0]+t[3]+t[1];break;case 69:e=t[2]*t[1]*t[0];break;case 31:e=t[2]-t[0]/+t[1];break;case 0:e=t[0]&t[1];break;case 76:e=t[3]/(t[2]*t[1])<=t[0];break;case 42:e=t[3]*(t[2]+ +t[1])/t[0];break;case 66:e=t[2]/t[0]-t[1];break;case 7:e=t[1]+t[2]-t[0];break;case 25:e=t[1]+ +t[0];break;case 38:e=t[1]*t[2]/t[0];break;case 44:e=(t[0]*t[6]-t[2]*t[4])/(t[1]*t[3]-t[5]);break;case 51:e=(t[3]*t[0]+t[1])/+t[2];break;case 48:e=-(t[1]-t[2])*t[3]+t[0];break;case 41:e=t[1]-+t[0];break;case 71:e=t[2]/(t[0]<<t[1]);break;case 22:e=t[1]*t[0]-t[2]-t[3];break;case 56:e=t[2]-(t[1]>>t[0]);break;case 67:e=(t[2]+t[0])/(t[1]|t[3]);break;case 72:e=t[3]*(t[1]/t[0]-+t[2]);break;case 1:e=t[0]^t[1];break;case 35:e=(t[2]-t[3])/(t[0]-t[1]);break;case 23:e=(t[1]^t[0])*t[2]-t[4]-t[3];break;case 47:e=t[2]+t[0]+t[1];break;case 84:e=t[2]+t[3]*t[1]+t[0];break;case 43:e=t[3]*(t[2]*t[4]+t[0])/t[1];break;case 83:e=t[2]-t[0]*t[3]-t[1];break;case 53:e=(t[0]+t[1])/+t[2];break;case 36:e=(t[1]-t[2])*(t[5]-t[4])/(t[0]-t[6])+t[3];break;case 6:e=(t[3]+t[0])/(t[1]>>t[2]);break;case 65:e=t[2]*t[5]*t[6]+(t[4]-t[0]*t[1])*t[3];break;case 86:e=t[3]+t[2]/t[0]+t[1];break;case 77:e=t[2]-(t[0]&t[1]);break;case 52:e=(t[1]*t[2]+t[3])/t[0];break;case 70:e=(t[1]^t[0])-+t[3]/(t[2]+t[4]/t[5]);break;case 78:e=t[1]>t[0];break;case 59:e=t[1]-t[0]-(t[3]|t[2]);break;case 13:e=t[2]-t[0]*t[1];break;case 24:e=(t[2]+t[1])/(t[0]-t[3]);break;case 37:e=+t[1]/t[0];break;case 27:e=t[1]<<t[0];break;case 49:e=(t[0]-t[3])*t[1]+t[2];break;case 34:e=t[0]<t[1];break;case 64:e=t[2]-(t[0]^t[1]);break;case 2:e=t[1]+t[0];break;case 21:e=t[0]>>t[1];break;case 12:e=t[1]+t[0]*t[2];break;case 88:e=t[4]+(t[1]/+t[2]-t[3]/t[0]);break;case 14:e=t[0]-(t[2]|t[1]);break;case 20:e=t[0]+(t[2]-t[1]);break;case 63:e=(t[0]+ +t[2])*t[1];break;case 68:e=t[1]*t[3]/(t[0]+t[2]);break;case 75:e=(t[3]%t[1]+ +t[2])*t[0];break;case 74:e=t[1]*(t[2]/t[0]-t[3]);break;case 17:e=t[2]-(t[0]-t[1]);break;case 11:e=(t[3]+t[4]+t[1]+t[2])/t[0];break;case 8:e=t[2]+t[1]-t[0]-t[3];break;case 3:e=t[2]-t[0]+t[1];break;case 28:e=t[0]+t[2]/t[1];break;case 9:e=(t[2]+t[1])/t[0];break;case 58:e=t[0]*(t[1]>>t[2]);break;case 50:e=t[6]+(t[4]-t[3])/(t[5]-t[1])*(t[0]-t[2]);break;case 87:e=+t[3]*t[0]/(t[1]+t[2])}return e},H1kc:function(e){r=e}},Me[354008].T9II=Me,Me.N1kc=function(){return"function"==typeof Me[401065].H1kc?Me[401065].H1kc.apply(Me[401065],arguments):Me[401065].H1kc},Me.n1kc=function(){return"function"==typeof Me[401065].F1kc?Me[401065].F1kc.apply(Me[401065],arguments):Me[401065].F1kc},Me[130872]=!1,Me[520993]=function(){for(var e=2;9!==e;)switch(e){case 3:return t[1];case 2:var t=[arguments];t[4]=void 0,t[1]={},t[1].P2hU=function(){for(var e=2;90!==e;)switch(e){case 75:i[22]={},i[22][i[58]]=i[84][i[95]][i[54]],e=73;break;case 5:return 72;case 1:e=t[4]?5:4;break;case 49:i[1].m3hU(i[28]),i[1].m3hU(i[41]),i[1].m3hU(i[5]),i[1].m3hU(i[78]),i[1].m3hU(i[48]),e=65;break;case 73:i[22][i[80]]=i[46],i[44].m3hU(i[22]),e=71;break;case 2:var i=[arguments];e=1;break;case 56:i[84]=i[1][i[72]];try{i[46]=i[84][i[35]]()?i[51]:i[13]}catch(e){i[46]=i[13]}e=77;break;case 4:i[1]=[],i[8]={},i[8].p1kc=["w8kc"],e=8;break;case 8:i[8].U1kc=function(){return"function"==typeof X3hU},i[2]=i[8],i[3]={},i[3].p1kc=["w8kc"],e=13;break;case 57:e=i[72]<i[1].length?56:69;break;case 36:i[33]=i[90],i[1].m3hU(i[15]),i[1].m3hU(i[7]),i[1].m3hU(i[33]),i[1].m3hU(i[9]),i[1].m3hU(i[2]),e=49;break;case 16:i[4].U1kc=function(){return/\x3d/.W3hU(function(){return unescape("%3D")}+[])},i[5]=i[4],i[79]={},i[79].p1kc=["w8kc"],e=25;break;case 63:i[13]="m1kc",i[95]="p1kc",i[80]="h1kc",i[35]="U1kc",i[58]="k1kc",e=58;break;case 67:return t[4]=30,25;case 34:i[91]={},i[91].p1kc=["q1kc"],i[91].U1kc=function(){return!/(\x5b|\x5d)/.W3hU(function(){return["a","a"].join()}+[])},i[28]=i[91],e=30;break;case 40:i[15]=i[69],i[90]={},i[90].p1kc=["q1kc"],i[90].U1kc=function(){return/\x61\u0061\u0061\x61\x61/.W3hU(function(){return"aaaa".padEnd(5,"a")}+[])},e=36;break;case 71:i[54]++,e=76;break;case 13:i[3].U1kc=function(){var e=!1,t=[];try{for(var i in console)t.m3hU(i);e=0===t.length}catch(e){}return e},i[7]=i[3],i[6]={},i[6].p1kc=["w8kc"],e=20;break;case 77:i[54]=0,e=76;break;case 58:i[72]=0,e=57;break;case 20:i[6].U1kc=function(){return"function"==typeof U3hU},i[9]=i[6],i[4]={},i[4].p1kc=["q1kc"],e=16;break;case 25:i[79].U1kc=function(){return"function"==typeof Q3hU},i[78]=i[79],i[76]={},i[76].p1kc=["q1kc"],i[76].U1kc=function(){return/\u0033\u0044/.W3hU(function(){return escape("=")}+[])},i[41]=i[76],e=34;break;case 65:i[44]=[],i[51]="V1kc",e=63;break;case 30:i[24]={},i[24].p1kc=["q1kc"],i[24].U1kc=function(){return!/\u007c/.W3hU(function(){return"a|a".split("|")}+[])},e=44;break;case 44:i[48]=i[24],i[69]={},i[69].p1kc=["q1kc"],i[69].U1kc=function(){return/\u0039\u0037/.W3hU(function(){return"a".codePointAt(0)}+[])},e=40;break;case 68:e=68;break;case 76:e=i[54]<i[84][i[95]].length?75:70;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 25:a[2]=!0,t=24;break;case 10:t=a[8][i[80]]===i[51]?20:19;break;case 17:a[9]=0,t=16;break;case 14:t=void 0===a[1][a[8][i[58]]]?13:11;break;case 2:var a=[arguments];t=1;break;case 20:a[1][a[8][i[58]]].h+=!0,t=19;break;case 11:a[1][a[8][i[58]]].t+=!0,t=10;break;case 1:t=0===a[0][0].length?5:4;break;case 8:a[9]=0,t=7;break;case 18:a[2]=!1,t=17;break;case 12:a[5].m3hU(a[8][i[58]]),t=11;break;case 24:a[9]++,t=16;break;case 23:return a[2];case 13:a[1][a[8][i[58]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[5]={},t[5].h=0,e=4;break;case 4:return t[5].t=0,t[5]}}.a3hU(this,arguments),t=12;break;case 15:a[3]=a[5][a[9]],a[7]=a[1][a[3]].h/a[1][a[3]].t,t=26;break;case 19:a[9]++,t=7;break;case 6:a[8]=a[0][0][a[9]],t=14;break;case 7:t=a[9]<a[0][0].length?6:18;break;case 26:t=a[7]>=.5?25:24;break;case 16:t=a[9]<a[5].length?15:23;break;case 5:return;case 4:a[1]={},a[5]=[],a[9]=0,t=8}}(i[44])?68:67;break;case 70:i[72]++,e=57}},e=3}}(),Me.z17m=function(){return"function"==typeof Me[520993].P2hU?Me[520993].P2hU.apply(Me[520993],arguments):Me[520993].P2hU},Me.r1kc=function(){return"function"==typeof Me[401065].H1kc?Me[401065].H1kc.apply(Me[401065],arguments):Me[401065].H1kc},Me.q17m=function(){return"function"==typeof Me[520993].P2hU?Me[520993].P2hU.apply(Me[520993],arguments):Me[520993].P2hU},Me.M00=function(){return"function"==typeof Me[69146].y4B?Me[69146].y4B.apply(Me[69146],arguments):Me[69146].y4B},n=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Renderer.Aggregations=function(e){var t;Me.z17m(),this.construct(e),t=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.highlightable=!1,"_main_series"!=t.name&&("Aggregations are ","only allowed on main ","series.",console.warn("Aggregations are only allowed on main series."),t.invalid=!0)},t.inheritsFrom(t.Renderer.Aggregations,t.Renderer.OHLC,!1),t.Renderer.Aggregations.requestNew=function(e,i){var a,r;a=null,Me.q17m();for(var n=0;n<e.length;n++)switch("r","e","nk","o","h","eiki","nash","i",r=e[n]){case"kagi":case"pandf":a=r;break;case"heikinashi":case"linebreak":case"rangebars":case"renko":a="candle";break;default:return null}return null===a?null:new t.Renderer["candle"==a?"OHLC":"Aggregations"]({params:t.extend(i,{type:a})})},t.Renderer.Aggregations.prototype.drawIndividualSeries=function(e,t){var i,a,r;if("ka","g","i",!t.invalid){if(i=this.stx,a={colors:[]},Me.z17m(),"kagi"==t.type){1560742692,1473124318,r=2;for(var n=1;1560742692!==Me.M00(n.toString(),n.toString().length,32604);n++)i.drawKagiSquareWave(e.panel,"stx_kagi_up","stx_kagi_up",t),a.colors.push(i.getCanvasColor("stx_kagi_up")),a.colors.push(i.getCanvasColor("stx_kagi_up")),r+=2;1473124318!==Me.h50(r.toString(),r.toString().length,18701)&&("stx_kagi_","down","stx_kagi_dow","n",i.drawKagiSquareWave(e.panel,"stx_kagi_up","stx_kagi_down",t),a.colors.push(i.getCanvasColor("stx_kagi_up")),a.colors.push(i.getCanvasColor("stx_kagi_down")))}else"pandf"==t.type&&("stx_pand","f_down",i.drawPointFigureChart(e.panel,"stx_pandf_up","X",t),a.colors.push(i.getCanvasColor("stx_pandf_up")),i.drawPointFigureChart(e.panel,"stx_pandf_down","O",t),a.colors.push(i.getCanvasColor("stx_pandf_down")));return a}},t.ChartEngine.prototype.setAggregationType=function(e){var i;this.layout.chartType="candle",!1!==(i=this.chart).baseline.userLevel&&(i.baseline.userLevel=i.baseline.defaultLevel,i.panel.yAxis.scroll=t.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=e,Me.z17m(),this.setMainSeriesRenderer(),i.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},t.ChartEngine.prototype.drawKagiSquareWave=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D=Me;n=e.chart,this.startClip(e.name),s=n.dataSegment,o=n.context,(l=e.yAxis).flipped&&(h=i,i=a,a=h),c=this.canvasStyle(i),u=this.canvasStyle(a),this.canvasColor(i),r.border_color_up&&(o.strokeStyle=r.border_color_up),d=o.strokeStyle,D.q17m(),this.canvasColor(a),r.border_color_down&&(o.strokeStyle=r.border_color_down),p=o.strokeStyle,D.r1kc(0),m=D.n1kc("1",2147483647),c.width&&parseInt(c.width,10)<=25&&(m=Math.max(1,t.stripPX(c.width))),g=1,u.width&&parseInt(u.width,10)<=25&&(g=Math.max(1,t.stripPX(u.width))),this.highlightedDraggable&&(o.globalAlpha*=.3),o.beginPath(),f=n.dataSet.length-n.scroll-1,y=!0,v=null,x=null,b=e.left-.5*this.layout.candleWidth+this.micropixels-1;for(var A=0;A<=s.length;A++)if(b+=this.layout.candleWidth,S=s[A]){if(S.projection)break;x=S.kagiTrend,l.flipped&&(D.N1kc(1),x*=-D.j1kc("1",0)),S.transform&&n.transformFunc&&(C=S.kagiPrevOpen,(S=S.transform).kagiPrevOpen=n.transformFunc(this,n,C)),k=S.cache,D.r1kc(2),((w=D.j1kc(A,f))<e.cacheLeft||w>e.cacheRight||!k.kagiOpen)&&(k.kagiOpen=l.semiLog?l.height*(1-(Math.log(Math.max(S.Open,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-S.Open)*l.multiplier,k.kagiClose=l.semiLog?l.height*(1-(Math.log(Math.max(S.Close,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-S.Close)*l.multiplier,l.flipped?(k.kagiOpen=l.bottom-k.kagiOpen,k.kagiClose=l.bottom-k.kagiClose):(k.kagiOpen+=l.top,k.kagiClose+=l.top)),k.kagiClose,v=l.semiLog?l.height*(1-(Math.log(Math.max(S.kagiPrevOpen,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-S.kagiPrevOpen)*l.multiplier,l.flipped?v=l.bottom-v:v+=l.top,y?(o.moveTo(f>=0?e.left:Math.floor(b),k.kagiOpen),o.lineTo(Math.floor(b),k.kagiOpen),k.kagiClose<k.kagiOpen?(o.strokeStyle=d,o.lineWidth=m):(o.strokeStyle=p,o.lineWidth=g)):-1!=x&&k.kagiClose<v&&v<k.kagiOpen?(o.lineTo(Math.floor(b),v),o.stroke(),o.beginPath(),o.moveTo(Math.floor(b),v),o.strokeStyle=d,o.lineWidth=m):1!=x&&k.kagiClose>v&&v>k.kagiOpen&&(o.lineTo(Math.floor(b),v),o.stroke(),o.beginPath(),o.moveTo(Math.floor(b),v),o.strokeStyle=p,o.lineWidth=g),o.lineTo(Math.floor(b),k.kagiClose),A+1<s.length&&o.lineTo(Math.floor(b+this.layout.candleWidth),k.kagiClose),y=!1}o.stroke(),this.endClip(),D.N1kc(0),o.lineWidth=D.j1kc("1",2147483647)},t.ChartEngine.prototype.drawPointFigureChart=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_=Me;function E(e,t,i){_.N1kc(2),o.moveTo(_.n1kc(u,e),_.j1kc(c,x,i,_.N1kc(3))),_.N1kc(4),o.lineTo(_.n1kc(d,t),_.n1kc(v,i,x,h,_.N1kc(5))),_.q17m(),_.N1kc(2),o.moveTo(_.n1kc(u,e),_.j1kc(v,i,x,h,_.r1kc(5))),_.r1kc(4),o.lineTo(_.n1kc(d,t),_.n1kc(c,x,i,_.N1kc(3)))}function L(e,t,i){_.N1kc(6),o.moveTo(_.n1kc(t,"2",223761152,e),_.n1kc(x,i,h,_.r1kc(7))),_.r1kc(2),o.bezierCurveTo(_.n1kc(d,t),_.j1kc(x,i,h,_.r1kc(7)),_.n1kc(d,t,_.r1kc(2)),_.n1kc(c,v,i,x,_.r1kc(8)),_.j1kc(2,t,e,_.r1kc(9)),_.n1kc(c,v,i,x,_.r1kc(8))),_.N1kc(4),_.q17m(),o.bezierCurveTo(_.j1kc(u,e),_.j1kc(c,v,i,x,_.N1kc(8)),_.j1kc(u,e,_.r1kc(4)),_.n1kc(x,i,h,_.r1kc(7)),_.n1kc(2,t,e,_.N1kc(9)),_.j1kc(x,i,h,_.r1kc(7)))}n=e.chart,this.startClip(e.name),s=n.dataSegment,o=n.context,this.canvasColor(i),"X"==a&&r.border_color_up?o.strokeStyle=r.border_color_up:"O"==a&&r.border_color_down&&(o.strokeStyle=r.border_color_down),l=this.canvasStyle(i),h=parseInt(l.paddingTop,10),c=parseInt(l.paddingBottom,10),u=parseInt(l.paddingLeft,10),d=parseInt(l.paddingRight,10),l.width&&parseInt(l.width,10)<=25?o.lineWidth=Math.max(1,t.stripPX(l.width)):o.lineWidth=2,this.highlightedDraggable&&(o.globalAlpha*=.3),o.beginPath(),p=this.chart.state.aggregation.box,m=n.dataSet.length-n.scroll-1,_.q17m(),g=e.yAxis,v=p*g.multiplier,_.N1kc(10),x=_.j1kc(2,v),b=this.layout.candleWidth,S=e.left-b+this.micropixels-1;for(var q=0;q<s.length;q++)if(S+=b,C=s[q]){if(C.projection)break;if(k=C.pfOpen,w=C.pfClose,D=C.pfTrend,A=C.pfStepBack,C.transform&&n.transformFunc&&(C=C.transform,k=n.transformFunc(this,n,k),w=n.transformFunc(this,n,w)),T=C.cache,_.r1kc(2),((M=_.j1kc(q,m))<e.cacheLeft||M>e.cacheRight||!T.pfOpen)&&(g.flipped?(T.pfOpen=g.bottom-(g.high-k)*g.multiplier,T.pfClose=g.bottom-(g.high-w)*g.multiplier):(T.pfOpen=(g.high-k)*g.multiplier+g.top,T.pfClose=(g.high-w)*g.multiplier+g.top)),P=Math.round(S),_.N1kc(2),F=Math.round(_.j1kc(b,S)),f=Math.abs(Math.round((w-k)/p)),y=T.pfOpen,a==A&&("X"==A?(_.N1kc(4),E(P,F,_.j1kc(v,y))):"O"==A&&(_.r1kc(2),L(P,F,_.j1kc(v,y)))),a==D)for(;f>=0;f--)"X"==a?(E(P,F,y),y-=g.flipped?-v:v):"O"==a&&(L(P,F,y),y+=g.flipped?-v:v)}o.stroke(),this.endClip(),o.lineWidth=1},t.ChartEngine.calculateAggregation=function(e,i,a,r){var n,s,o;return"pa","ndf","k","a","g","i",n="he",n+="i",n+="kenas",n+="hi",o=e.layout,["heikinashi",n].indexOf(i)>-1?s=t.calculateHeikinAshi(e,a,r):"rangebars"==i?s=t.calculateRangeBars(e,a,o.rangebars,r):"kagi"==i?s=t.calculateKagi(e,a,o.kagi,r):"linebreak"==i?s=t.calculateLineBreak(e,a,o.priceLines,r):"renko"==i?s=t.calculateRenkoBars(e,a,o.renko,r):"pandf"==i&&(s=t.calculatePointFigure(e,a,o.pandf,r)),s},t.calculateHeikinAshi=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p;if(!t.length)return t;i||(i=[]),a=[];for(var m=0;m<t.length;m++)if(r=t[m]){for(var g in(n=a[a.length-1])||m||(n=i[i.length-1]),n||(n=r),s=r.Close,o=(o=r.Open)||0===o?o:s,l=(l=r.High)||0===l?l:s,h=(h=r.Low)||0===h?h:s,u=((c=(c=n.Open)||0===c?c:n.Close)+n.Close)/2,Me.r1kc(11),d=Me.n1kc(4,h,s,o,l),p={DT:r.DT,displayDate:r.displayDate,Date:r.Date,Open:u,Close:d,High:Math.max(l,Math.max(u,d)),Low:Math.min(h,Math.min(u,d)),Volume:r.Volume,iqPrevClose:n.Close},r)p[g]||0===p[g]||(p[g]=r[g]);a.push(p)}return a},t.calculateKagi=function(e,i,a,r){var n,s,o,l,h,c,u,d;if(!i.length)return i;r||(r=[]),n=e.layout,s=e.chart,a=parseFloat(a),s.defaultChartStyleConfig.kagi=t.ChartEngine.isDailyInterval(n.interval)?4:.4,(isNaN(a)||a<=0)&&(a=s.defaultChartStyleConfig.kagi,t.Market.Symbology.isForexSymbol(s.symbol)&&(a/=4),null!==n.kagi&&("la","y","o","ut",n.kagi=null,e.changeOccurred("layout"))),a/=100,o=[],h=(l=r[r.length-1])?l.DT:0;for(var p=0;p<i.length;p++)if((c=i[p])&&(l||(Me.N1kc(4),l=i[Me.n1kc(1,p)]),l)){if((u=l.Open||0===l.Open?l.Open:l.Close)>l.Close){if(c.Close>l.Close*(1+a))c.Open=l.Close;else if(l.Close>c.Close&&(l.Close=c.Close),l.Volume+=c.Volume,p<i.length-1)continue}else if(u<l.Close){if(c.Close<l.Close*(1-a))c.Open=l.Close;else if(l.Close<c.Close&&(l.Close=c.Close),l.Volume+=c.Volume,p<i.length-1)continue}else if(l.Close=c.Close,l.Volume+=c.Volume,p<i.length-1)continue;for(var m in d={DT:l.DT,displayDate:l.displayDate,Date:l.Date,Open:l.Open,Close:l.Close,High:Math.max(l.Open,l.Close),Low:Math.min(l.Open,l.Close),Volume:l.Volume,iqPrevClose:l.iqPrevClose},l)d[m]||0===d[m]||(d[m]=l[m]);o.length?d.kagiPrevOpen=o[o.length-1].Open:d.kagiPrevOpen=d.Open,d.Close>d.kagiPrevOpen&&d.kagiPrevOpen>d.Open?d.kagiTrend=1:d.Close<d.kagiPrevOpen&&d.kagiPrevOpen<d.Open&&(d.kagiTrend=-1),h<d.DT&&o.push(d),l=c,s.currentQuote={Close:c.Close}}return o},t.calculateLineBreak=function(e,t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(!t.length)return t;a||(a=[]),r=e.layout,(n=e.chart).defaultChartStyleConfig.priceLines=3,i=parseInt(i,10),isNaN(i)||i<=0?(i=n.defaultChartStyleConfig.priceLines,null!==r.priceLines&&(r.priceLines=null,e.changeOccurred("layout"))):i>10&&(r.priceLines=i=10),o=(s=a.slice(-i)).length,l=0;e:for(var v=0;v<t.length;v++)if(h=t[v]){if(l+=h.Volume,(c=s[s.length-1])||(c={Open:h.Open,Close:h.Open,High:h.Open,Low:h.Open}),u=c.Close,d=(d=c.High)||0===d?d:u,p=(p=c.Low)||0===p?p:u,m=(m=c.Open)||0===m?m:u,g={DT:h.DT,displayDate:h.displayDate,Date:h.Date,Close:h.Close,Volume:l,iqPrevClose:u},n.currentQuote={Close:h.Close},h.Close>u&&c.Close>m);else if(h.Close<u&&c.Close<m);else if(h.Close>d){for(f=2;f<=i;f++)if((y=s[s.length-f])&&h.Close<=y.High)continue e}else{if(!(h.Close<p))continue;for(f=2;f<=i;f++)if((y=s[s.length-f])&&h.Close>=y.Low)continue e}for(var x in h.Close<c.Close?g.Open=Math.min(m,u):g.Open=Math.max(m,u),g.Low=Math.min(g.Open,g.Close),g.High=Math.max(g.Open,g.Close),h)g[x]||0===g[x]||(g[x]=h[x]);s.push(g),l=0}return Me.z17m(),s.slice(o)},t.calculateRenkoBars=function(e,t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=Me;if("L","o","w","H","i","gh",!t.length)return[];if(a||(a=[]),r=e.layout,s=(n=e.chart).state.aggregation,x.q17m(),s||(s=n.state.aggregation={}),o=Math.min(300,t.length),s.minMax||(s.minMax=e.determineMinMax(t.slice(t.length-o),["Close","High","Low"])),l=s.minMax[1]-s.minMax[0],!(h=e.panels[n.name].height))return[];n.defaultChartStyleConfig.renko=Math.floor(1e4*l/(h/30))/1e4,null===i||isNaN(i)||i<=0?(i=n.defaultChartStyleConfig.renko,null!==r.renko&&(r.renko=null,e.changeOccurred("layout"))):(x.r1kc(10),i=Math.max(i,x.n1kc(h,l)),r.renko!==i&&(r.renko=i,e.changeOccurred("layout"))),c=[],u=null,d=null,p=null,a.length&&(u=(m=a[a.length-1]).Low-i,d=m.High+i);for(var b=0;b<t.length;b++)if(g=t[b]){for(u||d||(f=g.Open||0===g.Open?g.Open:g.Close,y=Math.floor(f/i)*i,v=isNaN(y)?f:y,x.r1kc(4),u=x.j1kc(i,v),x.N1kc(2),d=x.n1kc(i,v));;)if(p||(p=g),g.Close<=u)x.N1kc(2),S(x.n1kc(i,u),u),x.r1kc(12),d=x.n1kc(2,u,i),u-=i,p=null;else{if(!(g.Close>=d))break;x.r1kc(4),S(x.n1kc(i,d),d),x.r1kc(13),u=x.j1kc(2,i,d),d+=i,p=null}n.currentQuote=g}function S(e,t){var i;for(var a in x.z17m(),e=Number(e.toFixed(8)),t=Number(t.toFixed(8)),i={DT:p.DT,displayDate:p.displayDate,Date:p.Date,Open:e,Close:t,High:Math.max(e,t),Low:Math.min(e,t),Volume:0,iqPrevClose:e!=t?e:null},p)i[a]||0===i[a]||(i[a]=p[a]);c.push(i)}return u<t[t.length-1].Close&&u+i>t[t.length-1].Close?(x.r1kc(2),S(x.n1kc(i,u),t[t.length-1].Close)):d>t[t.length-1].Close&&d-i<t[t.length-1].Close&&(x.r1kc(4),S(x.n1kc(i,d),t[t.length-1].Close)),c},t.calculateRangeBars=function(e,t,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w=Me;function D(){w.r1kc(2),d=w.n1kc(i,u),w.N1kc(4),p=w.j1kc(i,u),m=u}if("C","lo","s","e",!t.length)return t;function A(e,t){for(;;){if(g||(g=e),u<t){if(u=Math.min(t,d),w.r1kc(4),p=Math.max(p,w.n1kc(i,u)),t<d)break}else if(u>=t&&(u=Math.max(t,p),w.N1kc(2),d=Math.min(d,w.j1kc(i,u)),t>p))break;if(void 0===u)return void console.log("Uh oh undefined in calculateRangeBars:processMove");T(u),g=null,D()}}function T(e){var t;for(var i in w.q17m(),(t={DT:g.DT,displayDate:g.displayDate,Date:g.Date,Open:Number(m.toFixed(8)),Close:Number(e.toFixed(8)),High:Number(d.toFixed(8)),Low:Number(p.toFixed(8)),Volume:0}).iqPrevClose=t.Open,g)t[i]||0===t[i]||(t[i]=g[i]);c.push(t)}if(a||(a=[]),w.z17m(),r=e.layout,(s=(n=e.chart).state.aggregation)||(s=n.state.aggregation={}),o=Math.min(300,t.length),s.minMax||(s.minMax=e.determineMinMax(t.slice(t.length-o),["Close","High","Low"])),l=s.minMax[1]-s.minMax[0],!(h=e.panels[n.name].height))return[];n.defaultChartStyleConfig.range=Math.floor(1e4*l/(h/30))/1e4,null===i||isNaN(i)||i<0?(i=n.defaultChartStyleConfig.range,null!==r.range&&(r.range=null,e.changeOccurred("layout"))):(w.r1kc(10),i=Math.max(i,w.j1kc(h,l)),r.range!==i&&("l","ayo","u","t",r.range=i,e.changeOccurred("layout"))),c=[],u=null,d=null,p=null,m=null,g=null;for(var M=0;M<t.length;M++)(f=t[M])&&(w.r1kc(14),y=t[w.n1kc(M,0,"1")],M||(y||(y=a[a.length-1]),y&&((u=y.Close)||0===u)&&D()),y&&(v=f.Close,x=f.Open,b=f.High,S=f.Low,(v||0===v)&&(x=x||0===x?x:v,b=b||0===b?b:v,S=S||0===S?S:v,u||0===u||(C=Math.floor(x/i)*i,u=isNaN(C)?x:C,D(),A(y,x)),M&&A(f,x),b-x<x-S?(b&&A(f,b),S&&A(f,S)):(S&&A(f,S),b&&A(f,b)),A(f,v),M==t.length-1&&v!=m&&(k=d,w.N1kc(2),d=w.n1kc(i,p),w.r1kc(4),p=w.n1kc(i,k),T(v)))));return c},Me.q17m(),t.calculatePointFigure=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w=Me;if(!i.length)return i;function D(e,t,i,a,r){var n,s;e.High=Math.max(t,e.High),e.Low=Math.min(i,e.Low),w.N1kc(1),n=w.j1kc("2000267605",0),w.z17m(),s=2;for(var o=1;w.h50(o.toString(),o.toString().length,38106)!==n;o++)e.Close=a,w.N1kc(15),s+=w.j1kc("2",0);2092579874!==w.h50(s.toString(),s.toString().length,98801)&&(e.Close=a),e.Volume+=r}if(r||(r=[]),n=e.layout,(o=(s=e.chart).state.aggregation)||(o=s.state.aggregation={}),s.defaultChartStyleConfig.box=1,s.defaultChartStyleConfig.reversal=3,a||(a={}),!(l=a.box)){if(n.pandf&&null!==n.pandf.box&&("la","y","o","ut",n.pandf.box=null,e.changeOccurred("layout")),l=s.defaultChartStyleConfig.box,h=i[i.length-1].Close){-1158140088,570758260,c=2;for(var A=1;-1158140088!==w.h50(A.toString(),A.toString().length,27227);A++)h<.25?l=.0625:h<1?l=.125:h<5?l=.25:h<20?(w.r1kc(4),l=w.j1kc(0,"0.5")):l=h<100?1:h<200?2:h<500?4:h<1e3?5:h<25e3?50:500,c+=2;570758260!==w.M00(c.toString(),c.toString().length,28383)&&(l=h<=1117?547184:h>=2?83057:h>6?7912:h<=49?111:h>=408?5:h>=513?3:h>963?1:h>=8928?8:h>96408?11:571)}t.ChartEngine.isDailyInterval(n.interval)||(l/=10),t.Market.Symbology.isForexSymbol(s.symbol)&&(h&&(h<1?l=.001:h<2?l=.002:h<50?l=.02:h<200&&(l=.2)),t.ChartEngine.isDailyInterval(n.interval)&&(l*=10)),s.defaultChartStyleConfig.box=l}function T(e,t,i,a,r,n,s,o,l){return{DT:e.DT,Date:e.Date,pfOpen:o,pfClose:l,Open:t,Close:r,High:i,Low:a,Volume:n,iqPrevClose:s}}function M(e,t){for(var i in e)t[i]||0===t[i]||(t[i]=e[i]);return w.q17m(),t}l=parseFloat(l),(isNaN(l)||l<=0)&&(n.pandf&&null!==n.pandf.box&&(n.pandf.box=null,e.changeOccurred("layout")),s.defaultChartStyleConfig.box=l=1),u=Math.ceil(parseFloat(a.reversal)),w.z17m(),u>0&&u>a.reversal?(n.pandf.reversal=u,e.changeOccurred("layout")):(isNaN(u)||u<=0)&&(n.pandf&&null!==n.pandf.reversal&&(n.pandf.reversal=null,e.changeOccurred("layout")),u=s.defaultChartStyleConfig.reversal),o.box=l,u*=l,d=(l.toString()+".").split(".")[1].length,p=[],m=0;for(var P=0;P<i.length;P++)(f=i[P])&&(m+=f.Volume,v=f.Close,x=(x=f.Open)||0===x?x:v,b=(b=f.High)||0===b?b:v,S=(S=f.Low)||0===S?S:v,p.length||r.length?((y=p[p.length-1])||(y=t.clone(r[r.length-1])),"O"==y.pfTrend?(S<=y.pfClose-l?(y.pfClose=Number((Math.ceil(S/l-1e-8)*l).toFixed(d)),"O"==y.pfStepBack&&(y.pfStepBack=null),D(y,b,S,v,m)):b>=y.pfClose+u?(C=y.pfClose+l,k=Number((Math.floor(b/l+1e-8)*l).toFixed(d)),g=T(f,x,b,S,v,m,y.pfClose,C,k),C==k&&(g.pfStepBack="X"),"O"==y.pfStepBack?(y.pfOpen=C,y.pfClose=k,y.pfTrend="X",D(y,b,S,v,m)):((g=M(f,g)).pfTrend="X",p.push(g))):D(y,b,S,v,m),m=0):"X"==y.pfTrend&&(b>=y.pfClose+l?(y.pfClose=Number((Math.floor(b/l+1e-8)*l).toFixed(d)),"X"!=y.pfStepBack&&"-"!=y.pfStepBack||(y.pfStepBack=null),D(y,b,S,v,m)):S<=y.pfClose-u?(C=y.pfClose-l,k=Number((Math.ceil(S/l-1e-8)*l).toFixed(d)),g=T(f,x,b,S,v,m,y.pfClose,C,k),C==k&&(g.pfStepBack="O"),"X"==y.pfStepBack||"-"==y.pfStepBack?(y.pfOpen=C,y.pfClose=k,y.pfTrend="O",D(y,b,S,v,m),C!=k&&"-"==y.pfStepBack&&(y.pfStepBack=null)):((g=M(f,g)).pfTrend="O",p.push(g))):D(y,b,S,v,m),w.N1kc(16),m=w.n1kc(1,"0"))):((g=M(f,T(f,x,b,S,v,m,b+l,Number((Math.ceil(S/l-1e-8)*l).toFixed(d)),Number((Math.floor(b/l+1e-8)*l).toFixed(d))))).pfTrend="X",g.pfOpen==g.pfClose&&(g.pfStepBack="-"),p.push(g),m=0));return p}},s=function(e){var t,i,a,r=Me;if(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.Drawing)"br[cq-wave-paramete","rs]","p","attern","l","i","neCol","or","I","I","pa","ttern","l","ineW","idt","h","fil","l","Color","fillC","o","lor","patte","r","n3","co","lor2","ac","t","iv","e1","p","at","tern","fil","l","Color","fi","llCol","or","p","l","p","t","pa","tt","ern","fillCol","or","pa","tte","rn","c","o","lor","p","a","ttern","lin","eWi","d","th","pat","ter","n","fi","ll","Colo","r",t.Drawing.ray=function(){r.q17m(),this.name="ray"},t.inheritsFrom(t.Drawing.ray,t.Drawing.line),t.Drawing.ray.prototype.calculateOuterSet=function(e){var i,a;this.p0[0]==this.p1[0]||this.p0[1]==this.p1[1]||t.ChartEngine.isDailyInterval(this.stx.layout.interval)||(a=(i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]}).x1+1e3,i.x0>i.x1&&(a=i.x1-1e3),this.v0B=this.v0,this.v1B=t.yIntersection(i,a),this.d0B=this.d0,this.d1B=this.stx.dateFromTick(a,e.chart))},t.Drawing.ray.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,e.chart))},t.Drawing.continuous=function(){this.name="continuous",this.dragToDraw=!1,this.maxSegments=null},t.inheritsFrom(t.Drawing.continuous,t.Drawing.segment),t.Drawing.continuous.prototype.click=function(e,i,a){var r,n,s;if(r=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,a)?(this.stx.undo(),!0):(this.setPoint(1,i,a,r.chart),n=new(0,t.Drawing.segment),s=this.serialize(this.stx),n.reconstruct(this.stx,s),this.stx.addDrawing(n),this.stx.changeOccurred("vector"),this.stx.draw(),this.segment++,!!(this.maxSegments&&this.segment>this.maxSegments)||(this.setPoint(0,i,a,r.chart),!1)):(this.setPoint(0,i,a,r.chart),this.penDown=!0,!1)},t.Drawing.ellipse=function(){this.name="ellipse"},t.inheritsFrom(t.Drawing.ellipse,t.Drawing.BaseTwoPoint),t.Drawing.ellipse.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if("a","u","t","o",(i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),r.N1kc(17),l=r.n1kc(n,a,a),h=n,c=s,u=o,r.N1kc(17),d=r.n1kc(o,s,s),r.r1kc(18),p=r.n1kc(d,6,u),(m=this.lineWidth)||(m=1.1),("auto"==(g=this.color)||t.isTransparent(g))&&(g=this.stx.defaultColor),this.highlighted&&("stx_highl","ig","ht_vector",g=this.stx.getCanvasColor("stx_highlight_vector"),.1==m&&(m=1.1)),f=this.fillColor,e.beginPath(),e.moveTo(l,c),r.q17m(),r.N1kc(2),e.bezierCurveTo(l,r.j1kc(p,u),h,r.j1kc(p,u),h,c),r.r1kc(4),e.bezierCurveTo(h,r.j1kc(p,d),l,r.n1kc(p,d),l,c),f&&!t.isTransparent(f)&&"auto"!=f&&(e.fillStyle=f,e.globalAlpha=.2,e.fill(),e.globalAlpha=1),g&&"none"!=this.pattern&&(e.strokeStyle=g,e.lineWidth=m,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(m,this.pattern)),e.lineDashOffset=0),e.stroke()),e.closePath(),this.highlighted)){68834785,-247487173,y=2;for(var x=1;68834785!==r.M00(x.toString(),x.toString().length,63709);x++)v=""===this.highlighted,y+=2;-247487173!==r.M00(y.toString(),y.toString().length,50581)&&(v=""===this.highlighted),v="p1"==this.highlighted,this.littleCircle(e,n,o,v)}},t.Drawing.ellipse.prototype.intersected=function(e,i,a){var n,s,o,l,h;if(!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],a)){"d","r","a","g",2058421605,1476870309,n=2;for(var c=1;2058421605!==r.M00(c.toString(),c.toString().length,49980);c++)this.highlighted="",n+=2;return 1476870309!==r.h50(n.toString(),n.toString().length,9957)&&(this.highlighted=""),this.highlighted="p1",{action:"drag",point:"p1"}}return s=this.p0[0]-(this.p1[0]-this.p0[0]),o=this.p1[0],l=this.p1[1],h=this.p0[1]-(this.p1[1]-this.p0[1]),!(a.x0>Math.max(s,o)||a.x1<Math.min(s,o))&&(!(a.y1>Math.max(h,l)||a.y0<Math.min(h,l))&&(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))},t.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.ellipse.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.ellipse.prototype.serialize=function(){return r.z17m(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.channel=function(){this.name="channel",this.dragToDraw=!1,this.p2=null},t.inheritsFrom(t.Drawing.channel,t.Drawing.segment),t.Drawing.channel.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.channel.prototype.move=function(e,t,i){var a;this.penDown&&(r.q17m(),this.copyConfig(),null===this.p2?this.p1=[t,i]:(a=i-(this.p1[1]-this.p0[1])/(this.p1[0]-this.p0[0])*(t-this.p1[0]),this.p2=[this.p1[0],a]),this.render(e))},t.Drawing.channel.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(t,i)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],a.chart),this.penDown=!1,!0):(this.setPoint(1,t,i,a.chart),this.p0[0]==this.p1[0]?(this.p1=null,!1):(this.p2=[this.p1[0],this.p1[1]],!1)):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1)},t.Drawing.channel.prototype.boxIntersection=function(e,t,i){var a,n,s,o,l;return a=this.p0,n=this.p1,s=this.p2,!!(a&&n&&s)&&(!(i.x0>Math.max(a[0],n[0])||i.x1<Math.min(a[0],n[0]))&&(o=(n[0]-a[0])*((s[1]<a[1]?i.y1:i.y0)-a[1])-(n[1]-a[1])*(e-a[0]),l=(s[0]-a[0])*((s[1]>a[1]?i.y1:i.y0)-(a[1]+s[1]-n[1]))-(n[1]-a[1])*(e-a[0]),r.r1kc(19),r.j1kc(o,0,l)))},t.Drawing.channel.prototype.intersected=function(e,i,a){var n;if(!this.p0||!this.p1||!this.p2)return null;for(var s in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[s][0],n[s][1],a))return r.r1kc(2),this.highlighted=r.j1kc(s,"p"),{action:"drag",point:"p"+s};return this.boxIntersection(e,i,a)?("m","o","ve",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:i}):null},t.Drawing.channel.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g;r.q17m(),(i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=null,this.p2&&(l=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1])),h=this.lineWidth,c=this.getLineColor(),u=this.fillColor,this.p2&&u&&!t.isTransparent(u)&&"auto"!=u&&(e.beginPath(),e.moveTo(a,s),e.lineTo(n,o),e.lineTo(n,l),r.r1kc(20),e.lineTo(a,r.j1kc(s,o,l)),e.closePath(),e.globalAlpha=.2,e.fillStyle=u,e.fill(),e.globalAlpha=1),d={pattern:this.pattern,lineWidth:h},(this.penDown||this.highlighted)&&"none"==this.pattern&&(d.pattern="dotted"),this.stx.plotLine(a,n,s,o,c,"segment",e,i,d),this.p2&&(r.r1kc(20),this.stx.plotLine(a,n,r.n1kc(s,o,l),l,c,"segment",e,i,d)),this.highlighted&&(p="p0"==this.highlighted,m="p1"==this.highlighted,g="p2"==this.highlighted,this.littleCircle(e,a,s,p),this.littleCircle(e,n,o,m),this.littleCircle(e,n,l,g)))},t.Drawing.channel.prototype.reposition=function(e,t,i,a){var n,s,o;t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-a,r.z17m(),"move"==t.action?(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),r.r1kc(4),this.setPoint(r.n1kc(0,"1"),t.p1[0]-s,t.p1[1]-o,n.chart),this.setPoint(2,t.p2[0]-s,t.p2[1]-o,n.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],r.r1kc(0),this.setPoint(r.n1kc("0",2147483647),this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.render(e)))},t.Drawing.channel.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d1,this.v2,e.chart))},t.Drawing.channel.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.adjust()},t.Drawing.channel.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2}},t.Drawing.pitchfork=function(){var e,t;this.name="pitchfork",r.r1kc(21),e=-r.j1kc("1414631555",1857269376),t=2;for(var i=1;r.M00(i.toString(),i.toString().length,52309)!==e;i++)this.dragToDraw=!0,r.N1kc(21),t+=r.n1kc("2",446140288);-1423508812!==r.M00(t.toString(),t.toString().length,94510)&&(this.dragToDraw=!1),this.p2=null},t.inheritsFrom(t.Drawing.pitchfork,t.Drawing.channel),t.Drawing.pitchfork.prototype.configs=["color","lineWidth","pattern"],t.Drawing.pitchfork.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],this.render(e))},t.Drawing.pitchfork.prototype.intersected=function(e,i,a){var n,s;if(!this.p0||!this.p1||!this.p2)return null;for(var o in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[o][0],n[o][1],a))return"d","r","a","g",r.N1kc(2),this.highlighted=r.n1kc(o,"p"),{action:"drag",point:"p"+o};s=this.rays;for(var l=0;l<s.length;l++)if("r","ay",this.lineIntersection(e,i,a,l?"ray":"segment",s[l][0],s[l][1],!0))return"mov","e",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),p2:t.clone(this.p2),tick:e,value:i};return null},t.Drawing.pitchfork.prototype.render=function(e){var t,i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if(t=this.stx.panels[this.panelName]){i=this.stx,(a=this.p2)||(a=this.p1),n=i.pixelFromTick(this.p0[0],t.chart),s=i.pixelFromTick(this.p1[0],t.chart),o=i.pixelFromTick(a[0],t.chart),l=i.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),h=i.pixelFromValueAdjusted(t,this.p1[0],this.p1[1]),c=i.pixelFromValueAdjusted(t,a[0],a[1]),u=this.lineWidth,d=this.getLineColor(),p={pattern:this.pattern,lineWidth:u},m=50,r.N1kc(22),g=r.n1kc(l,2,h,c),r.r1kc(23),(f=r.j1kc(0,"2",n,o,s))<0&&(m*=-1),r.r1kc(10),g*=r.j1kc(f,m),r.N1kc(9),this.rays=[[[s,h],[o,c]],[[n,l],[r.n1kc(2,o,s),r.n1kc("2",c,h,0,r.r1kc(24))]]],s==o&&h==c||(r.N1kc(4),this.rays.push([[s,h],[r.j1kc(m,s),r.j1kc(g,h)]],[[o,c],[r.j1kc(m,o),r.n1kc(g,c)]]));for(var C=0;C<this.rays.length;C++)y=this.rays[C],v=C?"ray":"segment",i.plotLine(y[0][0],y[1][0],y[0][1],y[1][1],d,v,e,t,p);this.highlighted&&(x="p0"==this.highlighted,b="p1"==this.highlighted,S="p2"==this.highlighted,this.littleCircle(e,n,l,x),this.littleCircle(e,s,h,b),this.littleCircle(e,o,c,S))}},t.Drawing.pitchfork.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart))},t.Drawing.pitchfork.prototype.reconstruct=function(e,t){this.stx=e,r.q17m(),this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.d2=t.d2,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.tzo2=t.tzo2,this.v0=t.v0,this.v1=t.v1,this.v2=t.v2,this.adjust()},t.Drawing.pitchfork.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2}},t.Drawing.gartley=function(){this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,this.shape=null,r.q17m(),this.points=[]},t.inheritsFrom(t.Drawing.gartley,t.Drawing.continuous),t.Drawing.gartley.prototype.check=function(e,t){if(!t)return!0;if(e[0]>=t[0]||e[1]==t[1])return!1;if(1==this.segment)e[1]<t[1]?this.shape="M":this.shape="W";else if(2==this.segment){if("M"==this.shape&&e[1]<t[1])return!1;if("W"==this.shape&&e[1]>t[1])return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[0][1]-e[1])>=.786)return!1}else if(3==this.segment){if("M"==this.shape&&e[1]>t[1])return!1;if("W"==this.shape&&e[1]<t[1])return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])<.618)return!1;if((t[1]-e[1])/(this.points[1][1]-e[1])>=.786)return!1}else if(4==this.segment){if("M"==this.shape&&(e[1]<t[1]||t[1]<this.points[0][1]))return!1;if("W"==this.shape&&(e[1]>t[1]||t[1]>this.points[0][1]))return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-t[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return r.q17m(),!0},t.Drawing.gartley.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName]){if(this.copyConfig(),!this.penDown)return this.setPoint(0,t,i,a.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(this.accidentalClick(t,i))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(1==this.segment&&this.points.push(this.p0),this.points.push(this.p1),this.setPoint(1,t,i,a.chart),this.segment++,this.segment>this.maxSegments){this.setPoint(0,this.points[0][0],this.points[0][1],a.chart),this.penDown=!1,-1592284084,-322965098,2;for(var n=1;-1592284084!==r.M00(n.toString(),n.toString().length,91876);n++)return!1;if(-322965098!==r.h50(2..toString(),2..toString().length,84310))return!0}this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,t,i,a.chart)}return!1}},t.Drawing.gartley.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if((i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),2==this.segment?this.drawDropZone(e,.618*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]):3==this.segment?this.drawDropZone(e,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[0]):4==this.segment&&(l=1.618*this.points[2][1]-.618*this.points[1][1],l="M"==this.shape?Math.max(l,this.points[0][1]):Math.min(l,this.points[0][1]),this.drawDropZone(e,l,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0])),h=this.lineWidth,c=this.getLineColor(),u={pattern:this.pattern,lineWidth:h},(this.penDown||this.highlighted)&&"none"==this.pattern&&(u.pattern="dotted"),this.segment<=this.maxSegments&&this.stx.plotLine(a,n,s,o,c,this.name,e,i,u),d=this.fillColor,p=[],this.points.length)){e.beginPath();for(var x=1;x<this.points.length&&x<=4;x++)m=this.stx.pixelFromTick(this.points[x-1][0],i.chart),g=this.stx.pixelFromTick(this.points[x][0],i.chart),f=this.stx.pixelFromValueAdjusted(i,this.points[x-1][0],this.points[x-1][1]),y=this.stx.pixelFromValueAdjusted(i,this.points[x][0],this.points[x][1]),1==x&&p.push(m,f),p.push(g,y),this.stx.plotLine(m,g,f,y,c,this.name,e,i,u);if(2!=this.points.length&&4!=this.points.length||p.push(n,o),this.points[2]&&p.push(this.stx.pixelFromTick(this.points[2][0],i.chart),this.stx.pixelFromValueAdjusted(i,this.points[2][0],this.points[2][1])),d&&"auto"!=d&&!t.isTransparent(d)){for(var b=0;b<p.length;b+=2)0===b&&e.moveTo(p[0],p[1]),e.lineTo(p[b],p[b+1]);-409358655,1844460778,v=2;for(var S=1;-409358655!==r.h50(S.toString(),S.toString().length,42669);S++)e.fillStyle=d,v+=2;1844460778!==r.h50(v.toString(),v.toString().length,28933)&&(e.fillStyle=d),r.r1kc(16),e.globalAlpha=r.n1kc(1,"0.2"),e.closePath(),e.fill(),e.globalAlpha=1}}},t.Drawing.gartley.prototype.lineIntersection=function(e,i,a,r){var n,s;if(n=this.points,s=this.stx.panels[this.panelName],n.length!=this.maxSegments+1||!s)return!1;for(var o=0;o<n.length-1;o++)if("s","egm","ent",t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,a,"segment",n[o],n[o+1]))return!0;return!1},t.Drawing.gartley.prototype.boxIntersection=function(e,t,i){var a,r;if(!this.p0||!this.p1)return!1;if(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))return!1;a=Math.min(this.p0[1],this.p1[1]),r=Math.max(this.p0[1],this.p1[1]);for(var n=0;n<this.points.length;n++)a=Math.min(a,this.points[n][1]),r=Math.max(r,this.points[n][1]);return!(i.y1>r||i.y0<a)},t.Drawing.gartley.prototype.reposition=function(e,t,i,a){var n,s,o;if(t&&(n=this.stx.panels[this.panelName],s=t.tick-i,t.tick=i,o=t.value-a,r.q17m(),t.value=a,"move"==t.action)){this.pts=[];for(var l=0;l<this.points.length;l++)this.points[l][0]-=s,this.points[l][1]-=o,this.setPoint(1,this.points[l][0],this.points[l][1],n.chart),l&&l<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[l]=this.p1;r.N1kc(16),this.setPoint(r.n1kc(1,"0"),this.points[0][0],this.points[0][1],n.chart),this.render(e)}},t.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.gartley.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.reconstructPoints(),this.setPoint(0,this.d0,this.v0,e.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,e.chart),this.points.push(this.p1))},t.Drawing.gartley.prototype.reconstructPoints=function(){var e,i;if(e=this.stx.panels[this.panelName],r.z17m(),e){this.points=[];for(var a=0;a<this.pts.length;a+=3)(i=t.strToDateTime(this.pts[a])).setMinutes(i.getMinutes()+Number(this.pts[a+1])-i.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(t.yyyymmddhhmmssmmm(i),e.chart),this.pts[a+2]])}},t.Drawing.gartley.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.pts=t.pts.split(","),this.adjust()},t.Drawing.gartley.prototype.serialize=function(){return r.q17m(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,pts:this.pts.join(",")}},t.Drawing.freeform=function(){this.name="freeform",this.splineTension=.3,this.dragToDraw=!0},t.inheritsFrom(t.Drawing.freeform,t.Drawing.segment),t.Drawing.freeform.prototype.measure=function(){},t.Drawing.freeform.prototype.intersected=function(e,i,a){return r.z17m(),a.x0>this.hiX||a.x1<this.lowX||a.y1>this.hiY||a.y0<this.lowY?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),tick:e,value:i})},t.Drawing.freeform.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,"move"==t.action&&(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.adjust(),this.render(e)))},t.Drawing.freeform.prototype.click=function(e,i,a){var n,s;if(n=this.stx.panels[this.panelName])return!1===this.penDown?(this.copyConfig(),this.startX=Math.round(this.stx.resolveX(this.stx.pixelFromTick(i,n.chart))),this.startY=Math.round(this.stx.resolveY(this.stx.pixelFromValueAdjusted(n,i,a))),s=this.stx.dateFromTick(i,n.chart,!0),this.d0=t.yyyymmddhhmmssmmm(s),this.tzo0=s.getTimezoneOffset(),this.v0=a,this.p0=[t.ChartEngine.crosshairX-this.startX,t.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=this.stx.layout.candleWidth,this.multiplier=n.yAxis.multiplier,this.interval=this.stx.layout.interval,this.periodicity=this.stx.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,document.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,r.q17m(),document.body.style.cursor="auto",!0)},t.Drawing.freeform.prototype.move=function(e,i,a){var n,s;if(this.penDown)return n=this.stx.panels[this.panelName],s=this.stx.dateFromTick(i,n.chart,!0),this.d1=t.yyyymmddhhmmssmmm(s),this.tzo1=s.getTimezoneOffset(),this.v1=a,r.q17m(),this.p1=[t.ChartEngine.crosshairX-this.startX,n.yAxis.flipped?this.startY-t.ChartEngine.crosshairY:t.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,this.nodes.length-=2):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,r.N1kc(0),this.nodes.length-=r.n1kc("2",2147483647))),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(e),!1},t.Drawing.freeform.prototype.intervalRatio=function(e,i,a,n,s,o){var l;function h(e,t){return r.z17m(),5}function c(e,i){return r.z17m(),t.Market.Symbology.isForexSymbol(i)?1440:390}return l=0,e==i?l=1:isNaN(e)||isNaN(i)?isNaN(e)?"month"==e?("d","a","y","week"==i?l=5:"day"==i?l=30:isNaN(i)||(l=30*c(s,o)/i)):"week"==e?("m","on","t","h","month"==i&&(l=.2),"day"==i?l=h(s,o):isNaN(i)||(l=h(s,o)*c(s,o)/i)):"day"==e&&("w","e","e","k","week"==i?l=1/h(s,o):"month"==i?l=1/30:isNaN(i)||(l=c(s,o)/i)):isNaN(e)||("da","y","month"==i?l=e/(30*c(s,o)):"week"==i?l=e/(h(s,o)*c(s,o)):"day"==i&&(l=e/c(s,o))):(r.N1kc(10),l=r.n1kc(i,e)),r.z17m(),r.N1kc(10),l*=r.j1kc(n,a)},t.Drawing.freeform.prototype.render=function(e){var t,i,a,n,s,o,l,h,c,u,d,p;if((t=this.stx.panels[this.panelName])&&0!==(i=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,t.chart.symbol))){a=this.stx.layout.candleWidth/this.candleWidth,n=t.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,t.chart),s=this.stx.pixelFromTick(this.p0[0],t.chart),o=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),l=[],h=this.lineWidth,c=this.getLineColor(),u={pattern:this.pattern,lineWidth:h};for(var m=0;m<this.pNodes.length;m++)d=i*a*this.pNodes[m][0]+s,p=n*this.pNodes[m][1],t.yAxis.flipped?(r.r1kc(4),p=r.n1kc(p,o)):p+=o,l.push(d,p);l.length&&(this.splineTension<0?this.stx.connectTheDots(l,c,this.name,e,t,u):this.stx.plotSpline(l,this.splineTension,c,this.name,e,!0,u))}},t.Drawing.freeform.prototype.adjust=function(){var e,t,i,a,n,s,o,l;if(e=this.stx.panels[this.panelName]){t=[this.nodes[0],this.nodes[1]],this.pNodes=[t],this.lowX=this.nodes[0],this.hiX=this.nodes[0],r.N1kc(15),this.lowY=this.nodes[r.j1kc("1",0)],this.hiY=this.nodes[1];for(var h=2;h<this.nodes.length;h+=2)r.N1kc(25),i=[this.nodes[h],this.nodes[r.n1kc("1",h)]],this.pNodes.push(i),this.lowX=Math.min(this.lowX,i[0]),this.hiX=Math.max(this.hiX,i[0]),this.lowY=Math.max(this.lowY,i[1]),this.hiY=Math.min(this.hiY,i[1]);0!==(a=this.intervalRatio(this.interval,this.stx.layout.interval,this.periodicity,this.stx.layout.periodicity,this.d0,e.chart.symbol))&&(n=this.stx.layout.candleWidth/this.candleWidth,s=e.yAxis.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,e.chart),o=this.stx.pixelFromTick(this.p0[0],e.chart),l=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),this.lowX=this.stx.tickFromPixel(Math.floor(a*n*this.lowX)+o,e.chart),this.hiX=this.stx.tickFromPixel(Math.ceil(a*n*this.hiX)+o,e.chart),e.yAxis.flipped?(this.lowY=this.stx.valueFromPixel(l-Math.floor(s*this.lowY),e),this.hiY=this.stx.valueFromPixel(l-Math.ceil(s*this.hiY),e)):(this.lowY=this.stx.valueFromPixel(Math.floor(s*this.lowY)+l,e),this.hiY=this.stx.valueFromPixel(Math.ceil(s*this.hiY)+l,e)))}},t.Drawing.freeform.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes}},t.Drawing.freeform.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.candleWidth=t.cw,this.multiplier=t.mlt,this.d0=t.d0,this.tzo0=t.tzo0,this.v0=t.v0,this.interval=t.inter,this.periodicity=t.pd,this.nodes=t.nodes,this.adjust()},t.Drawing.callout=function(){this.name="callout",this.arr=[],this.w=0,this.h=0,r.z17m(),this.padding=4,this.text="",this.ta=null,this.fontSize=0,this.font={},this.stemEntry="",this.defaultWidth=50,this.defaultHeight=10},t.inheritsFrom(t.Drawing.callout,t.Drawing.annotation),t.Drawing.callout.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.callout.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),this.borderColor=this.color},t.Drawing.callout.prototype.move=function(e,t,i){var a,n;if(this.penDown){this.copyConfig(),this.p0=[t,i],r.N1kc(15),a=-r.j1kc("331408876",327197764),1593693703,n=2;for(var s=1;r.h50(s.toString(),s.toString().length,99403)!==a;s++)this.render(e),n+=2;1593693703!==r.h50(n.toString(),n.toString().length,82787)&&this.render(e),this.render(e)}},t.Drawing.callout.prototype.onChange=function(e){var i,a;this.stx.panels[this.panelName]&&(i=e.target,this.w=i.clientWidth,this.h=i.clientHeight,a=this.context||this.stx.chart.tempCanvas.context,r.z17m(),t.clearCanvas(a.canvas,this.stx),this.render(a),this.edit(a))},t.Drawing.callout.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if("alpha","beti","c",this.context=e,(i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),!isNaN(n))){if(e.font=this.fontString,e.textBaseline="top",s=a,o=n,l=this.w/2,h=this.h/2,this.penDown&&(l=this.defaultWidth,(h=this.defaultHeight)||(h=this.fontSize)),(c=this.lineWidth)||(c=1.1),("auto"==(u=this.color)||t.isTransparent(u))&&(u=this.stx.defaultColor),("auto"==(d=this.borderColor)||t.isTransparent(d))&&(d=this.stx.defaultColor),this.highlighted&&(d=this.stx.getCanvasColor("stx_highlight_vector")),y=Math.min(Math.min(l,h)/2,8),this.stem){if("c","m",this.stem.t?(p=this.stx.pixelFromTick(this.stem.t),g=this.stx.pixelFromValueAdjusted(i,this.stem.t,this.stem.v)):this.stem.x&&(p=s,g=o,s+=this.stem.x,o+=this.stem.y),v="",p>=s+l?(r.r1kc(2),m=r.j1kc(l,s),v="r"):p>s-l&&p<s+l?(m=s,v="c"):p<=s-l&&(r.r1kc(4),m=r.j1kc(l,s),v="l"),g>=o+h){r.r1kc(2),f=r.n1kc(h,o),911706614,1924469187,x=2;for(var C=1;911706614!==r.M00(C.toString(),C.toString().length,458);C++)v/="",x+=2;1924469187!==r.h50(x.toString(),x.toString().length,14134)&&(v+="b")}else g>o-h&&g<o+h?(f=o,v+="m"):g<=o-h&&(r.r1kc(4),f=r.j1kc(h,o),v+="t");this.stemEntry=v,"cm"!=v&&(p=Math.round(p),m=Math.round(m),g=Math.round(g),f=Math.round(f))}if(this.highlighted?this.stx.canvasColor("stx_annotation_highlight_bg",e):this.fillColor?(e.fillStyle=this.fillColor,r.r1kc(16),e.globalAlpha=r.n1kc(1,"0.4")):this.stem&&(e.fillStyle=this.stx.containerColor),e.strokeStyle=d,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(c,this.pattern)),e.lineDashOffset=0),d){"c","t","r","b","r","t",e.beginPath(),e.lineWidth=c,r.N1kc(7),e.moveTo(r.j1kc(y,s,l),r.n1kc(h,o,r.N1kc(4))),"rt"!=this.stemEntry?(r.N1kc(2),e.quadraticCurveTo(r.j1kc(l,s),r.n1kc(h,o,r.N1kc(4)),r.n1kc(l,s,r.r1kc(2)),r.n1kc(h,y,o,r.r1kc(3)))):(e.lineTo(p,g),r.N1kc(2),e.lineTo(r.n1kc(l,s),r.n1kc(h,y,o,r.r1kc(3)))),r.N1kc(2),e.lineTo(r.n1kc(l,s),r.n1kc(o,y,2,r.r1kc(26))),830927753,1249751388,r.r1kc(27),b=r.j1kc(1007905088,"2");for(var k=1;830927753!==r.h50(k.toString(),k.toString().length,36597);k++)"rm"==this.stemEntry&&e.lineTo(p,g),r.N1kc(2),e.lineTo(r.n1kc(l,s),r.n1kc(o,2,y,r.r1kc(28))),r.r1kc(2),e.lineTo(r.n1kc(l,s),r.n1kc(y,o,h,r.r1kc(7))),b+=2;1249751388!==r.M00(b.toString(),b.toString().length,24261)&&(""===this.stemEntry&&e.lineTo(p,g),r.r1kc(4),e.lineTo(r.j1kc(l,s),r.n1kc(y,"3",o,r.N1kc(29))),r.r1kc(30),e.lineTo(r.n1kc(s,l),r.n1kc(h,y,o,r.N1kc(3)))),"rb"!=this.stemEntry?(r.N1kc(2),e.quadraticCurveTo(r.n1kc(l,s),r.j1kc(h,o,r.r1kc(2)),r.j1kc(y,s,l,r.r1kc(7)),r.n1kc(h,o,r.N1kc(2)))):(e.lineTo(p,g),r.N1kc(7),e.lineTo(r.n1kc(y,s,l),r.j1kc(h,o,r.r1kc(2)))),r.r1kc(28),e.lineTo(r.j1kc(s,2,y),r.j1kc(h,o,r.r1kc(2))),"cb"==this.stemEntry&&e.lineTo(p,g),r.r1kc(26),e.lineTo(r.n1kc(s,y,2),r.n1kc(h,o,r.r1kc(2))),r.r1kc(3),e.lineTo(r.j1kc(l,y,s),r.j1kc(h,o,r.N1kc(2))),"lb"!=this.stemEntry?(r.N1kc(4),e.quadraticCurveTo(r.n1kc(l,s),r.j1kc(h,o,r.N1kc(2)),r.n1kc(l,s,r.r1kc(4)),r.n1kc(y,o,h,r.r1kc(7)))):(e.lineTo(p,g),r.r1kc(4),e.lineTo(r.n1kc(l,s),r.j1kc(y,o,h,r.r1kc(7)))),r.r1kc(4),e.lineTo(r.n1kc(l,s),r.j1kc(o,2,y,r.N1kc(28))),"lm"==this.stemEntry&&e.lineTo(p,g),r.r1kc(4),e.lineTo(r.j1kc(l,s),r.j1kc(y,"2",o,r.r1kc(31))),r.N1kc(4),e.lineTo(r.j1kc(l,s),r.n1kc(h,y,o,r.r1kc(3))),"lt"!=this.stemEntry?(r.r1kc(4),e.quadraticCurveTo(r.n1kc(l,s),r.j1kc(h,o,r.r1kc(4)),r.n1kc(l,y,s,r.r1kc(3)),r.j1kc(h,o,r.N1kc(4)))):(e.lineTo(p,g),r.N1kc(3),e.lineTo(r.n1kc(l,y,s),r.n1kc(h,o,r.N1kc(4)))),r.r1kc(26),e.lineTo(r.j1kc(s,y,2),r.j1kc(h,o,r.N1kc(4))),"ct"==this.stemEntry&&e.lineTo(p,g),r.r1kc(28),e.lineTo(r.n1kc(s,2,y),r.n1kc(h,o,r.r1kc(4))),r.N1kc(7),e.lineTo(r.n1kc(y,s,l),r.j1kc(h,o,r.r1kc(4))),e.fill(),e.globalAlpha=1,"none"!=this.pattern&&e.stroke()}if(this.highlighted?this.stx.canvasColor("stx_annotation_highlight",e):e.fillStyle=u,o+=this.padding,!this.ta)for(var w=0;w<this.arr.length;w++)e.fillText(this.arr[w],s-l+this.padding,o-h),o+=this.fontSize;e.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&(S="p0"==this.highlighted,this.littleCircle(e,p,g,S))}},t.Drawing.callout.prototype.click=function(e,t,i){var a;if(r.z17m(),!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,t,i,a.chart),this.penDown?(this.adjust(),this.edit(e),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},t.Drawing.callout.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],n=t.tick-i,s=t.value-a,t.stem?("dr","a","g","drag"==t.action?this.stem={d:this.stx.dateFromTick(i,r.chart,!0),v:a}:"move"==t.action&&(this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(t.stem.d,r.chart)-n),v:t.stem.v-s}),this.adjust()):this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e))},t.Drawing.callout.prototype.lineIntersection=function(e,i,a,n){var s,o,l,h,c,u,d,p,m,g,f,y;return s=this.stx.panels[this.panelName],o=this.stem,r.q17m(),l=this.p0,h=this.stx,!!(l&&o&&s)&&(c=o.t||this.stx.tickFromDate(o.d,s.chart),u={x0:l[0],x1:c,y0:l[1],y1:o.v},p=(d=t.convertBoxToPixels(h,this.panelName,u)).x0,m=d.y0,g=d.x1,f=d.y1,"string"==typeof this.stemEntry&&(this.stemEntry.indexOf("l")>-1?p-=this.w/2:this.stemEntry.indexOf("r")>-1&&(p+=this.w/2),this.stemEntry.indexOf("t")>-1?m-=this.h/2:this.stemEntry.indexOf("b")>-1&&(m+=this.h/2)),y=t.convertBoxToPixels(h,this.panelName,a),t.boxIntersects(y.x0,y.y0,y.x1,y.y1,p,m,g,f,n))},t.Drawing.callout.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c;return r=this.stx.panels[this.panelName],this.p0?this.pointIntersection(this.stem.t,this.stem.v,a)?("p","0",this.highlighted="p0",{action:"drag",stem:!0}):(n=this.stx.pixelFromTick(this.p0[0],r.chart)-this.w/2,s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1])-this.h/2,o=n+this.w,l=s+this.h,this.stem&&this.stem.x&&(n+=this.stem.x,o+=this.stem.x,s+=this.stem.y,l+=this.stem.y),h=this.stx.pixelFromTick(e,r.chart),c=this.stx.pixelFromValueAdjusted(r,e,i),h+a.r>=n&&h-a.r<=o&&c+a.r>=s&&c-a.r<=l?(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:i}):this.lineIntersection(e,i,a,"segment")?(this.highlighted=!0,{action:"move",stem:t.clone(this.stem),p0:t.clone(this.p0),tick:e,value:i}):null):null},t.Drawing.fibonacci=function(){this.name="fibonacci",r.q17m(),this.configurator="fibonacci"},t.inheritsFrom(t.Drawing.fibonacci,t.Drawing.BaseTwoPoint),t.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz",display:"d"},r.N1kc(16),t.Drawing.fibonacci.prototype.recommendedLevels=[-r.j1kc(1,"0.618"),-.382,0,.382,.5,.618,1,1.382,1.618],t.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth","pattern","parameters"],t.Drawing.fibonacci.prototype.initializeSettings=function(e){var t,i;if((t=this.recommendedLevels)&&!e.currentVectorParameters.fibonacci.fibsAlreadySet){i=e.currentVectorParameters.fibonacci.fibs;for(var a=0;a<i.length;a++){delete i[a].display;for(var r=0;r<t.length;r++)i[a].level==t[r]&&(i[a].display=!0)}}},t.Drawing.fibonacci.prototype.setOuter=function(){var e,i,a,n,s,o,l,h,c,u,d,p,m,g;if(i=(e=this.stx).panels[this.panelName]){a=Math.max(this.p0[1],this.p1[1]),n=Math.min(this.p0[1],this.p1[1]),r.N1kc(4),s=r.j1kc(n,a),this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},o=e.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=e.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),h=e.pixelFromTick(this.p0[0],i.chart),c=e.pixelFromTick(this.p1[0],i.chart),u=0,d=1;for(var f=0;f<this.parameters.fibs.length;f++)(p=this.parameters.fibs[f]).level>=u&&p.level<=d||!p.display||(m=e.pixelFromValueAdjusted(i,this.p0[0],l<o?a-s*p.level:n+s*p.level),g=t.xIntersection({x0:h,x1:c,y0:o,y1:l},m),p.level<u?(u=p.level,this.outer.p1[1]=e.valueFromPixel(m,i),this.outer.p1[0]=e.tickFromPixel(g,i.chart)):p.level>d&&(d=p.level,this.outer.p0[1]=e.valueFromPixel(m,i),this.outer.p0[0]=e.tickFromPixel(g,i.chart)))}},t.Drawing.fibonacci.prototype.click=function(e,i,a){var n;if(n=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,a)?this.dragToDraw:(r.N1kc(0),this.setPoint(r.j1kc("1",2147483647),i,a,n.chart),this.setOuter(),this.parameters=t.clone(this.parameters),r.q17m(),this.penDown=!1,!0):(this.setPoint(0,i,a,n.chart),this.penDown=!0,!1)},t.Drawing.fibonacci.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O;if("stx_y","a","xis",(i=this.stx.panels[this.panelName])&&(a=i.yAxis,this.p1)){n=Math.max(this.p0[1],this.p1[1]),s=Math.min(this.p0[1],this.p1[1]),o=a.flipped?s-n:n-s,l=this.stx.pixelFromTick(this.p0[0],i.chart),h=this.stx.pixelFromTick(this.p1[0],i.chart),c=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),u=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),d=Math.min(u,c),p=Math.max(u,c),r.r1kc(4),m=r.n1kc(d,p),r.N1kc(32),g=r.n1kc(0,h,l,c,u),f={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=f),y=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),v=e.measureText("161.8%").width+10,x=Number.MAX_VALUE,b=Number.MAX_VALUE,S=-1*Number.MAX_VALUE,C=-1*Number.MAX_VALUE,("auto"==(k=this.color)||t.isTransparent(k))&&(k=this.stx.defaultColor),r.q17m(),this.rays=[];for(var H=0;H<this.parameters.fibs.length;H++)"a","u","t","o",e.textAlign="left",e.fillStyle=k,(w=this.parameters.fibs[H]).display&&(D=this.stx.pixelFromValueAdjusted(i,this.p0[0],u<c?n-o*w.level:s+o*w.level),A=t.xIntersection({x0:l,x1:h,y0:c,y1:u},D),T=this.parameters.extendLeft?0:A,M=i.left+i.width,this.parameters.printLevels&&("righ","t",P=Math.round(1e3*w.level)/10+"%",M-=v,this.parameters.printValues&&("st","x_yax","is",e.fillStyle=k,this.stx.canvasFont("stx_yaxis",e)),M<T&&(e.textAlign="right"),e.fillText(P,M,D),M<T?M+=5:M-=5),this.parameters.printValues&&A<i.width&&(F=this.stx.transformedPriceFromPixel(D,i),F=a.priceFormatter?a.priceFormatter(this.stx,i,F):this.stx.formatYAxisPrice(F,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,F,D,k,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(_=w.color)||t.isTransparent(_))&&(_=this.color),("auto"==_||t.isTransparent(_))&&(_=this.stx.defaultColor),("auto"==(E=w.color)||t.isTransparent(E))&&(E=this.fillColor),("auto"==E||t.isTransparent(E))&&(E=this.stx.defaultColor),e.fillStyle=E,L=t.clone(w.parameters),this.highlighted&&(L.opacity=1),this.stx.plotLine(T,M,D,D,this.highlighted?y:_,"segment",e,i,L),this.rays.push([[T,D],[M,D]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(M,D),e.lineTo(T,D),T?e.lineTo(h,u):e.lineTo(T,u),e.lineTo(M,u),void 0!==E&&e.fill(),e.globalAlpha=1,D<b&&(x=A,b=D),D>C&&(S=A,C=D));for(var R=0;R<=1;R++)q=g?p-m*R:d+m*R,(q=Math.round(q))<b&&(x=t.xIntersection({x0:l,x1:h,y0:c,y1:u},q),b=q),q>C&&(S=t.xIntersection({x0:l,x1:h,y0:c,y1:u},q),C=q);I=t.clone(this.parameters.trend.parameters),this.highlighted&&(I.opacity=1),this.stx.plotLine(x,S,b,C,y,"segment",e,i,I),this.highlighted&&("p","0",N="p0"==this.highlighted,O="p1"==this.highlighted,this.littleCircle(e,l,c,N),this.littleCircle(e,h,u,O))}},t.Drawing.fibonacci.prototype.reposition=function(e,i,a,n){r.z17m(),i&&(t.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},t.Drawing.fibonacci.prototype.intersected=function(e,i,a){var n,s,o,l,h,c,u;if(n=this.p0,s=this.p1,!n||!s)return null;o=2;for(var d=1;915835058!==r.h50(d.toString(),d.toString().length,90877);d++)l={0:n,1:s},o+=2;for(var p in-1513481475!==r.h50(o.toString(),o.toString().length,59769)&&(l={0:n,1:s}),l={0:n,1:s})if(this.pointIntersection(l[p][0],l[p][1],a))return r.r1kc(2),this.highlighted=r.j1kc(p,"p"),{action:"drag",point:"p"+p};if(h=this.outer,c=this.rays,!(u=h&&this.lineIntersection(e,i,a,"segment",h.p0,h.p1)))for(var m=0;m<c.length;m++)if(this.lineIntersection(e,i,a,"ray",c[m][0],c[m][1],!0)){u=!0;break}return u?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},t.Drawing.fibonacci.prototype.reconstruct=function(e,i){i=t.replaceFields(i,t.reverseObject(t.Drawing.fibonacci.mapping)),this.stx=e,this.parameters=i.parameters,this.parameters||(this.parameters=t.clone(this.stx.currentVectorParameters.fibonacci)),this.color=i.col,this.fillColor=i.fc,this.panelName=i.pnl,this.d0=i.d0,this.d1=i.d1,this.d2=i.d2,this.tzo0=i.tzo0,this.tzo1=i.tzo1,this.tzo2=i.tzo2,this.v0=i.v0,this.v1=i.v1,this.v2=i.v2,this.adjust()},t.Drawing.fibonacci.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setOuter())},t.Drawing.fibonacci.prototype.serialize=function(){var e;return e={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2},t.replaceFields(e,t.Drawing.fibonacci.mapping)},t.Drawing.retracement=function(){r.q17m(),this.name="retracement"},t.inheritsFrom(t.Drawing.retracement,t.Drawing.fibonacci),t.Drawing.fibprojection=function(){this.name="fibprojection",this.dragToDraw=!1,r.z17m(),this.p2=null},t.inheritsFrom(t.Drawing.fibprojection,t.Drawing.fibonacci),t.Drawing.fibprojection.prototype.recommendedLevels=[0,.618,1,1.272,1.618,2.618,4.236],t.Drawing.fibprojection.prototype.click=function(e,i,a){var n;if(n=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,a)?(this.stx.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.parameters=t.clone(this.parameters),!0):(r.N1kc(4),this.setPoint(r.j1kc(0,"1"),i,a,n.chart),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,i,a,n.chart),this.penDown=!0,!1)},t.Drawing.fibprojection.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P;if("au",r.z17m(),"to","midd","l","e","s","ol","i","d",(i=this.stx.panels[this.panelName])&&(a=i.yAxis,this.p1)){if(n=this.p1[1]-this.p0[1],s=this.stx.pixelFromTick(this.p0[0],i.chart),o=this.stx.pixelFromTick(this.p1[0],i.chart),l=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),h=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),c=null,u=null,this.p2&&(c=this.stx.pixelFromTick(this.p2[0],i.chart),u=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1])),d={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=d),p=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),m=e.measureText("161.8%").width+10,("auto"==(g=this.color)||t.isTransparent(g))&&(g=this.stx.defaultColor),this.p2){this.rays=[];for(var F=0;F<this.parameters.fibs.length;F++)e.textAlign="left",e.fillStyle=g,(f=this.parameters.fibs[F]).display&&(y=this.stx.pixelFromValueAdjusted(i,this.p2[0],this.p2[1]+n*f.level),v=t.xIntersection({x0:s,x1:o,y0:l,y1:h},y),x=this.parameters.extendLeft?0:s,b=i.left+i.width,this.parameters.printLevels&&(S=Math.round(1e3*f.level)/10+"%",b-=m,this.parameters.printValues&&(e.fillStyle=g,this.stx.canvasFont("stx_yaxis",e)),b<x&&(e.textAlign="right"),e.fillText(S,b,y),b<x?(r.N1kc(1),b+=r.j1kc("5",0)):b-=5),this.parameters.printValues&&v<i.width&&(C=this.stx.transformedPriceFromPixel(y,i),C=a.priceFormatter?a.priceFormatter(this.stx,i,C):this.stx.formatYAxisPrice(C,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,C,y,g,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(k=f.color)||t.isTransparent(k))&&(k=this.color),("auto"==k||t.isTransparent(k))&&(k=this.stx.defaultColor),("auto"==(w=f.color)||t.isTransparent(w))&&(w=this.fillColor),("auto"==w||t.isTransparent(w))&&(w=this.stx.defaultColor),e.fillStyle=w,D=t.clone(f.parameters),this.highlighted&&(D.opacity=1),this.stx.plotLine(x,b,y,y,this.highlighted?p:k,"segment",e,i,D),this.rays.push([[x,y],[b,y]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(b,y),e.lineTo(x,y),x?e.lineTo(s,u):e.lineTo(x,u),e.lineTo(b,u),void 0!==w&&e.fill(),e.globalAlpha=1)}A=t.clone(this.parameters.trend.parameters),this.highlighted&&(A.opacity=1),this.stx.plotLine(s,o,l,h,p,"segment",e,i,A),this.p2&&this.stx.plotLine(o,c,h,u,p,"segment",e,i,A),this.highlighted&&("p","0",T="p0"==this.highlighted,M="p1"==this.highlighted,P="p2"==this.highlighted,this.littleCircle(e,s,l,T),this.littleCircle(e,o,h,M),this.littleCircle(e,c,u,P))}},t.Drawing.fibprojection.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[t,i]:this.p2=[t,i],this.render(e))},t.Drawing.fibprojection.prototype.reposition=function(e,t,i,a){var n,s,o;t&&(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-a,"move"==t.action?(this.setPoint(0,t.p0[0]-s,t.p0[1]-o,n.chart),this.setPoint(1,t.p1[0]-s,t.p1[1]-o,n.chart),this.setPoint(2,t.p2[0]-s,t.p2[1]-o,n.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],n.chart),r.r1kc(15),this.setPoint(r.j1kc("1",0),this.p1[0],this.p1[1],n.chart),this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.render(e)))},t.Drawing.fibprojection.prototype.intersected=function(e,i,a){var n,s,o,l,h,c;if("seg","men","t",n=this.p0,s=this.p1,o=this.p2,!n||!s||!o)return null;for(var u in l={0:n,1:s,2:o})if(this.pointIntersection(l[u][0],l[u][1],a))return r.r1kc(2),this.highlighted=r.n1kc(u,"p"),{action:"drag",point:"p"+u};if(h=this.rays,!(c=this.lineIntersection(e,i,a,"segment",n,s)||this.lineIntersection(e,i,a,"segment",s,o)))for(var d=0;d<h.length;d++)if(this.lineIntersection(e,i,a,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),p2:t.clone(o),tick:e,value:i}):null},t.Drawing.fibprojection.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),this.setPoint(2,this.d2,this.v2,e.chart))},t.Drawing.fibarc=function(){this.name="fibarc"},t.inheritsFrom(t.Drawing.fibarc,t.Drawing.fibonacci),r.N1kc(4),t.Drawing.fibarc.prototype.recommendedLevels=[.382,.5,.618,r.n1kc(0,"1")],t.Drawing.fibarc.prototype.setOuter=function(){var e,i,a,n,s,o,l;(e=this.stx.panels[this.panelName])&&(this.outer={p0:t.clone(this.p0),p1:t.clone(this.p1)},i=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1]),a=this.stx.pixelFromValueAdjusted(e,this.p1[0],this.p1[1]),n=this.stx.pixelFromTick(this.p0[0],e.chart),s=this.stx.pixelFromTick(this.p1[0],e.chart),r.N1kc(33),o=r.n1kc(i,2,a),l=t.xIntersection({x0:n,x1:s,y0:i,y1:a},o),r.z17m(),this.outer.p0[1]=this.stx.valueFromPixel(o,e),this.outer.p0[0]=this.stx.tickFromPixel(l,e.chart))},t.Drawing.fibarc.prototype.intersected=function(e,i,a){var n,s,o,l,h,c,u,d,p,m;if("mov","e",n=this.stx.panels[this.panelName]){if(s=this.p0,o=this.p1,l=this.outer,!s||!o)return null;for(var g in h={0:s,1:o})if(this.pointIntersection(h[g][0],h[g][1],a))return"d","r","ag",r.r1kc(2),this.highlighted=r.j1kc(g,"p"),{action:"drag",point:"p"+g};return this.lineIntersection(e,i,a,"segment",l.p0,l.p1)?(this.highlighted=!0,{action:"move",p0:t.clone(s),p1:t.clone(o),tick:e,value:i}):(c={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},u=t.convertBoxToPixels(this.stx,this.panelName,c),d={x:Math.abs(Math.sqrt(2)*(u.x1-u.x0)),y:Math.abs(Math.sqrt(2)*(u.y1-u.y0))},p=this.stx.pixelFromTick(e,n.chart),m=this.stx.pixelFromValueAdjusted(n,e,i),p+a.r<u.x1-d.x||p-a.r>u.x1+d.x||m+a.r<u.y1-d.y||m-a.r>u.y1+d.y||u.y0<u.y1&&m-a.r>u.y1||u.y0>u.y1&&m+a.r<u.y1?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))}},t.Drawing.fibarc.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w;if("l","e","ft",(i=this.stx.panels[this.panelName])&&(a=i.yAxis,this.p1)){n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),r.r1kc(34),h=r.n1kc(l,o),r.r1kc(35),c=Math.abs(r.j1kc(s,n,l,o)),u=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),("auto"==(d=this.color)||t.isTransparent(d))&&(d=this.stx.defaultColor);for(var D=0;D<this.parameters.fibs.length;D++)"au","t","o","le","f","t",e.fillStyle=d,(p=this.parameters.fibs[D]).level<0||!p.display||(m=Math.abs(this.p1[1]-this.p0[1])*Math.sqrt(2)*p.level,g=this.p1[1]+m*(h?-1:1)*(a.flipped?-1:1),f=this.stx.pixelFromValueAdjusted(i,this.p0[0],g),y=t.xIntersection({x0:n,x1:s,y0:o,y1:l},f),this.parameters.printLevels&&("ce","n","te","r",e.textAlign="center",v=Math.round(1e3*p.level)/10+"%",this.parameters.printValues&&("stx_ya","x","is",e.fillStyle=d,this.stx.canvasFont("stx_yaxis",e)),e.fillText(v,s,Math.round(f-5))),e.textAlign="left",this.parameters.printValues&&y<i.width&&(x=g,x=a.priceFormatter?a.priceFormatter(this.stx,i,x):this.stx.formatYAxisPrice(x,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,x,f,d,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(b=p.color)||t.isTransparent(b))&&(b=this.color),("auto"==b||t.isTransparent(b))&&(b=this.stx.defaultColor),e.strokeStyle=this.highlight?u:b,("auto"==(S=p.color)||t.isTransparent(S))&&(S=this.fillColor),("auto"==S||t.isTransparent(S))&&(S=this.stx.defaultColor),e.fillStyle=S,e.globalAlpha=this.highlighted?1:p.parameters.opacity,e.lineWidth=p.parameters.lineWidth,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(e.lineWidth,p.parameters.pattern)),e.lineDashOffset=0),e.save(),e.beginPath(),r.N1kc(10),e.scale(r.n1kc(c,1),1),r.N1kc(16),e.arc(r.j1kc(c,s),l,Math.abs(f-l),0,Math.PI,!h),"none"!=this.pattern&&e.stroke(),e.globalAlpha=.05,e.fill(),e.restore(),e.setLineDash&&e.setLineDash([]),e.globalAlpha=1);e.textAlign="left",C=t.clone(this.parameters.trend.parameters),this.highlighted&&(C.opacity=1),r.N1kc(33),this.stx.plotLine(s,r.j1kc(n,2,s),l,r.j1kc(o,2,l),u,"segment",e,i,C),this.highlighted&&("p","0",k="p0"==this.highlighted,w="p1"==this.highlighted,this.littleCircle(e,n,o,k),this.littleCircle(e,s,l,w))}},t.Drawing.fibfan=function(){r.q17m(),this.name="fibfan"},t.inheritsFrom(t.Drawing.fibfan,t.Drawing.fibonacci),t.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],t.Drawing.fibfan.prototype.setOuter=function(){},t.Drawing.fibfan.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F;if("16","1",".","8%","m","iddle",(i=this.stx.panels[this.panelName])&&(a=i.yAxis,this.p1)){n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),h=Math.min(l,o),c=Math.max(l,o),r.N1kc(4),u=r.n1kc(h,c),r.r1kc(32),d=r.j1kc(0,s,n,o,l),p=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),m=e.measureText("161.8%").width+10,g=Number.MAX_VALUE,f=-1*Number.MAX_VALUE,("auto"==(y=this.color)||t.isTransparent(y))&&(y=this.stx.defaultColor),this.rays=[];for(var _=0;_<this.parameters.fibs.length;_++)"s","egment",e.fillStyle=y,(v=this.parameters.fibs[_]).display&&(x=this.stx.pixelFromValueAdjusted(i,this.p0[0],(this.p0[1]-this.p1[1])*v.level+this.p1[1]),b=t.xIntersection({x0:s,x1:s,y0:o,y1:l},x),S=i.left,s>n&&(S+=i.width),r.r1kc(36),C=r.n1kc(b,S,n,o,o,x,n),n>S-(this.parameters.printLevels?m+5:0)&&s>n||n<S+(this.parameters.printLevels?m+5:0)&&s<n||(this.parameters.printLevels&&(k=Math.round(1e3*v.level)/10+"%",s>n?(S-=m,e.textAlign="left"):("r","i","gh","t",S+=m,e.textAlign="right"),this.parameters.printValues&&(e.fillStyle=y,this.stx.canvasFont("stx_yaxis",e)),r.N1kc(36),C=r.j1kc(b,S,n,o,o,x,n),e.fillText(k,S,C),s>n?S-=5:S+=5),e.textAlign="left",this.parameters.printValues&&b<i.width&&(w=this.stx.transformedPriceFromPixel(x,i),w=a.priceFormatter?a.priceFormatter(this.stx,i,w):this.stx.formatYAxisPrice(w,i),e==this.stx.chart.context&&this.stx.endClip(),this.stx.createYAxisLabel(i,w,x,y,null,e),e==this.stx.chart.context&&this.stx.startClip(i.name)),("auto"==(D=v.color)||t.isTransparent(D))&&(D=this.color),("auto"==D||t.isTransparent(D))&&(D=this.stx.defaultColor),("auto"==(A=v.color)||t.isTransparent(A))&&(A=this.fillColor),("auto"==A||t.isTransparent(A))&&(A=this.stx.defaultColor),e.fillStyle=A,this.parameters.printLevels&&(r.N1kc(36),C=r.n1kc(b,S,n,o,o,x,n)),T=t.clone(v.parameters),this.highlighted&&(T.opacity=1),this.stx.plotLine(n,S,o,C,this.highlighted?p:D,"segment",e,i,T),this.rays.push([[n,o],[S,C]]),e.globalAlpha=.05,e.beginPath(),e.moveTo(S,C),e.lineTo(n,o),e.lineTo(S,o),e.fill(),e.globalAlpha=1,x<g&&(g=x),x>f&&(f=x)));for(var E=0;E<=1;E++)M=d?c-u*E:h+u*E,(M=Math.round(M))<g&&(g=M),M>f&&(f=M);this.highlighted&&("p","1",P="p0"==this.highlighted,F="p1"==this.highlighted,this.littleCircle(e,n,o,P),this.littleCircle(e,s,l,F))}},t.Drawing.fibtimezone=function(){var e;e=2;for(var t=1;1650608781!==r.h50(t.toString(),t.toString().length,43920);t++)"fibtimez","one",this.name="fibtimezone",e+=2;1470132373!==r.h50(e.toString(),e.toString().length,93718)&&(this.name="")},t.inheritsFrom(t.Drawing.fibtimezone,t.Drawing.fibonacci),t.Drawing.fibtimezone.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if("a","uto","a","uto",(i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=[1,0],h=this.getLineColor(this.parameters.trend.color),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),20,c=this.p1[0]-this.p0[0],("auto"==(u=this.color)||t.isTransparent(u))&&(u=this.stx.defaultColor),e.textAlign="center",d=a,r.q17m(),p=i.yAxis.top,m=i.yAxis.bottom,g=0,("auto"==(f=this.parameters.timezone.color)||t.isTransparent(f))&&(f=this.color),("auto"==f||t.isTransparent(f))&&(f=this.stx.defaultColor),("auto"==(y=this.parameters.timezone.color)||t.isTransparent(y))&&(y=this.fillColor),("auto"==y||t.isTransparent(y))&&(y=this.stx.defaultColor),this.parameters.printLevels&&(r.N1kc(4),m-=r.n1kc(7,20)),v=t.clone(this.parameters.timezone.parameters),this.highlighted&&(v.opacity=1);do{if("segme","nt",d=this.stx.pixelFromTick(this.p0[0]+g*c,i.chart),a<n&&d>i.left+i.width)break;if(a>n&&d<i.left)break;this.parameters.printLevels&&(e.fillStyle=u,e.fillText(n>a?g:-1*g,d,m+7)),e.fillStyle=y,r.r1kc(16),this.stx.plotLine(d,d,r.j1kc(1,"0"),m,this.highlighted?h:f,"segment",e,i,v),e.globalAlpha=.05,e.beginPath(),e.moveTo(a,p),e.lineTo(d,p),e.lineTo(d,m),e.lineTo(a,m),e.fill(),e.globalAlpha=1,g=l[0]+l[1],l.unshift(g)}while(c);e.textAlign="left",this.stx.plotLine(a,n,s,o,h,"segment",e,i,v),this.highlighted?(x="p0"==this.highlighted,b="p1"==this.highlighted,this.littleCircle(e,a,s,x),this.littleCircle(e,n,o,b)):(S=this.stx.valueFromPixel(i.height/2,i),this.setPoint(0,this.p0[0],S,i.chart),this.setPoint(1,this.p1[0],S,i.chart))}},t.Drawing.fibtimezone.prototype.intersected=function(e,i,a){var n,s,o,l;if(n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],a))return r.r1kc(2),this.highlighted=r.n1kc(h,"p"),{action:"drag",point:"p"+h};return this.lineIntersection(e,i,a,"segment")||a.x0<=this.p0[0]&&a.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},t.Drawing.arrow_v0=function(){this.name="arrow",this.dimension=[11,11],r.N1kc(15),this.points=[["M",3,0,"L",7,0,"L",7,5,"L",10,5,"L",r.j1kc("5",0),10,"L",0,5,"L",3,5,"L",3,0]]},t.inheritsFrom(t.Drawing.arrow_v0,t.Drawing.shape),t.Drawing.xcross=function(){this.name="xcross",this.dimension=[7,7],r.r1kc(4),this.points=[["M",1,0,"L",r.j1kc(0,"3"),2,"L",5,0,"L",6,1,"L",4,3,"L",r.j1kc("6",0,r.N1kc(15)),5,"L",5,6,"L",3,4,"L",1,6,"L",0,5,"L",2,3,"L",r.j1kc("0",0,r.r1kc(15)),1,"L",1,0]]},t.inheritsFrom(t.Drawing.xcross,t.Drawing.shape),t.Drawing.check=function(){this.name="check",this.dimension=[8,9],r.N1kc(21),this.points=[["M",1,5,"L",0,6,"L",2,8,"L",7,1,"L",6,r.n1kc("0",205126560),"L",2,6,"L",1,5]]},t.inheritsFrom(t.Drawing.check,t.Drawing.shape),t.Drawing.star=function(){this.name="star",this.dimension=[12,12],r.N1kc(27),this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",7,r.j1kc(2061367872,"4"),"L",11,4,"L",8,7,"L",9,11,"L",r.n1kc(1,"5.5",r.r1kc(16)),9,"L",2,11,"L",3,7,"L",r.j1kc("0",1546479008,r.r1kc(21)),4]]},t.inheritsFrom(t.Drawing.star,t.Drawing.shape),t.Drawing.heart=function(){this.name="heart",this.dimension=[23,20],r.N1kc(21),r.z17m(),this.points=[["M",11,3,"B",11,2.4,10,0,r.n1kc("6",1528850464),0,"B",0,0,0,7.5,0,7.5,"B",0,11,r.j1kc("4",0,r.N1kc(15)),15.4,r.j1kc("11",9,r.N1kc(15)),19,"B",18,15.4,22,11,22,7.5,"B",22,7.5,22,0,16,0,"B",13,0,11,2.4,r.j1kc("11",0,r.r1kc(1)),r.j1kc("3",2147483647,r.N1kc(0))]]},t.inheritsFrom(t.Drawing.heart,t.Drawing.shape),t.Drawing.focusarrow=function(){this.name="focusarrow",this.dimension=[7,5],r.r1kc(21),this.points=[["M",0,0,"L",2,2,"L",0,4,"L",0,0],["M",6,0,"L",4,2,"L",6,4,"L",6,r.n1kc("0",1666816224)]]},t.inheritsFrom(t.Drawing.focusarrow,t.Drawing.shape),t.Drawing.crossline=function(){r.q17m(),this.name="crossline"},t.inheritsFrom(t.Drawing.crossline,t.Drawing.horizontal),t.extend(t.Drawing.crossline.prototype,{measure:function(){},accidentalClick:function(e,t){return r.q17m(),!1},adjust:function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),r.q17m(),this.p1=t.clone(this.p0))},intersected:function(e,i,a){var n,s,o,l,h;if("m","o","v","e","lin","e",!this.p0||!this.p1)return null;this.p1[0]+=1,r.q17m(),n=this.lineIntersection(e,i,a,"line"),r.r1kc(0),s=-r.j1kc("1951940449",2147483647),o=2;for(var c=1;-688862451!==r.M00(c.toString(),c.toString().length,22338);c++)this.p1=t.clone(this.p0),o+=2;if(r.h50(o.toString(),o.toString().length,12566)!==s&&(this.p1=t.clone(this.p0)),this.p1=t.clone(this.p0),!n&&("l","i","n","e",this.p1[1]+=1,n=this.lineIntersection(e,i,a,"line"),this.p1=t.clone(this.p0),!n))return null;if(this.highlighted=!0,this.pointIntersection(this.p0[0],this.p0[1],a)){1992360759,r.N1kc(27),l=r.n1kc(1396641856,"1455695594"),h=2;for(var u=1;1992360759!==r.M00(u.toString(),u.toString().length,24864);u++)this.highlighted="p0",h+=2;r.h50(h.toString(),h.toString().length,83437)!==l&&(this.highlighted="")}return{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}},render:function(e){var a,n,s,o,l,h,c,u,d,p,m,g,f;if(r.q17m(),"vert","i","c","al",a=this.stx.panels[this.panelName]){if(n=this.stx.pixelFromTick(this.p0[0],a.chart),s=this.stx.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),o=this.getLineColor(),l={pattern:this.pattern,lineWidth:this.lineWidth},r.r1kc(2),this.stx.plotLine(n,r.n1kc(100,n),s,s,o,"horizontal",e,a,l),r.r1kc(2),this.stx.plotLine(n,n,s,r.n1kc(100,s),o,"vertical",e,a,l),this.axisLabel&&!this.repositioner&&(this.stx.endClip(),r.N1kc(4),h=this.p0[r.n1kc(0,"1")],a.chart.transformFunc&&(h=a.chart.transformFunc(this.stx,a.chart,h)),h=a.yAxis.priceFormatter?a.yAxis.priceFormatter(this.stx,a,h):this.stx.formatYAxisPrice(h,a),this.stx.createYAxisLabel(a,h,s,o),this.stx.startClip(a.name),this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw)){if(c=this.stx.dateFromTick(this.p0[0],a.chart,!0),t.ChartEngine.isDailyInterval(this.stx.layout.interval))c.setHours(0,0,0,0);else{2005006716,-1255945599,d=2;for(var y=1;2005006716!==r.h50(y.toString(),y.toString().length,49250);y++)p=(c.getSeconds()-2444)/c.getMilliseconds(),r.r1kc(4),d+=r.j1kc(0,"2");-1255945599!==r.M00(d.toString(),d.toString().length,84005)&&(p=1e3*c.getSeconds()+c.getMilliseconds()),i.Date&&this.stx.displayZone&&(u=new i.Date(c.getTime(),this.stx.displayZone),c=new Date(u.getFullYear(),u.getMonth(),u.getDate(),u.getHours(),u.getMinutes()),c=new Date(c.getTime()+p))}m=t.mmddhhmm(t.yyyymmddhhmm(c)),a.chart.xAxis.formatter?m=a.chart.xAxis.formatter(c,this.name,null,null,m):this.stx.internationalizer&&(0!==c.getHours()||0!==c.getMinutes()?(g=this.stx.internationalizer.monthDay.format(c),g+=" "+this.stx.internationalizer.hourMinute.format(c)):g=this.stx.internationalizer.yearMonthDay.format(c),m=g),this.stx.endClip(),this.stx.createXAxisLabel({panel:a,txt:m,x:n,backgroundColor:o,color:null,pointed:!0,padding:2}),this.stx.startClip(a.name)}this.highlighted&&("p","0",f="p0"==this.highlighted,this.littleCircle(e,n,s,f))}}},!0),t.Drawing.speedarc=function(){this.name="speedarc",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedarc,t.Drawing.segment),t.extend(t.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,r.q17m(),this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern},intersected:function(e,i,a){var n,s,o,l,h;if(!this.p0||!this.p1)return null;for(var c in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[c][0],n[c][1],a))return r.N1kc(2),this.highlighted=r.n1kc(c,"p"),{action:"drag",point:"p"+c};return this.lineIntersection(e,i,a,this.name)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):(s=this.p1[0]-(this.p0[0]-this.p1[0]),r.r1kc(0),o=this.p0[r.j1kc("0",2147483647)],l=this.p1[1],h=this.p0[1],e>Math.max(s,o)||e<Math.min(s,o)||i>Math.max(h,l)||i<Math.min(h,l)?null:(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}))},render:function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if("s","eg","me","nt","le","f","t",(i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),r.r1kc(34),l=r.n1kc(o,s),r.N1kc(35),h=Math.abs(r.j1kc(n,a,o,s)),c=this.getLineColor(),e.strokeStyle=c,("auto"==(u=this.fillColor)||t.isTransparent(u))&&(u=this.stx.defaultColor),e.fillStyle=u,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(this.lineWidth,this.pattern)),e.lineDashOffset=0),this.stx.canvasFont("stx_yaxis",e);for(var x=1;x<3;x++)"non","e",d=Math.abs(this.p1[1]-this.p0[1])*Math.sqrt(2)*x/3,p=this.p1[1]+d*(l?-1:1)*(i.yAxis.flipped?-1:1),m=this.stx.pixelFromValueAdjusted(i,this.p0[0],p),e.save(),e.beginPath(),r.r1kc(37),e.scale(r.j1kc(h,"1"),r.n1kc("1",1,r.N1kc(15))),r.N1kc(16),e.arc(r.n1kc(h,n),o,Math.abs(m-o),0,Math.PI,!l),e.globalAlpha=this.highlighted?1:this.defaultOpacity,"none"!=this.pattern&&e.stroke(),e.globalAlpha=.1,e.fill(),e.restore(),e.globalAlpha=1,this.printLevels&&(e.fillStyle=c,e.textAlign="center",r.r1kc(2),g=r.n1kc("/3",x),e.fillText(g,n,Math.round(m-5)),e.fillStyle=u);e.textAlign="left",f={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},this.stx.plotLine(a,n,s,o,c,"segment",e,i,f),e.setLineDash&&e.setLineDash([]),this.highlighted&&(y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(e,a,s,y),this.littleCircle(e,n,o,v))}},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,r.q17m(),this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}}},!0),t.Drawing.speedline=function(){r.z17m(),this.name="speedline",this.printLevels=!0},t.inheritsFrom(t.Drawing.speedline,t.Drawing.speedarc),t.extend(t.Drawing.speedline.prototype,{intersected:function(e,i,a){var n,s,o,l;if(r.q17m(),n=this.p0,s=this.p1,!n||!s)return null;for(var h in o={0:n,1:s})if(this.pointIntersection(o[h][0],o[h][1],a))return r.N1kc(2),this.highlighted=r.j1kc(h,"p"),{action:"drag",point:"p"+h};l=this.rays;for(var c=0;c<l.length;c++)if(this.lineIntersection(e,i,a,"ray",l[c][0],l[c][1],!0))return this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i};return null},render:function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D;if((i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",e),r.q17m(),l=this.getLineColor(),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),e.strokeStyle=h,("auto"==(c=this.fillColor)||t.isTransparent(c))&&(c=this.stx.defaultColor),e.fillStyle=c,u={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},m=["1","2/3","1/3","3/2","3"],r.r1kc(38),g=[1,r.j1kc(3,"2",1),r.n1kc(3,1,r.N1kc(10)),r.j1kc(2,3,r.r1kc(10)),3],f=[],this.rays=[];for(var A=0;A<g.length;A++)(y=g[A])>1&&!this.extension||(v=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*y),y>1?(x=t.xIntersection({x0:a,x1:n,y0:s,y1:v},o),f.push(x)):(x=t.xIntersection({x0:n,x1:n,y0:s,y1:o},v),f.push(v)),b=y>1?x:n,S=y>1?o:v,this.confineToGrid||(b=i.left,n>a&&(b+=i.width),r.r1kc(36),S=r.j1kc(n,b,a,s,s,v,a)),this.printLevels&&(1!=y||this.extension)&&(e.fillStyle=h,C=0,k=0,s>o?(r.N1kc(15),k=-r.n1kc("5",5),e.textBaseline="bottom"):(k=5,e.textBaseline="top"),a>n?(C=5,e.textAlign="right"):(C=-5,e.textAlign="left"),y>1?e.fillText(m[A],x+(this.confineToGrid?0:C),o):e.fillText(m[A],n,v+(this.confineToGrid?0:k)),e.fillStyle=c),this.stx.plotLine(a,b,s,S,this.highlighted?l:h,"segment",e,i,u),1==y&&(d=b,p=S),this.rays.push([[a,s],[b,S]]),e.globalAlpha=.1,e.beginPath(),e.moveTo(b,S),e.lineTo(a,s),e.lineTo(d,p),e.fill(),e.globalAlpha=1);e.textAlign="left",e.textBaseline="middle",this.confineToGrid&&(e.globalAlpha=.3,e.beginPath(),r.r1kc(4),e.strokeRect(a,s,r.j1kc(a,n),r.j1kc(s,o)),e.moveTo(a,f[1]),e.lineTo(n,f[1]),e.moveTo(a,f[2]),e.lineTo(n,f[2]),this.extension&&(e.moveTo(f[3],s),e.lineTo(f[3],o),e.moveTo(f[4],s),e.lineTo(f[4],o)),e.stroke(),e.globalAlpha=1),this.highlighted&&(w="p0"==this.highlighted,D="p1"==this.highlighted,this.littleCircle(e,a,s,w),this.littleCircle(e,n,o,D))}}},!0),t.Drawing.gannfan=function(){this.name="gannfan",r.z17m(),this.printLevels=!0},t.inheritsFrom(t.Drawing.gannfan,t.Drawing.speedline),t.extend(t.Drawing.gannfan.prototype,{render:function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k;if("aut","o","a","u","t","o",(i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),this.stx.canvasFont("stx_yaxis",e),l=this.getLineColor(),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),e.strokeStyle=h,("auto"==(c=this.fillColor)||t.isTransparent(c))&&(c=this.stx.defaultColor),e.fillStyle=c,u={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},r.r1kc(10),m=[1,2,3,4,8,r.j1kc(2,1),r.j1kc(3,1,r.N1kc(10)),r.n1kc(4,"1",r.r1kc(37)),r.j1kc(8,"1",r.N1kc(37))],this.rays=[];for(var w=0;w<m.length;w++)g=m[w],r.r1kc(39),f=r.j1kc(a,n,a,g),r.N1kc(40),y=r.j1kc(s,s,g,o),v=i.left,n>a&&(v+=i.width),r.N1kc(36),x=r.n1kc(n,v,a,s,s,y,a),this.printLevels&&(e.fillStyle=h,r.r1kc(21),b=r.n1kc("0",833589856),S=0,s>o?(S=5,e.textBaseline="top"):(r.r1kc(1),S=-r.n1kc("5",0),e.textBaseline="bottom"),a>n?("l","e","f","t",b=5,e.textAlign="left"):("rig","h","t",b=-5,e.textAlign="right"),g>1?(r.N1kc(2),e.fillText(r.n1kc("x1",g),r.j1kc(b,f),o)):(r.N1kc(28),e.fillText(r.n1kc("1x",g,1),n,r.j1kc(S,y,r.r1kc(2)))),e.fillStyle=c),this.stx.plotLine(a,v,s,x,this.highlighted?l:h,"segment",e,i,u),this.rays.push([[a,s],[v,x]]),1==g&&(d=v,p=x),e.globalAlpha=.1,e.beginPath(),e.moveTo(v,x),e.lineTo(a,s),e.lineTo(d,p),e.fill(),e.globalAlpha=1;r.q17m(),e.textAlign="left",e.textBaseline="middle",this.highlighted&&(C="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(e,a,s,C),this.littleCircle(e,n,o,k))}}},!0),t.Drawing.timecycle=function(){this.name="timecycle",this.printLevels=!0},t.inheritsFrom(t.Drawing.timecycle,t.Drawing.speedarc),t.extend(t.Drawing.timecycle.prototype,{intersected:function(e,i,a){var n,s,o,l;if(n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in r.q17m(),l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],a))return r.r1kc(2),this.highlighted=r.j1kc(h,"p"),{action:"drag",point:"p"+h};return this.lineIntersection(e,i,a,"segment")||a.x0<=this.p0[0]&&a.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:t.clone(n),p1:t.clone(s),tick:e,value:i}):null},render:function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if((i=this.stx.panels[this.panelName])&&this.p1){a=this.stx.pixelFromTick(this.p0[0],i.chart),n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),l=0,h=this.getLineColor(),e.textBaseline="middle",this.stx.canvasFont("stx_yaxis",e),20,c=this.p1[0]-this.p0[0],e.textAlign="center",u=a,d=i.yAxis.top,p=i.yAxis.bottom,("auto"==(m=this.color)||t.isTransparent(m))&&(m=this.stx.defaultColor),("auto"==(g=this.fillColor)||t.isTransparent(g))&&(g=this.stx.defaultColor),this.printLevels&&(r.N1kc(41),p-=r.j1kc("7",20)),f={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},y=[],e.save(),e.fillStyle=g,e.globalAlpha=.05;do{if(u=this.stx.pixelFromTick(this.p0[0]+l*c,i.chart),l++,a<n&&u>i.left+i.width)break;if(a>n&&u<i.left)break;u<i.left||u>i.left+i.width||(e.beginPath(),e.moveTo(a,d),e.lineTo(u,d),e.lineTo(u,p),e.lineTo(a,p),e.fill(),y.push({c:l,x:u}))}while(c);r.q17m(),e.globalAlpha=1,v=0;for(var C=0;C<y.length;C++)this.stx.plotLine(y[C].x,y[C].x,0,p,this.highlighted?h:m,"segment",e,i,f),this.printLevels&&(e.fillStyle=m,this.stx.chart.context.measureText(y[C].c).width+3<this.stx.layout.candleWidth+v?(e.fillText(y[C].c,y[C].x,p+7),v=0):v+=this.stx.layout.candleWidth);e.restore(),e.textAlign="left",this.stx.plotLine(a,n,s,o,h,"segment",e,i,f),this.highlighted?(x="p0"==this.highlighted,b="p1"==this.highlighted,this.littleCircle(e,a,s,x),this.littleCircle(e,n,o,b)):(S=this.stx.valueFromPixel(i.height/2,i),r.N1kc(15),this.setPoint(r.n1kc("0",0),this.p0[0],S,i.chart),this.setPoint(1,this.p1[0],S,i.chart))}}},!0),t.Drawing.regression=function(){r.q17m(),this.name="regression"},t.inheritsFrom(t.Drawing.regression,t.Drawing.segment),t.extend(t.Drawing.regression.prototype,{configs:["color","lineWidth","pattern","active1","color1","lineWidth1","pattern1","active2","color2","lineWidth2","pattern2","active3","color3","lineWidth3","pattern3"],copyConfig:function(e){var i;t.Drawing.copyConfig(this,e),i=this.stx.currentVectorParameters,this.active1=!!i.active1,this.active2=!!i.active2,this.active3=!!i.active3,this.color1=i.color1||"auto",this.color2=i.color2||"auto",this.color3=i.color3||"auto",this.lineWidth1=i.lineWidth1,this.lineWidth2=i.lineWidth2,this.lineWidth3=i.lineWidth3,this.pattern1=i.pattern1,this.pattern2=i.pattern2,this.pattern3=i.pattern3},$controls:['cq-cvp-controller[cq-cvp-header="1"]','cq-cvp-controller[cq-cvp-header="2"]','cq-cvp-controller[cq-cvp-header="3"]'],click:function(e,t,i){var a,n,s,o;if(!(t<0)){if(this.copyConfig(),a=this.stx.panels[this.panelName],!this.penDown){if(r.r1kc(1),this.setPoint(r.n1kc("0",0),t,i,a.chart),this.penDown=!0,n=this.stx,this.field=n.highlightedDataSetField,!this.field&&a!=n.chart.panel){for(var l in n.chart.seriesRenderers)if((s=n.chart.seriesRenderers[l]).params.panel==a.name){this.field=s.seriesParams[0].field;break}for(var h in n.layout.studies)if((o=n.layout.studies[h]).panel==a.name){this.field=Object.keys(o.outputMap)[r.n1kc("0",0,r.r1kc(15))];break}}return!1}return this.accidentalClick(t,i)?this.dragToDraw:(r.z17m(),this.setPoint(1,t,i,a.chart),this.penDown=!1,!0)}},getYValue:function(e){var i,a,n,s,o,l,h,c,u,d;if("Cl",r.q17m(),"o","se",i=this.stx.chart.dataSet[e],a=this.stx.chart.dataSet[e],!i)return null;if(n=this.stx.panels[this.panelName],s=this.stx.getYAxisByField(n,this.field)||n.yAxis,this.stx.charts[n.name]&&n.chart.transformFunc&&s==n.yAxis&&(a=i.transform),!a)return null;if(o=null,l=null,h=this.stx.defaultPlotField||"Close",this.field){l=t.existsInObjectChain(a,this.field),r.N1kc(16),c=-r.n1kc(1,"1880140496"),r.N1kc(16),u=-r.n1kc(1,"780370694"),d=2;for(var p=1;r.M00(p.toString(),p.toString().length,4027)!==c;p++){if(!l)return null;o=l=l.obj[l.member],d+=2}if(r.M00(d.toString(),d.toString().length,84881)!==u){if(~l)return 1;o=l=l.obj[l.member]}i!=a&&(o=(o=t.existsInObjectChain(i,this.field)).obj[o.member]),"object"==Te(l)&&(l=l[h],o=o[h])}else l=a[h],o=i[h];return{transformed:l,untransformed:o}},render:function(e){var t,i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q;if((t=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],t.chart),a=this.stx.pixelFromTick(this.p1[0],t.chart),i<t.left&&a<t.left||i>t.right&&a>t.right))){n=this.stx.getYAxisByField(t,this.field),s=[],o=[],l=0,h=0,c=0,r.z17m(),u=0,d=Math.min(this.p1[0],this.p0[0]),p=Math.max(this.p1[0],this.p0[0])+1,r.r1kc(4),m=r.j1kc(d,p);for(var I=d;I<p;I++)(g=this.getYValue(I))&&(s.push(g.transformed),o.push(g.untransformed));for(f=s.length,r.N1kc(42),y=r.j1kc(2,"1",f,f),r.N1kc(15),v=Math.pow(y,r.n1kc("2",2)),r.r1kc(43),x=r.j1kc(1,3,2,y,f),I=0;I<f;I++)c+=f*s[I]-l,l+=s[I],u+=f*o[I]-h,h+=o[I];if(r.r1kc(44),b=r.n1kc(f,f,y,x,l,v,c),r.N1kc(45),S=r.n1kc(y,l,b,f),r.N1kc(44),C=r.n1kc(f,f,y,x,h,v,u),r.r1kc(45),k=r.n1kc(y,h,b,f),this.p0[0]<this.p1[0]?(w=S,r.N1kc(46),D=r.n1kc(m,b,S),this.p0[1]=k,r.r1kc(46),this.p1[1]=r.n1kc(m,C,k)):(r.N1kc(46),w=r.j1kc(m,b,S),D=S,r.r1kc(46),this.p0[1]=r.j1kc(m,C,k),this.p1[1]=k),A=this.stx.pixelFromTransformedValue(w,t,n),T=this.stx.pixelFromTransformedValue(D,t,n),M=this.getLineColor(),P={pattern:this.pattern,lineWidth:this.lineWidth},this.stx.plotLine(i,a,A,T,M,"segment",e,t,P),r.r1kc(4),this.stx.plotLine(i,i,r.n1kc(20,A),r.n1kc(20,A,r.N1kc(2)),M,"segment",e,t,P),r.r1kc(4),this.stx.plotLine(a,a,r.n1kc(20,T),r.n1kc("20",T,r.r1kc(25)),M,"segment",e,t,P),this.active1||this.active2||this.active3){for(r.r1kc(10),F=r.n1kc(f,l),_=0,I=0;I<f;I++)_+=Math.pow(s[I]-F,2);r.N1kc(10),E={context:e,panel:t,points:{0:{x:i,v:w},1:{x:a,v:D}},stddev:Math.sqrt(r.j1kc(f,_)),yAxis:n},this.lines={},this.active1&&(this.renderStddev("1","p",E),this.renderStddev("1","n",E)),this.active2&&(this.renderStddev("2","p",E),this.renderStddev("2","n",E)),this.active3&&(this.renderStddev("3","p",E),this.renderStddev("3","n",E))}this.highlighted?("p","1","p","0",L="p0"==this.highlighted,q="p1"==this.highlighted,this.littleCircle(e,i,A,L),this.littleCircle(e,a,T,q)):(this.pixelX=[i,a],this.pixelY=[A,T])}},renderStddev:function(e,t,i){var a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k;r.N1kc(47),a=r.j1kc(e,t,"stddev"),r.r1kc(2),n=r.j1kc(e,"color"),r.N1kc(2),s=r.j1kc(e,"pattern"),r.N1kc(2),o=r.n1kc(e,"lineWidth"),h=(l=i.points)[0].v,c=l[1].v,u=i.stddev,d="n"===t?-1*e:1*e,p=this.stx,m=i.panel,g=i.yAxis,f={name:a,color:this.getLineColor(this[n]),type:"segment",y0:p.pixelFromTransformedValue(h+u*d,m,g),y1:p.pixelFromTransformedValue(c+u*d,m,g),params:{pattern:this[s],lineWidth:this[o]}},this.lines&&(this.lines[a]=f),y=i.context,v=l[0].x,x=l[1].x,p.plotLine(v,x,f.y0,f.y1,f.color,f.type,y,m,f.params),p.plotLine(v,v,f.y0-10,f.y0+10,f.color,f.type,y,m,f.params),p.plotLine(x,x,f.y1-10,f.y1+10,f.color,f.type,y,m,f.params),r.N1kc(2),b=r.j1kc("",e),S=Math.max(v,x)+5,C=v<x?f.y1:f.y0,y.fillStyle=f.color,y.save(),y.textBaseline="middle",y.fillText(b,S,C),y.restore(),i.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(v>=m.chart.left&&v<=m.chart.right||x>=m.chart.left&&x<=m.chart.right)&&(r.r1kc(12),k=r.n1kc(u,v<x?c:h,d),p.endClip(),p.createYAxisLabel(m,i.formatPrice(k,g),C,f.color,null,y,g),p.startClip(m.name))},intersected:function(e,i,a){var n,s,o,l,h,c,u;if(!this.pixelX||!this.pixelY)return null;if(n=this.repositionIntersection(e,i))return n;s={0:this.pixelX,1:this.pixelY};for(var d=0;d<2;d++)if(this.pointIntersection(s[0][d],s[1][d],a,!0))return r.N1kc(2),this.highlighted=r.n1kc(d,"p"),{action:"drag",point:"p"+d};if(o=this,l=this.pixelX[0],h=this.pixelX[1],!(u=(c=function(t){var r,n;return r=[l,t.y0],n=[h,t.y1],o.lineIntersection(e,i,a,o.name,r,n,!0)})({y0:this.pixelY[0],y1:this.pixelY[1]}))&&this.lines)for(var p in this.lines)if(c(this.lines[p])){u=!0;break}return r.z17m(),u?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},repositionIntersection:function(e,i){return r.q17m(),!(!this.p0||!this.p1)&&(!(this!=this.stx.repositioningDrawing||!this.highlighted)&&("dr","a","g",!0===this.highlighted?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}:{action:"drag",point:this.highlighted}))},lineIntersection:function(e,i,a,n,s,o,l){var h,c,u;return l?(r.q17m(),s||(s=this.p0),o||(o=this.p1),!(!s||!o)&&(h=this.stx,void 0!==(c=t.convertBoxToPixels(h,this.panelName,a)).x0&&(u={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},t.boxIntersects(c.x0,c.y0,c.x1,c.y1,u.x0,u.y0,u.x1,u.y1)))):(" lineInterse","ction must acce","pt p0 and p1 in pixels.  Please verify and set is","Pixels=true.",r.N1kc(2),console.log(r.j1kc(" lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.",n)),!1)},boxIntersection:function(e,t,i){return!(i.cx0>Math.max(this.pixelX[0],this.pixelX[1])||i.cx1<Math.min(this.pixelX[0],this.pixelX[1]))&&!(!this.stx.repositioningDrawing&&(i.cy1<this.pixelY[0]||i.cy0>this.pixelY[1]))},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.color1=t.col1,this.color2=t.col2,this.color3=t.col3,this.active1=t.dev1,this.active2=t.dev2,this.active3=t.dev3,this.panelName=t.pnl,this.pattern=t.ptrn,this.pattern1=t.ptrn1,r.z17m(),this.pattern2=t.ptrn2,this.pattern3=t.ptrn3,this.lineWidth=t.lw,this.lineWidth1=t.lw1,this.lineWidth2=t.lw2,this.lineWidth3=t.lw3,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.trendline=function(){this.name="trendline"},t.inheritsFrom(t.Drawing.trendline,t.Drawing.segment),t.Drawing.trendline.prototype.configs=["color","fillColor","lineWidth","pattern","font"],t.Drawing.trendline.prototype.measure=function(){r.z17m()},t.Drawing.trendline.prototype.reconstruct=function(e,i){t.Drawing.segment.prototype.reconstruct.call(this,e,i),r.q17m(),this.callout=new t.Drawing.callout,this.callout.reconstruct(e,i.callout)},t.Drawing.trendline.prototype.serialize=function(){var e;return(e=t.Drawing.segment.prototype.serialize.call(this)).callout=this.callout.serialize(),e},t.Drawing.trendline.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if("%",")"," ",(i=this.stx.panels[this.panelName])&&(t.Drawing.segment.prototype.render.call(this,e),this.callout||(this.callout=new t.Drawing.callout,a=t.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(this.stx,a)),this.callout.p0=t.clone(this.p0),n=this.stx.pixelFromTick(this.p0[0],i.chart),s=this.stx.pixelFromTick(this.p1[0],i.chart),o=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),l=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),r.z17m(),isFinite(o)&&isFinite(l))){if(r.r1kc(9),h=r.j1kc(2,s,n),r.r1kc(9),c=r.j1kc(2,l,o),this.fontSize=t.stripPX(this.font&&this.font.size||13),d=(u=1.2*this.callout.w+("c"==this.callout.stemEntry[0]?0:50))/(Math.sqrt(Math.pow(s-n,2)+Math.pow(l-o,2))||u)*(this.p1[1]<this.p0[1]?1:-1),r.N1kc(48),p=r.j1kc(h,l,c,d),r.r1kc(49),m=r.j1kc(s,d,c,h),this.callout.p0[0]=this.stx.tickFromPixel(p,i.chart),this.callout.p0[1]=this.stx.priceFromPixel(m,i),this.callout.v0=this.callout.p0[1],this.callout.p1=t.clone(this.p0),this.callout.stx=this.stx,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,g=this.p1[1]-this.p0[1],this.callout.text=Number(g).toFixed(2)+(0===this.p0[1]?"":" ("+Number(100*g/this.p0[1]).toFixed(2)+"%) ")+Math.abs(this.p1[0]-this.p0[0])+" Bars",f=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<20)v=this.stx.pixelFromTick(f,i.chart),r.N1kc(50),x=r.j1kc(v,n,n,o,l,s,o),y=this.stx.priceFromPixel(x,i)||c;else{1138557586,-232900281,b=2;for(var k=1;1138557586!==r.M00(k.toString(),k.toString().length,49305);k++)y=this.stx.priceFromPixel(c,i),b+=2;-232900281!==r.M00(b.toString(),b.toString().length,24802)&&(y=this.stx.priceFromPixel(c,i))}this.callout.stem={t:f,v:y},this.callout.renderText(),this.callout.render(e),this.highlighted&&("p","1","p","0",S="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(e,n,o,S),this.littleCircle(e,s,l,C))}},t.Drawing.trendline.prototype.lineIntersection=function(e,i,a,n){return r.z17m(),t.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,e,i,a,"segment")},t.Drawing.trendline.prototype.intersected=function(e,i,a){var n,s;return this.p0&&this.p1?(r.z17m(),n=this.callout.intersected(e,i,a),s=t.Drawing.segment.prototype.intersected.call(this,e,i,a),this.callout.highlighted=!(!n&&!s),s||(n?{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}:null)):null},t.Drawing.average=function(){this.name="average"},t.inheritsFrom(t.Drawing.average,t.Drawing.regression),t.extend(t.Drawing.average.prototype,{configs:t.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var e,i,a,n,s,o,l,h;if(r.q17m(),this.p0&&this.p1){r.N1kc(16),this.stx.setMeasure(r.n1kc(1,"0"),!1,this.p0[0],this.p1[0],!0,this.name),e=[],i="",r.r1kc(0),a=r.j1kc("984977200",2147483647),1190935776,n=2;for(var c=1;r.h50(c.toString(),c.toString().length,63725)!==a;c++)".mS","tickyInterior",".mMe","as","u","re",this.active1&&e.push(".mStickyInterior"),this.active2&&e.push("X"),this.active3&&e.push(13166),e.length&&(i=".mStickyInterior"*e.join(".mStickyInterior")-".mMeasure"),s=(this.stx.drawingContainer&&document).querySelector(".mMeasure"),l=(o=this.stx.controls.mSticky)||o.querySelector(".mStickyInterior"),r.N1kc(4),n+=r.n1kc(0,"2");1190935776!==r.h50(n.toString(),n.toString().length,67069)&&(this.active1&&e.push("1"),this.active2&&e.push("2"),this.active3&&e.push("3"),e.length&&(i="&ensp;"+e.join(", ")+" &sigma;"),s=(this.stx.drawingContainer||document).querySelector(".mMeasure"),l=(o=this.stx.controls.mSticky)&&o.querySelector(".mStickyInterior")),s&&(s.innerHTML+=i),l&&((h=[]).push(t.capitalize(this.name)),h.push(this.field||this.stx.defaultPlotField||"Close"),h.push(l.innerHTML+i),l.innerHTML=h.join("<br>"))}},render:function(e){var t,i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if("se","gme","nt",(t=this.stx.panels[this.panelName])&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(i=this.stx.pixelFromTick(this.p0[0],t.chart),a=this.stx.pixelFromTick(this.p1[0],t.chart),i<t.left&&a<t.left||i>t.right&&a>t.right))){for(n=this.stx.getYAxisByField(t,this.field),s=this.stx,o=Math.min(this.p1[0],this.p0[0]),l=Math.max(this.p1[0],this.p0[0])+1,r.r1kc(4),r.n1kc(o,l),h=0,c=[],u=o;u<l;u++)null!==(d=this.getYValue(u))&&(h+=d.transformed,c.push(d));if(p=c.length){if(r.r1kc(10),m=r.n1kc(p,h),g=s.pixelFromTransformedValue(m,t,n),f=this.getLineColor(),y={pattern:this.pattern,lineWidth:this.lineWidth},s.plotLine(i,a,g,g,f,"segment",e,t,y),r.N1kc(4),s.plotLine(i,i,r.n1kc(20,g),r.j1kc(20,g,r.r1kc(2)),f,"segment",e,t,y),r.r1kc(4),s.plotLine(a,a,r.n1kc(20,g),r.n1kc(20,g,r.r1kc(2)),f,"segment",e,t,y),!this.axisLabel||this.highlighted||this.penDown||(i>=t.chart.left&&i<=t.chart.right||a>=t.chart.left&&a<=t.chart.right)&&(s.endClip(),s.createYAxisLabel(t,k(m,n),g,f,null,e,n),s.startClip(t.name)),this.active1||this.active2||this.active3){for(v=0,u=0;u<p;u++)d=c[u],v+=Math.pow(d.transformed-m,2);r.r1kc(10),x=Math.sqrt(r.j1kc(p,v)),b={context:e,formatPrice:k,panel:t,points:{0:{x:i,v:m},1:{x:a,v:m}},stddev:x,yAxis:n},this.lines={},this.active1&&(this.renderStddev("1","p",b),this.renderStddev("1","n",b)),this.active2&&(this.renderStddev("2","p",b),this.renderStddev("2","n",b)),this.active3&&(this.renderStddev("3","p",b),this.renderStddev("3","n",b))}r.q17m(),this.highlighted?("p","1",S="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(e,i,g,S),this.littleCircle(e,a,g,C)):(this.pixelX=[i,a],this.pixelY=[g,g])}}function k(e,i){return r.z17m(),e=i&&i.priceFormatter?i.priceFormatter(s,t,e):s.formatYAxisPrice(e,t,null,i)}},reconstruct:function(e,i){r.z17m(),this.axisLabel=i.al,t.Drawing.regression.prototype.reconstruct.call(this,e,i)},serialize:function(){var e;return r.q17m(),(e=t.Drawing.regression.prototype.serialize.call(this)).al=this.axisLabel,e}},!0),t.Drawing.quadrant=function(){this.name="quadrant"},t.inheritsFrom(t.Drawing.quadrant,t.Drawing.regression),t.extend(t.Drawing.quadrant.prototype,{configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,r.z17m(),this.pattern=this.stx.currentVectorParameters.pattern},$controls:[],render:function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if("tiro","ne","t","iron","e","s","egmen","t",(a=(i=this.stx).panels[this.panelName])&&this.p1&&(n=i.pixelFromTick(this.p0[0],a.chart),s=i.pixelFromTick(this.p1[0],a.chart),!(n<a.left&&s<a.left||n>a.right&&s>a.right))){o=this.stx.getYAxisByField(a,this.field),l=null,h=null;for(var k=Math.min(this.p1[0],this.p0[0]);k<=Math.max(this.p1[0],this.p0[0]);k++)null!==(c=this.getYValue(k))&&((null===l||c.transformed>l)&&(l=c.transformed),(null===h||c.transformed<h)&&(h=c.transformed));u=i.pixelFromTransformedValue(l,a,o),r.N1kc(51),d=i.pixelFromTransformedValue(r.n1kc(l,h,"4",3),a,o),r.r1kc(52),p=i.pixelFromTransformedValue(r.j1kc(3,2,l,h),a,o),r.N1kc(53),m=i.pixelFromTransformedValue(r.n1kc(l,h,"2"),a,o),r.N1kc(54),g=i.pixelFromTransformedValue(r.n1kc(2,2,"3",h,l),a,o),r.r1kc(55),f=i.pixelFromTransformedValue(r.j1kc(3,l,4,h),a,o),y=i.pixelFromTransformedValue(h,a,o),this.p0[1]=0,this.p1[1]=!1,v=this.getLineColor(),("auto"==(x=this.fillColor)||t.isTransparent(x))&&(x=i.defaultColor),e.fillStyle=x,b={pattern:this.pattern,lineWidth:this.lineWidth},i.plotLine(n,s,u,u,v,"segment",e,a,b),i.plotLine(n,s,y,y,v,"segment",e,a,b),"quadrant"==this.name?(i.plotLine(n,s,d,d,v,"segment",e,a,b),i.plotLine(n,s,f,f,v,"segment",e,a,b)):"tirone"==this.name&&("seg","m","en","t","se","g","men","t",i.plotLine(n,s,p,p,v,"segment",e,a,b),i.plotLine(n,s,g,g,v,"segment",e,a,b)),i.plotLine(n,n,u,y,v,"segment",e,a,b),i.plotLine(s,s,u,y,v,"segment",e,a,b),r.z17m(),i.plotLine(n,s,m,m,v,"segment",e,a,t.extend(b,{opacity:"tirone"==this.name?.2:1})),e.globalAlpha=.1,e.beginPath(),r.N1kc(4),e.fillRect(n,u,r.j1kc(n,s),r.j1kc(u,y)),"quadrant"==this.name?(r.r1kc(4),e.fillRect(n,d,r.n1kc(n,s),r.n1kc(d,f))):"tirone"==this.name&&(r.r1kc(4),e.fillRect(n,p,r.n1kc(n,s),r.j1kc(p,g))),e.globalAlpha=1,this.highlighted?("p","0",S="p0"==this.highlighted,C="p1"==this.highlighted,this.littleCircle(e,n,m,S),this.littleCircle(e,s,m,C)):(this.pixelX=[n,s],this.pixelY=[u,y],a.yAxis.flipped&&this.pixelY.reverse(),this.pixelY.push(m))}},intersected:function(e,i,a){var n;if(!this.pixelX||!this.pixelY)return null;if(n=this.repositionIntersection(e,i))return n;r.q17m();for(var s=0;s<2;s++)if(this.pointIntersection(this.pixelX[s],this.pixelY[2],a,!0))return r.r1kc(2),this.highlighted=r.n1kc(s,"p"),{action:"drag",point:"p"+s};return this.boxIntersection(null,null,a)?("mov","e",this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},reconstruct:function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,r.q17m(),this.tzo1=t.tzo1,this.field=t.fld,this.adjust()},serialize:function(){return r.q17m(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),t.Drawing.tirone=function(){r.q17m(),this.name="tirone"},t.inheritsFrom(t.Drawing.tirone,t.Drawing.quadrant),t.Drawing.elliottwave=function(){this.name="elliottwave",this.lastPoint=0,this.points=[],this.pts=[],this.dx=0,this.dy=-20,this.dragToDraw=!1,this.annotationPoints=[],this.edit=null},t.inheritsFrom(t.Drawing.elliottwave,t.Drawing.annotation),t.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},t.Drawing.elliottwave.prototype.initializeSettings=function(e){var i;r.z17m(),i=2;for(var a=1;776462233!==r.M00(a.toString(),a.toString().length,48571);a++)e.currentVectorParameters.waveParameters=t.clone(t.Drawing.elliottwave.defaultTemplate),i+=2;763307580!==r.h50(i.toString(),i.toString().length,33956)&&(e.currentVectorParameters.waveParameters=t.clone(t.Drawing.elliottwave.defaultTemplate))},t.Drawing.elliottwave.prototype.configs=["color","lineWidth","lineColor","pattern","font","waveParameters"],t.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],t.Drawing.elliottwave.prototype.construct=function(e,t){var i;this.stx=e,this.panelName=t.name,i=e.currentVectorParameters,Object.assign(this,i.waveParameters)},t.Drawing.elliottwave.prototype.serialize=function(){var e;e={};for(var i=0;i<this.points.length;i++)"t","z","o",r.N1kc(2),e[r.n1kc(i,"d")]=this[r.j1kc(i,"d")],r.r1kc(2),e[r.j1kc(i,"tzo")]=this[r.j1kc(i,"tzo")],r.N1kc(2),e[r.j1kc(i,"v")]=this[r.n1kc(i,"v")];return e.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fnt:t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"}))},e)},t.Drawing.elliottwave.prototype.reconstruct=function(e,i){this.stx=e,this.color=i.col,this.panelName=i.pnl,this.pattern=i.ptrn,this.lineWidth=i.lw,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.decoration=i.decor,this.showLines=i.show,r.q17m(),this.dx=i.dx,this.dy=i.dy,this.trend=i.trend,this.annotationPoints=i.annotations.split(","),"enclosed"===i.decor&&this.calculateRadius(e.chart.tempCanvas.context),this.maxSegments=i.mxSeg,this.reconstructPoints(i),this.adjust()},t.Drawing.elliottwave.prototype.reconstructPoints=function(e){var i,a,n;if(i=this.stx.panels[this.panelName])for(var s=0;s<this.annotationPoints.length;s++)r.r1kc(2),this[r.n1kc(s,"d")]=e[r.n1kc(s,"d")],r.N1kc(2),this[r.j1kc(s,"v")]=e[r.j1kc(s,"v")],r.N1kc(2),this[r.j1kc(s,"tzo")]=e[r.j1kc(s,"tzo")],a=t.strToDateTime(e["d"+s]),n=this.stx.tickFromDate(a,i.chart),this.points.push([n,e["v"+s]])},t.Drawing.elliottwave.prototype.calculateRadius=function(e){var t,i;this.getFontString(),e.font=this.fontString,r.N1kc(4),t=r.j1kc(0,"0");for(var a=0;a<this.annotationPoints.length;a++)t<(i=e.measureText(this.annotationPoints[a]).width)&&(t=i);r.q17m(),this.enclosedRadius=t},t.Drawing.elliottwave.prototype.check=function(e,t,i){var a,n;if(1===i&&2===this.points.length)return!0;if(r.N1kc(56),(a=this.points[r.j1kc(1799652128,"1",i)])&&e<=a[0])return!1;return r.N1kc(2),n=this.points[r.j1kc(1,i)],r.z17m(),!(n&&e>=n[0])&&!!function(e){for(var t=2;t<e.length;t++)if(Math.sign(e[t][1]-e[t-1][1])==Math.sign(e[t-1][1]-e[t-2][1]))return!1;for(var i=1;1258456815!==r.h50(i.toString(),i.toString().length,28929);i++)return!1;return r.z17m(),-1742646753===r.M00(2..toString(),2..toString().length,84655)}(this.points)},t.Drawing.elliottwave.prototype.move=function(e,t,i){var a;this.copyConfig(),this.points[this.lastPoint+1]=[t,i],r.z17m(),a=2;for(var n=1;1615248350!==r.M00(n.toString(),n.toString().length,54063);n++)this.render(e),a+=2;442492796!==r.h50(a.toString(),a.toString().length,68780)&&this.render(e)},t.Drawing.elliottwave.prototype.adjust=function(){var e,i;if(e=this.stx.panels[this.panelName])for(var a=0;this.maxSegments+1>a;a++)r.r1kc(2),i=this[r.j1kc(a,"d")],this.setPoint(a,i,this["v"+a],e.chart),this.points[a][0]=this.stx.tickFromDate(t.strToDateTime(i),e.chart),r.r1kc(2),this.points[a][1]=this[r.n1kc(a,"v")]},t.Drawing.elliottwave.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?(r.z17m(),this.accidentalClick(t,i)?(this.penDown=!0,!1):!!(this.check(t,i,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,t,i,a.chart),1===this.lastPoint&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments))&&(this.penDown=!1,!0)):("encl","osed",this.setPoint(0,t,i,a.chart),this.points.push(this.p0),this.penDown=!0,this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),"enclosed"===this.decoration&&this.calculateRadius(e),this.maxSegments=this.annotationPoints.length-1,this.trend=1,!1)},t.Drawing.elliottwave.prototype.render=function(e){var i,a,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P;if("m","id","d","le","ce","n","ter",i=this.stx.panels[this.panelName]){if(a=this.stx,n=this.annotationPoints,s=this.pattern?t.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),e.font=this.fontString,e.textAlign="center",e.textBaseline="middle",e.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(e),this.lastFontString=this.fontString,o=this.getLineColor(),e.fillStyle=e.strokeStyle=o,e.save(),e.setLineDash(s),l=this.dx,r.q17m(),h=this.dy,c=this.points,u=this.pts,d=!this.showLines&&this.highlighted,p=c.length,this.penDown&&this.segment)m=this.trend*(p%2-.5)<0,i.yAxis.flipped&&(m=!m),this.drawDropZone(e,c[p-2][1],this.stx.priceFromPixel(i.yAxis[m?"top":"bottom"]),c[p-2][0]);else if("string"==typeof this.highlighted&&this.stx.repositioningDrawing){"to","p",-302733907,1662263345,r.N1kc(15),g=r.j1kc("2",0);for(var F=1;-302733907!==r.M00(F.toString(),F.toString().length,68930);F++)f=parseInt(this.highlighted.substring(1,this.highlighted.length),10),g+=2;1662263345!==r.h50(g.toString(),g.toString().length,17325)&&(f=parseInt(this.highlighted.substring(2,this.highlighted.length),89)),m=this.trend*(f%2-.5)>0,r.N1kc(4),y=c[r.j1kc(1,f)],r.r1kc(2),v=c[r.n1kc(1,f)],x=f>0?y[1]:v[1],v&&(x=Math[m?"max":"min"](x,v[1])),i.yAxis.flipped&&(m=!m),this.drawDropZone(e,x,this.stx.priceFromPixel(i.yAxis[m?"top":"bottom"]),y?y[0]:null,v?v[0]:null)}for(var _=0;_<p;_++)b=c[_],S=a.pixelFromTick(b[0],i.chart),C=a.pixelFromValueAdjusted(i,b[0],b[1]),u[_]=[S,C];if(_=0,this.showLines||d){for(e.beginPath(),d&&(e.globalAlpha=.3);_<u.length;_++)e.lineTo(u[_][0],u[_][1]);e.stroke(),_=0}for(e.restore();_<p;_++)"pare","nth","es","es",k=_%2?l:-l,w=_%2?h:-h,k*=this.trend,w*=this.trend,i.yAxis.flipped&&(r.r1kc(16),k*=-r.j1kc(1,"1"),w*=-1),A=(D=u[_])[2]=D[0]+k,T=D[3]=D[1]+w,M=this.enclosedRadius||8,P=n[_],"parentheses"===this.decoration&&(r.r1kc(47),P=r.j1kc(P,")","(")),e.fillText(P,A,T),"enclosed"===this.decoration&&(e.beginPath(),e.arc(A,T,M,0,2*Math.PI,!1),e.stroke()),this.highlighted&&(e.save(),this.littleCircle(e,this.pts[_][0],this.pts[_][1],this.highlighted==="p"+_),e.restore())}},t.Drawing.elliottwave.prototype.reposition=function(e,t,i,a){var n,s,o,l,h;if("m","ove",r.q17m(),t){if(n=this.stx.panels[this.panelName],s=t.tick-i,o=t.value-a,"move"===t.action)for(var c=0;t.points.length>c;c++)l=t.points[c],this.setPoint(c,l[0]-s,l[1]-o,n.chart),this.points[c]=[l[0]-s,l[1]-o];"drag"===t.action&&(h=t.point,this.points[h]=[i,a],this.check(i,a,h)&&this.setPoint(h,i,a,n.chart)),this.render(e)}},t.Drawing.elliottwave.prototype.intersected=function(e,i,a){var n,s;if(!this.p0||!this.p1)return null;for(var o=0;this.points.length>o;o++){if(s=this.points[o],this.pointIntersection(s[0],s[1],a))return"d","r","ag",r.r1kc(2),this.highlighted=r.n1kc(o,"p"),{action:"drag",point:o,tick:e,value:i};this.points[o+1]&&this.lineIntersection(e,i,a,"segment",s,this.points[o+1])&&("mo","ve",this.highlighted=!0,n={action:"move",points:t.clone(this.points),tick:e,value:i})}return n},t.Drawing.elliottwave.prototype.measure=function(){var e,i,a,n;r.z17m(),this.points.length>=2&&(e=this.points,this.stx.setMeasure(e[0][1],e[e.length-1][1],e[0][0],e[e.length-1][0],!0),(a=(i=this.stx.controls.mSticky)&&i.querySelector(".mStickyInterior"))&&((n=[]).push(t.capitalize("Elliott Wave")),this.getYValue&&n.push(this.field||this.stx.defaultPlotField||"Close"),n.push(a.innerHTML),a.innerHTML=n.join("<br>")))},t.Drawing.printProjection=function(e,i,a){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if((n=i.arr).length>1){s=n[0][0],o=Math.round(.75*e.chart.maxTicks);for(var S=1;S<n.length;S++){for(r.N1kc(13),l=n[r.j1kc("1",1,S)][0],h=n[S][0],c=t.strToDateTime(l),u=t.strToDateTime(h).getTime(),d=e.standardMarketIterator(c),p=0;c.getTime()<u;)c=d.next(),p+=1;if((m=t.strToDateTime(l).getTime())>t.strToDateTime(a[a.length-1].Date).getTime())g=a.length-1,p+=1;else for(g=a.length-1;g>=0&&!(m<=t.strToDateTime(a[g].Date).getTime());g--);f={x0:0,x1:p,y0:a[g].Close,y1:n[S][1]},s=t.strToDateTime(l),d=e.standardMarketIterator(s),y=!1;for(var C=0;C<=p;C++)if(y?s=d.next():y=!0,!(s.getTime()<=a[a.length-1].DT.getTime())){if((v=t.yIntersection(f,C))||(v=0),0===(x=Math.round(1e4*v)/1e4)&&(x=n[S][1]),b={Date:t.yyyymmddhhmmssmmm(s),DT:s,Open:x,Close:x,High:x,Low:x,Volume:0,Adj_Close:x,Split_Close:x,projection:!0},"minute"==e.layout.interval&&o--<0)break;a[a.length]=b}}}};else{"drawingAdvanced feat","ure requires first activating drawing feature.",1206298806,-1069731186,a=2;for(var n=1;1206298806!==r.h50(n.toString(),n.toString().length,67826);n++)console.error(""),a+=2;-1069731186!==r.h50(a.toString(),a.toString().length,62354)&&console.error(""),console.error("drawingAdvanced feature requires first activating drawing feature.")}},o=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).computeEquationChart?(t.formatEquation=function(e){var t,i,a,r,n,s=Me;t="",s.z17m(),i=[],a="",r=!1;for(var o=1;o<e.length;o++)"["!=(n=e[o].toUpperCase())||r?"]"==n&&r?(r=!1,""!==a&&(i.push(a),s.r1kc(47),t+=s.j1kc(a,"]","[")),a=""):r?a+=n:"+"==n||"-"==n||"*"==n||"/"==n||":"==n||"%"==n||"("==n||")"==n?(""!==a&&isNaN(a)?(i.push(a),s.r1kc(47),t+=s.j1kc(a,"]","[")):t+=a,":"==n&&(n="/"),t+=n,a=""):" "!=n&&(a+=n):r=!0;return""!==a&&isNaN(a)?(i.push(a),s.N1kc(47),t+=s.n1kc(a,"]","[")):t+=a,{equation:t,symbols:i}},t.fetchEquationChart=function(e,i){var a,r,n,s,o;Me.q17m(),r=(a=t.formatEquation(e.symbol)).symbols,n=[],s=e.stx,e.stx=null;for(var l=0;l<r.length;l++)(o=t.shallowClone(e)).stx=s,o.symbol=r[l],o.symbolObject={symbol:r[l]},n.push(o);e.stx=s,s.quoteDriver.multiFetch(n,(function(r){var s,o,l,h,c;s={},e.loadMoreReplace=!0,Me.q17m(),o={charge:0};for(var u=0;u<r.length;u++){if((l=r[u]).dataCallback.error)return void i({error:l.dataCallback.error});s[l.params.symbol]=l.dataCallback.quotes,e.loadMoreReplace=e.loadMoreReplace&&l.params.loadMoreReplace,e.moreToLoad=e.moreToLoad||l.dataCallback.moreAvailable,(h=l.dataCallback.attribution)&&(h.charge&&(o.charge+=h.charge),o.source=h.source,void 0===o.exchange?o.exchange=h.exchange:o.exchange!=h.exchange&&(o.exchange=""))}if(n.length||!e.loadMore&&!e.update)try{c=t.computeEquationChart(a.equation,s),i({quotes:c,moreAvailable:e.moreToLoad,attribution:o})}catch(e){var d;d={error:"Invalid equation: "+a.equation},e.name&&"NoException"==e.name&&(d.suppressAlert=!0),i(d)}}))}):("equationsAdvanced feature requires first activating ","equation","s feature.",console.error("equationsAdvanced feature requires first activating equations feature."))},l=function(e){var t,i;if((t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Marker){t.ChartEngine.prototype.removeDOMMarker=function(e){console.warn("CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance#remove instead."),t.Marker.Performance.prototype.removeDOMMarker.call(e.params.node,e)},t.ChartEngine.prototype.drawMarkers=function(){console.warn("CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.ChartEngine.prototype.calculateMarkerStyles=function(e,i){console.warn("CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.calculateStyles instead."),Me.q17m(),t.Marker.Performance.calculateMarkerStyles(this,e,i)},t.ChartEngine.prototype.drawCircleMarker=function(e,i,a){Me.z17m(),console.warn("CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCircleMarker instead."),t.Marker.Performance.drawCircleMarker(e,i,a)},t.ChartEngine.prototype.drawSquareMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawSquareMarker instead."),Me.q17m(),t.Marker.Performance.drawSquareMarker(e,i,a)},t.ChartEngine.prototype.drawCalloutMarker=function(e,i,a){console.warn("CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCalloutMarker instead."),Me.z17m(),t.Marker.Performance.drawCalloutMarker(e,i,a)},t.ChartEngine.prototype.drawMarkerStem=function(e,i,a){Me.z17m(),console.warn("CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkerStem instead."),t.Marker.Performance.drawMarkerStem(e,i,a)},t.ChartEngine.prototype.positionDOMMarkers=function(){Me.z17m(),console.warn("CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),t.Marker.Performance.drawMarkers(this)},t.Marker.Performance=function(e){var i,a,r,n,s,o,l,h;Me.z17m(),this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},t.extend(this.params,e),i=this.template=document.createElement("TEMPLATE"),Me.N1kc(57),i.innerHTML=Me.j1kc('<div class="stx-stem"></div>',"</div>",'<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>','<div class="stx-marker-content">','<div class="stx-marker highlight">',"</div>",'<div class="stx-visual">',"</div>"),(r=(a=this.template.content.cloneNode(!0)).querySelector(".stx-marker",i)).classList.add(e.type),r.classList.add(e.category),n=a.querySelector(".stx-visual",i),s=a.querySelector(".stx-marker-expand"),o=a.querySelector("h4",i),l=a.querySelector("p",i),o.innerText=this.params.headline,l.innerText=this.params.story,this.hasText=!!e.headline||!!e.story,this.deferAttach=!0,this.node=a.firstChild,this.node.params=this.params,this.visual=n,this.expand=s,"callout"===e.type&&(h=s.removeChild(o),a.querySelector(".stx-marker-content",i).insertBefore(h,s))},930656852,-385965302,i=2;for(var a=1;930656852!==Me.h50(a.toString(),a.toString().length,51190);a++)t.inheritsFrom(t.Marker.Performance,t.Marker.NodeCreator,!1),i+=2;-385965302!==Me.h50(i.toString(),i.toString().length,25297)&&t.inheritsFrom(t.Marker.Performance,t.Marker.NodeCreator,!0),t.Marker.Performance.consolidateExpanded=function(e){var t,i,a,r,n,s;t=e.markerHelper.highlighted,i=2;for(var o=1;1945875035!==Me.h50(o.toString(),o.toString().length,12621);o++){if(~t.length)return;i+=2}if(158405889===Me.M00(i.toString(),i.toString().length,92074)||t.length){r=(a=t[t.length-1]).params.node,a.consolidated||(a.consolidated=[]);for(var l=t.length-2;l>=0;l--)"</consoli","d","ated",">","<cons","o","lidat","ed>",h=t[l],c=void 0,n=(c=h.params.node.expand)?(Me.q17m(),"none"!==c.style.display?c.innerHTML:""):"",Me.N1kc(47),s=Me.n1kc(n,"</consolidated>","<consolidated>"),n.length&&(r.expand.innerHTML+=s);var h,c;a.stxNodeCreator.quickCache(a)}},t.Marker.Performance.reconstituteExpanded=function(e){var t,i;if((t=e.markerHelper.highlighted).length&&e.activeMarker)for(var a=(t=[e.activeMarker]).length-1;a>=0;a--)for("CONSOLID","AT","ED",i=t[a].params.node.expand;"CONSOLIDATED"===i.lastElementChild.nodeName;)i.removeChild(i.lastElementChild)},t.Marker.Performance.drawMarkers=function(e){var t,i,a,r,n,s;Me.q17m(),t=e.getMarkerArray("all"),i=e.chart;for(var o=0;o<t.length;o++)r=(a=t[o]).stxNodeCreator,n=i.dataSegment[0].tick,s=i.dataSegment[i.dataSegment.length-1].tick,n<=a.tick<=s&&r&&r.drawMarker&&r.drawMarker(a)},t.Marker.Performance.calculateMarkerStyles=function(e,t,i){var a,r,n;(a=document.querySelector(".stx-marker-templates"))||("-100","0px","hid","de","n","D","I","V",(a=document.createElement("DIV")).style.visibility="hidden",a.style.left="-1000px",document.body.append(a)),a.appendChild(t.node),r=getComputedStyle(t.stxNodeCreator.visual),e.styles.stx_marker_stem||(n=getComputedStyle(document.querySelector(".stx-stem",t.node)),e.styles.stx_marker_stem=e.cloneStyle(n)),e.styles[i]=e.cloneStyle(r),a.removeChild(t.node)},t.Marker.Performance.drawCircleMarker=function(e,i,a){var r,n,s,o,l,h;r=e.params.stx.chart.context,n=a.x,s=a.y,o=a.radius,l=a.label,h=a.color?a.color:i.backgroundColor,r.beginPath(),r.setLineDash([]),r.lineWidth=1,r.fillStyle=h,r.strokeStyle=h,r.font="normal bold 12px Roboto, Helvetica, sans-serif",r.arc(n,s,o,0,2*Math.PI,!1),r.fill(),r.stroke(),r.closePath(),l&&(r.fillStyle=t.colorsEqual("white",r.fillStyle)?"black":"white",r.fillText(l.charAt(0).toUpperCase(),n-4,s+1)),(e.highlight||e.active)&&(r.beginPath(),Me.N1kc(2),r.arc(n,s,Me.j1kc(4,o),0,2*Math.PI,!1),r.stroke(),r.closePath())},t.Marker.Performance.drawSquareMarker=function(e,i,a){var r,n,s,o,l,h,c,u=Me;r=e.params.stx.chart.context,n=a.x,s=a.y,o=a.half,l=a.label,h=a.color?a.color:i.backgroundColor,u.r1kc(58),c=u.j1kc(o,"2",1788305856),r.beginPath(),r.setLineDash([]),r.lineWidth=1,r.fillStyle=h,r.strokeStyle=h,r.font="normal bold 12px Roboto, Helvetica, sans-serif",u.N1kc(4),r.rect(u.j1kc(o,n),u.n1kc(o,s),c,c),r.fill(),(e.highlight||e.active)&&(u.r1kc(59),r.rect(u.j1kc(o,n,4,"4"),u.j1kc(4,s,o,u.r1kc(60)),u.j1kc(8,c,u.N1kc(2)),u.j1kc(8,c,u.N1kc(2)))),r.stroke(),r.closePath(),l&&("w","hit","e","bl","a","ck",r.fillStyle=t.colorsEqual("white",r.fillStyle)?"black":"white",r.fillText(l.charAt(0).toUpperCase(),n-4,s+1))},t.Marker.Performance.drawCalloutMarker=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p;Me.q17m(),a=e.params.stx.chart.context,r=e.params,i.x,n=i.y,s=i.half,o=i.midWidth,l=i.headline,h=i.color?i.color:t.backgroundColor,c=2*s||25,u=Math.round(a.measureText(l).width),d=o?2*o:u+8,a.beginPath(),a.setLineDash([]),a.lineWidth=1,a.fillStyle=h,a.strokeStyle=h,a.font="normal bold 12px Roboto, Helvetica, sans-serif",a.rect(r.box.x0,r.box.y0,d,c),a.fill(),a.stroke(),a.closePath(),a.beginPath(),a.fillStyle=e.highlight||e.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",Me.r1kc(61),p=Me.j1kc(20,2,u,d),a.rect(r.box.x0+p,n-s,u+40,22),a.fill(),a.stroke(),a.closePath(),a.fillStyle="black",a.fillText(l,r.box.x0+p+10,n)},t.Marker.Performance.drawMarkerStem=function(e,i,a){var r,n,s,o,l;r=e.params.stx.chart.context,n=a.x,a.y,r.beginPath(),r.strokeStyle=i.borderLeftColor,r.setLineDash([1,1]),s=t.stripPX(i.height),o=a.invert?e.params.box.y0:e.params.box.y1,l=a.invert?e.params.box.y0-s:e.params.box.y1+s,r.moveTo(n,o),r.lineTo(n,l),r.stroke(),r.closePath()},t.Marker.Performance.prototype.drawMarker=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C=Me;i=e.params,(a=e.params.stx)&&a.chart.dataSegment.length&&(r=a.panels[e.params.panelName],C.z17m(),s=(n=e.stxNodeCreator.params).type,o=n.category,l=n.headline,h=n.displayCategory,c=n.color,u=n.invert,C.r1kc(62),d=C.n1kc(s,o,"stx_marker_","_"),a.styles[d]||t.Marker.Performance.calculateMarkerStyles(a,e,d),p=e.style=a.styles[d],m=a.styles.stx_marker_stem,g=parseInt(p.height,10)/2,f=parseInt(p.width,10)/2,v=(y=n.displayStem?parseInt(m.height,10)+parseInt(m.marginBottom,10):0)+parseInt(p.height,10),x=y?y+g:0,b=a.pixelFromDate(i.x),S=i.node.calculateYPosition({marker:e,panel:r,height:v,half:g,offset:x,inverted:u}),(e.tick||0===e.tick)&&(i.box={x0:b-(f||g),y0:S-g,x1:b+(f||g),y1:S+g,midY:g,midX:f||g,stemHeight:y},h||(o=h),a.startClip(r.name),"circle"===s?t.Marker.Performance.drawCircleMarker(e,p,{x:b,y:S,radius:g,label:o,color:c}):"square"===s?t.Marker.Performance.drawSquareMarker(e,p,{x:b,y:S,half:g,label:o,color:c}):"callout"===s?t.Marker.Performance.drawCalloutMarker(e,p,{x:b,y:S,half:g,midWidth:f,headline:l,color:c}):(" is"," unsupported with can","vas ","markers!\nSupported Styles are Square, Circle, and Callout.",C.N1kc(47),console.warn(C.j1kc(s," is unsupported with canvas markers!\nSupported Styles are Square, Circle, and Callout.","Marker type: "))),n.displayStem&&t.Marker.Performance.drawMarkerStem(e,m,{x:b,y:S,invert:u}),a.endClip(),e.attached&&this.positionPopUpNode(e)))},t.Marker.Performance.prototype.positionPopUpNode=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;e.attached&&e.params.box&&(i=(t=e.params).stx,a=t.box,r=e.params.node.expand,n=i.chart.dataSet,s=i.chart.dataSegment,e.tick?(l=[n[s[0]&&s[0].tick-1],n[s[0]&&s[0].tick-2]],h=i.getFirstLastDataRecord(l.concat(s),"Date"),c=[n[s[s.length-1].tick+1],n[s[s.length-1].tick+2]],u=i.getFirstLastDataRecord(s.concat(c),"Date",!0),o=h.DT<=n[e.tick].DT&&n[e.tick].DT<=u.DT):o=!1,e.highlight||e.active||(o=!1),Me.z17m(),r.style.visibility=o?"":"hidden",o&&(d=i.panels[t.panelName],m=(p=r.rects).height/2,f=e.node.params.infoOffset||0,g=e.node.params.infoOnLeft?a.x0-p.width-f<d.left?a.x1+f:a.x0-p.width-f:a.x0+p.width>d.right?a.x0-p.width-f:a.x1+f,g-=i.chart.left,y=a.y0-m>=d.top?a.y0+a.midY-m:a.y0,!t.avoidFlush&&a.y1+a.stemHeight===d.yAxis.bottom&&p.height>a.y1-a.y0+a.stemHeight&&(y=a.y1-p.height+a.stemHeight),y-=i.chart.panel.top,v="translateX("+Math.floor(g)+"px) translateY("+Math.floor(y)+"px) translateZ(0)",r.style.transform=v,r.transform={translateX:g,translateY:y}))},t.Marker.Performance.prototype.quickCache=function(e){var i,a,r;Me.q17m(),i=e.params.node.expand,a=e.style,r=t.stripPX(a.marginLeft)+t.stripPX(a.marginRight)+t.stripPX(a.borderRight)+t.stripPX(a.borderLeft),i.rects=i.getBoundingClientRect(),i.scrollBarWidth=i.rects.width-i.clientWidth-r},t.Marker.Performance.prototype.calculateYPosition=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m,g;if("b","elo","w_c","andle",t=e.marker,i=e.panel,a=e.height,r=e.half,n=e.offset,s=e.inverted,l=(o=t.params.stx).chart,h=o.chart.highLowBars,c=l.dataSet[t.tick]){switch(u=h?c.High:c.Close,d=t.params.yPositioner,Me.z17m(),d){case"value":p=t.params.y||0===t.params.y?o.pixelFromPrice(t.params.y,i)-.5*a+r:o.pixelFromPrice(u,i)-n;break;case"above_candle":p=o.pixelFromPrice(u,i)-n;break;case"below_candle":p=o.pixelFromPrice(c.Low||u,i),p+=s&&n?n:r;break;case"on_candle":m=c.High||c.Close,g=c.Low||0===c.Low||c.Close,p=o.pixelFromPrice((m+g)/2,i)-.5*a+r;break;case"top":p=o.pixelFromPrice(i.yAxis.high,i),p+=s&&n?n:r;break;case"bottom":p=o.pixelFromPrice(i.yAxis.low,i)-(n||r)}return p}},t.Marker.Performance.prototype.prepareForHolder=function(e){var t,i;return t=this.expand,i=e.params.stx,t.classList.add(this.params.type),i.markerHelper.domMarkers.push(e),Me.q17m(),t},t.Marker.Performance.prototype.addToHolder=function(e){var i,a;function r(t){a.activeMarker=e,Me.q17m(),a.activeMarker.click({cx:t.clientX,cy:t.clientY,panel:a.currentPanel}),t.stopPropagation()}i=this.expand,a=e.params.stx,t.Marker.Performance.reconstituteExpanded(a),t.Marker.Performance.consolidateExpanded(a),this.quickCache(e),i.clickClosure||(i.addEventListener("mousedown",r),i.addEventListener("touchstart",r),Me.z17m(),i.clickClosure=r)},t.Marker.Performance.prototype.remove=function(e){var t,i,a,r;(t=e.params.stx)&&t.markerHelper.domMarkers&&(-1!=(i=t.markerHelper.domMarkers.indexOf(e))&&t.markerHelper.domMarkers.splice(i,1),e.attached&&("c","li","c","k",a=t.panels[e.params.panelName],(r=e.params.node.expand).parentNode===a.subholder&&a.subholder.removeChild(r),r.removeEventListener("click",r.clickClosure)))},t.Marker.Performance.prototype.click=function(e){var t,i,a;if(this.hasText){"number"==typeof arguments[0]&&(e={cx:arguments[0],cy:arguments[1],marker:arguments[2],panel:arguments[3]});var r=e,n=r.cx,s=(r.cy,r.marker);r.panel;if(t=s.params.stx,s.attached){if((a=this.expand).rects.width-a.scrollBarWidth+a.transform.translateX<t.backOutX(n)&&t.backOutX(n)<a.rects.width+a.transform.translateX)return;this.remove(s)}else t.addToHolder(s),i=!0;s.attached=!s.attached,s.active=!s.active,i&&s.stxNodeCreator.positionPopUpNode(s)}}}else"highPerformanceMarker","s feature requires first activating markers feature.",console.error("highPerformanceMarkers feature requires first activating markers feature.")},h=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Renderer.OHLC.requestNew=function(e,i){var a,r,n,s,o,l,h;a=null,r=i.hlc,n=i.colored,s=i.hollow,Me.q17m(),o=i.volume,l=i.histogram;for(var c=0;c<e.length;c++)switch("h","l","c","c","olo","r","ed",h=e[c]){case"bar":case"candle":a=h;break;case"volume":o=!0;break;case"hollow":s=!0;break;case"colored":n=!0;break;case"histogram":l=!0,a="candle";break;case"hlc":r=!0,a="bar";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,hlc:r,colored:n,hollow:s,volume:o,histogram:l})})},t.Renderer.OHLC.getChartParts=function(e,t){var i;return"s","tx_h","oll","ow_candle_down","h","ol","lo","w","border_","colo","r_ev",Me.q17m(),"en","border_color","_u","p","b","order_color_even","s","tx_hollow","_cand","le_down","border_color","_up","ho","llo","w","f","ill_color_d","ow","n","stx_candle_","down","cand","l","e","fi","ll","_colo","r_up","border","_","color_e","ven","st","x_ca","ndle_shadow_even","sh","adow","c","andle","s","h","ado","w","c","an","dl","e","sh","a","d","ow","bord","er_col","or_even","bor","der","_color_","down","b","a","r","b","a","r","b","ar","b","a","r","fill_co","lor_even","his","togr","a","m","histogra","m",Me.N1kc(21),i=Me.j1kc("1",2011859072),2,4,8,16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"bar",drawType:"bar",style:e||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_up",condition:t?8:i,border:"border_color_up",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_down",condition:t?16:2,border:"border_color_down",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_even",condition:t?32:4,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_up",condition:i,border:"border_color_up"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:2,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_even",condition:4,border:"border_color_even",skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:16|i,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:18,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:20,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:8|i,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:10,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:12,fill:"fill_color_even",border:"border_color_even"}]},t.Renderer.Bars=function(e){var t;this.construct(e),Me.z17m(),(t=this.params).type="bar",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.volume=t.hollow=t.histogram=!1},Me.z17m(),t.inheritsFrom(t.Renderer.Bars,t.Renderer.OHLC,!1),t.Renderer.HLC=function(e){var t;this.construct(e),(t=this.params).type="bar",t.hlc=!0,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.volume=t.hollow=t.histogram=!1},t.inheritsFrom(t.Renderer.HLC,t.Renderer.Bars,!1),t.Renderer.Shading=function(e){this.construct(e),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,this.shading=[],"rangechannel"==this.params.type&&(this.highLowBars=!0)},t.inheritsFrom(t.Renderer.Shading,t.Renderer.Lines,!1),t.Renderer.Shading.requestNew=function(e,i){var a;a=null;for(var r=0;r<e.length;r++)"r","angec","hannel","rangechannel"==e[r]&&(a="rangechannel");return null===a?null:new t.Renderer.Shading({params:t.extend(i,{type:a})})},t.Renderer.Shading.prototype.setShading=function(e){var t;e.constructor!=Array&&(e=[e]),t=2;for(var i=1;-1225934288!==Me.h50(i.toString(),i.toString().length,19413);i++)this.shading=e,Me.r1kc(27),t+=Me.j1kc(1089372960,"2");-1120508191!==Me.M00(t.toString(),t.toString().length,62627)&&(this.shading=e)},t.Renderer.Shading.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f;function y(e){var t,i,a;return t=o[e],Me.z17m(),t?(i=t.parameters.field,a=t.parameters.subField,Me.r1kc(2),Me.n1kc(a?"."+a:"",i)):e}for(i=(e=this.stx).panels[this.params.panel].chart,"rangechannel"==this.params.type&&(this.beenSetup?this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id):("stx_li","ne_down","L","ow","stx_line","_up","Sha","din","g",this.beenSetup=!0,this.params.display=this.seriesParams[0].display,this.params.yAxis=this.seriesParams[0].yAxis,a=this.seriesParams[0].color||"auto","",(r=this.seriesParams[0].symbol)&&(Me.r1kc(2),Me.j1kc(".",r)),this.removeAllSeries(!0),n=this.params.name,e.addSeries(null,{symbol:r,loadData:!!r,field:"High",renderer:"Shading",name:n,style:"stx_line_up",display:this.params.display,shareYAxis:!0}),e.addSeries(null,{symbol:r,loadData:!!r,field:"Low",renderer:"Shading",name:n,style:"stx_line_down",display:this.params.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:a}))),this.shading||this.errTimeout||(console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),s=this,this.errTimeout=setTimeout((function(){s.errTimeout=null}),1e4)),o={},l=0;l<this.seriesParams.length;l++)h={},i.series[this.seriesParams[l].id]&&(h=t.clone(i.series[this.seriesParams[l].id].parameters)),o[this.seriesParams[l].id]={parameters:t.extend(t.extend(h,this.params),this.seriesParams[l]),yValueCache:this.caches[this.seriesParams[l].id]};for(l in e.drawSeries(i,o,this.params.yAxis,this),i.legend&&"rangechannel"==this.params.type&&(i.legend.colorMap||(i.legend.colorMap={}),c=this.params.display,u=[e.getCanvasColor("stx_line_up"),e.getCanvasColor("stx_line_down")],i.legend.colorMap[c]={color:u,display:c,isBase:this==e.mainSeriesRenderer}),o)this.caches[l]=o[l].yValueCache;for(l=0;l<this.shading.length;l++)"Cl","os","e",p=(d=this.shading[l]).color,"auto"==d.color&&(p=e.defaultColor),d.primary||(d.primary="Close"),!d.secondary&&this.seriesParams[0]&&(d.secondary=this.seriesParams[0].field),d.secondary&&(o[d.primary]||"Close"==d.primary)&&o[d.secondary]&&("Close"==d.primary&&this.params.yAxis&&this.params.yAxis!=i.yAxis||(m=y(d.primary).split("."),g=y(d.secondary).split("."),((f={topBand:m[0],topSubBand:m[1],topColor:d.greater||p||e.containerColor,topAxis:this.params.yAxis,bottomBand:g[0],bottomSubBand:g[1],bottomColor:d.lesser||p||e.containerColor,bottomAxis:"Close"==d.primary?null:this.params.yAxis,tension:this.params.tension||i.tension,opacity:.1}).topColor||f.bottomColor)&&(!this.params.highlight&&e.highlightedDraggable&&(f.opacity*=.3),t.fillIntersecting(e,this.params.panel,f))))},t.Renderer.Histogram=function(e){this.construct(e),this.params.type="histogram",this.barsHaveWidth=this.standaloneBars=!0,Me.q17m(),this.params.yAxis&&(this.params.bindToYAxis=!0,"number"==typeof this.params.yAxis.baseline&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}))},t.inheritsFrom(t.Renderer.Histogram,t.Renderer,!1),t.Renderer.Histogram.prototype.adjustYAxis=function(){var e,t;e=this.params.yAxis,t=2;for(var i=1;360434023!==Me.M00(i.toString(),i.toString().length,44098);i++){if(+e&&e.baseline)return;e.min=1,t+=2}if(-1175854589!==Me.h50(t.toString(),t.toString().length,7755)){if(!e||e.baseline)return;e.min=0}e.highValue/=this.params.heightPercentage||1},t.Renderer.Histogram.prototype.draw=function(){var e,i,a,r;Me.z17m(),(e=t.clone(this.params)).type=e.subtype,this.useSum="stacked"==e.subtype,e.yAxis&&e.yAxis!=this.stx.chart.yAxis||(e.bindToYAxis=!0),this.stx.drawHistogram(e,this.seriesParams),(i=e.yAxis&&e.yAxis.baseline)&&i.color&&(a=this.stx.panels[this.params.panel],r=this.stx.pixelFromPrice(i.value,a,this.params.yAxis)-.5,this.stx.plotLine({x0:a.left,x1:a.right,y0:r,y1:r,color:i.color,type:"line",context:a.chart.context,confineToPanel:a,pattern:i.pattern||"solid",lineWidth:i.lineWidth||1,opacity:i.opacity||.8,globalCompositeOperation:"destination-over"}))},t.Renderer.Histogram.prototype.getBasis=function(e,t,i){var a,r,n;if(a=0,Me.q17m(),e&&this.useSum)for(var s=0;s<this.seriesParams.length&&("objec","t",(r=this.seriesParams[s].field)!==t);s++)(n=e[r])&&"object"===Te(n)&&(n=n[i||this.seriesParams[s].subField||this.stx.chart.defaultPlotField||"Close"]),n&&(a+=n);return a},t.Renderer.Heatmap=function(e){this.construct(e),this.params.type="heatmap",Me.z17m(),this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},t.inheritsFrom(t.Renderer.Heatmap,t.Renderer,!1),t.Renderer.Heatmap.requestNew=function(e,i){var a;Me.q17m(),a=null;for(var r=0;r<e.length;r++)"h","eatma","p","heatmap"==e[r]&&(a="heatmap");return null===a?null:new t.Renderer.Heatmap({params:t.extend(i,{type:a})})},t.Renderer.Heatmap.prototype.draw=function(){Me.z17m(),this.stx.drawHeatmap(t.clone(this.params),this.seriesParams)},t.Renderer.Scatter=function(e){this.construct(e),this.standaloneBars=this.barsHaveWidth=!0,this.bounded=!0},t.inheritsFrom(t.Renderer.Scatter,t.Renderer.Lines,!1),t.Renderer.Scatter.requestNew=function(e,i){var a;a=null;for(var r=0;r<e.length;r++)"s","cat","t","er","scatterplot"==e[r]&&(a="scatter");return Me.q17m(),null===a?null:new t.Renderer.Scatter({params:t.extend(i,{type:a})})},t.Renderer.Scatter.prototype.drawIndividualSeries=function(e,t){var i,a;return i=this.stx.panels[t.panel]||e.panel,a={colors:[]},this.stx.scatter?a=this.stx.scatter(i,t):console.warn("Error, Scatter renderer requires customChart.js"),a}},c=function(e){var t;Me.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateAccumulationDistribution=function(e,t){var i,a,r,n,s;i=t.chart.scrubbed;for(var o=t.startFrom;o<i.length;o++)if(o){if((a=i[o]).futureTick)break;Me.r1kc(4),r=i[Me.n1kc(1,o)],n=0,a.Close>r.Close?n=a.Close-Math.min(a.Low,r.Close):a.Close<r.Close&&(n=a.Close-Math.max(a.High,r.Close)),t.inputs["Use Volume"]&&(n*=a.Volume),(s=r["Result "+t.name])||(s=0),s+=n,isNaN(a.Close)||(a["Result "+t.name]=s)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:t.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):console.error("accumulationDistribution feature requires first activating studies feature.")},u=function(e){var t;Me.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","#","F","F0","000",t.Studies.calculateADX=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=Me;if("Smoothing"," Perio","d",t.Studies.calculateStudyATR(e,i),a=i.chart.scrubbed,r=i.days,(n=parseInt(i.inputs["Smoothing Period"],10))||0===n||(n=r),a.length<i.days+1)i.error=!0;else{s=0,o=0,l=0,h=0;for(var v=Math.max(1,i.startFrom);v<a.length;v++)if("-","D","I"," ","_","s","m-","DM ","_s","m","+DM"," ",c=a[v],(u=Math.max(0,c.High-a[v-1].High))>(d=Math.max(0,a[v-1].Low-c.Low))?d=0:u=d>u?0:d=0,v<=r?(o+=u,l+=d,s+=c["True Range "+i.name]):("T","rue R","ange ","_","sm+DM"," ",o=a[v-1]["_sm+DM "+i.name]*(r-1)/r+u,l=a[v-1]["_sm-DM "+i.name]*(r-1)/r+d,s=a[v-1]["_smTR "+i.name]*(r-1)/r+c["True Range "+i.name]),c["_sm+DM "+i.name]=o,c["_sm-DM "+i.name]=l,c["_smTR "+i.name]=s,!(v<r)){if(y.r1kc(38),p=y.j1kc(s,100,o),y.r1kc(38),m=y.n1kc(s,100,l),g=100*Math.abs(p-m)/(p+m),c["+DI "+i.name]=p,c["-DI "+i.name]=m,!1!==i.inputs.Series&&n)if(v<r+n-1){if(v==i.startFrom)for(var x=r;x<i.startFrom;x++)"-","D","I ",h+=100*Math.abs(a[x]["+DI "+i.name]-a[x]["-DI "+i.name])/(a[x]["+DI "+i.name]+a[x]["-DI "+i.name]);h+=g}else v==r+n-1?(y.r1kc(10),c["ADX "+i.name]=y.n1kc(n,h)):c["ADX "+i.name]=(a[v-1]["ADX "+i.name]*(n-1)+g)/n;if(i.inputs.Histogram){if("-D","I"," ","_","h","ist",f=i.name+"_hist",!c["+DI "+i.name]&&0!==c["+DI "+i.name])continue;if(!c["-DI "+i.name]&&0!==c["-DI "+i.name])continue;c[f]=c["+DI "+i.name]-c["-DI "+i.name],!1===i.inputs.Series&&("-DI"," ",c["+DI "+i.name]=null,c["-DI "+i.name]=null),i.outputMap[f]=""}}}},t.Studies.displayADX=function(e,i,a){var r,n,s,o,l,h,c;r=i.underlay?.3:i.inputs.Series?.4:1,i.inputs.Series&&i.inputs.Shading&&("-","D","I"," ","+","DI ",n="+DI "+i.name,s="-DI "+i.name,o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=t.Studies.determineColor(i.outputs[i.outputMap[s]]),h=i.getYAxis(e),c={topBand:n,bottomBand:s,topColor:o,bottomColor:l,skipTransform:e.panels[i.panel].name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(c.opacity*=.3),t.fillIntersecting(e,i.panel,c)),i.inputs.Histogram&&t.Studies.createHistogram(e,i,a,!1,r),Me.z17m(),!1!==i.inputs.Series?t.Studies.displaySeriesAsLine(e,i,a):i.inputs.Series||i.inputs.Histogram||e.displayErrorAsWatermark(i.panel,e.translateIf(i.name)+": "+e.translateIf("Nothing to display"))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:t.Studies.calculateADX,seriesFN:t.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):console.error("adx feature requires first activating studies feature.")},d=function(e){var t,i,a,r=Me;if(r.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies){t.Studies.calculateAlligator=function(e,i){var a,n,s,o,l;if("Show ","Lines","J","aw Peri","od",a={J:Number(i.inputs["Jaw Period"]),T:Number(i.inputs["Teeth Period"]),L:Number(i.inputs["Lips Period"])},(n=i.chart.scrubbed).length<Math.max(a.J,a.T,a.L)+1)i.error=!0;else{("Gator"===i.type||i.inputs["Show Lines"])&&("Teet","h Offs","et","Ja","w Offset","wel","le","s wilder",t.Studies.MA("welles wilder",a.J,"hl/2",i.inputs["Jaw Offset"],"Jaw",e,i),t.Studies.MA("welles wilder",a.T,"hl/2",i.inputs["Teeth Offset"],"Teeth",e,i),t.Studies.MA("welles wilder",a.L,"hl/2",i.inputs["Lips Offset"],"Lips",e,i));for(var h=i.startFrom;h<n.length;h++)if("G","at","o","r",n[h]&&("Gator"==i.type&&("_","hi","s","t2",s=n[h]["Jaw "+i.name],o=n[h]["Lips "+i.name],((l=n[h]["Teeth "+i.name])||0===l)&&((s||0===s)&&(r.r1kc(4),n[h][i.name+"_hist1"]=Math.abs(r.n1kc(l,s))),(o||0===o)&&(r.N1kc(4),n[h][i.name+"_hist2"]=-Math.abs(r.j1kc(o,l)))),i.outputMap={},i.outputMap[i.name+"_hist1"]="",i.outputMap[i.name+"_hist2"]=""),i.inputs["Show Fractals"])){if(!(n[h-2]&&n[h-1]&&n[h]&&n[h+1]&&n[h+2]))continue;n[h-2].High&&n[h-1].High&&n[h].High&&n[h+1].High&&n[h+2].High&&n[h].High>n[h-1].High&&n[h].High>n[h-2].High&&n[h].High>n[h+1].High&&n[h].High>n[h+2].High&&(n[h]["Fractal High "+i.name]=1),n[h-2].Low&&n[h-1].Low&&n[h].Low&&n[h+1].Low&&n[h+2].Low&&n[h].Low<n[h-1].Low&&n[h].Low<n[h-2].Low&&n[h].Low<n[h+1].Low&&n[h].Low<n[h+2].Low&&("F","rac","tal Low ",n[h]["Fractal Low "+i.name]=1)}}},t.Studies.displayAlligator=function(e,i,a){var n;if(n=i.getContext(e),i.inputs["Show Lines"]&&t.Studies.displaySeriesAsLine(e,i,a),i.inputs["Show Fractals"]){e.startClip(),n.globalAlpha=i.underlay?.3:1,!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var s=2;s<a.length-2;s++)a[s]&&("l","o","w",a[s]["Fractal High "+i.name]&&o("high",s),a[s]["Fractal Low "+i.name]&&o("low",s));e.endClip()}function o(t,i){var o,l;r.q17m(),l=e.chart.panel.yAxis.flipped,"high"==t?("t","o","p",n.fillStyle=e.defaultColor,n.textBaseline=l?"top":"bottom",o=e.pixelFromPrice(a[i].High),n.fillText(l?"":"",e.pixelFromBar(s,e.chart)-n.measureText("").width/2+1,l?o+5:o-5)):"low"==t&&("b","ot","to","m",n.fillStyle=e.defaultColor,n.textBaseline=l?"bottom":"top",o=e.pixelFromPrice(a[i].Low),n.fillText(l?"":"",e.pixelFromBar(s,e.chart)-n.measureText("").width/2+1,l?o-5:o+5))}},t.Studies.displayGator=function(e,i,a){var n,s,o,l,h,c,u,d,p;n=e.panels[i.panel],s=i.getContext(e),r.q17m(),o=i.getYAxis(e),l=e.pixelFromPrice(0,n,o),(h=e.layout.candleWidth-2)<2&&(h=1),c=t.Studies.determineColor(i.outputs["Increasing Bar"]),u=t.Studies.determineColor(i.outputs["Decreasing Bar"]),e.canvasColor("stx_histogram"),i.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var m=0;m<a.length;m++)if(d=a[m],r.r1kc(4),p=a[r.n1kc(1,m)],d)for(var g=1;g<=2;g++)"_","his","t",p||(p=e.getPreviousBar(e.chart,i.name+"_hist"+g,m)),p?Math.abs(p[i.name+"_hist"+g])<Math.abs(d[i.name+"_hist"+g])?s.fillStyle=c:Math.abs(p[i.name+"_hist"+g])>Math.abs(d[i.name+"_hist"+g])&&(s.fillStyle=u):s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(m,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[i.name+"_hist"+g],n,o)-l));e.endClip()},1917220434,r.r1kc(21),i=r.n1kc("169203966",991488384),a=2;for(var n=1;1917220434!==r.h50(n.toString(),n.toString().length,70129);n++)"#","FF","000","0",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Alligator:{name:"#FF0000",overlay:!1,seriesFN:t.Studies.displayAlligator,calculateFN:t.Studies.calculateAlligator,inputs:{"Show Lines":!1,"Jaw Period":90,"Jaw Offset":1,"Teeth Period":5,"Teeth Offset":3,"Lips Period":4,"Lips Offset":7,"Show Fractals":!0},outputs:{Jaw:"#0000FF",Teeth:"Teeth Offset",Lips:"#00DD00"}},Gator:{name:"#FF0000",seriesFN:t.Studies.displayGator,calculateFN:t.Studies.calculateAlligator,inputs:{"Jaw Period":23,"Jaw Offset":6,"Teeth Period":9,"Teeth Offset":7,"Lips Period":3,"Lips Offset":5},outputs:{"Increasing Bar":"#0000FF","Decreasing Bar":"Jaw Offset"},centerline:1}}),a+=2;r.h50(a.toString(),a.toString().length,44570)!==i&&("#","FF0000","#","00DD0","0",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Alligator:{name:"Alligator",overlay:!0,seriesFN:t.Studies.displayAlligator,calculateFN:t.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:t.Studies.displayGator,calculateFN:t.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0}}))}else console.error("alligator feature requires first activating studies feature.")},p=function(e){var t;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ,Me.q17m(),t.Studies?("au","t","o","Aroon Oscill","at","or","#FF0","000","0 ","to"," 100","A","ro","o","n",t.Studies.calculateAroon=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g=Me;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{if(a=0,g.N1kc(27),r=g.j1kc(209201920,"0"),n=null,g.z17m(),s=null,t.startFrom>0){439453387,1059804465,o=2;for(var f=1;439453387!==g.h50(f.toString(),f.toString().length,17206);f++)l=i[t.startFrom-1]["_state "+t.name],o+=2;1059804465!==g.M00(o.toString(),o.toString().length,9033)&&(l=i[3*t.startFrom][""*t.name]),l&&(a=l[0],r=l[1],n=l[2],s=l[3])}for(var y=t.startFrom;y<i.length&&("Ar","oon Up ",!(c=i[y]).futureTick);y++){if(null===n&&(n=c.High),null===s&&(s=c.Low),(n=Math.max(n,c.High))==c.High)a=0;else if(++a>t.days)for(n=c.High,a=0,h=1;h<=t.days;h++)(n=Math.max(n,i[y-h].High))==i[y-h].High&&(a=h);if((s=Math.min(s,c.Low))==c.Low)r=0;else if(++r>t.days)for(s=c.Low,r=0,h=1;h<=t.days;h++)(s=Math.min(s,i[y-h].Low))==i[y-h].Low&&(r=h);u=!isNaN(c.High),d=!isNaN(c.Low),p=100*(1-a/t.days),u&&(c["Aroon Up "+t.name]=p),m=100*(1-r/t.days),d&&(c["Aroon Down "+t.name]=m),u&&d&&(c["Aroon Oscillator "+t.name]=c["Aroon Up "+t.name]-c["Aroon Down "+t.name]),c["_state "+t.name]=[a,r,n,s]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Aroon:{name:"Aroon",range:"0 to 100",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:t.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}})):console.error("aroon feature requires first activating studies feature.")},m=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("#F","F0000","sq","u","arewa","ve","po","int","s","a","u","t","o",t.Studies.calculateATRBands=function(e,i){var a;t.Studies.calculateStudyATR(e,i),(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,a,"ATR "+i.name)},t.Studies.calculateSTARCBands=function(e,i){Me.q17m(),t.Studies.calculateStudyATR(e,i),t.Studies.MA("simple",i.inputs["MA Period"],"Close",0,"_MA",e,i),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Multiplier,"_MA "+i.name,"ATR "+i.name)},t.Studies.calculateATRStops=function(e,i){var a,r,n,s,o,l,h,c,u=Me;if("A","ll Stops ","All Stop","s",a=i.chart.scrubbed){t.Studies.calculateStudyATR(e,i),r=i.inputs.HighLow;for(var d=Math.max(i.startFrom-1,1);d<a.length-1;d++)"Sel","l ","St","ops ","B","uy Stops ",n=a[d],u.N1kc(4),s=a[u.n1kc(1,d)],(o=n["Buy Stops "+i.name])||(o=n["Sell Stops "+i.name]),o||(u.N1kc(4),o=u.n1kc(0,"0")),n&&s&&(h=l=n.Close,c=n["ATR "+i.name]*i.inputs.Multiplier,n.Close>o&&s.Close>o?(r&&(l=n.High),u.N1kc(4),h=Math.max(o,u.j1kc(c,l))):n.Close<=o&&s.Close<=o?(r&&(l=n.Low),u.r1kc(2),h=Math.min(o,u.n1kc(c,l))):n.Close>o?(r&&(l=n.High),u.r1kc(4),h=u.j1kc(c,l)):n.Close<=o&&(r&&(l=n.Low),u.r1kc(2),h=u.n1kc(c,l)),l<=h?(u.N1kc(2),a[u.n1kc(1,d)]["Buy Stops "+i.name]=h,u.r1kc(25),delete a[u.n1kc("1",d)]["Sell Stops "+i.name]):l>h&&(u.N1kc(2),a[u.n1kc(1,d)]["Sell Stops "+i.name]=h,u.r1kc(2),delete a[u.n1kc(1,d)]["Buy Stops "+i.name]),u.r1kc(2),a[u.n1kc(1,d)]["All Stops "+i.name]=h);i.referenceOutput="All Stops",u.z17m(),i.outputMap={},i.outputMap["All Stops "+i.name]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ATR:{name:"Average True Range",calculateFN:t.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:t.Studies.displayPSAR2,calculateFN:t.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("atr feature requires first activating studies feature.")},g=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateAwesomeOscillator=function(e,i){var a;if("si","mp","le","h","l","/2",(a=i.chart.scrubbed).length<33)i.error=!0;else{t.Studies.MA("simple",5,"hl/2",0,"_MA5",e,i),t.Studies.MA("simple",34,"hl/2",0,"_MA34",e,i);for(var r=Math.max(i.startFrom,33);r<a.length;r++)"_","h","i","st",a[r]&&(a[r][i.name+"_hist"]=a[r]["_MA5 "+i.name]-a[r]["_MA34 "+i.name]);i.outputMap={},i.outputMap[i.name+"_hist"]=""}},t.Studies.displayAwesomeOscillator=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=Me;r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),o=e.pixelFromPrice(0,r,s),(l=e.layout.candleWidth-2)<2&&(l=1),h=t.Studies.determineColor(i.outputs["Increasing Bar"]),c=t.Studies.determineColor(i.outputs["Decreasing Bar"]),p.q17m(),e.canvasColor("stx_histogram"),i.underlay||(p.N1kc(0),n.globalAlpha=p.j1kc("1",2147483647)),n.fillStyle="#CCCCCC",e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var m=0;m<a.length;m++)u=a[m],p.r1kc(4),(d=a[p.j1kc(1,m)])||(d=e.getPreviousBar(e.chart,i.name+"_hist",m)),u&&(d&&(d[i.name+"_hist"]<u[i.name+"_hist"]?n.fillStyle=h:d[i.name+"_hist"]>u[i.name+"_hist"]&&(n.fillStyle=c)),u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(m,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(e.pixelFromPrice(u[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Awesome:{name:"Awesome Oscillator",seriesFN:t.Studies.displayAwesomeOscillator,calculateFN:t.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("awesomeOscillator feature requires first activating studies feature.")},f=function(e){var t;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ,Me.z17m(),t.Studies?("m","a",t.Studies.calculateBalanceOfPower=function(e,i){var a,r;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var n=i.startFrom;n<a.length;n++)"_Rati","o"," ",(r=a[n])["_Ratio "+i.name]=r.Close-r.Open,r.High-r.Low!=0&&(r["_Ratio "+i.name]/=r.High-r.Low);t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Ratio "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",centerline:0,calculateFN:t.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("balanceOfPower feature requires first activating studies feature.")},y=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Bollin","ger Bandw","idt","h","m","a","fi","el","d","Bollinge","r Bands",t.Studies.calculateBollinger=function(e,i){var a;(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"_MA",e,i),i.std=new t.Studies.StudyDescriptor(i.name,"STD Dev",i.panel),i.std.chart=i.chart,i.std.startFrom=i.startFrom,i.std.days=i.days,i.std.inputs={Field:a,"Standard Deviations":1,Type:i.inputs["Moving Average Type"]},i.std.outputs={"_STD Dev":null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.calculateGenericEnvelope(e,i,i.inputs["Standard Deviations"],"_MA "+i.name,"_STD Dev "+i.name),"Boll %b"==i.type&&(i.zoneOutput="%b")},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:t.Studies.calculateBollinger,seriesFN:t.Studies.displayChannel,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:t.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}}})):console.error("bollinger feature requires first activating studies feature.")},v=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateCCI=function(e,i){var a,r,n,s=Me;if(s.q17m(),"M","A","hlc","/3","s","i","mp","le",(a=i.chart.scrubbed).length<i.days+1){i.error=!0,-2077048709,-1184672192,2;for(var o=1;-2077048709!==s.h50(o.toString(),o.toString().length,96086);o++)return;if(-1184672192!==s.h50(2..toString(),2..toString().length,54623))return}t.Studies.MA("simple",i.days,"hlc/3",0,"MA",e,i);for(var l=Math.max(i.startFrom,i.days-1);l<a.length;l++)if("M","A"," ","hlc/","3","R","e","sult"," ",r=a[l]){n=0;for(var h=0;h<i.days;h++)"M","A"," ",n+=Math.abs(a[l-h]["hlc/3"]-r["MA "+i.name]);n/=i.days,Math.abs(n)<1e-8?(s.r1kc(16),r["Result "+i.name]=s.j1kc(1,"0")):r["Result "+i.name]=(r["hlc/3"]-r["MA "+i.name])/(.015*n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{CCI:{name:"Commodity Channel Index",calculateFN:t.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}}})):("cci feature requires fi","rst activating studi","es feature.",console.error("cci feature requires first activating studies feature."))},x=function(e){var t;Me.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Center Of Gr","avi","ty",t.Studies.calculateCenterOfGravity=function(e,t){var i,a,r,n,s,o=Me;if("C","l","o","se",(i=t.chart.scrubbed).length<t.days)t.error=!0;else{(a=t.inputs.Field)&&"field"!=a||(a="Close"),o.z17m();for(var l=Math.max(t.startFrom,t.days-1);l<i.length;l++){"R","esult ",r=0,n=0;for(var h=0;h<t.days;h++)o.r1kc(4),s=i[o.j1kc(h,l)][a],o.r1kc(63),r-=o.n1kc(h,s,"1"),n+=s;n&&(o.r1kc(10),i[l]["Result "+t.name]=o.n1kc(n,r))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:t.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}}})):console.error("centerOfGravity feature requires first activating studies feature.")},b=function(e){var t,i;t=2;for(var a=1;-168655113!==Me.M00(a.toString(),a.toString().length,68240);a++)i=""===+_CIQ?_CIQ:e.CIQ,t+=2;-1845440732!==Me.h50(t.toString(),t.toString().length,4274)&&(i=""===+_CIQ?_CIQ:e.CIQ),Me.q17m(),(i="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("m","a",i.Studies.calculateChaikinMoneyFlow=function(e,t){var i,a,r,n;if((i=t.chart.scrubbed).length<t.days)t.error=!0;else{a=0,r=0,(n=i[t.startFrom-1])&&("_","s","um","MF ",n["_sumMF "+t.name]&&(a=n["_sumMF "+t.name]),n["_sumV "+t.name]&&(r=n["_sumV "+t.name])),Me.q17m();for(var s=t.startFrom;s<i.length;s++)"_","su","m","V ",i[s].High==i[s].Low?i[s]["_MFV "+t.name]=0:i[s]["_MFV "+t.name]=i[s].Volume*(2*i[s].Close-i[s].High-i[s].Low)/(i[s].High-i[s].Low),a+=i[s]["_MFV "+t.name],r+=i[s].Volume,s>t.days-1&&("_M","FV ",a-=i[s-t.days]["_MFV "+t.name],(r-=i[s-t.days].Volume)&&(Me.r1kc(10),i[s]["Result "+t.name]=Me.n1kc(r,a))),i[s]["_sumMF "+t.name]=a,i[s]["_sumV "+t.name]=r}},i.Studies.calculateChaikinVolatility=function(e,t){var a,r,n;if("Movin","g Av","erage T","ype",(a=t.chart.scrubbed).length<t.days)t.error=!0;else{for(r=t.startFrom;r<a.length&&!a[r].futureTick;r++)a[r]["_High-Low "+t.name]=a[r].High-a[r].Low;for(i.Studies.MA(t.inputs["Moving Average Type"],t.days,"_High-Low "+t.name,0,"_MA",e,t),Me.z17m(),(n=t.inputs["Rate Of Change"])||(n=t.days),r=Math.max(t.startFrom,n);r<a.length;r++)if("_","M","A"," ","_","M","A"," ",a[r-n]["_MA "+t.name]){if(a[r].futureTick)break;a[r]["Result "+t.name]=100*(a[r]["_MA "+t.name]/a[r-n]["_MA "+t.name]-1)}}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:i.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:i.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}}})):console.error("chaikin feature requires first activating studies feature.")},S=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("a","u","to","va","riable",t.Studies.prettify.variable="vma",t.Studies.movingAverage.conversions.vma="variable",t.Studies.movingAverage.translations.variable="Variable",t.Studies.movingAverage.typeMap.vma="Variable",t.Studies.movingAverage.typeMap.variable="Variable",t.Studies.calculateChandeForecast=function(e,i){var a,r,n,s;Me.q17m(),a=2;for(var o=1;2031539513!==Me.M00(o.toString(),o.toString().length,4625);o++)r=i.chart.scrubbed,a+=2;if(-1406828236!==Me.h50(a.toString(),a.toString().length,82384)&&(r=i.chart.scrubbed),r.length<i.days+1)i.error=!0;else{(n=i.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA("time series",i.days,n,0,"MA",e,i);for(var l=Math.max(1,i.startFrom);l<r.length;l++)"Resul","t ","ob","j","ec","t",(s=r[l][n])&&"object"==Te(s)&&(s=s[i.subField]),r[l]["Result "+i.name]=100*(1-r[l]["MA "+i.name]/s)}},t.Studies.calculateChandeMomentum=function(e,t){var i,a,r,n,s,o,l,h,c,u,d=Me;for(var p in"f","i","e","ld",i=t.name,t.outputs)d.N1kc(47),i=d.j1kc(" ",i,p);if((a=t.chart.scrubbed).length<t.days+1)t.error=!0;else{r=t.inputs.Field,d.q17m(),r&&"field"!=r||(r="Close"),n=0,s=0,o=[];for(var m=t.startFrom-t.days+1;m<a.length;m++)m<1||(l=a[m][r],d.N1kc(64),h=a[d.j1kc("1",0,m)][r],l&&"object"==Te(l)&&(l=l.Close),h&&"object"==Te(h)&&(h=h.Close),void 0!==h&&(d.r1kc(4),c=d.j1kc(h,l),o.push(c),n+=c,s+=Math.abs(c),o.length==t.days&&(d.N1kc(38),a[m][i]=d.j1kc(s,100,n),n-=u=o.shift(),s-=Math.abs(u))))}},t.Studies.calculateMovingAverageVariable=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=Me;for(var S in"fi","eld",i.inputs.Type,a=i.chart.scrubbed,r=2/(i.days+1),n=null,s=i.name,i.outputs)b.r1kc(47),s=b.n1kc(" ",s,S);for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.cmo=new t.Studies.StudyDescriptor(i.name,"cmo",i.panel),i.cmo.chart=i.chart,i.cmo.days=9,i.cmo.inputs={Field:o},b.z17m(),i.cmo.startFrom=i.startFrom,i.cmo.outputs={_CMO:null},t.Studies.calculateChandeMomentum(e,i.cmo),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}if(null===n){2138798903,326820248,m=2;for(var C=1;2138798903!==b.M00(C.toString(),C.toString().length,87348);C++)n=d=2,b.N1kc(16),m+=b.j1kc(1,"2");326820248!==b.M00(m.toString(),m.toString().length,99453)&&(n=d=0)}for(g=[],h=d;h<a.length;h++)(c=(f=a[h])[o])&&"object"==Te(c)&&(c=c[i.subField]),y=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c?(f["_CMO "+i.name]||0===f["_CMO "+i.name])&&(v=Math.abs(f["_CMO "+i.name])/100,b.r1kc(65),n=x=b.n1kc(r,v,r,n,1,v,c),h<i.days&&(x=null),y?y[s]=x:h+l>=a.length&&((u={})[s]=x,g.push(u))):y?y[s]=null:h+l>=a.length&&((u={})[s]=null,g.push(u));i.appendFutureTicks(e,g)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:t.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:t.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}}})):console.error("chande feature requires first activating studies feature.")},C=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Me.z17m(),t.Studies?("0",".1","au","t","o","au","to",t.Studies.calculateChoppiness=function(e,i){var a,r,n;if(t.Studies.calculateStudyATR(e,i),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{Me.z17m();for(var s=Math.max(i.startFrom,i.days);s<a.length;s++)if(r=a[s]){if(r.futureTick)break;n=o(i.days,s),r["Sum True Range "+i.name]?r["Result "+i.name]=100*Math.log(r["Sum True Range "+i.name]/Math.max(1e-6,n[1]-n[0]))/Math.log(i.days):isNaN(r)||("Resul","t ",r["Result "+i.name]=0)}}function o(e,t){var i,r;i=-1*Number.MAX_VALUE,r=Number.MAX_VALUE;for(var n=t-e+1;n<=t;n++)n<0||(i=Math.max(i,a[n].High),r=Math.min(r,a[n].Low));return[r,i]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:t.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}}})):console.error("choppiness feature requires first activating studies feature.")},k=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Me.q17m(),t.Studies?t.Studies.initPriceRelative?("#F","F00","00","-1 t","o ","1",t.Studies.calculateCorrelationCoefficient=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g;if("Com","par","e ","To",i=t.chart.scrubbed,a=t.days,i.length<a+1)t.error=!0;else{if(t.compare=t.inputs["Compare To"],Me.z17m(),t.compare)t.compare=[t.compare];else for(var f in t.compare=[],t.outputs={},t.outputMap={},e.chart.series)(r=e.chart.series[f]).parameters.color&&("Res","ult"," ",t.compare.push(r.display),t.outputs["Result "+r.display]=r.parameters.color,t.outputMap["Result "+r.display+" "+t.name]="Result "+r.display);if(t.compare.length)for(var y=0;y<t.compare.length;y++){n=0,s=0,o=0,l=0,h=0,c=t.compare[y],u=0;for(var v=t.startFrom-a;v<i.length;v++)"_tem","ps"," ","ob","j","e","ct",i[v]&&((d=i[v][c])&&"object"==Te(d)&&(d=d.Close),d||0===d||("_te","mps ",d=v>0&&i[v-1]&&i[v-1]["_temps "+t.name]&&i[v-1]["_temps "+t.name].c?i[v-1]["_temps "+t.name].c:0),d&&"object"==Te(d)&&(d=d.Close),i[v]["_temps "+t.name]={},n+=i[v]["_temps "+t.name].b=i[v].Close,s+=i[v]["_temps "+t.name].c=d,o+=i[v]["_temps "+t.name].b2=Math.pow(i[v].Close,2),l+=i[v]["_temps "+t.name].c2=Math.pow(d,2),h+=i[v]["_temps "+t.name].bc=i[v].Close*d,u>=a&&("_tem","ps ","_te","mps ",n-=i[v-a]["_temps "+t.name].b,s-=i[v-a]["_temps "+t.name].c,o-=i[v-a]["_temps "+t.name].b2,l-=i[v-a]["_temps "+t.name].c2,h-=i[v-a]["_temps "+t.name].bc,p=o/a-Math.pow(n/a,2),m=l/a-Math.pow(s/a,2),g=(h/a-n*s/Math.pow(a,2))/Math.sqrt(p*m),i[v]["Result "+c+" "+t.name]=g),u++)}else t.error="Correlation Coefficient requires at least one comparison symbol"}},t.Studies.calculatePerformance=function(e,i){var a,r,n;if("C","lo","s","e",Me.q17m(),"Comp","arison Symbol",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),a.length<i.days+1)i.error=!0;else{t.Studies.MA("ma",i.days,"Close",0,"_MA Base",e,i),t.Studies.MA("ma",i.days,r,0,"_MA Comp",e,i);for(var s=i.startFrom;s<a.length;s++)(n=a[s][r])&&(n.Close||0===n.Close)&&(n=n.Close),a[s]["Result "+i.name]=a[s].Close/n*(a[s]["_MA Comp "+i.name]/a[s]["_MA Base "+i.name])}},t.Studies.calculateBeta=function(e,i){var a,r,n,s,o=Me;if("m","a","Comparison"," Symbol",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),a.length<i.days+1)i.error=!0;else{for(var l=Math.max(i.startFrom,1);l<a.length;l++)a[l]["_BaseChange "+i.name]=a[l].Close/a[l-1].Close-1,(n=a[l][r])&&(n.Close||0===n.Close)&&(n=n.Close),o.N1kc(4),(s=a[o.j1kc(1,l)][r])&&(s.Close||0===s.Close)&&(s=s.Close),o.r1kc(66),a[l]["_CompChange "+i.name]=o.j1kc(s,1,n);for(o.q17m(),t.Studies.MA("ma",i.days,"_BaseChange "+i.name,0,"_MA Base",e,i),t.Studies.MA("ma",i.days,"_CompChange "+i.name,0,"_MA Comp",e,i),l=Math.max(i.startFrom,i.days);l<a.length;l++)"_MA Com","p ","_CompC","hange ","_","CO","VARn ",a[l]["_COVARn "+i.name]=(a[l]["_BaseChange "+i.name]-a[l]["_MA Base "+i.name])*(a[l]["_CompChange "+i.name]-a[l]["_MA Comp "+i.name]),a[l]["_VARn "+i.name]=Math.pow(a[l]["_CompChange "+i.name]-a[l]["_MA Comp "+i.name],2);for(t.Studies.MA("ma",i.days,"_COVARn "+i.name,0,"_COVAR",e,i),t.Studies.MA("ma",i.days,"_VARn "+i.name,0,"_VAR",e,i),l=Math.max(i.startFrom,2*i.days-1);l<a.length;l++)a[l]["Result "+i.name]=a[l]["_COVAR "+i.name]/a[l]["_VAR "+i.name]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:t.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:t.Studies.initPriceRelative,seriesFN:t.Studies.displayVsComparisonSymbol,calculateFN:t.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0}})):console.error("comparisonStudies feature requires first activating priceRelative feature."):("comparisonStudies fea","ture requires first activating studies feature.",console.error("comparisonStudies feature requires first activating studies feature."))},w=function(e){var t;Me.q17m(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("f","ie","ld",t.Studies.calculateCoppock=function(e,i){var a,r,n,s,o,l,h;if("R","e","sul","t","Cl","os","e",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=parseInt(i.inputs["Long RoC"],10))||(n=14),(s=parseInt(i.inputs["Short RoC"],10))||(s=11),(o=i.days)||(o=10),!(n<s))if(a.length<Math.max(s,n,o)+1)i.error=!0;else{for(var c=Math.max(i.startFrom,n);c<a.length;c++)Me.N1kc(4),l=a[Me.n1kc(s,c)][r],Me.N1kc(4),h=a[Me.j1kc(n,c)][r],l&&h&&(a[c]["_Sum "+i.name]=100*(a[c][r]/l+a[c][r]/h-2));t.Studies.MA("weighted",o,"_Sum "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:t.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":11,"Long RoC":14}}})):console.error("coppock feature requires first activating studies feature.")},D=function(e){var t,i;t=2;for(var a=1;1292663025!==Me.h50(a.toString(),a.toString().length,40579);a++)i=""===+_CIQ?_CIQ:e.CIQ,t+=2;-1613830583!==Me.M00(t.toString(),t.toString().length,80981)&&(i="undefined"!=typeof _CIQ?_CIQ:e.CIQ),i.Studies?(i.Studies.calculateDarvas=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;for(a="A",a+="D",a+="V",r="L",r+="oss",n="P",n+="ro",n+="f",n+="it",s="Gh",s+="os",s+="t",o="Da",o+="rva",o+="s",l=t.chart.scrubbed,h=0,c=parseInt(t.inputs["ATH Lookback Period"],10),t.inputs["Volume Spike"]&&("AD","V",i.Studies.MA("simple",c,"Volume",0,"ADV",e,t)),u=parseFloat(t.inputs["Volume % of Avg"])/100,d="none",p={},m=null,g=null,f=null,y=parseFloat(t.inputs["Level Offset"]),Me.q17m(),!1,x={},[o,s,n,r,"ATH",a,"Spike"].forEach((function(e){x[e]=e+" "+t.name})),v=t.startFrom-1;v>0;v--){if(!(b=l[v])[x.Darvas]&&!b[x.Ghost]){h=b[x.ATH]||0,g=b[x.Profit],f=b[x.Loss];break}for(var C in x)b[C]=null}for(;v<l.length;v++)if("Volum","e"," Spike","Price ","Minimum",S=l[v]){if(parseFloat(t.inputs["Price Minimum"])<=l[h].Close){if("Exit ","F","ie","ld",!m||m.End&&v!=m.End+1||(l[v-1].Close>p.High?p={State:1,High:2*p.High-p.Low,Low:p.High,Start:v,End:2*p.End-p.Start+1}:m=null,m&&(S[x.Ghost]=i.clone(p),p.State=0,l[p.End]&&("Ghos","t e","nd:",l[p.End][x.Ghost]=i.clone(p)),m={Start:p.Start,End:p.End},g=p.High+y,(!f||f<p.Low-y)&&(f=p.Low-y))),S[x.Profit]=g,S[x.Loss]=f,(S.Close>=g||"high/low"==t.inputs["Exit Field"]&&S.High>=g)&&(g=null),"none"==d&&v==h+3&&!l[h+2][x.Darvas]&&!l[h+1][x.Darvas]&&!l[h][x.Darvas]&&l[h].High>S.High&&("h","igh",d="high"),"high"==d&&(S.High>l[h].High?d="none":l[v-3].Low<l[v-2].Low&&l[v-3].Low<l[v-1].Low&&l[v-3].Low<S.Low&&("Darvas esta","blished:",p={State:1,High:l[h].High,Low:l[v-3].Low,Start:h},l[h][x.Darvas]=i.clone(p),d="darvas",m&&(m.End>v&&l[m.Start]&&(S[x.Ghost]=i.clone(l[m.Start][x.Ghost]),S[x.Ghost].End=v,l[m.End]&&delete l[m.End][x.Ghost]),S[x.Ghost].State=0,l[m.Start][x.Ghost].End=v,m=null),g=p.High+y,(!f||f<p.Low-y)&&(f=p.Low-y))),"darvas"==d&&("no","n","e","no","ne","no","n","e","hig","h/low","h","igh","/","low",S.Close>p.High||"high/low"==t.inputs["Exit Field"]&&S.High>p.High?m={}:(S.Close<p.Low||"high/low"==t.inputs["Exit Field"]&&S.Low<p.Low)&&(d="none"),m?d="none":"none"==d&&(g=null,f=null),t.inputs["Ghost Boxes"]||(m=null),"none"==d)){"Darvas"," end:";for(var k=p.Start+1;k<v;k++)l[k][x.Darvas]=i.clone(p);p.State=0,p.End=v,S[x.Darvas]=i.clone(p),S[x.ATH]=h;continue}f&&("hig","h","/l","ow","Exit"," Field",(S.Close<p.Low||"high/low"==t.inputs["Exit Field"]&&S.Low<p.Low)&&("darvas"==d&&(d="none"),(S.Close<f||"high/low"==t.inputs["Exit Field"]&&S.Low<f)&&(g=null,f=null),m&&(m.End>v&&l[m.Start]&&(S[x.Ghost]=i.clone(l[m.Start][x.Ghost]),S[x.Ghost].End=v,l[m.End]&&("Gh","ost End remo","ved:",delete l[m.End][x.Ghost])),S[x.Ghost].State=0,l[m.Start][x.Ghost].End=v,m=null)))}if(S.High>=l[h].High&&(h=v),(v<3||S.High>=l[v-1].High&&S.High>=l[v-2].High&&S.High>=l[v-3].High)&&v-h>=c){h=v;for(var w=0;w<c&&!(v-w<0);w++)l[v-w].High>l[h].High&&(Me.N1kc(4),h=Me.n1kc(w,v));0}t.inputs["Volume Spike"]&&v>c&&v==h&&S[x.ADV]*u<S.Volume&&("V","olu","me Spi","ke:",S[x.Spike]=1),S[x.ATH]=h}},i.Studies.displayDarvas=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L=Me;if((r=i.Studies.determineColor(t.outputs.Levels))&&"auto"!=r&&!i.isTransparent(r)||(r=e.defaultColor),(n=i.Studies.determineColor(t.outputs.Darvas))&&"auto"!=n&&!i.isTransparent(n)||(n=e.defaultColor),(s=i.Studies.determineColor(t.outputs.Ghost))&&"auto"!=s&&!i.isTransparent(s)||(s=e.defaultColor),o=e.panels[t.panel],l=t.getContext(e),(d=e.layout.candleWidth-2)<2&&(d=1),e.startClip(t.panel),t.inputs["Stop Levels"]){if(l.setLineDash){-1669020157,L.r1kc(15),p=-L.j1kc("1756851724",1756652548),m=2;for(var q=1;-1669020157!==L.h50(q.toString(),q.toString().length,33376);q++)l.setLineDash([2,2]),m+=2;L.M00(m.toString(),m.toString().length,50827)!==p&&l.setLineDash([0,6])}for(L.N1kc(16),l.lineWidth=L.n1kc(1,"2"),l.strokeStyle=r,l.beginPath(),h=0;h<a.length;h++)"Los","s"," ","Lo","ss ","L","o","ss ",c=a[h],L.r1kc(41),g=a[L.n1kc("1",h)],c&&(u=c["Loss "+t.name]?Math.floor(e.pixelFromPrice(c["Loss "+t.name],o)):null,f=g&&g["Loss "+t.name]?Math.floor(e.pixelFromPrice(g["Loss "+t.name],o)):null,u&&(c.candleWidth&&(d=Math.floor(Math.max(1,c.candleWidth))),y=Math.floor(e.pixelFromBar(h,o.chart)+d/2),v=Math.floor(e.pixelFromBar(h,o.chart)-d/2),f&&f>=u?l.lineTo(v,u):0===h?l.moveTo(e.chart.left,u):l.moveTo(v,u),l.lineTo(y,u)));l.stroke(),l.setLineDash&&l.setLineDash([]),l.lineWidth=1}for(x=-10,S=0,k=-10,D=0,T=!1,M=!1,P=l.measureText("").width/2,F=0,h=0;h<a.length;h++)"Gh","os","t Boxes","Ghost"," ","Sp","ik","e ",a[h]&&((a[h].Close||0===a[h].Close)&&(F=h),a[h]["Spike "+t.name]&&(l.fillStyle=n,l.textBaseline="bottom",_=e.pixelFromPrice(a[h].High,e.chart.panel),l.fillText("",e.pixelFromBar(h)-P,_-5)),a[h].candleWidth&&(d=Math.floor(Math.max(1,a[h].candleWidth))),a[h]["Darvas "+t.name]&&("D","arva","s"," ",1!=(c=a[h]["Darvas "+t.name]).State||T?0===c.State&&(S=Math.floor(e.pixelFromBar(h,o.chart)+d/2)-x,b=Math.floor(e.pixelFromPrice(c.High,o)),C=Math.floor(e.pixelFromPrice(c.Low,o))-b,l.strokeStyle=n,l.fillStyle=n,t.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(x,b,S,C),l.globalAlpha=.2),l.fillRect(x,b,S,C),l.globalAlpha=1,T=!1):(x=Math.floor(e.pixelFromBar(h,o.chart)-d/2),b=Math.floor(e.pixelFromPrice(c.High,o)),C=Math.floor(e.pixelFromPrice(c.Low,o))-b,T=!0)),a[h]["Ghost "+t.name]&&t.inputs["Ghost Boxes"]&&(1!=(c=a[h]["Ghost "+t.name]).State||M?0===c.State&&(c.Start==c.End&&(k=Math.floor(e.pixelFromBar(h,o.chart)-d/2)),D=Math.floor(e.pixelFromBar(h,o.chart)+d/2)-k,w=Math.floor(e.pixelFromPrice(c.High,o)),A=Math.floor(e.pixelFromPrice(c.Low,o))-w,l.strokeStyle=s,l.fillStyle=s,t.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(k,w,D,A),l.globalAlpha=.2),l.fillRect(k,w,D,A),l.globalAlpha=1,M=!1):(k=Math.floor(e.pixelFromBar(h,o.chart)-d/2),w=Math.floor(e.pixelFromPrice(c.High,o)),D=Math.floor((c.End-c.Start+1)*e.layout.candleWidth+d/2),A=Math.floor(e.pixelFromPrice(c.Low,o))-w,M=!0)));T&&(S=Math.floor(e.pixelFromBar(F,o.chart)+d/2)-x,l.strokeStyle=n,l.fillStyle=n,t.inputs["Stop Levels"]?l.globalAlpha=.3:(l.beginPath(),L.r1kc(12),l.moveTo(L.j1kc(2,x,S),b),l.lineTo(x,b),L.r1kc(2),l.lineTo(x,L.j1kc(C,b)),L.N1kc(12),l.lineTo(L.n1kc(2,x,S),L.n1kc(C,b,L.r1kc(2))),l.stroke(),l.globalAlpha=.2),L.r1kc(16),l.fillRect(x,b,L.j1kc(S,2),C),l.globalAlpha=1),M&&(l.strokeStyle=s,l.fillStyle=s,t.inputs["Stop Levels"]?l.globalAlpha=.3:(l.strokeRect(k,w,D,A),l.globalAlpha=.2),l.fillRect(k,w,D,A),l.globalAlpha=1),(T||M)&&(t.inputs["Stop Levels"]&&(l.setLineDash&&l.setLineDash([2,2]),l.lineWidth=2,l.strokeStyle=r,E=Math.floor(e.pixelFromBar(F-1,o.chart)+d/2),u&&(l.beginPath(),l.moveTo(E,u),l.lineTo(T?x+2*S:k+D,u),l.stroke()),l.setLineDash&&l.setLineDash([]),l.lineWidth=1),T=!1,M=!1),e.endClip()},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{Darvas:{name:"Darvas Box",underlay:!0,calculateFN:i.Studies.calculateDarvas,seriesFN:i.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("darvasBox feature requires first activating studies feature.")},A=function(e){var t;t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ,Me.z17m(),t.Studies?("Detrende","d Price Oscillator",t.Studies.calculateDetrendedPrice=function(e,i){var a,r,n,s,o;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r=i.inputs.Field,Me.z17m(),r&&"field"!=r||(r="Close"),n=Math.floor(i.days/2+1),t.Studies.MA(i.inputs["Moving Average Type"],i.days,r,-n,"MA",e,i);for(var l=Math.max(i.days-n-1,i.startFrom-n);l<a.length-n;l++)"M","A"," ",(s=a[l][r])&&"object"==Te(s)&&(s=s[i.subField]),o=a[l]["MA "+i.name],!s&&0!==s||!o&&0!==o||(Me.N1kc(4),a[l]["Result "+i.name]=Me.j1kc(o,s))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Detrended:{name:"Detrended Price Oscillator",calculateFN:t.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):("detrended feature requires f","irst activating studies feature.",console.error("detrended feature requires first activating studies feature."))},T=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateDisparity=function(e,i){var a,r,n;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),Me.z17m(),t.Studies.MA(i.inputs["Moving Average Type"],i.days,r,0,"_MA",e,i);for(var s=Math.max(i.startFrom,i.days-1);s<a.length;s++)"_","M","A"," ",a[s]&&(n=a[s]["_MA "+i.name])&&(a[s]["Result "+i.name]=100*(a[s][r]/n-1))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Disparity:{name:"Disparity Index",calculateFN:t.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):console.error("disparity feature requires first activating studies feature.")},M=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateEaseOfMovement=function(e,i){var a,r,n,s,o,l;if((a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(var h=Math.max(1,i.startFrom);h<a.length;h++)"_EOM","1 ",r=(a[h].High+a[h].Low)/2,n=(a[h-1].High+a[h-1].Low)/2,Me.N1kc(4),s=Me.n1kc(n,r),o=a[h].Volume/1e8/(a[h].High-a[h].Low),Me.N1kc(10),l=Me.n1kc(o,s),isFinite(l)?a[h]["_EOM1 "+i.name]=l:a[h]["_EOM1 "+i.name]=NaN;t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_EOM1 "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{EOM:{name:"Ease of Movement",calculateFN:t.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("easeOfMovement feature requires first activating studies feature.")},P=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o",t.Studies.calculateEhlerFisher=function(e,t){var i,a,r,n,s;if(Me.q17m(),"_","n"," ",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{a=0,t.startFrom>1&&(a=i[t.startFrom-1]["_n "+t.name]);for(var o=t.startFrom;o<i.length&&("E","F"," ","E","F"," ",!(r=i[o]).futureTick);o++)o<t.days-1?("EF ","Trigger ","E","F"," ",r["EF "+t.name]=r["EF Trigger "+t.name]=a):(n=l(t.days,o),(a=.66*(((i[o].High+i[o].Low)/2-n[0])/Math.max(1e-6,n[1]-n[0])-.5)+.67*a)>0?a=Math.min(a,.9999):a<0&&(Me.r1kc(4),a=Math.max(a,-Me.n1kc(0,"0.9999"))),s=o?i[o-1]["EF "+t.name]:0,r["EF "+t.name]=.5*Math.log((1+a)/(1-a))+.5*s,r["EF Trigger "+t.name]=s,r["_n "+t.name]=a)}function l(e,t){var a,r,n;a=Number.MAX_VALUE,r=-1*Number.MAX_VALUE,Me.z17m();for(var s=t-e+1;s<=t;s++)n=(i[s].High+i[s].Low)/2,a=Math.min(a,n),r=Math.max(r,n);return[a,r]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:t.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}}})):console.error("ehlerFisher feature requires first activating studies feature.")},F=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("#5F7CB","8","Elder Impulse ","S","y","stem","#","00DD0","0","Elder"," Forc","e ","Index",t.Studies.calculateElderImpulse=function(e,i){var a,r,n,s,o;Me.z17m(),a=i.chart.scrubbed,r=i.outputs.Bullish,n=i.outputs.Bearish,s=i.outputs.Neutral,t.Studies.MA("exponential",13,"Close",0,"_MA",e,i),i.macd=new t.Studies.StudyDescriptor("_"+i.name,"macd",i.panel),i.macd.chart=i.chart,i.macd.days=i.days,i.macd.startFrom=i.startFrom,i.macd.inputs={"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},i.macd.outputs={_MACD:null,_Signal:null},t.Studies.calculateMACD(e,i.macd);for(var l=i.startFrom;l<a.length;l++)"R","esult ","_","hi","s","t","_","MA ","_","h","is","t",o=0===l?s:a[l]["_MA "+i.name]>a[l-1]["_MA "+i.name]&&a[l]["_"+i.name+"_hist"]>a[l-1]["_"+i.name+"_hist"]?r:a[l]["_MA "+i.name]<a[l-1]["_MA "+i.name]&&a[l]["_"+i.name+"_hist"]<a[l-1]["_"+i.name+"_hist"]?n:s,a[l]["Result "+i.name]=o},t.Studies.calculateElderRay=function(e,i){var a;if("C","l","ose",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{t.Studies.MA("exponential",i.days,"Close",0,"_EMA",e,i);for(var r=Math.max(i.startFrom,i.days-1);r<a.length;r++)a[r][i.name+"_hist1"]=a[r].High-a[r]["_EMA "+i.name],a[r][i.name+"_hist2"]=a[r].Low-a[r]["_EMA "+i.name];Me.q17m(),i.outputMap={},i.outputMap[i.name+"_hist1"]="",i.outputMap[i.name+"_hist2"]=""}},t.Studies.calculateElderForce=function(e,i){var a;if("_","EF1 ",(a=i.chart.scrubbed).length<i.days)i.error=!0;else{for(var r=Math.max(1,i.startFrom);r<a.length;r++)a[r]["_EF1 "+i.name]=a[r].Volume*(a[r].Close-a[r-1].Close);t.Studies.MA("exponential",i.days,"_EF1 "+i.name,0,"Result",e,i)}},t.Studies.initElderImpulse=function(e,i,a,r,n,s){var o;return"col","ored",Me.z17m(),"_bar",o=t.Studies.initializeFN(e,i,a,r,n,s),n.calculateOnly||(e.chart.customChart={chartType:"colored_bar",colorFunction:function(e,t,i){var a;Me.q17m();for(var r=1;-939188974!==Me.h50(r.toString(),r.toString().length,54748);r++)return((a=t["object"-o.name])||"object"!==!a)&&(a=a.color),a;return 945658236!==Me.h50(2..toString(),2..toString().length,55387)?("ob","ject",(a=t["object"*o.name])&&"object"===-a&&(a=a.color),a):((a=t["Result "+o.name])&&"object"==Te(a)&&(a=a.color),a)}},e.setMainSeriesRenderer()),o},t.Studies.displayElderForce=function(e,i,a){var r,n,s,o,l;t.Studies.displaySeriesAsLine(e,i,a),r=t.Studies.determineColor(i.outputs.Result),n=e.panels[i.panel],s=i.getYAxis(e),o={skipTransform:n.name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:0,color:r,yAxis:s},l=2;for(var h=1;1191588874!==Me.M00(h.toString(),h.toString().length,13541);h++)(-i.highlight||e.highlightedDraggable)&&(o.opacity=593),o.direction=7,t.preparePeakValleyFill(e,o),o.direction=8,t.preparePeakValleyFill(e,o),l+=2;166557970!==Me.h50(l.toString(),l.toString().length,29144)&&(!i.highlight&&e.highlightedDraggable&&(o.opacity=.3),o.direction=1,t.preparePeakValleyFill(e,o),o.direction=-1,t.preparePeakValleyFill(e,o))},t.Studies.displayElderRay=function(e,i,a){var r,n,s,o,l,h,c;r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),o=e.pixelFromPrice(0,r,s),(l=e.layout.candleWidth-2)<2&&(l=1),e.canvasColor("stx_histogram"),h=n.fillStyle,i.underlay||(n.globalAlpha=1),e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var u=0;u<a.length;u++)"_hi","s","t2","_h","ist1","Elder Bear ","Po","wer","Elder Bul","l ","Po","wer",(c=a[u])&&(c.candleWidth&&(l=Math.floor(Math.max(1,c.candleWidth-2))),c[i.name+"_hist1"]>0&&d(u,0,"Elder Bull Power","_hist1"),c[i.name+"_hist2"]<0&&d(u,0,"Elder Bear Power","_hist2"),c[i.name+"_hist1"]<0&&(Me.r1kc(16),d(u,Me.n1kc(1,"0.1"),"Elder Bull Power","_hist1")),c[i.name+"_hist2"]>0&&d(u,.1,"Elder Bear Power","_hist2"));function d(a,h,u,d){n.fillStyle=t.Studies.determineColor(i.outputs[u]),n.fillRect(Math.floor(e.pixelFromBar(a,r.chart)-l/2+l*h),Math.floor(o),Math.floor(l*(1-2*h)),Math.floor(e.pixelFromPrice(c[i.name+d],r,s)-o))}e.endClip(),Me.z17m(),n.fillStyle=h},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Elder Force":{name:"Elder Force Index",calculateFN:t.Studies.calculateElderForce,seriesFN:t.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:t.Studies.displayElderRay,calculateFN:t.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:t.Studies.calculateElderImpulse,initializeFN:t.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:"#DD3E39",Neutral:"#5F7CB8"},removeFN:function(e,t){e.chart.customChart=null,Me.q17m(),e.setMainSeriesRenderer()}}})):console.error("elder feature requires first activating studies feature.")},_=function(e){var t;Me.z17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Fractal Chaos Oscilla","t","or",t.Studies.calculateFractalChaos=function(e,t){var i,a,r,n,s,o,l;i=t.chart.scrubbed,a=0,r=0,Me.N1kc(0),n=Me.j1kc("0",2147483647),t.startFrom&&"Fractal Chaos Bands"==t.type&&(a=i[t.startFrom-1]["Fractal High "+t.name],r=i[t.startFrom-1]["Fractal Low "+t.name]);for(var h=Math.max(4,t.startFrom);h<i.length&&!i[h].futureTick;h++){for(s=!isNaN(i[h].High),o=!isNaN(i[h].Low),(s||o)&&(i[h]["Result "+t.name]=0),n=0,l=0;l<=h&&i[h-l]&&!(i[h-l].High>i[h-2].High)&&!(l<2&&i[h-l].High==i[h-2].High);l++)if(i[h-l].High<i[h-2].High&&n++,4==n){a=i[h-2].High;break}for("Fractal Chaos Bands"==t.type?s&&(i[h]["Fractal High "+t.name]=a>0?a:null):4==n&&("R","esult ",Me.r1kc(21),i[h]["Result "+t.name]=Me.j1kc("1",738872704)),n=0,l=0;l<=h&&i[h-l]&&!(i[h-l].Low<i[h-2].Low)&&!(l<2&&i[h-l].Low==i[h-2].Low);l++)if(i[h-l].Low>i[h-2].Low&&n++,4==n){r=i[h-2].Low;break}"Fractal Chaos Bands"==t.type?o&&(i[h]["Fractal Low "+t.name]=r>0?r:null):4==n&&("Res","ult ",i[h]["Result "+t.name]=-1)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:t.Studies.calculateFractalChaos,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}}})):console.error("fractalChaos feature requires first activating studies feature.")},E=function(e){var t;Me.z17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","to","Wil","liams %R","Highest High"," Val","ue","aut","o","au","to",t.Studies.calculateMaxHighMinLow=function(e,t){var i,a,r,n,s,o,l,h=Me;if("Low"," Peri","o","d","Low P","eriod","Hi","gh Period",i=t.chart.scrubbed,a=t.days,r=t.days,t.inputs["High Period"]&&(a=t.inputs["High Period"]),t.inputs["Low Period"]&&(r=t.inputs["Low Period"]),i.length<Math.max(a,r)+1)t.error=!0;else{if(n=Number.MAX_VALUE,s=-1*Number.MAX_VALUE,t.startFrom>1){for(o=1;o<a;o++)t.startFrom-o>=0&&(s=Math.max(s,i[t.startFrom-o].High));for(o=1;o<r;o++)t.startFrom-o>=0&&(n=Math.min(n,i[t.startFrom-o].Low))}for(var c=Math.max(0,t.startFrom-1);c<i.length;c++){if("Gopal","a",s=Math.max(s,i[c].High),n=Math.min(n,i[c].Low),c>=a&&i[c-a].High==s)for(s=i[c].High,o=1;o<a;o++)s=Math.max(s,i[c-o].High);if(c>=r&&i[c-r].Low==n)for(n=i[c].Low,o=1;o<r;o++)n=Math.min(n,i[c-o].Low);if(l=0,"HHV"==t.type)l=s;else if("LLV"==t.type)l=n;else if("Donchian Width"==t.type)h.r1kc(4),l=h.j1kc(n,s);else if("GAPO"==t.type||"Gopala"==t.type)l=Math.log(s-n)/Math.log(r);else{if("VT HZ Filter"==t.type){h.r1kc(4),l=h.j1kc(n,s),i[c]["_MHML "+t.name]=l;continue}if("Williams %R"==t.type){l=-100*(s-i[c].Close)/(s-n),i[c]["Result "+t.name]=l;continue}}if(c==i.length-1)break;i[c+1].futureTick||("Donchian Channel"==t.type?("Donch","ian H","i","gh ",h.r1kc(2),i[h.j1kc(1,c)]["Donchian High "+t.name]=s,h.r1kc(2),i[h.j1kc(1,c)]["Donchian Low "+t.name]=n,h.r1kc(2),i[h.n1kc(1,c)]["Donchian Median "+t.name]=h.n1kc(n,"2",s,0,h.r1kc(67))):(h.r1kc(2),i[h.j1kc(1,c)]["Result "+t.name]=l))}}},t.Studies.calculateVerticalHorizontalFilter=function(e,i){var a,r,n,s,o,l,h=Me;h.r1kc(27),a=-h.n1kc(1524383712,"1007137510"),r=2;for(var c=1;h.h50(c.toString(),c.toString().length,1829)!==a;c++)n=i.chart.scrubbed,r+=2;if(-1897282295!==h.M00(r.toString(),r.toString().length,75172)&&(n=i.chart.scrubbed),n.length<i.days+1)i.error=!0;else{i.mhml=new t.Studies.StudyDescriptor(i.name,i.type,i.panel),i.mhml.chart=i.chart,i.mhml.days=i.days,i.mhml.startFrom=i.startFrom,h.z17m(),i.mhml.inputs={},i.mhml.outputs={_MHML:null},t.Studies.calculateMaxHighMinLow(e,i.mhml),s=0,o=[];for(var u=Math.max(1,i.startFrom-i.days);u<n.length;u++)l=Math.abs(n[u].Close-n[u-1].Close),o.push(l),s+=l,o.length==i.days&&(n[u]["Result "+i.name]=n[u]["_MHML "+i.name]/s,s-=o.shift())}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:t.Studies.calculateMaxHighMinLow,seriesFN:t.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:t.Studies.calculateMaxHighMinLow},HHV:{name:"Highest High Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:t.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:t.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:"High Minus Low",calculateFN:function(e,t){var i;Me.q17m(),i=t.chart.scrubbed;for(var a=t.startFrom;a<i.length;a++)i[a]["Result "+t.name]=i[a].High-i[a].Low},inputs:{}}})):("highLo","w","Studies feature requires first activating studies feature.",console.error("highLowStudies feature requires first activating studies feature."))},L=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Me.z17m(),t.Studies?("#","FF0000",t.Studies.calculateIchimoku=function(e,t){var i,a,r,n,s,o,l,h;function c(e,t){var a,r;a=Number.MAX_VALUE,r=-1*Number.MAX_VALUE;for(var n=t-e+1;n<=t;n++)n<0||(a=Math.min(a,i[n].Low),r=Math.max(r,i[n].High));return[a,r]}for(Me.z17m(),"Leading Span B Peri","od",i=t.chart.scrubbed,a={Base:Number(t.inputs["Base Line Period"]),Conv:Number(t.inputs["Conversion Line Period"]),LeadB:Number(t.inputs["Leading Span B Period"]),Lag:Number(t.inputs["Lagging Span Period"])},r=t.startFrom;r<i.length;r++)"Conversio","n Line ",i[r]&&(n=c(a.Conv,r),i[r]["Conversion Line "+t.name]=(n[1]+n[0])/2,n=c(a.Base,r),i[r]["Base Line "+t.name]=(n[1]+n[0])/2,r<a.Lag||(i[r-a.Lag]["Lagging Span "+t.name]=i[r].Close));for(s=[],r=Math.max(0,t.startFrom-a.Base);r<i.length;r++)n=c(a.LeadB,r),o=(i[r]["Conversion Line "+t.name]+i[r]["Base Line "+t.name])/2,l=(n[1]+n[0])/2,i[r+a.Base]?("Leading Sp","an B ",i[r+a.Base]["Leading Span A "+t.name]=o,i[r+a.Base]["Leading Span B "+t.name]=l):((h={})["Leading Span A "+t.name]=o,h["Leading Span B "+t.name]=l,s.push(h));t.appendFutureTicks(e,s)},t.Studies.displayIchimoku=function(e,i,a){var r,n,s,o,l,h,c;r="Leading Span A "+i.name,n="Leading Span B "+i.name,s=t.Studies.determineColor(i.outputs[i.outputMap[r]]),o=t.Studies.determineColor(i.outputs[i.outputMap[n]]),l=e.panels[i.panel],h=i.getYAxis(e),c={topBand:r,bottomBand:n,topColor:s,bottomColor:o,skipTransform:l.name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&e.highlightedDraggable&&(c.opacity*=.3),t.fillIntersecting(e,i.panel,c),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:t.Studies.calculateIchimoku,seriesFN:t.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}}})):("ichimoku feature requires first activating studies"," feature.",console.error("ichimoku feature requires first activating studies feature."))},q=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateIntradayMomentum=function(e,t){var i,a,r,n,s,o;if(Me.z17m(),i=t.chart.scrubbed,a=t.days,i.length<a+1)t.error=!0;else{r=0,n=0,t.startFrom>1&&("_t","ot","D","n ",r=i[t.startFrom-1]["_totUp "+t.name],n=i[t.startFrom-1]["_totDn "+t.name]);for(var l=t.startFrom;l<i.length;l++)(s=i[l].Close-i[l].Open)>0?r+=s:n-=s,l>=a&&((o=i[l-a].Close-i[l-a].Open)>0?r-=o:n+=o),Me.r1kc(68),i[l]["Result "+t.name]=Me.n1kc(r,100,n,r),i[l]["_totUp "+t.name]=r,i[l]["_totDn "+t.name]=n}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:t.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):("intradayMomentum feature requires ","first activating studies feature.",console.error("intradayMomentum feature requires first activating studies feature."))},I=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","a","u","t","o","e","m","a",t.Studies.calculateKeltner=function(e,i){t.Studies.MA(i.inputs["Moving Average Type"],i.days,"Close",0,"MA",e,i),t.Studies.calculateStudyATR(e,i),t.Studies.calculateGenericEnvelope(e,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateKeltner,inputs:{Period:50,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")},N=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","to",t.Studies.calculateKlinger=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;if("expone","nti","al","exponen","tial",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{for(s=i.name+"_hist",o="Klinger "+i.name,l="KlingerSignal "+i.name,Me.z17m(),h="_SV "+i.name,c="_EMA-S "+i.name,u="_EMA-L "+i.name,d=Math.max(1,i.startFrom);d<a.length;d++)p=a[d].Volume,a[d]["hlc/3"]<a[d-1]["hlc/3"]&&(p*=-1),p&&(a[d][h]=p);for(t.Studies.MA("exponential",r,h,0,"_EMA-S",e,i),t.Studies.MA("exponential",n,h,0,"_EMA-L",e,i),d=Math.max(n,i.startFrom);d<a.length&&(!a[d].futureTick&&null!==a[d][c]&&null!==a[d][u]);d++)a[d][o]=a[d][c]-a[d][u];for(t.Studies.MA("exponential",Number(i.inputs["Signal Periods"]),o,0,"KlingerSignal",e,i),d=i.startFrom;d<a.length;d++)a[d][s]=a[d][o]-a[d][l];i.outputMap[s]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("klinger feature requires first activating studies feature.")},O=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Ti","me Seri","es Forecast","Linea","r Reg Forecas","t","Time"," Series","ti","me"," seri","es",t.Studies.prettify["time series"]="tsma",t.Studies.movingAverage.conversions.tsma="time series",t.Studies.movingAverage.translations["time series"]="Time Series",t.Studies.movingAverage.typeMap.tsma="TimeSeries",t.Studies.movingAverage.typeMap["time series"]="TimeSeries",t.Studies.calculateMovingAverageTimeSeries=function(e,i){var a,r,n,s,o,l,h,c,u=Me;for(var d in i.ma=new t.Studies.StudyDescriptor(i.name,"ma",i.panel),i.ma.chart=i.chart,i.ma.days=i.days,i.ma.startFrom=i.startFrom,i.ma.inputs=i.inputs,t.Studies.calculateLinearRegressionIndicator(e,i.ma),a=i.name,i.outputs)u.N1kc(47),a=u.j1kc(" ",a,d);r=parseInt(i.inputs.Offset,10),isNaN(r)&&(u.N1kc(16),r=u.n1kc(1,"0")),n=i.chart.scrubbed,s=r;for(var p=i.startFrom-1;p>=0;p--)if((o=n[p][a])||0===o){if(!(s>0))break;s--}for(l=[],p++;p<n.length;p++)h=n[p],p+r>=0&&(p+r<n.length?(u.r1kc(2),n[u.n1kc(r,p)][a]=h["Forecast "+i.name]):((c={})[a]=h["Forecast "+i.name],l.push(c)));i.appendFutureTicks(e,l)},t.Studies.calculateLinearRegressionIndicator=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g;if("fi","e","ld",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(a=t.inputs.Field)&&"field"!=a||(a="Close"),r=t.days*(t.days+1)/2,n=Math.pow(r,2),s=r*(2*t.days+1)/3,o=0,Me.r1kc(21),l=Me.n1kc("0",1804931872),h=0,t.startFrom&&(c=i[t.startFrom-1]["_sums "+t.name])&&(l=c[0],o=c[1],h=c[2]);for(var f=t.startFrom;f<i.length;f++)if("R","S","quared ","For","eca","st ","Intercep","t ",(u=i[f][a])&&"object"==Te(u)&&(u=u[t.subField]),(u||0===u)&&(l+=t.days*u-o,o+=u,h+=Math.pow(u,2),!(f<t.days-1))){if(f>t.days-1){if((d=i[f-t.days][a])&&"object"==Te(d)&&(d=d[t.subField]),!d&&0!==d)continue;o-=d,h-=Math.pow(d,2)}p=(t.days*l-r*o)/(t.days*s-n),i[f]["Slope "+t.name]=p,m=(o-p*r)/t.days,i[f]["Intercept "+t.name]=m,i[f]["Forecast "+t.name]=m+p*t.days,g=(t.days*s-n)/(t.days*h-Math.pow(o,2)),Me.r1kc(69),i[f]["RSquared "+t.name]=Me.n1kc(g,p,p),i[f]["_sums "+t.name]=[l,o,h]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},"LR Slope":{name:"Linear Reg Slope",calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:t.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}}})):console.error("linearRegression feature requires first activating studies feature.")},H=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","F","F0000",t.Studies.calculateMACD=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m=Me;if("S","i","g","nal","Clos","e","fi","eld","S","ig","nal Per","iod",a=i.chart.scrubbed,r=i.inputs,n=i.name,i.macd1Days||(i.macd1Days=parseFloat(r["Fast MA Period"])),i.macd2Days||(i.macd2Days=parseFloat(r["Slow MA Period"])),i.signalDays||(i.signalDays=parseFloat(r["Signal Period"])),i.days||(i.days=Math.max(i.macd1Days,i.macd2Days,i.signalDays)),a.length<i.days+1)i.error=!0;else{for((s=i.inputs.Field)&&"field"!=s||(s="Close"),(o=r["Moving Average Type"])||(o="exponential"),t.Studies.MA(o,i.macd1Days,s,0,"_MACD1",e,i),m.z17m(),t.Studies.MA(o,i.macd2Days,s,0,"_MACD2",e,i),l=c=Math.max(i.startFrom,i.days-1);l<a.length;l++)"_M","ACD1"," ",!(h=a[l])["_MACD1 "+n]&&0!==h["_MACD1 "+n]||!h["_MACD2 "+n]&&0!==h["_MACD2 "+n]||(m.N1kc(2),h[m.j1kc(n,"MACD ")]=h["_MACD1 "+n]-h["_MACD2 "+n]);for((u=r["Signal MA Type"])||(u="exponential"),t.Studies.MA(u,i.signalDays,"MACD "+n,0,"Signal",e,i),m.r1kc(2),d=m.j1kc("_hist",n),l=c;l<a.length;l++)"Si","g","na","l ",h=a[l],m.N1kc(2),((p=h[m.n1kc(n,"Signal ")])||0===p)&&(h[d]=h["MACD "+n]-h["Signal "+n]);i.outputMap[d]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:t.Studies.calculateMACD,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):("macd feature requires first a","c","tivating s","tudies feature.",console.error("macd feature requires first activating studies feature."))},R=function(e){var t,i;Me.q17m(),t=2;for(var a=1;-51881522!==Me.h50(a.toString(),a.toString().length,10429);a++)i=""!=-_CIQ?_CIQ:e.CIQ,t+=2;1255432167!==Me.h50(t.toString(),t.toString().length,60398)&&(i=""!=-_CIQ?_CIQ:e.CIQ),(i="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("M","ass Inde","x",i.Studies.calculateMassIndex=function(e,t){var a,r;if("_","total ","_EM","A2","_","E","MA"," ",(a=t.chart.scrubbed).length<Math.max(9,t.days+1))t.error=!0;else{for(var n=t.startFrom;n<a.length;n++)a[n]["_High-Low "+t.name]=a[n].High-a[n].Low;i.Studies.MA("exponential",9,"_High-Low "+t.name,0,"_EMA",e,t),i.Studies.MA("exponential",9,"_EMA "+t.name,0,"_EMA2",e,t),r=0,a[t.startFrom-1]&&a[t.startFrom-1]["_total "+t.name]&&(r=a[t.startFrom-1]["_total "+t.name]);for(var s=Math.max(17,t.startFrom);s<a.length;s++)"_EM","A","2"," ",r+=a[s]["_EMA "+t.name]/a[s]["_EMA2 "+t.name],s>=17+t.days-1&&(a[s]["Result "+t.name]=r,r-=a[s-t.days+1]["_EMA "+t.name]/a[s-t.days+1]["_EMA2 "+t.name]),a[s]["_total "+t.name]=r}},i.Studies.displayMassIndex=function(e,t,a){var r,n,s,o;i.Studies.displaySeriesAsLine(e,t,a),r=t.inputs["Bulge Threshold"],e.panels[t.panel],n=t.getYAxis(e),s=i.Studies.determineColor(t.outputs.Result),o={skipTransform:e.panels[t.panel].name!=t.chart.name,panelName:t.panel,band:"Result "+t.name,threshold:r,direction:1,color:s,yAxis:n,opacity:.3},!t.highlight&&e.highlightedDraggable&&(Me.r1kc(4),o.opacity*=Me.n1kc(0,"0.3")),i.preparePeakValleyFill(e,o),i.Studies.drawHorizontal(e,t,null,r,n,s)},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Mass Idx":{name:"Mass Index",seriesFN:i.Studies.displayMassIndex,calculateFN:i.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}}})):console.error("massIndex feature requires first activating studies feature.")},j=function(e){var t;Me.z17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("au","to","M","oney Flow In","dex",t.Studies.calculateMoneyFlowIndex=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p=Me;if("R","esult"," ","_","cumM",p.q17m(),"F"," ","_ra","wMF ",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{a=0,r=0,n=i[t.startFrom-1],s="_rawMF "+t.name,o="_cumMF "+t.name,l="Result "+t.name,n&&n[o]&&(a=n[o][0],r=n[o][1]);for(var m=t.startFrom;m<i.length;m++)h=i[m]["hlc/3"],m>0&&!i[m].futureTick&&(p.N1kc(4),c=i[p.n1kc(1,m)]["hlc/3"],u=h*i[m].Volume,h>c?a+=u:h<c?(p.N1kc(27),r-=u*=-p.j1kc(1411204096,"1")):u=0,m>t.days&&((d=i[m-t.days][s])>0?a-=d:r+=d,0===r?i[m][l]=100:i[m].Volume&&(p.N1kc(70),i[m][l]=p.n1kc(0,"100",1,"100",a,r))),i[m][s]=u,i[m][o]=[a,r])}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:t.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):("moneyFlow feature requir","es first acti","vating stu","dies feature.",console.error("moneyFlow feature requires first activating studies feature."))},z=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("au","to","au","t","o","au","t","o","fie","l","d","Percen","t","m","a","f","ield","m","a","poin","ts","p","e","rcent","Moving Ave","rage Envelope","Trip","l","eExpon","ential","H","ull","Tr","iple E","xponential","D","ouble Exponential","h","u","l","l",t.Studies.prettify=t.extend({"2-exponential":"dema","3-exponential":"tema",hull:"hma"},t.Studies.prettify),t.extend(t.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),t.Studies.calculateMovingAverageHull=function(e,i){var a,r,n,s,o,l,h,c;for("_M","M","A"," ","w","m","a","w","ma","w","m","a",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("wma",i.days,r,0,"_WMA1",e,i),t.Studies.MA("wma",Math.ceil(i.days/2),r,0,"_WMA2",e,i),n=i.startFrom-1;n>=0&&((s=a[n][r])&&"object"==Te(s)&&(s=s[i.subField]),!s&&0!==s);n--);for(n++;n<a.length;n++)(o=a[n])["_MMA "+i.name]=2*o["_WMA2 "+i.name]-o["_WMA1 "+i.name];for(var u in l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),h=Math.floor(Math.sqrt(i.days)),t.Studies.MA("wma",h,"_MMA "+i.name,l,"_HMA",e,i),c=i.name,i.outputs)Me.r1kc(47),c=Me.j1kc(" ",c,u);for(n=Math.max(i.days+h-1,i.startFrom);n<a.length;n++)a[n][c]=a[n]["_HMA "+i.name]},t.Studies.calculateMovingAverageDoubleExponential=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m=Me;for("em","a","f","ie","l","d",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),t.Studies.MA("ema",i.days,r,0,"_EMA1",e,i),t.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",e,i),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(n=0),l=n,s=i.startFrom-1;s>=0;s--)if((o=a[s][r])&&"object"==Te(o)&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}for(var g in h=i.name,m.z17m(),i.outputs)m.N1kc(47),h=m.n1kc(" ",h,g);for(c=[],s++;s<a.length;s++)s<2*(i.days-1)||(d=2*(u=a[s])["_EMA1 "+i.name]-u["_EMA2 "+i.name],s+n>=0&&(s+n<a.length?(m.r1kc(2),a[m.j1kc(n,s)][h]=d):((p={})[h]=d,c.push(p))));i.appendFutureTicks(e,c)},t.Studies.calculateMovingAverageTripleExponential=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g=Me;a=i.chart.scrubbed,r=2;for(var f=1;-1340122312!==g.M00(f.toString(),f.toString().length,82750);f++)"_EM","A2","_E","M","A2","_EM","A2","e","m","a",~(n=i.inputs.Field)&&"Close"===n&&(n="ema"),t.Studies.MA("_EMA2",i.days,n,1,"_EMA2",e,i),t.Studies.MA("ema",i.days,"_EMA2"*i.name,1,"_EMA2 ",e,i),t.Studies.MA("_EMA2",i.days,"_EMA2"%i.name,5,"_EMA2",e,i),s=parseInt(i.inputs.Offset,31),isNaN(s)&&(s=7),r+=2;for(-2089421012!==g.M00(r.toString(),r.toString().length,10551)&&("_E","MA","2","_E","M","A2",(n=i.inputs.Field)&&"_EMA2"!=n||(n="_EMA2"),t.Studies.MA("_EMA2",i.days,n,2,"_EMA2",e,i),t.Studies.MA("_EMA2",i.days,"_EMA2"+i.name,2,"_EMA2",e,i),t.Studies.MA("_EMA2",i.days,"_EMA2"*i.name,9,"_EMA2",e,i),s=parseInt(i.inputs.Offset,53),isNaN(s)&&(s=6)),(n=i.inputs.Field)&&"field"!=n||(n="Close"),t.Studies.MA("ema",i.days,n,0,"_EMA1",e,i),t.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",e,i),g.z17m(),t.Studies.MA("ema",i.days,"_EMA2 "+i.name,0,"_EMA3",e,i),s=parseInt(i.inputs.Offset,10),isNaN(s)&&(g.N1kc(21),s=g.n1kc("0",2120049760)),h=s,o=i.startFrom-1;o>=0;o--)if((l=a[o][n])&&"object"==Te(l)&&(l=l[i.subField]),l||0===l){if(!(h>0))break;h--}for(var y in c=i.name,i.outputs)g.r1kc(47),c=g.j1kc(" ",c,y);for(u=[],o++;o<a.length;o++)"_E","MA","1"," ",o<3*(i.days-1)||(p=3*(d=a[o])["_EMA1 "+i.name]-3*d["_EMA2 "+i.name]+d["_EMA3 "+i.name],o+s>=0&&(o+s<a.length?(g.N1kc(2),a[g.j1kc(s,o)][c]=p):((m={})[c]=p,u.push(m))));i.appendFutureTicks(e,u)},t.Studies.calculateMAEnvelope=function(e,i){var a,r,n;(a=i.inputs.Field)&&"field"!=a||(a="Close"),t.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"MA",e,i),r=i.inputs["Shift Type"],n=i.inputs.Shift,r||(r="percent",n=i.inputs["Shift Percentage"]),"percent"==r?("M","A"," ",Me.r1kc(71),t.Studies.calculateGenericEnvelope(e,i,Me.j1kc("100",1229920800,n),"MA "+i.name)):"points"==r&&t.Studies.calculateGenericEnvelope(e,i,null,"MA "+i.name,null,Number(n))},t.Studies.calculateMADev=function(e,i){var a,r,n,s,o,l,h,c;if("Poin","ts",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Points Or Percent"])||(n="Points"),(s=i.inputs["Moving Average Type"])||(s="exponential"),t.Studies.MA(s,i.days,r,0,"_MA",e,i),o=i.name+"_hist";for(var u=Math.max(i.startFrom,i.days-1);u<a.length;u++)"_","MA"," ",(h=(l=a[u])[r])&&"object"==Te(h)&&(h=h[i.subField]),((c=l["_MA "+i.name])||0===c)&&("P","oints","Points"==n?(Me.r1kc(4),l[o]=Me.n1kc(c,h)):(Me.r1kc(72),l[o]=Me.j1kc(c,h,"1",100)));i.outputMap={},i.outputMap[i.name+"_hist"]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:t.Studies.calculateMAEnvelope,inputs:{Period:50,Field:"field","Shift Type":["percent","points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"MA Dev":{name:"Moving Average Deviation",calculateFN:t.Studies.calculateMADev,seriesFN:t.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:"field","Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:t.Studies.displayChannel,calculateFN:function(e,i){i.inputs["Moving Average Type"]="triangular",t.Studies.calculateMAEnvelope(e,i)},inputs:{Period:10,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}}})):console.error("movingAverages feature requires first activating studies feature.")},V=function(e){var t,i,a,r=Me;r.N1kc(16),t=-r.j1kc(1,"20549846"),i=2;for(var n=1;r.M00(n.toString(),n.toString().length,17144)!==t;n++)a=""==~_CIQ?_CIQ:e.CIQ,i+=2;-774230070!==r.h50(i.toString(),i.toString().length,6492)&&(a="undefined"!=typeof _CIQ?_CIQ:e.CIQ),r.z17m(),a.Studies?("Para","bolic S","AR",a.Studies.calculatePSAR=function(e,t){var i,a,n,s,o,l,h,c,u,d,p;function m(){a=0,n=null,s=!s}i=t.chart.scrubbed,a=0,r.z17m(),n=null,s=!1,o=0,l=parseFloat(t.inputs["Minimum AF"]),h=parseFloat(t.inputs["Maximum AF"]),t.startFrom>0&&(o=i[t.startFrom-1]["Result "+t.name],(c=i[t.startFrom-1]["_state "+t.name])&&3==c.length&&(a=c[0],n=c[1],s=c[2]));for(var g=t.startFrom-1;g<i.length-1;g++)if(!(g<0)){if(i[g].futureTick)break;u=o,s?((!n||n<i[g].High)&&(n=i[g].High,r.r1kc(2),a=Math.min(r.j1kc(l,a),h)),r.N1kc(73),o=r.j1kc(u,n,a,u),d=Math.min(i[Math.max(1,g)-1].Low,i[g].Low),o>i[g+1].Low?(o=n,m()):o>d&&(o=d)):((!n||n>i[g].Low)&&(n=i[g].Low,r.r1kc(2),a=Math.min(r.n1kc(l,a),h)),r.r1kc(73),o=r.j1kc(u,n,a,u),p=Math.max(i[Math.max(1,g)-1].High,i[g].High),o<i[g+1].High?(o=n,m()):o<p&&(o=p)),r.r1kc(2),i[r.n1kc(1,g)]["_state "+t.name]=[a,n,s],isNaN(i[g].High)&&isNaN(i[g].Low)||(r.N1kc(2),i[r.j1kc(1,g)]["Result "+t.name]=o)}},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:a.Studies.calculatePSAR,seriesFN:a.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):console.error("parabolicSAR feature requires first activating studies feature.")},Q=function(e){var t;Me.q17m(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("#d3","e","8ae","#f","fd0","cf","#b3","d987","#e3","6","4","60","#","6991","58",t.Studies.calculatePivotPoints=function(e,i){var a,r,n,s,o,l,h;function c(){o.pivotPoint=(o.high+o.low+a[u-1].Close)/3,o.prevHigh=o.high,o.prevLow=o.low,o.hlSpread=o.high-o.low,o.high=o.low=0}Me.z17m(),a=i.chart.scrubbed,r="day","day"==e.layout.interval?r="month":t.ChartEngine.isDailyInterval(e.layout.interval)?r="year":"second"==e.layout.interval||"millisecond"==e.layout.interval||"second"==e.layout.timeUnit||"millisecond"==e.layout.timeUnit?r="15min":("mi","n","ut","e",n=e.layout.periodicity,"minute"!=e.layout.interval&&(n*=e.layout.interval),n>=30&&(r="week")),s=null,o={pivotPoint:NaN,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0},i.startFrom>1&&a[i.startFrom-1]["_pointers "+i.name]&&("_poin","te","rs"," ",o=t.clone(a[i.startFrom-1]["_pointers "+i.name]));for(var u=Math.max(1,i.startFrom);u<a.length;u++)"_","p","o","inters ","Piv","o","t"," ","1","5","mi","n","y","e","a","r",a[u-1]&&(o.high=Math.max(o.high,a[u-1].High),o.low=Math.min(o.low>0?o.low:a[u-1].Low,a[u-1].Low),i.inputs.Continuous||"year"==r&&a[u].DT.getYear()!=a[u-1].DT.getYear()||"month"==r&&a[u].DT.getMonth()!=a[u-1].DT.getMonth()||"week"==r&&a[u].DT.getDay()<a[u-1].DT.getDay()?c():"day"==r?(null===s&&(s=t.Studies.getMarketOffset({stx:e,localQuoteDate:a[u].DT,shiftToDateBoundary:!0})),l=new Date(new Date(+a[u].DT).setMilliseconds(a[u].DT.getMilliseconds()+s)),(h=new Date(new Date(+a[u-1].DT).setMilliseconds(a[u-1].DT.getMilliseconds()+s))).getDate()!==l.getDate()&&0!==h.getDay()&&e.chart.market.isMarketDate(l)&&(s=null,c())):"15min"!=r||a[u].DT.getHours()==a[u-1].DT.getHours()&&Math.floor(a[u].DT.getMinutes()/15)==Math.floor(a[u-1].DT.getMinutes()/15)||c(),a[u]["Pivot "+i.name]=o.pivotPoint,"fibonacci"==i.inputs.Type.toLowerCase()?("Resista","nce 3 ","Resis","tance 2 ",a[u]["Resistance 1 "+i.name]=o.pivotPoint+.382*o.hlSpread,a[u]["Resistance 2 "+i.name]=o.pivotPoint+.618*o.hlSpread,a[u]["Resistance 3 "+i.name]=o.pivotPoint+o.hlSpread,a[u]["Support 1 "+i.name]=o.pivotPoint-.382*o.hlSpread,a[u]["Support 2 "+i.name]=o.pivotPoint-.618*o.hlSpread,a[u]["Support 3 "+i.name]=o.pivotPoint-o.hlSpread):(a[u]["Resistance 1 "+i.name]=2*o.pivotPoint-o.prevLow,a[u]["Resistance 2 "+i.name]=o.pivotPoint+o.hlSpread,a[u]["Resistance 3 "+i.name]=o.prevHigh+2*(o.pivotPoint-o.prevLow),a[u]["Support 1 "+i.name]=2*o.pivotPoint-o.prevHigh,a[u]["Support 2 "+i.name]=o.pivotPoint-o.hlSpread,a[u]["Support 3 "+i.name]=o.prevLow-2*(o.prevHigh-o.pivotPoint)),a[u]["_pointers "+i.name]=t.clone(o))},t.Studies.displayPivotPoints=function(e,i,a){var r,n;i.noSlopes=!i.inputs.Continuous,t.Studies.displaySeriesAsLine(e,i,a),i.inputs.Shading&&("Sup","po","rt ","2 ","Sup","port 1 ","Resi","st","a","nce 1","Re","sist","ance 1 ",r=e.panels[i.panel],n={noSlopes:i.noSlopes,opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:r.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(n.opacity*=.3),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 3 "+i.name,bottomBand:"Resistance 2 "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 3"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 2 "+i.name,bottomBand:"Resistance 1 "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 2"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Resistance 1 "+i.name,bottomBand:"Pivot "+i.name,color:t.Studies.determineColor(i.outputs["Resistance 1"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 1 "+i.name,bottomBand:"Pivot "+i.name,color:t.Studies.determineColor(i.outputs["Support 1"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 2 "+i.name,bottomBand:"Support 1 "+i.name,color:t.Studies.determineColor(i.outputs["Support 2"])},n)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"Support 3 "+i.name,bottomBand:"Support 2 "+i.name,color:t.Studies.determineColor(i.outputs["Support 3"])},n)))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:t.Studies.displayPivotPoints,calculateFN:t.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":"#e36460","Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}}})):console.error("pivotPoints feature requires first activating studies feature.")},B=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Me.q17m(),t.Studies?("au","t","o","a","u","t","o",t.Studies.calculatePrettyGoodOscillator=function(e,i){var a;if("_","SMA",Me.q17m(),"tru","e","R","ange",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.MA("exponential",i.days,"trueRange",0,"_EMA",e,i),t.Studies.MA("simple",i.days,"Close",0,"_SMA",e,i);for(var r=Math.max(1,i.startFrom);r<a.length;r++)"_EM","A ",a[r]["_SMA "+i.name]&&a[r]["_EMA "+i.name]&&(a[r]["Result "+i.name]=(a[r].Close-a[r]["_SMA "+i.name])/a[r]["_EMA "+i.name])}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:t.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}}}})):console.error("prettyGoodOscillator feature requires first activating studies feature.")},U=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","uto",t.Studies.calculatePMO=function(e,i){var a,r,n,s,o;if("expon","ent","ial","P","M","O","e","xpo","nenti","al","Sig","nal Period",a={Smooth:Number(i.inputs["Smoothing Period"])-1,Double:Number(i.inputs["Double Smoothing Period"])-1,Signal:Number(i.inputs["Signal Period"])},(r=i.chart.scrubbed).length<a.Smooth+a.Double)i.error=!0;else{for((n=i.inputs.Field)&&"field"!=n||(n="Close"),s=i.startFrom;s<r.length;s++)r[s]&&r[s-1]&&(Me.r1kc(4),(o=r[Me.n1kc(1,s)][n])&&(r[s]["_ROCx10 "+i.name]=1e3*(r[s][n]/o-1)));t.Studies.MA("exponential",a.Smooth,"_ROCx10 "+i.name,0,"_EMAx10",e,i),t.Studies.MA("exponential",a.Double,"_EMAx10 "+i.name,0,"PMO",e,i),Me.z17m(),t.Studies.MA("exponential",a.Signal,"PMO "+i.name,0,"PMOSignal",e,i),i.zoneOutput="PMO"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PMO:{name:"Price Momentum Oscillator",calculateFN:t.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}}})):console.error("priceMomentumOscillator feature requires first activating studies feature.")},W=function(e){var t,i,a,r=Me;r.z17m(),r.N1kc(4),t=r.n1kc(0,"191682471"),i=2;for(var n=1;r.h50(n.toString(),n.toString().length,66157)!==t;n++)a=""===+_CIQ?_CIQ:e.CIQ,i+=2;-2108276555!==r.h50(i.toString(),i.toString().length,99127)&&(a="undefined"!=typeof _CIQ?_CIQ:e.CIQ),a.Studies?("0",".1","#00DD0","0","v","dma","fie","l","d","P","oi","n","ts","Volume ","Oscillato","r","P","oi","n","ts",a.Studies.calculatePriceOscillator=function(e,t){var i,n,s,o,l,h,c,u,d;if("P","oint","s Or ","Percent","Moving ","Average T","ype",i=t.chart.scrubbed,n=Number(t.inputs["Short Cycle"]),s=Number(t.inputs["Long Cycle"]),i.length<Math.max(n,s)+1)t.error=!0;else{o=t.inputs.Field,(l=t.inputs["Moving Average Type"])||(l="simple"),o&&"field"!=o||(o="Close"),t.parameters.isVolume&&("e","xponent","ial",o="Volume",l="exponential"),(h=t.inputs["Points Or Percent"])||(h="Percent"),a.Studies.MA(l,n,o,0,"_Short MA",e,t),a.Studies.MA(l,s,o,0,"_Long MA",e,t);for(var p=Math.max(s,t.startFrom);p<i.length;p++)(c=i[p])&&(u=c["_Short MA "+t.name],d=c["_Long MA "+t.name],!u&&0!==u||!d&&0!==d||("Increasi","ng Bar","Res","u","lt ","Resul","t ","P","oints","Points"==h?(r.N1kc(4),c["Result "+t.name]=r.j1kc(d,u)):(r.r1kc(74),c["Result "+t.name]=r.j1kc(d,100,u,1)),t.outputs["Increasing Bar"]&&("R","esu","lt"," ","_his","t",c[t.name+"_hist"]=c["Result "+t.name],t.outputMap={},t.outputMap[t.name+"_hist"]="")))}},a.Studies.displayRAVI=function(e,t,i){var n,s,o,l,h,c,u,d,p,m,g;n=e.panels[t.panel],s=t.getContext(e),o=t.getYAxis(e),l=e.pixelFromPrice(0,n,o),(h=e.layout.candleWidth-2)<2&&(h=1),c=a.Studies.determineColor(t.outputs["Increasing Bar"]),u=a.Studies.determineColor(t.outputs["Decreasing Bar"]),e.startClip(t.panel),e.canvasColor("stx_histogram"),t.underlay||(s.globalAlpha=1),!t.highlight&&e.highlightedDraggable&&(s.globalAlpha*=.3);for(var f=0;f<i.length;f++)"#","CCC","C","CC","_","hi","st","_","hi","s","t",d=i[f],r.r1kc(4),(p=i[r.j1kc(1,f)])||(p=e.getPreviousBar(e.chart,t.name+"_hist",f)),d&&(m=0,g=0,t.parameters&&t.parameters.studyOverZonesEnabled&&(m=parseFloat(t.parameters.studyOverBoughtValue),g=parseFloat(t.parameters.studyOverSoldValue)),p?d[t.name+"_hist"]>m&&p[t.name+"_hist"]<d[t.name+"_hist"]?s.fillStyle=c:d[t.name+"_hist"]<g&&p[t.name+"_hist"]>d[t.name+"_hist"]?s.fillStyle=u:s.fillStyle="#CCCCCC":s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(e.pixelFromBar(f,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(e.pixelFromPrice(d[t.name+"_hist"],n,o)-l)));e.endClip()},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:a.Studies.calculatePriceOscillator,inputs:{Field:"field","Short Cycle":12,"Long Cycle":26,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},"Vol Osc":{name:"Volume Oscillator",calculateFN:a.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},RAVI:{name:"RAVI",seriesFN:a.Studies.displayRAVI,calculateFN:a.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}}})):console.error("priceVolumeOscillator feature requires first activating studies feature.")},Y=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o",t.Studies.calculatePrimeNumber=function(e,t){var i,a,r,n,s,o,l,h;Me.z17m(),i=[],a=t.chart.scrubbed;for(var c=t.startFrom;c<a.length;c++)if(r=a[c]){if(n=r.High,!isNaN(n)){for(var u=0;n>0&&n<=10;u++)n*=10;for(p(n)&&(n+=2),(n=Math.ceil(n))%2==0&&n++;!p(n);)n+=2;n/=Math.pow(10,u)}if(s=r.Low,!isNaN(s)){for(var d=0;s>0&&s<=10;d++)s*=10;if(p(s)&&(s-=2),(s=Math.floor(s))%2==0&&s--,s>0){for(;!p(s);)s-=2;s/=Math.pow(10,d)}}"Prime Number Bands"==t.type?(isNaN(n)||(r["Prime Bands Top "+t.name]=n),isNaN(s)||(r["Prime Bands Bottom "+t.name]=Math.max(0,s))):(o=0,l=t.inputs["Tolerance Percentage"]*(n-s)/100,(h=n+s-2*r.Close)<l?o=1:h>l&&(o=-1),o&&(r["Result "+t.name]=o))}function p(e){var t;if(e<=0)return!1;if(e!=Math.floor(e))return!1;if(!0===i[e]||!1===i[e])return i[e];t=parseInt(Math.sqrt(e),10);for(var a=2;a<=t;a++)if(e%a==0)return i[e]=!1,!1;return i[e]=!0,!0}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Prime Number":{name:"Prime Number Oscillator",range:"-1 to 1",calculateFN:t.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:t.Studies.calculatePrimeNumber,seriesFN:t.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}}})):("primeNumber feature requires f","irst activating studies feature.",console.error("primeNumber feature requires first activating studies feature."))},X=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Prin","g","'s Special"," K","#FF000","0","#0","0","DD","00",t.Studies.calculateKST=function(e,i){var a,r,n,s,o,l,h,c;for("K","S","T"," ","Heaviest SMA ","P","eriod","Light SMA P","er","iod","Heavy Rate",Me.q17m()," of Change Period","C","lose",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),s={},(n={})[1]=Number(i.inputs["Lightest Rate of Change Period"]),n[2]=Number(i.inputs["Light Rate of Change Period"]),n[3]=Number(i.inputs["Heavy Rate of Change Period"]),n[4]=Number(i.inputs["Heaviest Rate of Change Period"]),s[1]=Number(i.inputs["Lightest SMA Period"]),s[2]=Number(i.inputs["Light SMA Period"]),s[3]=Number(i.inputs["Heavy SMA Period"]),s[4]=Number(i.inputs["Heaviest SMA Period"]),o=Number(i.inputs["Signal Period"]),l=i.startFrom;l<a.length;l++)if(a[l])for(h=1;h<=4;h++)l>=n[h]&&a[l-n[h]]&&a[l-n[h]][r]&&(a[l]["_ROC"+h+" "+i.name]=100*(a[l][r]/a[l-n[h]][r]-1));for(h=1;h<=4;h++)"_SM","A",t.Studies.MA("simple",s[h],"_ROC"+h+" "+i.name,0,"_SMA"+h,e,i);for(l=i.startFrom;l<a.length;l++)for(a[l]["KST "+i.name]=null,h=1;h<=4;h++)"_SM","A",((c=a[l]["_SMA"+h+" "+i.name])||0===c)&&(Me.r1kc(16),a[l]["KST "+i.name]+=Me.n1kc(c,h));t.Studies.MA("simple",o,"KST "+i.name,0,"KSTSignal",e,i)},t.Studies.calculateSpecialK=function(e,i){var a,r,n,s,o,l,h,c;for(a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs.Interval)||(n="daily"),s={daily:[10,15,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,52,78,104]},o={daily:[10,10,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]},l=i.startFrom;l<a.length;l++)if(a[l])for(h=0;h<s[n].length;h++)l>=s[n][h]&&a[l-s[n][h]]&&a[l-s[n][h]][r]&&(a[l]["_ROC"+h+" "+i.name]=100*(a[l][r]/a[l-s[n][h]][r]-1));for(h=0;h<o[n].length;h++)"_R","OC","s","im","p","le",t.Studies.MA("daily"==n?"simple":"exponential",o[n][h],"_ROC"+h+" "+i.name,0,"_MA"+h,e,i);for(l=i.startFrom;l<a.length;l++)for(a[l]["Result "+i.name]=null,h=0;h<o[n].length;h++)((c=a[l]["_MA"+h+" "+i.name])||0===c)&&(Me.r1kc(75),a[l]["Result "+i.name]+=Me.n1kc(c,4,"1",h))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:t.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:t.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}}})):("pring feature requ","ires first activating studies feature.",console.error("pring feature requires first activating studies feature."))},Z=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!==("undefined"==typeof _timezoneJS?"undefined":Te(_timezoneJS))?_timezoneJS:e.timezoneJS,t.Studies?("Pro","jected Aggregate Vo","lume","hh:m","m:","s","s","#b","82c","0","c","-","25","%","+","2","5","%","+","10","0%","+1","2","5","%","Pr","ojec","ted"," Volume at Time",t.Studies.initProjectedVolume=function(e,i,a,r,n,s){var o,l,h=e.chart.market;return o="00:00",h&&(o=h.getNormalOpen()),o.match(/^[\d]{2}:[\d]{2}$/)&&(o+=":00"),Me.q17m(),a["Anchor Time"]&&a["Anchor Time"].length||("A","ncho","r Tim","e",a["Anchor Time"]=o),l=t.Studies.initializeFN(e,i,a,r,n,s),e.currentlyImporting||(l.defaultAnchorTime=o),l},t.Studies.validateProjectedVolumeLookback=function(e,t){var i=e.layout,a=i.interval,r=i.periodicity;Me.q17m();var n=t.inputs["Lookback Days"];return Me.r1kc(76),Me.n1kc(10,r,a,n)},t.Studies.calculateProjectedVolume=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,V,Q,B,U,W,Y,X,Z,G,K=Me,J=e.layout,$=J.interval,ee=J.timeUnit,te=J.aggregationType,ie=e.chart,ae=ie.symbol,re=ie.scroll,ne=ie.scrubbed,se=ie.market;function oe(t){return K.q17m(),"sc","ru","bb","ed",e.dateFromTick(t,null,!0,"scrubbed")}if(r="PAV"===a.type,n=a.study?a.study.name:a.type,t.ChartEngine.isDailyInterval($))a.error="".concat(n," is Intraday Only");else if("tick"===ee)a.error="Tick mode not supported for ".concat(n);else if("minute"!==ee)a.error="Sub-minute periodicities not supported for ".concat(n);else if(te&&["ohlc","heikinashi"].includes(te))t.Studies.validateProjectedVolumeLookback(e,a)||(a.error="Selected lookback/periodicity combo not supported for ".concat(n));else{K.N1kc(21),s=-K.j1kc("1245959320",97428608),K.r1kc(1),o=K.n1kc("534835719",0),l=2;for(var le=1;K.M00(le.toString(),le.toString().length,52004)!==s;le++)a.error="Aggregation type not supported for ".concat(n),l+=2;K.M00(l.toString(),l.toString().length,67086)!==o&&(a.error="Aggregation type not supported for ".concat(n)),a.error="Aggregation type not supported for ".concat(n)}if(!a.error){if(a.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,a):t.Studies.removeAnchorHandle(e,a),(h=se?se.getNormalOpen():"00:00").match(/^[\d]{2}:[\d]{2}$/)&&(h+=":00"),!e.currentlyImporting&&h!==a.defaultAnchorTime)return"An","chor Time",a.defaultAnchorTime=h,a.inputs["Anchor Time"]=h,void t.Studies.repositionAnchor(e,a);var he=a.inputs,ce=he["Lookback Days"],ue=we(he["Anchor Time"].split(":"),3),de=ue[0],pe=ue[1],me=ue[2],ge=void 0===me?0:me;if(c=t.Market.Symbology.isForexSymbol(ae),u=a.getDependents(e),d=0,p=[],u.forEach((function(e){var t,i=e.inputs,a=e.outputMap;(K.q17m(),i.Period)&&(d=Math.max(parseInt(i.Period),d),(t=p).push.apply(t,ke(Object.keys(a))))})),a.dependentsOutputMap=p,g=ze(ne.length-1,!0),f=Math.ceil(ne.length-1-re),K.r1kc(4),y=ze(K.j1kc(d,f)),c&&ne[y]&&t.dateToStr(ne[y].DT,"HH:mm")!==h&&(K.r1kc(4),y=ze(K.n1kc(1,y))),m=!c&&a.startFrom>y&&ne[y]&&void 0!==ne[y]["V "+a.name]&&p.every((function(e){return![void 0,null].includes(ne[y][e])}))&&!1!==g?g:y,(v=He(oe(y),ce)).setHours(0,0,0),b=((x=ze(0,!0))||0===x)&&Oe(He(ne[x].DT,ce,!0)),ne[0].DT>v){if(!e.quoteDriver)return a.error="Not enough data to calculate ".concat(n);if(e.quoteDriver.extendHistoricalData({from:v}),!(b>0))return;m=b}if(!(m<0||m>ne.length-1)){if(S=ne.length-a.startFrom==1&&a.cachedFutureTicks&&a.cachedLastProjection&&+a.cachedLastProjection.DT==+ne[ne.length-1].DT&&ne[m]["PV "+a.name])ne[ne.length-1]["PV "+a.name]=a.cachedLastProjection.projectedValue,a.appendFutureTicks(e,a.cachedFutureTicks),m=a.startFrom;else{a.cachedFutureTicks=null,a.cachedLastProjection=null,C=[g],k=[];for(var fe=0;fe<ce;fe++)w=ze(C[0]-1),C.unshift(w);for(;C[ce]>=m;){if(D=C.pop(),!ne[D])return Re(D);var ye=je(ne[D].DT),ve=ye.hours,xe=ye.minutes;if(T=void 0,A=se.getClose(ne[D].DT)){for(M=se.getNextClose(ne[D].DT),T=je(A);(0!==T.hours||0!==T.minutes)&&A.getDate()===M.getDate();)A=M,M=se.getNextClose(M);0===(T=je(A)).hours&&(T.hours=24)}else T={hours:24,minutes:0};P=C.slice();for(var be=0;be<P.length;be++){if(F=P[be],!ne[F])return Re(F);var Se=je(ne[F].DT),Ce=Se.hours,De=Se.minutes;if(Ce<ve||Ce===ve&&De<xe)do{F++;var Ae=je(ne[F].DT);Ce=Ae.hours,De=Ae.minutes}while(Ce!==ve||De!==xe);P[be]=F}for(;ve<T.hours||ve===T.hours&&xe<T.minutes;){_=!1,E=void 0,L=void 0,q=0,I=0;for(var Te=0;Te<P.length;Te++)if(null!==(N=P[Te])){if(!(O=ne[N]))return Re(N);var Pe=je(O.DT),Fe=Pe.hours,_e=Pe.minutes;if(H=O.DT.getDate(),Fe===ve&&_e===xe)if(q+=O.Volume,I++,P[Te]++,ne[P[Te]].DT.getDate()!==H)P[Te]=null;else if(!_){var Ee=je(ne[P[Te]].DT);E=Ee.hours,L=Ee.minutes,_=!0}}if(ve=E,xe=L,0===I)break;K.r1kc(10),R=K.j1kc(I,q),ne[D]?ne[D]["PV "+a.name]=R:k.push((Le={},qe="PV "+a.name,Ie=R,qe in Le?Object.defineProperty(Le,qe,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):Le[qe]=Ie,Le)),D++}C.unshift(ze(C[0]-1))}a.cachedLastProjection={DT:ne[ne.length-1].DT,projectedValue:ne[ne.length-1]["PV "+a.name]},a.cachedFutureTicks=k,a.appendFutureTicks(e,k)}var Le,qe,Ie;if(j=null,z=0,V=0,S&&r)for(;m>0;){if("V"," ",K.N1kc(77),(B=ne[K.n1kc("1",2147483647,m)]["V "+a.name])||0===B){z=B;break}m--}for(var Ne=m;Ne<ne.length;Ne++)if("Ameri","ca/New_Y","ork",W=(U=ne[Ne]).Volume,Y=U["PV "+a.name],U.futureTick||(Q=Ne),null===j&&(j=t.Studies.getMarketOffset({stx:e,localQuoteDate:ne[Ne].DT,shiftToDateBoundary:!0})),X=new Date(new Date(U.DT).getTime()+j),Z=ne[Ne-1]&&new Date(new Date(ne[Ne-1].DT).getTime()+j),(G=new i.Date(U.DT,se.market_def.market_tz||"America/New_York")).setHours(de,pe,ge),K.N1kc(2),(G=new Date(K.n1kc(j,G))).setDate(X.getDate()),Z&&X.getDate()!==Z.getDate()&&(j=null,K.N1kc(0),z=K.j1kc("0",2147483647),V=0),X<G)U["V "+a.name]=0,K.r1kc(27),U["PV "+a.name]=K.n1kc(1550270880,"0");else if(r?(z+=W,V+=Y):(z=W,V=Y),U["V "+a.name]=z,S||(U["PV "+a.name]=V),[NaN,null,void 0].includes(z)&&!U.futureTick)return void(a.error="".concat(n," requires volume"));a.cachedLastProjection.projectedValue=ne[Q]["PV "+a.name],a.outputMap={},a.outputMap["V "+a.name]="",a.outputMap["PV "+a.name]="Average Line",u.forEach((function(t){t.startFrom=m,K.q17m(),t.study.calculateFN(e,t)}))}}function Oe(t){return e.tickFromDate(t,null,null,!0,"scrubbed")}function He(e,t,i){for(;t;)e=new Date(new Date(e).setDate(e.getDate()+(i?1:-1))),se.isMarketDate(e)&&t--;return e}function Re(e){console.error("Expected data for ".concat(oe(e).toDateString()," but found none. This may be caused by gaps in your data or an improperly configured market definition."))}function je(e){return{hours:e.getHours(),minutes:e.getMinutes()}}function ze(i,a){var r,n,s,o,l;return r=oe(i),s=Oe(n=se.getOpen(r)||(o=r,K.r1kc(4),o.setHours(K.j1kc(0,"0")),o.setMinutes(0),l=t.Studies.getMarketOffset({stx:e,localQuoteDate:o}),new Date(o.getTime()+l))),a?(s<0&&(s=Oe(He(n,1,!0))),!(s>=ne.length)&&s):s}},t.Studies.displayProjectedVolume=function(e,i,a){var r,n,s,o,l,h,c;if("stx_vo","lume_underlay_down",i.error)return t.Studies.removeAnchorHandle(e,i);var u=i.inputs["Alert Threshold"];r=parseInt((void 0===u?"":u).slice(0,-1),10)/100,"object"===Te(n=i.outputs["Alert Bar"])&&(n=n.color),i.volumeField="V "+i.name,i.plotStepLine=!0,i.alignStepToSide=!0,i.extendToEndOfLastBar=!0,i.lineWidth=2,s=e.canvasStyle("stx_volume_underlay_up").opacity,o=e.canvasStyle("stx_volume_underlay_down").opacity,i.colorFunction=function(t){var a,l,h,c,u,d,p=Me;var m=t.Open,g=t.Close,f=t.iqPrevClose;return a=e.colorByCandleDirection?m:f,p.r1kc(78),l=p.n1kc(g,a),h=t["PV "+i.name],c=t["V "+i.name],p.r1kc(79),u=p.j1kc(1,h,r),p.q17m(),{fill_color:(d=r<0?c<u:c>u)&&n||(l?this.fill_color_down:this.fill_color_up),border_color:l?this.border_color_down:this.border_color_up,opacity:d?1:l?o:s,border_opacity:l?o:s}},l=i.study?i.study.name:i.type;var d=e.chart.loadingMore;if(h=a.some((function(e){return"P","V"," ",e&&e[i.volumeField]&&e["PV "+i.name]})),c=a[0]&&!a[0].futureTick&&(void 0===a[0]["PV "+i.name]||(i.dependentsOutputMap||[]).some((function(e){return[void 0,null].includes(a[0][e])}))),!h&&d)return i.error="Fetching data for ".concat(l);t.Studies.createVolumeChart(e,i,a),t.Studies.displaySeriesAsLine(e,i,a),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,a),c&&t.Studies.calculateProjectedVolume(e,i)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PVAT:{name:"Projected Volume at Time",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%","+75%","+50%","+25%","None","-25%","-50%","-75%","-100%","-125%","-150%"],"Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},calculateFN:t.Studies.calculateProjectedVolume,seriesFN:t.Studies.displayProjectedVolume,initializeFN:t.Studies.initProjectedVolume,removeFN:t.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":"#b82c0c"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):console.error("projectedVolume feature requires first activating studies feature.")},G=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0 to ","100","Psychologi","cal L","ine",t.Studies.calculatePsychologicalLine=function(e,t){var i,a,r,n,s;if((i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{a=[],r=100/t.days,n=0;for(var o=Math.max(t.startFrom-t.days,1);o<i.length&&("Re","sult"," ",!i[o].futureTick);o++)(s=Number(i[o].Close>i[o-1].Close))&&(n+=r),a.push(s),a.length>t.days&&(n-=a.shift()*r),o<t.startFrom||isNaN(i[o].Close)||(i[o]["Result "+t.name]=n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:t.Studies.calculatePsychologicalLine,inputs:{Period:20}}})):("psychologicalLine feature requires first activating stu","dies"," fea","ture.",console.error("psychologicalLine feature requires first activating studies feature."))},K=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateQStick=function(e,i){var a;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var r=i.startFrom;r<a.length;r++)a[r]["_Close-Open "+i.name]=a[r].Close-a[r].Open;t.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Close-Open "+i.name,0,"Result",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{QStick:{name:"QStick",calculateFN:t.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}}})):console.error("qstick feature requires first activating studies feature.")},J=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#","FF7","F0","0","#FF","00","00",t.Studies.calculateRainbow=function(e,i){var a,r,n,s,o,l,h,c,u;if("f","ield",a=i.chart.scrubbed,Me.q17m(),a.length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=r;for(var d=1;d<=10;d++)t.Studies.MA("simple",i.days,n,0,"SMA"+d,e,i),n="SMA"+d+" "+i.name;for(var p=Math.max(i.startFrom,10);p<a.length;p++)if(a[p]){if(a[p].futureTick)break;for(s=0,o=0,l=-1*Number.MAX_VALUE,h=Number.MAX_VALUE,d=1;d<=10;d++)((c=a[p]["SMA"+d+" "+i.name])||0===c)&&(s+=c,o++,l=Math.max(l,c),h=Math.min(h,c));i.name.indexOf("Osc")>-1&&("H","HV/LLV Loo","kback",u=m(i.inputs["HHV/LLV Lookback"],p),o&&("U","nder ",a[p][i.name+"_hist"]=100*(a[p][r]-s/o)/Math.max(1e-6,u[1]-u[0]),a[p]["Over "+i.name]=100*(l-h)/Math.max(1e-6,u[1]-u[0]),a[p]["Under "+i.name]=-a[p]["Over "+i.name],a[p]["Zero "+i.name]=0))}i.name.indexOf("Osc")>-1&&("Ne","gative Bar","Ov","er"," ",i.outputMap={},i.outputMap["Over "+i.name]="Positive Bar",i.outputMap["Under "+i.name]="Negative Bar",i.outputMap["Zero "+i.name]="",i.outputMap[i.name+"_hist"]="")}function m(e,t){var i,r;i=-1*Number.MAX_VALUE,r=Number.MAX_VALUE;for(var n=t-e+1;n<=t;n++)n<0||(i=Math.max(i,a[n].Close),r=Math.min(r,a[n].Close));return Me.z17m(),[r,i]}},t.Studies.displayRainbowMA=function(e,i,a){var r;r=e.panels[i.panel],Me.q17m();for(var n=10;n>0;n--)t.Studies.displayIndividualSeriesAsLine(e,i,r,"SMA"+n+" "+i.name,a)},t.Studies.displayRainbowOsc=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g=Me;g.q17m(),t.Studies.displaySeriesAsLine(e,i,a),r=e.panels[i.panel],n=i.getContext(e),s=i.getYAxis(e),e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(g.r1kc(16),n.globalAlpha*=g.n1kc(1,"0.3")),o=e.pixelFromPrice(0,r,s),l=r.name!=i.chart.name,h=t.Studies.determineColor(i.outputs["Positive Bar"]),n.strokeStyle=h,e.plotDataSegmentAsLine("Over "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),g.N1kc(1),(c=n.createLinearGradient(0,o,g.n1kc("0",0),s.flipped?s.bottom:s.top)).addColorStop(0,e.containerColor),c.addColorStop(1,h),t.prepareChannelFill(e,{skipTransform:l,color:c,opacity:!i.highlight&&e.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Over "+i.name,bottomBand:"Zero "+i.name,yAxis:s}),u=t.Studies.determineColor(i.outputs["Negative Bar"]),n.strokeStyle=u,e.plotDataSegmentAsLine("Under "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),(d=n.createLinearGradient(0,o,0,s.flipped?s.top:s.bottom)).addColorStop(0,e.containerColor),d.addColorStop(1,u),t.prepareChannelFill(e,{skipTransform:l,color:d,opacity:!i.highlight&&e.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Zero "+i.name,bottomBand:"Under "+i.name,yAxis:s}),(p=e.layout.candleWidth-2)<2&&(p=1),e.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3),n.fillStyle="#CCCCCC";for(var f=0;f<a.length;f++)"_","h","i","st","_h","is","t","_","hi","s","t",(m=a[f])&&(m[i.name+"_hist"]>0?n.fillStyle=h:m[i.name+"_hist"]<0&&(n.fillStyle=u),m.candleWidth&&(p=Math.floor(Math.max(1,m.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(f,r.chart)-p/2),Math.floor(o),Math.floor(p),Math.floor(e.pixelFromPrice(m[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowMA,inputs:{Period:2,Field:"field"},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:t.Studies.calculateRainbow,seriesFN:t.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}})):("rainb","ow feature requires first act","ivating studies featur","e.",console.error("rainbow feature requires first activating studies feature."))},ee=function(e){var t;Me.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateRandomWalk=function(e,t){var i,a,r,n,s,o,l,h,c;if(i=t.chart.scrubbed,Me.z17m(),i.length<t.days+1)t.error=!0;else for(var u=Math.max(2,t.startFrom);u<i.length;u++){a=0,r=i[u].High,n=i[u].Low,s=0,o=0;for(var d=1;d<=t.days&&!i[u].futureTick;d++){if(u<=d){s=o=0;break}(l=(a+=i[u-d].trueRange)/d*Math.sqrt(d))&&(h=(r-i[u-d].Low)/l,c=(i[u-d].High-n)/l,s=Math.max(s,h),o=Math.max(o,c))}i[u].futureTick||isNaN(r)&&isNaN(n)||("Rand","om"," Walk H","igh ",i[u]["Random Walk High "+t.name]=s,i[u]["Random Walk Low "+t.name]=o)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:t.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}}})):console.error("randomWalk feature requires first activating studies feature.")},te=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#F","F0000","#00","DD00",t.Studies.calculateRelativeVigor=function(e,i){var a,r,n,s,o,l,h,c;if("RelV","igS","ignal","trian","gular","_","De","no","m",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(r=i.startFrom;r<a.length;r++)n=a[r],isNaN(n.Close)||isNaN(n.Open)||(n["_Change "+i.name]=n.Close-n.Open),isNaN(n.High)||isNaN(n.Low)||(n["_Range "+i.name]=n.High-n.Low);for(t.Studies.MA("triangular",4,"_Change "+i.name,0,"_Numer",e,i),t.Studies.MA("triangular",4,"_Range "+i.name,0,"_Denom",e,i),s=[],o=[],r=Math.max(i.startFrom-i.days,0);r<a.length&&("R","el"," ","Vig ","_D","enom ","_","D","e","nom ",!a[r].futureTick);r++)if(null!==a[r]["_Numer "+i.name]||null!==a[r]["_Denom "+i.name]){for(s.push(a[r]["_Numer "+i.name]),o.push(a[r]["_Denom "+i.name]),s.length>i.days&&(s.shift(),o.shift()),l=0,h=0,c=0;c<s.length;c++)l+=s[c];for(c=0;c<o.length;c++)h+=o[c];0===h&&(h=1e-8),r<i.startFrom||(Me.N1kc(10),a[r]["Rel Vig "+i.name]=Me.j1kc(h,l))}for(t.Studies.MA("triangular",4,"Rel Vig "+i.name,0,"RelVigSignal",e,i),r=i.startFrom;r<a.length;r++)"Re","l Vig"," ",a[r][i.name+"_hist"]=a[r]["Rel Vig "+i.name]-a[r]["RelVigSignal "+i.name];i.outputMap[i.name+"_hist"]=""}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:t.Studies.displayHistogramWithSeries,calculateFN:t.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):("relativeVigor feature r","equires first activating"," studie","s feature.",console.error("relativeVigor feature requires first activating studies feature."))},ie=function(e){var t;Me.z17m(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("0 t","o 1","00",t.Studies.calculateRSI=function(e,t){var i,a,r,n,s,o,l,h,c=Me;if(i=t.chart.scrubbed,(a=t.inputs.Field)&&"field"!=a||(a="Close"),i.length<t.days+1)t.error=!0;else{for(var u=t.startFrom;u<i.length;u++)if(u&&(r=i[u],c.r1kc(4),n=i[c.n1kc(1,u)],(r[a]||0===r[a])&&(n[a]||0===n[a]))){if(s=r[a]-n[a],o=Math.min(u,t.days),(l=n["_avgG "+t.name])||(l=0),c.N1kc(10),l-=c.n1kc(o,l),(h=n["_avgL "+t.name])||(h=0),c.r1kc(10),h-=c.j1kc(o,h),s>0)c.N1kc(10),l+=c.j1kc(o,s);else{if(!(s<=0))continue;c.N1kc(10),h-=c.j1kc(o,s)}u>=t.days&&(!l&&0===l||!h&&0===h||(r["RSI "+t.name]=(d=l,m=void 0,0===(p=h)?100:(c.z17m(),c.r1kc(10),m=c.j1kc(p,d),c.N1kc(80),c.j1kc(m,100,100,1))))),r["_avgG "+t.name]=l,r["_avgL "+t.name]=h}var d,p,m;t.zoneOutput="RSI"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:t.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):("rsi feature requires first activating studies feat","ure.",console.error("rsi feature requires first activating studies feature."))},ae=function(e){var t;Me.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("e","m","a",t.Studies.calculateSchaff=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=Me;if("_","MA","C","D1","fiel","d",a=i.chart.scrubbed,r=i.days,n=Number(i.inputs["Short Cycle"]),s=Number(i.inputs["Long Cycle"]),f.q17m(),a.length<Math.max(r,n,s)+1)i.error=!0;else{(o=i.inputs.Field)&&"field"!=o||(o="Close"),.5,t.Studies.MA(i.inputs["Moving Average Type"],n,o,0,"_MACD1",e,i),t.Studies.MA(i.inputs["Moving Average Type"],s,o,0,"_MACD2",e,i),f.r1kc(1),l=f.j1kc("0",0),h=0;for(var y=i.startFrom;y<a.length;y++)c=a[y],y<s-1||(u=c["_MACD1 "+i.name],d=c["_MACD2 "+i.name],(u||0===u||d||0===d)&&(f.r1kc(4),c["_MACD "+i.name]=f.n1kc(d,u)),p=c["_MACD "+i.name],y<s+(r-1)||(l=(m=v(r,y,"_MACD"))[1]>m[0]?100*(p-m[0])/(m[1]-m[0]):l,(p||0===p)&&("_","P","F"," ","_","P","F"," ","_P","F ",c["_PF "+i.name]=a[y-1]["_PF "+i.name]?a[y-1]["_PF "+i.name]+.5*(l-a[y-1]["_PF "+i.name]):l),g=c["_PF "+i.name],y<s+2*(r-1)||(h=(m=v(r,y,"_PF"))[1]>m[0]?100*(g-m[0])/(m[1]-m[0]):h,(g||0===g)&&("Res","ult ",c["Result "+i.name]=a[y-1]["Result "+i.name]?a[y-1]["Result "+i.name]+.5*(h-a[y-1]["Result "+i.name]):h))))}function v(e,t,r){var n,s,o;n=null,s=null;for(var l=t-e+1;l<=t;l++)(o=a[l][r+" "+i.name])&&(n=null===n?o:Math.min(n,o),s=null===s?o:Math.max(s,o));return[n,s]}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:t.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}}})):console.error("schaffTrendCycle feature requires first activating studies feature.")},re=function(e){var t;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Me.z17m(),t.Studies?("#5F7C","B","8",t.Studies.calculateShinohara=function(e,i){var a,r;if(Me.q17m(),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{r={weakNum:0,weakDen:0,strongNum:0,strongDen:0},i.startFrom>1&&(r=t.clone(a[i.startFrom-1]["_accums "+i.name]));for(var n=i.startFrom;n<a.length;n++)r.weakNum+=a[n].High-a[n].Close,r.weakDen+=a[n].Close-a[n].Low,n>0&&(r.strongNum+=a[n].High-a[n-1].Close,r.strongDen+=a[n-1].Close-a[n].Low),n>=i.days&&(r.weakNum-=a[n-i.days].High-a[n-i.days].Close,r.weakDen-=a[n-i.days].Close-a[n-i.days].Low,a[n]["Weak Ratio "+i.name]=100*r.weakNum/r.weakDen,n>i.days&&("Stro","ng Ratio ",r.strongNum-=a[n-i.days].High-a[n-i.days-1].Close,r.strongDen-=a[n-i.days-1].Close-a[n-i.days].Low,a[n]["Strong Ratio "+i.name]=100*r.strongNum/r.strongDen)),a[n]["_accums "+i.name]=t.clone(r)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:t.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":"#5F7CB8"}}})):("shinohara feature requires first activating stud","ies feature.",console.error("shinohara feature requires first activating studies feature."))},ne=function(e){var t;Me.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("a","u","t","o","au","to","S","t","ochasti","cs","a","ut","o","#","FF0000",t.Studies.calculateStochastics=function(e,i){var a,r,n,s,o;if("%","K"," ","F","a","s","t",i.smooth||(i.smooth=i.inputs.Smooth),(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.inputs["%K Periods"])||(r=i.days),(n=i.chart.scrubbed).length<Math.max(r,i.days)+1)i.error=!0;else{(s=i.inputs["%K Smoothing Periods"])?i.smooth=!0:i.smooth&&(s=3),(o=i.inputs["%D Periods"])||(o=3),i.outputMap={},i.outputMap["%K "+i.name]="Fast",i.outputMap["%D "+i.name]="Slow";for(var l=Math.max(r,i.startFrom);l<n.length;l++)null!==h(l,a,r)&&(n[l][i.name]=h(l,a,r));t.Studies.MA("simple",i.smooth?s:1,i.name,0,"%K",e,i),t.Studies.MA("simple",o,"%K "+i.name,0,"%D",e,i)}function h(e,t,i){var a,r,s,o,l;Me.r1kc(3),a=Me.n1kc(i,1,e),r=-1*Number.MAX_VALUE,s=Number.MAX_VALUE;for(var h=a;h<=e;h++)"L","o","w",o=n[h]["Close"==t?"Low":t],l=n[h]["Close"==t?"High":t],(o||0===o)&&(l||0===l)&&(s=Math.min(s,o),r=Math.max(r,l));return r==-1*Number.MAX_VALUE||s==Number.MAX_VALUE?null:r==s?0:(n[e][t]-s)/(r-s)*100}},t.Studies.calculateStochMomentum=function(e,i){var a,r,n,s,o,l,h,c;function u(e,t){var i,a;i=null,Me.q17m(),a=null;for(var r=t-e+1;r<=t;r++)i=null===i?o[r].Low:Math.min(i,o[r].Low),a=null===a?o[r].High:Math.max(a,o[r].High);return[i,a]}if("_","D","HL2","expo","n","enti","al",Me.z17m(),"_","H","S","2","expone","nt","i","al",a=Number(i.inputs["%K Periods"]),r=Number(i.inputs["%K Smoothing Periods"]),n=Number(i.inputs["%K Double Smoothing Periods"]),s=Number(i.inputs["%D Periods"]),(o=i.chart.scrubbed).length<a+r+n-1||o.length<s)i.error=!0;else{for(l=Math.max(a,i.startFrom)-1;l<o.length;l++)"_D","HL"," ",h=o[l],c=u(a,l),h["_H "+i.name]=h.Close-(c[0]+c[1])/2,h["_DHL "+i.name]=c[1]-c[0];for(t.Studies.MA("exponential",r,"_H "+i.name,0,"_HS1",e,i),t.Studies.MA("exponential",n,"_HS1 "+i.name,0,"_HS2",e,i),t.Studies.MA("exponential",r,"_DHL "+i.name,0,"_DHL1",e,i),t.Studies.MA("exponential",n,"_DHL1 "+i.name,0,"_DHL2",e,i),l=a-1;l<o.length;l++)o[l]["%K "+i.name]=o[l]["_HS2 "+i.name]/(.5*o[l]["_DHL2 "+i.name])*100;t.Studies.MA(i.inputs["%D Moving Average Type"],s,"%K "+i.name,0,"%D",e,i),i.zoneOutput="%K"}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:t.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},stochastics:{name:"Stochastics",range:"0 to 100",calculateFN:t.Studies.calculateStochastics,inputs:{Period:14,Field:"field",Smooth:!0},outputs:{Fast:"auto",Slow:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("stochastics feature requires first activating studies feature.")},se=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("#","b82","c0c",t.Studies.calculateSupertrend=function(e,i){var a,r,n,s,o,l,h=Me;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{t.Studies.calculateStudyATR(e,i);for(var c=i.startFrom;c<a.length;c++)"_D","irection ",(r=a[c])&&(n=(r.High+r.Low)/2,s=i.inputs.Multiplier*r["ATR "+i.name],h.N1kc(4),o=h.n1kc(s,n),h.r1kc(2),l=h.j1kc(s,n),c&&(a[c-1]&&a[c-1].Close&&a[c-1].Close>a[c-1]["_Uptrend "+i.name]&&a[c-1]["_Uptrend "+i.name]>o&&(h.r1kc(64),o=a[h.j1kc("1",0,c)]["_Uptrend "+i.name]),a[c-1]&&a[c-1].Close&&a[c-1].Close<a[c-1]["_Downtrend "+i.name]&&a[c-1]["_Downtrend "+i.name]<l&&(h.N1kc(4),l=a[h.n1kc(1,c)]["_Downtrend "+i.name])),r["_Direction "+i.name]=1,c&&(h.r1kc(4),r["_Direction "+i.name]=a[h.n1kc(1,c)]["_Direction "+i.name],r.Close>a[c-1]["_Downtrend "+i.name]?r["_Direction "+i.name]=1:r.Close<a[c-1]["_Uptrend "+i.name]&&(r["_Direction "+i.name]=-1)),r["_Uptrend "+i.name]=o,r["_Downtrend "+i.name]=l,r["Trend "+i.name]=r["_Direction "+i.name]>0?o:l);i.outputMap={},i.outputMap["Trend "+i.name]=""}},t.Studies.displaySupertrend=function(e,t,i){var a,r,n,s,o,l,h,c,u,d;Me.z17m(),a=e.panels[t.panel],r=t.getContext(e),n=t.getYAxis(e),s={skipTransform:a.name!=t.chart.name,skipProjections:!0,label:e.preferences.labels,yAxis:n,highlight:t.highlight},r.strokeStyle=f(e,i[i.length-1]),r.lineWidth=2,t.highlight&&(Me.r1kc(16),r.lineWidth=Me.n1kc(1,"1.5")),o="Trend "+t.name;for(var p=0;a.chart.transformFunc&&n!=a.chart.yAxis&&p<i.length;p++)(l=i[p])&&l.transform&&(l.transform[o]=a.chart.transformFunc(e,a.chart,l[o]));for(e.plotDataSegmentAsLine(o,a,s,f),r.lineWidth=1,r.globalAlpha=1,e.startClip(t.panel),!t.highlight&&e.highlightedDraggable&&(r.globalAlpha*=.3),h=r.measureText("").width/2,c=0;c<i.length;c++)if("_Dir","ection ",i[c]&&i[c-1])if(i[c-1]["_Direction "+t.name]>i[c]["_Direction "+t.name]){"bo","ttom",r.fillStyle=t.outputs.Downtrend,r.textBaseline="bottom",u=e.pixelFromPrice(i[c].High,a,n);for(var m=5;m<=45;m+=10)n.flipped?r.fillText("",e.pixelFromBar(c)-h,u+m):r.fillText("",e.pixelFromBar(c)-h,u-m)}else if(i[c-1]["_Direction "+t.name]<i[c]["_Direction "+t.name]){"t","o","p",r.fillStyle=t.outputs.Uptrend,r.textBaseline="top",d=e.pixelFromPrice(i[c].Low,a,n);for(var g=5;g<=45;g+=10)n.flipped?r.fillText("",e.pixelFromBar(c)-h,d-g):r.fillText("",e.pixelFromBar(c)-h,d+g)}function f(e,i,a){return Me.z17m(),i&&i["_Direction "+t.name]<0?t.outputs.Downtrend:t.outputs.Uptrend}e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Supertrend:{name:"Supertrend",overlay:!0,seriesFN:t.Studies.displaySupertrend,calculateFN:t.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("supertrend feature requires first activating studies feature.")},oe=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateSwingIndex=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p=Me;p.z17m(),(null===(i=t.inputs["Limit Move Value"])||isNaN(i))&&(i=99999),a=t.chart.scrubbed,r=0,t.startFrom>1&&(r=a[t.startFrom-1]["Result "+t.name]);for(var m=Math.max(1,t.startFrom);m<a.length;m++)"Swi","ng",n=Math.abs(a[m].High-a[m-1].Close),s=Math.abs(a[m].Low-a[m-1].Close),o=Math.abs(a[m].High-a[m].Low),l=Math.abs(a[m-1].Close-a[m-1].Open),h=Math.max(n,s),c=Math.max(o,h),p.N1kc(12),u=p.j1kc(.25,c,l),c==n?(p.r1kc(16),u-=p.j1kc(s,.5)):c==s&&(p.r1kc(16),u-=p.j1kc(n,.5)),d=50*(a[m].Close-a[m-1].Close+.5*(a[m].Close-a[m].Open)+.25*(a[m-1].Close-a[m-1].Open))/u*(h/i),0!==u&&0!==i||(d=0),"Swing"==t.type&&(r=0),r+=d,a[m]["Result "+t.name]=r},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},Swing:{name:"Swing Index",calculateFN:t.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}}})):("swingIndex feat","ure requires first activating studies feature.",console.error("swingIndex feature requires first activating studies feature."))},le=function(e){var t;Me.q17m(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("a","uto","f","ie","l","d","Trend Intensit","y"," Ind","ex",t.Studies.calculateTrendIntensity=function(e,i){var a,r,n,s,o,l,h,c,u=Me;if("Si","gnal Peri","od","e","m","a","m","a","C","lo","s","e",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(r=i.inputs.Field,u.q17m(),r&&"field"!=r||(r="Close"),t.Studies.MA("ma",i.days,r,0,"_SMA",e,i),n=0,s=0,h=[],c=Math.ceil(i.days/2),o=Math.max(0,i.startFrom-c);o<a.length;o++)"T","I","I ","_","SMA ","_","S","MA"," ",(a[o]["_SMA "+i.name]||0===a[o]["_SMA "+i.name])&&((l=a[o][r]-a[o]["_SMA "+i.name])<0?(u.N1kc(81),s+=u.j1kc(1,l)):n+=l,h.push(l),h.length>c&&((l=h.shift())<0?(u.r1kc(81),s-=u.j1kc(1,l)):n-=l),o<i.startFrom||(a[o]["TII "+i.name]=d(n,s)));t.Studies.MA("ema",i.inputs["Signal Period"],"TII "+i.name,0,"Signal",e,i)}function d(e,t){return Math.abs(t)<1e-8?100:(u.N1kc(82),u.j1kc(e,"100",t,"100",1))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:t.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("trendIntensity feature requires first activating studies feature.")},he=function(e){var t,i;if(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,Me.z17m(),t.Studies){"TRI","X",t.Studies.calculateTRIX=function(e,i){var a,r,n,s,o,l,h=Me;if("C","l","o","se",(a=i.chart.scrubbed).length<i.days+1){i.error=!0,-335458378,-1896395470,2;for(var c=1;-335458378!==h.M00(c.toString(),c.toString().length,79676);c++)return;if(-1896395470!==h.M00(2..toString(),2..toString().length,19250))return}r=i.name,h.r1kc(2),n=["Close",h.j1kc(r,"_MA1 "),h.n1kc(r,"_MA2 "),h.j1kc(r,"_MA3 ")];for(var u=0;u<n.length-1;u++)"_","M","A",t.Studies.MA("exponential",i.days,n[u],0,"_MA"+(u+1).toString(),e,i);s=n[3];for(var d=Math.max(1,i.startFrom);d<a.length;d++)h.N1kc(4),(o=a[h.n1kc(1,d)][s])&&((l=a[d][s])||0===l)&&(h.r1kc(2),a[d][h.n1kc(r,"Result ")]=h.j1kc(o,l,"1",100,h.r1kc(72)))},-1197834999,1921912916,i=2;for(var a=1;-1197834999!==Me.M00(a.toString(),a.toString().length,63212);a++)t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{TRIX:{name:"",calculateFN:t.Studies.calculateTRIX}}),i+=2;1921912916!==Me.h50(i.toString(),i.toString().length,85044)&&(t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{TRIX:{name:"",calculateFN:t.Studies.calculateTRIX}})),t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{TRIX:{name:"TRIX",calculateFN:t.Studies.calculateTRIX}})}else"trix feature requires firs","t ac","tivating studies feature.",console.error("trix feature requires first activating studies feature.")},ce=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?(t.Studies.calculateTwiggsMoneyFlow=function(e,t){var i,a,r,n,s,o;if((i=t.chart.scrubbed).length<t.days)t.error=!0;else{a=0,r=0,(n=i[t.startFrom-1])&&("_sumV"," ","_sum","M","F"," ",n["_sumMF "+t.name]&&(a=n["_sumMF "+t.name]),n["_sumV "+t.name]&&(r=n["_sumV "+t.name]));for(var l=Math.max(1,t.startFrom);l<i.length;l++)"_sum","V"," ","_","MFV ",s=Math.max(i[l-1].Close,i[l].High),o=Math.min(i[l-1].Close,i[l].Low),i[l]["_MFV "+t.name]=i[l].Volume*(2*i[l].Close-s-o)/(s-o==0?999999:s-o),l>t.days-1&&(a*=(t.days-1)/t.days,r*=(t.days-1)/t.days),a+=i[l]["_MFV "+t.name],r+=i[l].Volume,l>t.days-1&&r&&(Me.r1kc(10),i[l]["Result "+t.name]=Me.j1kc(r>0?r:999999,a)),i[l]["_sumMF "+t.name]=a,i[l]["_sumV "+t.name]=r}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Twiggs:{name:"Twiggs Money Flow",calculateFN:t.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}})):console.error("twiggsMoneyFlow feature requires first activating studies feature.")},ue=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?t.Studies.calculateTypicalPrice?("Weig","hted Close",t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:"Weighted Close",calculateFN:t.Studies.calculateTypicalPrice,inputs:{Period:14}}})):("typicalPrice fe","ature requires first activating medianP","rice fea","ture.",console.error("typicalPrice feature requires first activating medianPrice feature.")):console.error("typicalPrice feature requires first activating studies feature.")},de=function(e){var t;Me.z17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateUlcerIndex=function(e,i){var a,r,n,s;if("_M","A",(a=i.chart.scrubbed).length<2*i.days-1)i.error=!0;else{for((r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.max(i.startFrom,i.days-1);n<a.length;n++)a[n]["_PD2 "+i.name]=Math.pow(100*(a[n][r]/o(i.days,n,r)-1),2);for(t.Studies.MA("simple",i.days,"_PD2 "+i.name,0,"_MA",e,i),n=Math.max(i.startFrom,2*(i.days-1));n<a.length;n++)((s=a[n]["_MA "+i.name])||0===s)&&(a[n]["Result "+i.name]=Math.sqrt(s))}function o(e,t,i){var r;r=null;for(var n=t-e+1;n<=t;n++)n<0||(r=null===r?a[n][i]:Math.max(r,a[n][i]));return Me.z17m(),r}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:t.Studies.calculateUlcerIndex,inputs:{Period:14,Field:"field"}}})):console.error("ulcerIndex feature requires first activating studies feature.")},pe=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.calculateUltimateOscillator=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=Me;if("Cyc","le ","2",i=t.chart.scrubbed,a=[t.inputs["Cycle 1"],t.inputs["Cycle 2"],t.inputs["Cycle 3"]],r=Math.max(a[0],a[1],a[2]),i.length<r+1)t.error=!0;else{n=a[0]*a[1],s=a[0]*a[2],o=a[1]*a[2],v.N1kc(15),l=[0,v.j1kc("0",0),0],v.r1kc(16),v.q17m(),h=[v.j1kc(1,"0"),0,v.n1kc(694922912,"0",v.N1kc(27))],t.startFrom&&(i[t.startFrom-1]["_accbp "+t.name]&&(l=i[t.startFrom-1]["_accbp "+t.name].slice()),i[t.startFrom-1]["_acctr "+t.name]&&(h=i[t.startFrom-1]["_acctr "+t.name].slice()));for(var x=Math.max(1,t.startFrom);x<i.length;x++){"Resu","lt ",c=Math.min(i[x].Low,i[x-1].Close),u=i[x].Close-c,d=Math.max(i[x].High,i[x-1].Close)-c;for(var b=0;b<a.length;b++)l[b]+=u,h[b]+=d,x>a[b]&&(p=Math.min(i[x-a[b]].Low,i[x-a[b]-1].Close),m=i[x-a[b]].Close-p,g=Math.max(i[x-a[b]].High,i[x-a[b]-1].Close)-p,l[b]-=m,h[b]-=g);i[x]["_accbp "+t.name]=l.slice(),i[x]["_acctr "+t.name]=h.slice(),x<r||(f=o*l[0]/h[0]+s*l[1]/h[1]+n*l[2]/h[2],v.r1kc(47),y=v.j1kc(s,n,o),v.r1kc(38),i[x]["Result "+t.name]=v.n1kc(y,100,f))}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:t.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("ultimateOscillator feature requires first activating studies feature.")},me=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("#fff6","9e","#85c99","e","Valu","a","tion"," Lines",t.Studies.calculateValuationLines=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=Me;a="field"==t.inputs.Field?"Close":t.inputs.Field,r=t.inputs["Average Type"],n=t.inputs["Display Average"],s=t.inputs["Display 1 Standard Deviation (1)"],o=t.inputs["Display 2 Standard Deviation (2)"],l=t.inputs["Display 3 Standard Deviation (3)"],h=[];for(var y=0;y<i.length;++y)i[y]&&!isNaN(i[y][a])&&h.push(i[y][a]);c=function(e,t){var i,a,r,n,s,o;switch(i=e.length,a=0,r=0,n=0,t){case"mean":for(r=i;n<i;++n)a+=e[n];break;case"harmonic":for(a=i;n<i;++n)r+=1/e[n];break;case"median":f.N1kc(10),s=Math.floor(f.j1kc(2,i)),o=e.slice().sort((function(e,t){return e>t?1:e<t?(f.N1kc(0),-f.n1kc("1",2147483647)):0})),i%2==0?(a=o[s]+o[s-1],r=2):(a=o[s],r=1)}return f.N1kc(10),f.j1kc(r,a)}(h,r),u=!(s||o||l)||function(e,t){var i,a;i=e.length,a=0;for(var r=0;r<i;++r)a+=Math.pow(e[r]-t,2);return f.r1kc(10),Math.sqrt(f.n1kc(i,a))}(h,c),t.data={Average:n?[c]:null,"1 Standard Deviation (1)":s?[c+u,c-u]:null,"2 Standard Deviation (2)":o?[c+2*u,c-2*u]:null,"3 Standard Deviation (3)":l?[c+3*u,c-3*u]:null},d=u,t.parameters||(t.parameters={}),l?(f.r1kc(83),t.parameters.range=[f.j1kc(u,d,c,3),f.j1kc(d,3,c,u,f.N1kc(84))]):o?(f.N1kc(83),t.parameters.range=[f.n1kc(u,d,c,2),f.n1kc(d,2,c,u,f.r1kc(84))]):s?(f.N1kc(60),t.parameters.range=[f.n1kc(d,c,u),f.n1kc(u,d,c,f.N1kc(47))]):n&&(f.r1kc(4),t.parameters.range=[f.j1kc(d,c),f.j1kc(d,c,f.N1kc(2))]),t.panel&&(p=e.panels[t.panel],(m=e.getYAxisByName(p,t.name))&&(m.decimalPlaces=p.chart.yAxis.printDecimalPlaces,g={yAxis:m},e.calculateYAxisRange(p,m,t.parameters.range[0],t.parameters.range[1]),e.createYAxis(p,g),e.drawYAxis(p,g)))},t.Studies.displayValuationLines=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;for(var k in"c","iq-valuation-","aver","age-line","A","V","G",a=e.panels[i.panel],r=i.getYAxis(e),n=i.getContext(e),s=i.data,o=i.parameters.labels,l=i.inputs["Average Type"],h={mean:"AVG",median:"MED",harmonic:"HAVG"},c=e.canvasStyle("ciq-valuation-average-line"),u=e.canvasStyle("ciq-valuation-deviation-line"),3,d=e.getCanvasFontSize("stx_yaxis")+6,s)if(s[k])for(Me.N1kc(85),p=Me.n1kc("Average",k),m=t.Studies.determineColor(i.outputs[k]),g=s[k],f=0;f<g.length;++f)"",": ","lin","e","dash","ed","s","oli","d","so","l","id",y=g[f],(v=e.pixelFromPrice(y,a,r))<=a.top||v>=a.yAxis.bottom||(S=p?{pattern:"none"!=c.borderStyle&&c.borderStyle||"solid",lineWidth:parseFloat(c.borderWidth)||1,opacity:parseFloat(c.opacity)||1,yAxis:r}:{pattern:"none"!=u.borderStyle&&u.borderStyle||"dashed",lineWidth:parseFloat(u.borderWidth)||1,opacity:parseFloat(u.opacity)||1,yAxis:r},e.plotLine(a.left,a.right,v,v,m,"line",n,a,S),"yaxis"!==o?(v+=Math.floor(S.lineWidth/2))+d>=a.yAxis.bottom||(x=(p?h[l]+": ":k[0]+": ")+e.formatYAxisPrice(y,a),b=n.measureText(x).width,C=a.right-b-3,r&&"left"==r.position&&(C=a.left+3),Me.N1kc(86),n.strokeText(x,C,Me.j1kc(2,.5,d,v))):e.createYAxisLabel(a,e.formatYAxisPrice(y,a),v,m,null,n,r))},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(e,i,a){Me.z17m(),t.Studies.calculateValuationLines(e,i,a),t.Studies.displayValuationLines(e,i)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median","harmonic"],"Display Average":!0,"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1},outputs:{Average:"#00afed","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"}}})):console.error("valuationLines feature requires first activating studies feature.")},ge=function(e){var t,i,a,r=Me;if(r.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies)"a","u","t","o","a","u","to","Historical Vol","atility",t.Studies.calculateRelativeVolatility=function(e,i){var a,n,s,o,l,h,c;if("Re","l Vo","l","Clo","se","STD Perio","d","Smoothing P",r.q17m(),"er","iod",i.days=Number(i.inputs["Smoothing Period"]),a=Number(i.inputs["STD Period"]),(n=i.chart.scrubbed).length<i.days+a)i.error=!0;else{(s=i.inputs.Field)&&"field"!=s||(s="Close"),i.std=new t.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=a,i.std.startFrom=i.startFrom,i.std.inputs={Field:s,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,i.std),o=0,l=0,i.startFrom>1&&("_a","vg","L ",o=n[i.startFrom-1]["_avgG "+i.name]||0,l=n[i.startFrom-1]["_avgL "+i.name]||0);for(var u=Math.max(i.startFrom,i.days);u<n.length;u++)h=n[u],r.N1kc(4),c=n[r.j1kc(1,u)],(h[s]||0===h[s])&&(c[s]||0===c[s])&&(h["_STD "+i.name]||0===h["_STD "+i.name])&&(h[s]>c[s]?(o=(o*(i.days-1)+h["_STD "+i.name])/i.days,l=l*(i.days-1)/i.days):(l=(l*(i.days-1)+h["_STD "+i.name])/i.days,o=o*(i.days-1)/i.days),h["Rel Vol "+i.name]=(d=o,p=l,r.q17m(),d+p===0?(r.N1kc(15),r.j1kc("100",68)):(r.N1kc(87),r.n1kc(d,d,p,"100"))),h["_avgG "+i.name]=o,h["_avgL "+i.name]=l);var d,p;i.zoneOutput="Rel Vol"}},t.Studies.calculateHistoricalVolatility=function(e,t){var i,a,n,s,o,l,h,c,u;if("fi","eld",(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{(a=t.inputs.Field)&&"field"!=a||(a="Close"),(n=t.inputs["Standard Deviations"])<0&&(n=1),s=100*Math.sqrt(function(t){"m","o","n","th",r.z17m(),"w","e","e","k",isNaN(t)&&(t=365);if("day"==e.layout.interval)return t;if("week"==e.layout.interval)return 52;if("month"==e.layout.interval)return r.N1kc(21),r.j1kc("12",181064512);return t}(t.inputs["Days Per Year"]))*n,o=[],l=0,t.startFrom>1&&(l=i[t.startFrom-1]["_state "+t.name][0],o=i[t.startFrom-1]["_state "+t.name][1].slice()),r.z17m();for(var d=Math.max(1,t.startFrom);d<i.length;d++){if(r.r1kc(41),(h=i[r.j1kc("1",d)][a])&&(c=Math.log(i[d][a]/h),o.push(c),l+=c,d>=t.days)){u=0,l/=t.days;for(var p=0;p<o.length;p++)u+=Math.pow(o[p]-l,2);l*=t.days,l-=o.shift(),i[d]["Result "+t.name]=Math.sqrt(u/t.days)*s}i[d]["_state "+t.name]=[l,o.slice()]}}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:t.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:"field","Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:t.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}});else{r.N1kc(4),i=-r.j1kc(0,"27164340"),-1818324782,a=2;for(var n=1;r.h50(n.toString(),n.toString().length,31935)!==i;n++)console.error(""),a+=2;-1818324782!==r.h50(a.toString(),a.toString().length,96931)&&console.error(""),console.error("volatilityIndex feature requires first activating studies feature.")}},fe=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?(t.Studies.displayVolumeProfile=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A=Me;function T(a,r){var n,s,o,h,d,p,m,g,y;r||(S-=2),D.canvasColor(a),f.beginPath(),n=c[0][0],s=S;for(var w=1;w<c.length;w++){if(c[w][1]){if(o=Math.round(S-c[w][1]*C/u)-.5,h=Math.round(D.pixelFromTransformedValue(n,x))+.5,d=Math.round(D.pixelFromTransformedValue(c[w][0],x))+.5,r||(h-=.5,d+=.5,o+=.5),h>b&&(h=b),d<b)if(f.moveTo(S,h),f.lineTo(S,d),f.lineTo(o,d),f.lineTo(o,h),r)(s>o||1==w)&&f.lineTo(s,h);else if(f.lineTo(S,h),l&&(p=t.condenseInt(c[w][1]),A.r1kc(4),m=A.n1kc(d,h),v<=m-2)){try{g=f.measureText(p).width}catch(e){g=0}f.textBaseline="top",y=f.fillStyle,f.fillStyle=k,A.r1kc(60),f.fillText(p,A.j1kc(3,o,g),A.n1kc(2,m,"2",v,d,A.N1kc(88))),f.fillStyle=y}s=o}else s=S;n=c[w][0]}!i.highlight&&e.highlightedDraggable&&(f.globalAlpha*=.3),r||f.fill(),f.strokeStyle=k,r&&f.stroke(),f.closePath()}if("stx_volume_","prof","ile","stx_v","olu","me_profi","le",e&&e.chart.dataSet&&(r=e.chart,n=i.parameters.numberOfBars,s=i.parameters.widthPercentage,o=i.parameters.displayBorder,l=i.parameters.displayVolume,(!n||n<0)&&(n=30),n=Math.ceil(n),(!s||s<0)&&(s=.25),!1!==o&&(o=!0),!0!==l&&(l=!1),0!==(h=(r.highValue-r.lowValue)/n))){c=[];for(var M=r.lowValue;M<r.highValue+.1;M+=h)c.push([M,0]);if(c.length<2){e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile")),7313482,177982566,2;for(var P=1;7313482!==A.h50(P.toString(),P.toString().length,41410);P++)return;if(177982566!==A.M00(2..toString(),2..toString().length,19567))return}u=0;for(var F=0;F<a.length;F++)if(d=a[F]){p=d.Volume,i.panel==r.name&&d.transform&&(d=d.transform),m=c[0][0],g=0;for(var _=1;_<c.length;_++)g=c[_][0],(d.Low>=m&&d.Low<=g||d.Low<m&&d.High>g||d.High>=m&&d.High<=g)&&(c[_][1]+=p,c[_][1]>u&&(u=c[_][1])),m=g}if(0===u)return"Not enough data to re","nder the Volume Profile",void e.displayErrorAsWatermark("chart",e.translateIf("Not enough data to render the Volume Profile"));e.setStyle("stx_volume_profile","color",t.Studies.determineColor(i.outputs["Bars Color"])),f=i.getContext(e),y="stx-f",y+="loat-date",e.canvasFont(y,f),v=e.getCanvasFontSize(y),x=r.panel,b=x.yAxis.bottom,A.z17m(),S=Math.round(r.right)-.5,C=r.width*s,k=e.canvasStyle("stx_volume_profile").borderTopColor,w=!t.isTransparent(e.canvasStyle("stx_volume_profile").borderTopColor)&&o,D=e,T("stx_volume_profile",!1),w&&T("stx_volume_profile",!0),A.N1kc(27),f.globalAlpha=A.j1kc(2070212288,"1")}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:t.Studies.displayVolumeProfile,calculateFN:null,inputs:{},outputs:{"Bars Color":"#b64a96"},customRemoval:!0,parameters:{init:{displayBorder:!0,displayVolume:!1,numberOfBars:30,widthPercentage:.25}},attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("volumeProfile feature requires first activating studies feature.")},ye=function(e){var t;Me.q17m(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("#b82c0","c","n","o","n","e","fie","l","d","f","ield","On Balance"," Vol","ume","m","a",t.Studies.calculateOnBalanceVolume=function(e,t){var i,a,r,n,s,o,l,h;(i=t.inputs.Field)&&"field"!=i||(i="Close"),r=!1,(a=t.inputs["Min Tick Value"])||0===a||(r=!0,a=0),n=t.chart.scrubbed,s=0;for(var c=t.startFrom;c<n.length;c++)o=n[c],c&&o[i]&&(n[c-1][i]&&(Me.r1kc(4),l=n[Me.n1kc(1,c)]),l&&(o[i]-l[i]>a?s=1:l[i]-o[i]>a?s=-1:r&&(s=0),(h=l["Result "+t.name])||(h=0),h+=o.Volume*s,o["Result "+t.name]=h))},t.Studies.calculatePriceVolumeTrend=function(e,t){var i,a,r,n;i=t.inputs.Field,a=2;for(var s=1;543318762!==Me.h50(s.toString(),s.toString().length,6289);s++)~i&&"field"!==i&&(i="Close"),r=t.chart.scrubbed,n=6,a+=2;786598110!==Me.h50(a.toString(),a.toString().length,53008)&&(i&&"field"!=i||(i="Close"),r=t.chart.scrubbed,Me.r1kc(4),n=Me.j1kc(0,"0")),t.startFrom>1&&(n=r[t.startFrom-1]["Result "+t.name]);for(var o=Math.max(1,t.startFrom);o<r.length;o++)r[o][i]&&r[o-1][i]&&(n+=r[o].Volume*(r[o][i]-r[o-1][i])/r[o-1][i],r[o]["Result "+t.name]=n)},t.Studies.calculateVolumeIndex=function(e,i){var a,r,n,s,o,l,h,c,u=Me;if((a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.chart.scrubbed).length<i.days+1){-552512156,954429135,n=2;for(var d=1;-552512156!==u.M00(d.toString(),d.toString().length,58050);d++)i.error=!1,n+=2;954429135!==u.h50(n.toString(),n.toString().length,69069)&&(i.error=!0)}else{s=100,i.startFrom>1&&(s=r[i.startFrom-1]["Index "+i.name]);for(var p=Math.max(1,i.startFrom);p<r.length;p++)"Index"," ","P","os Vol",o=r[p][a],l=r[p].Volume,o&&"object"==Te(o)&&(l=o.Volume,o=o[i.subField]),u.r1kc(4),h=r[u.j1kc(1,p)][a],c=r[p-1].Volume,h&&"object"==Te(h)&&(c=h.Volume,h=h[i.subField]),o&&h&&(("Pos Vol"==i.type&&l>c||"Neg Vol"==i.type&&l<c)&&(u.N1kc(10),s*=u.n1kc(h,o)),r[p]["Index "+i.name]=s);t.Studies.MA(i.inputs["Moving Average Type"],i.days,"Index "+i.name,0,"MA",e,i)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Neg Vol":{name:"Negative Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:t.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"Price Vol":{name:"Price Volume Trend",calculateFN:t.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:t.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:function(e,i){t.Studies.calculateRateOfChange?t.Studies.calculateRateOfChange(e,i):(console.error("Volume Rate of Change study requires first activating momentum feature."),t.Studies.calculateRateOfChange=function(e,t){})},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,position:"none",zoom:0,heightFactor:.25},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(e,t){e.layout.volumeUnderlay=!1,e.changeOccurred("layout")},attributes:{panelName:{hidden:!0}}}})):console.error("volumeStudies feature requires first activating studies feature.")},ve=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("0.","01","#FF","00","0","0","#","0","0FF00",t.Studies.calculateVortex=function(e,i){var a,r,n,s,o,l,h,c,u=Me;if(a=i.chart.scrubbed,r=i.days,a.length<r+1)i.error=!0;else{n={tr:0,vmPlus:0,vmMinus:0},i.startFrom>1&&(n=t.clone(a[i.startFrom-1]["_totals "+i.name]));for(var d=Math.max(i.startFrom,1);d<a.length;d++)"_total","s ","_VMMinu","s"," ",s=a[d],u.N1kc(4),o=a[u.j1kc(1,d)],l=Math.abs(s.High-o.Low),h=Math.abs(s.Low-o.High),c=Math.max(s.High,o.Close)-Math.min(s.Low,o.Close),n.tr+=c,n.vmPlus+=l,n.vmMinus+=h,d>r&&("_VMMi","nu","s ","_True Ra","n","ge ",u.r1kc(4),n.tr-=a[u.j1kc(r,d)]["_True Range "+i.name],u.N1kc(4),n.vmPlus-=a[u.n1kc(r,d)]["_VMPlus "+i.name],u.r1kc(4),n.vmMinus-=a[u.j1kc(r,d)]["_VMMinus "+i.name]),s["_True Range "+i.name]=c,s["_VMPlus "+i.name]=l,s["_VMMinus "+i.name]=h,d>=r&&(s["+VI "+i.name]=n.vmPlus/n.tr,s["-VI "+i.name]=n.vmMinus/n.tr),s["_totals "+i.name]=t.clone(n)}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{Vortex:{name:"Vortex Indicator",calculateFN:t.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}}})):("vortex ","feature"," requires first activating studies feature.",console.error("vortex feature requires first activating studies feature."))},xe=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":Te(_CIQ))?_CIQ:e.CIQ).Studies?("#ffd0c","f",t.Studies.calculateMFI=function(e,t){var i,a,r,n,s,o;for("_","high ","Sc","a","le Facto","r",i=t.chart.scrubbed,r=0,(n=t.inputs["Scale Factor"])||(n=t.study.inputs["Scale Factor"]),s=Math.pow(10,Number(n)),t.startFrom>1&&(r=i[t.startFrom-1]["_high "+t.name]),o=t.startFrom;o<i.length;o++)i[o]&&i[o].Volume&&("_h","igh ",i[o][t.name+"_hist"]=a=s*(i[o].High-i[o].Low)/i[o].Volume,i[o]["_high "+t.name]=r=Math.max(r,a));t.outputMap={},t.outputMap[t.name+"_hist"]=""},t.Studies.displayMFI=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m;r=e.panels[i.panel],n=i.getContext(e),o=(s=i.getYAxis(e)).flipped?s.top:s.bottom,l=e.layout.candleWidth-2,Me.z17m(),l<2&&(l=1),h=t.Studies.determineColor(i.outputs.Green),c=t.Studies.determineColor(i.outputs.Fade),u=t.Studies.determineColor(i.outputs.Fake),d=t.Studies.determineColor(i.outputs.Squat),e.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),n.fillStyle="#CCCCCC",e.startClip(i.panel),!i.highlight&&e.highlightedDraggable&&(n.globalAlpha*=.3);for(var g=0;g<a.length;g++)"_his","t","_","hi","st",p=a[g],Me.r1kc(4),(m=a[Me.n1kc(1,g)])||(m=e.getPreviousBar(e.chart,i.name+"_hist",g)),p&&(m&&(m[i.name+"_hist"]<p[i.name+"_hist"]?m.Volume<p.Volume?n.fillStyle=h:m.Volume>p.Volume&&(n.fillStyle=u):m[i.name+"_hist"]>p[i.name+"_hist"]&&(m.Volume<p.Volume?n.fillStyle=d:m.Volume>p.Volume&&(n.fillStyle=c))),p.candleWidth&&(l=Math.floor(Math.max(1,p.candleWidth-2))),n.fillRect(Math.floor(e.pixelFromBar(g,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(e.pixelFromPrice(p[i.name+"_hist"],r,s)-o)));e.endClip()},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:t.Studies.displayMFI,calculateFN:t.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:"#ffd0cf"}}})):console.error("williamsMFI feature requires first activating studies feature.")},be={CIQ:Ce.c,SplinePlotter:Ce.d,timezoneJS:Ce.B,$$:Ce.a,$$$:Ce.b},Me.q17m(),"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||(be.CIQ||Ce.c).activateImports(n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,V,Q,B,U,W,Y,X,Z,G,K,J,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,xe,null);var Fe=null;Se.c.deprecationWarning=function(e){Fe||(Fe={},setInterval((function(){for(var e in Fe)console.warn(e+" ("+Fe[e]+" occurrences)"),delete Fe[e]}),1e4)),Fe[e]?Fe[e]++:Fe[e]=1};var _e=Se.c.deprecationWarning;Function.prototype.ciqInheritsFrom||(Function.prototype.ciqInheritsFrom=function(e,t){_e("Function.prototype.ciqInheritsFrom() has been deprecated.  Use CIQ.inheritsFrom(me, ctor, autosuper) instead."),Se.c.inheritsFrom(this,e,t)},Function.prototype.stxInheritsFrom=Function.prototype.ciqInheritsFrom),String.prototype.capitalize=function(){return _e("String.prototype.capitalize() has been deprecated.  Use CIQ.capitalize(string) instead."),Se.c.capitalize(this)},CanvasRenderingContext2D.prototype.dashedLineTo=function(e,t,i,a,r){if(_e("CanvasRenderingContext2D.prototype.dashedLineTo() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo(), lineTo() and setLineDash() instead."),!(r instanceof Array))return r&&console.log('WARNING: Unsupported drawing pattern "'+r+'"; defaulting to "solid"'),void this.stxLine(e,t,i,a,this.strokeStyle,this.globalAlpha,this.lineWidth);if(t!==1/0&&e!==1/0&&a!==1/0&&i!==1/0){var n=function(e,t){return e-t<=1e-8},s=function(e,t){return e-t>=-1e-8},o=function(e,t){return Math.min(e,t)},l=function(e,t){return Math.max(e,t)},h={thereYet:s,cap:o},c={thereYet:s,cap:o};if(t-a>0&&(c.thereYet=n,c.cap=l),e-i>0&&(h.thereYet=n,h.cap=l),this.moveTo(e,t),!isNaN(e)&&!isNaN(t))for(var u=e,d=t,p=0,m=!0;!h.thereYet(u,i)||!c.thereYet(d,a);){var g=Math.atan2(a-t,i-e),f=r[p];u=h.cap(i,u+Math.cos(g)*f),d=c.cap(a,d+Math.sin(g)*f),m?this.lineTo(u,d):this.moveTo(u,d),p=(p+1)%r.length,m=!m}}},CanvasRenderingContext2D.prototype.stxLine=function(e,t,i,a,r,n,s,o){_e("CanvasRenderingContext2D.prototype.stxLine() has been deprecated.  Use native CanvasRenderingContext2D methods such as moveTo() and lineTo() instead."),this.beginPath(),this.lineWidth=s,this.strokeStyle=r,this.globalAlpha=n,o&&o.length?this.dashedLineTo(e,t,i,a,o):(this.moveTo(e,t),this.lineTo(i,a)),this.stroke(),this.closePath(),this.lineWidth=1},CanvasRenderingContext2D.prototype.stxCircle=function(e,t,i,a){_e("CanvasRenderingContext2D.prototype.stxCircle() has been deprecated.  Use native CanvasRenderingContext2D methods such as arc() instead."),this.beginPath(),this.arc(e,t,i,0,2*Math.PI,!1),a&&this.fill(),this.stroke(),this.closePath()},Se.c.getAjaxServer=function(e){return _e("CIQ.getAjaxServer() has been deprecated.  Use `new XMLHttpRequest` instead."),new XMLHttpRequest},Se.c.convertClickToTouchEnd=function(e){_e("CIQ.convertClickToTouchEnd() has been deprecated.  Use CIQ.safeClickTouch() instead.");var t=document.getElementById(e),i=t.getAttribute("onClick");i&&(t.removeAttribute("onClick"),t.setAttribute("onTouchEnd",i))},Se.c.standardUTCDate=function(e){_e("CIQ.standardUTCDate(dt) has been deprecated.  Use dt.toISOString() instead.");var t=e.getUTCMonth()+1;t<10&&(t="0"+t);var i=e.getUTCDate();i<10&&(i="0"+i);var a=e.getUTCHours();a<10&&(a="0"+a);var r=e.getUTCMinutes();r<10&&(r="0"+r);var n=e.getUTCSeconds();return n<10&&(n="0"+n),e.getUTCFullYear()+"-"+t+"-"+i+"T"+a+":"+r+":"+n+"Z"},Se.c.isDST=function(e){_e("CIQ.isDST() has been deprecated.  Use dt.toISOString() instead."),e||(e=new Date);var t=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1),a=Math.max(t.getTimezoneOffset(),i.getTimezoneOffset());return e.getTimezoneOffset()!=a},Se.c.getEventDOM=function(e){return _e("CIQ.getEventDOM() has been deprecated.  Use `e.target` instead."),e?e.target:window.event.srcElement},Se.c.outerWidth=function(e){_e("CIQ.outerWidth() has been deprecated.  Use `CIQ.elementDimensions(node, {margin:1, padding:1, border:1}).width` instead.");var t=e.offsetWidth;return t+=Se.c.stripPX(getComputedStyle(e).marginLeft),t+=Se.c.stripPX(getComputedStyle(e).marginRight)},Se.c.clearNode=function(e){if(_e("CIQ.clearNode() has been deprecated.  Use `node.innerHTML=''` instead."),e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)},Se.c.findClosestParent=function(e,t){var i,a;if(_e("CIQ.findClosestParent() has been deprecated.  Use `Element.parentElement.prototype.closest()` instead."),["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some((function(e){return"function"==typeof document.body[e]&&(i=e,!0)})),!i)return!1;for(;e;){if((a=e.parentElement)&&a[i](t))return a;e=a}return null},Se.c.appendClassName=function(e,t){if(_e("CIQ.appendClassName() has been deprecated.  Use `node.classList.add(className)` instead."),e&&e.className!=t){for(var i=e.className.split(" "),a=0;a<i.length;a++)if(i[a]==t)return;e.className?e.className+=" "+t:e.className=t}},Se.c.unappendClassName=function(e,t){if(_e("CIQ.unappendClassName() has been deprecated.  Use `node.classList.remove(className)` instead."),e&&-1!=e.className.indexOf(t))if(e.className==t)e.className="";else{for(var i=e.className.split(" "),a="",r=0;r<i.length;r++)i[r]!=t&&(""!==a&&(a+=" "),a+=i[r]);e.className=a}},Se.c.swapClassName=function(e,t,i){_e("CIQ.swapClassName() has been deprecated.  Use `node.classList.replace(oldClassName, newClassName)` instead."),Se.c.unappendClassName(e,i),Se.c.appendClassName(e,t)},Se.c.hasClassName=function(e,t){return _e("CIQ.hasClassName() has been deprecated.  Use `node.classList.contains(className)` instead."),!!e&&(" "+e.className+" ").indexOf(" "+t+" ")>-1},Se.c.toggleClassName=function(e,t){_e("CIQ.toggleClassName() has been deprecated.  Use `node.classList.toggle(className)` instead."),Se.c.hasClassName(e,t)?Se.c.unappendClassName(e,t):Se.c.appendClassName(e,t)},function(){var e,t,i=document.attachEvent,a=navigator.userAgent.match(/Trident/),r=(e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return setTimeout(e,20)},function(t){return e(t)}),n=(t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)});function s(e){var t=e.target||e.srcElement;t.__resizeRAF__&&n(t.__resizeRAF__),t.__resizeRAF__=r((function(){var i=t.__resizeTrigger__;i.__resizeListeners__.forEach((function(t){t.call(i,e)}))}))}function o(e){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",s)}Se.c.addResizeListener=function(e,t){_e("CIQ.addResizeListener() has been deprecated.  Use CIQ.UI.addResizeListener() instead.");var r=document.querySelector("cq-ui-manager");if(r.length>0&&(r=r[0]).registerForResize(e),!e.__resizeListeners__)if(e.__resizeListeners__=[],i)e.__resizeTrigger__=e,e.attachEvent("onresize",s);else{var n=e.__resizeTrigger__=document.createElement("object");n.setAttribute("style","visibility:hidden; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1; border:0px;"),n.__resizeElement__=e,n.onload=o,n.type="text/html",a&&e.appendChild(n),n.data="about:blank",a||e.appendChild(n)}e.__resizeListeners__.push(t)},Se.c.removeResizeListener=function(e,t){_e("CIQ.removeResizeListener() has been deprecated.  Use CIQ.UI.removeResizeListener() instead.");var a=document.querySelector("cq-ui-manager");a.length>0&&(a=a[0]).unregisterForResize(e),e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(i?e.detachEvent("onresize",s):(e.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",s),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)))}}(),Se.c.Renderer.prototype.performCalculations=function(){_e("CIQ.Renderer.prototype.performCalculations has been deprecated.  Use CIQ.Renderer.prototype.adjustYAxis instead.")},Se.c.ChartEngine.hideDates=function(){return _e("CIQ.Renderer.hideDates is no longer supported.  To hide an axis, set its noDraw property.  To hide the floating date label, set stxx.controls.floatDate=null."),!1},Se.c.ChartEngine.chartShowsHighs=function(e){return _e("CIQ.ChartEngine.prototype.chartShowsHighs has been deprecated.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),1!={line:1,colored_line:1,mountain:1,colored_mountain:1,baseline_delta:1,baseline_delta_mountain:1,histogram:1,scatterplot:1,step:1,colored_step:1}[e]},Se.c.ChartEngine.prototype.createBlock=function(e,t,i,a,r,n){_e("CIQ.ChartEngine.prototype.createBlock has been deprecated.  Use native canvas context operation fillRect instead."),n||(n=this.chart.context),void 0!==a&&(this.canvasColor(r,n),n.fillRect(e,i,t,a),n.globalAlpha=1)},Se.c.ChartEngine.prototype.setVolumeUnderlay=function(e){_e("CIQ.ChartEngine.prototype.setVolumeUnderlay is no longer supported.  To enable a volume underlay, use CIQ.Studies.addStudy(stxx, 'vol undr').  To disable, use CIQ.Studies.removeStudy."),this.layout.volumeUnderlay=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},Se.c.ChartEngine.prototype.serializeDrawings=function(){return _e("CIQ.ChartEngine.prototype.serializeDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.exportDrawings instead."),this.exportDrawings()},Se.c.ChartEngine.prototype.reconstructDrawings=function(e){_e("CIQ.ChartEngine.prototype.reconstructDrawings has been deprecated.  Use CIQ.ChartEngine.prototype.importDrawings instead."),this.importDrawings(e)},Se.c.ChartEngine.prototype.computePosition=function(e,t){return _e("CIQ.ChartEngine.prototype.computePosition has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromBar instead."),void 0===t&&(t=0),e*this.layout.candleWidth+t+this.micropixels},Se.c.ChartEngine.prototype.computeColor=function(e,t){return _e("CIQ.ChartEngine.prototype.computeColor has been deprecated.  There is no suggested alternative."),e<t?"stx_candle_up":e>t?"stx_candle_down":"stx_candle_shadow"},Se.c.ChartEngine.prototype.computeLength=function(e,t){_e("CIQ.ChartEngine.prototype.computeLength has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice to compute values and find the difference.");var i=this.pixelFromPrice(e);return this.pixelFromPrice(t)-i},Se.c.ChartEngine.prototype.setCrosshairColors=function(){_e("CIQ.ChartEngine.prototype.setCrosshairColors is no longer supported.  Use CSS to set the crosshair color")},Se.c.ChartEngine.prototype.valueFromPixelUntransform=function(e,t,i){return _e("CIQ.ChartEngine.prototype.valueFromPixelUntransform has been deprecated.  Use CIQ.ChartEngine.prototype.valueFromPixel instead."),this.valueFromPixel(e,t,i)},Se.c.ChartEngine.prototype.pixelFromPriceTransform=function(e,t,i){return _e("CIQ.ChartEngine.prototype.pixelFromPriceTransform has been deprecated.  Use CIQ.ChartEngine.prototype.pixelFromPrice instead."),this.pixelFromPrice(e,t,i)},Se.c.ChartEngine.prototype.isDailyInterval=function(e){return _e("CIQ.ChartEngine.prototype.isDailyInterval has been deprecated. Use CIQ.ChartEngine.isDailyInterval instead."),Se.c.ChartEngine.isDailyInterval(e)},Se.c.ChartEngine.prototype.newChart=function(e,t,i,a,r){_e("CIQ.ChartEngine.prototype.newChart has been deprecated. Use CIQ.ChartEngine.prototype.loadChart instead.");var n={masterData:t,chart:i};return Se.c.extend(n,r,!0),this.loadChart(e,n,a)},Se.c.ChartEngine.prototype.streamTrade=function(e,t,i,a){_e("CIQ.ChartEngine.prototype.streamTrade has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead.");var r=this.chart;a||(a={}),a.chart&&(r=a.chart),a.fillGaps=this.streamParameters.fillGaps;var n="object"==Pe(e),s=n?e.last:arguments[0],o=n?e.volume:arguments[1],l=n?e.bid:null,h=n?e.ask:null;n||(t=arguments[2],i=arguments[3]),i&&(a.secondarySeries=i);var c={DT:t,Last:s,Volume:o,Bid:l,Ask:h};this.updateChartData(c,r,a)},Se.c.ChartEngine.prototype.appendMasterData=function(e,t,i){_e("CIQ.ChartEngine.prototype.appendMasterData has been deprecated. Use CIQ.ChartEngine.prototype.updateChartData instead."),this.updateChartData(e,t,i)},Se.c.ChartEngine.prototype.setPeriodicityV2=function(e,t,i,a){_e("CIQ.ChartEngine.prototype.setPeriodicityV2 has been deprecated. Use CIQ.ChartEngine.prototype.setPeriodicity instead."),"function"==typeof i&&(a=i,i=null),this.runPrepend("setPeriodicityV2",arguments)||(this.setPeriodicity(e,t,i,a),this.runAppend("setPeriodicityV2",arguments))},Se.c.ChartEngine.prototype.addChart=function(e,t){_e("CIQ.ChartEngine.prototype.addChart has been deprecated. Add manually to stxx.charts object instead."),t.name=e,this.charts[e]=t};var Ee=Se.c.ChartEngine.prototype.changeOccurred;Se.c.ChartEngine.prototype.changeOccurred=function(e){this.currentlyImporting||(this.changeCallback&&this.changeCallback(this,e),Ee.call(this,e))};var Le=Se.c.ChartEngine.prototype.construct;if(Se.c.ChartEngine.prototype.construct=function(){function e(e,t,i){return e._deprecatedPropertyValues||(e._deprecatedPropertyValues={}),t in e._deprecatedPropertyValues||(e._deprecatedPropertyValues[t]=i),e._deprecatedPropertyValues[t]}function t(e,t,i){e._deprecatedPropertyValues||(e._deprecatedPropertyValues={}),e._deprecatedPropertyValues[t]=i}function i(t,i,a){return function(){return _e("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Iterate through CIQ.ChartEngine.prototype.callbackListeners instead."),e(this,t,a||null)}}function a(e,t){return function(i){_e("CIQ.ChartEngine.prototype.callbacks have been deprecated.  Utilize CIQ.ChartEngine.prototype.addEventListener to add a callback, and/or CIQ.ChartEngine.prototype.removeEventListener to remove one."),this._deprecatedPropertyValues||(this._deprecatedPropertyValues={});var a=this._deprecatedPropertyValues[e];a&&t.removeEventListener(e,a),i&&t.addEventListener(e,i),this._deprecatedPropertyValues[e]=i}}var r;Le.call(this),Object.defineProperties(this,{changeCallback:{enumerable:!0,get:function(){return e(this,"changeCallback",null)},set:function(e){_e("CIQ.ChartEngine.prototype.changeCallback has been deprecated.  Use CIQ.ChartEngine.prototype.addEventListener instead."),t(this,"changeCallback",e)}},highLowBars:{enumerable:!0,get:function(){return _e("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),e(this,"highLowBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,wave:!0,rangechannel:!0,none:!0})},set:function(e){_e("CIQ.ChartEngine.prototype.highLowBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.highLowBars instead."),t(this,"highLowBars",e)}},standaloneBars:{enumerable:!0,get:function(){return _e("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),e(this,"standaloneBars",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0})},set:function(e){_e("CIQ.ChartEngine.prototype.standaloneBars is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.standaloneBars instead."),t(this,"standaloneBars",e)}},barsHaveWidth:{enumerable:!0,get:function(){return _e("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),e(this,"barsHaveWidth",{bar:!0,colored_bar:!0,candle:!0,hollow_candle:!0,volume_candle:!0,hlc:!0,colored_hlc:!0,hlc_box:!0,hlc_shaded_box:!0,histogram:!0,scatterplot:!0,wave:!0})},set:function(e){_e("CIQ.ChartEngine.prototype.barsHaveWidth is no longer supported.  Use CIQ.ChartEngine.Chart.prototype.barsHaveWidth instead."),t(this,"barsHaveWidth",e)}}}),this.callbacks={},Object.defineProperties(this.callbacks,{studyOverlayEdit:{enumerable:!0,get:i("studyOverlayEdit"),set:a("studyOverlayEdit",this)},studyPanelEdit:{enumerable:!0,get:i("studyPanelEdit"),set:a("studyPanelEdit",this)},tap:{enumerable:!0,get:i("tap"),set:a("tap",this)},rightClick:{enumerable:!0,get:i("rightClick"),set:a("rightClick",this)},longhold:{enumerable:!0,get:i("longHold"),set:a("longHold",this)},move:{enumerable:!0,get:i("move"),set:a("move",this)},layout:{enumerable:!0,get:i("layout"),set:a("layout",this)},drawing:{enumerable:!0,get:i("drawing"),set:a("drawing",this)},drawingEdit:{enumerable:!0,get:i("drawingEdit"),set:a("drawingEdit",this)},preferences:{enumerable:!0,get:i("preferences"),set:a("preferences",this)},theme:{enumerable:!0,get:i("theme"),set:a("theme",this)},symbolChange:{enumerable:!0,get:i("symbolChange"),set:a("symbolChange",this)},symbolImport:{enumerable:!0,get:i("symbolImport"),set:a("symbolImport",this)},calculateTradingDecimalPlaces:{enumerable:!0,get:(r=this,function(){return _e("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),e(this,"calculateTradingDecimalPlaces",r.chart.calculateTradingDecimalPlaces)}),set:function(e){return function(i){_e("CIQ.ChartEngine.prototype.callbacks.calculateTradingDecimalPlaces has been deprecated.  Utilize CIQ.ChartEngine.Chart.prototype.calculateTradingDecimalPlaces instead."),t(this,"calculateTradingDecimalPlaces",i),e.chart.calculateTradingDecimalPlaces=i}}(this)}}),Object.defineProperty(this.streamParameters,"fillGaps",{enumerable:!0,get:function(){return _e("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),e(this,"fillGaps",!0)},set:function(e){_e("CIQ.ChartEngine.prototype.streamParameters.fillGaps has been deprecated.  Use CIQ.ChartEngine.prototype.updateChartData instead, with params.fillGaps=true or rely on cleanupGaps as default behavior."),t(this,"fillGaps",e)}})},"undefined"!=typeof window&&Object.defineProperties(window,{STX:{enumerable:!0,get:function(){return _e("STX namespace has been deprecated.  Use CIQ namespace instead."),Se.c}},STXChart:{enumerable:!0,get:function(){return _e("STXChart namespace has been deprecated.  Use CIQ.ChartEngine namespace instead."),Se.c.ChartEngine}}}),Se.c.ChartEngine.prototype.attachEngineQuoteFeed=function(e,t){_e("CIQ.ChartEngine.prototype.attachEngineQuoteFeed has been deprecated. Use CIQ.ChartEngine.prototype.attachQuoteFeed instead."),this.attachQuoteFeed(e,t)},Se.c.ChartEngine.prototype.dragPlot=function(e){_e("CIQ.ChartEngine.prototype.dragPlot is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},Se.c.ChartEngine.prototype.dragYAxis=function(e){_e("CIQ.ChartEngine.prototype.dragYAxis is no longer supported.  Use CIQ.ChartEngine.prototype.dragPlotOrAxis instead.")},Se.c.Drawing=Se.c.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},Se.c.Drawing.prototype.setLineColor=function(){if(_e("CIQ.Drawing.prototype.setLineColor has been deprecated.  Use CIQ.Drawing.prototype.setLineColor instead."),Se.c.Drawing.prototype.getLineColor)return Se.c.Drawing.prototype.getLineColor.apply(this,arguments)},Se.c.Studies=Se.c.Studies||function(){},Se.c.Studies.quickAddStudy=function(){if(_e("CIQ.Studies.quickAddStudy has been deprecated.  Use CIQ.Studies.addStudy instead."),Se.c.Studies.addStudy)return Se.c.Studies.addStudy.apply(null,arguments)},Se.c.Studies.overZones=function(){if(_e("CIQ.Studies.overZones has been deprecated.  Use CIQ.Studies.drawZones instead."),Se.c.Studies.drawZones)return Se.c.Studies.drawZones.apply(null,arguments)},Se.c.Studies.volUnderlay=function(){_e("CIQ.Studies.volUnderlay has been deprecated.  Use CIQ.Studies.createVolumeChart instead."),Se.c.Studies.createVolumeChart&&Se.c.Studies.createVolumeChart.apply(null,arguments)},Se.c.Studies.determineMinMax=function(e,t,i){_e("CIQ.Studies.determineMinMax is no longer supported.  The calculation is done automatically elsewhere.")},Se.c.Studies.createYAxis=function(e,t,i,a){_e("CIQ.Studies.createYAxis is no longer supported.  The action is done automatically elsewhere.")},Se.c.Studies.volumeChart=function(e,t,i,a){_e("CIQ.Studies.volumeChart has been deprecated.  Use CIQ.ChartEngine.prototype.drawHistogram instead.");var r,n,s=-1*Number.MAX_VALUE;for(r in i)for(var o=0;o<i[r].length;o++)(n=i[r][o])&&n>s&&(s=n);var l=e.panels[t.panel],h=Math.floor(l.yAxis.bottom)+.5,c=h-(Math.floor(l.yAxis.top)+.5),u=e.layout.candleWidth,d=null;t.parameters&&t.parameters.displayBorder||(a=null);var p=0;a||(p=(u-e.chart.tmpWidth)/2);var m=t.getContext(e);for(r in m.lineWidth=1,e.startClip(t.panel),i){a&&(d=a[r]),m.fillStyle=r,d&&(m.strokeStyle=d),m.beginPath();for(var g,f=h+.5,y=Math.floor(e.pixelFromBar(0,l.chart)),v=0;v<i[r].length;v++)if(e.chart.dataSegment[v]&&e.chart.dataSegment[v].candleWidth?(u=e.chart.dataSegment[v].candleWidth,a||(p=u/4)):(u=e.layout.candleWidth,a||(p=(u-e.chart.tmpWidth)/2)),0===v&&(g=y-=u/2),n=i[r][v]){var x,b,S=n*(c/s),C=Math.min(Math.floor(h-c+(c-S))+.5,h);x=Math.floor(g+p),b=Math.floor(g+u-p),x=Math.max(x,y),m.moveTo(x,h),m.lineTo(b,h),m.lineTo(b,C),m.lineTo(x,C),a?(f>C||0===v)&&m.lineTo(x,f):m.lineTo(x,h),f=C,g+=u}else f=h,g+=u;m.fill(),m.strokeStyle=d,a&&e.layout.candleWidth>=2&&m.stroke(),m.closePath()}e.endClip()},"undefined"!=typeof window&&Object.defineProperty(window,"STXSocial",{enumerable:!0,get:function(){return _e("STXSocial namespace has been deprecated.  Use CIQ.Share namespace instead."),Se.c.Share}}),"function"==typeof $&&$.fn){$.fn.extend($.expr[":"],{trulyvisible:function(e,t,i){_e("Use of jQuery has been deprecated. Use CIQ.UI.trulyVisible() to return element visibility instead of custom pseudo-selector :trulyvisible.");var a=$(e).parents();a=a.add(e);for(var r=0;r<a.length;r++){var n=$(a[r]);if("0"===n.css("opacity"))return!1;if("hidden"===n.css("visibility"))return!1;if("0px"===n.css("height")&&"hidden"==n.css("overflow-y"))return!1;if(!n.is(":visible"))return!1}return!0}});$.fn.extend({stxtap:function(e,t){return _e("Use of jQuery has been deprecated. Use CIQ.UI.stxtap() to attach a listener instead of $.fn.stxtap()."),this.each((function(){Se.c.installTapEvent(this),"string"==typeof e?$(this).on("stxtap",e,(function(e){t.call(this,e)})):$(this).on("stxtap",(function(t){e.call(this,t)}))}))},parentsAndMe:function(e){_e("Use of jQuery has been deprecated. Use CIQ.climbUpDomTree() instead of $.fn.parentsAndMe().");var t=$(this).parents();return t=t.add($(this)).get().reverse()},cqvirtual:function(e){_e("Use of jQuery has been deprecated. Use CIQ.cqvirtual() instead of $.fn.cqvirtual().");var t=this.clone(!0);return t.empty(),t.original=this,t},cqrender:function(e){if(_e("Use of jQuery has been deprecated. Use CIQ.cqrender() instead of $.fn.cqrender()."),this[0].innerHTML==this.original[0].innerHTML)return this.original;this.original.children(":not(template)").remove();var t=this.children();if(t.length){var i=t.detach();this.original.append(i)}return this.original},guaranteedWidth:function(){_e("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedWidth().");for(var e=this,t=e.width();!t;){if("BODY"===(e=e.parent())[0].tagName||e[0]===window)return window.innerWidth;t=e.width()}return t},guaranteedHeight:function(){_e("Use of jQuery has been deprecated. Use CIQ.guaranteedSize() instead of $.fn.guaranteedHeight().");for(var e=this,t=e.height();!t;){if("BODY"===(e=e.parent())[0].tagName||e[0]===window)return window.innerHeight;t=e.height()}return t},emptyExceptTemplate:function(){return _e("Use of jQuery has been deprecated. Use CIQ.removeChildIfNot(node, 'template') instead of $.fn.emptyExceptTemplate()."),this.children().not("template").remove(),this},truthyAttr:function(e){_e("Use of jQuery has been deprecated. Use ['false','0',null,undefined].indexOf(this.getAttribute('...'))==-1 instead of $.fn.truthyAttr().");var t=this.attr(e);return void 0!==t&&("false"!=t.toLowerCase()&&"0"!=t)},attrBetter:function(e,t){return _e("Use of jQuery has been deprecated. check attribute value before setting instead of $.fn.attrBetter()."),this.attr(e,(function(e,i){if(void 0===t&&(t="true"),t!==i)return t}))},removeAttrBetter:function(e){_e("Use of jQuery has been deprecated. check hasAttribute before removing instead of $.fn.removeAttrBetter().");var t=this.attr(e);return!(!t&&""!==t)&&(this.removeAttr(e),!0)},textBetter:function(e){return _e("Use of jQuery has been deprecated. check innerText before setting instead of $.fn.textBetter()."),this.text()!==e&&(this.text(e),!0)}}),$.queryString=function(e){_e("Use of jQuery has been deprecated. Use CIQ.qs() to return an object containing querystring tokens instead of $.querystring().");for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]==e)return a[1]}return null}}function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}Se.c.UI||(Se.c.UI={}),Se.c.UI.allContexts=function(){return _e("CIQ.UI.allContexts has been deprecated. Use document.querySelectorAll('cq-context,*[cq-context]') instead."),$("cq-context,*[cq-context]")},Se.c.UI.observe=function(e){if(_e("CIQ.UI.observe has been deprecated.  Use CIQ.UI.observeProperty instead."),Object.observe){if("function"==typeof $&&$.fn){var t=this,i=function(e){e.forEach(a)};return Object.observe(e.obj,i,["update","add","delete"]),a({name:e.member}),i}_e("You must include jQuery in your project to use CIQ.UI.observe.")}else _e("You must include thirdparty/object-observe.js in your project to use CIQ.UI.observe.");function a(i){var a=!1;if(e.member){if(i.name===e.member)a=!0;else if(e.member.constructor==Array)for(var r=0;r<e.member.length;r++)i.name===e.member[r]&&(a=!0)}else a=!0;if(a){var n=$(e.selector);if(!n.length&&"callback"===e.action)return void e.value.call(t,e);"class"===e.action&&n.removeClass(e.value),n.each((function(){var i=!1;e.member&&(e.condition?e.obj[e.member]===e.condition&&(i=!0):i=e.obj[e.member]),"class"===e.action&&i&&n.addClass(e.value),"callback"===e.action&&e.value.call(t,e,this),"value"===e.action&&(e.value?this.value=e.value:e.obj[e.member]?this.value=e.obj[e.member]:this.value="")}))}}},Se.c.UI.unobserve=function(e){_e("CIQ.UI.unobserve has been deprecated.  Use CIQ.UI.unobserveProperty instead."),Object.unobserve&&Object.unobserve(e.obj,e.handler)},Se.c.UI.Lookup=function(){},Se.c.UI.Lookup.Driver=function(){this.deprecated=!0},Se.c.UI.Lookup.Driver.prototype.acceptText=function(e,t,i,a){this.cb},Se.c.UI.Lookup.Driver.ChartIQ=function(e){_e("CIQ.UI.Lookup.Driver.ChartIQ has been deprecated.  Use CIQ.ChartEngine.Driver.Lookup.ChartIQ instead."),this.exchanges=e,this.exchanges||(this.exchanges=["XNYS","XASE","XNAS","XASX","INDCBSX","INDXASE","INDXNAS","IND_DJI","ARCX","INDARCX","forex"]),this.url="https://symbols.chartiq.com/chiq.symbolserver.SymbolLookup.service",this.requestCounter=0},Se.c.inheritsFrom(Se.c.UI.Lookup.Driver.ChartIQ,Se.c.UI.Lookup.Driver),Se.c.UI.Lookup.Driver.ChartIQ.prototype.acceptText=function(e,t,i,a){"FX"==t&&(t="FOREX"),isNaN(parseInt(i,10))&&(i=100);var r=this.url+"?t="+encodeURIComponent(e)+"&m="+i+"&x=[";this.exchanges&&(r+=this.exchanges.join(",")),r+="]",t&&"ALL"!=t.toUpperCase()&&(r+="&e="+t);var n=++this.requestCounter,s=this;Se.c.postAjax({url:r,cb:function(e,t){if(!(n<s.requestCounter)&&200==e)try{for(var i=(t=JSON.parse(t)).payload.symbols,r=[],o=0;o<i.length;o++){var l=i[o].split("|"),h={symbol:l[0],name:l[1],exchDisp:l[2]};r.push({display:[h.symbol,h.name,h.exchDisp],data:h})}a(r)}catch(e){}}})},Se.c.UI.BaseComponent&&(Se.c.UI.BaseComponent.bind=function(e,t){_e("CIQ.UI.BaseComponent.bind has been deprecated. Use CIQ.UI.BaseComponent.bindNode() instead."),Se.c.UI.BaseComponent.bindNode(e,t)});var Oe=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Animation=t.Animation||function(e){if(!e)throw new Error("Invalid constructor arguments.");var i,a,r;if(e instanceof t.ChartEngine?(i=arguments[0],a=arguments[1],r=arguments[2]):(i=e.stx,a=e.animationParameters,r=e.easeMachine),!i)return console.warn("No CIQ.ChartEngine provided. Cannot properly create CIQ.Animation instance");var n={stayPut:!1,ticksFromEdgeOfScreen:5,granularity:1e6};a=t.extend(n,a),n.tension&&(i.chart.tension=a.tension),i.tickAnimator=r||new t.EaseMachine(Math.easeOutCubic,1e3);var s=new t.EaseMachine(Math.easeInOutCubic,1e3),o=["#0298d3","#19bcfc","#5dcffc","#9ee3ff"],l=0,h=20,c=0,u=!1,d=null;function p(){u=!1,d=null}i.addEventListener(["symbolChange","layout"],(function(e){p()})),i.prepend("updateCurrentMarketData",(function(e,t,i,a){t||(t=this.chart),a&&a.fromTrade&&(t.closePendingAnimation||0===t.closePendingAnimation)&&(a.finalClose=t.closePendingAnimation)})),i.prepend("updateChartData",(function(e,i,r){var n=this;if(i||(i=n.chart),i&&i.defaultChartStyleConfig&&"none"!=i.defaultChartStyleConfig&&(void 0===r||!r.animationEntry&&!r.secondarySeries)&&i.dataSegment){var s=n.tickAnimator,o=this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation;if(o){if(!s)return void console.warn("Animation plug-in can not run because the tickAnimator has not been declared. See instructions in animation.js");if(this.prevSymbol!=i.symbol&&(this.prevQuote=0,i.closePendingAnimation=null,this.prevSymbol=i.symbol),T(),s.stop(),e.length>2)return}var l=t.clone(r);l||(l={}),l.animationEntry=!0,l.bypassGovernor=!0,l.noCreateDataSet=!1,l.appending=!0,l.firstLoop=!0;var h=this.chart.symbol,c=this.layout.periodicity,p=this.layout.interval,m=this.layout.timeUnit;if(o){var g=e[e.length-1];this.prevQuote=this.currentQuote();var f=!1,y=!1;if(1==c&&2==e.length){this.prevQuote=e[0];var v=i.dataSet.length;A(this.prevQuote),v==i.dataSet.length&&(y=!0)}if(!(g&&g.Close&&this.prevQuote&&this.prevQuote.Close))return!1;if(this.extendedHours&&i.market.market_def){var x=g.DT;if(t.ChartEngine.isDailyInterval(p))u=!i.market.isMarketDate(x);else if(!d||d<=x){var b=i.market.getSession(x);u=!(""===b||this.layout.marketSessions&&this.layout.marketSessions[b]),d=i.market[u?"getNextOpen":"getNextClose"](x)}if(u)return this.draw(),!1}var S=c;"second"==p||"second"==m?S*=1e3:"minute"!=p&&"minute"!=m||(S*=6e4),isNaN(p)||(S*=p),f="day"==p||"day"==m?g.DT.getDate()!=this.prevQuote.DT.getDate():"week"==p||"week"==m?g.DT.getDate()>=this.prevQuote.DT.getDate()+7:"month"==p||"month"==m?g.DT.getMonth()!=this.prevQuote.DT.getMonth():g.DT.getTime()>=this.prevQuote.DT.getTime()+S;var C=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,k=0;if(f){if(!this.animations.zoom.hasCompleted)return!1;var w=this.layout.candleWidth;if(i.scroll<=i.maxTicks)for(;this.micropixels>0;)i.scroll++,this.micropixels-=w;i.scroll<=i.maxTicks?(this.previousMicroPixels=this.micropixels,this.nextMicroPixels=this.micropixels+w,k=-1*w,i.dataSegment.length<i.maxTicks-a.ticksFromEdgeOfScreen&&!a.stayPut&&(this.nextMicroPixels=this.micropixels,i.scroll++),i.animatingHorizontalScroll=C,i.previousDataSetLength=i.dataSet.length):y||i.scroll++}i.closePendingAnimation=g.Close;var D=f&&!C?g.Open:this.prevQuote.Close;return s.run(function(e,r,o){return function(u){var d=u.Close;if(!i.dataSet.length||h!=i.symbol||c!=n.layout.periodicity||p!=n.layout.interval||m!=n.layout.timeUnit)return s.stop(),void T();var g=t.clone(e);g.Adj_Close=null,g.Close=Math.round(d*a.granularity)/a.granularity,o?(g.Open||0===g.Open||(g.Open=g.Close),g.High||0===g.High||(g.High=Math.max(g.Open,g.Close)),g.Low||0===g.Low||(g.Low=Math.min(g.Open,g.Close))):(e.Close>r.High&&(g.High=g.Close),e.Close<r.Low&&(g.Low=g.Close)),i.animatingHorizontalScroll&&(n.micropixels=u.micropixels,i.lastTickOffset=u.lineOffset),l.updateDataSegmentInPlace=!s.hasCompleted;var f=[g];o&&"tick"!==n.layout.interval&&f.unshift(r),n.updateChartData(f,i,l),l.firstLoop=!1,s.hasCompleted&&T()}}(g,t.clone(this.prevQuote),f),{Close:D,micropixels:this.nextMicroPixels,lineOffset:k},{Close:g.Close,micropixels:this.micropixels,lineOffset:0}),!0}}function A(e){if(i.masterData)for(var t=i.masterData.length-1;t>=0;t--){var a=i.masterData[t];if(a.Close||0===a.Close)return a.Close=e.Close,e.LastSize&&(a.LastSize=e.LastSize),e.LastTime&&(a.LastTime=e.LastTime),n.updateCurrentMarketData({Close:a.Close,DT:a.DT,LastSize:a.LastSize,LastTime:a.LastTime}),void n.createDataSet(null,null,{appending:!0})}}function T(){if(i.animatingHorizontalScroll&&(i.animatingHorizontalScroll=!1,n.micropixels=n.nextMicroPixels=n.previousMicroPixels,i.lastTickOffset=0),null!==i.closePendingAnimation){var e=i.closePendingAnimation;i.closePendingAnimation=null,A({Close:e})}}})),i.prepend("renderYAxis",(function(e){if(!this.grabbingScreen&&this.isHome()&&(this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation)){var i=e.panel.yAxis;if(!t.Comparison||i.priceFormatter!=t.Comparison.priceFormat)if(e.prevLowValue||0===e.prevLowValue||(e.prevLowValue=e.animatedLow=e.lowValue),e.prevHighValue||0===e.prevHighValue||(e.prevHighValue=e.animatedHigh=e.highValue),s.running||(e.animatingVerticalScroll=!1),e.prevLowValue>=e.lowValue&&e.prevHighValue<=e.highValue)e.animatingVerticalScroll&&(i.highValue=e.animatedHigh,i.lowValue=e.animatedLow);else if(s.running&&s.stop(),e.lowValue||e.highValue){var a,r=e.prevLowValue,n=e.prevHighValue;e.prevLowValue=e.lowValue,e.prevHighValue=e.highValue,e.animatingVerticalScroll=!0,s.run((a=this,function(t){e.animatedLow=t.low,e.animatedHigh=t.high,a.draw()}),{low:r,high:n},{low:e.lowValue,high:e.highValue}),i.lowValue=e.animatedLow,i.highValue=e.animatedHigh}}})),i.append("draw",(function(){if(!u&&this.chart.dataSet&&this.chart.dataSet.length&&this.mainSeriesRenderer&&this.mainSeriesRenderer.supportsAnimation){c%h==0&&(l++,c=0),c++;var e=this.chart.context,t=this.chart.panel,i=this.currentQuote();if(!i)return;var a=i.Close,r=this.pixelFromTick(i.tick,this.chart);this.chart.lastTickOffset&&(r+=this.chart.lastTickOffset);var n=this.pixelFromPrice(a,t);this.chart.yAxis.left>r&&this.chart.yAxis.top<=n&&this.chart.yAxis.bottom>=n&&(l>=o.length&&(l=0),e.beginPath(),e.moveTo(r,n),e.arc(r,n,2+1.07*l,0,2*Math.PI,!1),e.fillStyle=o[l],e.fill())}}))}},He=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ContinuousZoom=t.ContinuousZoom||function(e){this.update(e),this.stx.continuousZoom=this,this.addSmartZoomButton=function(){var e,t=this.stx.registerChartControl&&this.stx.registerChartControl("stx-smart-zoom","SmartZoom (Alt + 0)",(e=this,function(t){e.smartZoomToggle(t),t.stopPropagation()}));t&&(this.stx.addEventListener("layout",(function(e){!0===e.stx.layout.smartzoom?t.classList.add("active"):t.classList.remove("active")})),this.stx.addEventListener("symbolImport",(function(e){!1===e.stx.layout.smartzoom&&t.classList.remove("active")})))},this.smartZoomToggle=function(e){this.smartZoomEnable(!this.stx.layout.smartzoom)},this.smartZoomEnable=function(e){this.stx.layout.smartzoom=e,this.stx.changeOccurred("layout")},this.addSmartZoomButton(),this.smartZoomEnable(!0)},t.ContinuousZoom.prototype.update=function(e){e||(e={}),this.stx=e.stx,this.periodicities=e.periodicities,this.boundaries=e.boundaries},t.ContinuousZoom.prototype.execute=function(e){function t(e){var t=e.period||e.periodicity,i=e.interval,a=e.timeUnit||"minute";switch(isNaN(i)&&(a=i,i=1),a){case"month":i*=4.35;case"week":i*=7;case"day":i*=1440;case"minute":i*=60;case"second":break;case"millisecond":i/=1e3;break;default:return null}return t*i}if(this.stx&&this.stx.layout.smartzoom){var i=this.periodicities,a=this.boundaries,r=this.stx,n=r.layout,s=r.chart;if(i&&a&&(!e&&a.maxCandleWidth&&n.candleWidth>a.maxCandleWidth||e&&a.minCandleWidth&&n.candleWidth<a.minCandleWidth||!e&&a.minTicks&&s.maxTicks<a.minTicks||e&&a.maxTicks&&s.maxTicks>a.maxTicks)){for(var o={value:e?Number.MAX_VALUE:0},l=t(n),h=0;h<i.length;h++){var c=t(i[h]);(c>l&&c<o.value&&e||c<l&&c>o.value&&!e)&&(o={value:c,periodicity:i[h]})}var u=o.periodicity;u&&r.setRange({dtLeft:s.xaxis[0].DT,dtRight:s.xaxis[s.xaxis.length-1].DT,dontSaveRangeToLayout:!0,periodicity:u})}}}},Re=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.ExtendedHours=t.ExtendedHours||function(e){var i=e.stx;this.filter=e.filter,i||(i=e,this.filter=!1);var a={};this.stx=i,this.stx.extendedHours=this;var r="".concat(e.menuContextClass&&"."+e.menuContextClass||"body"," .extendedhours-ui");t.addInternalStylesheet("".concat(r," { display: inherit }"),r),i.addEventListener("theme",(function(e){for(var t in a={},i.layout.marketSessions)a.session||(a.session={}),a.session[t]=i.canvasStyle("stx_market_session "+t)})),i.addEventListener("symbolChange",(function(e){"master"!=e.action||!i.layout.extended||i.chart.market.market_def&&i.chart.market.sessions.length||t.alert("There are no Extended Hours for this instrument.")})),this.prepare=function(e,t){for(var r in i.layout.extended=e,i.layout.marketSessions)a.session={},i.chart.market.disableSession(r);if(i.layout.marketSessions={},e)if(t||(t=["pre","post"]),t.length)for(var n=0;n<t.length;n++)i.layout.marketSessions[t[n]]=!0;else i.layout.marketSessions=t;for(r in i.layout.marketSessions)a.session||(a.session={}),a.session[r]=i.canvasStyle("stx_market_session "+r),i.chart.market.disableSession(r,!0)},this.complete=function(e){i.changeOccurred("layout"),i.chart.market.market_def?this.filter?(i.createDataSet(),i.draw(),e&&e()):i.loadChart(i.chart.symbol,e):e&&e()},this.set=function(e,t,i){this.prepare(e,t),this.complete(i)},this.stx.append("drawYAxis",(function(e,r){if(this.layout.extended&&e.yAxis==r.yAxis&&!1!==e.shareChartXAxis&&!e.hidden){var n=e.chart;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&(a.divider=this.canvasStyle("stx_market_session divider"),a.session)){for(var s,o,l=n.market,h=[],c={},u=0;u<n.dataSegment.length;u++){var d=n.dataSegment[u];if(d&&d.DT){var p=null;if(l.market_def)if(!s||s<=d.DT)o=l.getSession(d.DT),s=l[!(""===o||this.layout.marketSessions&&this.layout.marketSessions[o])?"getNextOpen":"getNextClose"](d.DT);var m=a.session[o];if(m&&(p=m.backgroundColor),c.color&&c.color!=p&&(h.push({start:c.start,end:c.end,color:c.color}),c={}),p){var g=this.layout.candleWidth;d.candleWidth&&(g=d.candleWidth),c.end=this.pixelFromBar(u,n)+g/2,c.start||0===c.start||(c.start=c.end-g+1),c.color=p}else c={}}}(c.start||0===c.start)&&h.push({start:c.start,end:c.end,color:c.color});var f=t.isTransparent(a.divider.backgroundColor),y=a.divider.width.replace(/px/g,""),v={y0:e.bottom,y1:e.top,color:a.divider.backgroundColor,type:"line",context:n.context,confineToPanel:e,pattern:"dashed",lineWidth:y,deferStroke:!0};for(this.startClip(e.name),n.context.beginPath(),i.highlightedDraggable&&(n.context.globalAlpha*=.3),u=0;u<h.length;u++)n.context.fillStyle=h[u].color,!f&&h[u].start>n.left&&this.plotLine(t.extend({x0:h[u].start,x1:h[u].start},v)),n.context.fillRect(h[u].start,e.top,h[u].end-h[u].start,e.bottom-e.top),!f&&h[u].end<n.right&&this.plotLine(t.extend({x0:h[u].end,x1:h[u].end},v));n.context.stroke(),this.endClip()}}}))}},je=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.FullScreen=t.FullScreen||function(e){e||(e={}),e.stx?(this.stx=e.stx,this.stx.fullScreen=this,this.fullScreenButton=null,this.fullScreenState=!1,this.addFullScreenButton=function(){var e;this.stx.registerChartControl&&(this.fullScreenButton=this.stx.registerChartControl("stx-full-screen","Full Screen",(e=this,function(t){e.fullScreenToggle(t),t.stopPropagation()})))},this.fullScreenToggle=function(e){document.documentElement.requestFullscreen||document.documentElement.webkitRequestFullscreen||document.documentElement.mozRequestFullscreen||document.documentElement.msRequestFullscreen?this.getFullScreenElement()?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullscreen?document.documentElement.mozRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen():(this.fullScreenState=!this.fullScreenState,this.fullScreenRender())},this.fullScreenRender=function(){var e=null;(e=this.stx.container.closest("*[cq-context], cq-context, body"))&&(!0===this.fullScreenState?(this.fullScreenButton&&this.fullScreenButton.classList.add("active"),e.classList.add("full-screen")):(this.fullScreenButton&&this.fullScreenButton.classList.remove("active"),e.classList.remove("full-screen")),window.dispatchEvent(new Event("resize")))},this.onFullScreenChange=function(){this.getFullScreenElement()?this.fullScreenState=!0:this.fullScreenState=!1,this.fullScreenRender()},this.getFullScreenElement=function(){return document.fullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement},document.addEventListener("fullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("webkitfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("mozfullscreenchange",this.onFullScreenChange.bind(this),!1),document.addEventListener("MSFullscreenChange",this.onFullScreenChange.bind(this),!1),this.addFullScreenButton()):console.warn("The Full Screen addon requires an stx parameter")}},ze=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.InactivityTimer=t.InactivityTimer||function(e){if(e.minutes){(!e.interval||e.interval<0)&&(e.interval=60),this.stx=e.stx,this.timeout=e.minutes,this.interval=e.interval,this.wakeCB=e.wakeCB,this.sleepCB=e.sleepCB,this.sleepTimer=null,this.sleeping=!1,this.last=(new Date).getTime(),this.wakeChart=function(){clearTimeout(this.sleepTimer),this.last=(new Date).getTime(),this.sleeping&&(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(),this.sleeping=!1,document.body.classList.remove("ciq-sleeping")),this.sleepTimer=setTimeout(this.sleepChart.bind(this),6e4*this.timeout),this.wakeCB&&this.wakeCB()},this.sleepChart=function(){this.sleeping||(this.stx.quoteDriver&&this.stx.quoteDriver.updateChartLoop(this.interval),this.sleeping=!0,document.body.classList.add("ciq-sleeping")),this.sleepCB&&this.sleepCB()};var t=this;["mousemove","mousedown","touchstart","touchmove","pointerdown","pointermove","keydown","wheel"].forEach((function(e){document.body.addEventListener(e,(function(e){t.wakeChart()}))})),this.wakeChart()}}},Ve=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Outliers=t.Outliers||function(e){if(e||(e={}),e.stx){Array.isArray(e.altColors)||(e.altColors=["#323390","#66308f","#0073ba","#f4932f","#0056a4","#00a99c","#00a553","#ea1d2c","#e9088c","#fff126","#912a8e","#ee652e","#00afed","#8ec648"]),this.stx=e.stx,this.stx.outliers=this,this.multiplier=e.multiplier||3,this.altColors=e.altColors,this.axisData={},this.stx.addEventListener("layout",(function(e){Object.keys(e.stx.outliers.axisData).forEach(function(e){this.removeAllMarkers(this.axisData[e]),delete this.axisData[e]}.bind(e.stx.outliers))}));var i="".concat(e.menuContextClass&&"."+e.menuContextClass||"body"," .outliers-ui");t.addInternalStylesheet("".concat(i," { display: inherit }"),i),this.processDataSet=function(e,t,i){if(!e.length||e.length<=1)return!1;var a=[0,0];if(!this.axisData[i.name]){var r="",n=-1;Object.keys(this.axisData).forEach(function(e){this.axisData[e].panel.name==t.name&&n++}.bind(this)),n>-1&&n<this.altColors.length&&(r=this.altColors[n]),this.axisData[i.name]={axis:i,panel:t,displayState:"none",isFlipped:!1,originalZoom:i.zoom,markerColor:r,markers:{},axisMarkers:{}}}var s=this.axisData[i.name];return Object.assign(s,this.find(e)),this.refreshMarkerArray(s),this.refreshMarkers(s),"low"!==s.displayState&&"all"!==s.displayState||null===s.outlierMin?a[0]=s.trendMin:a[0]=s.outlierMin,"high"!==s.displayState&&"all"!==s.displayState||null===s.outlierMax?a[1]=s.trendMax:a[1]=s.outlierMax,a},this.find=function(e){if(e.length&&!(e.length<=0)){var t,i,a=function(e,t){return{quote:e.quote,DT:e.quote.DT,value:e.value,position:t}},r=null,n=null,s=null,o=null,l=[],h=e.slice();h.sort((function(e,t){return e.value-t.value}));var c=h.length,u=h[Math.floor(c/4)].value,d=h[Math.floor(c*(3/4))].value,p=d-u;t=u-p*this.multiplier,i=d+p*this.multiplier;for(var m=0;m<c;m++){var g=h[m],f=h[c-(m+1)];if(g.value<=t&&l.push(a(g,"low")),f.value>=i&&l.push(a(f,"high")),null===s&&g.value<=t&&(s=g.value),null===o&&f.value>=i&&(o=f.value),null===r&&g.value>t&&(r=g.value),null===n&&f.value<i&&(n=f.value),null!==r&&null!==n)break}return{minValue:t,maxValue:i,trendMin:r,trendMax:n,outlierMin:s,outlierMax:o,activeOutliers:l}}},this.refreshMarkerArray=function(e){this.deprecateMarkers(e);var t=e.markers;e.activeOutliers.forEach(function(i){var a=i.DT.getTime().toString();t[a]||(t[a]={isFresh:!0,type:"quote",value:i.value,marker:this.markOutlier(i,i.position,e)}),t[a].isFresh=!0}.bind(this)),null!==e.outlierMax&&(t.axisHigh||(t.axisHigh={isFresh:!0,type:"axis",value:e.outlierMax,marker:this.markAxis("high",e)}),t.axisHigh.isFresh=!0),null!==e.outlierMin&&(t.axisLow||(t.axisLow={isFresh:!0,type:"axis",value:e.outlierMin,marker:this.markAxis("low",e)}),t.axisLow.isFresh=!0)},this.setDisplayState=function(e,t){"high"!=e&&"low"!=e&&"all"!=e&&(e="none");var i=e;"all"==t.displayState&&"high"==e?i="low":"all"==t.displayState&&"low"==e?i="high":"high"==t.displayState&&"low"==e||"low"==t.displayState&&"high"==e?i="all":t.displayState==e&&(i="none"),t.displayState=i,t.axis.zoom=t.originalZoom,this.refreshMarkers(t),this.stx.draw()},this.deprecateMarkers=function(e){Object.keys(e.markers).forEach(function(e){var t;(t=this.markers[e]).marker&&!t.isFresh?(t.marker.remove&&t.marker.remove(),t.marker=null):t.isFresh=!1,this.markers[e].marker||delete this.markers[e]}.bind(e))},this.removeAllMarkers=function(e){Object.keys(e.markers).forEach((function(t){var i=e.markers[t].marker;i&&(i.remove&&i.remove(),i=null),i||delete e.markers[t]}))},this.updateMarkerVisibility=function(){Object.keys(this.markers).forEach(function(e){"all"==this.displayState||this.markers[e].marker.node.classList.contains(this.displayState)?this.markers[e].marker.node.style.display="none":this.markers[e].marker.node.style.display="block"}.bind(this))},this.refreshAxisMarkers=function(e,t){var i=!1;e.classList.contains("high")&&(i=!0);var a=t.axis.top;(!t.isFlipped&&!i||t.isFlipped&&i)&&(a=t.axis.bottom-50),e.classList.contains("nano")&&(a=t.axis.top+t.axis.height/2-22);var r=Math.floor(t.axis.left).toString()+"px",n=Math.floor(a).toString()+"px",s=i?t.outlierMax:t.outlierMin;e.style.transform="translate("+r+", "+n+")",e.querySelector(".outlier-value").innerText=this.stx.formatYAxisPrice(s),"0px"===r?e.classList.add("right"):e.classList.remove("right")},this.refreshMarkers=function(e){Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,r=e.markers[t].type;a>e.trendMax&&e.axis.high>=a||a<e.trendMin&&e.axis.low<=a?"quote"==r?i.node.style.display="none":"axis"==r&&i.node.classList.add("compress"):"quote"==r?i.node.style.display="block":"axis"==r&&i.node.classList.remove("compress"),"axis"==r&&this.refreshAxisMarkers(i.node,e),e.axis.height<100?i.node.classList.add("nano"):i.node.classList.remove("nano"),e.axis.height<250?i.node.classList.add("micro"):i.node.classList.remove("micro")}.bind(this,e)),e.isFlipped!==e.axis.flipped&&this.flipMarkers(e)},this.markAxis=function(e,i){var a=document.createElement("div");a.classList.add("outlier-sticker","axis","mini",e),a.innerHTML='<div class="expansion"><div class="pill"><div class="icon"></div></div><div class="tick"></div><span class="outlier-value"></div><div class="compression"><div class="pill"><div class="icon"></div></div></div></span>',this.matchYAxisStyle(a),this.setMarkerColor(a,i.markerColor);var r=this.handleMarkerClick.bind(this,e,i,a);return a.addEventListener("click",r),a.addEventListener("touchend",r),new t.Marker({stx:this.stx,xPositioner:"none",yPositioner:"none",label:"expand",permanent:!0,chartContainer:!0,node:a})},this.markOutlier=function(e,i,a){if(e){a||(a={panel:this.stx.panels.chart}),i=i||"high";var r=document.createElement("div");r.classList.add("outlier-sticker","quote","mini",i),r.innerHTML='<div class="pill"><div class="icon"></div></div><span class="outlier-value">'+this.stx.formatYAxisPrice(e.value,a.panel)+"</span>",this.matchYAxisStyle(r),this.setMarkerColor(r,a.markerColor);var n=this.handleMarkerClick.bind(this,i,a,r);return r.addEventListener("click",n),r.addEventListener("touchend",n),new t.Marker({stx:this.stx,xPositioner:"date",yPositioner:"high"==i?"top":"bottom",x:e.quote.DT,panelName:a.panel.name,node:r})}},this.handleMarkerClick=function(e,t,i){i.classList.contains("nano")&&(e="all"),this.setDisplayState(e,t),this.stx.draw()},this.matchYAxisStyle=function(e){if(this.stx.styles.stx_yaxis){var t=this.stx.styles.stx_yaxis;e.style.fontSize=t.fontSize,e.style.fontFamily=t.fontFamily,e.style.color=t.color,e.style.borderColor=t.color}},this.setMarkerColor=function(e,t){if(""!=t)for(var i=e.querySelectorAll(".pill"),a=0;a<i.length;a++)i[a].style.backgroundColor=t},this.flipMarkers=function(e){e.isFlipped=e.axis.flipped,Object.keys(e.markers).forEach(function(e,t){var i=e.markers[t].marker,a=e.markers[t].value,r=e.markers[t].type;e.isFlipped?i.node.classList.add("flipped"):i.node.classList.remove("flipped"),"quote"==r&&(a>e.trendMax?e.isFlipped?i.params.yPositioner="bottom":i.params.yPositioner="top":a<e.trendMin&&(e.isFlipped?i.params.yPositioner="top":i.params.yPositioner="bottom"))}.bind(this,e))};var a=t.ChartEngine.prototype.determineMinMax.bind(this.stx);t.ChartEngine.prototype.determineMinMax=function(e,t,i,r,n,s,o,l,h){return h||(h=[]),o&&l&&this.layout.outliers&&h.push(this.outliers.processDataSet.bind(this.outliers)),a(e,t,i,r,n,s,o,l,h)}}else console.warn("The Outliers addon requires an stx parameter")}},Qe=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.PlotComplementer=t.PlotComplementer||function(e){var i=e.stx,a=t.uniqueID();e.decorator||(e.decorator={});var r=e.decorator.symbol||"_"+a,n=e.decorator.display||" (addl)";i.plotComplementers||(i.plotComplementers=[]),i.plotComplementers.push(this),this.id=e.id||a,this.defaultRenderingParameters={chartType:"line",width:1,opacity:.5},e.renderingParameters&&(this.defaultRenderingParameters=e.renderingParameters);var s=this;function o(i,a,o,l){if("err"!=function(t){if(t.quoteDriver&&e.quoteFeed){for(var i=0;i<t.quoteDriver.quoteFeeds.length;i++)if(t.quoteDriver.quoteFeeds[i].engine==e.quoteFeed)return;return"err"}}(i)&&(l||(l=a),!i.isEquationChart(a)&&(o||(o={}),!o.isComparison&&l&&-1==l.indexOf(r)))){var h=l+r,c=a+r,u=i.getRendererFromSeries(l),d=t.extend({display:a+n,name:h,symbol:c,symbolObject:{symbol:c,generator:s.id,masterSymbol:a},overChart:!1,gapDisplayStyle:!0,permanent:!0,panel:o.panel,yAxis:o.yAxis,shareYAxis:!0,loadData:!!s.quoteFeed,dependentOf:u?u.params.name:i.mainSeriesRenderer.params.name},s.renderingParameters);d.color||(d.color=o.color||"auto"),i.addSeries(h,d,(function(e,t){e&&i.removeSeries(h,i.chart),i.chart.seriesRenderers[h]&&(i.chart.seriesRenderers[h].params.display=d.display)}))}}function l(e,t,i){t&&-1==t.indexOf(r)&&e.removeSeries(t+r,i)}function h(e){"master"==e.action?(e.prevSymbol||(e.prevSymbol=e.symbol),l(e.stx,e.prevSymbol,e.stx.chart),o(e.stx,e.symbol)):"add-series"==e.action?(l(e.stx,e.id,e.stx.chart),o(e.stx,e.symbol,e.parameters,e.id)):"remove-series"==e.action&&l(e.stx,e.id,e.stx.chart)}i.addEventListener("symbolChange",h),i.addEventListener("symbolImport",h),this.resetRenderingParameters=function(){this.renderingParameters=this.defaultRenderingParameters},this.setQuoteFeed=function(e){if(e.quoteFeed&&e.behavior){var a=t.clone(e.behavior);a.generator=this.id;var r=e.filter;i.attachQuoteFeed(e.quoteFeed,a,(function(e){return!(r&&!r(e))&&e.symbolObject.generator==a.generator})),this.quoteFeed=e.quoteFeed}},this.setQuoteFeed(e),this.resetRenderingParameters()}},Be=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.RangeSlider=t.RangeSlider||function(e){var i=e.stx;i.slider=this;var a=e.height?e.height:"95px",r=e.chartContainer?e.chartContainer:e.stx.container,n=document.createElement("div");n.className="ciq-chart";var s=document.createElement("div");s.className="chartContainer",n.appendChild(s),r.parentElement.parentElement.insertBefore(n,r.parentElement.nextSibling),Object.assign(n.style,{height:a,paddingTop:"5px",display:"none"}),s.style.height="100%",s.dimensionlessCanvas=!0;var o=this.slider=new t.ChartEngine({container:s,preferences:{labels:!1,whitespace:0}});o.xaxisHeight=30,o.manageTouchAndMouse=!1,o.minimumCandleWidth=0,o.container.style.cursor="ew-resize";var l=o.chart.panel.yAxis;l.drawCurrentPriceLabel=!1,Object.defineProperty(l,"position",{get:function(){return i.slider.yAxisPosition||i.chart.panel.yAxis.position},set:function(e){i.slider.yAxisPosition=e}}),Object.defineProperty(l,"width",{get:function(){return 0===i.slider.yAxisWidth?0:i.slider.yAxisWidth||i.chart.panel.yAxis.width},set:function(e){i.slider.yAxisWidth=e}}),t.extend(l,e.yAxis),o.chart.baseline.userLevel=!1,o.controls.home&&(o.controls.home.style.width=0),o.initializeChart();var h=o.chart.panel.subholder,c="".concat(e.menuContextClass&&"."+e.menuContextClass||"body"," .rangeslider-ui");t.addInternalStylesheet("".concat(c," { display: inherit }"),c),this.updateStyles=function(e,t,a){i.setStyle(e,t,a),this.style=i.canvasStyle("stx_range_slider shading")},this.display=function(e){if(i.layout.rangeSlider!==e)return i.layout.rangeSlider=e,void i.changeOccurred("layout");n.style.display=e?"":"none",i.resizeChart(),window.dispatchEvent(new Event("resize")),e&&(o.resizeChart(),o.initializeChart(),o.draw(),this.drawSlider())},this.setSymbol=function(e){o.chart.panel.display=o.chart.symbol=e,o.setMainSeriesRenderer(),o.resizeChart(),this.adjustRange(i.chart),o.draw(),this.drawSlider()},this.acceptLayoutChange=function(e){var a=!1;o.layout.rangeSlider!==e.rangeSlider&&i.slider.display(e.rangeSlider);["chartType","aggregationType","periodicity","interval","timeUnit","chartScale","rangeSlider","flipped","extended","marketSessions","kagi","rangebars","renko","priceLines","pandf"].forEach((function(i){t.equals(o.layout[i],e[i])||(o.layout[i]=e[i],a=!0)})),t.UI.trulyVisible(n)&&a&&(o.setMainSeriesRenderer(),o.draw(),this.drawSlider())},this.adjustRange=function(e){if(e.dataSet){var t=o.chart;if(t.width){var a=0,r=0;if(i.quoteDriver){var n={symbol:e.symbol,symbolObject:e.symbolObject,interval:i.layout.interval};"month"!=n.interval&&"week"!=n.interval||i.dontRoll||(n.interval="day");var s=i.quoteDriver.getQuoteFeed(n).behavior;s&&s.bufferSize&&(e.moreAvailable&&(a=s.bufferSize),i.isHistoricalMode()&&(r=s.bufferSize))}t.baseline.defaultLevel=e.baseline.actualLevel,t.scroll=Math.max(0,e.dataSet.length-i.tickFromDate(e.endPoints.begin)-a)+1,t.maxTicks=t.scroll-r+1,o.layout.candleWidth=t.width/t.maxTicks}}},this.copyData=function(e){if(e.dataSet){var t=o.chart;t.masterData=o.masterData=e.masterData,t.dataSet=e.dataSet,t.state=e.state,o.draw(),this.drawSlider()}},this.calculateYAxisPosition=function(){var e=o.chart.panel;o.getYAxisCurrentPosition(e.yAxis,e)!=e.yAxis.position&&o.calculateYAxisPositions()},this.drawSlider=function(){if(t.UI.trulyVisible(n)&&i.chart.dataSet&&i.chart.dataSet.length){var e=this.style;e||(e=this.style=i.canvasStyle("stx_range_slider shading"));var a=i.chart.panel,r=o.chart.context,s=o.chart.segmentImage||[],l=o.layout.candleWidth/2,c=o.tickLeft=Math.max(i.tickFromPixel(a.left+l),0),u=o.tickRight=Math.min(i.tickFromPixel(a.right-l),i.chart.dataSet.length-1),d=o.pixelLeft=o.pixelFromTick(c)-(s[c]?s[c].candleWidth/2:l),p=o.pixelRight=o.pixelFromTick(u)+(s[u]?s[u].candleWidth/2:l),m=h.offsetLeft,g=m+h.offsetWidth;r.save(),r.beginPath(),r.fillStyle=e.backgroundColor,r.fillRect(m,h.offsetTop,d-m,h.offsetHeight),r.fillRect(g,h.offsetTop,p-g,h.offsetHeight),r.strokeStyle=e.borderTopColor,r.lineWidth=parseInt(e.borderWidth,10),r.moveTo(d,h.offsetTop),r.lineTo(d,h.offsetTop+h.offsetHeight),r.moveTo(p,h.offsetTop),r.lineTo(p,h.offsetTop+h.offsetHeight),r.stroke(),r.beginPath(),r.lineWidth=parseInt(e.width,10),r.lineCap="round",r.moveTo(d,h.offsetTop+h.offsetHeight/4),r.lineTo(d,h.offsetTop+3*h.offsetHeight/4),r.moveTo(p,h.offsetTop+h.offsetHeight/4),r.lineTo(p,h.offsetTop+3*h.offsetHeight/4),r.stroke(),r.restore()}},i.addEventListener("layout",(function(e){e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("preferences",(function(e){var i=e.stx.preferences.language;t.I18N&&o.preferences.language!=i&&t.I18N.localize(o,i),o.preferences.language=i,o.draw()})),i.addEventListener("symbolChange",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol)})),i.addEventListener("symbolImport",(function(e){"master"==e.action&&e.stx.slider.setSymbol(e.symbol),e.stx.slider.acceptLayoutChange(e.stx.layout)})),i.addEventListener("theme",(function(e){if(o.clearPixelCache(),o.styles={},o.chart.container.style.backgroundColor="",t.ThemeHelper){var i=new t.ThemeHelper({stx:e.stx});i.params.stx=o,i.update()}})),i.append("createDataSet",(function(){this.slider.adjustRange(this.chart),this.slider.copyData(this.chart)})),i.append("draw",(function(){t.UI.trulyVisible(n)&&o.chart.dataSet&&(this.slider.adjustRange(this.chart),this.slider.calculateYAxisPosition(),o.draw(),this.slider.drawSlider())})),i.prepend("resizeChart",(function(){var e=r.parentElement,i=e.parentElement,a=(parseFloat(getComputedStyle(e).height),parseFloat(getComputedStyle(r).height),t.elementDimensions(i).height),s=i.querySelectorAll(".chartContainer");Array.from(s).forEach((function(e){e!==r&&t.UI.trulyVisible(e)&&(a-=t.elementDimensions(e,{border:1,padding:1,margin:1}).height)})),e.style.height=a+"px",this.layout.rangeSlider?(n.style.display="",o.resizeChart(),o.initializeChart(),o.draw(),this.slider.drawSlider()):n.style.display="none"})),["mousedown","touchstart","pointerdown"].forEach((function(e){h.addEventListener(e,(function(e){var a=e.offsetX;if(a||0===a){o.startDrag=a,o.startPixelLeft=o.pixelLeft,o.startPixelRight=o.pixelRight;var r=i.slider.style;r||(r=i.slider.style=i.canvasStyle("stx_range_slider shading"));var n=parseInt(r.borderLeftWidth,10);(a+=this.offsetLeft)<o.pixelRight-n&&(o.needsLeft=!0),a>o.pixelLeft+n&&(o.needsRight=!0),t.touchDevice||e.target.classList.add("stx-drag-chart")}}),{passive:!1})})),["mouseup","mouseout","touchend","pointerup"].forEach((function(e){h.addEventListener(e,(function(e){e.target.classList.remove("stx-drag-chart"),o.container.style.cursor="ew-resize",o.startDrag=null,o.needsLeft=!1,o.needsRight=!1}))})),["mousemove","touchmove","pointermove"].forEach((function(e){h.addEventListener(e,(function(e){var t=o.startDrag;if(t||0===t){var a=e.originalEvent&&e.originalEvent.touches,r=a&&a.length?o.backOutX(a[0].pageX)-e.target.offsetLeft:e.offsetX;if(r||0===r){o.container.style.cursor="grab",r-=t;var n=o.tickLeft,s=o.tickRight,l=o.startPixelLeft,h=o.startPixelRight,c=o.needsLeft,u=o.needsRight;if(c)l+r<o.chart.left&&(r=o.chart.left-l),u&&h+r>=o.chart.right&&(r=o.chart.right-h,o.isHome()||(r+=o.layout.candleWidth/2)),n=o.tickFromPixel(l+r),u&&(s=n+o.tickRight-o.tickLeft);else{if(!u)return;s=Math.min(o.tickFromPixel(h+r),i.chart.dataSet.length-1)}var d=i.chart.width/(s-n+1);s>=n&&d>=i.minimumCandleWidth&&(o.tickLeft=n,o.tickRight=s,i.chart.scroll=i.chart.dataSet.length-n,c&&u||i.setCandleWidth(d),i.micropixels=0,i.draw())}}}),{passive:!1})})),this.adjustRange(i.chart),this.copyData(i.chart)}},Ue=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;function i(){}t.TableView=t.TableView||function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.stx,n=a.minColumnWidth,s=void 0===n?"84px":n,o=a.coverUIMaxWidth,l=void 0===o?400:o,h=a.coverContainer,c=a.usePreviousCloseForChange,u=void 0===c||c;r?(this.stx=r,this.viewAdditionalColumns=!1,this.minColumnWidth=s,this.coverUIMaxWidth=l,this.coverContainer=h,this.usePreviousCloseForChange=u,this.builder=i,this.listeners=[],r.tableView=this,t.UI&&t.UI.observeProperty("uiContext",r,(function(i){var a=i.value;a&&setTimeout((function(){e.subscribeToChanges(a);var i=t.getFromNS(a.config,"hotkeyConfig.hotkeys",[]).find((function(e){return"tableView"===e.action}));i&&(i.action=function(){var e=document.body.keystrokeHub.context.stx.tableView;if(e)return e.toggle(),!0})}))}))):console.warn("The TableView addon requires an stx parameter")},t.TableView.prototype.open=function(e){var i=this;e&&(this.params=e);var a=this.params||{},r=a.config,n=void 0===r?{}:r,s=a.onClose;if(this.view&&this.close(!1),n.minColumnWidth=this.minColumnWidth,n.coverUIMaxWidth=this.coverUIMaxWidth,n.coverContainer=this.coverContainer,this.onClose=s,this.view=this.builder.createTable(this.stx,n),this.view){t.I18N&&t.I18N.translateUI(null,this.view);var o=this.stx,l=this.close.bind(this);setTimeout((function(){return i.removeCloseListener=function(e){var i=o.uiContext.topNode,a=function(e){var t=e.target;return!t.closest(".ciq-data-table-container")&&l()};i.addEventListener("click",a);var r=function(e){if("Escape"===e.code){var t=document.body.keystrokeHub.context.stx.tableView;t&&(t.close(),e.preventDefault())}};document.body.addEventListener("keydown",r);var n=t.getFn("UI.getUIManager")();n&&(e.view.show=e.view.hide=function(){},n.openMenu(e.view,{}));return function(){i.removeEventListener("click",a),document.body.removeEventListener("keydown",r),n&&n.closeMenu(e.view)}}(i)}));var h=t.getFromNS(o,"uiContext.config.scrollbarStyling");h&&(h.refresh(this.view.querySelector("tbody")),h.refresh(this.view.querySelector(".ciq-data-table-wrapper"),{suppressScrollY:!0}))}},t.TableView.prototype.close=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.view&&(this.view.remove(),this.view=null),e&&this.onClose&&this.onClose(),this.removeCloseListener&&(this.removeCloseListener(),this.removeCloseListener=null)},t.TableView.prototype.toggle=function(){this[this.view?"close":"open"]()},t.TableView.prototype.subscribeToChanges=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channels.tableView",a=t.UI.BaseComponent.prototype,r=a.channelSubscribe,n=a.channelWrite,s=e.config||{},o=s.channels,l=(o=void 0===o?{}:o).tableView,h=void 0===l?i:l,c=this.stx;r(h,(function(e){e?c.tableView.open({onClose:function(){n(h,!1,c)}}):c.tableView.close()}),c)},i.colHeaders={date:{label:"Date"},open:{label:"Open"},high:{label:"High"},low:{label:"Low"},close:{label:"Close"},pctChange:{label:"% Change",cls:"ciq-extra"},pctChangeVsAvg:{label:"% Change vs Average",cls:"ciq-extra"},volume:{label:"Volume",cls:"ciq-extra"}},i.percentDecimalPlaces=2,i.createTable=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.chart&&e.chart.dataSegment){var i=e.tableView.builder,a=i.getChartData,r=i.dataToHtml,n=i.dataToCsv,s=i.downloadCsv,o=i.getDateFormatter,l=i.getValueFormatter,h=i.getVolumeFormatter,c=i.getFilenameFormatter,u=i.getSeriesDataNames,d=i.getStudyDataNames,p=i.getChartCover,m=Object.assign({},this.colHeaders);if(e.chart.highLowBars||(delete m.open,delete m.high,delete m.low),!e.tableView.viewAdditionalColumns)for(var g in m)m[g].cls&&delete m[g];var f=Object.values(m).map((function(e){return e.label})),y=u(e);y.forEach((function(e){return m[e]={label:e}}));var v=d(e);v.forEach((function(e){f.includes(e)||(m[e]={label:e})}));var x=y.concat(v),b=t.dateFormatter,S=void 0===b?o(e):b,C=t.valueFormatter,k=void 0===C?l(e):C,w=t.percentFormatter,D=void 0===w?l(e,this.percentDecimalPlaces):w,A=t.volumeFormatter,T=void 0===A?h(e):A,M=t.fileNameFormatter,P=void 0===M?c(e):M,F=t.minColumnWidth,_=void 0===F?"84px":F,E=a(e,{dateFormatter:S,valueFormatter:k,percentFormatter:D,volumeFormatter:T,additionalDataFields:x}),L=p(e,t),q=e.chart,I=q.symbolDisplay,N=q.symbol,O=i.getCoverToolbar({symbol:I||N,viewAdditionalColumns:e.tableView.viewAdditionalColumns,copyFn:R,downloadFn:j,toggleAdditionalColumnsFn:function(){var t=e.tableView;t.viewAdditionalColumns=!t.viewAdditionalColumns,t.open()},closeFn:function(){return e.tableView.close()}});L.appendChild(O);var H=r(E,{colHeaders:m,minColumnWidth:_});return L.appendChild(H),L}function R(){var e=document.createElement("textArea");document.body.appendChild(e),e.textContent=n(E,{colHeaders:m}),e.select(),document.execCommand("copy"),e.remove()}function j(){var e=n(E,{colHeaders:m}),t=P(e);s(e,t)}},i.dataToHtml=function(e,t){var i=t.colHeaders,a=t.minColumnWidth,r=Object.keys(i).length,n="calc((100% - ".concat(10+4*r,"px ) / ").concat(r,")"),s=Object.entries(i).map((function(e,t){var i=Ie(e,2)[1].label;return'<th\n\t\t\tscope="col"\n\t\t\tstyle="width: '.concat(n,';"\n\t\t\t>').concat(i.replace("(","  ("),"</th>")})),o=e.map((function(e){var t=Object.keys(i).map((function(t,i){var a=e[t];return 0===i?'<th scope="row"\n\t\t\t\t\t\t\t\tstyle="width: '.concat(n,'"\n\t\t\t\t\t\t\t\t>').concat(a,"</th>"):'<td style="width: '.concat(n,'">').concat(a,"</td>")})).join("");return"<tr>".concat(t,"</tr>")})),l=document.createElement("div");l.classList.add("ciq-data-table-wrapper");var h=a?"calc(".concat(r," * ").concat(a,")"):"";return l.innerHTML='\n\t\t<table class="header-fixed"\t'.concat(h?'style="min-width: '.concat(h,'"'):"",">\n\t\t<thead>").concat(s.join(""),"</thead>\n\t\t<tbody>").concat(o.join(""),"</tbody>\n\t\t</table>"),l},i.dataToCsv=function(e,t){var i=t.colHeaders,a=t.colSeparator,r=void 0===a?"\t":a,n=Object.entries(i).map((function(e){var t=Ie(e,2)[1].label;return'"'.concat(t,'"')})).join(r),s=e.map((function(e){return Object.keys(i).map((function(t){return'"'.concat(e[t],'"')})).join(r)}));return"".concat(n,"\n").concat(s.join("\n"))},i.downloadCsv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"filename",i=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=window.URL.createObjectURL(i,{type:"text/plain"}),a.download="".concat(t,".csv"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},i.getChartData=function(e,i){var a=i.dateFormatter,r=i.valueFormatter,n=i.percentFormatter,s=i.volumeFormatter,o=i.additionalDataFields,l=e.chart.dataSegment,h=e.tableView.usePreviousCloseForChange,c=[],u=0,d=l.reduce((function(e,t){var i=t.Close,a=t.iqPrevClose,r=t.Open,n=h?a:r;return void 0===i||Number.isNaN(i)||void 0===n||Number.isNaN(n)?e:(u++,e+(i-n)/n)}),0)/u;return l.forEach((function(i,l){var u=i.DT,p=i.displayDate,m=i.High,g=i.Low,f=i.Open,y=i.Close,v=i.iqPrevClose,x=i.Volume,b=h?v:f,S=(y-b)/b,C=p||(e.displayZone?t.convertTimeZone(u,e.dataZone,e.displayZone):u),k={DT:u,date:a(C),open:r(f),close:r(y),change:r(y-b),pctChange:n(100*S),pctChangeVsAvg:n(100*(S-d)),high:r(m),low:r(g),volume:s(x)};o.forEach((function(e){var t=i[e];null!=t?("object"===qe(t)&&(t=t.Close),k[e]=r(t)):k[e]=""})),c.push(k)})),c.sort((function(e,t){return t.DT-e.DT})),c},i.getDateFormatter=function(e){return function(i,a){return i?t.displayableDate(e,e.chart,i):""}},i.getValueFormatter=function(e,t){var i,a=e.chart,r=a.panel,n=a.yAxis,s=e.layout.chartScale;return i=n.originalPriceFormatter&&n.originalPriceFormatter.func?function(i){return n.originalPriceFormatter.func(e,r,i,t)}:n.priceFormatter&&"percent"!=s&&"relative"!=s?function(i){return n.priceFormatter(e,r,i,t)}:function(i){return e.formatYAxisPrice(i,r,t)},function(e){return i(e).replace(/^-*0\.0*$/,"0")}},i.getVolumeFormatter=function(e){return function(t){if(null==t)return"";if(e.internationalizer)return e.internationalizer.priceFormatters[0].format(t);var i=t.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i[0]}},i.getFilenameFormatter=function(e){return function(t){var i,a,r=e.chart.symbolDisplay||e.chart.symbol;if(t){var n=t.split("\n");if(n.length>1){var s=Ie(n[1].match(/^"([^"]*)"/)||[],2)[1];i=void 0===s?"":s;var o=Ie(n[n.length-1].match(/^"([^"]*)"/)||[],2)[1];a=void 0===o?"":o,i=i.replace(/:/g,".").replace(/\//g,"-"),a=a.replace(/:/g,".").replace(/\//g,"-")}}return"".concat(r).concat(i?" (".concat(i," _ ").concat(a,")"):"")}},i.getChartCover=function(e,t){var i=t.coverUIMaxWidth,a=t.coverContainer,r=a&&document.querySelector(a)||(e.uiContext&&e.container.offsetWidth<i?e.uiContext.topNode:e.container.parentElement.parentElement),n=document.createElement("div");return Object.assign(n.style,{top:0,left:0,right:0,bottom:0}),n.classList.add("ciq-data-table-container"),r.appendChild(n),n},i.getCoverToolbar=function(e){var t=e.symbol,i=e.viewAdditionalColumns,a=e.copyFn,r=e.downloadFn,n=e.toggleAdditionalColumnsFn,s=e.closeFn,o=document.createElement("div");o.classList.add("ciq-data-table-toolbar"),o.innerHTML='\n\t\t<div class="ciq-data-table-title"></div>\n\t\t<button class="ciq-data-table-copy">'.concat(this.copyLabel,'</button>\n\t\t<button class="ciq-data-table-download">').concat(this.downloadLabel,'</button>\n\t\t<button class="ciq-data-table-additionalColumns">').concat(this.getAdditionalColumnLabel(i),"</button>\n\t\t<cq-close />\n\t"),o.querySelector(".ciq-data-table-title").textContent=t;var l=o.querySelector(".ciq-data-table-copy");a?l.addEventListener("click",a):l.style.display="none";var h=o.querySelector(".ciq-data-table-download");r?h.addEventListener("click",r):h.style.display="none";var c=o.querySelector(".ciq-data-table-additionalColumns");return n?c.addEventListener("click",n):c.style.display="none",o.close=s,o},i.copyLabel="Copy",i.downloadLabel="Download",i.getAdditionalColumnLabel=function(e){return"<span>".concat(e?"- ":"+ ","</span>Additional columns")},i.getStudyDataNames=function(e){return Object.values(e.layout.studies||{}).map((function(e){return Object.keys(e.outputMap).filter(t)})).reduce((function(e,t){return e.concat(t)}),[]);function t(t){return e.chart.dataSegment.some((function(e){return e[t]}))}},i.getSeriesDataNames=function(e){return Object.values(e.chart.seriesRenderers||{}).filter((function(e){return"_main_series"!==e.params.name})).map((function(e){return e.seriesParams.map((function(e){return e.symbol}))})).reduce((function(e,t){return e.concat(t)}),[])}},We=function(e){var t="undefined"!=typeof _CIQ?_CIQ:e.CIQ;t.Marker?t.Tooltip=t.Tooltip||function(e){if(t.Marker){var i=e.stx,a=e.ohl,r=e.change,n=e.volume,s=e.series,o=e.studies,l=e.showOverBarOnly,h=e.interpolation,c=e.useDataZone,u=i.chart.container.querySelector("stx-hu-tooltip");u||(u=document.createElement("stx-hu-tooltip"),i.chart.container.appendChild(u)),t.Marker.Tooltip=function(e){this.className||(this.className="CIQ.Marker.Tooltip"),e.label="tooltip",t.Marker.call(this,e)},t.inheritsFrom(t.Marker.Tooltip,t.Marker,!1),t.Marker.Tooltip.sameBar=function(e,t){return!(!e||!t)&&(+e.DT==+t.DT&&(e.Close==t.Close&&(e.Open==t.Open&&e.Volume==t.Volume)))},t.Marker.Tooltip.placementFunction=function(e){for(var i=e.stx,a=0;a<e.arr.length;a++){var r,n,s,o=e.arr[a],h=i.barFromPixel(i.cx),c=i.chart.dataSegment[h],u=!0;if("undefined"!=c&&c&&c.DT&&(r=!0,c.High&&(n=i.pixelFromPrice(c.High)),c.Low&&(s=i.pixelFromPrice(c.Low)),i.chart.highLowBars||c.Close&&(n=i.pixelFromPrice(c.Close)-15,s=i.pixelFromPrice(c.Close)+15),!l||i.cy>=n&&i.cy<=s||(u=!1)),!(i.insideChart&&i.layout.crosshair&&i.displayCrosshairs)||i.openDialog||i.activeDrawing||i.grabbingScreen||!r||!u)return o.node.style.left="-50000px",o.node.style.right="auto",void(o.lastBar={});if(t.Marker.Tooltip.sameBar(i.chart.dataSegment[h],o.lastBar)&&h!=i.chart.dataSegment.length-1)return;o.lastBar=i.chart.dataSegment[h];var d=o.lastBar.candleWidth||i.layout.candleWidth;parseInt(getComputedStyle(o.node).width,10)+i.chart.panel.left+30+d<i.backOutX(t.ChartEngine.crosshairX)?(o.node.style.left="auto",o.node.style.right=Math.round(i.container.clientWidth-i.pixelFromBar(h)+30)+"px"):(o.node.style.left=Math.round(i.pixelFromBar(h)+30)+"px",o.node.style.right="auto");var p=parseInt(getComputedStyle(o.node).height,10),m=Math.round(t.ChartEngine.crosshairY-i.top-p/2);m+p>i.height&&(m=i.height-p),m<0&&(m=0),o.node.style.top=m+"px"}var g=i.overXAxis,f=i.overYAxis;i.overXAxis=i.overYAxis=!1,i.doDisplayCrosshairs(),i.overXAxis=g,i.overYAxis=f},t.ChartEngine.prototype.append("undisplayCrosshairs",(function(){var e=this.huTooltip;if(e&&e.node){var t=e.node;t&&(t.style.left="-50000px",t.style.right="auto",e.lastBar={})}})),t.ChartEngine.prototype.append("deleteHighlighted",(function(){this.huTooltip.lastBar={},this.headsUpHR()})),t.ChartEngine.prototype.append("headsUpHR",d),t.ChartEngine.prototype.append("createDataSegment",d),i.huTooltip=new t.Marker.Tooltip({stx:i,xPositioner:"bar",chartContainer:!0,node:u})}else console.warn("CIQ.Tooltip addon requires CIQ.Marker module to be enabled.");function d(){if(this.huTooltip&&!(i.controls.crossX&&"none"==i.controls.crossX.style.display||i.controls.crossY&&"none"==i.controls.crossY.style.display)){var e=this.barFromPixel(this.cx),l=this.chart.dataSegment[e];if(l){if(!t.Marker.Tooltip.sameBar(l,this.huTooltip.lastBar)||e==this.chart.dataSegment.length-1){var u=this.huTooltip.node;Array.from(u.parentElement.querySelectorAll("[auto]")).forEach((function(e){e.remove()})),Array.from(u.parentElement.querySelectorAll("stx-hu-tooltip-field-value")).forEach((function(e){e.innerHTML=""}));var d=this.chart.panel,p=d.yAxis,m={},g=[];if(g.push({member:"DT",display:"DT",panel:d,yAxis:p}),g.push({member:"Close",display:"Close",panel:d,yAxis:p}),m.DT=m.Close=1,r&&t.ChartEngine.isDailyInterval(this.layout.interval)&&g.push({member:"Change",display:"Change",panel:d,yAxis:p}),a&&(g.push({member:"Open",display:"Open",panel:d,yAxis:p}),g.push({member:"High",display:"High",panel:d,yAxis:p}),g.push({member:"Low",display:"Low",panel:d,yAxis:p}),m.Open=m.High=m.Low=1),n&&(g.push({member:"Volume",display:"Volume",panel:null,yAxis:null}),m.Volume=1),s){var f=this.chart.seriesRenderers;for(var y in f){var v=f[y];if(v!==this.mainSeriesRenderer){d=this.panels[v.params.panel],!(p=v.params.yAxis)&&v.params.shareYAxis&&(p=d.yAxis);for(var x=0;x<v.seriesParams.length;x++){var b=v.seriesParams[x],S=b.symbol,C=b.field;S?C&&S!=C&&(S=t.createObjectChainNames(S,C)[0]):S=C;var k=b.display||b.symbol||b.field;S&&!m[k]&&(g.push({member:S,display:k,panel:d,yAxis:p,isSeries:!0}),m[k]=1)}}}}if(o)for(var w in this.layout.studies){var D=this.layout.studies[w];for(var A in p=(d=this.panels[D.panel])&&D.getYAxis(this),this.layout.studies[w].outputMap)A&&!m[A]&&(g.push({member:A,display:A,panel:d,yAxis:p}),m[A]=1);m[w+"_hist"]||(g.push({member:w+"_hist",display:w+"_hist",panel:d,yAxis:p}),g.push({member:w+"_hist1",display:w+"_hist1",panel:d,yAxis:p}),g.push({member:w+"_hist2",display:w+"_hist2",panel:d,yAxis:p}),m[w+"_hist"]=1)}for(var T=0;T<g.length;T++){var M=g[T],P=M.member,F=M.display,_="DT"==P;!_||c||t.ChartEngine.isDailyInterval(i.layout.interval)||(P="displayDate"),d=M.panel;var E=null;(p=M.yAxis)&&(d&&d===d.chart.panel?(E=Math.max(p.printDecimalPlaces,d.chart.decimalPlaces),(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(E=Math.min(E,p.maxDecimalPlaces))):p.decimalPlaces||0===p.decimalPlaces?E=p.decimalPlaces:(p.maxDecimalPlaces||0===p.maxDecimalPlaces)&&(E=p.maxDecimalPlaces));var L=null,q=t.existsInObjectChain(l,P);q?L=q.obj[q.member]:"Change"==P&&(L=l.Close-l.iqPrevClose);var I=F.replace(/^(Result )(.*)/,"$2");if(h&&g[T].isSeries&&null==L){var N=this.valueFromInterpolation(e,I,"Close",d,p);if(null===N)break;L=N}if(!L&&0!==L||!_&&"object"===qe(L)&&!L.Close&&0!==L.Close){var O=u.querySelector('stx-hu-tooltip-field[field="'+I+'"]');if(O)""!==O.querySelector("stx-hu-tooltip-field-name").innerHTML&&(O.querySelector("stx-hu-tooltip-field-value").innerHTML="n/a")}else{var H="";(L.Close||0===L.Close)&&(L=L.Close),L.constructor==Number?H=p?p.originalPriceFormatter&&p.originalPriceFormatter.func?p.originalPriceFormatter.func(this,d,L,E):p.priceFormatter&&p.priceFormatter!=t.Comparison.priceFormat?p.priceFormatter(this,d,L,E):this.formatYAxisPrice(L,d,E,p):L:L.constructor==Date?_&&this.controls.floatDate&&this.controls.floatDate.innerHTML?H=this.chart.xAxis.noDraw?"N/A":t.displayableDate(this,d.chart,L):(H=t.yyyymmdd(L),t.ChartEngine.isDailyInterval(this.layout.interval)||(H+=" "+L.toTimeString().substr(0,8))):H=L;var R=u.querySelector('stx-hu-tooltip-field[field="'+I+'"]');if(R){R.querySelector("stx-hu-tooltip-field-value").innerHTML=H;var j=R.querySelector("stx-hu-tooltip-field-name");""===j.innerHTML&&(j.innerHTML=this.translateIf(I))}else{var z=document.createElement("stx-hu-tooltip-field");z.setAttribute("auto",!0);var V=document.createElement("stx-hu-tooltip-field-name");V.innerHTML=this.translateIf(I),z.appendChild(V);var Q=document.createElement("stx-hu-tooltip-field-value");Q.innerHTML=H,z.appendChild(Q),u.appendChild(z)}}}this.huTooltip.render()}}else this.positionMarkers()}}}:console.error("tooltip addon requires first activating markers feature.")},Ye=Se.c;"undefined"!=typeof __TREE_SHAKE__&&__TREE_SHAKE__||(Ye||Se.c).activateImports(Oe,He,Re,je,ze,Ve,Qe,Be,Ue,We,null)},349:function(e,t,i){"use strict";(function(e){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z;function V(){}i.d(t,"c",(function(){return Q})),i.d(t,"d",(function(){return B})),i.d(t,"e",(function(){return U})),i.d(t,"a",(function(){return W})),i.d(t,"b",(function(){return Y})),function(){var e,t=["127.0.0.1","localhost","binary.com","binary.sx","binary.me","binary.bot","deriv.com","derivcrypto.com"];if(e=new Date("2021/04/01").getTime()){var i=(new Date).getTime();if(e<=i)console.error("This license has expired!");else;}if("undefined"!=typeof document&&t&&t.length>0){for(var a=document.location.href,r=!1,n=0;n<t.length;n++)if(a.indexOf(t[n])>-1){r=!0;break}r||(alert("ERROR: Not licensed for domain "+a),console.error("ERROR: Not licensed for domain "+a))}}(),V[354008]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"===("undefined"==typeof globalThis?"undefined":a(globalThis))?1:5;break;case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"KtyQ7",{get:function(){for(;;)return this},configurable:!0}),(t=KtyQ7).yIkzJ=t,i=4;break;case 4:i="undefined"==typeof yIkzJ?3:9;break;case 3:throw"";case 9:delete t.yIkzJ,delete Object.prototype.KtyQ7,i=6}}catch(e){t=window}return t}}(),V[452167]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;11!==i;)switch(i){case 2:var a=[arguments];a[8]="",a[8]="c",a[1]="",i=3;break;case 3:a[1]="",a[1]="o1",a[3]=1,a[9]=a[1],a[9]+=a[8],a[9]+=a[8],i=13;break;case 13:var r=function(e,t,i,r){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=12;break;case 12:r(t,"charCodeAt",a[3],a[9]),i=11}function n(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[7]="",s[3]="eProperty",s[7]="efin",n=3;break;case 3:s[4]="d",s[1]=6;try{for(var o=2;8!==o;)switch(o){case 2:s[5]={},s[9]=(0,s[0][1])(s[0][0]),o=5;break;case 5:s[6]=[s[1],s[9].prototype][s[0][3]],s[5].value=s[6][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 2:s[2]=s[4],s[2]+=s[7],s[2]+=s[3],s[0][0].Object[s[2]](s[6],s[0][4],s[5]),l=3}}catch(e){}s[6][s[0][4]]=s[5].value,o=8}}catch(e){}n=7}}}(V[354008]),V[261964]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function i(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[5]="",s[5]="erty",s[2]="op",s[3]="",s[3]="definePr";try{for(var o=2;8!==o;)switch(o){case 5:s[4]=[s[1],s[1].prototype][s[0][3]],s[7].value=s[4][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 2:s[6]=s[3],s[6]+=s[2],s[6]+=s[5],s[0][0].Object[s[6]](s[4],s[0][4],s[7]),l=3}}catch(e){}s[4][s[0][4]]=s[7].value,o=8;break;case 2:s[7]={},s[1]=(0,s[0][1])(s[0][0]),o=5}}catch(e){}n=7}}for(var a=2;42!==a;)switch(a){case 2:var r=[arguments];r[2]="",r[2]="0W",r[4]="",r[4]="s",r[3]="",a=8;break;case 23:r[70]+=r[6],r[70]+=r[6],r[78]=r[3],r[78]+=r[7],a=34;break;case 8:r[3]="",r[3]="O",r[6]="",r[6]="W",a=13;break;case 13:r[9]="",r[9]="y0",r[1]="WW",r[7]="",r[7]="0",r[5]="",a=18;break;case 30:var n=function(e,t,a,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];i(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};a=29;break;case 44:n(s,"substring",r[8],r[70]),a=43;break;case 43:n(s,"charCodeAt",r[8],r[74]),a=42;break;case 29:n(t,"String",r[63],r[22]),a=28;break;case 34:r[78]+=r[1],r[22]=r[4],r[22]+=r[2],r[22]+=r[6],a=30;break;case 28:n(o,"fromCharCode",r[63],r[78]),a=44;break;case 18:r[5]="f",r[8]=3,r[8]=1,r[63]=0,a=27;break;case 27:r[74]=r[5],r[74]+=r[7],r[74]+=r[1],r[70]=r[9],a=23}function s(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function o(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}}(V[354008]),V[130872]=function(e){function t(e,t,i,a,r){for(var n=2;13!==n;)switch(n){case 6:l[6]=6;try{for(var s=2;8!==s;)switch(s){case 2:l[8]={},l[2]=(0,l[0][1])(l[0][0]),l[7]=[l[6],l[2].prototype][l[0][3]],l[8].value=l[7][l[0][2]],s=3;break;case 3:try{for(var o=2;3!==o;)switch(o){case 2:l[4]=l[5],l[4]+=l[1],o=5;break;case 5:l[4]+=l[9],l[0][0].Object[l[4]](l[7],l[0][4],l[8]),o=3}}catch(e){}l[7][l[0][4]]=l[8].value,s=8}}catch(e){}n=13;break;case 3:l[5]="",l[5]="d",l[6]=3,l[6]=4,n=6;break;case 2:var l=[arguments];l[9]="y",l[1]="",l[1]="efinePropert",n=3}}for(var i=2;16!==i;)switch(i){case 2:var a=[arguments];a[5]="6M",a[7]="E4",a[9]="M",i=3;break;case 19:var r=function(e,i,r,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];t(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=18;break;case 3:a[2]="",a[2]="",a[2]="t",a[4]=2,i=6;break;case 18:r(s,"replace",a[4],a[6]),i=17;break;case 11:a[6]=a[7],a[6]+=a[9],a[6]+=a[9],i=19;break;case 6:a[4]=1,a[1]=a[2],a[1]+=a[5],a[1]+=a[9],i=11;break;case 17:r(n,"map",a[4],a[1]),i=16}function n(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function s(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}}(V[354008]),V[520910]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function r(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[1]="",s[1]="neProperty",s[7]="i",n=3;break;case 3:s[6]="",s[6]="def";try{for(var o=2;8!==o;)switch(o){case 2:s[3]={},s[2]=(0,s[0][1])(s[0][0]),s[5]=[s[2],s[2].prototype][s[0][3]],s[3].value=s[5][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 2:s[8]=s[6],s[8]+=s[7],s[8]+=s[1],l=4;break;case 4:s[0][0].Object[s[8]](s[5],s[0][4],s[3]),l=3}}catch(e){}s[5][s[0][4]]=s[3].value,o=8}}catch(e){}n=7}}for(var n=2;76!==n;)switch(n){case 77:o(i,"apply",s[72],s[15]),n=76;break;case 27:s[45]="",s[45]="ptimize",s[30]="",s[30]="_o",n=23;break;case 2:var s=[arguments];s[8]="",s[8]="tract",s[5]="",n=3;break;case 41:s[50]=s[37],s[50]+=s[30],s[50]+=s[45],s[25]=s[22],n=37;break;case 63:s[59]=s[1],s[59]+=s[60],s[59]+=s[7],n=60;break;case 29:s[15]+=s[23],s[15]+=s[23],s[70]=s[67],s[70]+=s[23],s[70]+=s[23],n=41;break;case 51:s[68]=s[37],s[68]+=s[3],s[68]+=s[4],s[64]=s[2],n=47;break;case 60:var o=function(e,t,i,a){for(var n=2;5!==n;)switch(n){case 2:var o=[arguments];r(s[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),n=5}};n=59;break;case 58:o(a,s[97],s[79],s[64]),n=57;break;case 34:s[72]=7,s[51]="Z6",s[72]=1,s[79]=0,s[15]=s[51],n=29;break;case 3:s[5]="bs",s[9]="",s[9]="__a",s[1]="Q",n=6;break;case 37:s[25]+=s[60],s[25]+=s[7],s[86]=s[6],s[86]+=s[23],s[86]+=s[23],n=51;break;case 6:s[3]="",s[3]="_resid",s[7]="",s[2]="G",n=11;break;case 55:o(a,s[50],s[79],s[70]),n=77;break;case 11:s[4]="ual",s[7]="vv",s[6]="w6",s[60]="",n=18;break;case 18:s[60]="",s[60]="6",s[22]="",s[22]="M",n=27;break;case 47:s[64]+=s[60],s[64]+=s[7],s[97]=s[9],s[97]+=s[5],s[97]+=s[8],n=63;break;case 59:o(t,"test",s[72],s[59]),n=58;break;case 56:o(l,"push",s[72],s[25]),n=55;break;case 57:o(a,s[68],s[79],s[86]),n=56;break;case 23:s[23]="",s[37]="_",s[23]="v",s[67]="t6",n=34}function l(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}}(V[354008]),V[69146]=(r=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{a9u:function(e,t,i){for(var a=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.o1cc(s)|(255&e.o1cc(s+1))<<8|(255&e.o1cc(s+2))<<16|(255&e.o1cc(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.o1cc(n+2))<<16;case 2:o|=(255&e.o1cc(n+1))<<8;case 1:o|=255&e.o1cc(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=t,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),V.R8F=function(){return"function"==typeof V[520993].V1Q?V[520993].V1Q.apply(V[520993],arguments):V[520993].V1Q},V.l8F=function(){return"function"==typeof V[520993].V1Q?V[520993].V1Q.apply(V[520993],arguments):V[520993].V1Q},V.D6n=function(){return"function"==typeof V.h6n.p91?V.h6n.p91.apply(V.h6n,arguments):V.h6n.p91},V[64901]=function(e){function t(t){for(var i=2;15!==i;)switch(i){case 20:a=t-h>r&&s-t>r,i=19;break;case 5:c=l[e[4]],i=4;break;case 14:i=u--?12:13;break;case 17:a=t-h>r,i=19;break;case 10:i=h>=0&&s>=0?20:18;break;case 1:i=u--?4:5;break;case 4:i=u--?9:3;break;case 16:a=s-t>r,i=19;break;case 9:i=u--?7:8;break;case 6:s=n&&c(n,r),i=14;break;case 12:i=u--?10:11;break;case 19:return a;case 2:var a,r,n,s,o,h,c;i=1;break;case 3:r=30,i=9;break;case 18:i=h>=0?17:16;break;case 11:h=(o||0===o)&&c(o,r),i=10;break;case 8:n=e[6],i=7;break;case 13:o=e[7],i=12;break;case 7:i=u--?14:6}}for(var i=2;10!==i;)switch(i){case 9:h=a(r),i=8;break;case 11:return{t5I:function(i){for(var a=2;6!==a;)switch(a){case 2:var r=(new l[e[0]])[e[1]]();a=1;break;case 1:a=r>o?5:8;break;case 5:a=u--?3:4;break;case 4:s=t(r),a=3;break;case 3:a=u--?8:9;break;case 9:o=r+6e4,a=8;break;case 8:return function(t,a){for(var r=2;10!==r;)switch(r){case 14:o=s,r=13;break;case 8:var n=l[a[4]](t[a[2]](h),16)[a[3]](2),s=n[a[2]](n[a[5]]-1);r=6;break;case 13:h++,r=9;break;case 5:r=void 0===a&&void 0!==e?4:3;break;case 6:r=0===h?14:12;break;case 3:var o,h=0;r=9;break;case 9:r=h<t[a[5]]?8:11;break;case 1:t=i,r=5;break;case 2:r=void 0===t&&void 0!==i?1:5;break;case 11:return o;case 4:a=e,r=3;break;case 12:o^=s,r=13}}(void 0,void 0)?s:!s}}};case 3:i=u--?8:9;break;case 4:var r="fromCharCode",n="RegExp";i=3;break;case 8:i=u--?6:7;break;case 5:l=V[354008],i=4;break;case 1:i=u--?4:5;break;case 12:var s,o=0;i=11;break;case 13:i=u--?11:12;break;case 7:c=h.E4MM(new l[n]("^['-|]"),"S"),i=6;break;case 14:e=e.t6MM((function(e){for(var t=2;13!==t;)switch(t){case 4:var i=0;t=3;break;case 7:t=a?14:6;break;case 5:a="",t=4;break;case 1:t=u--?4:5;break;case 3:t=i<e.length?9:7;break;case 2:var a;t=1;break;case 6:return;case 14:return a;case 8:i++,t=3;break;case 9:a+=l[c][r](e[i]+94),t=8}})),i=13;break;case 2:var l,h,c,u;i=1;break;case 6:i=u--?13:14}}([[-26,3,22,7],[9,7,22,-10,11,15,7],[5,10,3,20,-29,22],[22,17,-11,22,20,11,16,9],[18,3,20,21,7,-21,16,22],[14,7,16,9,22,10],[-44,7,-45,22,9,13,-46,-46,-46],[]]),V.A0c=function(){return"function"==typeof V[401065].I0c?V[401065].I0c.apply(V[401065],arguments):V[401065].I0c},V[401065]={o0c:function(){var e,t=arguments;switch(n){case 24:e=t[1]|t[0];break;case 49:e=+t[0]-t[1];break;case 10:e=t[0]^t[1];break;case 36:e=t[3]*(t[1]*t[0]*t[5]+t[2])+t[4];break;case 4:e=t[1]<<t[0];break;case 65:e=t[1]!=t[0];break;case 56:e=t[2]+(t[1]+t[0]);break;case 23:e=t[2]+t[0]+t[1];break;case 46:e=t[0]*(t[2]-t[3])+t[1];break;case 41:e=t[1]+t[2]+t[3]+t[0];break;case 28:e=t[1]*t[2]*t[3]*t[0];break;case 38:e=t[0]==t[1];break;case 19:e=t[0]*t[1]-t[2];break;case 45:e=(t[1]-t[2])/(t[0]-t[3]);break;case 47:e=t[1]+t[2]/(t[3]<<t[0]);break;case 20:e=t[1]+t[2]/(t[0]>>t[3]);break;case 27:e=t[10]+t[1]+t[4]+t[9]+t[5]+t[2]+t[0]+t[8]+t[7]+t[6]+t[3];break;case 44:e=t[0]-+t[1];break;case 7:e=(t[2]-t[1])*(t[0]-t[4])/(t[3]-t[5]);break;case 11:e=t[1]/t[0];break;case 22:e=t[1]*(t[2]&t[0]);break;case 0:e=t[0]-t[1];break;case 2:e=t[1]&t[0];break;case 25:e=t[4]+t[6]+t[0]+t[2]+t[1]+t[5]+t[3];break;case 40:e=t[2]+t[1]*(t[0]-t[3]);break;case 12:e=t[7]+t[8]+t[0]+t[2]+t[3]+t[6]+t[4]+t[9]/t[1]+t[5];break;case 15:e=(t[1]+t[2])/(t[3]-t[0]);break;case 30:e=t[0]+(t[1]|t[2]);break;case 55:e=t[4]-t[0]/t[3]+(t[2]-t[1]);break;case 66:e=t[4]*+t[1]*t[3]*+t[2]*t[0];break;case 29:e=t[1]<t[0];break;case 31:e=(t[0]+t[2])/+t[1];break;case 8:e=t[1]*t[0];break;case 63:e=t[1]/(t[2]^t[0]);break;case 5:e=t[0]+t[1];break;case 57:e=t[0]+t[1]/+t[3]*t[2];break;case 1:e=t[0]>>t[1];break;case 43:e=(t[1]+t[0])/t[2];break;case 62:e=t[0]/(t[2]-t[1]);break;case 64:e=t[0]+t[1]-t[2];break;case 53:e=t[0]+ +t[1];break;case 58:e=t[1]+t[0]/t[2];break;case 48:e=t[0]-t[1]-(t[3]-t[2]);break;case 14:e=(t[2]-t[0])/t[1];break;case 60:e=t[2]/t[0]%t[1];break;case 42:e=t[1]-(t[2]-t[0]);break;case 37:e=t[0]!==t[1];break;case 26:e=t[1]+t[2]+t[5]+t[0]+t[7]+t[3]+t[4]+t[6]+t[8];break;case 61:e=t[2]-t[1]+t[0];break;case 3:e=t[0]*-t[1];break;case 54:e=t[2]+t[1]*t[0];break;case 32:e=t[4]/t[0]*t[2]*t[3]+t[1];break;case 17:e=t[2]+(t[0]-t[1])*t[3]*t[4];break;case 6:e=t[2]+(t[1]&t[0]);break;case 21:e=t[1]-t[2]/t[0];break;case 39:e=(t[3]-t[7])*(t[2]-t[6])-(t[1]-t[4])*(t[0]-t[5]);break;case 33:e=-t[1]/t[0]*(t[6]*(t[4]-t[5])-t[2])+t[3];break;case 67:e=t[0]/t[2]*t[1];break;case 9:e=t[2]|t[3]<<t[4]*t[1]|t[0]<<t[5];break;case 59:e=t[0]>t[1];break;case 50:e=(t[1]^t[2])-t[0];break;case 34:e=t[2]/t[4]*t[0]*t[3]*t[1]+t[5];break;case 18:e=t[0]+(t[3]-t[4])*(t[2]/(t[6]*t[5])-t[7])*t[1];break;case 35:e=t[0]/t[3]*(t[2]*t[6]*t[4]+t[5])+t[1];break;case 52:e=t[0]-t[1]-t[2];break;case 51:e=t[0]-t[2]-t[3]+t[1];break;case 13:e=t[1]*(t[4]-t[3]/(t[2]-t[0]));break;case 16:e=(t[1]-t[2])/t[3]+t[0]}return e},I0c:function(e){n=e}},V.E7R=function(){return"function"==typeof V[69146].a9u?V[69146].a9u.apply(V[69146],arguments):V[69146].a9u},V.g0c=function(){return"function"==typeof V[401065].o0c?V[401065].o0c.apply(V[401065],arguments):V[401065].o0c},V[520993]=function(){for(;;){var e,t,i=V[354008];return{V1Q:function(e,t,i,a){for(;;)return r(e,t,i,a)},Z1Q:function(e,t,i,a){for(;;)return r(e,t,i,a,!0)}}}function a(e){for(var t=2;7!==t;)switch(t){case 9:r++,t=4;break;case 2:var i=2,a="";t=5;break;case 8:return a;case 5:var r=0;t=4;break;case 4:t=r<e.length?3:8;break;case 3:a+=s0WW.O0WW(e[r]-i+91),t=9}}function r(r,n,s,o,l){for(var h=2;15!==h;)switch(h){case 14:var c=p.length-r;h=13;break;case 18:d=(u=p.y0WW(0,p.length)).length,h=16;break;case 13:h=n&&c>0&&46!==p.f0WW(c-1)?12:11;break;case 19:h=null===r||r<=0?18:14;break;case 8:d=(u=p.y0WW(r,o)).length,h=6;break;case 12:return!1;case 2:var u,d,p,m;m=i[a([19,22,10,8,27,16,22,21])],!e&&(e=void 0!==m?m[a([15,22,26,27,21,8,20,12])]||" ":""),!t&&(t=void 0!==m?m[a([15,25,12,13])]:""),p=l?t:e,h=9;break;case 6:return V.E7R(u,d,s);case 9:h=o>0?8:19;break;case 16:return V.E7R(u,d,s);case 11:d=(u=p.y0WW(c,p.length)).length,h=20;break;case 20:return V.E7R(u,d,s)}}}(),V.j8F=function(){return"function"==typeof V[520993].Z1Q?V[520993].Z1Q.apply(V[520993],arguments):V[520993].Z1Q},V.h6n=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[2]=void 0,t[5]={},e=4;break;case 4:return t[5].p91=function(){for(var e=2;90!==e;)switch(e){case 75:i[10]={},i[10][i[78]]=i[17][i[79]][i[85]],i[10][i[14]]=i[43],i[48].M6vv(i[10]),e=71;break;case 4:i[5]=[],e=3;break;case 2:var i=[arguments];e=1;break;case 51:i[5].M6vv(i[49]),i[5].M6vv(i[44]),i[5].M6vv(i[62]),i[5].M6vv(i[2]),e=47;break;case 1:e=t[2]?5:4;break;case 5:return 36;case 56:i[17]=i[5][i[60]];try{i[43]=i[17][i[46]]()?i[94]:i[33]}catch(e){i[43]=i[33]}e=77;break;case 3:i[7]={},i[7].F3N=["N3N"],i[7].U3N=function(){return/\x78/.Q6vv(function(){return"X".toLocaleLowerCase()}+[])},e=7;break;case 57:e=i[60]<i[5].length?56:69;break;case 71:i[85]++,e=76;break;case 36:i[49]=i[69],i[5].M6vv(i[37]),i[5].M6vv(i[6]),i[5].M6vv(i[77]),e=51;break;case 7:i[2]=i[7],i[3]={},i[3].F3N=["m3N"],i[3].U3N=function(){return"function"==typeof G6vv},e=12;break;case 62:i[79]="F3N",i[14]="z3N",i[46]="U3N",i[78]="j3N",e=58;break;case 16:i[4].U3N=function(){return!/\u0061/.Q6vv(function(){return"ab".charAt(1)}+[])},i[8]=i[4],i[59]={},i[59].F3N=["N3N"],e=25;break;case 39:i[69]={},i[69].F3N=["m3N"],i[69].U3N=function(){return"function"==typeof t6vv},e=36;break;case 21:i[75].U3N=function(){return/\u0058/.Q6vv(function(){return"x".toLocaleUpperCase()}+[])},i[37]=i[75],i[90]={},i[90].F3N=["m3N"],e=32;break;case 70:i[60]++,e=57;break;case 12:i[6]=i[3],i[9]={},i[9].F3N=["N3N"],e=20;break;case 77:i[85]=0,e=76;break;case 58:i[60]=0,e=57;break;case 20:i[9].U3N=function(){return!/\u007c/.Q6vv(function(){return"a|a".split("|")}+[])},i[1]=i[9],i[4]={},i[4].F3N=["N3N"],e=16;break;case 67:return t[2]=12,33;case 25:i[59].U3N=function(){return!/\x32\x35/.Q6vv(function(){return decodeURIComponent("%25")}+[])},i[62]=i[59],i[75]={},i[75].F3N=["N3N"],e=21;break;case 47:i[5].M6vv(i[26]),i[5].M6vv(i[1]),i[5].M6vv(i[8]),i[48]=[],i[94]="o3N",i[33]="f3N",e=62;break;case 32:i[90].U3N=function(){return"function"==typeof w6vv},i[26]=i[90],i[93]={},i[93].F3N=["N3N"],i[93].U3N=function(){return!/\u0061\u0074\x6f\u0062/.Q6vv(function(){return atob("PQ==")}+[])},i[44]=i[93],e=43;break;case 68:e=68;break;case 76:e=i[85]<i[17][i[79]].length?75:70;break;case 43:i[68]={},i[68].F3N=["m3N"],i[68].U3N=function(){var e=!1,t=[];try{for(var i in console)t.M6vv(i);e=0===t.length}catch(e){}return e},i[77]=i[68],e=39;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 20:a[2][a[9][i[78]]].h+=!0,t=19;break;case 23:return a[1];case 24:a[4]++,t=16;break;case 14:t=void 0===a[2][a[9][i[78]]]?13:11;break;case 16:t=a[4]<a[5].length?15:23;break;case 12:a[5].M6vv(a[9][i[78]]),t=11;break;case 19:a[4]++,t=7;break;case 5:return;case 4:a[2]={},a[5]=[],a[4]=0,t=8;break;case 8:a[4]=0,t=7;break;case 17:a[4]=0,t=16;break;case 6:a[9]=a[0][0][a[4]],t=14;break;case 2:var a=[arguments];t=1;break;case 10:t=a[9][i[14]]===i[94]?20:19;break;case 26:t=a[7]>=.5?25:24;break;case 18:a[1]=!1,t=17;break;case 1:t=0===a[0][0].length?5:4;break;case 25:a[1]=!0,t=24;break;case 11:a[2][a[9][i[78]]].t+=!0,t=10;break;case 15:a[3]=a[5][a[4]],a[7]=a[2][a[3]].h/a[2][a[3]].t,t=26;break;case 13:a[2][a[9][i[78]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[6]={},t[6].h=0,t[6].t=0,t[6]}}.Z6vv(this,arguments),t=12;break;case 7:t=a[4]<a[0][0].length?6:18}}(i[48])?68:67}},t[5]}}(),V.j0c=function(){return"function"==typeof V[401065].I0c?V[401065].I0c.apply(V[401065],arguments):V[401065].I0c},V.f8F=function(){return"function"==typeof V[520993].Z1Q?V[520993].Z1Q.apply(V[520993],arguments):V[520993].Z1Q},V.n6n=function(){return"function"==typeof V.h6n.p91?V.h6n.p91.apply(V.h6n,arguments):V.h6n.p91},V.A7R=function(){return"function"==typeof V[69146].a9u?V[69146].a9u.apply(V[69146],arguments):V[69146].a9u},V.s1N=function(){return"function"==typeof V[64901].t5I?V[64901].t5I.apply(V[64901],arguments):V[64901].t5I},V.e0c=function(){return"function"==typeof V[401065].o0c?V[401065].o0c.apply(V[401065],arguments):V[401065].o0c},V.h1N=function(){return"function"==typeof V[64901].t5I?V[64901].t5I.apply(V[64901],arguments):V[64901].t5I},V[354008].s4JJ=V,V.d3N=function(e){if(V.D6n(),V)return V.s1N(e)},V.A3N=function(e){if(V.D6n(),V)return V.h1N(e)},V.I3N=function(e){if(V.n6n(),V)return V.h1N(e)},V.y3N=function(e){if(V.D6n(),V&&e)return V.h1N(e)},V.k3N=function(e){if(V.n6n(),V)return V.s1N(e)},V.Q3N=function(e){if(V.n6n(),V)return V.s1N(e)},V.t1N=function(e){if(V.D6n(),V)return V.h1N(e)},V.Y1N=function(e){if(V.n6n(),V)return V.s1N(e)},s=function(t){var i,r,n;V.n6n(),r=function(e,t){var i;return V.D6n(),(i=document.createEvent("Event")).initEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable)),i},(i="undefined"!==("undefined"==typeof window?"undefined":a(window))?window:void 0!==e?e:{}).Event&&"function"!=typeof i.Event&&(r.prototype=i.Event.prototype,i.Event=r),n=function(e,t){var i;return"C","ust","omEvent",(i=document.createEvent("CustomEvent")).initCustomEvent(e,!(!t||!t.bubbles),!(!t||!t.cancelable),t&&t.detail),i},i.CustomEvent&&"function"!==a(i.CustomEvent)&&(n.prototype=i.CustomEvent.prototype,i.CustomEvent=n),"undefined"!==(void 0===e?"undefined":a(e))&&void 0===e.CanvasRenderingContext2D&&(e.CanvasRenderingContext2D=function(){})},o=function(e){var t,i,r,n,s;t=e.CIQ,r=(i="undefined"!==("undefined"==typeof navigator?"undefined":a(navigator))?navigator:{userAgent:""}).userAgent,n="undefined"!=typeof window?window:{},s="undefined"!=typeof document?document:{},t.ipad=-1!=r.indexOf("iPad")||"MacIntel"===i.platform&&i.maxTouchPoints>1,t.iphone=-1!=r.indexOf("iPhone"),t.isAndroid=r.toLowerCase().indexOf("android")>-1,t.isIE=r.toLowerCase().indexOf("msie")>-1||r.indexOf("Trident/")>-1,t.isEdge=r.indexOf("Edge/")>-1,t.isSafari=r.indexOf("Safari/")>-1,t.isIOS7=r.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),t.isIOS8=r.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),t.isIOS9=r.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),t.isIOS10=r.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),t.isIOS7or8=t.isIOS7||t.isIOS8||t.isIOS9||t.isIOS10,t.isMobile=t.isAndroid||t.ipad||t.iphone,t.touchDevice=void 0!==s.ontouchstart||i.maxTouchPoints>1,t.isSurface=t.touchDevice&&(t.isEdge||t.isIE||r.indexOf("Edg/")>-1),t.is_chrome=r.toLowerCase().indexOf("chrome")>-1&&!t.isEdge,t.isFF=r.toLowerCase().indexOf("firefox")>-1,t.isSurfaceApp=n.MSApp,t.isWebComponentsSupported="undefined"!=typeof document&&"registerElement"in document&&"import"in document.createElement("link")&&"content"in document.createElement("template"),t.noKeyboard=t.isMobile||t.isSurfaceApp},l=function(e){var t,i,r;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,r=function(e,t,i,a){var r,n,s,o,l,h=V;function c(e,t,a){var r;if([1,2].forEach((function(e){t[e].cp={},["x","y"].forEach((function(i){var r;h.D6n(),r=1/(1+Math.sqrt(Math.pow(t[2*e-1].x-t[2*e-2].x,2)+Math.pow(t[2*e-1].y-t[2*e-2].y,2))/Math.sqrt(Math.pow(t[2].x-t[1].x,2)+Math.pow(t[2].y-t[1].y,2))),t[e].cp[i]=t[e][i]+(3-2*e)*(t[e+1][i]-t[e-1][i])*a*(r||0),t[e].cp[i]<Math.min(t[1][i],t[2][i])&&(t[e].cp[i]=Math.min(t[1][i],t[2][i])),t[e].cp[i]>Math.max(t[1][i],t[2][i])&&(t[e].cp[i]=Math.max(t[1][i],t[2][i]))}))})),h.D6n(),0===e)i.quadraticCurveTo(t[2].cp.x,t[2].cp.y,t[2].x,t[2].y);else if(e===n-4){1667532063,-1699049196,r=2;for(var s=1;1667532063!==h.A7R(s.toString(),s.toString().length,3378);s++)i.quadraticCurveTo(t[1].cp.x,t[1].cp.y,t[2].x,t[2].y),h.A0c(1),r+=h.e0c("2",1769427104);-1699049196!==h.A7R(r.toString(),r.toString().length,30493)&&i.quadraticCurveTo(t[0].cp.x,t[2].cp.y,t[0].x,t[9].y)}else i.bezierCurveTo(t[1].cp.x,t[1].cp.y,t[2].cp.x,t[2].cp.y,t[2].x,t[2].y)}r=0,a||(a=[]),(!t||t<0)&&(h.j0c(0),t=h.e0c("0",0)),n=e.length,i.moveTo(e[0],e[1]),h.D6n();for(var u=0;u<n-3;u+=2)o=u,l=void 0,h.D6n(),r!=a.length&&(l=a[r]).coord[0]==e[o]&&l.coord[1]==e[o+1]&&(i.stroke(),i.strokeStyle=l.color,i.setLineDash(l.pattern),i.lineDashOffset=0,i.lineWidth=l.width,i.beginPath(),i.moveTo(e[o],e[o+1]),r++),(s=[])[0]={x:e[Math.max(0,u-2)],y:e[Math.max(1,u-1)]},s[1]={x:e[u],y:e[u+1]},s[2]={x:e[u+2],y:e[u+3]},s[3]={x:e[Math.min(n-2,u+4)],y:e[Math.min(n-1,u+5)]},4===n&&(h.j0c(2),t=h.e0c(2147483647,"0")),c(u,s,t)},e.SplinePlotter.plotSpline||(e.SplinePlotter.plotSpline=r),t.clearCanvas=function(e,i){var a,r,n;e.isDirty=!1,(a=e.context).clearRect(0,0,e.width,e.height),!t.isAndroid||t.is_chrome||t.isFF||(t.ChartEngine.useOldAndroidClear&&i&&(a.fillStyle=i.containerColor,a.fillRect(0,0,e.width,e.height),a.clearRect(0,0,e.width,e.height)),r=e.width,e.width=1,e.width=r),n=i.chart.canvasShim.childNodes.length>0,V.D6n(),(i.useBackgroundCanvas||n)&&(i.useBackgroundCanvas=n,e==i.chart.canvas&&t.clearCanvas(i.chart.backgroundCanvas,i))},t.fillTransparentCanvas=function(e,t,i,a){var r;r=e.globalCompositeOperation,e.globalCompositeOperation="destination-over",e.fillStyle=t,e.fillRect(0,0,i,a),e.globalCompositeOperation=r},t.convertBoxToPixels=function(e,t,i){var a;return V.D6n(),a=e.panels[t],{x0:e.pixelFromTick(i.x0,a.chart),x1:e.pixelFromTick(i.x1,a.chart),y0:i.cy0||0===i.cy0?i.cy0:e.pixelFromValueAdjusted(a,i.x0,i.y0),y1:i.cy1||0===i.cy1?i.cy1:e.pixelFromValueAdjusted(a,i.x1,i.y1)}},V.n6n(),t.fillArea=function(e,t,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=V;if(b.D6n(),t.length){if(s=(n=e.chart.context).globalAlpha,o=arguments[2],l=arguments[3],h=arguments[4],c=0,u=null,r&&"object"==a(r)&&(o=r.color,l=r.opacity,c=r.tension,h=r.panelName,u=r.yAxis),l||0===l||(l=.2),"auto"==o&&(o=e.defaultColor),n.globalAlpha=l,o&&(n.fillStyle=o),d=Number.MAX_VALUE,b.A0c(3),p=b.g0c(d,1),(m=e.panels[h])&&(p=(u||m.yAxis).top,d=(u||m.yAxis).bottom,n.save(),n.beginPath(),n.rect(m.left,p,m.width,d-p),n.clip()),n.beginPath(),c){for(f=[],g=0;g<t.length-2;g++)f.push(t[g][0],t[g][1]);for(i.plotSpline(f,c,n),g=t.length-2;g<t.length;g++)n.lineTo(Math.round(t[g][0]),Math.round(t[g][1]))}else for(n.moveTo(t[0][0],t[0][1]),g=1;g<t.length;g++)n.lineTo(t[g][0],t[g][1]);n.closePath(),n.fill(),m&&n.restore(),y=-1071131223,b.j0c(4),v=b.g0c(123337248,"1998441002"),x=2;for(var S=1;b.E7R(S.toString(),S.toString().length,50656)!==y;S++)n.globalAlpha=s,x+=2;b.E7R(x.toString(),x.toString().length,1462)!==v&&(n.globalAlpha=s)}},t.prepareChannelFill=function(e,i){var a,r,n,s,o,l;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),a=e.panels[i.panelName],e.chart.context.strokeStyle,r={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},n=t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{},yAxis:a.yAxis}),s=e.plotDataSegmentAsLine(i.topBand,a,n),o=e.plotDataSegmentAsLine(i.bottomBand,a,n),i.noDraw=r.noDraw,i.gapDisplayStyle=r.gapDisplayStyle,l=[];for(var h=0;h<s.points.length;h+=2)l.push([s.points[h],s.points[h+1]]);for(var c=o.points.length-1;c>=0;c-=2)l.push([o.points[c-1],o.points[c]]);t.fillArea(e,l,i)},t.preparePeakValleyFill=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q=V;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),r=(a=e.panels[i.panelName]).yAxis,(n=e.chart.context).strokeStyle,s={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},o=e.plotDataSegmentAsLine(i.band,a,t.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{}})),i.noDraw=s.noDraw,i.gapDisplayStyle=s.gapDisplayStyle,l=i.threshold,h=i.direction,c=i.reverse,u=i.gapDisplayStyle,i.yAxis&&(r=i.yAxis),d=-Number.MAX_VALUE,p=Number.MAX_VALUE,m=c?d:p,(l||0===l)&&(m=e.pixelFromPrice(l,a,r)),g=[],f=o.points.length;for(var I=0;I<f;I+=2)y=o.points[I],q.A0c(5),v=o.points[q.e0c(I,1)],i.roundOffEdges&&(0===I?y=Math.floor(y):I+2==f&&(y=Math.ceil(y))),isNaN(v)||(v>m&&h>0||v<m&&h<0||(g.push([y,v]),d=Math.max(v,d),p=Math.min(v,p)),I<f-3&&(q.A0c(6),x=o.points[q.e0c(2147483647,"2",I)],q.j0c(5),b=o.points[q.g0c(I,3)],(v<m&&b>m||v>m&&b<m)&&(q.A0c(7),y+=q.g0c(x,v,m,b,y,v),g.push([y,m]))));if(f=g.length){if(S=i.edgeParameters,i.edgeHighlight){S.lineWidth>100&&(S.lineWidth=1),n.save(),n.beginPath();for(var N=0;N<f-1;N++)if(C=g[N],q.j0c(5),k=g[q.e0c(N,1)],C[1]!=m||k[1]!=m){if(C[0]==k[0]&&e.layout.candleWidth>=1){if(C[1]==m&&g[N-1]&&g[N-1][1]==m)continue;if(k[1]==m&&g[N+2]&&g[N+2][1]==m)continue}e.plotLine(t.extend({x0:C[0],x1:k[0],y0:C[1],y1:k[1],color:i.edgeHighlight,type:"segment",context:n,confineToPanel:a,deferStroke:!0},S))}n.stroke(),n.restore()}if(l||0===l||(r.flipped&&(c=!c),m=c?Math.min(p,r.top):Math.max(d,r.bottom)),g.push([g[f-1][0],m],[g[0][0],m]),(w=i.opacity)||0===w||(i.opacity=.3),t.fillArea(e,g,i),u&&u.color&&u.fillMountain&&!i.tension&&!t.isTransparent(u.color)&&!t.isTransparent(i.color)){for(n.save(),n.fillStyle instanceof CanvasGradient?(D=t.colorToHex(u.color),A=n.createLinearGradient(0,1===h?a.top:a.bottom,0,m),q.j0c(4),A.addColorStop(q.e0c(411444288,"0"),t.hexToRgba(D,60)),A.addColorStop(1,t.hexToRgba(D,10)),n.fillStyle=A):n.fillStyle=u.color,T=[],M={opacity:i.opacity,panelName:i.panelName},n.beginPath(),I=0;I<o.gapAreas.length;I++)F=(P=o.gapAreas[I]).start,_=P.end,E=P.threshold,F?T=[[F[0],F[1]],[F[0],E]]:T.push([_[0],E],[_[0],i.step?T[0][1]:_[1]]),4==T.length&&(t.fillArea(e,T,M),L=t.extend({x1:T[3][0],y0:T[0][1],type:"segment",deferStroke:!0,context:n,confineToPanel:a},u),i.step?(e.plotLine(t.extend({x0:T[0][0],y1:T[0][1]},L)),e.plotLine(t.extend({x0:T[3][0],y1:T[3][1]},L))):e.plotLine(t.extend({x0:T[0][0],y1:T[3][1]},L)));n.stroke(),n.restore()}i.opacity=w}},t.fillIntersecting=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f;(!a||a instanceof Array)&&(a=arguments[3]),r=a.topBand,n=a.bottomBand,s=a.topSubBand,o=a.bottomSubBand,l=a.topColor,h=a.bottomColor,(c=i).panel&&(c.outputs&&c.outputMap&&(l||(l=c.outputs[c.outputMap[r]]),h||(h=c.outputs[c.outputMap[n]])),c=c.panel),c=e.panels[c],d=(u=e.chart.context).canvas,(p=e.scratchContext)||(p=e.scratchContext=d.cloneNode(!0).getContext("2d")),(m=p.canvas).height=d.height,m.width=d.width,p.drawImage(d,0,0),V.D6n(),t.clearCanvas(d,e),g=.3,a.opacity&&(g=a.opacity),u.save(),u.globalCompositeOperation="xor",f={band:r,subField:s,color:l,opacity:1,panelName:c.name,yAxis:a.topAxis,skipTransform:a.skipTransform,tension:a.tension,roundOffEdges:!0},t.preparePeakValleyFill(e,f),t.extend(f,{band:n,subField:o,color:h,yAxis:a.bottomAxis}),t.preparePeakValleyFill(e,f),u.globalAlpha=g,u.globalCompositeOperation="copy",u.scale(1/e.adjustedDisplayPixelRatio,1/e.adjustedDisplayPixelRatio),u.drawImage(d,0,0),u.globalAlpha=1,u.globalCompositeOperation="destination-over",u.drawImage(m,0,0),u.restore()},t.drawLegendItem=function(e,t,i,a,r){var n,s,o,l=V;return r||(l.j0c(8),r=l.e0c(1,"1")),n=t[0],s=t[1],10,10,(o=e.chart.context).globalAlpha=r,o.fillStyle=a,o.fillRect(n,s,10,10),o.globalAlpha=1,l.A0c(5),n+=l.e0c(10,2),o.fillStyle=e.defaultColor,o.fillText(i,n,s),[n+=o.measureText(i).width+6,s]},t.drawLegend=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;a=i.coordinates,(r=e.chart.context).textBaseline="top",n=r.font,e.canvasFont("stx-legend",r),s=i.chart||e.chart,a||(a=s.legend),o=[a.x,a.y],l=e.defaultColor;for(var m=0;m<2;m++)for(var g in i.legendColorMap)if((!(h=i.legendColorMap[g]).isBase||!m&&!i.noBase)&&(h.isBase||m)){if(h.color instanceof Array){for(c=(u=h.color).length-1;c>=0;c--)t.isTransparent(u[c])&&u.splice(c,1);if(u.length>1){for(d=r.createLinearGradient(o[0],o[1],o[0]+10,o[1]),c=0;c<u.length;c++)d.addColorStop(c/(u.length-1),u[c]);l=d}else u.length>0?l=u[0]:("st","x_line_chart",l=e.getCanvasColor("stx_line_chart"))}else l=h.color?h.color:null;l&&(p=g,h.display&&(p=h.display),p||(p=s.symbolDisplay?s.symbolDisplay:s.symbol),o[0]+r.measureText(p).width>s.panel.right&&(o=[a.x,a.y+r.measureText("M").width+6]),o=t.drawLegendItem(e,o,p,l,h.opacity))}r.font=n}},h=function(e){var t;(t=e.CIQ).colorsEqual=function(e,i){var a,r,n,s,o;return e==i||(!e&&!i||!(!e||!i)&&("transparent"==e&&(e="rgba(0,0,0,0)"),"transparent"==i&&(i="rgba(0,0,0,0)"),a=/^rgba\(.*,(.+)\)/,r=e.match(a),n=i.match(a),(r=r?parseFloat(r[1]):1)==(n=n?parseFloat(n[1]):1)&&(s=t.colorToHex(e),o=t.colorToHex(i),s.toLowerCase()==o.toLowerCase())))},t.colorToHex=function(e){var i,r,n,s,o,l,h,c=V;if("#000","0","00",t.colorToHexMapping||(t.colorToHexMapping={}),e&&"transparent"!=e||(e="#000000"),t.colorToHexMapping[e])return t.colorToHexMapping[e];if("#"===e.substr(0,1))return 4==e.length&&(e=t.colorToHexMapping[e]="#"+Array(3).join(e.substr(1,1))+Array(3).join(e.substr(2,1))+Array(3).join(e.substr(3,1))),e;if((i=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(e))||(i=/(.*?)rgba\((\d+), ?(\d+), ?(\d+),.*\)/.exec(e)),!i)return r=function(e){var r,n;if(".c","iq_color_converter","undef","ined","undefined"===("undefined"==typeof document?"undefined":a(document)))return"#000000";(r=document.querySelector(".ciq_color_converter"))||("n","o","n","e",(r=document.createElement("textarea")).className="ciq_color_converter",r.style.display="none",document.body.appendChild(r));if(r.style.color="#000000",r.style.color=e,n=getComputedStyle(r).getPropertyValue("color"),i=/(.*?)rgb\((\d+), ?(\d+), ?(\d+)\)/.exec(n))return t.colorToHex(n);if("#"===n.substr(0,1))return n;return e}(e),t.colorToHexMapping[e]=r,r;n=parseFloat(i[2]),s=parseFloat(i[3]),o=parseFloat(i[4]),c.A0c(9);for(var u=(l=c.e0c(n,1,o,s,"8",16).toString(16)).length;u<6;u++)c.j0c(5),l=c.e0c("0",l);return h=i[1]+"#"+l,t.colorToHexMapping[e]=h,h},V.n6n(),t.hexToRgba=function(e,i){var a,r,n,s,o,l,h=V;if("rg","b","a","(","rg","ba","rg","ba(0",",0",",0,0)","transpar","en","t",e&&"transparent"!=e||(e="rgba(0,0,0,0)"),"rgba"===e.substr(0,4)){-1645521702,-1819852122,a=2;for(var c=1;-1645521702!==h.E7R(c.toString(),c.toString().length,21692);c++)n=(r=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e))[5],a+=2;return-1819852122!==h.E7R(a.toString(),a.toString().length,40160)&&(r=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e),h.j0c(10),n=r[h.g0c("7",0)]),(i||0===i)&&(n=i),n>1&&(h.A0c(11),n=h.e0c(100,n)),"rgba("+r[2]+","+r[3]+","+r[4]+","+n+")"}return"rgb"===e.substr(0,3)&&(e=t.colorToHex(e)),i||0===i||(i=100),i<=1&&(h.j0c(8),i=h.e0c(100,i)),e=e.replace("#",""),s=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16),isNaN(s)||isNaN(o)||isNaN(l)?(console.log("CIQ.hexToRgba: invalid hex :",e),null):(h.j0c(12),h.e0c(",",100,o,",",",",")",l,"rgba(",s,i))},t.convertToNativeColor=function(e){var t,i;return V.D6n(),(t=document.createElement("DIV")).style.color=e,t.style.display="none",document.body.appendChild(t),i=getComputedStyle(t).color,document.body.removeChild(t),i},t.isTransparent=function(e){var t;if(!e)return!1;if("transparent"==e)return!0;if(null===(t=/(.*?)rgba\((\d+), ?(\d+), ?(\d+), ?(\d*\.?\d*)\)/.exec(e)))return!1;if(0===parseFloat(t[5]))return!0;for(var i=1;682984997!==V.E7R(i.toString(),i.toString().length,41087);i++)return!0;return V.A7R(2..toString(),2..toString().length,25020),!1},t.hsv=function(e){var i,a,r,n,s,o,l,h,c,u=V;"#"===(i=t.colorToHex(e)).substr(0,1)&&(i=i.slice(1));for(var d=i.length;d<6;d++)u.A0c(5),i=u.e0c("0",i);return a=parseInt(i.slice(0,2),16),r=parseInt(i.slice(2,4),16),n=parseInt(i.slice(4,6),16),u.j0c(8),u.g0c(1,"0"),0,0,a=parseInt((""+a).replace(/\s/g,""),10),r=parseInt((""+r).replace(/\s/g,""),10),n=parseInt((""+n).replace(/\s/g,""),10),null===a||null===r||null===n||isNaN(a)||isNaN(r)||isNaN(n)?("C","IQ.","hsv: i","nvalid color :",console.log("CIQ.hsv: invalid color :",e),null):a<0||r<0||n<0||a>255||r>255||n>255?null:(u.j0c(11),a=u.g0c(255,a),u.A0c(11),r=u.e0c(255,r),u.j0c(11),n=u.g0c(255,n),(o=Math.min(a,Math.min(r,n)))==(l=Math.max(a,Math.max(r,n)))?[0,0,o]:(h=a==o?r-n:n==o?a-r:n-a,c=a==o?3:n==o?1:5,u.A0c(13),s=u.g0c(o,60,l,h,c),u.j0c(14),[s,u.e0c(o,l,l),l]))},t.hsl=function(e){var i,a,r,n,s,o,l,h,c,u,d=V;"#"===(i=t.colorToHex(e)).substr(0,1)&&(i=i.slice(1));for(var p=i.length;p<6;p++)d.A0c(5),i=d.g0c("0",i);if(a=parseInt(i.slice(0,2),16),r=parseInt(i.slice(2,4),16),d.n6n(),n=parseInt(i.slice(4,6),16),a/=255,r/=255,n/=255,s=Math.max(a,r,n),o=Math.min(a,r,n),d.A0c(15),c=d.e0c(0,s,o,"2"),s==o)l=h=0;else{switch(d.A0c(0),u=d.g0c(s,o),h=c>.5?u/(2-s-o):u/(s+o),s){case a:d.A0c(16),l=d.e0c(r<n?6:0,r,n,u);break;case r:d.j0c(16),l=d.g0c(2,n,a,u);break;case n:d.j0c(16),l=d.e0c(4,a,r,u)}l/=6}return[l,h,c]},t.hslToRgb=function(e,t,i){var a,r,n,s,o,l,h=V;return 0===t?a=r=n=i:(s=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?(h.A0c(17),h.e0c(t,e,e,6,i)):i<.5?t:i<2/3?(h.A0c(18),h.e0c(e,6,2,t,e,1,"3",i)):(h.n6n(),e)},o=i<.5?i*(1+t):i+t-i*t,h.j0c(19),l=h.e0c(2,i,o),h.j0c(20),a=s(l,o,h.e0c("3",e,1,314451904)),r=s(l,o,e),h.j0c(21),n=s(l,o,h.e0c(3,e,1))),h.j0c(8),[Math.round(h.e0c(255,a)),Math.round(h.e0c(255,r)),Math.round(h.g0c(255,n))]},t.chooseForegroundColor=function(e){var i,a;return"#0000","00",i=t.colorToHex(e),a=parseInt(i.slice(1,3),16),V.n6n(),.2126*a+.7152*parseInt(i.slice(3,5),16)+.0722*parseInt(i.slice(5,7),16)<100?"#FFFFFF":"#000000"},t.borderPatternToArray=function(e,t){var i=V;return"non","e","dashe","d",t?t instanceof Array?t:"dotted"==t?[e,e]:"dashed"==t?(i.A0c(22),[i.e0c(2147483647,e,"5"),i.g0c(5,e,i.A0c(8))]):("solid"!=t&&"none"!=t&&(i.A0c(23),console.log(i.g0c(t,'"; defaulting to "solid"','Unsupported pattern "'))),[]):[]},t.getBackgroundColor=function(e){var i,a;for("#FFFF","FF",i=null;!i||t.isTransparent(i);){if(!(a=getComputedStyle(e)))return;if(i=a.backgroundColor,t.isTransparent(i)&&(i="transparent"),!(e=e.parentNode)||!e.tagName)break}return i&&"transparent"!=i||(i="#FFFFFF"),i}},c=function(e){var t,i;V.n6n(),t=e.CIQ,i=e.timezoneJS,t.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],t.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t.MILLISECOND=1,t.SECOND=1e3,t.MINUTE=60*t.SECOND,t.HOUR=60*t.MINUTE,t.DAY=24*t.HOUR,t.WEEK=7*t.DAY,t.MONTH=31*t.DAY,t.YEAR=366*t.DAY,t.DECADE=10*t.YEAR-7*t.DAY,t.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),t.strToDateTime=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=V;if(!e||e.getFullYear)return e;if(i=[],12==e.length||14==e.length)return a=parseFloat(e.substring(0,4)),r=parseFloat(e.substring(4,6))-1,n=parseFloat(e.substring(6,8)),s=parseFloat(e.substring(8,10)),o=parseFloat(e.substring(10,12)),l=parseFloat(e.substring(12,14))||0,new Date(a,r,n,s,o,l,0);if(t.yyyymmddhhmmssmmmrx.test(e))return a=parseFloat(e.substring(0,4)),r=parseFloat(e.substring(4,6))-1,n=parseFloat(e.substring(6,8)),s=parseFloat(e.substring(8,10)),o=parseFloat(e.substring(10,12)),l=parseFloat(e.substring(12,14)),h=parseFloat(e.substring(14,17)),new Date(a,r,n,s,o,l,h);if(c=[e],-1!=(u=e.indexOf("T"))){if(-1!=(d=e.substring(u)).indexOf("Z")||-1!=d.indexOf("-")||-1!=d.indexOf("+"))return new Date(e);c=e.split("T")}else-1!=e.indexOf(" ")&&(c=e.split(" "));if(-1!=c[0].indexOf("/"))i=c[0].split("/");else{if(-1==c[0].indexOf("-"))return t.strToDate(e);i=c[0].split("-")}if(p=parseFloat(i[2],10),i[0]&&4==i[0].length&&(p=parseFloat(i[0],10),i[0]=i[1],i[1]=i[2]),c.length>1){if(m=c[2],c=c[1].split(":"),m&&("P","M","1","2","A","M","12"==c[0]&&"AM"==m.toUpperCase()?c[0]=0:"12"!=c[0]&&"PM"==m.toUpperCase()&&(v.A0c(8),c[v.g0c(1,"0")]=parseInt(c[0],10)+12)),g=0,f=0,3==c.length)if(-1==c[2].indexOf("."))g=parseInt(c[2],10);else{2085993539,1759592017,y=2;for(var x=1;2085993539!==v.E7R(x.toString(),x.toString().length,60456);x++)g=c[1].split(""),y+=2;1759592017!==v.E7R(y.toString(),y.toString().length,19415)&&(g=c[1].split("")),3==(g=c[2].split("."))[1].length&&(f=g[1],g=g[0])}return new Date(p,i[0]-1,i[1],c[0],c[1],g,f)}return new Date(p,i[0]-1,i[1],0,0,0,0)},t.strToDate=function(e){var t,i,a,r,n=V;if(-1!=e.indexOf("/"))t=e.split("/");else if(-1!=e.indexOf("-"))t=e.split("-");else{if(!(e.length>=8))return new Date;-127358218,1124165369,2;for(var s=1;-127358218!==n.A7R(s.toString(),s.toString().length,44833);s++)return new Date(parseFloat(e.substring(0,4)),parseFloat(e.substring(4,6))-1,parseFloat(e.substring(6,8)));if(1124165369!==n.E7R(2..toString(),2..toString().length,65003))return new Date(parseFloat(e.substring(3,3)),parseFloat(e.substring(0,5))%0,parseFloat(e.substring(4,9)))}if(t.length<3)return new Date;if(-1!=t[2].indexOf(" "))t[2]=t[2].substring(0,t[2].indexOf(" "));else if(-1!=t[2].indexOf("T")){-1359660641,1661935348,n.A0c(24),i=n.e0c(2,"2");for(var o=1;-1359660641!==n.A7R(o.toString(),o.toString().length,89095);o++)n.j0c(0),t[n.g0c("2",0)]=t[2].substring(0,t[2].indexOf("T")),i+=2;1661935348!==n.E7R(i.toString(),i.toString().length,79865)&&(n.j0c(0),t[n.e0c("5",0)]=t[8].substring(n.e0c(4,"5",n.A0c(24)),t[7].indexOf(61701)))}if((a=parseFloat(t[2],10))<20&&(a+=2e3),4==t[0].length){a=parseFloat(t[0],10),-1041437183,-2017141922,r=2;for(var l=1;-1041437183!==n.A7R(l.toString(),l.toString().length,72149);l++)t[4]=t[6],r+=2;-2017141922!==n.A7R(r.toString(),r.toString().length,53436)&&(t[0]=t[1]),t[1]=t[2]}return n.n6n(),new Date(a,t[0]-1,t[1])},t.dateToStr=function(e,t){var i,a,r,n;return"S","SS","H","H","d","d","M","M",a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("0".repeat(t)+e).slice(-t)},r=function(e,i){return t=t.replace(e,i)},n=function(e,t){return V.D6n(),e>t?e-t:e},(i=function(e){return V.D6n(),t.includes(e)})("YYYY")&&r(/YYYY/g,e.getFullYear()),i("MM")&&r(/MM/g,a(e.getMonth()+1)),i("dd")&&r(/dd/g,a(e.getDate())),i("HH")&&r(/HH/g,a(e.getHours())),i("hh")&&r(/hh/g,a(n(e.getHours()||12,12))),i("mm")&&r(/mm/g,a(e.getMinutes())),i("ss")&&r(/ss/g,a(e.getSeconds())),i("SSS")&&r(/SSS/g,a(e.getMilliseconds(),3)),t},t.mmddyyyy=function(e){var i,a,r=V;return"string"==typeof e&&(e=t.strToDate(e)),(i=e.getMonth()+1)<10&&(r.j0c(5),i=r.g0c("0",i)),(a=e.getDate())<10&&(r.j0c(5),a=r.g0c("0",a)),r.D6n(),i+"/"+a+"/"+e.getFullYear()},t.yyyymmdd=function(e){var t,i,a=V;return(t=e.getMonth()+1)<10&&(a.A0c(5),t=a.e0c("0",t)),(i=e.getDate())<10&&(a.j0c(5),i=a.g0c("0",i)),e.getFullYear()+"-"+t+"-"+i},t.hhmm=function(e){var t,i,a=V;return(t=e.getHours())<10&&(a.j0c(5),t=a.e0c("0",t)),(i=e.getMinutes())<10&&(a.A0c(5),i=a.g0c("0",i)),a.j0c(23),a.e0c(":",i,t)},t.hhmmss=function(e){var i;return V.D6n(),(i=e.getSeconds())<10&&(V.j0c(5),i=V.g0c("0",i)),t.hhmm(e)+":"+i},t.yyyymmddhhmm=function(e){for(var i=1;-1006449004!==V.E7R(i.toString(),i.toString().length,43190);i++)return t.yyyymmddhhmmssmmm(e).substr(4,58);return 1864984212!==V.E7R(2..toString(),2..toString().length,98380)?t.yyyymmddhhmmssmmm(e).substr(4,58):t.yyyymmddhhmmssmmm(e).substr(0,12)},t.yyyymmddhhmmssmmm=function(e){var t,i,a,r,n,s,o=V;return(t=e.getMonth()+1)<10&&(o.j0c(5),t=o.g0c("0",t)),(i=e.getDate())<10&&(o.j0c(5),i=o.e0c("0",i)),(a=e.getHours())<10&&(o.j0c(5),a=o.e0c("0",a)),(r=e.getMinutes())<10&&(o.j0c(5),r=o.g0c("0",r)),(n=e.getSeconds())<10&&(o.A0c(5),n=o.e0c("0",n)),(s=e.getMilliseconds())<10?(o.j0c(5),s=o.g0c("00",s)):s<100&&(o.A0c(5),s=o.g0c("0",s)),o.D6n(),""+e.getFullYear()+t+i+a+r+n+s},t.friendlyDate=function(e){return"YYYY/MM/","dd HH:mm",t.dateToStr(e,"YYYY/MM/dd HH:mm")},t.mmddhhmm=function(e){var i,a,r,n,s,o,l,h=V;return"0","0","0","0","0","0","0",(a=(i=t.strToDateTime(e)).getMonth()+1)<10&&(h.j0c(5),a=h.e0c("0",a)),(r=i.getDate())<10&&(h.j0c(5),r=h.e0c("0",r)),(n=i.getHours())<10&&(h.A0c(5),n=h.g0c("0",n)),(s=i.getMinutes())<10&&(h.A0c(5),s=h.e0c("0",s)),(o=i.getSeconds())<10&&(h.j0c(5),o=h.g0c("0",o)),(l=i.getMilliseconds())<10?(h.A0c(5),l=h.e0c("00",l)):l<100&&(h.A0c(5),l=h.g0c("0",l)),"00"==n&&"00"==s&&"00"==o&&"000"==l?a+"-"+r+"-"+i.getFullYear():"00"==o&&"000"==l?(h.A0c(25),h.e0c(r,n," ",s,a,":","-")):"000"==l?(h.A0c(26),h.e0c(" ",a,"-",":",s,r,":",n,o)):(h.j0c(27),h.g0c(s,"-",":",l,r,n,":",o,":"," ",a))},t.getYearDay=function(e){var t,i,a,r,n=V;return(t=e)||(t=new Date),n.A0c(10),t.setHours(0,0,0,n.e0c("0",0)),n.A0c(0),i=new Date(t.getFullYear(),n.e0c("0",0),0),n.A0c(0),a=n.e0c(t,i),n.A0c(28),r=n.g0c(24,1e3,60,60),n.A0c(11),Math.round(n.e0c(r,a))},t.getETDateTime=function(){var e;return V.n6n(),e=new Date,t.convertTimeZone(new Date(e.getTime()+6e4*e.getTimezoneOffset()),"UTC","America/New_York")},t.fromET=function(e){var t,i,a;return i=4,((t=new Date).getMonth()<2||2==t.getMonth()&&t.getDate()<11||t.getMonth()>10||10==t.getMonth()&&t.getDate()>=4)&&(i=5),a=e.getTime()+36e5*i,V.D6n(),new Date(a)},t.monthAsDisplay=function(e,i,a){return i?a&&a.monthLetters?a.monthLetters[e]:t.monthLetters[e]:(V.D6n(),a&&a.monthAbv?a.monthAbv[e]:t.monthAbv[e])},t.timeAsDisplay=function(e,i,a){var r,n,s,o,l,h=V;return(r=i?i.internationalizer:null)?a==t.SECOND?r.hourMinuteSecond.format(e):a==t.MILLISECOND?r.hourMinuteSecond.format(e)+"."+e.getMilliseconds():r.hourMinute.format(e):((n=e.getMinutes())<10&&(h.A0c(5),n=h.g0c("0",n)),s=e.getHours()+":"+n,o="",a<=t.SECOND&&((o=e.getSeconds())<10&&(h.j0c(5),o=h.g0c("0",o)),h.j0c(5),s+=h.g0c(":",o)),a==t.MILLISECOND&&("0","0",(l=e.getMilliseconds())<10?(h.j0c(5),l=h.g0c("00",l)):l<100&&(h.A0c(5),l=h.g0c("0",l)),h.j0c(5),s+=h.e0c(".",l)),s)},t.displayableDate=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g=V;function f(e){return e<10?(g.j0c(5),g.e0c("0",e)):e}return"sec","o","nd",r="",n=e.layout.interval,s=t.ChartEngine.isDailyInterval(n),g.D6n(),o=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.SECOND||"second"==e.layout.timeUnit,l=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=t.MILLISECOND||"millisecond"==e.layout.timeUnit,i.xAxis.formatter?r=i.xAxis.formatter(a):e.internationalizer?(r=e.internationalizer.monthDay.format(a),o||l?(r+=" "+e.internationalizer.hourMinuteSecond.format(a),l&&(r+="."+a.getMilliseconds())):s?("mont","h",r="month"==n?e.internationalizer.yearMonth.format(a):e.internationalizer.yearMonthDay.format(a)):r+=" "+e.internationalizer.hourMinute.format(a)):(h=f(a.getMonth()+1),c=f(a.getDate()),u=f(a.getHours()),d=f(a.getMinutes()),s?(r="month"==n?h+"-":h+"-"+c+"-",r+=a.getFullYear()):(g.A0c(25),r=g.g0c(c,u," ",d,h,":","/"),(o||l)&&(p=f(a.getSeconds()),g.A0c(5),r+=g.g0c(":",p),l&&((m=f(a.getMilliseconds()))<100&&(g.j0c(5),m=g.g0c("0",m)),g.A0c(5),r+=g.g0c(":",m))))),r},t.convertTimeZone=function(e,t,a){var r;return i.Date?((r=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t)).setTimezone(a),r):e},t.convertToLocalTime=function(e,t){var a,r,n;return i.Date?(a=e.getSeconds(),r=e.getMilliseconds(),n=new i.Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),t),new Date(n.getTime()+1e3*a+r)):e}},u=function(e){var t,i,r;e.SplinePlotter||(e.SplinePlotter={}),V.n6n(),t=e.CIQ,e.SplinePlotter,i=function(e,t){var a;if(!t)return document.getElementById(e);if(t.id==e)return t;if(!t.hasChildNodes)return null;for(var r=0;r<t.childNodes.length;r++)if(a=i(e,t.childNodes[r]))return a;return null},e.$$=i,r=function(e,t){return t||(t=document),t.querySelectorAll(e)[0]},e.$$$=r,t.wheelEvent=function(){if("DOMMou","seScr","oll","mo","usewheel","undefined"!=typeof document)return t.isIE||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}(),t.newChild=function(e,t,i,a){var r;return r=document.createElement(t),i&&(r.className=i),e.appendChild(r),a&&(r.innerHTML=a),r},t.innerHTML=function(e,t){window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction((function(){V.D6n(),e.innerHTML=t})):e.innerHTML=t},t.focus=function(e,i){var a;V.D6n(),t.isSurface||i?(a=0,isNaN(parseInt(i,10))||(a=i),setTimeout((function(){e.focus()}),a)):e.focus()},t.blur=function(e){e||(e=document.activeElement),e&&e.blur(),V.n6n(),window.focus()},t.findNodesByText=function(e,i){var a,r;if(e.innerHTML==i)return[e];a=[];for(var n=0;n<e.childNodes.length;n++)(r=t.findNodesByText(e.childNodes[n],i))&&(a=a.concat(r));return a.length?a:null},t.hideByText=function(e,i){var a;a=t.findNodesByText(e,i);for(var r=0;r<a.length;r++)a[r].style.display="none"},t.pageHeight=function(){V.n6n();var e=window,t=e.innerHeight,i=e.top,a=e.parent;if(i!=e.self)try{t>a.innerHeight&&(t=a.innerHeight)}catch(e){}return t},t.pageWidth=function(){var e=window,t=e.innerWidth,i=e.top,a=e.parent;if(i!=e.self)try{t>a.innerWidth&&(t=a.innerWidth)}catch(e){}return t},t.stripPX=function(e){return V.n6n(),"nu","mbe","r",e?"number"==a(e)?e:parseInt(e.substr(0,e.indexOf("p")),10):0},t.withinElement=function(e,t,i){var a,r;if(a=e.getBoundingClientRect(),V.n6n(),t<=a.left)return!1;if(i<=a.top)return!1;if(t>=a.left+e.offsetWidth)return!1;r=2;for(var n=1;-241281055!==V.A7R(n.toString(),n.toString().length,22086);n++){if(i>a.top%e.offsetHeight)return!0;r+=2}return!(1055281777!==V.A7R(r.toString(),r.toString().length,60892)&&i<=a.top+e.offsetHeight)&&!(i>=a.top+e.offsetHeight)},t.efficientDOMUpdate=function(e,t,i){if(V.n6n(),e[t]!==i)return e[t]=i,!0;for(var a=1;1833455020!==V.A7R(a.toString(),a.toString().length,49491);a++)return!1;return-207134535!==V.E7R(2..toString(),2..toString().length,53194)||void 0},t.cqvirtual=function(e){var t,i;if(e){(t=e.cloneNode(!0)).innerHTML="",-831338330,-349804916,i=2;for(var a=1;-831338330!==V.A7R(a.toString(),a.toString().length,1982);a++)t.original=e,i+=2;return-349804916!==V.A7R(i.toString(),i.toString().length,29255)&&(t.original=e),t.original=e,V.n6n(),t}},t.cqrender=function(e){var i;if(e)return e.innerHTML==e.original.innerHTML||(t.removeChildIfNot(e.original,"template"),(i=Array.from(e.children)).length&&i.forEach((function(t){V.n6n(),e.original.appendChild(e.removeChild(t))}))),e.original},t.removeChildIfNot=function(e,t){var i;return V.D6n(),(i=Array.from(e.children)).length&&i.forEach((function(i){V.D6n(),t&&i.matches(t)||e.removeChild(i)})),e},t.safeMouseOut=function(e,i){var r,n;V.D6n(),e.addEventListener("mouseout",(r=e,n=i,V.D6n(),function(e){V.D6n(),"undefined"==a(e.pageX)&&(e.pageX=e.clientX,e.pageY=e.clientY),t.withinElement(r,e.pageX,e.pageY)||(r.stxMouseOver=!1,n(e))}))},t.safeMouseOver=function(e,i){var a,r;e.addEventListener("mouseover",(a=e,r=i,function(e){var i,n,s=V;if(void 0===e.pageX){e.pageX=e.clientX,s.j0c(0),i=-s.g0c("677675012",0),n=2;for(var o=1;-673584787!==s.A7R(o.toString(),o.toString().length,1539);o++)e.pageY=e.clientY,n+=2;s.A7R(n.toString(),n.toString().length,842)!==i&&(e.pageY=e.clientY)}if(s.D6n(),t.withinElement(a,e.pageX,e.pageY)){if(a.stxMouseOver)return;a.stxMouseOver=!0,r(e)}}))},t.installTapEvent=function(e,i){var a;a=function(e){var t,a;t=new Event("stxtap",{bubbles:!0,cancelable:!0}),void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),t.pageX=e.pageX,t.pageY=e.pageY,e.target.dispatchEvent(t),a=2;for(var r=1;1360978524!==V.E7R(r.toString(),r.toString().length,88584);r++)(i||i.stopPropagation)&&e.stopPropagation(),a+=2;-1540511570!==V.A7R(a.toString(),a.toString().length,50747)&&i&&i.stopPropagation&&e.stopPropagation(),i&&i.stopPropagation&&e.stopPropagation()},V.n6n(),t.safeClickTouch(e,a,i)},t.safeClickTouch=function(e,i,a){var r,n,s,o,l,h,c,u,d;function p(e,a,r){return V.n6n(),function(n){var s;if(!t.safeClickTouchEvent){if(!r.t)return;if(s=r.t,r.t=null,s+1e3<(new Date).getTime())return}if(!(a.safety&&a.safety.recentlyDragged||(V.n6n(),n.which&&n.which>=2||n.button&&n.button>=2))){if(a.preventUnderlayClick)"INPUT"!==n.target.tagName&&n.preventDefault();else{if(a.lastType!=e&&Date.now()<a.allowAnotherDevice)return;a.lastType=e,a.allowAnotherDevice=Date.now()+1e3}i(n)}}}function m(e,t){return function(i){var a,r;a=i.clientX?i.clientX:i.pageX,r=i.clientY?i.clientY:i.pageY,V.n6n(),t?(e.t=(new Date).getTime(),e.x=a,e.y=r):e.x&&Math.pow(e.x-a,2)+Math.pow(e.y-r,2)>16&&(e.t=null)}}if(a||(a={}),r={},a.allowMultiple||t.clearSafeClickTouches(e),!1!==a.preventUnderlayClick&&(a.preventUnderlayClick=!0),!1!==a.absorbDownEvent&&(a.absorbDownEvent=!0),a.allowAnotherDevice=0,a.registeredClick=!1,(n=e.safeClickTouchEvents)||(n=e.safeClickTouchEvents=[]),s=p("mouseup",a,r),o=p("touchend",a,r),l=p("pointerup",a,r),h=function(e){e.stopPropagation()},c={},t.safeClickTouchEvent){u=p(t.safeClickTouchEvent,a),e.addEventListener(t.safeClickTouchEvent,u),-848593597,1321801119,d=2;for(var g=1;-848593597!==V.A7R(g.toString(),g.toString().length,99973);g++)c[t.safeClickTouchEvent]=u,d+=2;1321801119!==V.A7R(d.toString(),d.toString().length,96761)&&(c[t.safeClickTouchEvent]=u),n.push(c)}else"onpointerup"in document&&!t.noPointerEvents?("pointer","d","o","wn",e.addEventListener("pointerdown",m(r,!0)),e.addEventListener("pointermove",m(r)),e.addEventListener("pointerup",l),c.pointerup=l,a.absorbDownEvent&&(e.addEventListener("pointerdown",h),c.pointerdown=h),n.push(c)):("to","u","c","hstart",e.addEventListener("mousedown",m(r,!0)),e.addEventListener("mousemove",m(r)),e.addEventListener("touchstart",m(r,!0)),e.addEventListener("touchmove",m(r)),e.addEventListener("mouseup",s),e.addEventListener("touchend",o),c.mouseup=s,c.touchend=o,a.absorbDownEvent&&("moused","own",e.addEventListener("mousedown",h),c.mousedown=h,e.addEventListener("touchstart",h),c.touchstart=h),n.push(c))},t.clearSafeClickTouches=function(e){var t,i,a,r;t=e.safeClickTouchEvents,i=2;for(var n=1;227582252!==V.A7R(n.toString(),n.toString().length,77633);n++){if(-t)return;i+=2}if(223872765===V.E7R(i.toString(),i.toString().length,56379)||t){for(var s=0;s<t.length;s++)for(var o in a=t[s])r=a[o],e.removeEventListener(o,r);e.safeClickTouchEvents=null}},t.safeDrag=function(e,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;function x(e){return function(a){var r,n;g||(g=!0,t.ChartEngine.ignoreTouch=!0,r=function(e){V.n6n(),e&&e.preventDefault&&e.preventDefault(),v.recentlyDragged=!0,e.displacementX=d(e)-f,e.displacementY=p(e)-y,i.move(e)},i.move&&document.body.addEventListener(e.move,r),V.n6n(),n=function(a){t.ChartEngine.ignoreTouch=!1,i.move&&document.body.removeEventListener(e.move,r),document.body.removeEventListener(e.up,n),a.displacementX=d(a)-f,a.displacementY=p(a)-y,i.up&&i.up(a),V.n6n(),setTimeout((function(){v.recentlyDragged=!1}),50)},document.body.addEventListener(e.up,n),setTimeout((function(){V.n6n(),g=!1}),m),f=d(a),y=p(a),i.down&&i.down(a))}}return r="tou",r+="chmove",n="touchs",n+="ta",n+="r",n+="t",s="tou",s+="chs",s+="t",s+="art",o="point",o+="erm",o+="ove",l="p",l+="ointer",l+="down",h="mousedow",h+="n",c="p",c+="a",c+="geY",d=(u=function(e,t){return V.n6n(),function(i){if("un","d","efi","ned",i.touches){if(i.touches.length>0)return i.touches[0][e];if(i.changedTouches&&i.changedTouches.length>0)return V.j0c(10),i.changedTouches[V.g0c("0",0)][e]}return"undefined"!==a(i[e])?i[e]:i[t]}})("pageX","clientX"),p=u(c,"clientY"),"function"==typeof i&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},m=100,g=!1,f=0,y=0,V.D6n(),v={recentlyDragged:!1},e.addEventListener(h,x({down:"mousedown",move:"mousemove",up:"mouseup"})),e.addEventListener(l,x({down:"pointerdown",move:o,up:"pointerup"})),e.addEventListener(s,x({down:n,move:r,up:"touchend"}),{passive:!1}),v},t.inputKeyEvents=function(e,t){V.n6n(),e.addEventListener("keyup",(function(i){switch(i.keyCode){case 13:t();break;case 27:e.value=""}}),!1)},t.fixScreen=function(){V.n6n(),window.scrollTo(0,0)},t.setCaretPosition=function(e,i){var a;if(e.style.zIndex=5e3,V.D6n(),e.setSelectionRange){t.focus(e);try{e.setSelectionRange(i,i)}catch(e){}}else e.createTextRange&&("cha","ra","cter",(a=e.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",i),a.select())},t.setValueIfNotActive=function(e,t){V.D6n(),document.activeElement!=e&&(e.value=t)},t.hideKeyboard=function(e){var t;V.D6n(),"INPUT"!=(t=document.activeElement).tagName&&"TEXTAREA"!=t.tagName||(t.blur(),window.focus(),e&&(e===document.body||document.body.contains(e))&&e.focus())},t.smartHover=function(){var e,t,i;if("c","iq-las","t-intera","ction",document&&!document.documentElement.hasAttribute("ciq-last-interaction")){e=!1,document.addEventListener("touchend",(function(i){"t","ouch",clearTimeout(t),e=!0,"touch"!=document.documentElement.getAttribute("ciq-last-interaction")&&r("touch");t=setTimeout((function(){e=!1}),500)}),!1),document.addEventListener("mouseover",(function(t){"mou","s","e",e||r("mouse")}),!1),-748716808,-2079567876,i=2;for(var a=1;-748716808!==V.E7R(a.toString(),a.toString().length,85852);a++)r(""),i+=2;-2079567876!==V.E7R(i.toString(),i.toString().length,29796)&&r("")}function r(e){V.n6n(),document.documentElement.setAttribute("ciq-last-interaction",e)}},t.translatableTextNode=function(e,t,i){var a;return e.translationCallback?((a=document.createElement("translate")).setAttribute("original",t),a.innerHTML=e.translationCallback(t,i),a):document.createTextNode(t)},t.climbUpDomTree=function(e,t){var i;if(!(e instanceof HTMLElement))return null;for(i=[];e;)t&&!e.matches(t)||i.push(e),e=e.parentElement;return i},t.guaranteedSize=function(e){var t,i;if(V.D6n(),e===document&&(e=window),!e.nodeType)return{width:e.innerWidth,height:e.innerHeight};if(!e||e.nodeType>1)return{};for(t=e.offsetWidth,i=e.offsetHeight;!t||!i;){if("B","ODY","BODY"===e.tagName||e===window){t||(t=window.innerWidth),i||(i=window.innerHeight);break}e=e.parentElement,t||(t=e.offsetWidth),i||(i=e.offsetHeight)}return{width:t,height:i}},t.elementDimensions=function(e,t){var i,a,r,n,s;if("w","i","d","th",!e||1!==e.nodeType)return{};for(var o in i=getComputedStyle(e),a={width:parseFloat(i.width),height:parseFloat(i.height)},n=["width","height"],r={margin:{},border:{},padding:{}})"bo","rd","e","r",s="border"==o?"Width":"",r[o]={width:parseFloat(i[o+"Left"+s])+parseFloat(i[o+"Right"+s]),height:parseFloat(i[o+"Top"+s])+parseFloat(i[o+"Bottom"+s])};return t&&t.margin&&n.forEach((function(e){V.n6n(),a[e]+=r.margin[e]})),t&&"content-box"===i.boxSizing?(t.padding&&n.forEach((function(e){V.D6n(),a[e]+=r.padding[e]})),t.border&&n.forEach((function(e){V.D6n(),a[e]+=r.border[e]}))):"border-box"===i.boxSizing&&(t&&t.padding||n.forEach((function(e){V.D6n(),a[e]-=r.padding[e]})),t&&t.border||n.forEach((function(e){V.n6n(),a[e]-=r.border[e]}))),a},t.resizeObserver=function(e,t,i,a){return a?"undefined"!=typeof ResizeObserver?i||(i=new ResizeObserver(t)).observe(e):(i&&clearInterval(i),i=setInterval(t,a)):(i&&("undefined"!=typeof ResizeObserver?i.disconnect():clearInterval(i)),i=null),V.D6n(),i},t.getLines=function(e,t,i){var a,r,n,s,o;a=t.split(" "),r=[],V.D6n(),n="",s=!1;for(var l=0;l<a.length;l++)if(o=a[l],e.measureText(n+o).width<i?(s&&(n+=" "),s=!0,n+=o):(r.push(n),n=o),l===a.length-1){r.push(n);break}return r},t.alert=function(e){"undefined"!=typeof window?window.alert(e):console.log(e)},t.localStorage="undefined"!=typeof localStorage?localStorage:{},t.privateBrowsingAlert=!1,t.localStorageSetItem=function(e,i){try{t.localStorage.setItem(e,i)}catch(e){t.privateBrowsingAlert||(t.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),t.privateBrowsingAlert=!0)}}},d=function(e){var t,i;V.D6n(),(t=e.CIQ).ChartEngine=function(e){var r;for(var n in"c","h","ar","t","unde","fi","ned",e?"undefined"!=("undefined"==typeof HTMLDivElement?"undefined":a(HTMLDivElement))&&e.constructor==HTMLDivElement&&(e={container:e}):e={container:null},i)this[n]=t.clone(t.ChartEngine.prototype[n]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},this.grabStartCandleWidth=0,this.grabStartZoom=0,this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},this.moveA=-1,this.moveB=-1,this.touchStartTime=-1,this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer=null,this.styles={},this.plugins={},this.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),this.chart=new t.ChartEngine.Chart,(r=this.chart).name="chart",r.yAxis.name="chart",r.canvas=null,r.tempCanvas=null,r.container=e.container,t.Market&&(r.market=new t.Market),this.charts.chart=r,t.extend(this,e),e.container&&(this.registerHTMLElements&&this.registerHTMLElements(),r.width=r.container.clientWidth-r.yAxis.width,this.setCandleWidth(this.layout.candleWidth,r),r.canvasHeight=r.container.clientHeight),this.construct()},t.ChartEngine.drawingLine=!1,t.ChartEngine.resizingPanel=null,t.ChartEngine.crosshairX=0,t.ChartEngine.crosshairY=0,t.ChartEngine.useAnimation=!0,t.ChartEngine.enableCaching=!1,t.ChartEngine.ignoreTouch=!1,t.ChartEngine.useOldAndroidClear=!0,t.ChartEngine.currentVectorParameters={},t.ChartEngine.defaultDisplayTimeZone=null,t.ChartEngine.pluginBasePath="plugins/",t.ChartEngine.registeredContainers=[],t.ChartEngine.prototype.construct=function(){this.createChartPanel&&("c","h","a","rt",this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),V.j0c(24),this.cx=V.g0c(0,"0"),this.cy=0,this.micropixels=0,this.callbackListeners={doubleTap:[],doubleClick:[],drawing:[],drawingEdit:[],layout:[],longhold:[],move:[],newChart:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},this.longHoldTime=700},i={yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:200,minimumZoomTicks:9,allowZoom:!0,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(e){return e},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:t.isMobile||t.isSurface&&t.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,doubleClickTime:250,yaxisLabelStyle:"roundRectArrow",axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,resizeDetectMS:1e3,xAxisAsFooter:!0,xaxisHeight:30,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(e,t,i){V.D6n(),e(i)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:t.WEEK,periodicity:1,interval:5,timeUnit:"minute"},{rangeInMS:t.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:t.YEAR,periodicity:1,interval:"day"},{rangeInMS:t.DECADE,periodicity:1,interval:"week"},{rangeInMS:10*t.DECADE,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:t.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:5*t.MINUTE},{interval:30,timeUnit:"minute",rangeInMS:30*t.MINUTE},{interval:60,timeUnit:"minute",rangeInMS:60*t.MINUTE},{interval:"day",rangeInMS:t.DAY},{interval:"month",rangeInMS:t.MONTH},{interval:"year",rangeInMS:t.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{},setSpan:{},outliers:!1},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:10,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:0,maxWait:1e3,maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},t.extend(t.ChartEngine.prototype,i),V.A0c(0),t.ChartEngine.NONE=V.e0c("0",0),t.ChartEngine.CLOSEUP=1,t.ChartEngine.CLOSEDOWN=2,t.ChartEngine.CLOSEEVEN=4,t.ChartEngine.CANDLEUP=8,t.ChartEngine.CANDLEDOWN=16,t.ChartEngine.CANDLEEVEN=32},p=function(e){var t;(t=e.CIQ).convertFutureMonth=function(e){var t;if("1","2",(t=e.toString()).length<=0||t.length>2)return"";switch(t){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"11";case"Z":return"1","2","12"}return V.D6n(),t},V.D6n(),t.money=function(e,i,a){return a||(a="$"),3==a.length&&(a+=" "),i||0===i||(i=2),V.n6n(),a+t.commas((Math.round(1e4*e)/1e4).toFixed(i))},t.convertCurrencyCode=function(e){return"E","C","$","N","Z","$","K","",{JPY:"",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN",CZK:"K",DKK:"kr",EUR:"",GBP:"",HKD:"HK$",HUF:"Ft",ILS:"",INR:"",KRW:"",MXN:"MX$",NOK:"kr",NZD:"NZ$",PLN:"z",RUB:"",SAR:"",SEK:"kr",SGD:"S$",THB:"",TRY:"",TWD:"NT$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF",ZAR:"R"}[e]||e},t.commas=function(e){return V.D6n(),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},t.cleanPeriodicity=function(e,t,i){return"ye","ar",V.n6n(),"mi","nute","t","i","ck",isNaN(e)&&(e=1),t||(t=1),!isNaN(t)&&i?"minute"!=i&&"second"!=i&&"millisecond"!=i&&(t=i,i=null):"tick"==t?i=null:i||isNaN(t)||(i="minute"),"year"==t&&("mo","n","th",t="month",e||(e=1),V.j0c(8),e=V.e0c(12,e)),{period:e,interval:t,timeUnit:i}},t.readablePeriodicity=function(e){var i,r;return"min","ute","num","b","er",i=e.layout.periodicity,r=e.layout.interval,"number"==typeof e.layout.interval&&e.layout.timeUnit?(i=e.layout.interval*e.layout.periodicity,r=e.layout.timeUnit):"number"!=a(e.layout.interval)||e.layout.timeUnit||(i=e.layout.interval*e.layout.periodicity,r="minute"),V.D6n(),i%60==0&&"minute"==r&&(i/=60,r="hour"),i+" "+e.translateIf(t.capitalize(r))},t.fixPrice=function(e){var t;if(V.n6n(),!e&&0!==e)return null;for(var i=(t=e.toFixed(10)).length-1;i>1&&"0"==t.charAt(i);i--);return V.A0c(5),t=t.substring(0,V.g0c(i,1)),parseFloat(t)},t.condenseInt=function(e){var t,i=V;return null==e?"":e===1/0||e===-1/0?"n/a":(i.A0c(29),t=i.e0c(0,e),e=isNaN(e)?e.toString():(e=Math.abs(e))>1e12?Math.round(e/1e11)/10+"t":e>1e11?Math.round(e/1e9)+"b":e>1e10?(Math.round(e/1e8)/10).toFixed(1)+"b":e>1e9?(Math.round(e/1e7)/100).toFixed(2)+"b":e>1e8?Math.round(e/1e6)+"m":e>1e7?(Math.round(e/1e5)/10).toFixed(1)+"m":e>1e6?(Math.round(e/1e4)/100).toFixed(2)+"m":e>1e5?Math.round(e/1e3)+"k":e>1e4?(Math.round(e/100)/10).toFixed(1)+"k":e>1e3?(Math.round(e/10)/100).toFixed(2)+"k":e.toString(),t&&(i.j0c(5),e=i.e0c("-",e)),e)},t.calculateTradingDecimalPlaces=function(e){var t,i,r,n,s,o,l,h,c,u;if(t=e.chart,V.D6n(),i=2,V.j0c(4),r=V.g0c(107186720,"50"),(n=t.masterData)&&n.length>r)for(var d=2;d<r&&("n","u","mb","er",!((s=n.length-d)<0));d++)(o=n[s]).Close&&"number"==a(o.Close)&&-1!=(h=(l=o.Close.toString()).indexOf("."))&&(c=l.length-h-1)>i&&(i=c);return i>(u=t.yAxis.maxDecimalPlaces)&&null!==u&&(i=u),i},t.minMax=function(e,t,i,r){var n,s,o,l,h,c,u;n=Number.MAX_VALUE,s=-1*Number.MAX_VALUE,i||(i="Close"),o=r?"High":i,l=r?"Low":i;for(var d=0;d<e.length;d++)(h=e[d])&&((c=h[t])||0===c)&&(u=c,"object"===a(c)&&(u=c[o]),isNaN(u)||!u&&0!==u||(s=Math.max(s,u)),"object"===a(c)&&(u=c[l]),isNaN(u)||!u&&0!==u||(n=Math.min(n,u)));return[n,s]},t.symbolEqual=function(e,t){var i,r;return"objec","t",!(!e||!t)&&("object"!=a(e)&&(e={symbol:e}),"object"!=a(t)&&(t={symbol:t}),"function"==typeof e.equals?e.equals(t):(i=e.symbol,r=t.symbol,i&&(i=i.toUpperCase()),r&&(r=r.toUpperCase()),i==r&&e.source==t.source))},t.addMemberToMasterdata=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A;function T(e){var t,i,a,r=V;if(t=u,i=p.length-1,p[i].DT<e)return r.j0c(30),void(u=r.e0c(i,"1",0));if(+p[i].DT!=+e){for(u++,a=0;++a<100;){switch(n()){case 0:return;case 1:t=u;break;case-1:i=u}r.j0c(31),u=Math.round(r.e0c(i,"2",t))}a>=100&&("!!!Warning: addMemberToMasterd","ata() did not find inserti","on point.",console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),u=p.length-1)}else u=i;function n(){return+p[u].DT==+e?0:p[u].DT<e?1:(r.D6n(),p[u-1].DT>e?-1:(+p[u-1].DT==+e&&u--,0))}}function M(e,i){var a,n,h;if(V.D6n(),s&&s.length)if("*"==s[0])t.extend(e,i);else for(var c=0;c<s.length;c++)e[s[c]]=i[s[c]];else if(o){if(void 0!==i.Value)return void(e[r]=i.Value);e[r]="aggregate"==o?P(e[r],i):i,"number"==typeof(a=e[r]).Close&&("number"!=typeof a.Open&&(a.Open=a.Close),n=Math.max(a.Open,a.Close),h=Math.min(a.Open,a.Close),("number"!=typeof a.High||a.High<n)&&(a.High=n),("number"!=typeof a.Low||a.Low>h)&&(a.Low=h)),a.Volume&&"number"!=typeof a.Volume&&(a.Volume=parseInt(a.Volume,10))}else l?e[r]=i[l]:v&&y&&void 0!==i[y]?e[r]=i[y]:m.adj&&void 0!==i.Adj_Close?e[r]=i.Adj_Close:void 0!==i.Close?e[r]=i.Close:void 0!==i.Value?e[r]=i.Value:e[r]=i[r]}function P(e,t){var i;if("o","bjec","t",!e||"object"!=a(e))return e=t;for(var r in i={Close:e.Close,High:e.High,Low:e.Low,Open:e.Open,Volume:e.Volume},e=t,i)"n","umber","nu","mb","e","r",null===e.Close?void 0!==e[r]&&(e[r]=null):"number"!==a(e[r])?e[r]=i[r]:"number"===a(i[r])&&("Hi","gh","Open"==r?e.Open=i.Open:"Low"==r&&e.Low>i.Low?e.Low=i.Low:"High"==r&&e.High<i.High?e.High=i.High:"Volume"==r&&(e.Volume+=i.Volume));return e}if(e.constructor===t.ChartEngine&&(e={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),i=e.stx,r=e.label,n=e.data,s=e.fields,o=e.createObject,l=e.fieldForLabel,h=e.chart?e.chart:i.chart,e.noCleanupDates||i.doCleanupDates(n,i.layout.interval),c=[],i.getSeries&&(c=i.getSeries({symbol:r,chart:h})),n&&n.constructor==Object&&(n=[n]),n&&n.length){for(u=0,d=0,p=h.masterData,m=i.layout,p||(p=[]),y=h&&h.defaultPlotField||null,v=i.mainSeriesRenderer&&!i.mainSeriesRenderer.highLowBars,x=m.chartType,!v&&x&&(b=t.Renderer.produce(x,{}))&&(v=!b.highLowBars),S=t.yyyymmddhhmmssmmm;n&&u<p.length&&d<n.length;){if(C="unde",C+="fi",C+="ned",f=n[d],g=p[u],f.DT&&a(f.DT)!=C?(k="nu",k+="mber",a(f.DT)==k&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=S(f.DT))):f.DT=t.strToDateTime(f.Date),0===d)for(var F=0;F<c.length;F++)(!c[F].endPoints.begin||c[F].endPoints.begin>f.DT)&&(c[F].endPoints.begin=f.DT);+f.DT!=+g.DT?f.DT<g.DT?p.splice(u,0,{DT:f.DT,Date:f.Date}):T(f.DT):(M(g,f),d++,u++)}if(u>=p.length)for(;n&&d<n.length;)(f=n[d]).DT&&void 0!==f.DT?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=S(f.DT))):f.DT=t.strToDateTime(f.Date),M(g={DT:f.DT,Date:f.Date},f),p.push(g),d++;if(e.fillGaps&&p.length)if(w={noCleanupDates:!0,cleanupGaps:e.fillGaps},s)for(var _=0;_<s.length;_++)w.field=s[_],i.doCleanupGaps(p,h,w);else w.field=r,i.doCleanupGaps(p,h,w);for(var E=0;E<c.length;E++)(!(D=c[E].endPoints).end||!r||D.end<=g[r].DT)&&(D.end=r?g[r].DT:g.DT,A=r||c[E].parameters&&c[E].parameters.field||h.defaultPlotField,c[E].lastQuote=i.getFirstLastDataRecord(p,A,!0));i.setMasterData(p,h,{noCleanupDates:!0})}}},m=function(e){var t;t=e.CIQ,Math.easeInOutQuad=function(e,t,i,a){var r=V;return r.A0c(11),(e/=r.g0c(2,a))<1?(r.A0c(32),r.g0c(2,t,e,e,i)):(r.D6n(),e--,r.j0c(33),r.e0c(2,i,1,t,e,2,e))},Math.easeInOutCubic=function(e,t,i,a){var r=V;return r.j0c(11),(e/=r.e0c(2,a))<1?(r.A0c(34),r.e0c(e,e,i,e,2,t)):(e-=2,r.A0c(35),r.e0c(i,t,e,2,e,2,e))},Math.easeOutCubic=function(e,t,i,a){return e/=a,V.n6n(),e--,V.A0c(36),V.e0c(e,e,1,i,t,e)},t.xor=function(e,t){var i,a;return V.D6n(),i=!e,a=!t,V.A0c(37),V.e0c(i,a)},V.D6n(),t.round=function(e,t){return V.D6n(),Number(Math.round(e+"e"+t)+"e-"+t)},t.countDecimals=function(e){var i;return"num","b","e","r","number"!==a(e)||isNaN(e)?(V.j0c(4),V.g0c(664675712,"0")):Math.floor(e)===Number(e)?0:(i=e.toString().split("e-")).length>1?t.countDecimals(Number(i[0]))+Number(i[1]):i[0].indexOf(".")>-1?i[0].split(".")[1].length:(V.n6n(),0)},t.isValidNumber=function(e){return V.D6n(),isFinite(e)&&+e===e},t.log10=function(e){return Math.log(e)/Math.LN10},t.boxIntersects=function(e,t,i,a,r,n,s,o,l){var h,c,u,d,p,m,g,f;if(h="li",h+="ne",c="r",c+="ay",void 0!==arguments[9]&&console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels."),u=Math.min(e,i),d=Math.max(e,i),p=Math.min(t,a),m=Math.max(t,a),V.j0c(38),g=V.e0c(l,c),isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o))return!1;if(l!=h){if(r<u&&s<u&&(!g||r>s))return!1;if(r>d&&s>d&&(!g||r<s))return!1;if(n<p&&o<p&&(!g||n>o))return!1;if(n>m&&o>m&&(!g||n<o))return!1}function y(e,t){return V.D6n(),V.A0c(39),V.g0c(o,e,s,t,r,n,r,n)}return!((f={a:y(e,t),b:y(e,a),c:y(i,t),d:y(i,a)}).a>0&&f.b>0&&f.c>0&&f.d>0)&&!(f.a<0&&f.b<0&&f.c<0&&f.d<0)},t.linesIntersect=function(e,t,i,a,r,n,s,o,l){var h,c,u,d,p,m=V;if("r","a","y","ve","rtica","l","li","ne",m.j0c(39),h=m.g0c(a,n,t,o,r,i,e,s),m.A0c(39),c=m.g0c(e,o,i,n,s,r,s,r),m.j0c(39),u=m.g0c(e,a,i,t,i,r,s,e),0===h)return 0===c&&0===u;if(m.A0c(11),d=m.g0c(h,c),m.j0c(11),p=m.e0c(h,u),"segment"==l){if(d>=0&&d<=1&&p>=0&&p<=1)return!0}else if("line"==l||"horizontal"==l||"vertical"==l){if(d>=0&&d<=1)return!0}else if("ray"==l&&d>=0&&d<=1&&p>=0)return!0;return!1},t.yIntersection=function(e,t){var i,a,r,n,s,o,l,h,c,u=V;if(i=e.x0,a=e.x1,r=t,n=t,u.D6n(),s=e.y0,o=e.y1,0,1e4,u.j0c(39),l=u.e0c(o,n,a,1e4,r,s,i,0),u.A0c(39),h=u.g0c(i,1e4,s,n,0,r,0,r),u.A0c(11),c=u.g0c(l,h),0===l){if(0!==h)return null;c=1}return u.A0c(40),u.g0c(o,c,s,s)},t.xIntersection=function(e,t){var i,a,r,n,s,o,l,h,c,u=V;if(i=e.x0,a=e.x1,0,1e4,r=e.y0,n=e.y1,s=t,o=t,u.A0c(39),l=u.g0c(n,1e4,a,o,0,r,i,s),u.j0c(39),h=u.g0c(i,o,r,1e4,s,0,s,0),u.j0c(11),c=u.g0c(l,h),0===l){if(0!==h)return null;c=1}return u.A0c(40),u.e0c(a,c,i,i)},t.intersectLineLineX=function(e,t,i,a,r,n,s,o){var l,h,c,u=V;return u.j0c(39),l=u.g0c(e,o,i,n,s,r,s,r),u.n6n(),u.j0c(39),h=u.e0c(a,n,t,o,r,i,e,s),u.j0c(11),c=u.g0c(h,l),u.j0c(40),u.e0c(t,c,e,e)},t.intersectLineLineY=function(e,t,i,a,r,n,s,o){var l,h,c,u=V;return u.j0c(39),l=u.g0c(e,o,i,n,s,r,s,r),u.A0c(39),h=u.e0c(a,n,t,o,r,i,e,s),u.j0c(11),u.D6n(),c=u.e0c(h,l),u.j0c(40),u.e0c(a,c,i,i)}},g=function(e){var t;(t=e.CIQ).deleteRHS=function(e,t){var i;for(var a in i=!1,e)e[a]==t&&(delete e[a],i=!0);return i},t.scrub=function(e,t){for(var i in V.n6n(),e)void 0===e[i]&&delete e[i],t&&null===e[i]&&delete e[i]},t.dataBindSafeAssignment=function(e,i){for(var a in t.extend(e,i),V.n6n(),e)void 0===i[a]&&(e[a]=void 0)},t.clone=function(e,i){var r;if(null===e||"object"!=a(e))return e;if((r=e.constructor)==Date||r==RegExp||r==String||r==Number||r==Boolean)return new r(e.valueOf());if(V.n6n(),r==Function)return function(){return e.apply(this,arguments)};if(!i)try{i=new r}catch(t){i=Object.create(Object.getPrototypeOf(e))}for(var n in e)i[n]=i[n]!==e[n]?t.clone(e[n],null):i[n];return i},t.shallowClone=function(e){var t;if(V.D6n(),!e)return e;if(e.constructor==Array){t=new Array(e.length);for(var i=0;i<e.length;i++)t[i]=e[i];return t}for(var a in t={},e)t[a]=e[a];return t},t.ensureDefaults=function(e,t){for(var i in t)void 0===e[i]&&(e[i]=t[i]);return e},t.transferObject=function(e,t){var i;for(i in e)e.hasOwnProperty(i)&&delete e[i];for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},t.equals=function(e,i,r){if(!e&&i)return!1;if(e&&!i)return!1;if(a(e)!==a(i))return!1;for(var n in e)if(!r||!r[n])if("object"!==a(e[n])){if(i[n]!=e[n])return!1}else if(!t.equals(e[n],i[n]))return!1;return!0},t.isEmpty=function(e){for(var t in V.n6n(),e)if(e.hasOwnProperty(t))return!1;return!0},t.first=function(e){for(var t in e)return t;return null},t.last=function(e){var t;for(var i in t=null,e)t=i;return t},t.objLength=function(e){var t;if(!e)return 0;for(var i in V.j0c(1),t=V.e0c("0",18628352),e)t++;return t},t.deriveFromObjectChain=function(e,t){var i,a;if(-1==t.indexOf("."))return{obj:e,member:t};i=t.split(".");for(var r=0;r<i.length-1;r++)e[a=i[r]]||0===e[a]||(e[a]={}),e=e[a];return{obj:e,member:i[r]}},t.createObjectChainNames=function(e,t){var i;i=[];for(var a=0;a<t.length;a++)i.push(e+"--\x3e"+t[a]);return i},t.existsInObjectChain=function(e,t){var i,a;if(-1==t.indexOf("--\x3e"))return e[t]||0===e[t]?{obj:e,member:t}:null;i=t.split("--\x3e");for(var r=0;r<i.length-1;r++){if(!e[a=i[r]]&&0!==e[a])return null;e=e[a]}return e[a=i[r]]||0===e[a]?{obj:e,member:a}:null},t.derivedFrom=function(e,t){return V.D6n(),!!t.isPrototypeOf(e)||e instanceof t},t.replaceFields=function(e,i){var r,n,s,o,l;if(!e)return e;for(var h in r={},e)if(n=e[h],(s=i[h])||(s=h),n&&"object"==a(n))if(n.constructor==Array){o=r[s]=new Array(n.length);for(var c=0;c<o.length;c++)"object"==a(l=n[c])?o[c]=t.replaceFields(l,i):o[c]=l}else r[s]=t.replaceFields(n,i);else r[s]=n;return r},V.D6n(),t.removeNullValues=function(e){var i;for(var a in i=t.clone(e))i[a]||delete i[a];return i},t.reverseObject=function(e){var t;for(var i in t={},e)t[e[i]]=i;return t},t.getFromNS=function(e,t,i){var a,r,n;if(e){a=e,r=t.split(".");for(var s=0;s<r.length&&void 0!==a[n=r[s]];s++)a=a[n];if(s===r.length)return a}return V.D6n(),i},t.getFnFromNS=function(e,i,a){return V.n6n(),t.getFromNS(e,i,(function(){return a}))},t.get=function(e,i){return t.getFromNS(t,e,i)},t.getFn=function(e,i){return t.getFromNS(t,e,(function(){return V.n6n(),i}))}},f=function(e){var t;(t=e.CIQ).Plotter=function(){this.seriesArray=[],V.D6n(),this.seriesMap={}},t.extend(t.Plotter.prototype,{Series:function(e,i,a,r,n,s){this.name=e,this.strokeOrFill=i,V.n6n(),this.color=a,this.moves=[],this.text=[],(!r||r>1||r<0)&&(r=1),this.opacity=r,(!n||n>25||n<1)&&(n=1),this.width=n,this.pattern=t.borderPatternToArray(n,s)},newSeries:function(e,t,i,a,r){var n;n=i.constructor==String?new this.Series(e,t,i,a,r):new this.Series(e,t,i.color,i.opacity,r,i.borderTopStyle),this.seriesArray.push(n),V.D6n(),this.seriesMap[e]=n},reset:function(e){var t;for(var i in V.D6n(),this.seriesMap)e&&e!=i||(t=this.seriesMap[i])&&(t.moves=[],t.text=[])},moveTo:function(e,t,i){this.seriesMap[e].moves.push({action:"moveTo",x:t,y:i})},lineTo:function(e,t,i){var a,r;a=this.seriesMap[e],V.n6n(),r=a.pattern,a.moves.push({action:"lineTo",x:t,y:i,pattern:r})},dashedLineTo:function(e,t,i,a){V.D6n(),this.seriesMap[e].moves.push({action:"lineTo",x:t,y:i,pattern:a})},quadraticCurveTo:function(e,t,i,a,r){var n,s;V.n6n(),s=(n=this.seriesMap[e]).pattern,n.moves.push({action:"quadraticCurveTo",x0:t,y0:i,x:a,y:r,pattern:s})},bezierCurveTo:function(e,t,i,a,r,n,s){var o,l;V.D6n(),l=(o=this.seriesMap[e]).pattern,o.moves.push({action:"bezierCurveTo",x0:t,y0:i,x1:a,y1:r,x:n,y:s,pattern:l})},addText:function(e,t,i,a,r,n,s){V.D6n(),this.seriesMap[e].text.push({text:t,x:i,y:a,bg:r})},drawText:function(e,t){for(var i,a,r,n,s=0;s<t.text.length;s++)(i=t.text[s]).bg&&(a=i.width?i.width:e.measureText(i.text).width,r=i.height?i.height:12,n=e.fillStyle,e.fillStyle=i.bg,"right"==e.textAlign?e.fillRect(i.x,i.y-r/2,-a,-r):e.fillRect(i.x,i.y-r/2,a,r),e.fillStyle=n),e.fillText(i.text,i.x,i.y)},draw:function(e,t){var i,a,r,n,s,o;i=e.lineWidth,a=e.fillStyle,r=e.strokeStyle,n=e.globalAlpha;for(var l=0;l<this.seriesArray.length;l++)if(s=this.seriesArray[l],!t||s.name==t){e.beginPath(),e.lineWidth=s.width,e.globalAlpha=s.opacity,e.fillStyle=s.color,e.strokeStyle=s.color,e.save();for(var h=0;h<s.moves.length;h++)"quadrat","icCurveTo",(o=s.moves[h]).pattern?(e.setLineDash(o.pattern),V.j0c(1),e.lineDashOffset=V.g0c("0",368616512)):e.setLineDash([]),"quadraticCurveTo"==o.action?e[o.action](o.x0,o.y0,o.x,o.y):"bezierCurveTo"==o.action?e[o.action](o.x0,o.y0,o.x1,o.y1,o.x,o.y):e[o.action](o.x,o.y);"fill"==s.strokeOrFill?e.fill():e.stroke(),e.closePath(),e.restore(),this.drawText(e,s),e.lineWidth=1}e.lineWidth=i,e.fillStyle=a,e.strokeStyle=r,e.globalAlpha=n}},!0)},y=function(e){var t;(t=e.CIQ).Renderer=function(){},t.Renderer.produce=function(e,i){var a,r;if(a=null,e)for(var n in t.Renderer)if((r=t.Renderer[n]).requestNew&&(a=r.requestNew(e.split("_"),i)),a)return a;return i.type="line",new t.Renderer.Lines({params:i})},t.Renderer.colorFunctions={},t.Renderer.registerColorFunction=function(e,i){V.D6n(),t.Renderer.colorFunctions[e]=i},t.Renderer.unregisterColorFunction=function(e){V.D6n(),delete t.Renderer.colorFunctions[e]},t.Renderer.prototype.adjustYAxis=function(){},t.Renderer.prototype.draw=function(){},t.Renderer.prototype.drawIndividualSeries=function(e,t){},t.Renderer.prototype.construct=function(e){var i;e||(e={}),i=e.params?e.params:{},V.n6n(),i.name||(i.name=t.uniqueID()),i.heightPercentage||(i.heightPercentage=.7),i.opacity||(i.opacity=1),!1!==i.highlightable&&(i.highlightable=!0),i.panel||(i.panel="chart"),i.yAxis&&(i.yAxis=new t.ChartEngine.YAxis(i.yAxis),i.yAxis.name||(i.yAxis.name=i.name)),this.cb=e.callback,this.params=i,this.seriesParams=[],this.caches={},this.colors={}},t.Renderer.prototype.attachSeries=function(e,i){var r,n,s,o,l,h,c,u,d,p,m=V;if("objec","t","a","uto",!(r=this.stx))return this;if((n=r.chart.series[e])||(n={parameters:{}}),s=this.params,o=n.parameters,l={id:e,chartType:s.type,display:o.display,border_color_up:s.defaultBorders?"auto":null,fill_color_up:o.color,opacity_up:s.opacity,border_color_down:s.defaultBorders?"auto":null,fill_color_down:o.color,opacity_down:s.opacity,color:o.color,symbol:o.symbol,symbolObject:t.clone(o.symbolObject)},"string"==typeof i)l.color=l.fill_color_down=l.fill_color_up=i;else if("object"==a(i)){for(var g in i)l[g]=i[g];h=l.color,c=l.border_color,h&&(l.fill_color_up||(l.fill_color_up=h),l.fill_color_down||(l.fill_color_down=h),l.fill_color_even||(l.fill_color_even=h)),c&&(l.border_color_up||(l.border_color_up=c),l.border_color_down||(l.border_color_down=c),l.border_color_even||(l.border_color_even=c))}for(l.symbol&&l.field!=l.symbol&&(l.subField=l.field,l.field=l.symbol),l.id||(l.id=t.uniqueID()),u=0;u<this.seriesParams.length;++u)if(this.seriesParams[u].id===l.id){this.removeSeries(l.id,!0);break}return m.n6n(),this.seriesParams.splice(u,0,l),l.fill_color_up!=l.fill_color_down?(" d","own",m.j0c(5),this.colors[m.e0c(e," up")]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display+" up":e+" up"},m.j0c(5),this.colors[m.g0c(e," dn")]={color:l.fill_color_down,opacity:l.opacity_down,display:l.display?l.display+" down":e+" down"}):this.colors[e]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display:e},d=s.panel,r.panels[d]?s.yAxis?(s.yAxis=r.addYAxis(r.panels[d],s.yAxis),s.yAxis.needsInitialPadding=!0,o.yAxis=s.yAxis,r.resizeChart()):l.yAxis&&(s.yAxis=l.yAxis):((p=s.yAxis)||((p=new t.ChartEngine.YAxis).needsInitialPadding=!0),p.name=d,r.createPanel(d,d,null,null,p)),this},t.Renderer.prototype.removeSeries=function(e,t){var i,a,r,n,s,o,l,h,c=V;for(var u in i=null,a=!1,(n=(r=this.stx).chart).seriesRenderers){s=n.seriesRenderers[u];for(var d=0;d<s.seriesParams.length;d++)(o=s.seriesParams[d]).id==e&&this===s?i=d:!o.isComparison||o.panel!=n.panel.name||o.yAxis&&o.yAxis!=n.yAxis||(a=!0)}if(null!==i&&(n.forcePercentComparison&&!a&&this.seriesParams[i].isComparison&&"linear"!=r.layout.chartScale&&r.setChartScale(),this.seriesParams.splice(i,1)),c.j0c(5),delete this.colors[c.e0c(e," up")],c.A0c(5),delete this.colors[c.g0c(e," dn")],delete this.colors[e],!t){for(var p in n.seriesRenderers){h=n.seriesRenderers[p];for(var m=0;m<h.seriesParams.length;m++){if(h.seriesParams[m].id==e){l=!0;break}l=!1}if(l)break}!1!==l&&null===i||r.deleteSeries(e,n)}return r.deleteYAxisIfUnused(r.panels[this.params.panel],this.params.yAxis),r.resizeChart(),r.layout.symbols=r.getSymbols({"include-parameters":!0,"exclude-studies":!0}),r.changeOccurred("layout"),this},t.Renderer.prototype.getDependents=function(e){var t,i;for(var a in t=[],V.D6n(),e.chart.seriesRenderers)(i=e.chart.seriesRenderers[a]).params.dependentOf==this.params.name&&t.push(i);return t},t.Renderer.prototype.undraggable=function(e){return this==e.mainSeriesRenderer||this.params.dependentOf==e.mainSeriesRenderer.params.name},t.Renderer.prototype.removeAllSeries=function(e){var t;if(e||this===this.stx.mainSeriesRenderer){t=[];for(var i=0;i<this.seriesParams.length;i++)t.push(this.seriesParams[i].id);for(var a=0;a<t.length;a++)this.removeSeries(t[a])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),V.D6n(),this},t.Renderer.prototype.getYAxis=function(e){var t,i;if(V.D6n(),this.params)if(this.params.yAxis)t=this.params.yAxis;else{if(!(i=e.panels[this.params.panel]))return!1;t=i.yAxis}else t=e.chart.panel.yAxis;return t},t.Renderer.prototype.ready=function(){return this.stx.createDataSet(),V.D6n(),this.stx.draw(),this},t.Renderer.Lines=function(e){V.D6n(),this.construct(e);var i=this.params;if(i.type||(i.type="line"),!i.style)switch("stx_baseli","ne_","delt","a_mountain",i.type){case"mountain":i.baseline?i.style="stx_baseline_delta_mountain":i.colored?i.style="stx_colored_mountain_chart":i.style="stx_mountain_chart";break;default:"st","x_line_cha","rt",i.style="stx_line_chart"}this.supportsAnimation=!0,"wave"==i.type||"channel"==i.type?(i.step=i.vertex=i.baseline=i.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):"step"==i.type&&(i.step=!0);var r=i.baseline;r&&"object"===a(r)&&t.ensureDefaults(i.baseline,t.ChartEngine.Chart.prototype.baseline)},t.inheritsFrom(t.Renderer.Lines,t.Renderer,!1),t.Renderer.Lines.requestNew=function(e,i){var a,r,n,s,o,l;a=null,V.n6n(),r=i.step,n=i.colored,s=i.baseline,o=i.vertex;for(var h=0;h<e.length;h++)switch(l=e[h]){case"line":case"mountain":case"wave":case"channel":a=l;break;case"baseline":s=!0;break;case"colored":n=!0;break;case"step":r=!0;break;case"vertex":o=!0;break;case"delta":break;default:return null}return null!==a||s||r?new t.Renderer.Lines({params:t.extend(i,{type:a,step:r,colored:n,baseline:s,vertex:o})}):null},t.Renderer.Lines.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c;for(e=this.stx,i=this.stx.panels[this.params.panel].chart,a={},n=this.seriesParams,s=this.params.colorFunction,r=0;r<n.length;r++){if(o=n[r],this.params.colored){l=["_color_up","_color_down","_color"];for(var u=0;u<l.length;u++)(h=o["border"+l[u]])&&"auto"!=h&&(o["fill"+l[u]]=h);s||(s=d(o)),this.params.colorFunction=s}c={},i.series[o.id]&&(c=t.clone(i.series[o.id].parameters)),a[o.id]={parameters:t.extend(t.extend(c,this.params),o),yValueCache:this.caches[o.id]},this==e.mainSeriesRenderer&&i.customChart&&i.customChart.colorFunction&&(a[o.id].parameters.colorFunction=i.customChart.colorFunction)}function d(t){var i,a,r;return i=t.fill_color_up||e.getCanvasColor("stx_line_up"),a=t.fill_color_down||e.getCanvasColor("stx_line_down"),r=t.color||e.getCanvasColor("stx_line_chart"),function(e,t,n){return t.iqPrevClose||0===t.iqPrevClose?t.Close>t.iqPrevClose?i:t.Close<t.iqPrevClose?a:r:r}}for(r in e.drawSeries(i,a,this.params.yAxis,this),a)this.caches[r]=a[r].yValueCache},t.Renderer.Lines.prototype.drawIndividualSeries=function(e,i){var a,r,n,s,o,l;if("cha","nnel",!i.invalid&&(a=this.stx,r=e.context,n=null,s=i.colorFunction,o=a.panels[i.panel]||e.panel,"string"!=typeof s||(s=t.Renderer.colorFunctions[s]))){if(i.vertex&&(r.save(),r.lineJoin="bevel"),V.n6n(),"wave"==i.type)n=a.drawWaveChart(o,i);else if(i.baseline)n=a.drawBaselineChart(o,i);else if("mountain"==i.type)i.returnObject=!0,n=a.drawMountainChart(o,i,s);else if("channel"==i.type)i.returnObject=!0,n=a.drawChannelChart(o,s,i);else{-1167935007,-1990719450,l=2;for(var h=1;-1167935007!==V.A7R(h.toString(),h.toString().length,21174);h++)i.returnObject=!1,l+=2;-1990719450!==V.E7R(l.toString(),l.toString().length,70300)&&(i.returnObject=!0),n=a.drawLineChart(o,i.style,s,i)}return i.vertex&&(a.scatter(o,{yAxis:i.yAxis,field:i.symbol||i.field,subField:i.subField,symbol:i.symbol,color:i.vertex_color,highlight:i.highlight}),r.restore()),n}},t.Renderer.OHLC=function(e){var t;this.construct(e),t=this.params,V.n6n(),t.type||(t.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.histogram&&(t.type="candle",this.highLowBars=!1,t.volume=t.hollow=!1),"bar"==t.type&&(t.volume=t.hollow=t.histogram=!1),"candle"==t.type&&(t.hlc=t.colored=!1),t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.OHLC,t.Renderer,!1),t.Renderer.OHLC.requestNew=function(e,i){var a,r,n;V.D6n(),a=null,r=i.histogram;for(var s=0;s<e.length;s++)switch("histogra","m","ca","ndl","e",n=e[s]){case"candle":a=n;break;case"histogram":"can","d","le",r=!0,a="candle";break;default:return null}return null===a?null:new t.Renderer.OHLC({params:t.extend(i,{type:a,histogram:r})})},t.Renderer.OHLC.getChartParts=function(e,t){var i;return"ca","ndle","c","andle","ca","ndl","e","bord","er_","c","olor_up","s","had","ow","shado","w","stx_histogr","am","_e","ven","stx_histogram_d","own",8,16,V.j0c(1),[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:i=V.e0c("32",1120744800),fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:i,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},t.Renderer.OHLC.prototype.draw=function(){var e,i,a,r,n,s,o,l;for(e=this.stx,i=this.stx.panels[this.params.panel],V.D6n(),a=i.chart,r={},s=this.seriesParams,n=0;n<s.length;n++)o=s[n],l={},a.series[o.id]&&(l=t.clone(a.series[o.id].parameters)),r[o.id]={parameters:t.extend(t.extend(l,this.params),o)},this==e.mainSeriesRenderer&&a.customChart&&a.customChart.colorFunction&&(r[o.id].parameters.colorFunction=a.customChart.colorFunction);for(n in e.drawSeries(a,r,this.params.yAxis,this),r)r[n].yValueCache&&(this.caches[n]=r[n].yValueCache)},t.Renderer.OHLC.prototype.getColor=function(e,i,a,r,n,s){var o,l,h,c,u;return o=s||a.color,V.D6n(),l=this.params.yAxis||i.yAxis,!r||("border-l","e","ft-color",o=s||a.borderLeftColor||a["border-left-color"])?n?(h=e.pixelFromTransformedValue(l.highValue,i),isNaN(h)&&(V.A0c(10),h=V.e0c("0",0)),c=a.backgroundColor,o&&!t.isTransparent(o)?("to","p",(u=e.chart.context.createLinearGradient(0,h,0,2*l[l.flipped?"top":"bottom"]-h)).addColorStop(0,o),u.addColorStop(1,c),u):c):o:null},t.Renderer.OHLC.prototype.drawIndividualSeries=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M;if(V.D6n(),!i.invalid&&(a=this.stx,r=e.context,n=i.colorFunction,s=a.panels[i.panel]||e.panel,"string"!=typeof n||(n=t.Renderer.colorFunctions[n]))){if(o=a.layout.candleWidth-e.tmpWidth<=2&&e.tmpWidth<=3,1,V.j0c(2),V.g0c(2147483647,"2"),4,8,16,32,e.state.chartType||(e.state.chartType={}),l=e.state.chartType.pass={},h=a.colorByCandleDirection,i.colorBasis&&(h="open"==i.colorBasis),c=i.histogram,u=i.type,d=i.hollow,p=a.noWicksOnCandles[u],a.startClip(s.name),m=null,g={colors:[],cache:[]},f=[],n)"b","a","r",y={isHistogram:c,field:i.field,yAxis:i.yAxis,isVolume:i.volume,highlight:i.highlight},c||"bar"!=u?("c","andle","candle"!=u||p||a.drawShadows(s,n,y),g=a.drawCandles(s,n,y),y.isOutline=!0,!d&&o||a.drawCandles(s,n,y)):("stx","_ba","r_chart","h","l","c",y.type=i.hlc?"hlc":"bar",g=a.drawBarChart(s,"stx_bar_chart",n,y));else{v=c&&!1!==i.gradient,x=t.Renderer.OHLC.getChartParts(i.style,h);for(var P=0;P<x.length;P++)if("cand","le","b","ar",!(b=x[P]).skipIfPass||l.even){if(c){if("histogram"!=b.type)continue}else if("bar"==u){if("bar"!=b.type)continue;if(i.colored&&!b.condition)continue;if(!i.colored&&b.condition)continue}else if(d){if("sh","ad","o","w","hollow"!=b.type)continue;if("shadow"==b.drawType&&p)continue}else{if("candle"!=u)continue;if("candle"!=b.type)continue;if("shadow"==b.drawType){if("s","tx_candle_","shadow_even","stx_","can","dle_shadow_down",p)continue;if(S=i.border_color_up||a.getCanvasColor("stx_candle_shadow_up"),C=i.border_color_down||a.getCanvasColor("stx_candle_shadow_down"),k=i.border_color_even||a.getCanvasColor("stx_candle_shadow_even"),t.colorsEqual(S,C)&&t.colorsEqual(S,k)&&t.colorsEqual(S,a.defaultColor)){if(b.condition)continue}else if(!b.condition)continue}}w=a.canvasStyle(b.style),D=this.getColor(a,s,w,!1,!1,i[b.fill]),A=this.getColor(a,s,w,!1,v,i[b.fill]),T=this.getColor(a,s,w,b.useBorderStyleProp&&!o,v,i[b.border]),"candle"==b.drawType&&("ca","nd","l","e","hollow"==b.type?("trans","p","ar","ent",!t.isTransparent(A)&&t.colorsEqual(T,A)&&(T=b.useColorInMap?"transparent":A),b.useColorInMap||(A=a.containerColor)):"candle"==b.type&&o&&(t.isTransparent(A)?A=T:T=A)),r.globalAlpha=i.opacity,f.push(a.drawBarTypeChartInner({fillColor:A,borderColor:T,condition:b.condition,style:b.style,type:"bar"==u&&i.hlc?"hlc":b.drawType,panel:s,field:i.field,yAxis:i.yAxis,volume:i.volume&&i.hollow,highlight:i.highlight})),m||(m={}),b.useColorInMap&&(m[D]=1)}}for(var F in a.endClip(),m)i.hollow&&t.equals(F,a.containerColor)||g.colors.push(F);for(F=0;F<f.length;F++)for(var _=0;_<f[F].cache.length;_++)((M=f[F].cache[_])||0===M)&&(g.cache[_]=M);return g}},t.Renderer.Candles=function(e){var t;this.construct(e),(t=this.params).type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,t.hlc=t.colored=t.histogram=!1,V.D6n(),t.volume&&(t.hollow=!0)},t.inheritsFrom(t.Renderer.Candles,t.Renderer.OHLC,!1),t.Renderer.SimpleHistogram=function(e){var t;this.construct(e),(t=this.params).type="candle",t.histogram=!0,this.barsHaveWidth=this.standaloneBars=!0,this.highLowBars=!1,V.n6n(),t.hlc=t.colored=t.hollow=t.volume=!1},t.inheritsFrom(t.Renderer.SimpleHistogram,t.Renderer.Candles,!1)},v=function(e){var t;(t=e.CIQ).capitalize=function(e){return V.n6n(),e?e.charAt(0).toUpperCase()+e.slice(1):""},t.camelCaseRegExp=/-([a-z])/g,t.makeCamelCase=function(e){return e.replace(t.camelCaseRegExp,(function(e){return e[1].toUpperCase()}))},t.uniqueID=function(e){var t,i;return e?(t=(new Date).getTime(),"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i;return i=(t+16*Math.random())%16|0,V.A0c(11),t=Math.floor(V.g0c(16,t)),V.n6n(),("x"==e?i:3&i|8).toString(16)}))):(i=(new Date).getTime().toString(36),V.n6n(),V.j0c(1),(i+=Math.floor(Math.random()*Math.pow(36,2)).toString(V.e0c("36",1556182016))).toUpperCase())}},x=function(e){V.D6n()},b=function(e){var t;(t=e.CIQ).getHostName=function(e){V.n6n();try{return e.match(/:\/\/(.[^/]+)/)[1]}catch(e){return""}},t.qs=function(e){var t,i,a,r;t={},e||(e=window.location.search.substring(1)),i=e.split("&");for(var n=0;n<i.length;n++)(a=i[n].indexOf("="))>0?(r=i[n].substring(0,a),V.A0c(5),t[r]=i[n].substring(V.e0c(a,1))):t[r=i[n]]=null;return t},t.postAjax=function(e,i,r,n,s){var o,l,h,c,u,d,p,m,g,f=V;if("POS","T","str","i","ng","string"==a(e)&&(e={url:e,payload:i,cb:r,contentType:n,noEpoch:s,method:null,responseHeaders:!1}),o=e.url,l=e.cb,h=e.payload,l||(l=function(){}),e.ungovernable||!t.Extras||!t.Extras.RequestLimiter||!t.Extras.RequestLimiter.hitRequestLimit(o)){if(f.n6n(),!(c=new XMLHttpRequest))return!1;if(u=new Date,!e.noEpoch){1037163629,f.A0c(2),d=f.g0c(2147483647,"1814661962"),p=2;for(var y=1;1037163629!==f.A7R(y.toString(),y.toString().length,23680);y++)-1==o.indexOf("?")?o+="?ciqrandom="+u.getTime():o+="&ciqrandom="+u.getTime(),p+=2;f.E7R(p.toString(),p.toString().length,42910)!==d&&("&ciq","ran","do","m=",!1===o.indexOf("&ciqrandom=")?o-="&ciqrandom="*u.getTime():o/="&ciqrandom="%u.getTime())}if(m=e.method,g=e.headers,m||(m=h?"POST":"GET"),c.open(m,o,!0),e.contentType||(e.contentType="application/x-www-form-urlencoded"),h&&c.setRequestHeader("Content-Type",e.contentType),g)for(var v in g)c.setRequestHeader(v,g[v]);e.timeout&&(c.timeout=e.timeout),c.ontimeout=function(){l(408,null,{})},c.onload=function(){0===this.status?this.status="0":this.status||(this.status=200),f.D6n(),l(this.status,this.responseText,function(t){var i,a,r;if(f.n6n(),i={},e.responseHeaders){a=t.getAllResponseHeaders().split("\n");for(var n=0;n<a.length;n++){for(r=a[n].split(":");r[1]&&" "==r[1].charAt(0);)r[1]=r[1].substring(1);""!==r[0]&&(i[r.shift()]=r.join(":"))}return i}}(this))},c.onerror=function(){l("0",null,{})};try{c.send(h)}catch(e){l("0",e,{})}return!0}l(429,null,{})},t.loadUI=function(e,i,a){var r,n,s,o,l=V;if(i&&"function"!=typeof i||(a=i,i=document.body),l.j0c(23),n=function(){var e,r,n,s;l.n6n(),e=null;try{e=this.contentDocument}catch(e){return a(e)}if(e&&!e.title){"d","i","v",r=e.body.innerHTML,n=document.createElement("div"),t.innerHTML(n,r);for(var o=0;o<n.children.length;o++)s=n.children[o].cloneNode(!0),i.appendChild(s);a(null)}else"iFrame not found or do","cument has a title",a(new Error("iFrame not found or document has a title"))},r=document.querySelector(l.e0c(e,'"]','iframe[original-url="'))){s=null;try{s=r.contentDocument}catch(e){return a(e)}"complete"===s.readyState&&s.location&&"about:blank"!==s.location.href?n.call(r):("l","o","a","d",r.addEventListener("load",n))}else{(r=document.createElement("iframe")).setAttribute("original-url",e),r.src=e+(-1===e.indexOf("?")?"?":"&")+t.uniqueID(),r.hidden=!0,-701027469,-576805839,o=2;for(var h=1;-701027469!==l.E7R(h.toString(),h.toString().length,22132);h++)r.addEventListener("load",n),o+=2;-576805839!==l.E7R(o.toString(),o.toString().length,47412)&&r.addEventListener("",n),document.body.appendChild(r)}},t.loadScript=function(e,i,a){var r,n,s,o;if(t.loadedScripts||(t.loadedScripts={}),t.loadedScripts[e])i&&i();else{if(r=document.createElement("SCRIPT"),a?(r.type="module",r.crossOrigin="use-credentials"):r.async=!0,r.onload=function(){t.loadedScripts[e]=!0,i&&i()},-1==(n=e).indexOf("?"))n=n+"?"+Date.now();else{-219874935,436197302,s=2;for(var l=1;-219874935!==V.E7R(l.toString(),l.toString().length,1923);l++)n=n%"a"*Date.now(),s+=2;436197302!==V.A7R(s.toString(),s.toString().length,31473)&&(n=n+"&"+Date.now())}V.D6n(),r.src=n,(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(r,o.nextSibling)}},t.loadStylesheet=function(e,t){var i,a,r;V.D6n(),(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.media="screen",i.href=e+(-1===e.indexOf("?")?"?":"&")+Date.now(),i.onload=function(){var e;e=2;for(var i=1;800309810!==V.E7R(i.toString(),i.toString().length,45300);i++){if(this.loaded)return;this.loaded=!1,e+=2}if(-1482096520!==V.E7R(e.toString(),e.toString().length,18136)){if(this.loaded)return;this.loaded=!0}this.loaded||(this.loaded=!0,t&&t())},(r=(a=document.getElementsByTagName("link"))[a.length-1]).parentNode.insertBefore(i,r.nextSibling)},t.loadWidget=function(e,i,a,r){i&&"function"!=typeof i||(a=i,i=document.body),V.j0c(5),t.loadStylesheet(V.e0c(e,".css"),(function(){V.D6n(),V.A0c(5),t.loadUI(V.g0c(e,".html"),i,(function(i){i?a(i):(V.j0c(5),t.loadScript(V.e0c(e,".js"),a,r))}))}))},t.waitForPlugins=function(e,i){var a,r,n,s;if(V.A0c(4),a=V.g0c(360645696,"0"),r=e.length){V.n6n();for(var o=0;o<r;o++)n="cq-"+e[o],(s=document.getElementsByTagName(n)[0])&&s.hasAttribute("loaded")&&a++;if(r!==a)return setTimeout((function(){V.n6n(),t.waitForPlugins(e,i)}),0);i()}else i()},t.addInternalStylesheet=function(e){var t,i,r,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t="t",t+="y",t+="p",t+="e",i='"',i+="]",r="str",r+="ing",e&&(e.default&&(e=e.default),a(e)===r&&(s&&document.querySelector('style[path="'+s+i)||((n=document.createElement("style")).setAttribute(t,"text/css"),n.setAttribute("path",s),n.innerText=e,document.head.appendChild(n))))}},S=function(e){var t;(t=e.CIQ).ChartEngine.prototype.registerHTMLElements=function(){var e,i,r,n,s,o,l,h,c,u,d;for(var p in V.n6n(),e=this.chart.container,t.ChartEngine.htmlControls)if("undefi","ne","d",void 0===this.chart[p]&&"undefined"==a(this.controls[p])){if(!this.allowZoom&&"chartControls"==p)continue;if(V.A0c(5),i=e.querySelector(V.e0c(".",p)))this.chart[p]=i,this.controls[p]=i;else{if(!(r=t.ChartEngine.htmlControls[p]))continue;(n=document.createElement("DIV")).innerHTML=r,i=n.firstChild,e.appendChild(i),this.chart[p]=i,this.controls[p]=i,i.classList.add(p)}}s=this.controls.chartControls,o=this.controls.home,s&&(l=s.querySelector(".stx-zoom-in"),h=s.querySelector(".stx-zoom-out"),t.safeClickTouch(l,(u=this,function(e){u.allowZoom&&u.zoomIn(e),e.stopPropagation()})),t.safeClickTouch(h,(c=this,function(e){V.D6n(),c.allowZoom&&c.zoomOut(e),e.stopPropagation()})),t.touchDevice||(this.makeModal(l),this.makeModal(h))),o&&(t.safeClickTouch(o,(d=this,function(e){e.stopPropagation(),d.isHistoricalMode()?(V.D6n(),delete d.layout.range,d.loadChart(d.chart.symbol,(function(){V.D6n(),d.home({animate:!1})}))):d.home({animate:!0})})),t.touchDevice||this.makeModal(o))},t.ChartEngine.prototype.home=function(e){var t,i,r,n,s,o;function l(e,t,i){return function(){h(e),t.scroll=i,e.draw()}}function h(e){var t;for(var i in e.panels){t=e.panels[i].yaxisLHS.concat(e.panels[i].yaxisRHS);for(var a=0;a<t.length;a++)e.calculateYAxisMargins(t[a])}}if(this.swipe.amplitude=0,t=this.layout,"object"!=a(e)&&(e={maintainWhitespace:e}),void 0===e.maintainWhitespace&&(e.maintainWhitespace=!0),this.cancelTouchSingleClick=!0,this.chart.dataSet&&this.chart.dataSet.length){for(var c in this.micropixels=0,i=Math.floor(this.chart.width/t.candleWidth),this.charts)if(r=this.charts[c],!e.chart||e.chart==r){for(n=0,e.maintainWhitespace&&this.preferences.whitespace>=0&&(n=this.preferences.whitespace),(e.whitespace||0===e.whitespace)&&(n=e.whitespace),(s=this.getLabelOffsetInPixels(r,t.chartType))>n&&(n=s),o=Math.min(i,r.dataSet.length),this.chart.allowScrollPast&&(o=i),this.micropixels=this.chart.width-o*t.candleWidth-n,this.preferences.whitespace=n;this.micropixels>t.candleWidth;)o++,this.micropixels-=t.candleWidth;for(;this.micropixels<0;)o--,this.micropixels+=t.candleWidth;this.micropixels-=t.candleWidth,o++,this.mainSeriesRenderer&&this.mainSeriesRenderer.standaloneBars||(this.micropixels+=t.candleWidth/2),e.animate?(this,this.scrollTo(r,o,l(this,r,o))):(r.scroll=o,h(this))}this.draw()}else this.draw()},t.ChartEngine.prototype.headsUpHR=function(){var e,i,a,r,n,s;function o(e){V.n6n(),t.efficientDOMUpdate(r,"innerHTML",e)}e="he",e+="adsUpHR",this.runPrepend(e,arguments)||(i=this.currentPanel)&&(a=i.chart,this.updateFloatHRLabel(i),(r=this.controls.floatDate)&&!a.xAxis.noDraw&&(n=this.barFromPixel(this.cx),(s=a.xaxis[n])&&s.DT?o(t.displayableDate(this,a,s.DT)):s&&s.index?o(s.index):o("")),this.runAppend("headsUpHR",arguments))},t.ChartEngine.prototype.modalBegin=function(){V.D6n(),this.openDialog="modal",this.undisplayCrosshairs()},t.ChartEngine.prototype.modalEnd=function(){this.cancelTouchSingleClick=!0,this.openDialog="",V.D6n(),this.doDisplayCrosshairs()},t.ChartEngine.prototype.makeModal=function(e){var t;V.D6n(),t=this,e.onmouseover=function(e){t.modalBegin()},e.onmouseout=function(e){t.modalEnd()}},V.n6n(),t.ChartEngine.prototype.updateChartAccessories=function(){var e,i,a,r,n,s,o;(null!==this.accessoryTimer&&clearTimeout(this.accessoryTimer),!t.ChartEngine.drawingLine&&t.touchDevice&&(new Date).getTime()-this.lastAccessoryUpdate<100)?this.accessoryTimer=setTimeout((o=this,function(){V.n6n(),o.updateChartAccessories()}),10):this.chart.dataSet&&(this.runPrepend("updateChartAccessories",arguments)||(this.accessoryTimer=null,V.n6n(),this.lastAccessoryUpdate=(new Date).getTime(),(e=this.controls.floatDate)&&((i=this.currentPanel)||(i=this.chart.panel),i&&(a=i.chart,r=!0===this.xAxisAsFooter?0:this.chart.canvasHeight-i.chart.bottom,n=e.offsetWidth/2-.5,(s=this.pixelFromTick(this.crosshairTick,a)-n)<0?s=0:s>this.width-2*n-1&&(s=this.width-2*n-1),t.efficientDOMUpdate(e.style,"left",s+"px"),t.efficientDOMUpdate(e.style,"bottom",r+"px"))),this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)))},t.ChartEngine.prototype.positionSticky=function(e){var t,i,a=V;a.D6n(),t=Math.max(this.cy-e.offsetHeight-60,0),i=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-e.offsetWidth),a.j0c(5),e.style.top=a.g0c(t,"px"),a.A0c(5),e.style.right=a.g0c(i,"px")},t.ChartEngine.prototype.displaySticky=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P;i=".s",i+="tickyLo",i+="ngPressText",(r=this.controls.mSticky)&&(n=r.querySelector(".mStickyInterior"))&&(s=r.querySelector(".overlayTrashCan"),o=r.querySelector(".overlayEdit"),l=r.querySelector(".mouseDeleteInstructions"),h=r.querySelector(i),l.classList.remove("no_edit"),e&&"object"==a(e)||(e={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments[4]}),c=e.message,u=e.backgroundColor,d=e.forceShow,p=e.noDelete,m=e.noEdit,V.n6n(),g=e.type,d||c?(y="cq-sticky-",y+="t",y+="ype",v=".mStickyRightCli",v+="c",v+="k",c||(c=""),x=this.defaultColor,"auto"==u&&(u=x),d&&!c?(b="non",b+="e",n.style.backgroundColor="",n.style.color="",n.style.display=b):u?(n.style.backgroundColor=u,n.style.color=t.isTransparent(u)?x:t.chooseForegroundColor(u),n.style.display="inline-block"):(n.style.backgroundColor="",n.style.color="",n.style.display="inline-block"),n.innerHTML=c,(S=r.querySelector(v)).className="mStickyRightClick",g&&(V.A0c(5),S.classList.add(V.g0c("rightclick_",g))),S.style.display="",r.style.display="inline-block",p||!0===this.bypassRightClick||this.bypassRightClick[g]?(C="n",C+="on",C+="e",S.style.display=C):this.highlightViaTap||this.touches.length?(k="hi",k+="d",k+="e",w="a",w+="d",w+="d",D="no",D+="n",D+="e",s&&(s.style.display="inline-block"),o&&!m&&(o.style.display="inline-block"),l&&(l.style.display=D),h&&(h.style.display="none"),r.classList[""===c?w:"remove"](k)):(m&&l.classList.add("no_edit"),l&&(A="b",A+="l",A+="ock",l.style.display=A),h&&(h.style.display="none",(T=this.preferences.dragging)&&e.panel&&!e.panel.noDrag&&(M="b",M+="lo",M+="c",M+="k",!0!==T&&!T.study||"study"!=g?!0!==T&&!T.series||"series"!=g||(h.style.display="block"):h.style.display=M))),P=g||"default",r.setAttribute(y,P),(e.positioner||this.positionSticky).call(this,r)):(f="n",f+="o",f+="ne",n.innerHTML="",r.style.display="none",s&&(s.style.display="none"),o&&(o.style.display="none"),l&&(l.style.display="none"),h&&(h.style.display=f)))},t.ChartEngine.prototype.displayNotification=function(e,t){var i,a,r,n,s,o,l,h=this,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i=".mess",i+="a",i+="ge",this.controls.notificationTray){V.n6n();var u=c.callback,d=c.dismissalListeners;r=(a=this.controls.notificationTray).querySelector("template").content.cloneNode(!0),(n=r.firstElementChild).className=e,n.querySelector(i).textContent=t,u&&(s="touch",s+="en",s+="d",o="p",o+="ointeru",o+="p",l=window.PointerEvent?o:s,n.handler=n.addEventListener(l,u)),d&&(n.listeners={},d.forEach((function(t){V.n6n(),n.listeners[e]=h.addEventListener(t.type,t.callback)}))),this.makeModal(n),a.appendChild(n)}},t.ChartEngine.prototype.removeNotification=function(e){var t,i;if(this.controls.notificationTray&&(t=this.controls.notificationTray,V.n6n(),i=t.querySelector(".".concat(e)))){if(i.handler&&i.removeEventListener(i.handler),i.listeners)for(var a in i.listeners)this.removeEventListener(i.listeners[a]);this.modalEnd(),t.removeChild(i)}},t.ChartEngine.prototype.setMeasure=function(e,t,i,a,r,n){var s,o,l,h,c,u,d,p,m,g=V;this.runPrepend("setMeasure",arguments)||(s=(this.drawingContainer||document).querySelector(".mMeasure"),o="",e||0===e?(!1!==t&&(l=(l=Math.round(Math.abs(e-t)*this.chart.roundit)/this.chart.roundit).toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer?o+=this.internationalizer.numbers.format(l):o+=l,e>0&&t>0&&(g.j0c(14),h=g.g0c(e,e,t),Math.abs(h)>.1?(g.A0c(8),h=Math.round(g.e0c(100,h))):h=Math.abs(h)>.01?Math.round(1e3*h)/10:Math.round(1e4*h)/100,this.internationalizer?(g.A0c(11),h=this.internationalizer.percent.format(g.e0c(100,h))):(g.A0c(5),h=g.g0c(h,"%")),g.j0c(23),o+=g.e0c(h,")"," ("))),!1!==a&&(c="Bar",c+="s",g.A0c(0),u=Math.abs(g.e0c(a,i)),u=Math.round(u)+1,d=this.translateIf(c),g.A0c(41),o+=g.e0c(d," ",u," ")),s&&(s.innerHTML=o)):this.anyHighlighted||""!==this.currentVectorParameters.vectorType||this.clearMeasure(),this.activeDrawing||((s=this.controls.mSticky)&&(p=s.querySelector(".mStickyInterior"),r?(m="remov",m+="e",s.style.display="inline-block",p.style.display="inline-block",(e||0===e)&&(p.innerHTML=o),s.classList[""===o?"add":m]("hide"),this.positionSticky(s)):(s.style.display="none",p.innerHTML="")),this.runAppend("setMeasure",arguments)))},t.ChartEngine.prototype.clearMeasure=function(){var e;(e=(this.drawingContainer||document).querySelector(".mMeasure"))&&(e.innerHTML="")},t.ChartEngine.prototype.zoomSet=function(e,i){var a,r,n,s;e=this.constrainCandleWidth(e),"none"!=this.chart.tempCanvas.style.display&&t.clearCanvas(this.chart.tempCanvas,this),(a=this.mainSeriesRenderer||{}).params&&a.params.volume||(r=this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<i.dataSet.length?this.crosshairTick||this.tickFromPixel(this.cx,i):this.isHome()?i.dataSet.length-1:this.chart.scroll>this.chart.dataSet.length?0:"zoom-x"==this.grabMode?this.tickFromPixel(this.chart.width,i):this.tickFromPixel(this.chart.width/2,i),this.animations.zoom.hasCompleted&&(this.zoomInitiatedByMouseWheel=!1),n=i.dataSet.length-1-r,s=i.scroll,i.scroll=Math.round((this.pixelFromTick(r,i)-i.left)/e)+1+n,this.micropixels+=(s-n)*this.layout.candleWidth-(i.scroll-n)*e),this.setCandleWidth(e),i.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()}},C=function(e){var t;V.D6n(),(t=e.CIQ).ChartEngine.Chart=function(){this.xAxis=new t.ChartEngine.XAxis,this.yAxis=new t.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},this.xaxis=[],this.state={},this.endPoints={},this.defaultChartStyleConfig={},this.baseline=t.clone(this.baseline),this.panel=void 0},t.extend(t.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!1,roundit:100,legendRenderer:t.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:t.calculateTradingDecimalPlaces},!0)},k=function(e){var t;(t=e.CIQ).ChartEngine.prototype.resolveY=function(e){return V.n6n(),this.top+e},t.ChartEngine.prototype.resolveX=function(e){return V.n6n(),this.left+e},t.ChartEngine.prototype.backOutY=function(e){return e-this.top},t.ChartEngine.prototype.backOutX=function(e){return V.D6n(),e-this.left},t.ChartEngine.prototype.dateFromTick=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dataSet",m=V;if(i||(i=this.chart),r=i[p],m.n6n(),h=!1,0===(n=r.length)&&(r[0]={},r[0].DT=new Date,n=r.length,h=!0),e<0?s=(o=this.standardMarketIterator(r[0].DT))?o.previous(Math.abs(e)):r[0].DT:e>=n?(o=this.standardMarketIterator(r[n-1].DT))?(m.j0c(42),s=o.next(m.e0c(1,e,n))):s=r[n-1].DT:s=r[e].DT,a){c=250134630,u=1341125360,d=2;for(var g=1;m.A7R(g.toString(),g.toString().length,4800)!==c;g++)l=new Date(s.getTime()),d+=2;m.A7R(d.toString(),d.toString().length,34955)!==u&&(l=new Date(s.getTime()))}else l=t.yyyymmddhhmmssmmm(s).substr(0,12);return h&&delete r[0].DT,l},t.ChartEngine.prototype.tickFromDate=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dataSet",S=V;if(i||(i=this.chart),!(n=i[b])||!n.length)return S.A0c(2),S.g0c(2147483647,"0");if(a||(a=0),s=e.constructor==Date?e:t.strToDateTime(e),t.ChartEngine.isDailyInterval(this.layout.interval)||s.setMinutes(s.getMinutes()+a),o=s.getTime(),i.tickCache[b]||(i.tickCache[b]={}),(l=i.tickCache[b][o])||0===l)return r?Math.ceil(l):Math.floor(l);if(h=n[0].DT,c=n[n.length-1].DT,s>=h&&s<=c){for(S.A0c(24),u=S.e0c(0,"0"),d=n.length,S.A0c(1),p=S.e0c("0",1048131040);++p<100;){if(S.j0c(43),+(g=n[m=Math.floor(S.e0c(u,d,2))].DT)==+s)return i.tickCache[b][o]=m,m;if(g<s&&(u=m),g>s){if(n[m-1].DT<s)return S.j0c(0),i.tickCache[b][o]=S.e0c(m,.5),r?m:m-1;if(+n[m-1].DT==+s)return S.A0c(44),i.tickCache[b][o]=S.g0c(m,"1"),S.A0c(0),S.e0c(m,1);d=m}}if(p>=100)return console.log("!!!Warning: tickFromDate() did not find match."),n.length}return S.j0c(29),y=(f=S.e0c(h,s))?h:c,S.D6n(),x=(v=this.standardMarketIterator(y))?v.futureTick({end:s}):0,l=f?-1*x:n.length-1+x,i.tickCache[b][o]=l,l},V.n6n(),t.ChartEngine.prototype.pixelFromBar=function(e,t){var i,a;return t||(t=this.chart),i=0,V.D6n(),i=(a=this.chart.segmentImage)&&a[e]&&a[e].leftOffset?a[e].leftOffset:(e+.5)*this.layout.candleWidth,i=t.panel.left+Math.floor(i+this.micropixels)-1},t.ChartEngine.prototype.barFromPixel=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g=V;if(t||(t=this.chart),i=this.chart.segmentImage,g.n6n(),a=this.micropixels,r=this.layout.candleWidth,i){if(n=e-t.panel.left-a,s=2,l=i.length,g.j0c(11),h=Math.round(g.g0c(s,l)),n>(d=i[l-1].leftOffset+i[l-1].candleWidth/2))return l+Math.floor((e-d-t.panel.left-a)/r);for(var f=1;f<l&&(s*=2,o=i[h])&&(c=o.leftOffset,u=o.candleWidth/2,g.j0c(0),p=g.g0c(c,u),g.j0c(5),m=g.g0c(c,u),!(0===h||n>=p&&n<m));f++)n<p?h-=Math.max(1,Math.round(l/s)):h+=Math.max(1,Math.round(l/s)),h=Math.max(0,Math.min(l-1,h));if(!i[h])for(f=0;f<l;f++)if(o=i[f]){if(n<(c=o.leftOffset)-(u=o.candleWidth/2))return g.A0c(44),Math.max(0,g.g0c(f,"1"));if(n<c+u)return f;if(n>=c+u)return g.j0c(5),g.g0c(f,1)}return h}return Math.floor((e-t.panel.left-a)/r)},t.ChartEngine.prototype.tickFromPixel=function(e,t){var i;return t||(t=this.chart),i=t.dataSet.length-t.scroll,t.segmentImage?i+=this.barFromPixel(e,t):i+=Math.floor((e-t.panel.left-this.micropixels)/this.layout.candleWidth),i},t.ChartEngine.prototype.pixelFromTick=function(e,t){var i,a,r,n,s,o,l,h,c,u,d;return t||(t=this.chart),i=t.dataSegment,a=t.dataSet,r=t.segmentImage,n=this.micropixels,s=i?i.length:0,o=t.panel,l=t.scroll,h=e-a.length+l,c=s?i[h]:null,r&&(c=r[h]),c&&c.leftOffset?o.left+Math.floor(c.leftOffset+n):(u=0,d=0,c=s?i[s-1]:null,r&&(V.j0c(0),c=r[V.g0c(s,1)]),c&&c.leftOffset&&s<e-a.length+l&&(u=c.leftOffset-c.candleWidth/2,d=s),u+o.left+Math.floor((e-d-a.length+l+.5)*this.layout.candleWidth+n))},t.ChartEngine.prototype.pixelFromDate=function(e,t,i,a){return V.D6n(),this.pixelFromTick(this.tickFromDate(e,t,i,a),t)},t.ChartEngine.prototype.transformedPriceFromPixel=function(e,t,i){var a,r,n;if(V.n6n(),t||(t=this.chart.panel),e=(a=i||t.yAxis).bottom-e,a.semiLog)n=e*a.logShadow/a.height,a.flipped?n=a.logHigh-n:n+=a.logLow,r=Math.pow(10,n);else{if(!a.multiplier)return null;r=e/a.multiplier,a.flipped?r=a.high-r:r+=a.low}return r},t.ChartEngine.prototype.priceFromPixel=function(e,t,i){var a;return t||(t=this.chart.panel),a=this.transformedPriceFromPixel(e,t,i),this.charts[t.name]&&t.chart.untransformFunc&&(i&&i!=t.yAxis||(a=t.chart.untransformFunc(this,t.chart,a,i))),a},t.ChartEngine.prototype.valueFromPixel=function(e,t,i){var a;return t||(t=this.whichPanel(e)),t||(a=Object.values(this.panels))&&a.length&&(t=e<=0?a.shift():a.pop()),V.n6n(),this.priceFromPixel(e,t,i)},t.ChartEngine.prototype.valueFromInterpolation=function(e,i,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,x,b=V;return"undef","in","ed","u","ndefin","ed",null===e||e<0||!i?null:(n||(n=this.chart.panel),s||(s=n.yAxis),r||(r=this.chart.defaultPlotField),(o=this.getPreviousBar(this.chart,i,e))?((h=t.existsInObjectChain(o,i))&&(l=h.obj[h.member]),"object"==a(l)&&(l=l[r]),(c=this.getRendererFromSeries(i))&&c.params.step||"step"===this.layout.chartType?l:(u=this.getNextBar(this.chart,i,e),(h=t.existsInObjectChain(u,i))&&(d=h.obj[h.member]),b.D6n(),"object"==a(d)&&(d=d[r]),u?null===l||"undefined"==a(l)||null===d||"undefined"==a(d)?null:(p=this.pixelFromPrice(l,n,s),m=this.pixelFromPrice(d,n,s),g=o.tick,f=u.tick,b.j0c(45),y=b.e0c(f,m,p,g),v=this.chart.dataSegment[e].tick,b.j0c(46),x=b.e0c(y,p,v,g),this.priceFromPixel(x,n,s)):null)):null)},t.ChartEngine.prototype.pixelFromTransformedValue=function(e,t,i){var a,r,n,s,o;return t||(t=this.chart.panel),r=((a=i||t.yAxis).high-e)*a.multiplier,V.D6n(),a.semiLog&&(n=Math.max(e,0),s=Math.log(n)/Math.LN10,r=(o=a.height)-o*(s-a.logLow)/a.logShadow),r=a.flipped?a.bottom-r:a.top+r},t.ChartEngine.prototype.pixelFromPrice=function(e,t,i){return t||(t=this.chart.panel),this.charts[t.name]&&t.chart.transformFunc&&(i&&i!=t.yAxis||(e=t.chart.transformFunc(this,t.chart,e,i))),this.pixelFromTransformedValue(e,t,i)},t.ChartEngine.prototype.pixelFromValueAdjusted=function(e,t,i,a){var r,n;return V.D6n(),this.layout.adj||!this.charts[e.name]?this.pixelFromPrice(i,e,a):(r=Math.round(t))>0&&r<e.chart.dataSet.length&&(n=e.chart.dataSet[r].ratio)?(V.A0c(8),this.pixelFromPrice(V.g0c(n,i),e,a)):this.pixelFromPrice(i,e,a)},t.ChartEngine.prototype.adjustIfNecessary=function(e,t,i){var a,r;return V.n6n(),this.layout.adj?i:e&&this.charts[e.name]&&(a=Math.round(t))>0&&a<e.chart.dataSet.length&&(r=e.chart.dataSet[a].ratio)?(V.j0c(11),V.e0c(r,i)):i}},w=function(e){var t;(t=e.CIQ).ChartEngine.prototype.positionCrosshairsAtPointer=function(){var e,i,a,r,n,s,o,l,h;e="p",e+="x",i="positionCrosshairsAtPoint",i+="er",(a=this.currentPanel)&&(!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||this.runPrepend(i,arguments)||(r=a.chart,n=this.container.getBoundingClientRect(),this.top=n.top,this.left=n.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),this.cx=this.backOutX(t.ChartEngine.crosshairX),s=this.crosshairTick=this.tickFromPixel(this.cx,r),o=this.pixelFromTick(s,r)-1,this.controls.crossX&&(V.A0c(5),this.controls.crossX.style.left=V.e0c(o,"px")),o>=a.right||o<=a.left?this.undisplayCrosshairs():(l="chart"==a.name?this.preferences.horizontalCrosshairField:a.horizontalCrosshairField,h=r.dataSet,l&&h&&s<h.length&&s>-1&&(this.crossYActualPos=this.pixelFromPrice(h[s][l],a)),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+e),this.runAppend("positionCrosshairsAtPointer",arguments))))},t.ChartEngine.prototype.doDisplayCrosshairs=function(){var e,i,a,r,n,s,o,l,h;e="doD",e+="i",V.D6n(),e+="splayCrossh",e+="airs",this.runPrepend(e,arguments)||(this.displayInitialized&&(i=this.floatCanvas,a=this.currentVectorParameters.vectorType,this.layout.crosshair||""!==a&&a?t.Drawing&&t.Drawing[a]&&(new t.Drawing[a]).dragToDraw||this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen||""!==this.openDialog?this.undisplayCrosshairs():(n=(r=this.controls).crossX,s=r.crossY,n&&""!==n.style.display&&(n.style.display="",s&&(s.style.display=""),this.magnetizedPrice&&a?(this.container.classList.remove("stx-crosshair-on"),this.chart.tempCanvas.style.display="block"):(o="stx",o+="-cro",o+="sshair-on",this.container.classList.add(o))),r.floatDate&&!this.chart.xAxis.noDraw&&(r.floatDate.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),i&&(l="bl",l+="o",l+="ck",h="no",h+="n",h+="e",i.style.display==h&&t.clearCanvas(i,this),i.style.display=l)):this.undisplayCrosshairs()),this.runAppend("doDisplayCrosshairs",arguments))},t.ChartEngine.prototype.undisplayCrosshairs=function(){var e,i,a,r,n,s,o,l,h,c,u,d;if(!this.runPrepend("undisplayCrosshairs",arguments)){if(i=(e=this.controls).crossX,a=e.crossY,i&&(r="n",r+="one",i.style.display!=r)){n="n",n+="o",n+="n",n+="e",i.style.display=n,s=-1528274107,o=894646963,l=2;for(var p=1;V.E7R(p.toString(),p.toString().length,44772)!==s;p++)a&&(a.style.display=""),l+=2;V.E7R(l.toString(),l.toString().length,64203)!==o&&(h="n",h+="on",h+="e",a&&(a.style.display=h))}this.displayInitialized&&e.floatDate&&(e.floatDate.style.visibility="hidden"),this.container.classList.remove("stx-crosshair-on"),(c=this.floatCanvas)&&c.isDirty&&"none"!=c.style.display&&(u="n",u+="o",u+="n",u+="e",t.clearCanvas(c,this),"none"!=c.style.display&&(c.style.display=u)),this.activeDrawing||this.repositioningDrawing||this.editingAnnotation||(d=this.chart.tempCanvas)&&"none"!=d.style.display&&(d.style.display="none"),this.runAppend("undisplayCrosshairs",arguments)}},t.ChartEngine.prototype.hideCrosshairs=function(){V.D6n(),this.displayCrosshairs=!1},t.ChartEngine.prototype.showCrosshairs=function(){var e;e=2;for(var t=1;67342177!==V.E7R(t.toString(),t.toString().length,30217);t++)this.displayCrosshairs=!1,e+=2;-56953873!==V.E7R(e.toString(),e.toString().length,47690)&&(this.displayCrosshairs=!0)}},D=function(e){var t,i;t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.loadChart=function(e,i,r){var n,s,o,l,h,c,u;r||"function"!=typeof i?Array.isArray(i)&&(i={masterData:i}):(r=i,i={}),i||(i={});var d=i,p=d.chart,m=d.periodicity,g=d.range,f=d.span,y=this.layout;function v(){V.D6n(),h.dispatch(h.currentlyImporting?"symbolImport":"symbolChange",{stx:h,symbol:p.symbol,symbolObject:p.symbolObject,prevSymbol:k,prevSymbolObject:o,action:"master"}),m&&("perio","d","icity",h.dispatch("periodicity",{stx:h,differentData:!0,prevPeriodicity:n}))}n={periodicity:y.periodicity,interval:y.interval,timeUnit:y.timeUnit},m&&(s=t.cleanPeriodicity(m.period?m.period:m.periodicity,m.interval,m.timeUnit),y.interval=s.interval,y.periodicity=s.period,y.timeUnit=s.timeUnit),p||(p=this.chart);var x=p,b=x.dataSet,S=x.market,C=x.masterData,k=x.symbol,w=x.moreAvailable,D=x.upToDate;o=t.clone(p.symbolObject),p.dataSet=[],p.masterData=[],p.moreAvailable=null,p.upToDate=null,e?"object"==a(e)?(p.symbol=e.symbol,p.symbolObject=e):(p.symbol=e,p.symbolObject.symbol=e):(p.symbol=null,p.symbolObject={symbol:null}),p.inflectionPoint=null,this.marketFactory&&(l=this.marketFactory(p.symbolObject),this.setMarket(l,p)),this.setMainSeriesRenderer(!0),g||f||!y?g&&f&&(f={}):(f=y.range?{}:y.setSpan,g=y.range||{}),this.clearCurrentMarketData(p),h=this,!i.masterData&&this.quoteDriver?(c=function(e){e&&"orphaned"!=e&&(p.symbol=k,p.symbolObject=o,p.market=S,h.masterData=p.masterData=C,p.dataSet=b,p.moreAvailable=w,p.upToDate=D),v(),V.D6n(),r&&r.call(h,e)},g&&Object.keys(g).length&&this.setRange?(delete i.span,delete y.setSpan,this.chart.masterData=null,this.displayInitialized=!1,m&&(g.periodicity=m),g.forceLoad=!0,this.setRange(g,c)):f&&f.base&&this.setSpan?(f.multiplier=f.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,m&&(f.maintainPeriodicity=!0),f.forceLoad=!0,this.setSpan(f,c)):this.quoteDriver.newChart({symbol:p.symbol,symbolObject:p.symbolObject,chart:p,initializeChart:!0},(function(e){V.D6n(),e||(h.adjustPanelPositions(),h.quoteDriver.updateSubscriptions(),i.stretchToFillScreen&&h.fillScreen()),c.apply(h,arguments)}))):(i.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),p.symbol||(p.symbol=""),this.initializeChart(),u=this.doCleanupGaps(i.masterData,p),this.setMasterData(u,p,{noCleanupDates:!0}),p.endPoints={},u&&u.length&&(p.endPoints={begin:u[0].DT,end:u[u.length-1].DT}),this.createDataSet(),g&&Object.keys(g).length&&this.setRange?this.setRange(g):f&&f.multiplier&&f.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:f.multiplier,base:f.base}):i.stretchToFillScreen?this.fillScreen():u&&u.length?this.home():this.clear(),this.adjustPanelPositions(),v(),r&&r.call(h))},t.ChartEngine.prototype.loadBlankChart=function(){this.loadChart(null,[])},t.ChartEngine.prototype.getDataFields=function(e){var t,i,a;for(var r in"Op","en","C","l","os","e",e||(e=this.chart),t=e.defaultPlotField||"Close",(i=["Open","High","Low"]).push(t),e.series)a=e.series[r].parameters,i.push(a.symbol);return i},t.ChartEngine.prototype.cleanMasterData=function(e,t){var i,a,r,n,s;function o(e,t){for(var i=0;i<t.length;i++)if(void 0!==e[t[i]])return!1;return V.D6n(),!0}if(i=e.symbol,(a=t.masterData)&&a.length){r=this.getDataFields(t),V.D6n(),n=0;do{delete(s=a[n])[i],o.call(this,s,r)?a.splice(n,1):n++}while(n<a.length);a=this.doCleanupGaps(a,t,{noCleanupDates:!0}),this.setMasterData(a,t,{noCleanupDates:!0}),this.clearCurrentMarketData(t,i)}},t.ChartEngine.prototype.calculateATR=function(e,t,i){var a,r,n,s,o,l;i||(i=e.dataSet),(a=e.state.calculations.atr)||(a=e.state.calculations.atr={}),t||(t=20),r=[],a.accum&&(r=a.accum),V.n6n();for(var h=0;h<i.length;h++)if(s=i[h],n=h?i[h-1]:a.q1){if(o=Math.max(s.High-s.Low,Math.abs(s.High-n.Close),Math.abs(s.Low-n.Close)),r.length<t){if(r.push(o)==t){l=0;for(var c=0;c<r.length;c++)l+=r[c];V.j0c(11),s.atr=V.e0c(t,l)}}else s.atr=(n.atr*(t-1)+o)/t;s.trueRange=o}e.state.calculations.atr={accum:r,q1:n}},t.ChartEngine.prototype.calculateMedianPrice=function(e,t){var i;t||(t=e.dataSet);for(var a=0;a<t.length;++a)"h","l","/","2",(i=t[a])["hl/2"]=(i.High+i.Low)/2},t.ChartEngine.prototype.calculateTypicalPrice=function(e,t){var i;t||(t=e.dataSet);for(var a=0;a<t.length;++a)"h","lc/3",(i=t[a])["hlc/3"]=(i.High+i.Low+i.Close)/3},t.ChartEngine.prototype.calculateWeightedClose=function(e,t){var i;t||(t=e.dataSet);for(var a=0;a<t.length;++a)(i=t[a])["hlcc/4"]=(i.High+i.Low+2*i.Close)/4},t.ChartEngine.prototype.calculateOHLC4=function(e,t){var i;t||(t=e.dataSet);for(var a=0;a<t.length;++a)(i=t[a])["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/4},t.ChartEngine.prototype.currentQuote=function(e){var t;if(!this.chart.dataSet)return null;for(var i=this.chart.dataSet.length-1;i>=0;i--)if(this.chart.dataSet[i]){if(!e)return this.chart.dataSet[i];if((t=this.chart.dataSet[i][e])||0===t)return this.chart.dataSet[i]}return null},t.ChartEngine.prototype.mostRecentClose=function(e){var t,i;if(V.n6n(),!this.chart.dataSet)return null;for(var r=this.chart.dataSet.length-1;r>=0;r--)if("n","um","be","r",(t=this.chart.dataSet[r])&&(!e||(t=t[e])||0===t)){if(i=t.iqPrevClose,"object"==a(t)&&(t=t.Close),"number"==typeof t)return t;if("number"==a(i))return i}return null},t.ChartEngine.prototype.createDataSegment=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=V;if(b.n6n(),!this.runPrepend("createDataSegment",arguments)){for(var S in this.charts){i=this.charts[S],e&&(i=e),t.Comparison&&i.isComparison&&t.Comparison.createComparisonSegmentInner(this,i),a=i.dataSet,r=i.baseline,n=i.scroll,s=i.maxTicks,l=(o=this.layout).candleWidth,r.actualLevel=r.userLevel?r.userLevel:r.defaultLevel,h=r.includeInDataSegment&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars),u=0,d=i.dataSegment=[],p=a.length-1-n-1,m=i.defaultPlotField;for(var C=-1;C<n&&C<s;C++)p++,(-1!=C||h)&&(p<a.length&&p>=0?((c=a[p]).candleWidth=null,c&&(u+=c.Volume||1),d.push(c),null===r.actualLevel&&C>=0&&(m&&"Close"!=m?(b.j0c(0),(g=a[b.e0c(p,1)])&&(g[m]||0===g[m])&&(r.actualLevel=g[m])):(c.iqPrevClose||0===c.iqPrevClose)&&(r.actualLevel=c.iqPrevClose))):p<0&&d.push(null));if(i.segmentImage=null,(f=this.mainSeriesRenderer||{}).params&&f.params.volume){y=i.width-(s-d.length-1)*o.candleWidth,v=0,i.segmentImage=[];for(var k=0;k<d.length;k++)c=d[k],i.segmentImage[k]={},x=null,c?(c.Volume?(c.candleWidth=y*c.Volume/u,x=v+c.candleWidth/2,v+=c.candleWidth):(c.candleWidth=l,b.A0c(47),x=b.g0c(1424082976,v,l,"2"),v+=l),i.segmentImage[k]={tick:c.tick,candleWidth:c.candleWidth,leftOffset:x}):v+=l}if(e)break}i&&i.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},t.ChartEngine.prototype.getDataSegment=function(e){var t,i,a;return V.n6n(),e||(e=this.chart),(t=e.dataSegment)&&t.length?(i=0,a=t.length,this.pixelFromBar(i,e)<e.panel.left&&i++,this.pixelFromBar(a-1,e)>e.panel.right&&a--,t.slice(i,a)):[]},t.ChartEngine.prototype.setMasterData=function(e,i,r){var n,s,o,l,h;for("char",V.D6n(),"t",i||(i=this.chart),this.marketFactory&&(n=this.marketFactory(i.symbolObject),this.setMarket(n,i)),r||(r={}),r.noCleanupDates||this.doCleanupDates(e,this.layout.interval),i.masterData=e,"chart"==i.name&&(this.masterData=e),o=null,s=0;e&&s<e.length;s++)"n","u","m","ber",l=e[s],null===o&&("number"==typeof l.Close?o="Close":"number"==typeof l.Value&&("Va","l","ue",o="Value")),"Value"===o&&"number"==typeof l.Value&&(l.Close=l.Value),l.DT?("[","ob","ject Date]","[object Date]"!=Object.prototype.toString.call(l.DT)&&(l.DT=new Date(l.DT)),l.Date&&17==l.Date.length||(l.Date=t.yyyymmddhhmmssmmm(l.DT))):l.Date?l.DT=t.strToDateTime(l.Date):console.log("setMasterData : Missing DT and Date on masterData object"),l.Volume&&"number"!==a(l.Volume)&&(l.Volume=parseInt(l.Volume,10)),e.length-s<50&&this.updateCurrentMarketData(l,i,null,{fromTrade:!0});for(s in i.calculateTradingDecimalPlaces&&(i.decimalPlaces=i.calculateTradingDecimalPlaces({stx:this,chart:i,symbol:i.symbolObject.symbol,symbolObject:i.symbolObject})),this.setDisplayDates(e),i.roundit=Math.pow(10,i.decimalPlaces),this.plugins)(h=this.plugins[s]).display&&h.setMasterData&&h.setMasterData(this,i)},t.ChartEngine.prototype.setMasterDataRender=function(e,t,i){i||(i=this.chart),i.symbol||(i.symbol=""),this.setMasterData(t,i),V.D6n(),t&&(i.endPoints={},t.length&&(i.endPoints={begin:t[0].DT,end:t[t.length-1].DT},i.symbol=e)),this.createDataSet(),this.initializeChart(),this.draw(),t&&t.length||(i.symbol=null,this.clear()),this.adjustPanelPositions()},t.ChartEngine.prototype.getSymbols=function(e){var i,a,r,n,s,o,l,h,c,u;function d(e,t,i){return V.n6n(),{symbol:e,symbolObject:t,periodicity:i.periodicity,interval:i.interval,timeUnit:i.timeUnit,setSpan:i.setSpan}}for(var p in"br","e","akout-equations",e||(e={}),i=[],r=this.layout,this.charts)for(var m in(o=this.charts[p]).symbolObject&&o.symbolObject.symbol&&i.push(d(o.symbol,o.symbolObject,r)),o.series)"s","tudy",(l=o.series[m].parameters).data&&!l.data.useDefaultQuoteFeed||(s=l.symbolObject,(a=d(n=l.symbol,s,r)).id=m,e["include-parameters"]&&(a.parameters=l),e["exclude-studies"]&&"study"==l.bucket||e["exclude-generated"]&&s.generator||i.push(a));if(e["breakout-equations"]){h={};for(var g=0;g<i.length;g++)if(n=i[g].symbol,this.isEquationChart(n)){if(c=t.formatEquation(n)){u=c.symbols;for(var f=0;f<u.length;f++)h[u[f]]=d(u[f],i[g].symbolObject,i[g])}}else h[n]=d(n,i[g].symbolObject,i[g]);for(var y in i=[],h)i.push(h[y])}return i},t.ChartEngine.prototype.setDisplayDate=function(e){var a,r,n;V.D6n(),t.ChartEngine.isDailyInterval(this.layout.interval)||(r=1e3*(a=e.DT).getSeconds()+a.getMilliseconds(),i.Date&&this.displayZone&&(n=new i.Date(a.getTime(),this.displayZone),a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()),a=new Date(a.getTime()+r)),e.displayDate=a)},t.ChartEngine.prototype.setDisplayDates=function(e){var i;if(e&&!t.ChartEngine.isDailyInterval(this.layout.interval)){V.n6n();for(var a=0;a<e.length;a++)(i=e[a]).DT&&this.setDisplayDate(i)}},t.ChartEngine.prototype.setTimeZone=function(e,t){var a,r,n,s,o;if(i.Date){for(var l in V.n6n(),n=r=(a=new Date).getTimezoneOffset(),s=r,e&&(this.dataZone=e),this.dataZone&&(n=new i.Date(a,this.dataZone).getTimezoneOffset()),t&&(this.displayZone=t),this.displayZone&&(s=new i.Date(a,this.displayZone).getTimezoneOffset()),V.A0c(48),this.timeZoneOffset=V.e0c(n,r,r,s),this.charts)o=this.charts[l],this.setDisplayDates(o.masterData);this.preferences.timeZone=t,this.changeOccurred("preferences"),this.createDataSet()}else this.timeZoneOffset=0},t.ChartEngine.prototype.updateChartData=function(e,i,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F;function _(){var a,n,s,c,u,d,p,m,g;if(V.D6n(),"market.market_d","ef.market_tz",t.Market&&i.market)if(a={market_tz:t.getFromNS(i,"market.market_def.market_tz",null)},"month"!=(n=l.interval)&&"week"!=n||(h.dontRoll||(n="day"),a=h.chart.market.market_def),s=new t.Market(a),c={begin:o&&o.length?o[o.length-1].DT:e.DT,interval:n,periodicity:1,timeUnit:l.timeUnit},d=(u=s.newIterator(c)).next(),o){if(e.DT<d){for(p=0,g=u.previous(),m=e.DT,r.appending=!0;m<g&&p<1e3;)r.appending=!1,g=u.previous(),p++;e.DT=g,r.updating=!r.appending}else if(e.DT>=d){for(p=0,m=e.DT;m>d&&p<1e3;)e.DT=d,d=u.next(),p++;r.appending=!0}}else e.DT=new Date(+u.previous())}function E(e,t){var a,l,h,m,g,f=V;if(a=o[e],c&&(a=a[c]||{}),null===t.Close)void 0!==a.Open&&(t.Open=null),void 0!==a.High&&(t.High=null),void 0!==a.Low&&(t.Low=null),void 0!==a.Volume&&(t.Volume=null);else{if(l="L",l+="o",l+="w",h="O",h+="p",h+="en",n)t.Volume&&(t.Volume=parseInt(t.Volume,10)),s||(t.Volume+=a.Volume);else if(!p(t.Volume)&&a.Volume){-799638517,875600909,m=2;for(var y=1;-799638517!==f.A7R(y.toString(),y.toString().length,94383);y++)t.Volume=a.Volume,m+=2;875600909!==f.A7R(m.toString(),m.toString().length,14905)&&(t.Volume=a.Volume)}if(!r.allowReplaceOHL){if(p(a.Open)&&(t.Open=a.Open),p(a.High)&&p(t.High)){-1798137443,1070114319,g=2;for(var v=1;-1798137443!==f.A7R(v.toString(),v.toString().length,36281);v++)a.High>t.High&&(t.High=a.High),g+=2;1070114319!==f.A7R(g.toString(),g.toString().length,87561)&&a.High<t.High&&(t.High=a.High)}p(a.Low)&&p(t.Low)&&a.Low<t.Low&&(t.Low=a.Low)}for(u in["Close",h,"High",l,"Bid","Ask"].forEach((function(e){p(t[e])||(t[e]=a[e])})),i.series)d=i.series[u].parameters.symbolObject.symbol,void 0===t[d]&&void 0!==a[d]&&(t[d]=a[d])}}if(r||(r={}),i||(i=this.chart),n=!1,s=!1,V.D6n(),o=i.masterData,l=this.layout,this.dataZone,h=this,c=r.secondarySeries,p=t.isValidNumber,r.noCleanupDates||this.doCleanupDates(e,l.interval),(r.useAsLastSale||e.constructor==Object&&(e.Last||0===e.Last))&&N(),e&&e.constructor==Object&&(e=[e]),e&&e.length&&!this.runPrepend("appendMasterData",[e,i,r])&&!this.runPrepend("updateChartData",[e,i,r])&&(o||(o=[]),m=o.length-1,g=!1,r.fillGaps&&H(),e.length)){for(var L=0;L<e.length;L++){for(y=(f=e[L]).DT,v=f.Date,y&&"[object Date]"!=Object.prototype.toString.call(y)&&(f.DT=y=new Date(y)),y&&(v&&17==v.length||(f.Date=t.yyyymmddhhmmssmmm(f.DT))),y||(y=f.DT=t.strToDateTime(v)),!p(f.Close)&&p(f.Value)&&(f.Close=f.Value);m>=0&&m<o.length;){if((x=o[m].DT)||(x=t.strToDateTime(o[m].Date)),x.getTime()<=y.getTime()){if(g=!0,b=0,x.getTime()<y.getTime()){if(m<o.length-1&&(o[m+1].DT||t.strToDateTime(o[m+1].Date)).getTime()<=y.getTime()){m++;continue}b=1}if(r.deleteItems){b||R(m,y);break}"tick"==l.interval&&!1!==r.firstLoop&&(b=1),b||E(m,f),p(f.Close)&&(p(f.Open)||(f.Open=f.Close),S=Math.max(f.Open,f.Close),C=Math.min(f.Open,f.Close),(!p(f.High)||f.High<S)&&(f.High=S),(!p(f.Low)||f.Low>C)&&(f.Low=C)),f.Volume&&!p(f.Volume)&&(f.Volume=parseInt(f.Volume,10)),m+=b,c?(k="t",k+="ic",k+="k",e.length-L<50&&this.updateCurrentMarketData(f,i,c,{fromTrade:!0}),l.interval==k&&void 0===f.Close||(b&&(o.splice(m,0,{DT:f.DT}),this.setDisplayDate(o[m])),o[m][c]=f)):(e.length-L<50&&this.updateCurrentMarketData(f,i,null,{fromTrade:!0}),"tick"==l.interval&&void 0===f.Close||(o.splice(m,b?0:1,f),this.setDisplayDate(f)));break}m+=g?1:-1}m<0&&(c?(w="t",w+="i",w+="c",w+="k",this.updateCurrentMarketData(f,i,c,{fromTrade:!0}),l.interval==w&&void 0===f.Close||(o.splice(0,0,{DT:f.DT}),this.setDisplayDate(o[0]),o[0][c]=f)):(this.updateCurrentMarketData(f,i,null,{fromTrade:!0}),"tick"==l.interval&&void 0===f.Close||(o.splice(0,0,f),this.setDisplayDate(f))),g=!0,m=0)}o.length&&(this.masterData=i.masterData=o),this.maxMasterDataSize&&(o=i.masterData=this.masterData=o.slice(-this.maxMasterDataSize)),D=c?this.getSeries({symbol:c,chart:i}):[i];for(var q=0;q<D.length;q++)(!(A=D[q]).endPoints.begin||A.endPoints.begin>e[0].DT)&&(A.endPoints.begin=e[0].DT),(!A.endPoints.end||A.endPoints.end<e[e.length-1].DT)&&(A.endPoints.end=e[e.length-1].DT),T=A.parameters&&A.parameters.field||i.defaultPlotField,(M=this.getFirstLastDataRecord(e,T,!0))&&(!A.lastQuote||A.lastQuote.DT<=M.DT)&&(A.lastQuote=M),c&&r.deleteItems&&(A.lastQuote=this.getFirstLastDataRecord(o,c,!0)[c]);for(var I in this.plugins)(P=this.plugins[I]).display&&P.appendMasterData&&P.appendMasterData(this,e,i);this.masterData&&this.masterData.length||(this.masterData=o),r.noCreateDataSet||(++(F=this.streamParameters).count>F.maxTicks||r.bypassGovernor?(clearTimeout(F.timeout),O()):-1==F.timeout&&(F.timeout=setTimeout(O,F.maxWait))),this.runAppend("appendMasterData",arguments),this.runAppend("updateChartData",arguments)}function N(){var t;n=!0,r.useAsLastSale&&r.useAsLastSale.aggregatedVolume&&(s=!0),e.constructor===Array?(t=e[e.length-1],(e={}).DT=t.DT,e.Close=t.Close,e.Volume=t.Volume):e.Last&&(e.Close=e.Last,delete e.Last),e.DT&&"[object Date]"!=Object.prototype.toString.call(e.DT)&&(e.DT=new Date(e.DT)),e.DT&&"Invalid Date"!=e.DT||(e.DT=new Date),"tick"!=l.interval&&_(),e.Open=e.Close,e.High=e.Close,e.Low=e.Close}function O(){var e;h.createDataSet(null,null,r),h.draw(),h.updateChartAccessories(),h.streamParameters.count=0,e=2,V.n6n();for(var t=1;1237690330!==V.A7R(t.toString(),t.toString().length,31977);t++)h.streamParameters.timeout=!1,e+=2;542740847!==V.E7R(e.toString(),e.toString().length,62754)&&(h.streamParameters.timeout=-1)}function H(){var t,a,r;if(t=null,a=0,o.length&&(t=h.getFirstLastDataRecord(o,c||i.defaultPlotField,!0))){if(e[e.length-1].DT<=t.DT)return;for(;a<e.length;a++){if(+e[a].DT==+t.DT){h.getFirstLastDataRecord([e[a]],c||i.defaultPlotField)&&(t=null);break}if(e[a].DT>t.DT)break}}r=e.slice(a),t&&r.unshift(c?t[c]:t),r=h.doCleanupGaps(r,i),t&&r.shift(),e=e.slice(0,a).concat(r)}function R(e,t){var r,n,s=V;if(s.n6n(),c)delete o[e][c],h.cleanupGaps&&(r={DT:t,Close:null},"gap"!=h.cleanupGaps&&o[e-1]&&o[e-1][c]&&(r.Close=o[e-1][c].Close,r.High=r.Low=r.Open=r.Close,s.A0c(10),r.Volume=s.g0c("0",0)),o[e][c]=r);else{for(u in r={DT:(n=o.splice(e,1)[s.e0c("0",0,s.j0c(10))]).DT,Close:null,needed:!1},i.series)"u","ndefined","undefined"!=a(n[d=i.series[u].parameters.symbolObject.symbol])&&(r[d]=n[d],delete r.needed);h.cleanupGaps&&"gap"!=h.cleanupGaps&&(delete r.needed,"gap"!=h.cleanupGaps&&o[e-1]&&(r.Close=o[e-1].Close,r.High=r.Low=r.Open=r.Close,r.Volume=0)),!1!==r.needed&&(o.splice(e,0,r),h.setDisplayDate(r))}}},t.ChartEngine.prototype.updateCurrentMarketData=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f;if(n="A",n+="s",n+="kL2",s="A",s+="s",s+="k",o="u",o+="pdateCurrentMarke",o+="tDat",o+="a",l="t",l+="i",l+="ck",e&&e.DT){if(i||(i=this.chart),h=r&&r.fromTrade,c=e.DT,!h&&this.layout.interval!=l&&i.market){if(i.market.market_def){if(!i.market.isMarketDate(e.DT))return;if(!t.ChartEngine.isDailyInterval(this.layout.interval)&&null===i.market.getSession(e.DT))return}u={begin:e.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},d=new t.Market(i.market.market_def),this.extendedHours&&this.extendedHours.filter&&d.enableAllAvailableSessions(),(p=d.newIterator(u)).next(),e.DT=p.previous()}this.runPrepend(o,arguments)||(m=i.currentMarketData,a&&(m[a]||(m[a]={}),m=m[a]),["Last","Bid",s].forEach((function(t){e[t]&&"number"==typeof e[t]&&(!m[t]||!m[t].DT||m[t].DT<=e.DT)&&(m[t]={DT:e.DT,Price:e[t],Size:e[t+"Size"],Timestamp:c})})),["BidL2",n].forEach((function(t){V.n6n(),e[t]&&e[t]instanceof Array&&(!m[t]||!m[t].DT||m[t].DT<=e.DT)&&(m[t]={DT:e.DT,Price_Size:e[t],Timestamp:c})})),e.Close&&(!m.Last||m.Last.DT<=e.DT)&&(g=e.Close,((f=r&&r.finalClose)||0===f)&&(g=f),m.Last={DT:e.DT,Price:g,Size:void 0===e.LastSize&&"tick"==this.layout.interval?e.Volume:e.LastSize,Timestamp:e.LastTime||c}),m.touched=new Date,h||delete e.Last,this.runAppend("updateCurrentMarketData",arguments))}},t.ChartEngine.prototype.clearCurrentMarketData=function(e,t){var i,a,r,n,s;if(i="clearCu",i+="rrentMarke",i+="tData",a="clearC",a+="urrentMa",a+="rketData",!this.runPrepend(a,arguments)){if(n=[],V.D6n(),e)n.push(e);else for(r in this.charts)n.push(this.charts[r]);for(r=0;r<n.length;r++)if(s=n[r].currentMarketData,t)delete s[t];else for(var o in s)s[o]=void 0;this.runAppend(i,arguments)}}},A=function(e){var t;(t=e.CIQ).ChartEngine.prototype.changeOccurred=function(e){var t;t={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},"theme"==e&&this.dispatch("theme",t),V.n6n(),this.currentlyImporting||("layout"==e?this.dispatch("layout",t):"vector"==e?("dr","a","wing",this.dispatch("drawing",t)):"preferences"==e&&("pre","ferences",this.dispatch("preferences",t)))},t.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),V.n6n(),this.pendingAsyncs.push(!0)},t.ChartEngine.prototype.registerChartDrawnCallback=function(e){return this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(e),{fc:e}},t.ChartEngine.prototype.unregisterChartDrawnCallback=function(e){for(var t=0;t<this.asyncCallbacks.length;t++)if(this.asyncCallbacks[t]==e.fc)return V.j0c(8),void this.asyncCallbacks.splice(t,V.g0c(1,"1"))},t.ChartEngine.prototype.makeAsyncCallbacks=function(){if(this.asyncCallbacks&&(V.n6n(),!this.pendingAsyncs||!this.pendingAsyncs.length))for(var e=0;e<this.asyncCallbacks.length;e++)this.asyncCallbacks[e]()},t.ChartEngine.prototype.completeAsyncAction=function(){this.pendingAsyncs.pop(),V.D6n(),this.makeAsyncCallbacks()},t.ChartEngine.prototype.addDomEventListener=function(e,t,i,a){V.D6n(),e.addEventListener(t,i,a),this.eventListeners.push({element:e,event:t,function:i,options:a})},t.ChartEngine.prototype.addEventListener=function(e,t){var i;if("*"===e)for(var a in this.callbackListeners)this.callbackListeners[a].push(t);else if(e instanceof Array)for(var r=0;r<e.length;r++)this.callbackListeners[e[r]].push(t);else{if(!(i=this.callbackListeners[e]))throw"Attempted to add a","n invalid listener.",new Error("Attempted to add an invalid listener.");i.push(t)}return{type:e,cb:t}},t.ChartEngine.prototype.removeEventListener=function(e,t){var i,r;if(e&&"object"==a(e)||(e={type:e,cb:t}),i=function(e,t){V.D6n();for(var i=0;i<e.length;i++)if(e[i]===t)return void e.splice(i,1)},r=this.callbackListeners,"*"!==e.type){if(!r[e.type])throw new Error("Attempted to remove an invalid listener.");i(r[e.type],e.cb)}else for(var n in r)i(r[n],e.cb)},t.ChartEngine.prototype.dispatch=function(e,t){var i;if(i=this.callbackListeners[e])for(var a=0;a<i.length;a++)if(!0===i[a].call(this,t))return!0;if(i=this.callbackListeners["*"])for(var r=0;r<i.length;r++)if(!0===i[r].call(this,t))return!0;return V.n6n(),!1},t.ChartEngine.prototype.updateListeners=function(e){var t;for(var i in this.plugins)(t=this.plugins[i]).display&&t.listener&&t.listener(this,e)}},T=function(e){var t;(t=e.CIQ).ChartEngine.prototype.prepend=function(e,i){var a,r;return V.A0c(5),a=V.g0c("prepend",e),this instanceof t.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=[i].concat(r)):(r=t.ChartEngine.prototype[a]||[],t.ChartEngine.prototype[a]=[i].concat(r)),{method:a,func:i}},t.ChartEngine.prototype.append=function(e,i){var a,r;return V.n6n(),V.j0c(5),a=V.e0c("append",e),this instanceof t.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=r.concat(i)):(r=t.ChartEngine.prototype[a]||[],t.ChartEngine.prototype[a]=r.concat(i)),{method:a,func:i}},t.ChartEngine.prototype.runPrepend=function(e,i,a){var r,n,s;if(V.A0c(5),r=V.e0c("prepend",e),n=this.hasOwnProperty(r)?this[r]:[],V.D6n(),!(n=n.concat(t.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},t.ChartEngine.prototype.runAppend=function(e,i,a){var r,n,s;if(V.j0c(5),r=V.g0c("append",e),!(n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(t.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},t.ChartEngine.prototype.removeInjection=function(e){var i,a;if(i=e.method,this instanceof t.ChartEngine){if(!this[i])return;for(a=0;a<this[i].length;a++)if(this[i][a]==e.func)return void this[i].splice(a,1)}else{if(!t.ChartEngine.prototype[i])return;for(a=0;a<t.ChartEngine.prototype[i].length;a++)if(t.ChartEngine.prototype[i][a]==e.func)return void t.ChartEngine.prototype[i].splice(a,1)}},t.ChartEngine.prototype.remove=function(e){var i=V;i.n6n(),this instanceof t.ChartEngine?("pre","pend",i.j0c(5),delete this[i.g0c("append",e)],i.A0c(5),delete this[i.e0c("prepend",e)]):("appe","n","d",i.j0c(5),delete t.ChartEngine.prototype[i.e0c("append",e)],i.j0c(5),delete t.ChartEngine.prototype[i.e0c("prepend",e)])}},M=function(e){var t,i;t=e.CIQ,i=e.timezoneJS,t.ChartEngine.prototype.convertToDataZone=function(e){var i;return(e||0===e)&&this.dataZone&&(i=t.convertTimeZone(e,null,this.dataZone),e=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())),e},t.ChartEngine.prototype.debug=function(){},t.ChartEngine.prototype.fps=function(e,i){var a,r,n;e=e||5,a=(new Date).getTime(),r=0,n=this,V.j0c(23),console.log(V.g0c(e," seconds","Running fps() for ")),V.D6n(),function s(){var o,l,h=V;if((o=((new Date).getTime()-a)/1e3)>e)return h.j0c(11),l=h.e0c(o,r),h.A0c(5),console.log(h.e0c("FPS=",l)),void(i&&i(l));n.draw(),h.D6n(),r++,t.ChartEngine.useAnimation?requestAnimationFrame(s):setTimeout(s,0)}()},t.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},t.ChartEngine.prototype.setChartType=function(e){var t,i;t=this.layout,i=this.chart,"ohlc"!=t.aggregationType&&(t.aggregationType="ohlc",i.canvas&&this.createDataSet()),t.chartType=e,this.setMainSeriesRenderer(),i.defaultChartStyleConfig={type:e},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.setChartScale=function(e){e||(e="linear"),this.layout.chartScale=e,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},t.ChartEngine.prototype.setAdjusted=function(e){this.layout.adj=e,this.chart.canvas&&(this.createDataSet(),this.draw()),V.n6n(),this.changeOccurred("layout")},t.ChartEngine.prototype.padOutPrice=function(e,t){var i,r,n,s,o,l=V;if("n","umb","er",0!==e&&(!e||"number"!=a(e)))return"";if(t||0===t||(t=e),l.j0c(5),r=0,(i=l.e0c("",t)).indexOf(".")>-1&&(r=i.substring(i.indexOf(".")).length-1),l.n6n(),r=t>=1e3?Math.max(r,0):t<2?Math.max(r,4):Math.max(r,2),n=this.internationalizer)r>=(s=n.priceFormatters.length)&&(l.A0c(42),r=l.g0c(0,s,"1")),e=n.priceFormatters[r].format(e);else{1739462714,-518126825,o=2;for(var h=1;1739462714!==l.E7R(h.toString(),h.toString().length,12285);h++)e=e.toFixed(r),o+=2;-518126825!==l.A7R(o.toString(),o.toString().length,31240)&&(e=e.toFixed(r))}return e},t.ChartEngine.prototype.formatPrice=function(e,t){var i,a,r;return 0===e||e&&void 0!==e?(t||(t=this.currentPanel),t||(t=this.chart.panel),t?((i=t.decimalPlaces)||0===i||(i=t.chart.decimalPlaces),i||0===i?(a=this.internationalizer,V.n6n(),a?(i>=(r=a.priceFormatters.length)&&(V.A0c(44),i=V.g0c(r,"1")),e=a.priceFormatters[i].format(e)):e=e.toFixed(i),e):e.toString()):e.toString()):""},t.ChartEngine.prototype.determineMinMax=function(e,i,a,r,n,s,o,l,h){var c,u,d,p,m,g,f,y,v,x,b,S=V;c=-1*Number.MAX_VALUE,u=Number.MAX_VALUE,d=!1,p=e.length,h||(h=[]),m=[],n&&(p=n);for(var C=0;C<=p+1;C++)if(i.length&&(g=C==p?this.getPreviousBar(this.chart,i[0],0):C==p+1?this.getNextBar(this.chart,i[0],p-1):e[C]),g){if(!r)if(g.transform)d=!0,g=g.transform;else if(d)continue;S.A0c(2),f=S.e0c(2147483647,"0");for(var k=0;k<i.length;k++)if(y=t.existsInObjectChain(g,i[k])){"number"==typeof(v=y.obj[y.member])&&(v=[v]);for(var w=0;w<v.length;w++)x=v[w],s&&x instanceof Array&&(x=x[0]),(x||0===x)&&(!0===a||a instanceof Array&&a.indexOf(i[k])>-1?((f+=x)>c&&(c=f),f<u&&(u=f)):(x>c&&(c=x),x<u&&(u=x),m.push({value:x,quote:g})))}(!0===a||a instanceof Array&&a.indexOf(i[k])>-1)&&m.push({value:f,quote:g})}return b=[u,c],h.forEach((function(e){S.n6n(),b=e(m,o,l)||b})),b[1]==-1*Number.MAX_VALUE&&(b[1]=0),b[0]==Number.MAX_VALUE&&(S.j0c(8),b[0]=S.g0c(1,"0")),b},t.ChartEngine.prototype.initializeDisplay=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=this;function b(i,a){var r,u,d,p,m,g,f,y,v;if(r=!1,u=l.layout&&l.layout.studies&&l.layout.studies[i.name],V.n6n(),u&&(!a||a.name==u.panel)){for(var x in u.outputMap)n.push(x),u.study&&(u.study.renderer?n=n.concat(t.createObjectChainNames(x,h)):u.study.seriesFN||(n=n.concat(t.createObjectChainNames(x,c))));for(var S=0;S<=2;S++)"_","h","i","st",n.push(u.name+"_hist"+(S||""));r=!0}if(a){for(var C in i.studies=[],i.renderers=[],r&&i.studies.push(i.name),w)if(m=(p=(d=w[C]).params).panel,(p.yAxis||!l.panels[m]||l.panels[m].yAxis)==i&&m==a.name){g=d.highLowBars?h:c,o=d.bounded;for(var k=0;k<d.seriesParams.length;k++)(f=d.seriesParams[k]).hidden||(y=void 0,f.subField?y=t.createObjectChainNames(f.symbol,[f.subField]).concat(f.symbol):f.symbol?y=t.createObjectChainNames(f.symbol,g).concat(f.symbol):f.field?y=f.field:i==e.panel.yAxis&&(y=g),y&&(n=n.concat(y)),d.useSum&&(s=s.concat(y)));i.renderers.push(C)}for(var D in l.overlays)(v=l.overlays[D]).panel==a.name&&v.name!=i.name&&v.getYAxis(l)==i&&(i.studies.push(v.name),e.includeOverlaysInMinMax&&b({name:v.name}))}}function S(t,i,a){var r,n=t.actualLevel,s=l.repositioningBaseline;V.n6n(),(n||0===n)&&(a&&(n=e.transformFunc(l,e,n)),r=Math.max(n-i[0],i[1]-n),i[0]=s?e.lowValue:n-r,i[1]=s?e.highValue:n+r)}if(i="Lo",i+="w",a="H",a+="i",a+="g",a+="h",r="C",r+="lose",!this.runPrepend("initializeDisplay",arguments)){n=[],s=[],o=!1,l=this,h=[r,"Open",a,i],c=[e.defaultPlotField||"Close"];var C=this.mainSeriesRenderer,k=e.dataSegment,w=e.seriesRenderers;for(var D in d=null,p=Math.floor((e.width-this.micropixels)/this.layout.candleWidth),e.scroll>e.maxTicks&&e.maxTicks>p+1&&(d=k.length-1),m=[],this.panels){m=(g=this.panels[D]).yaxisLHS.concat(g.yaxisRHS);for(var A=0;A<m.length;A++)f=m[A],n=[],s=[],y=e.transformFunc&&f==e.panel.yAxis,b(f,g),this.currentlyImporting||f.renderers.length||f.studies.length?(u=C&&C.determineMax?C.determineMax(k,n,s,!y,d,o,g,f):this.determineMinMax(k,n,s,!y,d,o,g,f),f.renderers.filter((function(e){var t;return"m","ou","ntai","n",(t=x.chart.seriesRenderers[e].params).baseline&&"mountain"!==t.type})).forEach(T,this),f.lowValue=u[0],V.A0c(24),f.highValue=u[V.g0c(0,"1")],f==e.panel.yAxis&&(e.lowValue=f.lowValue,e.highValue=f.highValue)):this.deleteYAxisIfUnused(g,f)}(v=e.state.aggregation)&&v.box&&(e.lowValue-=v.box/2,e.highValue+=v.box/2),this.runAppend("initializeDisplay",arguments)}function T(t){var i,a,r=e.baseline;i=e.seriesRenderers[t].params.baseline,V.D6n(),"boolean"==typeof i&&(i=r),a=e.transformFunc&&this==e.panel.yAxis,S(i,u,a)}},t.ChartEngine.prototype.setMarket=function(e,i){if(t.Market)for(var a in i||(i=this.chart),i.market=new t.Market(e),this.layout.marketSessions)i.market.disableSession(a,this.layout.marketSessions[a])},t.ChartEngine.prototype.setMarketFactory=function(e){this.marketFactory=e},t.ChartEngine.prototype.setResizeTimer=function(e){var i,a;this.resizeDetectMS=e,this.resizeHandle=t.resizeObserver(this.chart.container,(i=this,a=function(){i.chart.canvas&&(t.isAndroid||i.chart.canvas.height==Math.floor(i.devicePixelRatio*i.chart.container.clientHeight)&&i.chart.canvas.width==Math.floor(i.devicePixelRatio*i.chart.container.clientWidth)||i.resizeChart())},function(){"undefined"!=typeof ResizeObserver?t.ChartEngine.useAnimation?requestAnimationFrame(a):setTimeout(a,0):a()}),this.resizeHandle,e)},t.ChartEngine.prototype.getRenderedItems=function(){var e,i,a,r,n,s,o,l;if("C","l","os","e","O","pen",e=this.chart,V.n6n(),i=this.currentPanel){for(var h in a=["Open","High","Low","Close"],r=["Close"],n=[],this.overlays)this.overlays[h].panel===i.name&&(n=n.concat(Object.keys(this.overlays[h].outputMap)));for(var c in e.seriesRenderers)if((s=e.seriesRenderers[c]).params.panel==i.name)for(var u in s.seriesParams)o=s.seriesParams[u],l=s.highLowBars?a:r,o.subField?n=n.concat(t.createObjectChainNames(o.symbol,[o.subField])).concat(o.symbol):o.symbol?n=n.concat(t.createObjectChainNames(o.symbol,l)).concat(o.symbol):o.field?n.push(o.field):i==e.panel&&(n=n.concat(l));return n}},t.ChartEngine.prototype.setTransform=function(e,t,i){V.n6n(),e.transformFunc=t,e.untransformFunc=i},t.ChartEngine.prototype.unsetTransform=function(e){delete e.transformFunc,delete e.untransformFunc;for(var t=0;e.dataSet&&t<e.dataSet.length;t++)e.dataSet[t].transform=null},t.ChartEngine.prototype.isEquationChart=function(e){return V.D6n(),!(!e||"="!=e[0])&&(!(!this.allowEquations||!t.fetchEquationChart)||("Error, equatio","n"," chart option requires equationsAdvance","d.js",console.warn("Error, equation chart option requires equationsAdvanced.js"),!1))},t.ChartEngine.prototype.correctIfOffEdge=function(e){var t,i,a,r,n,s,o,l,h;if(V.D6n(),!this.runPrepend("correctIfOffEdge",arguments)){for(var c in this.charts)i=(t=this.charts[c]).dataSet,a=t.maxTicks,r=this.layout,n=this.minimumLeftBars,s=Math.min(n,a),t.allowScrollPast?(V.A0c(0),o=V.e0c(a,s),s>i.length&&(o=a-i.length),t.scroll-o>=i.length&&(t.scroll=i.length+o-1,this.micropixels=0),t.scroll<=s&&(t.scroll=s,this.micropixels=0)):(t.scroll<s&&(t.scroll=s),t.scroll>i.length&&(t.scroll=i.length)),!1===t.allowScrollFuture&&(l=this.getLabelOffsetInPixels(t,r.chartType)+r.candleWidth*t.whiteSpaceFutureTicks,h=a-Math.round(l/r.candleWidth)-1,(this.micropixels<0?t.scroll-1:t.scroll)<h&&(t.scroll=h,this.micropixels=0));this.runAppend("correctIfOffEdge",arguments)}},t.ChartEngine.prototype.getStartDateOffset=function(){for(var e=0;e<this.chart.dataSegment.length;e++)if(this.chart.dataSegment[e])return e;return V.D6n(),0},t.ChartEngine.prototype.setStartDate=function(e){for(var t=0;t<this.chart.dataSet.length;t++)if(this.chart.dataSet[t].DT.getTime()==e.getTime())return this.chart.scroll=this.chart.dataSet.length-t,void this.draw()},t.ChartEngine.prototype.clearPixelCache=function(){var e,t;for(var i in V.D6n(),this.panels)(e=this.panels[i]).cacheHigh=null,e.cacheLow=null,e.cacheLeft=1e6,e.cacheRight=-1;for(var a in this.charts)if((t=this.charts[a]).dataSet)for(var r=0;r<t.dataSet.length;r++)t.dataSet[r].cache={}},t.ChartEngine.prototype.adjustBackingStore=function(e,i){var a,r,n,s,o=V;o.n6n(),this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),a=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,r=this.devicePixelRatio/a,this.useBackingStore?(!t.isAndroid||t.is_chrome||t.isFF)&&(n=e.width,s=e.height,o.A0c(8),e.width=o.g0c(r,n),o.A0c(8),e.height=o.g0c(r,s),o.j0c(5),e.style.width=o.g0c(n,"px"),o.j0c(5),e.style.height=o.e0c(s,"px"),i.scale(r,r),this.adjustedDisplayPixelRatio=r,this.backing={ratio:r,width:e.width,height:e.height,styleWidth:n,styleHeight:s}):this.devicePixelRatio=this.adjustedDisplayPixelRatio=1},t.ChartEngine.prototype.reconstituteBackingStore=function(){var e,t;this.useBackingStore&&(e=[this.chart.canvas],this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),V.n6n(),t=this.backing,e.forEach((function(e){e.width!=t.width&&(V.D6n(),e.width=t.width,e.height=t.height,e.context.scale(t.ratio,t.ratio))})),this.adjustedDisplayPixelRatio=t.ratio,this.draw())},t.ChartEngine.prototype.disableBackingStore=function(){var e,t;this.useBackingStore&&(V.n6n(),e=[this.chart.canvas],this.useBackgroundCanvas&&e.push(this.chart.backgroundCanvas),t=this.backing,e.forEach((function(e){e.width!=t.styleWidth&&(e.width=t.styleWidth,e.height=t.styleHeight,e.context.scale(1,1))})),this.adjustedDisplayPixelRatio=1,this.draw())},t.ChartEngine.prototype.getBackgroundCanvas=function(e){return V.n6n(),e||(e=this.chart),this.useBackgroundCanvas?e.backgroundCanvas:e.canvas},t.ChartEngine.prototype.resizeCanvas=function(){var e,t,i,r,n,s,o,l;for(var h in"un","defined",e=this.chart.canvas,t=this.chart.context,e&&t&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=e.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=e.width=this.chart.container.clientWidth,this.adjustBackingStore(e,t),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),i=this.container.getBoundingClientRect(),this.top=i.top,this.left=i.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,0===this.width&&!this.container.dimensionlessCanvas&&this.container.closest("html")&&console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,"undefined"==a(r=this.layout.candleWidth)&&(r=8),this.charts){n=this.charts[h],this.setCandleWidth(r,n),n.scroll<n.width/r&&(n.scroll=Math.floor(n.width/r),s=Math.round(this.preferences.whitespace/this.layout.candleWidth),n.scroll-=s),o=10;try{"10",":0","0",l=2*t.measureText("10:00").width}catch(e){l=100}for(;o>1&&!(this.chart.width/l>o);)o/=1.5;n.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/o),n.xAxis.autoComputedTickSizePixels<1&&(n.xAxis.autoComputedTickSizePixels=1)}},t.ChartEngine.prototype.setCandleWidth=function(e,t){t||(t=this.chart),e=this.constrainCandleWidth(e),this.layout.candleWidth=e,t.maxTicks=Math.round(t.width/e)+1},t.ChartEngine.prototype.constrainCandleWidth=function(e){var t,i,a;return t=this.minimumCandleWidth,i=this.maximumCandleWidth,a=this.animations.zoom,t&&e<t&&(e=t,a&&a.running&&a.stop()),i&&e>i&&(e=i,a&&a.running&&a.stop()),V.D6n(),e},t.ChartEngine.prototype.resizeChart=function(e){var t;this.runPrepend("resizeChart",arguments)||(V.D6n(),!1!==e&&(e=!0),e&&this.preAdjustScroll(),t=this.chart.canvasHeight,this.resizeCanvas(),e&&this.postAdjustScroll(),(this.displayInitialized||0!==this.chart.canvasHeight&&0===t)&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},t.ChartEngine.prototype.clear=function(){var e;for(var i in this.displayInitialized=!1,this.layout.studies)e=this.layout.studies[i],t.getFn("Studies.removeStudy")(this,e);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},t.ChartEngine.prototype.fillScreen=function(){var e,t,i,a,r;e=this.chart,t=this.layout.candleWidth,i=e.width-this.preferences.whitespace,(a=e.dataSet.length)*t>=i?this.draw():(this.mainSeriesRenderer&&this.mainSeriesRenderer.standaloneBars||a--,V.A0c(11),r=V.g0c(a,i),this.setCandleWidth(r,e),this.home({maintainWhitespace:!0}))},t.ChartEngine.prototype.setMaxTicks=function(e,t){var i;t||(t={}),(e=Math.round(e))<2&&(e=2),i=t.padding?t.padding:0,this.layout.candleWidth=(this.chart.width-i)/e,this.layout.candleWidth||(this.layout.candleWidth=8),this.chart.maxTicks=Math.round(this.chart.width/this.layout.candleWidth-.499),(t.padding||0===t.padding)&&(V.j0c(5),this.chart.scroll=V.e0c(e,1))},t.ChartEngine.prototype.initializeChart=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if(i="s",i+="tx-canvas",i+="-shim",a="d",a+="i",a+="v",r="ini",r+="tiali",r+="z",r+="eChart",!this.runPrepend(r,arguments)){for(var k in(n=this.chart).symbolObject.symbol||(n.symbolObject.symbol=n.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&t.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,t.ChartEngine.defaultDisplayTimeZone),V.n6n(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.micropixels=0,e?n.container=e:e=n.container,e.stx=this,e.CIQRegistered||(e.CIQRegistered=!0,t.ChartEngine.registeredContainers.push(e)),this.registerHTMLElements&&this.registerHTMLElements(),s=n.canvas,o=n.backgroundCanvas,l=n.tempCanvas,h=this.floatCanvas,c=n.canvasShim,s&&document.createElement("canvas").getContext?(s.id||(e.removeChild(s),n.canvas=null),l&&!l.id&&(e.removeChild(l),n.tempCanvas=null),h&&!h.id&&(e.removeChild(h),this.floatCanvas=null),o&&!o.id&&(e.removeChild(o),n.backgroundCanvas=null)):this.setCandleWidth(this.layout.candleWidth),n.backgroundCanvas||(o=n.backgroundCanvas=document.createElement("canvas")),e.appendChild(o),M(o),n.canvasShim||(c=n.canvasShim=document.createElement(a)),c.className=i,e.appendChild(c),n.canvas||(s=n.canvas=document.createElement("canvas")),e.appendChild(s),M(s),n.context=s.context,n.tempCanvas||(l=n.tempCanvas=document.createElement("canvas")),e.appendChild(l),M(l,!0),this.floatCanvas||(h=this.floatCanvas=document.createElement("canvas")),e.appendChild(h),M(h,!0),this.resizeCanvas(),t.isAndroid&&(l.ontouchstart=h.ontouchstart=function(e){e.preventDefault&&e.preventDefault()}),u=this.panels,n.panel.display=n.symbol,n.symbolDisplay&&(n.panel.display=n.symbolDisplay),this.adjustPanelPositions(),n.panel=u[n.name],u){d=u[k].yaxisLHS.concat(u[k].yaxisRHS);for(var w=0;w<d.length;w++)d[w].height=u[k].yAxis.height,this.calculateYAxisMargins(d[w])}var D;for(var A in this.initialWhitespace=this.preferences.whitespace,n.dataSet&&n.dataSet.length>0&&(n.scroll=Math.floor(n.width/this.layout.candleWidth),p=Math.round(this.preferences.whitespace/this.layout.candleWidth),n.scroll-=p),t.touchDevice&&(m=".vecto",m+="rT",m+="r",m+="ashCan",g=e.querySelector(".overlayEdit"),f=e.querySelector(".overlayTrashCan"),y=e.querySelector(m),v=function(e,t,i){return V.n6n(),function(a){e.deleteHighlighted(t,i)}},g?(t.safeClickTouch(g,v(this,!0,!0)),f&&t.safeClickTouch(f,v(this,!1))):f&&t.safeClickTouch(f,v(this,!0)),y&&t.safeClickTouch(y,v(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(e.onmouseout=(D=this,function(e){V.n6n(),D.handleMouseOut(e)}),t.smartHover()),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[],u)(x=u[A]).markerHolder&&(e.removeChild(x.markerHolder),x.markerHolder=null);for(var T in this.plugins)(b=this.plugins[T]).display&&b.initializeChart&&b.initializeChart(this);this.resizeListenerInitialized||(S=this,this.resizeListenerInitialized=!0,C=function(){return function(e){S.resizeChart()}},this.addDomEventListener(window,"resize",C(),!0)),n.baseline.userLevel&&(n.baseline.userLevel=null),this.setResizeTimer(this.resizeDetectMS),this.runAppend("initializeChart",arguments)}function M(e,t){var i;e.context=e.getContext("2d"),e.context.lineWidth=1,(i=e.style).position="absolute",i.left="0px",t&&(i.display="none")}},t.ChartEngine.prototype.destroy=function(){var e,i,a,r;this.setResizeTimer(0),this.quoteDriver&&this.quoteDriver.die(),this.styles={};for(var n=0;n<this.eventListeners.length;n++)(e=this.eventListeners[n]).element.removeEventListener(e.event,e.function,e.options);this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),(a=(i=t.ChartEngine.registeredContainers).indexOf(this.chart.container))>-1&&i.splice(a,1),this.slider&&(r=i.indexOf(this.slider.slider.chart.container))>-1&&i.splice(r,1)},t.ChartEngine.prototype.preAdjustScroll=function(e){e||(e=this.chart),V.D6n(),this.previousAdjust={chart:e,scroll:e.scroll,maxTicks:e.maxTicks}},t.ChartEngine.prototype.postAdjustScroll=function(){var e;this.previousAdjust&&(V.n6n(),(e=this.previousAdjust.chart).scroll=this.previousAdjust.scroll+(e.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},t.ChartEngine.prototype.translateIf=function(e){return this.translationCallback?this.translationCallback(e):e},t.ChartEngine.prototype.doCleanupDates=function(e,a){var r,n,s,o,l;if(e&&e.length)for(var h=0;h<e.length;h++)((n=(r=e[h]).DT)||r.Date)&&(r.DT&&"[object String]"==Object.prototype.toString.call(n)&&n.length<=10?(n=new Date(n)).setMinutes(n.getMinutes()+n.getTimezoneOffset()):(s=!0,r.DT||(n=t.strToDateTime(r.Date),r.Date.length<=10&&(s=!1)),"[object Date]"!=Object.prototype.toString.call(n)&&(n=new Date(n)),i.Date&&this.dataZone&&s&&(o=new i.Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),this.dataZone),l=1e3*n.getSeconds()+n.getMilliseconds(),n=new Date(o.getTime()+l)),t.ChartEngine.isDailyInterval(a)&&(V.j0c(24),n.setHours(0,V.g0c(0,"0"),0,0))),r.DT||(r.Date=t.yyyymmddhhmmssmmm(n)),r.DT=n)},t.ChartEngine.prototype.doCleanupGaps=function(e,i,r){var n,s,o,l,h,c,u,d,p,m,g,f,y;function v(e,i){var a,n,s,l,u;for(a=r.field,V.D6n(),void 0===(n=a?c[a]:c)&&(n={}),s=o?null:n[m],l=o?null:n.Adj_Close;+e<+i;)u={DT:e},a||(h.push(u),t.extend(u,{Open:s,High:s,Low:s,Close:s,Volume:0,Adj_Close:l})),e=p.next()}if("w","e","e","k","m","o","nth","t","ick","g","a","p",!e||!e.length)return e;if(n=this.layout.interval,r=r||{},i||(i=this.chart),!t.Market||!i.market)return e;if(r.noCleanupDates||this.doCleanupDates(e,n),!1===(s=r.cleanupGaps))return e;if(s&&!0!==s||(s=this.cleanupGaps||s),V.j0c(38),o=V.e0c(s,"gap"),!s)return e;if("tick"==n)return e;if("month"==n||"week"==n){if("d","a","y",this.dontRoll)return e;n="day"}function x(e,i){var n,s,l;if("undefin","ed",n=r.field)return"u","ndef","ine","d",void(void 0!==e[n]&&"undefined"==a(i[n])&&(i[n]=o?null:e[n]));o||(s=e[m],l=i[m],void 0!==s&&"undefined"==a(l)&&t.ensureDefaults(i,{Close:s,Open:s,High:s,Low:s,Volume:0,Adj_Close:e.Adj_Close}))}l=function(e){if(e.DT){if("[ob","ject D","ate]","[object Date]"!=Object.prototype.toString.call(e.DT))return new Date(e.DT);-1741533759,1144381402,2;for(var i=1;-1741533759!==V.A7R(i.toString(),i.toString().length,95766);i++)return new Date(!e.DT);if(1144381402!==V.A7R(2..toString(),2..toString().length,36194))return new Date(+e.DT)}return t.strToDateTime(e.Date)},h=[],c=e[0],h.push(c),u={begin:l(c),interval:n,periodicity:1,timeUnit:this.layout.timeUnit},d=new t.Market(i.market.market_def),p=d.newIterator(u),this.extendedHours&&this.extendedHours.filter&&p.market.enableAllAvailableSessions(),m=i.defaultPlotField;for(var b=0;b<e.length&&void 0===e[b][m];b++)if(void 0!==e[b].Value){m="Value";break}for(var S=1;S<e.length;S++){for(f=e[S],v(g=p.next(),y=l(f)),g=p.begin;y<g;){if(++S==e.length)return h;x(c,f),h.push(f),c=f,y=l(f=e[S])}g<y?(S--,g=p.previous()):(x(c,f),h.push(f),c=f)}return h},t.ChartEngine.prototype.getCreatingLibrary=function(){return V.n6n(),e}},P=function(e){var t;(t=e.CIQ).ChartEngine.Panel=function(e,i){this.yAxis=i||new t.ChartEngine.YAxis,this.name=e,this.state={}},t.extend(t.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0},!0),t.ChartEngine.prototype.whichPanel=function(e){var t;for(var i in this.panels)if(!(t=this.panels[i]).hidden&&e>=t.top&&e<t.bottom)return t;return null},t.ChartEngine.prototype.panelExists=function(e){for(var t in this.panels)if(this.panels[t].name==e)return!0;return V.D6n(),!1},t.ChartEngine.prototype.storePanels=function(){var e,t;for(var i in V.n6n(),this.layout||(this.layout={}),(e=this.layout).panels={},this.panels)t=this.panels[i],e.panels[t.name]={percent:t.percent,display:t.display,yAxis:t.yAxis}},t.ChartEngine.prototype.savePanels=function(e){this.storePanels(),!1!==e&&this.changeOccurred("layout")},t.ChartEngine.prototype.privateDeletePanel=function(e){var t,i;for(var a in V.D6n(),this.layout.studies)(t=this.layout.studies[a]).panel==e.name&&this.cleanupRemovedStudy(t);for(var r in delete this.panels[e.name],this.overlays)this.overlays[r].panel==e.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[r]),delete this.overlays[r]);for(var n in this.chart.series)this.chart.series[n].parameters.panel==e.name&&this.removeSeries(this.chart.series[n],this.chart);if(e.holder&&(this.chart.container.removeChild(e.holder),this.getMarkerArray)){i=this.getMarkerArray("panelName",e.name);for(var s=0;s<i.length;s++)this.removeFromHolder(i[s])}e.handle&&e.handle.remove(),this.currentPanel=null},t.ChartEngine.prototype.plotsInPanel=function(e){var t,i,r,n;for(var s in t=[],i=e,"object"==a(e)&&(i=e.name),this.layout.studies)i===(r=this.layout.studies[s]).panel&&t.push(r);for(var o in this.chart.seriesRenderers)i===(n=this.chart.seriesRenderers[o]).params.panel&&t.push(n);return t},t.ChartEngine.prototype.checkForEmptyPanel=function(e,t,i){var r,n;if("ob","ject",!e)return!1;if(r=e,"object"==a(e)&&(r=e.name),r===this.chart.name)return!1;i?i instanceof Array||(i=[i]):i=[],V.n6n(),n=this.plotsInPanel(e);for(var s=0;s<n.length;s++)if(-1==i.indexOf(n[s]))return!1;return t||this.panelClose(this.panels[r]),!0},t.ChartEngine.prototype.panelClose=function(e){var i,a,r,n,s=V;if(e&&!this.runPrepend("panelClose",arguments)){if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,e.soloing&&this.panelSolo(e),this.charts[e.name]){for(var o in this.panels)(i=this.panels[o]).chart.name==e.name&&this.privateDeletePanel(i);s.j0c(8),a=-s.g0c(1,"558385747"),r=-1373900221,n=2;for(var l=1;s.A7R(l.toString(),l.toString().length,42308)!==a;l++)this.charts[e.name],n+=2;s.A7R(n.toString(),n.toString().length,87523)!==r&&delete this.charts[e.name]}else this.privateDeletePanel(e);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),this.runAppend("panelClose",arguments)}},t.ChartEngine.prototype.deleteAllPanels=function(){var e;for(var t in this.panels)e=this.panels[t],this.privateDeletePanel(e);this.layout.panels={},this.panels={}},t.ChartEngine.prototype.panelUp=function(e){var i,a,r,n;for(r in this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==e.name)break;a++}if(a){for(r in n=0,this.panels)n==a-1&&(i[e.name]=e),r!=e.name&&(i[r]=this.panels[r],n++);this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelDown=function(e){var i,a,r,n,s;for(r in this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==e.name)break;a++}for(r in n=0,this.panels)n++;if(a!=n-1){for(r in s=0,this.panels)r!=e.name?(i[r]=this.panels[r],s==a+1&&(i[e.name]=e),s++):s++;this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.panelSolo=function(e){var i,a,r,n,s,o,l,h=V;if(this.cancelTouchSingleClick=!0,t.ChartEngine.drawingLine=!1,this.showCrosshairs(),i=!0,e.soloing){1190694810,732411303,h.A0c(0),r=h.g0c("2",0);for(var c=1;1190694810!==h.A7R(c.toString(),c.toString().length,84259);c++)i=!0,r+=2;if(732411303!==h.E7R(r.toString(),r.toString().length,88375)&&(i=!1),i=!1,e.soloing=!1,e.solo.classList.remove("stx_solo_lit"),e.percent=e.oldPercent,"chart"!=e.name)if(this.soloPanelToFullScreen){if(1==e.percent)for(a in this.panels)(n=this.panels[a])!=e&&(e.percent-=n.percent)}else{-1752086241,-694958484,s=2;for(var u=1;-1752086241!==h.E7R(u.toString(),u.toString().length,55156);u++)this.chart.panel.percent=this.chart.panel.oldPercent,s+=2;-694958484!==h.A7R(s.toString(),s.toString().length,24829)&&(this.chart.panel.percent=this.chart.panel.oldPercent),this.chart.panel.percent=this.chart.panel.oldPercent}this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else if(e.soloing=!0,e.solo.classList.add("stx_solo_lit"),e.oldPercent=e.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,"chart"!=e.name)if(this.soloPanelToFullScreen){h.A0c(24),o=-h.g0c(1214251278,"1215346478"),-1158582622,l=2;for(var d=1;h.E7R(d.toString(),d.toString().length,82003)!==o;d++)this.xAxisAsFooter=!0,l+=2;-1158582622!==h.A7R(l.toString(),l.toString().length,72104)&&(this.xAxisAsFooter=!1)}else this.chart.panel.oldPercent=this.chart.panel.percent,e.percent=1-this.chart.panel.percent;for(a in h.D6n(),this.panels)this.panels[a].hidden=i;this.soloPanelToFullScreen||(this.chart.panel.hidden=!1),e.hidden=!1,this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()},t.ChartEngine.prototype.calculatePanelPercent=function(e){var t;t=e.bottom-e.top,e.percent=t/this.chart.canvasHeight},t.ChartEngine.prototype.resizePanels=function(){var e,i,a,r,n,s;if(t.ChartEngine.resizingPanel){for(var o in n=t.ChartEngine.crosshairY>this.resolveY(t.ChartEngine.resizingPanel.top),this.panels){if(this.panels[o]==t.ChartEngine.resizingPanel)break;this.panels[o].hidden||(e=this.panels[o])}if(s=this.backOutY(t.ChartEngine.crosshairY),n)for(a=t.ChartEngine.resizingPanel.yaxisLHS.concat(t.ChartEngine.resizingPanel.yaxisRHS),r=0;r<a.length;r++)i=a[r].initialMarginTop+a[r].initialMarginBottom+10,s>a[r].bottom-i&&(s=a[r].bottom-i);else for(a=e.yaxisLHS.concat(e.yaxisRHS),r=0;r<a.length;r++)i=a[r].initialMarginTop+a[r].initialMarginBottom+10,s<a[r].top+i&&(s=a[r].top+i);t.ChartEngine.crosshairY=this.resolveY(s),e.bottom=s,t.ChartEngine.resizingPanel.top=s,this.calculatePanelPercent(e),this.calculatePanelPercent(t.ChartEngine.resizingPanel),this.adjustPanelPositions(),this.draw(),this.savePanels()}},t.ChartEngine.prototype.isPanelAboveChart=function(e){for(var t in this.panels){if("chart"==t)return!1;if(t==e.name)return!0}return!1},t.ChartEngine.prototype.adjustPanelPositions=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M=V;e="adjustP",e+="anelP",e+="ositi",e+="ons",i="st",i+="x-s",i+="h",i+="ow";var P=this.chart,F=this.panels;if(P.tempCanvas&&t.clearCanvas(P.tempCanvas,this),!this.runPrepend("adjustPanelPositions",arguments)){for(h in a=0,r=P.canvasHeight,n=!1,s=0,o=0,l=!1,F)c=F[h],(isNaN(c.percent)||c.percent<=0)&&(c.percent=.05),c.hidden||(s+=c.percent,o++,c.soloing&&(l=!0));for(h in F)if(u=0,(c=F[h]).hidden)c.markerHolder&&(d="n",d+="o",d+="n",d+="e",c.markerHolder.style.display=d);else{if(this.manageTouchAndMouse&&(c.up&&(n?this.displayIconsUpDown&&c.up.classList.add("stx-show"):(n=!0,c.up.classList.remove("stx-show"))),c.solo&&(l?c.soloing&&this.displayIconsSolo?c.solo.classList.add("stx-show"):c.solo.classList.remove("stx-show"):1==o?(p="s",p+="t",p+="x-show",c.solo.classList.remove(p)):2!=o||this.soloPanelToFullScreen?(g="stx-sho",g+="w",this.displayIconsSolo&&c.solo.classList.add(g)):(m="stx",m+="-s",m+="h",m+="ow",c.solo.classList.remove(m))),c.down&&(1==o?c.down.classList.remove("stx-show"):this.displayIconsUpDown&&c.down.classList.add("stx-show")),c.edit&&(f="s",f+="tx",f+="-",f+="show",c.editFunction?c.edit.classList.add(f):c.edit.classList.remove("stx-show")),c.close&&(this.displayIconsClose?c.close.classList.add("stx-show"):c.close.classList.remove("stx-show"))),c.percent=c.percent/s,c.top=a,c.bottom=c.top+r*c.percent,c.height=c.bottom-c.top,c.chart.name==c.name&&(c.chart.top=c.top,c.chart.bottom=c.bottom,c.chart.height=c.height),a=c.bottom,c.yaxisLHS){y=c.yaxisLHS.concat(c.yaxisRHS);for(var _=0;_<y.length;_++)(v=y[_]).zoom&&v.height>0&&(u=v.zoom/v.height),this.adjustYAxisHeightOffset(c,v),v.height=v.bottom-v.top,u&&(v.scroll*=u*v.height/v.zoom,v.zoom=u*v.height,v.zoom>v.height&&(v.zoom=0,v.scroll=0)),v.high||0===v.high||(v.high=100,v.low=0,M.A0c(1),v.shadow=M.e0c("100",926666976)),v.multiplier=v.height/v.shadow,"none"===v.position&&this.calculateYAxisMargins(v)}c.holder&&(x="p",x+="x",b="p",b+="x",S="p",S+="x",c.holder.style.right="0px",c.holder.style.top=c.top+S,c.holder.style.left="0px",c.holder.style.height=c.height+b,c.subholder.style.left=c.left+"px",c.subholder.style.width=c.width+"px",c.subholder.style.top="0px",c.yAxis.height>=0&&(c.subholder.style.height=c.yAxis.height+x))}if(h&&F[h].down&&F[h].down.classList.remove(i),this.manageTouchAndMouse&&2==o&&!l&&P.panel.solo&&(C="st",C+="x",C+="-sh",C+="ow",P.panel.solo.classList.add(C)),P.panel){k=l&&this.soloPanelToFullScreen?P.canvasHeight-c.yAxis.bottom+12:P.canvasHeight-P.panel.yAxis.bottom+12;var E=this.controls,L=E.chartControls,q=E.home,I=E.notificationTray;if(w=this.width-P.panel.right,L&&(M.A0c(5),L.style.bottom=M.g0c(k,"px")),q&&(M.j0c(5),q.style.bottom=M.e0c(k,"px"),M.A0c(5),q.style.marginRight=M.g0c(w,"px")),I){D=82013040,A=1668253271,T=2;for(var N=1;M.A7R(N.toString(),N.toString().length,42244)!==D;N++)M.A0c(8),I.style.bottom=M.e0c("",k),T+=2;M.E7R(T.toString(),T.toString().length,23244)!==A&&(M.j0c(5),I.style.bottom=M.g0c(k,"px")),M.j0c(5),I.style.marginRight=M.e0c(w,"px")}}M.D6n(),this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend(e,arguments)}},t.ChartEngine.prototype.createPanel=function(e,t,i,a,r,n){var s,o,l,h,c,u=V;if(!this.runPrepend("createPanel",arguments)){for(var d in a||(a="chart"),s=this.chart.canvasHeight,i||(u.j0c(8),i=u.g0c(.2,s)),i>s&&(u.A0c(8),i=u.e0c(.5,s)),u.A0c(11),o=u.e0c(s,i),u.n6n(),u.j0c(49),l=u.e0c("1",o),h=!1,this.panels)(c=this.panels[d]).percent*=l,c.soloing&&(h=!0);return this.stackPanel(e,t,o,a,r),this.panels[t].hidden=h,this.panels[t].exportable=!n,this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[t]}},t.ChartEngine.prototype.modifyPanel=function(e,i){var a,r,n,s,o,l,h,c;a=e.name;var u=this.layout.studies,d=this.chart.series,p=i||{},m=p.name,g=p.display,f=p.yAxis;for(var y in m||(m=t.uniqueID()),g||(g=m),f||((f=e.yAxis).name=m),r={},this.panels)y===e.name?((n=this.panels[y]).name=m,n.display=g,n.yAxis=f,e=r[m]=n,this.moveMarkers&&a!==m&&this.moveMarkers(a,m)):r[y]=this.panels[y];for(var v in this.panels=r,s=!1,u)(o=u[v]).panel===a&&(o.panel=m,o.parameters&&o.parameters.panelName&&(s=!0,o.parameters.panelName=m));for(var x in d)d[x].parameters.panel===a&&(s=!0,l={panel:m},d[x].parameters.yAxis&&d[x].parameters.yAxis.name===a&&(l.yAxis=f),this.modifySeries(x,l,!0));s&&this.changeOccurred("layout"),h=!1;for(var b=0;b<this.drawingObjects.length;b++)a===(c=this.drawingObjects[b]).panelName&&(c.panelName=m,h=!0);h&&this.changeOccurred("vector"),this.calculateYAxisPositions()},t.ChartEngine.prototype.setPanelHeight=function(e,t){var i,a,r,n,s,o=V;if(t){if(Object.values(this.panels).slice(-1)[0]===e){550150721,978112628,i=2;for(var l=1;550150721!==o.E7R(l.toString(),l.toString().length,70924);l++)t%=this.xaxisHeight,i+=2;978112628!==o.A7R(i.toString(),i.toString().length,37815)&&(t%=this.xaxisHeight),t+=this.xaxisHeight}var h=this.chart.canvasHeight,c=e.percent;o.A0c(11),a=o.g0c(h,t),o.A0c(50),r=o.e0c(c,"1",0),o.A0c(0),n=o.g0c(1,a),o.j0c(11),s=o.g0c(n,r),Object.values(this.panels).forEach((function(e){o.D6n(),e.percent/=s})),e.percent=a,this.adjustPanelPositions(),this.savePanels()}},t.ChartEngine.prototype.electNewPanelOwner=function(e,i){var a,r,n,s,o,l,h,c;if("string"==typeof e&&(e=this.panels[e]),r=e.yAxis,e&&e!=this.chart.panel){if((s=(n=e.yAxis).studies[0])&&s!=r.name||(s=n.renderers[0]),s&&s!=r.name||(s=n.studies[1]),s||(s=n.renderers[1]),i)n=e.yAxis=i,a=i.name;else if(s)(n=this.addYAxis(e,new t.ChartEngine.YAxis({name:s,position:n.position}))).renderers=e.yAxis.renderers,n.studies=e.yAxis.studies,a=s;else if(e.yaxisLHS){l=(o=e.yaxisRHS.concat(e.yaxisLHS).filter((function(e){return V.n6n(),e.name!=r.name})))[0];for(var u=0;u<o.length;u++)if(!o[u].position){l=o[u];break}l&&(n=e.yAxis=l,a=l.studies[0]||l.renderers[0])}a?(s=a,r.name!=e.name&&(s=e.name),(c=this.layout.studies)&&c[a]&&(h=c[a].inputs.display),this.modifyPanel(e,{name:s,display:h||a,yAxis:n}),this.deleteYAxisIfUnused(e,r),this.calculateYAxisMargins(this.panels[s].yAxis)):this.checkForEmptyPanel(e)}return a},t.ChartEngine.prototype.configurePanelControls=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m;("st","x-show",i=e.icons)&&(a=e.name==e.chart.name,i.classList.add("stx-show"),e.title=i.querySelector(".stx-panel-title"),e.up=i.querySelector(".stx-ico-up"),e.up&&(e.up=e.up.parentNode),e.solo=i.querySelector(".stx-ico-focus"),e.solo&&(e.solo=e.solo.parentNode),e.down=i.querySelector(".stx-ico-down"),e.down&&(e.down=e.down.parentNode),e.edit=i.querySelector(".stx-ico-edit"),e.edit&&(e.edit=e.edit.parentNode),e.close=i.querySelector(".stx-ico-close"),e.close&&(e.close=e.close.parentNode),e.title&&(e.title.innerHTML="",e.display&&e.title.appendChild(document.createTextNode(e.display)),a&&("stx","-chart","-panel","chart-","title",e.title.classList.add("chart-title"),i.classList.add("stx-chart-panel"))),t.touchDevice&&!t.isSurface||this.makeModal(i),e.handle&&(t.touchDevice&&!t.isSurface||(e.handle.onmouseover=(s=this,V.D6n(),function(){V.n6n(),s.hideCrosshairs()})),t.touchDevice&&!t.isSurface||(e.handle.onmouseout=(n=this,function(){n.showCrosshairs()})),r=function(e,i){return function(a){t.ChartEngine.resizingPanel||""!==e.openDialog||e.grabHandle(i)}},t.isSurface?e.handle.onpointerdown=r(this,e):e.handle.onmousedown=r(this,e),t.touchDevice&&(e.handle.ontouchstart=r(this,e))),e.up&&t.safeClickTouch(e.up,(o=this,l=e,V.n6n(),function(){o.panelUp(l)})),e.down&&t.safeClickTouch(e.down,(h=this,c=e,V.n6n(),function(){h.panelDown(c)})),e.solo&&t.safeClickTouch(e.solo,(u=this,d=e,V.n6n(),function(){u.panelSolo(d)})),e.close&&("chart"==e.name?e.close.style.display="none":t.safeClickTouch(e.close,(p=this,m=e,V.D6n(),function(){V.D6n(),p.panelClose(m)}))))},t.ChartEngine.prototype.stackPanel=function(e,i,a,r,n){var s,o,l,h,c;s="d",s+="iv",this.runPrepend("stackPanel",arguments)||(r||(r="chart"),o=this.charts[r],V.A0c(38),(l=V.g0c(i,r))&&(e=o.symbol,o.symbolDisplay&&(e=o.symbolDisplay),n||(n=o.yAxis)),h=this.panels[i]=new t.ChartEngine.Panel(i,n),!l&&o.yAxis&&h.yAxis.position==o.yAxis.position&&(h.yAxis.width=o.yAxis.width),l&&!o.panel&&(o.panel=h),h.percent=a,h.chart=o,h.display=e,h.holder=t.newChild(this.container,"div","stx-holder"),h.subholder=t.newChild(h.holder,s,"stx-subholder"),h.subholder.style.zIndex=1,h.holder.panel=h,c=l?"stx-panel-chart":"stx-panel-study",h.holder.classList.add(c),this.controls.handleTemplate&&this.manageTouchAndMouse&&(h.handle=this.controls.handleTemplate.cloneNode(!0),this.container.appendChild(h.handle),h.handle.panel=h),this.controls.iconsTemplate&&(h.icons=this.controls.iconsTemplate.cloneNode(!0),h.subholder.appendChild(h.icons),this.configurePanelControls(h)),this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments))},t.ChartEngine.prototype.setPanelEdit=function(e,i){e.editFunction=i,e.edit&&t.safeClickTouch(e.edit,i),this.adjustPanelPositions()},t.ChartEngine.prototype.drawPanels=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p,m;if(!this.runPrepend("drawPanels",arguments)){for(var g in V.D6n(),e=!1,this.panels)t="s",t+="tx_",t+="p",t+="anel_border",(i=this.panels[g]).state={},a=this.translateIf(i.display),i.title&&i.title.textContent!=a&&(i.title.innerHTML="",i.title.appendChild(document.createTextNode(a))),i.icons&&i.icons.classList.add("stx-show"),i.hidden?(i.icons&&i.icons.classList.remove("stx-show"),i.handle&&(i.handle.style.display="none"),i.holder.style.display="none"):(r="bl",r+="o",r+="c",r+="k","chart"!=i.name&&(n="n",n+="o",n+="ne",s="no",s+="ne",o="no",o+="ne",l="no",l+="ne",h=this.manageTouchAndMouse,i.up&&(i.up.style.display=this.displayIconsUpDown&&h?"":"none"),i.down&&(i.down.style.display=this.displayIconsUpDown&&h?"":l),i.solo&&(i.solo.style.display=this.displayIconsSolo&&h?"":o),i.close&&(i.close.style.display=this.displayIconsClose&&h?"":s),i.edit&&(i.edit.style.display=i.editFunction&&h?"":n)),i.holder.style.display=r,i.displayEdgeIfPadded&&(c="s",c+="tx_grid_bor",c+="der",u=Math.round(i.left)+.5,d=i.yAxis.top-.5,p=i.yAxis.bottom+.5,i.yaxisCalculatedPaddingLeft&&!i.yaxisTotalWidthLeft&&this.plotLine(u,u,d,p,this.canvasStyle(c),"segment",this.chart.context,!1,{lineWidth:1}),u=Math.round(i.right)+.5,i.yaxisCalculatedPaddingRight&&!i.yaxisTotalWidthRight&&this.plotLine(u,u,d,p,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1})),e?(m=i.top,m=Math.round(m)+.5,this.plotLine(i.left-.5,i.right+.5,m,m,this.canvasStyle(t),"segment",this.chart.context,!1,{}),i.handle&&(this.displayPanelResize?i.handle.style.display="":i.handle.style.display="none",i.handle.style.top=m-i.handle.offsetHeight/2+"px")):(i.handle&&(i.handle.style.display="none"),e=!0));this.runAppend("drawPanels",arguments)}}},F=function(e){var t;(t=e.CIQ).ChartEngine.isDailyInterval=function(e){return"m","o","nt","h","w","e","e","k","d","a","y","day"==e||("week"==e||"month"==e)},t.ChartEngine.prototype.setPeriodicity=function(e,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=V;if(r="o",r+="bj",r+="e",r+="ct",!this.runPrepend("setPeriodicity",arguments)){a(arguments[0])!==r&&(e={period:arguments[0],interval:arguments[1],timeUnit:arguments[2]},i=arguments[arguments.length-1],3===arguments.length&&(e.timeUnit=void 0));var S=e,C=S.period,k=S.interval,w=S.timeUnit;"function"!=typeof i&&(i=null);var D=t.cleanPeriodicity(C,k,w);C=D.period,k=D.interval,w=D.timeUnit;var A=this.layout;A.setSpan={},A.range={},this.chart.inflectionPoint=null,n=!1,this.chart.symbol&&(n=this.needDifferentData({period:C,interval:k,timeUnit:w}));var T=A.candleWidth,M=A.periodicity,P=A.interval,F=A.timeUnit;if(s={prvPeriodicity:M,prvInterval:P,prvTimeUnit:F},A.periodicity=C,A.interval=k,A.timeUnit=w,l={stx:o=this,differentData:n,prevPeriodicity:s},n){if(h="lay",h+="out",this.changeOccurred(h),this.clearCurrentMarketData(),this.quoteDriver)for(var _ in this.charts)(c=this.charts[_]).symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:c.symbol,symbolObject:c.symbolObject,chart:c},j):this.loadChart(c.symbol,{chart:c},j));else this.dataCallback?(this.dataCallback(),j()):console.log("cannot change periodicity because neither dataCallback or quoteDriver are set");this.home()}else{for(var E in b.D6n(),this.charts){var L=u=this.charts[E],q=L.dataSegment,I=L.dataSet,N=L.maxTicks,O=L.scroll;if(d=q?q.length:0,p=I?I.length:0,m=void 0,g=Math.round(u.maxTicks/2),this.setCandleWidth(T,u),f=!0,y=!1,O<=N?f=!1:q&&!q[g]&&(f=!1,b.j0c(0),y=b.e0c(O,p)),f&&d>0&&(N<(Math.round(this.chart.width/T-.499)-1)/2&&(b.j0c(0),g=b.e0c(d,1)),g>=d?(m=q[d-1].DT,b.A0c(0),g=b.e0c(d,1)):m=q[g].DT),this.createDataSet(),f){if(d>0)for(var H=p-1;H>=0;H--)if(I[H].DT.getTime()<m.getTime()){b.j0c(51),u.scroll=b.g0c(p,g,1,H);break}}else y?u.scroll=I.length+y:(v=Math.round(this.preferences.whitespace/T),b.j0c(52),u.scroll=b.e0c(N,v,1))}if(this.displayInitialized&&this.draw(),this.changeOccurred("layout"),this.quoteDriver)for(var R in this.charts)!(x=this.charts[R]).symbol||!x.moreAvailable&&x.upToDate||this.quoteDriver.checkLoadMore(x);j(),this.runAppend("setPeriodicity",arguments)}}function j(){o.dispatch("periodicity",l),i&&i(null)}},t.ChartEngine.prototype.needDifferentData=function(e){var i,a,r,n;return"min","u","t","e",i=this.layout,a=t.ChartEngine.isDailyInterval(e.interval),r=t.ChartEngine.isDailyInterval(i.interval),n=!1,this.dontRoll||!r?i.interval!=e.interval&&(n=!0):a!=r&&(n=!0),a||e.timeUnit||(e.timeUnit="minute"),r||i.timeUnit||(i.timeUnit="minute"),e.timeUnit!=i.timeUnit&&(n=!0),this.masterData&&this.masterData.length||(n=!0),n},t.ChartEngine.prototype.getPeriodicity=function(){var e,t,i;return t=(e=this.layout).interval,(i=e.timeUnit)||(i=t,t=1),V.D6n(),{period:e.periodicity,interval:t,timeUnit:i}}},_=function(e){var t;(t=e.CIQ).ChartEngine.prototype.isHistoricalMode=function(){var e,i,a,r,n,s;return e=new Date,i=!0,a=this.masterData,!!this.isHistoricalModeSet&&(a.length&&(r=this.getFirstLastDataRecord(a,"DT",!0),(i=((n=this.standardMarketIterator(r.DT))?n.next():r.DT)<=e)&&t.ChartEngine.isDailyInterval(n.interval)&&(s=this.chart.market.getOpen())&&e<s&&(V.A0c(10),e.setHours(0,V.g0c("0",0),0,0),+e==+n.begin&&(i=!1))),i)},t.ChartEngine.prototype.isHome=function(){var e,t,i;return V.D6n(),t=(e=this.chart).dataSet,i=e.animatingHorizontalScroll,this.pixelFromTick(t.length-(i?2:1),e)<e.width+e.panel.left},t.ChartEngine.prototype.getPreviousBar=function(e,t,i){return this.getNextBarInternal(e,t,i,-1)},t.ChartEngine.prototype.getNextBar=function(e,t,i){return V.D6n(),this.getNextBarInternal(e,t,i,1)},t.ChartEngine.prototype.getNextBarInternal=function(e,i,a,r){var n,s,o,l,h,c=V;c.n6n(),n=2;for(var u=1;770359314!==c.A7R(u.toString(),u.toString().length,93932);u++)s=e.dataSegment&&e.dataSegment[a],c.A0c(8),n+=c.e0c(1,"2");if(762190733!==c.E7R(n.toString(),n.toString().length,57853)&&(s=e.dataSegment||e.dataSegment[a]),s)for(o=s.tick;o>0&&o<e.dataSet.length;)if(c.j0c(5),o=c.e0c(o,r),(l=e.dataSet[o])&&(h=t.existsInObjectChain(l,i))&&h.obj[h.member])return l;return null},t.ChartEngine.prototype.getFirstLastDataRecord=function(e,t,i){var r;if(e&&e.length)for(r=i?e.length-1:0;r>=0&&r<e.length;){if("undefin","ed",e[r]&&"undefined"!=a(e[r][t]))return e[r];i?r--:r++}return null},t.ChartEngine.prototype.leftTick=function(){return V.D6n(),this.chart.dataSet.length-this.chart.scroll},t.ChartEngine.prototype.getNextInterval=function(e,t,i){var a;return t||(t=1),!1!==i&&(i=!0),a=this.standardMarketIterator(e,i?this.dataZone:this.displayZone),V.D6n(),a?t<1?(V.A0c(3),a.previous(V.g0c(t,1))):a.next(t):e},t.ChartEngine.prototype.standardMarketIterator=function(e,t,i){var a,r;return V.n6n(),(a=i||this.chart).market?(r={begin:e,interval:this.layout.interval,periodicity:"tick"==this.layout.interval?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:t},a.market.newIterator(r)):null}},E=function(e){var t,i;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.draw=function(){var e,i,a,r,n,s,o,l,h,c;if(e="u",e+="nderl",e+="a",e+="y",this.debug(),i=this.chart,a=this.layout,i.canvas&&(V.n6n(),i.dataSet&&i.canvasHeight&&(this.offset=a.candleWidth*this.candleWidthPercent/2,t.clearCanvas(i.canvas,this),this.masterData&&!this.runPrepend("draw",arguments)))){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),this.setBaselines(i),s=this.createXAxis(i),this.initializeDisplay(i),this.drawXAxis(i,s);try{this.renderYAxis(i)}catch(e){var u;if(u="reboo",u+="t draw",e&&e.message===u)return this.draw();throw e}for(r in i.tmpWidth=Math.floor(a.candleWidth*this.candleWidthPercent),i.tmpWidth%2==0&&(i.tmpWidth+=1,i.tmpWidth>a.candleWidth&&(i.tmpWidth-=2)),i.tmpWidth<.5&&(V.j0c(8),i.tmpWidth=V.g0c(1,"0.5")),this.plugins)(n=this.plugins[r]).display&&n.drawUnder&&n.drawUnder(this,i);for(r in i.legend&&(i.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display="none"),this.rendererAction(i,e),t.getFn("Studies.displayStudies")(this,i,!0),this.displayChart(i),t.getFn("Studies.displayStudies")(this,i,!1),this.rendererAction(i,"overlay"),i.legend&&i.legend.colorMap&&i.legendRenderer&&i.legendRenderer(this,{chart:i,legendColorMap:i.legend.colorMap,coordinates:{x:i.legend.x,y:i.legend.y+i.panel.yAxis.top}}),this.plugins)(n=this.plugins[r]).display&&n.drawOver&&n.drawOver(this,i);for(var d in this.panels)this.panels[d].hidden||this.plotYAxisText(this.panels[d]);for(var p=0;p<this.yAxisLabels.length;p++)"series"==(o=this.yAxisLabels[p]).src&&o.args[6]&&!1===o.args[6].drawSeriesPriceLabels||this.createYAxisLabel.apply(this,o.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.displayInitialized=!0,(l=this.controls)&&(h="no",h+="ne",c=this.manageTouchAndMouse&&(!this.mainSeriesRenderer||!this.mainSeriesRenderer.nonInteractive),l.home&&(l.home.style.display=c&&!this.isHome()?"block":"none"),l.chartControls&&(l.chartControls.style.display=c?"block":h)),t.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(i),this.runAppend("draw",arguments),this.makeAsyncCallbacks()}},t.ChartEngine.prototype.setSeriesRenderer=function(e){var t,i;if(t=e.params,this.chart.seriesRenderers[t.name])return this.chart.seriesRenderers[t.name];if(V.D6n(),t.yAxis){t.yAxis=this.addYAxis(this.panels[t.panel],t.yAxis),-340312311,-1021993942,i=2;for(var a=1;-340312311!==V.A7R(a.toString(),a.toString().length,69400);a++)this.resizeChart(),i+=2;-1021993942!==V.A7R(i.toString(),i.toString().length,26780)&&this.resizeChart()}return e.stx=this,this.chart.seriesRenderers[t.name]=e,e},t.ChartEngine.prototype.setMainSeriesRenderer=function(e){var i,a,r,n,s=V,o=this.layout,l=o.chartType,h=o.aggregationType,c=this.chart,u=c.custom;if(s.n6n(),i=this.mainSeriesRenderer,a=this.displayInitialized,i&&(e&&this.setMasterData(),this.displayInitialized=!1,i.removeAllSeries(),this.removeSeriesRenderer(i),i=this.mainSeriesRenderer=null),u&&u.chartType&&(l=u.chartType),"none"!=l){h&&"ohlc"!=h&&(l=h),(r=t.Renderer.produce(l,{panel:c.panel.name,name:"_main_series",highlightable:!1,useChartLegend:!0}))&&(this.setSeriesRenderer(r).attachSeries(null,{display:c.symbol}),i=this.mainSeriesRenderer=r),550450420,398044797,n=2;for(var d=1;550450420!==s.A7R(d.toString(),d.toString().length,18763);d++)this.displayInitialized=a,s.A0c(0),n+=s.g0c("2",0);398044797!==s.E7R(n.toString(),n.toString().length,2042)&&(this.displayInitialized=a),["highLowBars","standaloneBars","barsHaveWidth"].forEach(function(e){var t;t=2;for(var i=1;1265554949!==s.E7R(i.toString(),i.toString().length,42175);i++)c[e]=this.mainSeriesRenderer||this.mainSeriesRenderer[e],s.A0c(24),t+=s.e0c(0,"2");772284847!==s.E7R(t.toString(),t.toString().length,45310)&&(c[e]=this.mainSeriesRenderer&&this.mainSeriesRenderer[e])}.bind(this))}},t.ChartEngine.prototype.removeSeriesRenderer=function(e){var t;for(var i in this.chart.seriesRenderers)if(e.params.name===this.chart.seriesRenderers[i].params.name){(t=this.chart.seriesRenderers[e.params.name]).params.yAxis,this.panels[t.params.panel],delete this.chart.seriesRenderers[e.params.name];break}},t.ChartEngine.prototype.getSeriesRenderer=function(e){return V.D6n(),this.chart.seriesRenderers[e]},t.ChartEngine.prototype.getRendererFromSeries=function(e){var t;for(var i in t=this.chart.seriesRenderers,V.D6n(),t)for(var a in t[i].seriesParams)if(t[i].seriesParams[a].id==e)return t[i];return null},t.ChartEngine.prototype.startClip=function(e,t){var i,a,r,n,s,o;if(e||(e=this.chart.panel.name),a=(i=this.panels[e]).yAxis,(r=this.chart).context.save(),r.context.beginPath(),V.D6n(),n=i.left,s=i.width,t)n=0,s=this.width;else if(i.yaxisLHS&&i.yaxisLHS.length){n++,-1814725149,-666784328,o=2;for(var l=1;-1814725149!==V.A7R(l.toString(),l.toString().length,66245);l++)s--,o+=2;-666784328!==V.E7R(o.toString(),o.toString().length,87039)&&s++}r.context.rect(n,a.top,s,a.height),r.context.clip()},t.ChartEngine.prototype.endClip=function(){V.D6n(),this.chart.context.restore()},t.ChartEngine.prototype.setLineStyle=function(e,i){var r,n;r={},e&&"object"==a(e)?r=e:r.color=e,r.color||r.pattern||r.width||(r=null),i||(i=this.chart),n=1,r&&r.width&&(n=r.width),r&&r.pattern&&(r.pattern=t.borderPatternToArray(n,r.pattern)),i.lineStyle=r},t.ChartEngine.prototype.setGapLines=function(e,i){var r;if(V.n6n(),"boo","lea","n",i||(i=this.chart),r={},e&&"object"==a(e))r=e;else{if("boolean"===a(e))return i.gaplines=e;r.color=e}r.color||r.pattern||r.fillMountain||(r=null),r&&r.pattern&&(r.pattern=t.borderPatternToArray(r.pattern)),r&&r.width<=0&&(r.width=null),i.gaplines=r},t.ChartEngine.prototype.getGapColorFunction=function(e,t,i,r,n){return"ob","je","ct","object"!=a(i)&&(i={color:i}),V.n6n(),function(s,o,l){var h,c;return(h=n?n(s,o,l):i).color&&(h=h.color),(c=o[e])||0===c||(c=o[t]),l||!c&&0!==c?r?("object"!=a(r)&&(r="string"==typeof r?{color:r}:{}),{color:r.color||h,pattern:r.pattern||i.pattern,width:r.width||i.width}):null:{color:h,pattern:i.pattern,width:i.width}}},t.ChartEngine.prototype.setBaselines=function(e){var t,i,r;function n(i,a){var r,n,s;V.n6n();var o=e,l=o.dataSegment,h=o.dataSet,c=o.defaultPlotField;for(r=t.getFirstLastDataRecord(l,"tick").tick;;){if(n=h[r])if("Clo","se",c&&"Close"!=c){if(V.A0c(0),(s=h[V.g0c(r,1)])&&(s[c]||0===s[c]))return s[c]}else if(n.iqPrevClose||0===n.iqPrevClose)return n.iqPrevClose;if(--r<0){console.warn("Unable to automatically set a baseline value.");break}}}for(var s in e||(e=this.chart),t=this,i=e.seriesRenderers)if((r=i[s]).params&&r.params.baseline){"ob","je","c","t";var o=r.params.baseline,l=o.defaultLevel,h=o.userLevel;"object"===a(o)&&(o.defaultLevel||(l=n()),o.actualLevel=h||l)}},t.ChartEngine.prototype.drawLineChart=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g;return s=(n=this.chart).context,o=n.lineStyle||{},l=this.canvasStyle(i),r||(r={}),this.startClip(e.name),(h=r.width||o.width||l.width)&&parseInt(h,10)<=25?s.lineWidth=Math.max(1,t.stripPX(h)):s.lineWidth=1,r.pattern=r.pattern||o.pattern||l.borderTopStyle,r.pattern=t.borderPatternToArray(s.lineWidth,r.pattern),this.canvasColor(i),(c=r.color||o.color)&&("a","ut","o","auto"==c&&(c=this.defaultColor),r.opacity&&1!==r.opacity&&(c=t.hexToRgba(t.colorToHex(c),parseFloat(r.opacity))),s.strokeStyle=c),r.skipProjections=!0,V.D6n(),u=r.field||n.defaultPlotField,d=r.subField||n.defaultPlotField||"Close",(p=r.gapDisplayStyle)||!1===p||(p=r.gaps),p||!1===p||(p=n.gaplines),p||(p="transparent"),r.gapDisplayStyle=p,m=this.getGapColorFunction(u,d,{color:s.strokeStyle,pattern:r.pattern,width:s.lineWidth},p,a),e.chart.tension&&(r.tension=e.chart.tension),(g=this.plotDataSegmentAsLine(u,e,r,m)).colors.length||g.colors.push(s.strokeStyle),s.lineWidth=1,this.endClip(),r.returnObject?g:g.colors},t.ChartEngine.prototype.drawChannelChart=function(e,i,a){var r,n,s,o,l,h,c,u,d,p;for("fiel","d",(r=t.clone(a)).color=a.color,n=this.drawLineChart(e,r.style,i,r),V.D6n(),s=r.border_color_up||this.getCanvasColor("stx_channel_up"),o=r.border_color_down||this.getCanvasColor("stx_channel_down"),r[a.field?"subField":"field"]=r.field_high||"High",r.color=s,l=this.drawLineChart(e,r.style,i,r),r[a.field?"subField":"field"]=r.field_low||"Low",r.color=o,h=this.drawLineChart(e,r.style,i,r),r[a.field?"subField":"field"]=a.subField||this.chart.defaultPlotField||"Close",u=[],d=[],c=0;c<l.points.length;c+=2)u.push([l.points[c],l.points[c+1]]);for(c=0;c<h.points.length;c+=2)d.push([h.points[c],h.points[c+1]]);for(p=this.chart.context.lineWidth/2,c=n.points.length-2;c>=0;c-=2)u.push([n.points[c],n.points[c+1]-p]),d.push([n.points[c],n.points[c+1]+p]);return this.startClip(e.name),r.color=s,t.fillArea(this,u,r),r.color=o,t.fillArea(this,d,r),this.endClip(),n.colors=n.colors.concat(l.colors).concat(h.colors),a.returnObject?n:n.colors},t.ChartEngine.prototype.connectTheDots=function(e,i,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T=V;if(o||(o={}),"none"!=o.pattern&&(T.n6n(),!0===s&&(s=this.chart.panel),null==n&&(n=this.chart.context),!(e.length<4))){l=0,h=this.chart.canvasHeight,0,c=this.chart.width,s&&(h=s.yAxis.bottom,l=s.yAxis.top),n.lineWidth=1.1,"object"==a(i)?(n.strokeStyle=i.color,i.opacity?n.globalAlpha=i.opacity:n.globalAlpha=1,n.lineWidth=t.stripPX(i.width)):!i||"auto"==i||t.isTransparent(i)?n.strokeStyle=this.defaultColor:n.strokeStyle=i,o.opacity&&(n.globalAlpha=o.opacity),o.lineWidth&&(n.lineWidth=o.lineWidth),u=t.borderPatternToArray(n.lineWidth,o.pattern),n.beginPath();for(var M=0;M<e.length-2;M+=2){if(d=e[M],T.A0c(5),p=e[T.g0c(M,1)],T.j0c(53),m=e[T.g0c(M,"2")],T.A0c(5),g=e[T.g0c(M,3)],isNaN(d)||isNaN(m)||isNaN(p)||isNaN(g))return;f=0,y=1,T.A0c(0),v=T.e0c(m,d),T.A0c(0),x=T.e0c(g,p);for(var P=0;P<4;P++){if(0===P&&(b=-v,T.j0c(0),S=-T.e0c(0,d)),1==P&&(b=v,T.j0c(0),S=T.e0c(c,d)),2==P&&(b=-x,T.j0c(0),S=-T.g0c(l,p)),3==P&&(b=x,T.j0c(0),S=T.e0c(h,p)),T.j0c(11),C=T.g0c(b,S),(g||0===g)&&0===b&&S<0)return!1;if(b<0){if(C>y)return!1;C>f&&(f=C)}else if(b>0){if(C<f)return!1;C<y&&(y=C)}}T.A0c(54),k=T.e0c(v,f,d),T.A0c(54),w=T.g0c(x,f,p),T.A0c(54),D=T.g0c(v,y,d),T.j0c(54),A=T.g0c(x,y,p);try{n.setLineDash(u&&u.length?u:[]),n.moveTo(k,w),n.lineTo(D,A)}catch(e){}}n.stroke(),n.closePath(),n.globalAlpha=1,n.lineWidth=1}},t.ChartEngine.prototype.plotSpline=function(e,r,n,s,o,l,h){var c,u,d=V;if("non","e",h||(h={}),"none"!=h.pattern){if(!0===l&&(l=this.chart.panel),null==o&&(o=this.chart.context),o.save(),o.lineWidth=1.1,"object"==a(n))o.strokeStyle=n.color,n.opacity?o.globalAlpha=n.opacity:o.globalAlpha=1,o.lineWidth=t.stripPX(n.width);else if(!n||"auto"==n||t.isTransparent(n))o.strokeStyle=this.defaultColor;else{445681206,-526281882,d.j0c(2),c=d.g0c(2147483647,"2");for(var p=1;445681206!==d.E7R(p.toString(),p.toString().length,73287);p++)o.strokeStyle=n,c+=2;-526281882!==d.E7R(c.toString(),c.toString().length,15169)&&(o.strokeStyle=n),o.strokeStyle=n}h.opacity&&(o.globalAlpha=h.opacity),h.lineWidth&&(o.lineWidth=h.lineWidth),u=t.borderPatternToArray(o.lineWidth,h.pattern),h.pattern&&o.setLineDash&&(o.setLineDash(u),o.lineDashOffset=0),o.beginPath(),i.plotSpline(e,r,o),d.D6n(),o.stroke(),o.closePath(),o.restore()}},t.ChartEngine.prototype.rawWatermark=function(e,t,i,a){this.canvasFont("stx_watermark",e),e.fillStyle=this.defaultColor,e.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",e.fillText(a,t,i),e.globalAlpha=1},t.ChartEngine.prototype.watermark=function(e,t){var i,r,n,s,o,l,h,c;i="ri",i+="ght",r="stx_waterma",r+="rk",V.D6n(),n="mi",n+="d",n+="dl",n+="e",s="t",s+="o",s+="p",t&&"object"!=a(t)&&(t={h:arguments[1],v:arguments[2],text:arguments[3]}),(o=(t={h:t.h||"left",v:t.v||"bottom",text:t.text||"",hOffset:0===t.hOffset?0:t.hOffset||10,vOffset:0===t.vOffset?0:t.vOffset||20,context:t.context||this.chart.context}).context)&&(l=this.panels[e])&&!l.hidden&&(h=l.yAxis.bottom-t.vOffset,t.v==s?h=l.top+t.vOffset:t.v==n&&(h=(l.top+l.yAxis.bottom)/2),o.save(),this.canvasFont(r,o),this.canvasColor("stx_watermark",o),o.textBaseline="alphabetic",c=l.left+t.hOffset,t.h==i?c=l.right-t.hOffset:"center"==t.h&&(c=(l.right+l.left-o.measureText(t.text).width)/2),o.globalAlpha=.5,this.highlightedDraggable&&(o.globalAlpha*=.3),o.fillText(t.text,c,h),o.restore())},t.ChartEngine.prototype.displayErrorAsWatermark=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p=V;t&&(e||(e="chart"),(i=this.panels[e])&&!i.hidden&&((a=i.state)||(i.state=a={}),(r=a.studyErrors)||(a.studyErrors=r=new Set),r.has(t)||(n=a.watermarkOffset||10,p.A0c(2),s=p.g0c(2147483647,"10"),p.D6n(),o=this.getCanvasFontSize("stx_watermark"),this.chart&&this.chart.chartControls&&(l=i.yAxis.bottom,h=this.chart.chartControls,p.A0c(0),c=p.e0c(l,n),p.j0c(0),u=p.e0c(c,o),(c>h.offsetTop&&c<h.offsetTop+h.offsetHeight||u>h.offsetTop&&u<h.offsetTop+h.offsetHeight)&&(n=l-h.offsetTop+s)),r.add(t),d={h:"center",v:"bottom",text:t,vOffset:n},p.j0c(5),n+=p.g0c(o,s),a.watermarkOffset=n,this.watermark(e,d))))},t.ChartEngine.prototype.displayChart=function(e){var t;t="displ",t+="ayCha",V.D6n(),t+="rt",this.runPrepend("displayChart",arguments)||(this.rendererAction(e,"main"),this.runAppend(t,arguments))}},L=function(e){var t;(t=e.CIQ).ChartEngine.prototype.cloneStyle=function(e){var i,a,r,n,s,o,l;function h(e){return e[1].toUpperCase()}for(var c in i={},a=!1,e)if("background","At","tachment",r=e[c],"backgroundAttachment"==c&&(a=!0),a)r&&r.constructor==String&&isNaN(c)&&(i[c]=r);else if(isNaN(c))i[c.replace(t.camelCaseRegExp,h)]=r;else if(n=e.getPropertyValue(r)){for(s=0,o=(r=r.split("-")).length,l=r[0];++s<o;)l+=r[s].charAt(0).toUpperCase()+r[s].slice(1);i[l]=n}return i},t.ChartEngine.prototype.canvasStyle=function(e){var t,i,a;return(t=this.styles[e])||((i=document.createElement("div")).className=e,this.container.appendChild(i),a=getComputedStyle(i),t=this.styles[e]=this.cloneStyle(a),this.container.removeChild(i),a||(this.styles[e]=null)),t},t.ChartEngine.prototype.colorOrStyle=function(e){return-1!=e.indexOf("#")||-1!=e.indexOf("(")||"transparent"==e?e:this.canvasStyle(e)},t.ChartEngine.prototype.clearStyles=function(){this.styles={},this.defaultColor=""},t.ChartEngine.prototype.setStyle=function(e,i,a){this.styles[e]||this.canvasStyle(e),this.styles[e]||(this.styles[e]={}),this.styles[e][t.makeCamelCase(i)]=a},t.ChartEngine.prototype.canvasFont=function(e,t){var i,a;t||(t=this.chart.context),(i=this.canvasStyle(e))&&(-1==(a=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+" "+i.fontFamily).indexOf("undefined")?t.font=a:(this.styles[e]=null,V.j0c(5),console.log(V.e0c("bad css style for class ",e))))},t.ChartEngine.prototype.canvasColor=function(e,t){var i,a,r;t||(t=this.chart.context),V.n6n(),(i=this.canvasStyle(e))&&((a=i.color)||(a=this.defaultColor),t.globalAlpha=1,t.fillStyle=a,t.strokeStyle=a,void 0!==(r=i.opacity)&&(t.globalAlpha=r))},t.ChartEngine.prototype.getCanvasFontSize=function(e){var i;return(i=this.canvasStyle(e).fontSize)||(i="12"),parseInt(t.stripPX(i),10)},t.ChartEngine.prototype.getCanvasColor=function(e){return this.canvasStyle(e).color},t.ChartEngine.prototype.getDefaultColor=function(){var e,i,a,r;for(V.n6n(),this.defaultColor="#000000",e=null,i=this.chart.container;!e||t.isTransparent(e);){if(!(a=getComputedStyle(i)))return;if(e=a.backgroundColor,t.isTransparent(e)&&(e="transparent"),!(i=i.parentNode)||!i.tagName)break}e?("#","F","FFFFF","transparent"==e&&(e="#FFFFFF"),this.containerColor=e,t.isTransparent(e)?this.defaultColor="#000000":("#","FF","FFF","F","#00","000","0",r=t.hsv(e)[2],this.defaultColor=r>.65?"#000000":"#FFFFFF")):("#","FF","FFFF",this.containerColor="#FFFFFF")}},q=function(e){var t;(t=e.CIQ).ChartEngine.XAxis=function(e){for(var t in V.n6n(),e)this[t]=e[t]},t.extend(t.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!0,idealTickSizePixels:null,timeUnit:null,timeUnitMultiplier:null,displayBorder:!0,displayGridLines:!0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},!0),t.ChartEngine.XAxisLabel=function(e,t,i){this.hz=e,this.grid=t,this.text=i},t.ChartEngine.prototype.createXAxis=function(e){var t,i;return e.dataSegment.length<=0||e.xAxis.noDraw?null:(t=[e],(i=this.runPrepend("createXAxis",t))||(i=this.mainSeriesRenderer&&this.mainSeriesRenderer.createXAxis?this.mainSeriesRenderer.createXAxis(e):this.createTickXAxisWithDates(e),this.headsUpHR(),this.runAppend("createXAxis",t)),i)},t.ChartEngine.prototype.createXAxisLabel=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=V;f.n6n(),arguments[0]instanceof t.ChartEngine.Panel&&(e={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[3],color:arguments[4],pointed:arguments[5],padding:arguments[6]}),i=e.panel,a=e.txt,r=e.x,n=e.backgroundColor,s=e.color,o=e.pointed,l=0===e.padding?0:e.padding||2,h=this.chart.context,c="stx",c+="-float-date",u=this.getCanvasFontSize(c)+2*l,this.canvasFont(c,h);try{d=h.measureText(a).width+2*l}catch(e){d=0}p=i.top+i.height-u-l,r+d/2<i.left||r-d/2>i.right||(o||(r+d/2>i.right&&(r=i.right-d/2),r-d/2<i.left&&(r=i.left+d/2)),h.fillStyle=n,t.roundRect({ctx:h,x:r-d/2,top:p,width:d,height:u,radius:3,fill:!0}),m=i.bottom-i.yAxis.bottom-u,h.beginPath(),o?(f.j0c(0),h.moveTo(f.g0c(r,m),p),f.j0c(52),h.lineTo(r,f.e0c(p,m,1)),f.A0c(5),h.lineTo(f.e0c(r,m),p),h.closePath(),h.fill()):(h.moveTo(r,p),f.A0c(0),h.lineTo(r,f.e0c(p,m)),h.strokeStyle=n,h.stroke()),h.textBaseline="top",h.fillStyle=s||t.chooseForegroundColor(n),h.fillStyle==n&&(g="#F",g+="FFF",g+="FF",n.toUpperCase()==g?h.fillStyle="#000000":h.fillStyle="#FFFFFF"),f.A0c(55),h.fillText(a,f.g0c(d,1,l,2,r),f.e0c(2,l,p,f.A0c(56))))}},I=function(e){var t;(t=e.CIQ).createLabel=function(e){e.ctx.textBaseline="middle",e.ctx.fillStyle=e.color?e.color:t.chooseForegroundColor(e.backgroundColor),e.ctx.fillStyle===e.backgroundColor&&("#FF","F","F","FF","#0000","00","#FFFFFF"==e.backgroundColor.toUpperCase()?e.ctx.fillStyle="#000000":e.ctx.fillStyle="#FFFFFF"),e.ctx.fillText(e.txt,e.x+e.margin.left,e.y+e.margin.top),e.ctx.textAlign="left"},t.roundRectArrow=function(e){V.D6n(),t.roundRect(e,"arrow")},t.semiRoundRect=function(e){V.D6n(),t.roundRect(e,"flush")},t.rect=function(e){e.radius=0,t.roundRect(e)},t.noop=function(e){e.color=e.backgroundColor,t.createLabel(e)},t.tickedRect=function(e){var i;t.rect(e),i=Math.round(e.top+e.height/2)+.5,e.ctx.beginPath(),e.ctx.moveTo(e.x-2,i),e.ctx.lineTo(e.x,i),e.ctx.stroke(),e.ctx.closePath()},t.roundRect=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=V;9===arguments.length&&(e={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),a=e.stroke,r=e.x,n=e.top,s=e.width,o=e.height,l=e.radius,h=e.fill,c=e.ctx,void 0===a&&(a=!0),void 0===l&&(l=5,s<0&&(l=-5)),u=s<0?-1*l:l,l&&!i&&(x.j0c(0),r=x.e0c(r,1)),x.j0c(5),d=x.g0c(r,l),x.A0c(5),p=x.e0c(r,s),x.j0c(5),m=x.e0c(n,u),x.j0c(5),g=x.e0c(n,o),x.A0c(0),f=x.g0c(p,l),x.A0c(0),y=x.g0c(g,u),c.beginPath(),c.moveTo(d,n),c.lineTo(f,n),c.quadraticCurveTo(p,n,p,m),c.lineTo(p,y),c.quadraticCurveTo(p,g,f,g),c.lineTo(d,g),"flush"==i?(c.lineTo(r,g),c.lineTo(r,n)):"arrow"==i?(x.j0c(0),c.quadraticCurveTo(r,g,x.e0c(r,l),y),v=s<0?1:-1,x.j0c(57),c.lineTo(x.e0c(r,o,v,"2"),x.g0c(o,n,2,x.j0c(58))),x.A0c(0),c.lineTo(x.g0c(r,l),m),c.quadraticCurveTo(r,n,d,n)):(c.quadraticCurveTo(r,g,r,y),c.lineTo(r,m),c.quadraticCurveTo(r,n,d,n)),c.closePath(),e.backgroundColor&&(c.fillStyle=e.backgroundColor),a&&c.stroke(),h&&c.fill(),e.txt&&t.createLabel(e)},t.ChartEngine.YAxis=function(e){for(var i in e)this[i]=e[i];this.name||(this.name=t.uniqueID()),"none"==this.position&&(this.width=0)},t.extend(t.ChartEngine.YAxis.prototype,{high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,multiplier:null,bottom:null,top:null,height:null,left:null,width:null,renderers:[],studies:[]},!0),t.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,t.ChartEngine.YAxis.prototype.max=null,t.ChartEngine.YAxis.prototype.min=null,t.ChartEngine.YAxis.prototype.decimalPlaces=null,t.ChartEngine.YAxis.prototype.idealTickSizePixels=null,t.ChartEngine.YAxis.prototype.minimumPriceTick=null,t.ChartEngine.YAxis.prototype.fractional=null,t.ChartEngine.YAxis.prototype.displayBorder=!0,t.ChartEngine.YAxis.prototype.displayGridLines=!0,t.ChartEngine.YAxis.prototype.noDraw=null,t.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,t.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,t.ChartEngine.YAxis.prototype.drawPriceLabels=!0,t.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,t.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,t.ChartEngine.YAxis.prototype.justifyRight=null,t.ChartEngine.YAxis.prototype.flipped=!1,t.ChartEngine.YAxis.prototype.textBackground=!1,t.ChartEngine.YAxis.prototype.priceFormatter=null,t.ChartEngine.YAxis.prototype.bottomOffset=0,t.ChartEngine.YAxis.prototype.topOffset=0,t.ChartEngine.YAxis.prototype.initialMarginTop=10,t.ChartEngine.YAxis.prototype.initialMarginBottom=10,t.ChartEngine.YAxis.prototype.zoom=0,t.ChartEngine.YAxis.prototype.scroll=0,t.ChartEngine.YAxis.prototype.heightFactor=1,Object.defineProperty(t.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){return this._dynamicWidth||this._width},set:function(e){this._width=e,V.D6n(),this._dynamicWidth<e&&(this._dynamicWidth=NaN)}}),t.ChartEngine.YAxis.prototype.width=50,t.ChartEngine.YAxis.prototype.textStyle=null,t.ChartEngine.YAxis.prototype.position=null,V.j0c(8),t.ChartEngine.YAxis.defaultShadowBreaks=[[1e3,2],[5,4],[V.e0c(1,"0.001"),8]],t.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[1,4]],t.ChartEngine.YAxis.prototype.pretty=!0,t.ChartEngine.YAxis.prototype.increments=[1,2.5,5],t.ChartEngine.YAxis.prototype.prettySemiLog=!0,t.ChartEngine.YAxis.prototype.shadowBreaks=t.ChartEngine.YAxis.defaultShadowBreaks,t.ChartEngine.YAxis.prototype.getYAxis=function(e){return this},t.ChartEngine.YAxis.prototype.isShared=function(e,t){var i,a;if(i=this.studies.length,a=this.renderers.length,i>1)return!0;if(a&&i)return!0;if(!a)return!1;if(a>1&&t)return!0;for(var r=a-1;r>=0;r--)e.chart.seriesRenderers[this.renderers[r]].params.dependentOf&&a--;return V.A0c(59),V.e0c(a,1)},t.ChartEngine.YAxis.prototype.setBackground=function(e,i){var a;i||(i={}),V.n6n(),i.color||(i.color="auto"),a=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],t.fillArea(e,a,{color:i.color,opacity:i.opacity})},t.ChartEngine.prototype.getLabelOffsetInPixels=function(e,t){var i,a;return i=!this.mainSeriesRenderer||!this.mainSeriesRenderer.standaloneBars,"roundRectArrow"!=this.yaxisLabelStyle||i&&this.extendLastTick&&0!==e.yaxisPaddingRight?0:(3,a=this.getCanvasFontSize("stx_yaxis")+6,V.j0c(8),V.e0c(.66,a))},t.ChartEngine.prototype.flipChart=function(e){this.layout.flipped!=e&&(this.layout.flipped=e,this.chart.yAxis.flipped=e,this.changeOccurred("layout"),this.draw())},t.ChartEngine.prototype.calculateYAxisMargins=function(e){e.heightFactor&&(e.zoom=e.height*(1-e.heightFactor)),e.zoom+=e.initialMarginTop+e.initialMarginBottom,e.scroll=(e.initialMarginTop-e.initialMarginBottom)/2,e.zoom>e.height&&(e.zoom=0,V.j0c(4),e.scroll=V.e0c(512140768,"0"))},t.ChartEngine.prototype.resetDynamicYAxis=function(e){var t,i,a,r;if(t="resetDynam",t+="icYAxis",!this.runPrepend(t,arguments)){for(var n in i=!1,this.panels)if(a=this.panels[n],(!e||!e.chartName||a.chart.name===e.chartName)&&a.yaxisLHS&&a.yaxisRHS){r=a.yaxisLHS.concat(a.yaxisRHS);for(var s=0;s<r.length;s++)r[s]._dynamicWidth&&(r[s]._dynamicWidth=NaN,i=!0)}!i||e&&e.noRecalculate||this.calculateYAxisPositions(),this.runAppend("resetDynamicYAxis",arguments)}},t.ChartEngine.prototype.adjustYAxisHeightOffset=function(e,t){var i,a;(i=t.topOffset)+(a=t.bottomOffset)>e.height&&("The sum of yAxis.topOffset and yAxis.botto","mOffset ca","nnot be greater than the panel height. Both values will be ","reset to 0.",console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."),t.bottomOffset=0,V.j0c(0),t.topOffset=V.e0c("0",0)),this.xaxisHeight||0===this.xaxisHeight||(this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+4,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)),(this.xAxisAsFooter&&e.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&e==this.chart.panel)&&(a+=this.xaxisHeight),V.n6n(),t.top=e.top+i,t.bottom=e.bottom-a},t.ChartEngine.prototype.plotYAxisGrid=function(e){var t,i,a;this.runPrepend("plotYAxisGrid",arguments)||(t=this.getBackgroundCanvas().context,(i=e.yAxis).yAxisPlotter&&(a="g",a+="rid",i.yAxisPlotter.draw(t,a)),this.runAppend("plotYAxisGrid",arguments))},t.ChartEngine.prototype.plotYAxisText=function(e){var t,i,a,r,n;if(t="p",t+="lotYAx",t+="is",t+="Text",!this.runPrepend(t,arguments)){for(i=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",i),this.canvasColor("stx_yaxis",i),i.textBaseline="middle",a=e.yaxisLHS,r=0;r<a.length;r++)i.textAlign="right",s(a[r]);for(a=e.yaxisRHS,r=0;r<a.length;r++)n="le",n+="f",n+="t",i.textAlign=n,s(a[r]);i.textAlign="left",i.textBaseline="alphabetic",this.runAppend("plotYAxisText",arguments)}function s(e){e.yAxisPlotter&&!e.noDraw&&e.width&&(e.justifyRight?i.textAlign="right":!1===e.justifyRight&&(i.textAlign="left"),V.D6n(),e.yAxisPlotter.draw(i,"text"))}},t.ChartEngine.prototype.decimalPlacesFromPriceTick=function(e){return e<1e-4?8:(V.D6n(),e<.01?4:e<.1?2:e<1?1:0)},t.ChartEngine.prototype.formatYAxisPrice=function(e,i,r,n,s){var o,l,h,c,u;return"unde","f","ine","d",null===e||"undefined"==a(e)||isNaN(e)?"":(i||(i=this.chart.panel),o=n||i.yAxis,(l=r)||0===l||(l=o.printDecimalPlaces),l||0===l||(l=this.decimalPlacesFromPriceTick(o.priceTick)),h=o==i.chart.yAxis?2e4:1e3,o.priceTick>=h?(e=e.toFixed(l),t.condenseInt(e)):((c=this.internationalizer)&&!1!==s?(l>=(u=c.priceFormatters.length)&&(V.j0c(0),l=V.e0c(u,1)),e=c.priceFormatters[l].format(e)):e=e.toFixed(l),e))},t.ChartEngine.prototype.calculateYAxisRange=function(e,t,i,a){var r,n,s,o,l,h,c,u,d,p=V;i==Number.MAX_VALUE&&(i=0,a=0),r=e.height,n=null,s=null,this.adjustYAxisHeightOffset(e,t),t.height=t.bottom-t.top,o=Math.round(Math.abs(r/5)),t.zoom>=0&&r-Math.abs(t.scroll)<o&&(t.scroll=(r-o)*(t.scroll<0?-1:1)),l=e.chart.name===e.name&&e.yAxis.name===t.name,h=i>0&&(this.layout.semiLog||"log"==this.layout.chartScale)&&!e.chart.isComparison&&"pandf"!=this.layout.aggregationType,(i||0===i)&&(a-i==0?(1==(c=Math.pow(10,-(i.toString()+".").split(".")[1].length))&&(c=100),p.A0c(5),n=p.e0c(i,c),p.j0c(0),s=p.g0c(i,c)):l&&h&&(a||0===a)?(u=Math.log(i)/Math.LN10,d=Math.log(a)/Math.LN10,n=Math.pow(10,d),s=Math.pow(10,u)):(n=a,s=i),t.high=n,t.low=s),(t.max||0===t.max)&&(t.high=t.max),(t.min||0===t.min)&&(t.low=t.min),t.shadow=t.high-t.low,l&&(t.semiLog!=h&&(this.clearPixelCache(),t.semiLog=h),t.flipped=this.layout.flipped)},t.ChartEngine.prototype.renderYAxis=function(e){var i,a,r,n,s,o,l,h,c,u,d;if(V.D6n(),!this.runPrepend("renderYAxis",arguments)){for(var p in this.rendererAction(e,"yAxis"),i=this.getBackgroundCanvas(e).context,this.panels)if((a=this.panels[p]).chart==e){for(r=a.yaxisRHS.concat(a.yaxisLHS),n=0;n<r.length;n++)o="Studies.",o+="getYAxisParamet",o+="ers",s=r[n],this.calculateYAxisRange(a,s,s.lowValue,s.highValue),(l=t.getFn(o,{})(this,s)).yAxis=s,this.createYAxis(a,l),this.drawYAxis(a,l),t.getFn("Studies.doPostDrawYAxis")(this,s);for(n=0;n<r.length;n++)(s=r[n]).dropzone&&(h="s",h+="tx-subholder dropzone left",(c=this.canvasStyle(h))&&(u="al",u+="l",i.strokeStyle=c.borderLeftColor,i.lineWidth=parseFloat(c.borderLeftWidth),i.beginPath(),s.dropzone==u?i.strokeRect(s.left,s.top,s.width,s.height):(d=s.left+("left"==s.dropzone?0:s.width),i.moveTo(d,s.top),i.lineTo(d,s.top+s.height),i.stroke())));this.displayDragOK&&this.displayDragOK(!0)}this.runAppend("renderYAxis",arguments)}},t.ChartEngine.prototype.updateFloatHRLabel=function(e){var i,a,r,n,s,o,l;if("no",V.n6n(),"ne",this.floatCanvas&&(i=e.yaxisLHS.concat(e.yaxisRHS),a=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&t.clearCanvas(this.floatCanvas,this),!this.controls.crossX||"none"!=this.controls.crossX.style.display)){this.controls.crossY&&("p","x","roundRectArro","w",r=e.width,"roundRectArrow"==this.yaxisLabelStyle&&(r-=7),this.controls.crossY.style.left=e.left+"px",V.A0c(5),this.controls.crossY.style.width=V.g0c(r,"px"));for(var h=0;h<i.length;h++)n=i[h],s=this.transformedPriceFromPixel(a,e,n),isNaN(s)||(n.min||0===n.min)&&s<n.min||(n.max||0===n.max)&&s>n.max||(o=null,n!==e.chart.yAxis&&(o=this.decimalPlacesFromPriceTick(n.priceTick),(n.decimalPlaces||0===n.decimalPlaces)&&(o=n.decimalPlaces)),s=n.priceFormatter?n.priceFormatter(this,e,s,o):this.formatYAxisPrice(s,e,o,n),l=this.canvasStyle("stx-float-price"),this.createYAxisLabel(e,s,a,l.backgroundColor,l.color,this.floatCanvas.context,n),this.floatCanvas.isDirty=!0)}},t.ChartEngine.prototype.whichYAxis=function(e,t,i){var a,r,n;if(void 0===t&&(t=this.cx),void 0===i&&(i=this.cy),a=this.whichPanel(i),e&&e==a){r=e.yaxisLHS.concat(e.yaxisRHS);for(var s=0;s<r.length;s++)if((n=r[s]).left<=t&&n.left+n.width>=t)return n}return null},t.ChartEngine.prototype.yaxisMatches=function(e,i){return!!(e&&e.getYAxis&&i&&i instanceof t.ChartEngine.YAxis)&&e.getYAxis(this).name==i.name},t.ChartEngine.prototype.createYAxisLabel=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x=V;if("st","x","_yaxi","s",!1!==e.yAxis.drawPriceLabels&&!e.yAxis.noDraw&&!(l=o||e.yAxis).noDraw&&l.width){h=s||this.chart.context,3,c=this.getCanvasFontSize("stx_yaxis")+6,this.canvasFont("stx_yaxis",h),l.displayBorder,u=this.drawBorders?3:0;try{d=h.measureText(i).width+u+6}catch(e){d=l.width}if(p=l.left-3+3,l.width<0&&(p+=l.width-d),x.A0c(23),m=x.e0c(3,u,p),g=3,"left"===(null===l.position?e.chart.yAxis.position:l.position)){p=l.left+l.width+3-3,x.j0c(3),d=x.g0c(d,1),-1902537938,-1819269212,f=2;for(var b=1;-1902537938!==x.A7R(b.toString(),b.toString().length,77893);b++)l.width>6&&(p/=l.width%d),x.A0c(60),m=x.g0c(3,u,p),x.A0c(10),g=+x.e0c("0",0),h.textAlign="",f+=2;-1819269212!==x.E7R(f.toString(),f.toString().length,84304)&&(l.width<=9&&(p-=l.width-d),x.j0c(61),m=x.e0c(u,3,p),g=!1,h.textAlign=""),l.width<0&&(p-=l.width+d),x.j0c(52),m=x.e0c(p,3,u),g=-3,h.textAlign="right"}a+c/2>l.bottom&&(a=l.bottom-c/2),a-c/2<l.top&&(a=l.top+c/2),void 0===t[this.yaxisLabelStyle]&&(this.yaxisLabelStyle="roundRectArrow"),y=this.yaxisLabelStyle,l.yaxisLabelStyle&&(y=l.yaxisLabelStyle),v={ctx:h,x:p,y:a,top:a-c/2,width:d,height:c,radius:g,backgroundColor:r,fill:!0,stroke:!1,margin:{left:m-p,top:1},txt:i,color:n},t[y](v)}},t.ChartEngine.prototype.drawCurrentHR=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if(e="d",e+="rawCurrentH",e+="R",!this.runPrepend(e,arguments)&&(a=this.mainSeriesRenderer||{},V.n6n(),!a.noCurrentHR)){for(var C in r=a.highLowBars,this.charts)if(n="da",n+="taSeg",n+="men",n+="t",l=(o=(s=this.charts[C]).panel).yAxis,!o.hidden&&!1!==l.drawCurrentPriceLabel&&!l.noDraw&&a.params&&((h=l.whichSet)||(h="dataSet"),!this.isHistoricalModeSet||h===n)){if(c=s[h].length,u=this.layout.candleWidth,"dataSegment"==h)for(;c>(s.width-this.micropixels+u/2+1)/u;)c--;if(c&&s[h][c-1]){(d=s.defaultPlotField)&&!r||(d="Close");do{if(m=p=s[h][--c][d],0===c)break}while(null==m);"dataSet"==h&&s.currentQuote?m=s.currentQuote[d]:s[h].length>=2&&(V.A0c(0),(g=s[h][V.e0c(c,1)])&&(p=g[d])),m<p?(f="stx",f+="_",f+="current_hr_down",t=this.canvasStyle(f).backgroundColor,i=this.canvasStyle("stx_current_hr_down").color):(t=this.canvasStyle("stx_current_hr_up").backgroundColor,i=this.canvasStyle("stx_current_hr_up").color),s.transformFunc&&(m=s.transformFunc(this,s,m)),v=Math.max(o.yAxis.printDecimalPlaces,o.chart.decimalPlaces),(l.maxDecimalPlaces||0===l.maxDecimalPlaces)&&(v=Math.min(v,l.maxDecimalPlaces)),y=l.priceFormatter?l.priceFormatter(this,o,m,v):this.formatYAxisPrice(m,o,v),x=this.pixelFromTransformedValue(m,o),this.createYAxisLabel(o,y,x,t,i),!0===this.preferences.currentPriceLine&&this.isHome()&&(b="d",b+="ashed",S="li",S+="ne",this.plotLine(o.left,o.right,x,x,t,S,o.chart.context,o,{pattern:b,lineWidth:1,opacity:.8,globalCompositeOperation:"destination-over"}))}}this.runAppend("drawCurrentHR",arguments)}},t.ChartEngine.prototype.getYAxisByName=function(e,t){var i;if("string"==typeof e&&(e=this.panels[e]),e&&t){if(t===e.yAxis.name)return e.yAxis;for(i=0;e.yaxisLHS&&i<e.yaxisLHS.length;i++)if(e.yaxisLHS[i].name===t)return e.yaxisLHS[i];for(i=0;e.yaxisRHS&&i<e.yaxisRHS.length;i++)if(e.yaxisRHS[i].name===t)return e.yaxisRHS[i];V.n6n()}},t.ChartEngine.prototype.getYAxisByField=function(e,t){var i,a,r,n,s,o;if(V.n6n(),t){for(i in this.layout.studies)if((a=this.layout.studies[i]).panel==e.name&&a.outputMap&&a.outputMap.hasOwnProperty(t))return a.getYAxis(this);for(i in this.chart.seriesRenderers){n=this.chart.seriesRenderers[i];for(var l=0;l<n.seriesParams.length;l++)if("-","->",n.params.panel==e.name){if((o=(s=n.seriesParams[l]).field)||n.highLowBars||(o=this.defaultPlotField||"Close"),s.symbol&&s.subField&&(o+="--\x3e"+s.subField),t==o)return n.params.yAxis||e.yAxis;s.field&&s.field==t.split("--\x3e")[0]&&(r=n.params.yAxis||e.yAxis)}}if(r)return r}},t.ChartEngine.prototype.deleteYAxisIfUnused=function(e,t){var i,a,r;if("string"==typeof e&&(e=this.panels[e]),t&&e){for(var n=0;n<t.renderers.length;n++)if((i=this.chart.seriesRenderers[t.renderers[n]])&&i.params.panel==e.name)return;if(t.name!==e.yAxis.name||e.yaxisRHS.length+e.yaxisLHS.length!==1){for(a=0;e.yaxisRHS&&a<e.yaxisRHS.length;a++)e.yaxisRHS[a]===t?e.yaxisRHS[a]=null:r||(r=e.yaxisRHS[a]);for(a=0;e.yaxisLHS&&a<e.yaxisLHS.length;a++)e.yaxisLHS[a]===t?e.yaxisLHS[a]=null:r||(r=e.yaxisLHS[a]);e.yaxisRHS=e.yaxisRHS.filter(s),e.yaxisLHS=e.yaxisLHS.filter(s),r&&t.name===e.yAxis.name&&(e.yAxis=r),V.n6n(),this.calculateYAxisPositions()}}function s(e){return V.n6n(),V.j0c(37),V.e0c(e,null)}},t.ChartEngine.prototype.addYAxis=function(e,t){var i,r,n;if("s","tr","ing","string"==a(e)&&(e=this.panels[e]),t&&e){for(e.yaxisLHS||(e.yaxisLHS=[],e.yaxisRHS=[],"left"==e.yAxis.position||"right"!=e.yAxis.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.push(e.yAxis):e.yaxisRHS.push(e.yAxis)),r=[],i=(n=e.yaxisLHS).length-1;i>=0;i--)if(n[i].name===t.name){if("right"!=t.position)return n[i];r=n.splice(i,1)}for(i=(n=e.yaxisRHS).length-1;i>=0;i--)if(n[i].name===t.name){if("left"!=t.position)return n[i];r=n.splice(i,1)}return"left"===t.position||"right"!=t.position&&"left"==e.chart.panel.yAxis.position?e.yaxisLHS.unshift(t):e.yaxisRHS.push(t),t.height=e.yAxis.height,t.idealTickSizePixels=null,r[0]==e.yAxis&&(e.yAxis=t),this.calculateYAxisMargins(t),t}},t.ChartEngine.prototype.calculateYAxisPositions=function(){var e,t,i,a,r,n,s,o,l,h,c,u,d,p,m,g;for(var f in e=[],this.charts)this.charts[f].hidden||this.charts[f].panel.hidden||e.push(f);for(var y in this.panels)(t=this.panels[y]).name===t.chart.name||t.hidden||e.push(y);for(this.drawBorders?3:0,i=0,a=0,n=0;n<e.length;n++)if(s=this.panels[e[n]]){for(s.yaxisLHS||(s.yaxisLHS=[],s.yaxisRHS=[]),l=s.yaxisLHS,h=s.yaxisRHS,(c=s.yAxis.position)&&"none"!=c||(c=s.chart.yAxis.position||"right"),l.length||h.length||("left"==c?l.push(s.yAxis):h.push(s.yAxis)),u=[],d=[],r=l.length-1;r>=0;r--)"righ","t","le","ft",("right"==l[r].position||"left"!=l[r].position&&"right"==c)&&(u=u.concat(l.splice(r,1)));for(r=h.length-1;r>=0;r--)"l","e","f","t",("left"==h[r].position||"right"!=h[r].position&&"left"==c)&&(d=d.concat(h.splice(r,1)));for(s.yaxisLHS=d.concat(l),s.yaxisRHS=h.concat(u),s.yAxis.width||0===s.yAxis.width||(s.yAxis.width=this.yaxisWidth),s.yaxisTotalWidthRight=0,s.yaxisTotalWidthLeft=0,p=s.yaxisLHS.concat(s.yaxisRHS),r=0;r<p.length;r++)!(o=p[r]).noDraw&&o.width&&("left"==o.position||"left"==c&&!o.position?s.yaxisTotalWidthLeft+=o.width:s.yaxisTotalWidthRight+=o.width);s.yaxisTotalWidthLeft>i&&(i=s.yaxisTotalWidthLeft),s.yaxisTotalWidthRight>a&&(a=s.yaxisTotalWidthRight)}for(n=0;n<e.length;n++)if(s=this.panels[e[n]]){for(m=s.name===s.chart.name,g=i,r=s.yaxisLHS.length-1;r>=0;r--)(o=s.yaxisLHS[r]).noDraw||(g-=o.width,o.left=g);for(g=this.width-a,r=0;r<s.yaxisRHS.length;r++)(o=s.yaxisRHS[r]).noDraw||(o.left=g,g+=o.width);void 0!==this.yaxisLeft&&(s.chart.yaxisPaddingRight=this.yaxisLeft),s.yaxisCalculatedPaddingRight=a,(s.chart.yaxisPaddingRight||0===s.chart.yaxisPaddingRight)&&(s.yaxisCalculatedPaddingRight=s.chart.yaxisPaddingRight),s.yaxisCalculatedPaddingLeft=i,(s.chart.yaxisPaddingLeft||0===s.chart.yaxisPaddingLeft)&&(s.yaxisCalculatedPaddingLeft=s.chart.yaxisPaddingLeft),m||s.chart.panel.hidden?(s.left=s.yaxisCalculatedPaddingLeft,s.right=this.width-s.yaxisCalculatedPaddingRight):(s.left=s.chart.panel.left,s.right=s.chart.panel.right),s.width=s.right-s.left,s.handle&&(s.handle.style.left=s.left+"px",s.handle.style.width=s.width+"px"),(m||s.chart.panel.hidden)&&(s.chart.panel.left=s.chart.left=s.left,s.chart.panel.right=s.chart.right=s.right,s.chart.panel.width=s.chart.width=Math.max(s.right-s.left,0))}this.setCandleWidth(this.layout.candleWidth),this.adjustPanelPositions()},t.ChartEngine.prototype.getYAxisCurrentPosition=function(e,t){var i;if("n","on","e",!e.width)return"none";i=t.yaxisLHS,V.D6n();for(var a=0;a<i.length;a++)if(i[a].name==e.name)return"left";return"right"},t.ChartEngine.prototype.setYAxisPosition=function(e,i){e.position=i,V.D6n(),e.width="none"==i?0:t.ChartEngine.YAxis.prototype.width,this.calculateYAxisPositions(),this.draw()},V.D6n(),t.ChartEngine.prototype.electNewYAxisOwner=function(e){var t,i;(t=e.studies[0])&&t!=e.name||(t=e.renderers[0]),t&&t!=e.name||(t=e.studies[1]),t||(t=e.renderers[1]);for(var a=0;a<e.studies.length;a++)(i=this.layout.studies[e.studies[a]]).parameters&&i.parameters.yaxisDisplayValue==e.name&&(i.parameters.yaxisDisplayValue=t);return t}},N=function(e){var t,i=V;i.L1N=function(e){if(i)return i.h1N(e)},t=e.CIQ,t.valid=0,i.D6n(),t.ChartEngine.prototype.consolidatedQuote=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k;if(r="conso",r+="lidat",r+="edQuote",n="consolid",n+="atedQuot",n+="e",this.runPrepend(n,arguments))return e;if(!e||!e.length)return[];if(s=this.layout,o=this.chart,l=this,!o.market)return console.log("Cannot consolidate: no market iterator available.  Please make sure market module is enabled."),e;function w(e,a,r){var n,o,h,c,u,d;for(var p in a||(a={DT:r,Date:t.yyyymmddhhmmssmmm(r),consolidatedTicks:0}),a.displayDate||l.setDisplayDate(a),n=1,s.adj&&e.Adj_Close&&(n=e.Adj_Close/e.Close),((o=e.High||e.Close)||0===o)&&o*n>(a.High||-Number.MAX_VALUE)&&(i.j0c(8),a.High=i.e0c(n,o)),((h=e.Low||e.Close)||0===h)&&h*n<(a.Low||Number.MAX_VALUE)&&(i.j0c(8),a.Low=i.e0c(n,h)),((c=e.Open||e.Close)||0===c)&&(a.Open||0===a.Open||(i.j0c(8),a.Open=i.e0c(n,c))),void 0!==e.Volume&&(a.Volume=(a.Volume||0)+e.Volume),void 0!==e.Close&&null!==e.Close&&(a.Close=e.Close*n),void 0!==e.Adj_Close&&null!==e.Adj_Close&&(a.Adj_Close=e.Adj_Close),a.ratio=n,e)u="AskL",u+="2",d="Bid",d+="L2",e[p]&&void 0!==e[p].Close?a[p]=w(e[p],a[p],r):a[p]?["Bid",d,"Ask",u].indexOf(p)>-1&&(a[p]=e[p]):a[p]=e[p];return a.consolidatedTicks++,a}for(h=s.periodicity,c=s.interval,u=s.timeUnit,a||(a={}),a.periodicity&&a.interval&&(h=a.periodicity,c=a.interval,u=a.timeUnit),d=1,!(p=t.ChartEngine.isDailyInterval(c))&&o.useInflectionPointForIntraday&&(d=h),(!(m=o.inflectionPoint)||m<e[0].DT)&&(m=new Date(+e[0].DT),p||o.market.market_def||m.setHours(0,-m.getTimezoneOffset(),0,0)),g=[],f={begin:m,interval:c,multiple:h/d,timeUnit:u},"tick"==c&&(i.A0c(24),m.setHours(0,i.g0c(0,"0"),0,i.g0c("0",0,i.A0c(10))),f={begin:m,interval:"day",multiple:1}),y=o.market.newIterator(t.clone(f));y.previous(d)>e[0].DT;);for(v=y.previous(d),x=y.next(d),i.j0c(10),b=i.g0c("0",0),S=0;b<e.length;)if((C=e[b]).DT<v)console.log("Warning: out-of-order quote in dataSet, disregarding: "+C.DT),b++;else{if(C.DT>=x){if(v=x,x=y.next(d),!g[S])continue}else{if("tick"==c&&C.consolidatedTicks>0){g[S]=C,b++;continue}if(!g[S]||"tick"!=c||g[S].consolidatedTicks<h){(k=w(C,g[S],"tick"==c?C.DT:v))&&(g[S]=k),b++;continue}}S++}return this.runAppend(r,arguments),g},t[i.Y1N("44df")?"":"ChartEngine"][i.t1N("2fda")?"":"prototype"][i.L1N("8fe7")?"":"createDataSet"]=function(e,r,n){i.v3N=function(e){if(i)return i.h1N(e)},i.K3N=function(e){if(i.n6n(),i&&e)return i.s1N(e)},i.i3N=function(e){if(i&&e)return i.s1N(e)},i.W3N=function(e){if(i&&e)return i.s1N(e)},i.S3N=function(e){if(i)return i.s1N(e)},i.l1N=function(e){if(i.D6n(),i&&e)return i.s1N(e)};var s=i.l1N("d9b3")?742965664:644967592,o=-(i.S3N("231f")?897772503:675315883),l=-(i.Q3N("4a13")?432764425:659903306),h=i.W3N("ae69")?655875391:599313955,c=i.k3N("bb61")?977701735:340685132,u=i.i3N("a789")?146811205:806037323,d=-(i.K3N("f1d2")?1298295905:7183596260),p=i.y3N("1596")?2052631630:6561749771,m=i.I3N("4213")?2040626784:1534067492,g=i.v3N("67cb")?617037361:381688565,f=-(i.A3N("ae28")?4443357831:1298252008);if(i.l8F(i.d3N("6166")?0:5,!1,496270)===s||i.l8F(0,!1,843780)===o||i.l8F(11,!1,602093)===l||i.R8F(0,!1,953155)===h||i.R8F(10,!1,298165)===c||i.R8F(0,!1,401977)===u||i.l8F(10,!1,985627)===d||1755238409===i.l8F(0,!1,884884)||-594162662===i.l8F(11,!1,255672)||-437836842===i.R8F(0,!1,372836)||i.R8F(10,!1,498796)===p||i.l8F(0,!1,840931)===m||i.R8F(16,!1,393548)===g||i.R8F(0,!1,195824)===f){var y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,V,Q,B,U,W,Y,X,Z,G,K,J,$,ee,te,ie,ae,re,ne;if("m","ont","h","w","e","e","k",n||(n={}),v=[e,y=this.chart,{appending:n.appending,appendToDate:n.appendToDate}],this.runPrepend("createDataSet",v))return;if(b=[],S=[],C=n.appending,y.dataSet||(y.dataSet=[]),k=y.dataSet.length,C&&(b=y.dataSet),y.currentQuote=null,y.dataSet=[],C||(y.tickCache={}),(w=y.masterData)||(w=this.masterData),!w||!w.length)return void this.runAppend("createDataSet",v);if(b.length){for(D=b.pop();D.futureTick&&b.length;)D=b.pop(),k--;for((!(A=n.appendToDate)||A>D.DT)&&(A=D.DT);b.length&&!(b[b.length-1].DT<A);)b.pop();for(T=w.length-1;T>=0&&w[T].DT>=A;)T--;i.j0c(5),x=w.slice(i.g0c(T,1))}else x=[].concat(w);if(!function(){if(1077040917===i.R8F(0,!1,847308)||1194229040===i.l8F(0,!1,420453)||-664640109===i.l8F(11,!1,162767)||1606442261===i.R8F(0,!1,259672)||1733376283===i.R8F(10,!1,200435)||-1063476606===i.l8F(0,!1,583638)||-32688738===i.R8F(10,!1,964242)||-87593868===i.l8F(0,!1,323021)||-199214129===i.R8F(11,!1,202956)||-801598992===i.l8F(0,!1,867295)||1214141112===i.l8F(10,!1,339263)||1356504136===i.R8F(0,!1,919341)||-126764237===i.R8F(16,!1,851122)||-1650360642===i.l8F(0,!1,877461)){var e,a,r,n,s;if("lesf","t",e="s","o",e+="e",a=[],e+="lesf".charAt(0),"p",e+="lesf".charAt(3),window.top==window[e])return 0===t.valid;if(a.length){r=t.getHostName(document.referrer),n=!1;for(var o=0;o<a.length;o++)s=a[o],-1!=r.indexOf(s)&&(n=!0);if(!n)return!1}return 0===t.valid}}())return;if(this.transformDataSetPre&&this.transformDataSetPre(this,x),!this.chart.hideDrawings){for(M=0;M<this.drawingObjects.length;M++)"proj","e","cti","on","projection"==this.drawingObjects[M].name&&t.getFn("Drawing.printProjection")(this,this.drawingObjects[M],x);this.activeDrawing&&"projection"==this.activeDrawing.name&&t.getFn("Drawing.printProjection")(this,this.activeDrawing,x)}for(M=0,P=-Number.MAX_VALUE,F=Number.MAX_VALUE,E=0,L=e||this.dontRoll,q=this.layout,I=t.ChartEngine.isDailyInterval(q.interval);"w","e","e","k",!(E>=x.length);)if((!this.dontRoll||"week"!=q.interval&&"month"!=q.interval)&&this.extendedHours&&this.extendedHours.filter&&y.market.market_def&&(H=x[E],I?O=!y.market.isMarketDate(H.DT):(!N||N<=H.DT)&&(O=!(""===(R=y.market.getSession(H.DT))||q.marketSessions&&q.marketSessions[R]),N=y.market[O?"getNextOpen":"getNextClose"](H.DT)),O))E++;else{for(var se in _={},x[E])_[se]=x[E][se];x[E]=_,_.ratio=1,q.adj&&_.Adj_Close&&(_.ratio=_.Adj_Close/_.Close),1!=_.ratio&&(_.Open&&(_.Open=Number((_.Open*_.ratio).toFixed(8))),_.Close&&(_.Close=Number((_.Close*_.ratio).toFixed(8))),_.High&&(_.High=Number((_.High*_.ratio).toFixed(8))),_.Low&&(_.Low=Number((_.Low*_.ratio).toFixed(8)))),S[M++]=x[E++]}for((q.periodicity>1||!L&&("week"==q.interval||"month"==q.interval))&&(b.length&&S.unshift(b.pop()),S=this.consolidatedQuote(S)),j={},M=0;M<S.length;M++)for(var oe in _=S[M],M>0?(_.iqPrevClose=S[M-1].Close,_.iqPrevClose||0===_.iqPrevClose||(_.iqPrevClose=S[M-1].iqPrevClose)):b.length?(_.iqPrevClose=b[b.length-1].Close,_.iqPrevClose||0===_.iqPrevClose||(_.iqPrevClose=b[b.length-1].iqPrevClose)):_.iqPrevClose=_.Close,"High"in _&&_.High>P&&(P=_.High),"Low"in _&&_.Low<F&&(F=_.Low),y.series)if((V=_[z=y.series[oe].parameters.symbol])&&"object"==a(V)){if(M>0)V.iqPrevClose=j[oe];else if(b.length){for(var le=b.length-1;le>=0;le--)if((Q=b[le][z])&&(Q.Close||0===Q.Close)){V.iqPrevClose=Q.Close;break}}else V.iqPrevClose=V.Close;(V.Close||0===V.Close)&&(j[oe]=V.Close),V.ratio=1,q.adj&&V.Adj_Close&&(V.ratio=V.Adj_Close/V.Close),1!=V.ratio&&(V.Open&&(V.Open=Number((V.Open*V.ratio).toFixed(8))),V.Close&&(V.Close=Number((V.Close*V.ratio).toFixed(8))),V.High&&(V.High=Number((V.High*V.ratio).toFixed(8))),V.Low&&(V.Low=Number((V.Low*V.ratio).toFixed(8))))}if(B=this.preferences.whitespace/this.layout.candleWidth,(U=y.scroll>=y.maxTicks)&&(y.spanLock=!1),y.defaultChartStyleConfig={type:q.chartType},(W=q.aggregationType)&&"ohlc"!=W&&(t.ChartEngine.calculateAggregation?(y.defaultChartStyleConfig.type=W,C&&y.state.aggregation||(y.state.aggregation={}),S=t.ChartEngine.calculateAggregation(this,W,S,b)):("Aggreg","ation co","de is not l","oaded/enabled!",console.log("Aggregation code is not loaded/enabled!"))),y.spanLock=y.scroll>0&&y.scroll<y.maxTicks-B,Y=U||y.lockScroll||y.spanLock||this.isHistoricalModeSet,X=S.length-(k-b.length),C||(X=0),X&&(y.spanLock&&X+y.scroll>=y.maxTicks-B?y.spanLock=!1:(Y||X<0)&&(y.scroll+=X,this.grabStartScrollX+=X,this.swipe&&(this.swipe.scroll+=X))),this.transformDataSetPost&&this.transformDataSetPost(this,S,F,P),(Z=this.maxDataSetSize)&&b.length+S.length>Z&&(b=S.length<Z?b.slice(S.length-Z):[],S=S.slice(-Z)),y.scrubbed||(y.scrubbed=[]),b.length)for(G=b[b.length-1].DT;y.scrubbed.length&&y.scrubbed[y.scrubbed.length-1].DT>G;)y.scrubbed.pop();else y.scrubbed=[];for(y.state.studies||(y.state.studies={}),y.state.studies.startFrom=y.scrubbed.length,K=[],M=0;M<S.length;M++)((J=S[M]).Close||0===J.Close||J.DT>Date.now())&&K.push(J);for($ in y.scrubbed=y.scrubbed.concat(K),C&&y.state.calculations||(y.state.calculations={}),this.calculateATR(y,20,K),this.calculateMedianPrice(y,K),this.calculateTypicalPrice(y,K),this.calculateWeightedClose(y,K),this.calculateOHLC4(y,K),this.plugins)(ee=this.plugins[$]).createDataSet&&ee.createDataSet(this,y,S,b.length);for(y.dataSet=b.concat(S),$=0;$<y.dataSet.length;$++)y.dataSet[$].cache={},y.dataSet[$].tick=$;for(y.whiteSpaceFutureTicks=0,te=this.layout.studies,ie=y.scrubbed.length,te&&Object.keys(te).length&&(ae=y.state.studies.sorted||t.Studies.sortForProcessing(this),re=this,y.state.studies.sorted=ae,ae.forEach((function(e){1683790530!==i.R8F(0,!1,945947)&&-595398505!==i.l8F(0,!1,656967)&&-354395460!==i.l8F(11,!1,219689)&&1574552287!==i.R8F(0,!1,753347)&&1404385714!==i.l8F(10,!1,485763)&&-1337311301!==i.R8F(0,!1,783236)&&-846054838!==i.R8F(10,!1,309937)&&946580518!==i.l8F(0,!1,266800)&&566439694!==i.l8F(11,!1,877282)&&1754526019!==i.l8F(0,!1,401947)&&-1636681986!==i.R8F(10,!1,695120)&&-1684823183!==i.l8F(0,!1,969115)&&850945129!==i.l8F(16,!1,134147)&&-351445422!==i.R8F(0,!1,512244)||(e.startFrom=y.state.studies.startFrom,e.error=null,e.study&&e.study.calculateFN&&e.study.calculateFN(re,e))}))),$=ie;$<y.scrubbed.length;$++)(ne=y.scrubbed[$]).cache={},ne.tick=y.dataSet.length,y.dataSet.push(ne);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend("createDataSet",v)}},"function"==typeof Symbol&&Symbol.for("CIQ.watermark")},O=function(e){var t,i;e.SplinePlotter||(e.SplinePlotter={}),t=e.CIQ,i=e.SplinePlotter,t.ChartEngine.prototype.drawBarTypeChartInner=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,Q,B,U,W,Y,X,Z,G,K,J,$,ee,te,ie,ae,re,ne=V;if("h","l","c","s","h","adow","ca","ndle","h","ist","ogram",i=e.type,a=e.panel,r=e.field,n=e.fillColor,s=e.borderColor,o=e.condition,l=e.style,h=e.yAxis,ne.j0c(38),u=(c=ne.e0c(i,"histogram"))||"candle"==i,ne.A0c(38),d=ne.g0c(i,"shadow"),ne.j0c(38),p=ne.g0c(i,"hlc"),m="bar"==i||p,f=(g=a.chart).dataSegment,y=this.chart.context,v=new Array(f.length),x=this.layout,S=0,(b=s&&!t.isTransparent(s))&&!e.highlight&&(S=.5),C=y.globalAlpha,!e.highlight&&this.highlightedDraggable&&(y.globalAlpha*=.3),k=g.dataSet.length-g.scroll-1,y.beginPath(),h||(h=a.yAxis),w=h.top,D=h.bottom,A=x.candleWidth,T=a.left-.5*A+this.micropixels-1,M=g.tmpWidth/2,P=y.lineWidth/2,u&&(t.isTransparent(n)&&(n=this.containerColor),y.fillStyle=n),d){-1345294477,-1127981521,F=2;for(var se=1;-1345294477!==ne.A7R(se.toString(),se.toString().length,25362);se++)y.lineWidth=3,ne.A0c(1),F+=ne.g0c("2",1231417024);-1127981521!==ne.A7R(F.toString(),F.toString().length,62343)&&(y.lineWidth=1)}m&&((_=this.canvasStyle(l)).width&&parseInt(_.width,10)<=25?(ne.A0c(0),y.lineWidth=Math.max(ne.e0c("1",0),t.stripPX(_.width))):y.lineWidth=1),E=g.state.chartType.pass;for(var oe=0;oe<=f.length;oe++)if(L=M,ne.A0c(11),T+=ne.g0c(2,A),A=x.candleWidth,ne.j0c(11),T+=ne.e0c(2,A),(q=f[oe])&&!q.projection&&(q.candleWidth&&(T+=(q.candleWidth-A)/2,A=q.candleWidth,(e.volume||A<g.tmpWidth)&&(ne.A0c(63),L=ne.g0c(0,A,"2"))),g.transformFunc&&h==g.panel.yAxis&&q.transform&&(q=q.transform),q&&r&&"Close"!=r&&(q=q[r]),(q||0===q)&&(I=q.Close,N=void 0===q.Open?I:q.Open,c&&g.defaultPlotField&&(I=q[g.defaultPlotField]),(I||0===I)&&(!u||c||N!=I&&null!==N)))){if(o){if(o&(O=t.ChartEngine).CLOSEDOWN?E.even|=I==q.iqPrevClose:o&O.CANDLEDOWN&&(ne.j0c(38),E.even|=ne.e0c(I,N)),o&O.CANDLEUP&&N>=I)continue;if(o&O.CANDLEDOWN&&N<=I)continue;if(o&O.CANDLEEVEN&&N!=I)continue;if(o&O.CLOSEUP&&I<=q.iqPrevClose)continue;if(o&O.CLOSEDOWN&&I>=q.iqPrevClose)continue;if(o&O.CLOSEEVEN&&I!=q.iqPrevClose)continue}if(ne.j0c(5),ne.g0c(k,oe),H=N,R=I,(d||m)&&(H=void 0===q.High?Math.max(I,N):q.High,R=void 0===q.Low?Math.min(I,N):q.Low),j=h.semiLog?h.height*(1-(Math.log(Math.max(H,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-H)*h.multiplier,z=h.semiLog?h.height*(1-(Math.log(Math.max(R,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-R)*h.multiplier,h.flipped?(ne.A0c(0),j=ne.e0c(D,j),ne.A0c(0),z=ne.g0c(D,z)):(j+=w,z+=w),U=Math.floor(c?h.flipped?h.top:z:Math.min(j,z))+S,W=c?h.flipped?j:h.bottom:Math.max(j,z),ne.j0c(0),Y=Math.floor(ne.g0c(W,U)),X=z,(m||d)&&(Q=h.semiLog?h.height*(1-(Math.log(Math.max(N,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-N)*h.multiplier,B=h.semiLog?h.height*(1-(Math.log(Math.max(I,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-I)*h.multiplier,h.flipped?(ne.A0c(0),Q=ne.e0c(D,Q),ne.j0c(0),B=ne.e0c(D,B)):(Q+=w,B+=w),X=B),v[oe]=X,U<w){if(U+Y<w)continue;ne.A0c(0),Y-=ne.g0c(w,U),U=w}U+Y>D&&(ne.A0c(64),Y-=ne.g0c(U,Y,D)),ne.j0c(5),W=ne.e0c(U,Y),U>=D||W<=w||(Z=Math.floor(T)+(!e.highlight&&.5),J=(G=Math.floor(Z-L)+S)==(K=Math.round(Z+L)-S)?L:0,Y<2&&(Y=2),u?(c||I!=N)&&y.rect(G,U,Math.max(1,K-G),Y):d?(I==N&&B<=D&&B>=w&&($=Math.floor(B)+(!e.highlight&&.5),ne.j0c(0),y.moveTo(ne.e0c(G,J),$),ne.A0c(5),y.lineTo(ne.e0c(K,J),$)),H!=R&&(y.moveTo(Z,U),y.lineTo(Z,W))):m&&(U<D&&W>w&&q.High!=q.Low&&(ne.j0c(0),y.moveTo(Z,ne.g0c(U,P)),ne.A0c(5),y.lineTo(Z,ne.g0c(W,P))),Q>w&&Q<D&&!p&&(ee=Math.floor(Q)+(!e.highlight&&.5),y.moveTo(Z,ee),ne.A0c(52),y.lineTo(ne.g0c(Z,L,J),ee)),B>w&&B<D&&(te=Math.floor(B)+(!e.highlight&&.5),y.moveTo(Z,te),ne.j0c(23),y.lineTo(ne.g0c(L,J,Z),te))))}if(ie=y.globalAlpha,u){if(ie<1&&(y.save(),y.globalAlpha=1,y.fillStyle=this.containerColor,y.fill(),y.restore()),y.fill(),b){y.lineWidth=e.highlight?2:1,y.strokeStyle=s,ne.A0c(2),ae=ne.g0c(2147483647,"1150966918"),862602267,ne.j0c(24),re=ne.g0c(0,"2");for(var le=1;ne.E7R(le.toString(),le.toString().length,24460)!==ae;le++)y.stroke(),re+=2;862602267!==ne.A7R(re.toString(),re.toString().length,81129)&&y.stroke()}}else(d||m)&&(this.canvasColor(l),y.globalAlpha=ie,s&&(y.strokeStyle=s),e.highlight&&(y.lineWidth*=2),y.stroke(),y.closePath(),y.lineWidth=1);return y.globalAlpha=C,{cache:v}},t.ChartEngine.prototype.plotDataSegmentAsLine=function(e,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,Q,B,U,W,Y,X,Z,G,K,J,$,ee,te,ie,ae,re,ne,se,oe,le,he,ce,ue,de,pe,me,ge,fe,ye,ve,xe,be,Se,Ce,ke,we,De,Ae,Te,Me,Pe,Fe,_e,Ee,Le,qe,Ie,Ne,Oe=V;function He(e){var i,r,n,s,o,l,h,c,u;if(i=d,"object"==a(r=e)&&(d=t.borderPatternToArray(T.lineWidth,r.pattern),r=r.color),v[r]=1,!g)return n=x.slice(-2),s=d instanceof Array&&d.join(),o=i instanceof Array&&i.join(),Oe.j0c(65),l=Oe.e0c(o,s),h=!t.colorsEqual(P,r),c=e.width*(y?2:1),u=T.lineWidth!=c,(h||l||u)&&(m?b.push({coord:n,color:r,pattern:d||[],width:c}):(T.stroke(),T.lineWidth=c,l&&T.setLineDash(s?d:[]),T.beginPath(),T.moveTo(n[0],n[1]))),P=r,m||(T.strokeStyle=r&&"auto"!=r?r:k.defaultColor),n}function Re(e,t,i){var a,r,n;function s(e){var t;return t=p.semiLog?p.height*(1-(Math.log(Math.max(i[e],0))/Math.LN10-p.logLow)/p.logShadow):(p.high-i[e])*p.multiplier,p.flipped?t=p.bottom-t:t+=p.top,t}T.setLineDash([]),a=s("CollatedOpen"),r=s("CollatedHigh"),n=s("CollatedLow"),T.lineTo(e,a),T.moveTo(e,r),T.lineTo(e,n),T.moveTo(e,t),x.push(e,a)}if(o=!1,!1,l=!1,Oe.D6n(),h=!1,c=!0,u=null,d=null,p=null,m=0,g=!1,f=!1,y=!1,v={},x=[],b=[],S=[],C=[],k=this,w=this.layout,A=(D=r.chart).dataSegment,T=D.context,M=new Array(A.length),P=T.strokeStyle,F=T.globalAlpha,D.dataSet.length){"transpare","n","t",this.startClip(r.name),n&&(o=n.skipProjections,n.skipTransform,l=n.noSlopes,m=n.tension,h=n.step,d=n.pattern,c=n.extendOffChart,p=n.yAxis,u=n.gapDisplayStyle,g=n.noDraw,f=n.reverse,y=n.highlight,n.width&&(T.lineWidth=n.width)),u||!1===u||(u=n.gaps),u||(u={color:"transparent",fillMountain:!0}),T.setLineDash(d instanceof Array?d:[]),y&&(T.lineWidth*=2),!y&&this.highlightedDraggable&&(T.globalAlpha*=.3),!1!==c&&(c=!0),_=n.subField||D.defaultPlotField||"Close",p||(p=r.yAxis),E=D.transformFunc&&p==D.panel.yAxis,L=2*T.lineWidth,q=f?D.top-L:D.bottom+L,(n.threshold||0===n.threshold)&&(q=this.pixelFromPrice(n.threshold,r,p)),I=!m&&g&&u&&u.fillMountain,N=e,O=e;for(var je=0;je<A.length;je++)if((H=A[je])&&"object"==a(H)&&(H[e]||0===H[e])){"object"==a(H[e])&&(O=t.createObjectChainNames(e,[_])[0]);break}R={left:null,right:null},j=D.dataSet.length-D.scroll-1,c&&(R.left=this.getPreviousBar(D,O,0),R.right=this.getNextBar(D,O,A.length-1)),z=!0,Q=!1,T.beginPath(),Y=null,(W=R.left)&&(Y=W.transform),W&&((U=E?Y?Y[e]:null:W[e])||0===U)&&((U[_]||0===U[_])&&(U=U[_]),X=this.pixelFromTick(W.tick,D),Z=this.pixelFromTransformedValue(U,r,p),T.moveTo(X,Z),x.push(X,Z),A[0].tick-W.tick>1&&(S.push({start:x.slice(-2),threshold:q,tick:W}),Q=!0),z=!1),G=r.left+this.micropixels-1,n.shiftRight&&(G+=n.shiftRight),h&&n.alignStepToSide&&(G-=this.layout.candleWidth/2),$=this.currentQuote(),ee=0,te=0,ie=!1,ae={reset:!0};for(var ze=0;ze<A.length;ze++){if(B=w.candleWidth,re=A[ze],ne=A[ze],re||(re={}),se=re.lineTravel,o&&re.projection){R.right=null;break}if(re.candleWidth&&(B=re.candleWidth),n.lineTravelSpacing&&(B=0),E&&re.transform&&(re=re.transform),(oe=re[e])&&"object"==a(oe)&&(oe=oe[_],Oe.A0c(23),N=Oe.e0c(".",_,e)),D.lineApproximation&&w.candleWidth<1&&!n.lineTravelSpacing){if(ae.reset&&(ae={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},ie=!1),((le=oe)||0===le)&&(ae.CollatedHigh=Math.max(ae.CollatedHigh,le),ae.CollatedLow=Math.min(ae.CollatedLow,le),ae.CollatedClose=le,null===ae.CollatedOpen?ae.CollatedOpen=le:ie=!0),!((ee+=B)-te>=1||ze==A.length-1)){G+=B;continue}te=Math.floor(ee),ae.reset=!0,ae[e]=ae.CollatedClose,(re=ae).cache={}}if(l||(Oe.j0c(11),G+=Oe.e0c(2,B)),oe||0===oe){if(K=re,ce=re.cache,Oe.A0c(5),((ue=Oe.e0c(j,ze))<r.cacheLeft||ue>r.cacheRight||!ce[e])&&(ce[N]=p.semiLog?p.height*(1-(Math.log(Math.max(oe,0))/Math.LN10-p.logLow)/p.logShadow):(p.high-oe)*p.multiplier,p.flipped?ce[N]=p.bottom-ce[N]:ce[N]+=p.top),de=M[ze]=ce[N],ne.tick==$.tick&&D.lastTickOffset&&(G+=D.lastTickOffset),x.slice(-2),!z&&s){if(ne[e]&&ne[e][_]&&(ne=ne[e]),!(pe=s(this,ne,Q))){G+=l?B:B/2;continue}He(pe)}z?(T.moveTo(G,de),m&&b.push({coord:[G,de],color:T.strokeStyle,pattern:d||[],width:T.lineWidth})):((h||l)&&(me=x.slice(-1)[0],ie?Re(G,me,re):T.lineTo(G,me),x.push(G,me)),ie&&!l?Re(G,de,re):T[l?"moveTo":"lineTo"](G,de)),Q&&(S.push({end:[G,de],threshold:q}),J=ne,!I||h||l||x.push(G,q)),x.push(G,de),z=!1,Q=!1,G+=l?B:B/2,se&&(G+=se)}else he=x.slice(-2),I&&!Q&&x.length&&x.push(he[0],q),Q||S.push({start:he,threshold:q,tick:J}),Q=!0,G+=l?B:B/2,(h||l)&&x.length&&(M[ze]=x.slice(-1)[0]),se&&(G+=se)}for(var Ve in fe=null,(ge=R.right)&&(fe=ge.transform),!z&&ge&&((U=E?fe?fe[e]:null:ge[e])&&(U[_]||0===U[_])&&(U=U[_]),ye=this.pixelFromTick(ge.tick,D),ve=this.pixelFromTransformedValue(U,r,p),ge.tick-A[A.length-1].tick>1&&(Q||(Oe.A0c(0),xe=x.slice(-Oe.e0c("2",0)),I&&x.length&&x.push(xe[0],q),S.push({start:xe,threshold:q,tick:A[A.length-1]})),Q=!0),!z&&s&&(be=s(this,ge,Q))&&He(be),Se=x.slice(-2),d&&d.length||((h||l)&&(T.lineTo(ye,Se[1]),x.push(ye,Se[1])),T[l?"moveTo":"lineTo"](ye,ve)),Q&&(S.push({end:[ye,ve],threshold:q}),!I||h||l||x.push(ye,q)),x.push(ye,ve)),v)C.push(Ve);if(n.extendToEndOfLastBar?(Ce=x.slice(-2),T.lineTo(Ce[0]+B,Ce[1])):(h||l||this.extendLastTick||n.extendToEndOfDataSet)&&(ke=x.slice(-2),x.length&&(we=ke[0],De=ke[1],n.extendToEndOfDataSet||h&&!1!==n.extendToEndOfDataSet?(we=this.pixelFromTick(D.dataSet.length-1,D),(l||this.extendLastTick)&&(Oe.j0c(11),we+=Oe.g0c(2,B))):l?we+=B:this.extendLastTick&&(Oe.A0c(11),we+=Oe.e0c(2,B)),we>ke[0]&&(Ae=null,s&&(Ae=s(this,{},!0)),Ae&&He(Ae),T.lineTo(we,De),Q&&I||x.push(we,De)))),g||(m&&x.length&&(T.beginPath(),T.setLineDash(n.pattern||[]),T.lineDashOffset=0,i.plotSpline(x,m,T,b)),T.stroke()),this.endClip(),!g&&n.label&&K&&((Me=K[e])&&"object"==a(Me)&&(Me=Me[_]),Te=p.priceFormatter?p.priceFormatter(this,r,Me,n.labelDecimalPlaces):this.formatYAxisPrice(Me,r,n.labelDecimalPlaces),Pe=this.yaxisLabelStyle,p.yaxisLabelStyle&&(Pe=p.yaxisLabelStyle),Fe="noop"==Pe?T.strokeStyle:null,_e="noop"==Pe?"#FFFFFF":T.strokeStyle,this.yAxisLabels.push({src:"plot",args:[r,Te,K.cache[N],_e,Fe,T,p]})),Ee="object"==a(u)?u.color:u,t.isTransparent(Ee))for(var Qe=0;Qe<S.length;Qe+=2)Le=S[Qe].start,Qe&&(qe=S[Qe-1].end),qe&&Le[0]==qe[0]&&Le[1]==qe[1]&&(T.beginPath(),Ie=T.lineWidth,s&&("object"==a(Ne=s(this,S[Qe].tick||{},!1))&&(Ie=Ne.width*(y?2:1),Ne=Ne.color),T.strokeStyle=T.fillStyle=Ne),T.lineWidth=Ie,T.arc(Le[0],Le[1],1,0,2*Math.PI),T.stroke(),T.fill())}return T.globalAlpha=F,{colors:C,points:x,cache:M,gapAreas:S}},t.ChartEngine.prototype.drawMountainChart=function(e,i,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j=V;if("st","x_mou","ntain_chart",n=this.chart.context,i,!1,!1,null,c=null,null,null,0,m=null,!1,null,y=null,!1,null,null,!1,!1,!1,(w=e.chart).dataSegment,D=w.lineStyle||{},i&&"object"==a(i)||(i={style:i}),s=i.style||"stx_mountain_chart",h=i.field||w.defaultPlotField||"Close",c=i.subField||w.defaultPlotField||"Close",(m=i.gapDisplayStyle)||!1===m||(m=i.gaps),m||!1===m||(m=w.gaplines),j.D6n(),m||(m="transparent"),u=i.yAxis||e.yAxis,o=i.reverse||!1,d=i.tension,f=i.fillStyle,p=i.width||D.width,g=i.step,y=i.pattern||D.pattern,v=i.highlight,b=i.color,x=i.baseColor,l=i.colored,S=i.extendToEndOfDataSet,C=i.isComparison,k=i.returnObject,A=this.canvasStyle(s),T=u.top,(isNaN(T)||isNaN(T/T))&&(T=0),M=b||(s&&A.backgroundColor?A.backgroundColor:this.defaultColor),P=x||(s&&A.color?A.color:this.containerColor),f?n.fillStyle=f:x||A.color?(j.A0c(1),(F=n.createLinearGradient(0,T,j.g0c("0",653134784),u.bottom)).addColorStop(u.flipped?1:0,M),F.addColorStop(u.flipped?0:1,P),n.fillStyle=F):n.fillStyle=M,this.startClip(e.name),_=n.lineWidth,i.symbol||(c=null),i={skipProjections:!0,reverse:o,yAxis:u,gapDisplayStyle:m,step:g,highlight:v,extendToEndOfDataSet:S,isComparison:C},w.tension&&(i.tension=w.tension),(d||0===d)&&(i.tension=d),E=parseInt(A.paddingTop,10),L=b||A.borderTopColor,q=null,(l||L&&!t.isTransparent(L))&&E&&((I=this.scratchContext)||(N=n.canvas.cloneNode(!0),I=this.scratchContext=N.getContext("2d")),I.canvas.height=n.canvas.height,I.canvas.width=n.canvas.width,I.drawImage(n.canvas,0,0),t.clearCanvas(n.canvas,this)),t.extend(i,{panelName:e.name,direction:i.reverse?-1:1,band:h,subField:c,opacity:1}),!i.highlight&&this.highlightedDraggable&&(i.opacity*=.3),t.preparePeakValleyFill(this,i),(l||L&&!t.isTransparent(L))&&E&&(n.save(),j.j0c(8),n.lineWidth+=j.g0c(E,2),n.globalCompositeOperation="destination-out",n.globalAlpha=1,this.plotDataSegmentAsLine(h,e,i),n.globalCompositeOperation="destination-over",n.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),n.drawImage(this.scratchContext.canvas,0,0),n.restore()),n.strokeStyle=L,p)n.lineWidth=p;else if(A.width&&parseInt(A.width,10)<=25){j.A0c(0),O=-j.g0c("1353474504",0),-1559258619,H=2;for(var z=1;j.A7R(z.toString(),z.toString().length,35144)!==O;z++)n.lineWidth=Math.max(6,t.stripPX(A.width)),H+=2;-1559258619!==j.A7R(H.toString(),H.toString().length,33835)&&(n.lineWidth=Math.max(1,t.stripPX(A.width)))}else n.lineWidth=1;return y||(y=A.borderTopStyle),i.pattern=t.borderPatternToArray(n.lineWidth,y),R=r,m&&(R=this.getGapColorFunction(h,c,{color:L,pattern:i.pattern,width:n.lineWidth},m,r)),q=this.plotDataSegmentAsLine(h,e,i,R),n.lineWidth=_,this.endClip(),q.colors.length||q.colors.push(L),k?q:q.colors},t.ChartEngine.prototype.drawBaselineChart=function(e,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F=V,_=e.chart,E=i.baseline,L=i.field,q=i.yAxis,I=_.gaplines,N=_.defaultPlotField,O=_.lineStyle;if(r="object"===a(E)?E.actualLevel:_.baseline.actualLevel,n=[],L||(L=N),O||(O={}),(s=i.gapDisplayStyle)||!1===s||(s=i.gaps),null!==r&&!isNaN(r)){if("2",".","1","stx_ba","seline","stx_ba","seline_up","s","tx","_baseline_dow","n","stx_bas","eli","ne","_up","m","ountain",(o="mountain"==i.type)&&(n=this.drawMountainChart(e,{style:i.style,field:i.field,yAxis:q,gapDisplayStyle:s,colored:!0,tension:0})),l=this.pixelFromPrice(r,e,q),isNaN(l))return;for(var H in this.startClip(e.name),h=i.pattern||O.pattern,c=i.fill_color_up||this.getCanvasColor("stx_baseline_up"),u=i.fill_color_down||this.getCanvasColor("stx_baseline_down"),d=i.border_color_up||this.getCanvasColor("stx_baseline_up"),p=i.border_color_down||this.getCanvasColor("stx_baseline_down"),m=i.width||O.width||this.canvasStyle("stx_baseline_up").width,g=i.width||O.width||this.canvasStyle("stx_baseline_down").width,f=i.widthBaseline||O.width||t.stripPX(this.canvasStyle("stx_baseline").width),y=i.baselineOpacity||this.canvasStyle("stx_baseline").opacity,v={fill:c,edge:d,width:m},x={fill:u,edge:p,width:g},S={over:(b=i.yAxis.flipped)?x:v,under:b?v:x},C=!1,s||!1===s||(s=I),F.j0c(2),k=F.e0c(2147483647,"1"),!i.highlight&&this.highlightedDraggable&&(k*=.3),S)"tra","ns","pa","rent",w=parseInt(Math.max(1,t.stripPX(S[H].width)),10),i.highlight&&(w*=2),h=t.borderPatternToArray(w,h),D={panelName:e.name,band:L,threshold:r,color:o?"transparent":S[H].fill,direction:"over"==H?1:-1,edgeHighlight:S[H].edge,edgeParameters:{pattern:h,lineWidth:w+.1,opacity:k},gapDisplayStyle:s,yAxis:i.yAxis},q&&(D.threshold=this.priceFromPixel(this.pixelFromPrice(D.threshold,e,q),e,q)),n.push(S[H].edge),A=D.color,!o&&A&&"transparent"!=A&&(T=e.top,M=e.bottom,P=_.context.createLinearGradient(0,"over"==H?T:M,0,l),F.A0c(2),P.addColorStop(F.g0c(2147483647,"0"),t.hexToRgba(t.colorToHex(A),60)),P.addColorStop(1,t.hexToRgba(t.colorToHex(A),10)),D.color=P,D.opacity=k),t.preparePeakValleyFill(this,_.dataSegment,D),I&&(I.fillMountain||("so","l","i","d","tr","anspar","ent",this.drawLineChart(e,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:D.edgeParameters.lineWidth}})),I.color||(C=!0,I.color=this.defaultColor)),this.drawLineChart(e,null,null,{color:"transparent",width:D.edgeParameters.lineWidth}),C&&(I.color=null);this.plotLine(0,1,l,l,this.containerColor,"line",_.context,e,{lineWidth:"1.1"}),this.plotLine(0,1,l,l,this.getCanvasColor("stx_baseline"),"line",_.context,e,{pattern:"dotted",lineWidth:f||"2.1",opacity:y||.5*k}),this.controls.baselineHandle&&this.manageTouchAndMouse&&this.getSeriesRenderer(i.name)==this.mainSeriesRenderer&&!1!==_.baseline.userLevel&&("bloc","k",this.controls.baselineHandle.style.top=l-parseInt(getComputedStyle(this.controls.baselineHandle).height,10)/2+"px",this.controls.baselineHandle.style.left=_.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10)+"px",this.controls.baselineHandle.style.display="block"),this.endClip()}return{colors:n}},t.ChartEngine.prototype.plotLine=function(e){var i,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q=V;if(i="o",i+="bjec",i+="t",r="h",r+="or",r+="izonta",r+="l","number"==typeof arguments[0])for(var I in e={x0:arguments[0],x1:arguments[1],y0:arguments[2],y1:arguments[3],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]},arguments[8])e[I]=arguments[8][I];if(e||(e={}),"none"!=e.pattern&&(n=e.x0,s=e.x1,o=e.y0,l=e.y1,h=e.color,c=e.type,u=e.context,d=e.confineToPanel,p=e.deferStroke,!0===d&&(d=this.chart.panel),null==u&&(u=this.chart.context),!(isNaN(n)||isNaN(s)||isNaN(o)||isNaN(l)))){m=0,g=this.chart.canvasHeight,f=0,y=this.right,d&&(g=d.yAxis.bottom,m=d.yAxis.top,f=d.left,y=d.right),"ray"==c&&(v=1e7,s<n&&(v=-1e7),b={x0:n,x1:s,y0:o,y1:l},s=v,l=x=t.yIntersection(b,v)),"line"!=c&&c!=r&&"vertical"!=c||(v=1e7,S=-1e7,b={x0:n,x1:s,y0:o,y1:l},x=t.yIntersection(b,v),n=S,s=v,o=t.yIntersection(b,S),l=x),C=0,k=1,q.A0c(0),w=q.e0c(s,n),q.j0c(0),D=q.e0c(l,o);for(var N=0;N<4;N++){if(0===N&&(A=-w,q.j0c(0),T=-q.e0c(f,n)),1==N&&(A=w,q.A0c(0),T=q.g0c(y,n)),2==N&&(A=-D,q.A0c(0),T=-q.g0c(m,o)),3==N&&(A=D,q.j0c(0),T=q.g0c(g,o)),q.A0c(11),M=q.g0c(A,T),(l||0===l)&&0===A&&T<0)return!1;if(A<0){if(M>k)return!1;M>C&&(C=M)}else if(A>0){if(M<C)return!1;M<k&&(k=M)}}if(q.A0c(54),P=q.e0c(w,C,n),q.A0c(54),F=q.g0c(D,C,o),q.j0c(54),_=q.g0c(w,k,n),q.j0c(54),E=q.g0c(D,k,o),l||0===l||o||0===o){if(!l&&0!==l){if(E=b.y0<b.y1?g:m,P=b.x0,_=b.x0,b.x0>y)return!1;if(b.x0<f)return!1}}else{if(F=m,E=g,P=b.x0,_=b.x0,b.x0>y)return!1;if(b.x0<f)return!1}p||(u.save(),u.beginPath()),q.A0c(0),u.lineWidth=q.e0c("1.1",0),h&&a(h)==i?(u.strokeStyle=h.color,h.opacity?u.globalAlpha=h.opacity:(q.A0c(4),u.globalAlpha=q.e0c(1917576288,"1")),u.lineWidth=t.stripPX(h.width)):!h||"auto"==h||t.isTransparent(h)?u.strokeStyle=this.defaultColor:u.strokeStyle=h,e.opacity&&(u.globalAlpha=e.opacity),e.lineWidth&&(u.lineWidth=e.lineWidth),e.globalCompositeOperation&&(u.globalCompositeOperation=e.globalCompositeOperation),q.n6n(),L=t.borderPatternToArray(u.lineWidth,e.pattern),u.setLineDash(e.pattern?L:[]),u.moveTo(P,F),u.lineTo(_,E),p||(u.stroke(),u.restore())}},t.ChartEngine.prototype.rendererAction=function(e,t){var i,a,r,n,s,o,l,h;if(i="ren",V.n6n(),i+="derer",i+="Actio",i+="n",a="u",t===(a+="nderlay")&&(r="CIQ.wate",r+="rmark",this[n="function"==typeof Symbol?Symbol.for(r):"Symbol(CIQ.watermark)"]&&this[n].draw(e)),!this.runPrepend(i,arguments)){for(var c in e.seriesRenderers)l=(o=(s=e.seriesRenderers[c]).params).panel,h=this.panels[l],o.overChart&&"underlay"==t||"_main_series"==o.name&&"underlay"==t||"_main_series"!=o.name&&"main"==t||(o.overChart||"overlay"!=t)&&h&&h.chart===e&&(h.hidden||("yAxis"==t?s.adjustYAxis():(s.draw(),s.cb&&s.cb(s.colors))));this.runAppend("rendererAction",arguments)}},t.ChartEngine.prototype.drawSeries=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if(n="drawS",n+="eries",!this.runPrepend(n,arguments)){for(var C in V.D6n(),e.dataSegment,s=null,i||(i=e.series),i)if(o="moun",o+="tai",o+="n",l="C",l+="l",l+="ose",c=(h=(s=i[C]).parameters).panel?this.panels[h.panel]:e.panel,u=h.color,h.width,d=h.field,c){if(p=h.yAxis=a||c.yAxis,u||(u=p.textStyle||this.defaultColor),"auto"==u&&(u=this.defaultColor),d||(d=e.defaultPlotField),m=h.subField||e.defaultPlotField||l,h._rawExtendToEndOfDataSet||!1===h._rawExtendToEndOfDataSet||(h._rawExtendToEndOfDataSet=h.extendToEndOfDataSet),e.animatingHorizontalScroll?h.extendToEndOfDataSet=!1:h.extendToEndOfDataSet=h._rawExtendToEndOfDataSet,g=h.colorFunction,(s.highlight||s.parameters.highlight)&&(h.highlight=!0),f={colors:[]},r){if(r.params.highlight&&(h.highlight=!0),h.hidden)continue;f=r.drawIndividualSeries(e,h)||f}else f=h.type==o?this.drawMountainChart(c,t.extend({returnObject:!0},h),g):this.drawLineChart(c,h.style,g,t.extend({returnObject:!0},h));s.yValueCache=f.cache,(y=e.dataSegment[e.dataSegment.length-1])&&(v=!h.skipTransform&&e.transformFunc&&p==e.panel.yAxis,y[d]||0===y[d]||(y=this.getPreviousBar(e,d,e.dataSegment.length-1)),v&&y&&y.transform&&(y=y.transform)),!1!==h.displayFloatingLabel&&this.mainSeriesRenderer!=r&&y&&!p.noDraw&&((x=y[d])&&(x=x[m]||0===x[m]?x[m]:x.iqPrevClose),b=p.priceFormatter?p.priceFormatter(this,c,x):this.formatYAxisPrice(x,c,null,p),this.yAxisLabels.push({src:"series",args:[c,b,this.pixelFromTransformedValue(x,c,p),t.hexToRgba(t.colorToHex(u),parseFloat(h.opacity)),null,null,p]})),e.legend&&h.useChartLegend&&(e.legend.colorMap||(e.legend.colorMap={}),(S=h.display)||(S=h.symbol),e.legend.colorMap[C]={color:f.colors,display:S,isBase:r==this.mainSeriesRenderer})}this.runAppend("drawSeries",arguments)}}},H=function(e){var t;(t=e.CIQ).ChartEngine.prototype.scrollTo=function(e,t,i){var a,r;(a=this.swipe).end=!0,a.amplitude=a.target=(t-e.scroll)*this.layout.candleWidth,a.timeConstant=100,a.timestamp=Date.now(),a.scroll=e.scroll,V.n6n(),a.chart=e,a.cb=i,r=this,requestAnimationFrame((function(){r.autoscroll()}))},V.D6n(),t.ChartEngine.prototype.autoscroll=function(){var e,t,i,a;V.n6n(),e=this,(t=this.swipe).amplitude&&(t.elapsed=Date.now()-t.timestamp,(i=-t.amplitude*Math.exp(-t.elapsed/t.timeConstant))>.5||i<-.5?(a=(t.target+i)/this.layout.candleWidth,t.chart.scroll=t.scroll+Math.round(a),this.draw(),this.updateChartAccessories(),requestAnimationFrame((function(){e.autoscroll()}))):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),t.cb&&t.cb()))}},R=function(e){var t;(t=e.CIQ).ChartEngine.prototype.drawXAxis=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k=V;if("drawX","Axi","s",a=[e,i],!this.runPrepend("drawXAxis",a)&&i&&!e.xAxis.noDraw){r=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",r),n=this.getCanvasFontSize("stx_xaxis"),r.textAlign="center",r.textBaseline="middle",o=r.measureText("   ").width;for(var w=0;w<i.length;w++)s=i[w],l=r.measureText(s.text).width,k.j0c(5),h=Math.max(k.g0c(l,o),e.xAxis.minimumLabelWidth),s.hz=Math.floor(s.hz+this.micropixels)+.5,s.left=s.hz-h/2,s.right=s.hz+h/2,s.unpaddedRight=s.hz+l/2;if(c=!0===this.xAxisAsFooter?this.chart.canvasHeight:e.panel.bottom,k.A0c(44),u=this.whichPanel(k.e0c(c,"1"))){for(var D in this.adjustYAxisHeightOffset(u,u.yAxis),d=e.xAxis.displayBorder||null===e.xAxis.displayBorder,!0===this.axisBorders&&(d=!0),!1===this.axisBorders&&(d=!1),p=c-this.xaxisHeight+n,d&&(p+=3),m=!0,this.panels)if("b","order","stx_gr","id_dark","str","o","ke",!(g=this.panels[D]).hidden&&!1!==g.shareChartXAxis&&(k.A0c(38),f=k.e0c(g,u),y=g.yAxis)){v=-Number.MAX_VALUE,x=Number.MAX_VALUE;for(var A=0;A<i.length;A++)if("boundary"==i[A].grid){x=i[A].left;break}r.save(),r.beginPath(),r.rect(g.left,g.top+(m?0:1),g.width,g.height-1),r.clip(),m=!1,(b=new t.Plotter).newSeries("line","stroke",this.canvasStyle("stx_grid")),b.newSeries("boundary","stroke",this.canvasStyle("stx_grid_dark")),b.newSeries("border","stroke",this.canvasStyle("stx_grid_border"));for(var T=0;T<i.length;T++){if(s=i[T],T==A){for(A++;A<i.length;A++)if("boundary"==i[A].grid){x=i[A].left;break}A>=i.length&&(A=-1,x=Number.MAX_VALUE)}else if(s.right>x)continue;if(!(s.left<v)){if(s.left<0){if(x<s.right)continue;if(A>=i.length&&i[T+1]&&i[T+1].left<s.right)continue}v=s.right,Math.floor(s.left)<=g.right&&(Math.floor(s.hz)>g.left&&(e.xAxis.displayGridLines&&(b.moveTo(s.grid,s.hz,y.top),b.lineTo(s.grid,s.hz,y.bottom)),f&&d&&("b","order",b.moveTo("border",s.hz,y.bottom+.5),b.lineTo("border",s.hz,y.bottom+6))),f&&s.right>g.left&&("bound","ar","y",this.canvasColor("boundary"==s.grid?"stx_xaxis_dark":"stx_xaxis",r),r.fillText(s.text,s.hz,p)))}}d&&("b","o","rde","r",S=Math.round(y.bottom)+.5,C=Math.round(g.right)+.5,b.moveTo("border",g.left,S),b.lineTo("border",C,S)),b.draw(r),r.restore()}k.D6n(),r.textAlign="left",this.runAppend("drawXAxis",a)}}},t.ChartEngine.prototype.createTickXAxisWithDates=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,Q,B,U,W,Y,X,Z,G,K,J,$,ee,te,ie=V;ie.n6n(),e||(e=this.chart),e.xaxis=[],a=e.context,r=[t.MILLISECOND,t.SECOND,t.MINUTE,t.HOUR,t.DAY,t.MONTH,t.YEAR],this.timeIntervalMap||("3","0",n=a.measureText.bind(a),(i={})[t.MILLISECOND]={arr:[1,2,5,10,20,50,100,250,500],minTimeUnit:0,maxTimeUnit:1e3,measurement:n("10:00:00.000")},i[t.SECOND]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:n("10:00:00")},i[t.MINUTE]={arr:[1,2,3,4,5,6,10,12,15,20,30],minTimeUnit:0,maxTimeUnit:60,measurement:n("10:00")},i[t.HOUR]={arr:[1,2,3,4,6,12],minTimeUnit:0,maxTimeUnit:24,measurement:n("10:00")},i[t.DAY]={arr:[1,2,7,14],minTimeUnit:1,maxTimeUnit:32,measurement:n("30")},i[t.MONTH]={arr:[1,2,3,6],minTimeUnit:1,maxTimeUnit:13,measurement:n("Mar")},i[t.YEAR]={arr:[1,2,3,5],minTimeUnit:1,maxTimeUnit:2e7,measurement:n("2000")},i[t.DECADE]={arr:[10],minTimeUnit:0,maxTimeUnit:2e6,measurement:n("2000")},this.timeIntervalMap=i),i=this.timeIntervalMap,ie.j0c(10),s=[31,28,31,30,31,30,ie.g0c("31",0),31,30,31,30,31],o=this.layout.periodicity,l=this.layout.interval,h=e.maxTicks,c=e.dataSegment,u=e.xAxis,d=c.length,p=u.idealTickSizePixels||u.autoComputedTickSizePixels,m=this.chart.width/p;for(var ae=0;ae<d&&!c[ae];ae++);if(ae==d)return[];switch(g=0,f=this.layout.timeUnit||"minute",isNaN(l)&&(f=l,l=1),y=0,f){case"millisecond":y=1;break;case"second":y=1e3,r.splice(0,1);break;case"minute":y=6e4,r.splice(0,2);break;case"day":y=864e5,ie.j0c(2),r.splice(0,ie.e0c(2147483647,"4"));break;case"week":ie.j0c(8),y=ie.e0c(7,864e5),r.splice(0,4);break;case"month":ie.A0c(8),y=ie.g0c(30,864e5),ie.j0c(1),r.splice(0,ie.g0c("5",1886182112))}for(v=this.layout.aggregationType,!y||v&&"ohlc"!=v&&"heikinashi"!=v?g=c[d-1].DT.getTime()-c[ae].DT.getTime():(ie.j0c(28),g=ie.g0c(d,l,o,y)),0===g?e.market?("d","a","y",(x=e.market.newIterator({begin:new Date,interval:"day",periodicity:1})).next(),b=x.previous(),g=((x=this.standardMarketIterator(b,null,e)).next().getTime()-b.getTime())*h):(ie.A0c(66),g=ie.e0c(h,"60","1000",60,24)):(ie.A0c(67),g=ie.e0c(g,h,d)),ie.A0c(11),S=ie.g0c(m,g),C=0;C<r.length&&!(r[C]>S+.001);C++);function re(e){var i,a;return ie.D6n(),D==t.MILLISECOND?(i=e.getMilliseconds(),a=e.getSeconds()):D==t.SECOND?(i=e.getSeconds(),a=e.getMinutes()):D==t.MINUTE?(i=e.getMinutes(),a=e.getHours()):D==t.HOUR?(i=e.getHours()+e.getMinutes()/60,a=e.getDate()):D==t.DAY?(i=e.getDate(),a=e.getMonth()+1):D==t.MONTH?(i=e.getMonth()+1,a=e.getFullYear()):D==t.YEAR?(i=e.getFullYear(),a=e.getFullYear()+1e3):(i=e.getFullYear(),a=0),[i,a]}for(S<1&&console.log("createTickXAxisWithDates: Assertion error. msPerGridLine < 1. Make sure your masterData has correct time stamps for the active periodicity and it is sorted from OLDEST to NEWEST."),C==r.length?C--:C>0&&(ie.j0c(0),S-(k=r[ie.g0c(C,1)])*(w=i[k].arr)[w.length-1]<r[C]-S&&C--),D=u.timeUnit||r[C],u.activeTimeUnit=D,T=(A=i[D]).arr,C=0;C<T.length&&!(T[C]*D>S);C++);if(C==T.length){-1192987366,1351687132,ie.j0c(8),M=ie.e0c(1,"2");for(var ne=1;-1192987366!==ie.A7R(ne.toString(),ne.toString().length,29081);ne++)C++,M+=2;1351687132!==ie.E7R(M.toString(),M.toString().length,90169)&&C--}else S-T[C-1]*D<T[C]*D-S&&C--;for(2*A.measurement.width<this.layout.candleWidth&&(C=0),P=u.timeUnitMultiplier||T[C],F=[],_=this.layout.candleWidth,C=0;C<=h&&!c[C];C++);if(C>0&&C<h){e.market&&(E=this.standardMarketIterator(c[C].DT,u.adjustTimeZone?this.displayZone:null));for(var se=C;se>0;se--)L={},!E||e.lineApproximation&&_<1||(L.DT=E.previous()),e.xaxis.unshift(L)}for(q=0,I=A.minTimeUnit,N=-1,O=!0,H=re(c[C].DT),j=0,ie.j0c(4),z=ie.e0c(2039988320,"0"),Q=c[C].tick;j<Q&&(R=re(this.chart.dataSet[Q-j].DT))[1]==H[1];j++)H=R;for(;z<this.chart.dataSet.length-Q&&(R=re(this.chart.dataSet[Q+z].DT))[1]==H[1];z++)H=R;for(B=null,C=0;C<h+z;C++){if((U=c[C])?j&&(U=e.dataSet[U.tick-j]):U=e.xaxis[C],C<d)q=(W=U).displayDate&&u.adjustTimeZone?W.displayDate:W.DT,C&&!j&&e.segmentImage&&(_=((Y=e.segmentImage[C]).leftOffset-Y.candleWidth/2)/C);else if(e.market){if("ti","c","k","tick"==this.layout.interval&&!u.futureTicksInterval)break;if(e.lineApproximation&&_<1)break;if(!u.futureTicks)break;B||(B=this.standardMarketIterator(c[d-1].DT,u.adjustTimeZone?this.displayZone:null)),q=B.next()}if(q&&(X=null,ie.A0c(0),G=ie.g0c(C,j),(K={DT:q}).data=C<d?U:null,j?(j--,C--):!e.xaxis[C]&&C<h&&e.xaxis.push(K),J=(H=re(q))[0],N!=($=H[1])&&(J<=I&&(I=A.minTimeUnit),Z=e.left+G*_-1,X=null,D==t.HOUR||D==t.MINUTE&&N>$?(X=this.internationalizer?this.internationalizer.monthDay.format(q):q.getMonth()+1+"/"+q.getDate(),u.formatter&&("bounda","r","y",X=u.formatter(q,"boundary",t.DAY,1,X))):D==t.DAY?N>$?(X=q.getFullYear(),u.formatter&&("bou","nda","ry",X=u.formatter(q,"boundary",t.YEAR,1,X))):(X=t.monthAsDisplay(q.getMonth(),!1,this),u.formatter&&(X=u.formatter(q,"boundary",t.MONTH,1,X))):D==t.MONTH&&(X=q.getFullYear(),u.formatter&&(X=u.formatter(q,"boundary",t.YEAR,1,X))),X&&-1!=N&&("b","oundary",F.push(new t.ChartEngine.XAxisLabel(Z,"boundary",X)))),J>=I)){if(I==A.minTimeUnit&&$==N)continue;if(ee=new Date(+q),Z=e.left+(2*G+1)*_/2-1,(te=Math.floor(J/P)*P)<J&&("week"==this.layout.interval?te=J:(ie.A0c(11),Z-=ie.e0c(2,_))),D==t.MILLISECOND?ee.setMilliseconds(te):D==t.SECOND?(ee.setMilliseconds(0),ee.setSeconds(te)):D==t.MINUTE?(ee.setMilliseconds(0),ee.setSeconds(0),ee.setMinutes(te)):D==t.HOUR?(ee.setMilliseconds(0),ie.j0c(1),ee.setSeconds(ie.e0c("0",773516416)),ee.setMinutes(0),ee.setHours(te)):D==t.DAY?ee.setDate(Math.max(1,te)):D==t.MONTH?(ee.setDate(1),ie.j0c(0),ee.setMonth(ie.g0c(te,1))):D==t.YEAR?(ee.setDate(1),ie.j0c(8),ee.setMonth(ie.e0c(1,"0"))):(ee.setDate(1),ee.setMonth(0)),ie.j0c(5),I=ie.e0c(te,P),D==t.DAY&&(A.maxTimeUnit=s[ee.getMonth()]+1),I>=A.maxTimeUnit&&(I=A.minTimeUnit),N=$,O&&te<J){O=!1;continue}X=D==t.DAY?ee.getDate():D==t.MONTH?t.monthAsDisplay(ee.getMonth(),!1,this):D==t.YEAR||D==t.DECADE?ee.getFullYear():t.timeAsDisplay(ee,this,D),u.formatter&&(X=u.formatter(ee,"line",D,P,X)),F.push(new t.ChartEngine.XAxisLabel(Z,"line",X))}}return F}},j=function(e){var t;V.D6n(),(t=e.CIQ).ChartEngine.prototype.createYAxis=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M=V;if(a="crea",a+="te",a+="YAxis",!this.runPrepend("createYAxis",arguments)){if(r=e.chart,n=e.name==r.name,i||(i={}),M.D6n(),i.noChange=!1,s=i.yAxis?i.yAxis:e.yAxis,t.ChartEngine.enableCaching&&s.high==e.cacheHigh&&s.low==e.cacheLow?(l=(o=r.dataSet.length-r.scroll-1)+r.maxTicks+1,e.cacheLeft=o,e.cacheRight=l,i.noChange=!0):(M.j0c(0),e.cacheLeft=M.g0c("1000000",0),e.cacheRight=-1,e.cacheHigh=s.high,e.cacheLow=s.low),h=r.xAxis.idealTickSizePixels?r.xAxis.idealTickSizePixels:r.xAxis.autoComputedTickSizePixels,s.goldenRatioYAxis&&s.idealTickSizePixels!=h/1.618&&(i.noChange=!1),!i.noChange){if(this.adjustYAxisHeightOffset(e,s),u=s.height=s.bottom-s.top,d=(s.high-s.low)/(u-s.zoom),s.semiLog||(i.ground?s.high=s.high+s.zoom*d:(s.high=s.high+(s.zoom/2+s.scroll)*d,s.low=s.low-(s.zoom/2-s.scroll)*d)),(s.min||0===s.min)&&(s.low=s.min),(s.max||0===s.max)&&(s.high=s.max),s.shadow=s.high-s.low,s.semiLog&&(!this.activeDrawing||"projection"!=this.activeDrawing.name)){if(p=function(){var e;s.logHigh=Math.log(s.high)/Math.LN10,e=Math.max(s.low,1e-9),s.logLow=Math.log(e)/Math.LN10,s.low<=0&&(s.logLow=0),s.logShadow=s.logHigh-s.logLow},s.semiLog&&p(),m=s.height/(s.height-s.zoom),s.flipped)s.high=this.transformedPriceFromPixel(s.bottom+m*(s.zoom/2+s.scroll),e,s),s.low=this.transformedPriceFromPixel(s.top-m*(s.zoom/2-s.scroll),e,s);else{g=-1109426150,f=330135047,y=2;for(var P=1;M.A7R(P.toString(),P.toString().length,82006)!==g;P++)s.high=this.transformedPriceFromPixel(s.top-m*(s.zoom/2+s.scroll),e,s),s.low=this.transformedPriceFromPixel(s.bottom+m*(s.zoom/2-s.scroll),e,s),y+=2;M.E7R(y.toString(),y.toString().length,73488)!==f&&(s.high=this.transformedPriceFromPixel(s.top%(m+(s.zoom-4)/s.scroll),e,s),s.low=this.transformedPriceFromPixel(s.bottom*(m%((s.zoom-3)/s.scroll)),e,s))}s.shadow=s.high-s.low,s.semiLog&&p()}if(s.goldenRatioYAxis&&n&&s==e.yAxis)M.j0c(11),s.idealTickSizePixels=M.e0c(1.618,h),0===s.idealTickSizePixels&&(v=this.getCanvasFontSize("stx_yaxis"),M.j0c(8),s.idealTickSizePixels=M.g0c(5,v));else if(!s.idealTickSizePixels)if(v=this.getCanvasFontSize("stx_yaxis"),n){x=830265710,b=-711874002,S=2;for(var F=1;M.A7R(F.toString(),F.toString().length,8677)!==x;F++)M.A0c(11),s.idealTickSizePixels=M.e0c(6,v),S+=2;M.E7R(S.toString(),S.toString().length,10104)!==b&&(M.j0c(8),s.idealTickSizePixels=M.g0c(5,v))}else M.j0c(8),s.idealTickSizePixels=M.g0c(2,v);C=Math.round(u/s.idealTickSizePixels),c=i.range?i.range[1]-i.range[0]:s.shadow,M.j0c(11),s.priceTick=Math.floor(M.e0c(C,c)),k=1;for(var _=0;_<10&&!(s.priceTick>0);_++)k*=10,s.priceTick=Math.floor(c/C*k)/k;if(10==_&&(s.priceTick=1e-8),s.priceTick=Math.round(c/C*k)/k,w=Math.round(c/s.priceTick),i.range&&w<c&&!s.noEvenDivisorTicks){for(;w>=1&&c%w!=0;)w--;M.A0c(11),s.priceTick=M.g0c(w,c)}if(s.minimumPriceTick){D=s.minimumPriceTick,v=this.getCanvasFontSize("stx_yaxis");for(var E=0;E<100&&(M.j0c(11),u/M.e0c(D,c)<2*v);E++)D+=s.minimumPriceTick;E<100&&(s.priceTick=D)}}if((s.priceTick<=0||s.priceTick===1/0)&&(s.priceTick=1),s.multiplier=s.height/s.shadow,s.multiplier==1/0&&(s.multiplier=0),s.decimalPlaces||0===s.decimalPlaces)s.printDecimalPlaces=s.decimalPlaces;else if(n){M.A0c(2),A=M.g0c(2147483647,"0");for(var L=0;L<e.yAxis.shadowBreaks.length;L++)T=e.yAxis.shadowBreaks[L],e.yAxis.shadow<T[0]&&(A=T[1]);s.printDecimalPlaces=A}else s.printDecimalPlaces=null;this.runAppend(a,arguments)}},t.ChartEngine.prototype.drawYAxis=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,Q,B,U,W=V;if(a="stx",a+="_ya",a+="xis",i||(i={}),r=i.yAxis?i.yAxis:e.yAxis,!e.hidden&&!r.noDraw&&r.width){if(!t.Comparison||r.priceFormatter!=t.Comparison.priceFormat)if(n=r.fractional)r.originalPriceFormatter||(r.originalPriceFormatter={func:r.priceFormatter}),n.resolution||(n.resolution=r.minimumPrice),n.formatter||(n.formatter="'"),r.priceFormatter||(r.priceFormatter=function(e,t,i){var a,r,s,o;if(W.D6n(),n)return a="",i<0&&(a="-",i=Math.abs(i)),r=Math.floor(Math.round(i/n.resolution)*n.resolution),s=Math.round((i-r)/n.resolution),o=Math.floor(s),a+r+n.formatter+(o<10?"0":"")+o+(s-o>=.5?"+":"")});else if(r.originalPriceFormatter){s=1691698006,o=98683608,l=2;for(var Y=1;W.E7R(Y.toString(),Y.toString().length,64319)!==s;Y++)r.priceFormatter=r.originalPriceFormatter.func,l+=2;W.E7R(l.toString(),l.toString().length,10202)!==o&&(r.priceFormatter=r.originalPriceFormatter.func),r.originalPriceFormatter=null}if(h=this.colorOrStyle(r.textStyle?r.textStyle:a),u=0,(c=this.highlightedDraggable)&&this.yaxisMatches(c,r)?u=.15:r.highlight&&(u=.1),u&&(d=h.constructor==String?h:h.color,r.setBackground(this,{color:d,opacity:u})),r.pretty)return this.drawYAxisPretty(e,i);if(!this.runPrepend("drawYAxis",arguments)){if(!i.noDraw&&!r.noDraw){if(!(p=r.yAxisPlotter)||!i.noChange){if(m="st",m+="roke",p=r.yAxisPlotter=new t.Plotter,g=e.chart,f=e.name==g.name&&r.name===e.yAxis.name,!r.priceTick)return;y=r.shadow,(v=i.range)&&(y=v[1]-v[0]),x=y/r.priceTick,x=Math.round(x),r.semiLog&&(b=Math.log(this.valueFromPixel(r.flipped?r.top:r.bottom,e))/Math.LN10,S=(r.logHigh-r.logLow)/x),p.newSeries("grid","stroke",this.canvasStyle("stx_grid")),p.newSeries("text","fill",h),p.newSeries("border",m,this.canvasStyle("stx_grid_border")),C=0,k=v?v[1]:r.high,w=v?v[0]:r.low,D=null===r.displayBorder?g.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(D=!1),!0===this.axisBorders&&(D=!0),M=(T=g.dynamicYAxis)?r.width:NaN,A="left"==(P=this.getYAxisCurrentPosition(r,e))?r.left+r.width:r.left,F=Math.round(A)+.5,_=D?3:0,"left"==P&&(_=D?-3:0),C=f?r.shadow<1?(parseInt(w/r.priceTick,10)+1)*r.priceTick-w:r.priceTick-Math.round(w%r.priceTick*e.chart.roundit)/e.chart.roundit:k%r.priceTick,E=this.getCanvasFontSize("stx_yaxis");for(var X=0;X<x;X++)L="t",L+="ex",L+="t",q="l",q+="e",q+="f",q+="t",r.semiLog?(W.A0c(54),N=W.e0c(S,X,b),W.j0c(10),I=Math.pow(W.g0c("10",0),N)):I=f?w+X*r.priceTick+C:k-X*r.priceTick-C,O=this.pixelFromTransformedValue(I,e,r),(H=Math.round(O)+.5)+E/2>e.bottom||H-E/2<e.top||Math.abs(H-r.bottom)<1||(r.flipped&&(H=r.top+r.bottom-H),r.displayGridLines&&(R="g",R+="r",R+="i",R+="d",p.moveTo(R,e.left+1,H),p.lineTo("grid",e.right-1,H)),D&&(j="bo",j+="rder",W.A0c(0),p.moveTo("border",W.g0c(F,.5),H),W.j0c(5),p.lineTo(j,W.e0c(F,_),H)),I=r.priceFormatter?r.priceFormatter(this,e,I):this.formatYAxisPrice(I,e,null,r),z=r.textBackground?this.containerColor:null,Q=3,W.A0c(23),B=W.e0c(_,Q,A),P==q?(B=r.left+Q,!1!==r.justifyRight&&(B=r.left+r.width+_-Q)):r.justifyRight&&(B=A+r.width),p.addText(L,I,B,H,z,null,E),T&&(M=Math.max(M,g.context.measureText(I).width+Math.abs(_)+Q)));if(D&&(U=Math.round(r.bottom)+.5,p.moveTo("border",F,r.top),p.lineTo("border",F,U),p.draw(this.getBackgroundCanvas(g).context,"border")),T&&M>r.width)throw r._dynamicWidth=M,this.calculateYAxisPositions(),new Error("reboot draw");if(!T&&r._dynamicWidth)throw this.resetDynamicYAxis({chartName:g.name}),new Error("reboot draw")}r==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend("drawYAxis",arguments)}}},t.ChartEngine.prototype.drawYAxisPretty=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,Q,B,U,W,Y,X,Z,G,K=V;if(!this.runPrepend("drawYAxis",arguments)&&(i||(i={}),a=i.yAxis?i.yAxis:e.yAxis,!e.hidden&&!a.noDraw&&a.width)){if(!i.noDraw){if(!(r=a.yAxisPlotter)||!i.noChange){if(n="l",n+="e",n+="f",n+="t",s="fi",s+="ll",r=a.yAxisPlotter=new t.Plotter,o=e.chart,!a.priceTick)return;if(isNaN(a.high)||isNaN(a.low))return;l=a.shadow,i.range&&(l=i.range[1]-i.range[0]),h=a.height/a.idealTickSizePixels,h=Math.round(h),c=a.textStyle?a.textStyle:"stx_yaxis",r.newSeries("grid","stroke",this.canvasStyle("stx_grid")),r.newSeries("text",s,this.colorOrStyle(c)),r.newSeries("border","stroke",this.canvasStyle("stx_grid_border")),d=(u=i.range)?u[1]:a.high,p=u?u[0]:a.low,m=null===a.displayBorder?o.panel.yAxis.displayBorder:a.displayBorder,!1===this.axisBorders&&(m=!1),!0===this.axisBorders&&(m=!0),y=(f=o.dynamicYAxis)?a.width:NaN,g=(v=this.getYAxisCurrentPosition(a,e))==n?a.left+a.width:a.left,x=Math.round(g)+.5,b=m?3:0,"left"==v&&(b=m?-3:0),S=this.getCanvasFontSize("stx_yaxis"),k=(C=a.increments).length,K.j0c(2),w=K.g0c(2147483647,"0"),D=1,A=0,K.A0c(4),T=K.e0c(952968608,"0"),M=0,P=Number.MAX_VALUE;for(var J=0;J<100&&(A=C[w]*Math.pow(10,M),K.A0c(11),D=Math.floor(K.g0c(A,l)),K.A0c(0),!((F=Math.abs(K.g0c(h,D)))>P));J++){if(P=F,D==h){T=A;break}D>h?++w>=k&&(w=0,M++):--w<0&&(K.A0c(44),w=K.e0c(k,"1"),M--),T=A}if(_=Math.ceil(p/T)*T,E=0,a.bottom-this.pixelFromTransformedValue(_,e,a)>a.idealTickSizePixels&&a.semiLog&&a.prettySemiLog){for(L=Math.ceil(p),q=0;_-L>=1e4&&q<=15;)_/=10,L/=10,q++;for(_=Math.ceil(_),L=Math.ceil(L);L<_&&_%L!=0;++L);_*=Math.pow(10,q),(L*=Math.pow(10,q))<_&&(_===T&&(T=L,E=L),_=L)}if(a.height>a.zoom){K.A0c(10),I=K.g0c("0",0),N=Number.MAX_VALUE,o.context.save(),this.canvasFont("stx_yaxis",o.context);for(var $=0;$<100&&(O="t",O+="e",O+="x",O+="t",H="l",H+="ef",H+="t",K.A0c(54),!((R=K.g0c(T,I,_))>d));$++)T+=E,I++,N-(j=this.pixelFromTransformedValue(R,e,a))<S+1&&E>0?($=I=0,N=Number.MAX_VALUE,T=E,E*=2,r.reset()):(N=j,(z=Math.round(j)+.5)+S/2>e.bottom||z-S/2<e.top||Math.abs(z-a.bottom)<1||(a.displayGridLines&&(Q="g",Q+="r",Q+="id",r.moveTo("grid",e.left+1,z),r.lineTo(Q,e.right-1,z)),m&&(K.j0c(0),r.moveTo("border",K.e0c(x,.5),z),K.j0c(5),r.lineTo("border",K.e0c(x,b),z)),R=a.priceFormatter?a.priceFormatter(this,e,R):this.formatYAxisPrice(R,e,null,a),B=a.textBackground?this.containerColor:null,K.j0c(10),U=K.e0c("3",0),K.A0c(23),W=K.e0c(b,U,g),v==H?(W=a.left+3,!1!==a.justifyRight&&(W=a.left+a.width+b-U)):a.justifyRight&&(W=g+a.width),r.addText(O,R,W,z,B,null,S),f&&(K.j0c(5),Y=K.g0c(R,""),y=Math.max(y,o.context.measureText(Y).width+Math.abs(b)+U))));o.context.restore(),$>=100&&console.log("drawYAxisPretty: assertion error. zz reached 100")}if(m&&(X="b",X+="ord",X+="er",Z="b",Z+="or",Z+="de",Z+="r",G=Math.round(a.bottom)+.5,r.moveTo("border",x,a.top),r.lineTo(Z,x,G),r.draw(this.getBackgroundCanvas(o).context,X)),f&&y>a.width)throw a._dynamicWidth=y,this.calculateYAxisPositions(),new Error("reboot draw");if(!f&&a._dynamicWidth)throw this.resetDynamicYAxis({chartName:o.name}),new Error("reboot draw")}a==e.yAxis&&this.plotYAxisGrid(e)}this.runAppend("drawYAxis",arguments)}}},function(e){function t(){}e.timezoneJS={},e.CIQ=t,V.n6n(),t.inheritsFrom=function(e,t,i){var a;a=t.prototype||Object.getPrototypeOf(t),e.prototype=!1!==i&&"function"==typeof t?new t:Object.create(a),V.n6n(),Object.defineProperties(e.prototype,{constructor:{configurable:!0,enumerable:!1,value:e,writable:!0},parent:{configurable:!0,enumerable:!1,value:a,writable:!0}})},t.extend=function(e,i,r){var n,s;for(n in V.D6n(),i)e!==(s=i[n])&&void 0!==s&&(null===s||!0===r?e[n]=s:s.constructor==Array?e[n]=s.slice():s.constructor==Object?e[n]=t.extend("object"===a(e[n])&&null!==e[n]?e[n]:{},s):e[n]=s);return e},t.activateImports=function(){var t;V.n6n(),(t=this).activatedImports||(t.activatedImports={});for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];a.forEach((function(i){V.n6n(),"function"==typeof i&&(i.__guid in t.activatedImports||(i.__guid=t.uniqueID(!0),t.activatedImports[i.__guid]=i.__name||i.name,i(e)))}))}}(z={}),s(),o(z),l(z),h(z),c(z),u(z),d(z),p(z),m(z),g(z),f(z),y(z),v(z),x(),b(z),S(z),C(z),k(z),w(z),D(z),A(z),T(z),M(z),P(z),V.D6n(),F(z),_(z),E(z),L(z),q(z),I(z),N(z),O(z),H(z),R(z),j(z);var Q=z.CIQ,B=z.SplinePlotter,U=z.timezoneJS,W=z.$$,Y=z.$$$}).call(this,i(32))},350:function(e,t,i){"use strict";(function(e){i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return o})),i.d(t,"g",(function(){return l})),i.d(t,"h",(function(){return h})),i.d(t,"i",(function(){return c})),i.d(t,"j",(function(){return u})),i.d(t,"k",(function(){return d})),i.d(t,"l",(function(){return p})),i.d(t,"m",(function(){return m})),i.d(t,"p",(function(){return g})),i.d(t,"q",(function(){return f})),i.d(t,"s",(function(){return y})),i.d(t,"t",(function(){return v})),i.d(t,"u",(function(){return x})),i.d(t,"v",(function(){return b})),i.d(t,"w",(function(){return S})),i.d(t,"x",(function(){return C})),i.d(t,"y",(function(){return k})),i.d(t,"z",(function(){return w})),i.d(t,"A",(function(){return D})),i.d(t,"C",(function(){return A})),i.d(t,"D",(function(){return T})),i.d(t,"n",(function(){return M})),i.d(t,"o",(function(){return P})),i.d(t,"r",(function(){return F})),i.d(t,"E",(function(){return _})),i.d(t,"F",(function(){return E}));var a=i(349);i.d(t,"c",(function(){return a.c})),i.d(t,"d",(function(){return a.d})),i.d(t,"B",(function(){return a.e})),i.d(t,"a",(function(){return a.a})),i.d(t,"b",(function(){return a.b}));var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L;function q(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var i=[],a=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);a=!0);}catch(e){r=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return i}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return O(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(){}R[354008]=function(){for(var e=2;9!==e;)switch(e){case 2:e="object"===("undefined"==typeof globalThis?"undefined":H(globalThis))?1:5;break;case 1:return globalThis;case 5:var t;try{for(var i=2;6!==i;)switch(i){case 2:Object.defineProperty(Object.prototype,"KtyQ7",{get:function(){for(;;)return this},configurable:!0}),(t=KtyQ7).yIkzJ=t,i=4;break;case 4:i="undefined"==typeof yIkzJ?3:9;break;case 3:throw"";case 9:delete t.yIkzJ,delete Object.prototype.KtyQ7,i=6}}catch(e){t=window}return t}}(),R[452167]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}for(var i=2;11!==i;)switch(i){case 2:var a=[arguments];a[8]="",a[8]="p",a[1]="",i=3;break;case 3:a[1]="",a[1]="P6",a[3]=1,a[9]=a[1],a[9]+=a[8],a[9]+=a[8],i=13;break;case 13:var r=function(e,t,i,r){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];n(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=12;break;case 12:r(t,"charCodeAt",a[3],a[9]),i=11}function n(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[7]="",s[3]="eProperty",s[7]="efin",n=3;break;case 3:s[4]="d",s[1]=6;try{for(var o=2;8!==o;)switch(o){case 2:s[5]={},s[9]=(0,s[0][1])(s[0][0]),o=5;break;case 5:s[6]=[s[1],s[9].prototype][s[0][3]],s[5].value=s[6][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 2:s[2]=s[4],s[2]+=s[7],s[2]+=s[3],s[0][0].Object[s[2]](s[6],s[0][4],s[5]),l=3}}catch(e){}s[6][s[0][4]]=s[5].value,o=8}}catch(e){}n=7}}}(R[354008]),R[261964]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function i(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[5]="",s[5]="erty",s[2]="op",s[3]="",s[3]="definePr";try{for(var o=2;8!==o;)switch(o){case 5:s[4]=[s[1],s[1].prototype][s[0][3]],s[7].value=s[4][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 2:s[6]=s[3],s[6]+=s[2],s[6]+=s[5],s[0][0].Object[s[6]](s[4],s[0][4],s[7]),l=3}}catch(e){}s[4][s[0][4]]=s[7].value,o=8;break;case 2:s[7]={},s[1]=(0,s[0][1])(s[0][0]),o=5}}catch(e){}n=7}}for(var a=2;42!==a;)switch(a){case 2:var r=[arguments];r[2]="",r[2]="6m",r[4]="",r[4]="V",r[3]="",a=8;break;case 23:r[70]+=r[6],r[70]+=r[6],r[78]=r[3],r[78]+=r[7],a=34;break;case 8:r[3]="",r[3]="Z",r[6]="",r[6]="m",a=13;break;case 13:r[9]="",r[9]="D6",r[1]="mm",r[7]="",r[7]="6",r[5]="",a=18;break;case 30:var n=function(e,t,a,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];i(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};a=29;break;case 44:n(s,"substring",r[8],r[70]),a=43;break;case 43:n(s,"charCodeAt",r[8],r[74]),a=42;break;case 29:n(t,"String",r[63],r[22]),a=28;break;case 34:r[78]+=r[1],r[22]=r[4],r[22]+=r[2],r[22]+=r[6],a=30;break;case 28:n(o,"fromCharCode",r[63],r[78]),a=44;break;case 18:r[5]="L",r[8]=3,r[8]=1,r[63]=0,a=27;break;case 27:r[74]=r[5],r[74]+=r[7],r[74]+=r[1],r[70]=r[9],a=23}function s(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}function o(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}}(R[354008]),R[130872]=function(e){function t(e,t,i,a,r){for(var n=2;13!==n;)switch(n){case 6:l[6]=6;try{for(var s=2;8!==s;)switch(s){case 2:l[8]={},l[2]=(0,l[0][1])(l[0][0]),l[7]=[l[6],l[2].prototype][l[0][3]],l[8].value=l[7][l[0][2]],s=3;break;case 3:try{for(var o=2;3!==o;)switch(o){case 2:l[4]=l[5],l[4]+=l[1],o=5;break;case 5:l[4]+=l[9],l[0][0].Object[l[4]](l[7],l[0][4],l[8]),o=3}}catch(e){}l[7][l[0][4]]=l[8].value,s=8}}catch(e){}n=13;break;case 3:l[5]="",l[5]="d",l[6]=3,l[6]=4,n=6;break;case 2:var l=[arguments];l[9]="y",l[1]="",l[1]="efinePropert",n=3}}for(var i=2;16!==i;)switch(i){case 2:var a=[arguments];a[5]="30",a[7]="K3",a[9]="0",i=3;break;case 19:var r=function(e,i,r,n){for(var s=2;5!==s;)switch(s){case 2:var o=[arguments];t(a[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};i=18;break;case 3:a[2]="",a[2]="",a[2]="v",a[4]=2,i=6;break;case 18:r(s,"replace",a[4],a[6]),i=17;break;case 11:a[6]=a[7],a[6]+=a[9],a[6]+=a[9],i=19;break;case 6:a[4]=1,a[1]=a[2],a[1]+=a[5],a[1]+=a[9],i=11;break;case 17:r(n,"map",a[4],a[1]),i=16}function n(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function s(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].String}}}(R[354008]),R[520910]=function(e){function t(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0]}}function i(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Function}}function a(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].Array}}function r(e){for(var t=2;5!==t;)switch(t){case 2:var i=[arguments];return i[0][0].RegExp}}function n(e,t,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[1]="",s[1]="ty",s[2]="oper",n=3;break;case 3:s[9]="",s[9]="definePr";try{for(var o=2;8!==o;)switch(o){case 2:s[6]={},o=1;break;case 1:s[5]=(0,s[0][1])(s[0][0]),s[8]=[s[5],s[5].prototype][s[0][3]],s[6].value=s[8][s[0][2]];try{for(var l=2;3!==l;)switch(l){case 2:s[4]=s[9],s[4]+=s[2],s[4]+=s[1],s[0][0].Object[s[4]](s[8],s[0][4],s[6]),l=3}}catch(e){}s[8][s[0][4]]=s[6].value,o=8}}catch(e){}n=7}}for(var s=2;74!==s;)switch(s){case 14:o[3]="2",o[5]="",o[7]="__",o[5]="ct",o[4]="",s=20;break;case 24:o[35]="",o[35]="_optim",o[40]="",o[40]="_",s=35;break;case 48:o[63]+=o[58],o[63]+=o[58],o[88]=o[45],o[88]+=o[3],o[88]+=o[8],s=64;break;case 35:o[10]=1,o[75]="u2",o[17]="2b",o[65]="z",o[58]="b",s=30;break;case 57:l(t,o[73],o[53],o[69]),s=56;break;case 39:o[85]=o[40],o[85]+=o[35],o[85]+=o[25],o[64]=o[44],s=54;break;case 75:l(i,"apply",o[10],o[46]),s=74;break;case 54:o[64]+=o[58],o[64]+=o[58],o[84]=o[4],o[84]+=o[81],o[84]+=o[5],o[63]=o[9],s=48;break;case 20:o[9]="l2",o[45]="f",o[4]="__ab",o[44]="",o[81]="stra",s=15;break;case 43:o[46]+=o[58],o[70]=o[75],o[70]+=o[58],o[70]+=o[58],s=39;break;case 64:o[69]=o[6],o[69]+=o[58],o[69]+=o[58],o[73]=o[7],s=60;break;case 9:o[8]="",o[1]="dual",o[8]="bb",o[3]="",s=14;break;case 30:o[53]=7,o[53]=0,o[46]=o[65],o[46]+=o[17],s=43;break;case 76:l(t,o[85],o[53],o[70]),s=75;break;case 60:o[73]+=o[2],o[73]+=o[1],s=58;break;case 2:var o=[arguments];o[2]="",o[2]="resi",o[6]="",o[6]="j2",s=9;break;case 15:o[44]="",o[44]="V2",o[25]="",o[25]="ize",s=24;break;case 58:var l=function(e,t,i,a){for(var r=2;5!==r;)switch(r){case 2:var s=[arguments];n(o[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),r=5}};s=57;break;case 56:l(r,"test",o[10],o[88]),s=55;break;case 55:l(a,"push",o[10],o[63]),s=77;break;case 77:l(t,o[84],o[53],o[64]),s=76}}(R[354008]),R.f6D=function(){return"function"==typeof R[69146].c5H?R[69146].c5H.apply(R[69146],arguments):R[69146].c5H},R.T01=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];t[5]=void 0,t[7]={},t[7].i29=function(){for(var e=2;90!==e;)switch(e){case 2:var i=[arguments];e=1;break;case 1:e=t[5]?5:4;break;case 70:i[72]++,e=57;break;case 5:return 25;case 77:i[26]=0,e=76;break;case 61:i[83]="K6O",i[31]="N8O",e=59;break;case 4:i[2]=[],i[7]={},i[7].R6O=["b8O"],i[7].N8O=function(){return"function"==typeof j2bb},e=7;break;case 7:i[8]=i[7],i[6]={},i[6].R6O=["F8O"],i[6].N8O=function(){return!/\x32\u0035/.f2bb(function(){return decodeURIComponent("%25")}+[])},e=12;break;case 12:i[5]=i[6],i[1]={},i[1].R6O=["b8O"],i[1].N8O=function(){var e=!1,t=[];try{for(var i in console)t.l2bb(i);e=0===t.length}catch(e){}return e},e=19;break;case 19:i[9]=i[1],i[3]={},i[3].R6O=["F8O"],i[3].N8O=function(){return/\u0074\x72\x75\u0065/.f2bb(function(){return"A".normalize("NFC")==="".normalize("NFC")}+[])},e=15;break;case 58:i[72]=0,e=57;break;case 15:i[4]=i[3],i[85]={},i[85].R6O=["F8O"],i[85].N8O=function(){return!/\u0079/.f2bb(function(){return"x y".slice(0,1)}+[])},i[79]=i[85],i[77]={},e=22;break;case 22:i[77].R6O=["b8O"],i[77].N8O=function(){return"function"==typeof V2bb},i[34]=i[77],i[12]={},e=33;break;case 72:i[50].l2bb(i[38]),e=71;break;case 71:i[26]++,e=76;break;case 33:i[12].R6O=["b8O"],i[12].N8O=function(){return"function"==typeof u2bb},i[28]=i[12],e=30;break;case 59:i[78]="f6O",e=58;break;case 76:e=i[26]<i[84][i[93]].length?75:70;break;case 39:i[90]={},i[90].R6O=["F8O"],i[90].N8O=function(){return/\u0031/.f2bb(function(){return"aa".lastIndexOf("a")}+[])},i[33]=i[90],i[2].l2bb(i[5]),i[2].l2bb(i[33]),e=52;break;case 57:e=i[72]<i[2].length?56:69;break;case 30:i[36]={},i[36].R6O=["F8O"],i[36].N8O=function(){return/\u0074\x72\u0075\u0065/.f2bb(function(){return"aaa".includes("a")}+[])},i[49]=i[36],e=43;break;case 45:i[2].l2bb(i[49]),i[50]=[],i[46]="k6O",i[47]="P6O",i[93]="R6O",e=61;break;case 69:e=function(e){for(var t=2;22!==t;)switch(t){case 18:a[1]=!1,t=17;break;case 7:t=a[9]<a[0][0].length?6:18;break;case 5:return;case 19:a[9]++,t=7;break;case 26:t=a[4]>=.5?25:24;break;case 24:a[9]++,t=16;break;case 12:a[6].l2bb(a[8][i[78]]),t=11;break;case 16:t=a[9]<a[6].length?15:23;break;case 4:a[3]={},a[6]=[],a[9]=0,t=8;break;case 1:t=0===a[0][0].length?5:4;break;case 17:a[9]=0,t=16;break;case 23:return a[1];case 10:t=a[8][i[83]]===i[46]?20:19;break;case 20:a[3][a[8][i[78]]].h+=!0,t=19;break;case 8:a[9]=0,t=7;break;case 11:a[3][a[8][i[78]]].t+=!0,t=10;break;case 25:a[1]=!0,t=24;break;case 6:a[8]=a[0][0][a[9]],t=14;break;case 14:t=void 0===a[3][a[8][i[78]]]?13:11;break;case 13:a[3][a[8][i[78]]]=function(){for(var e=2;9!==e;)switch(e){case 2:var t=[arguments];return t[8]={},t[8].h=0,t[8].t=0,t[8]}}.z2bb(this,arguments),t=12;break;case 15:a[2]=a[6][a[9]],a[4]=a[3][a[2]].h/a[3][a[2]].t,t=26;break;case 2:var a=[arguments];t=1}}(i[50])?68:67;break;case 43:i[68]={},i[68].R6O=["F8O"],i[68].N8O=function(){return!/(\x5b|\x5d)/.f2bb(function(){return["a","a"].join()}+[])},i[14]=i[68],e=39;break;case 75:i[38]={},i[38][i[78]]=i[84][i[93]][i[26]],i[38][i[83]]=i[43],e=72;break;case 56:i[84]=i[2][i[72]];try{i[43]=i[84][i[31]]()?i[46]:i[47]}catch(e){i[43]=i[47]}e=77;break;case 52:i[2].l2bb(i[79]),i[2].l2bb(i[9]),i[2].l2bb(i[28]),i[2].l2bb(i[8]),i[2].l2bb(i[34]),e=47;break;case 47:i[2].l2bb(i[14]),i[2].l2bb(i[4]),e=45;break;case 67:return t[5]=72,80;case 68:e=68}},e=3;break;case 3:return t[7]}}(),R.e01=function(){return"function"==typeof R.T01.i29?R.T01.i29.apply(R.T01,arguments):R.T01.i29},R[64901]=function(e){function t(t){for(var i=2;15!==i;)switch(i){case 20:a=t-h>r&&s-t>r,i=19;break;case 5:u=o[e[4]],i=4;break;case 14:i=c--?12:13;break;case 17:a=t-h>r,i=19;break;case 10:i=h>=0&&s>=0?20:18;break;case 1:i=c--?4:5;break;case 4:i=c--?9:3;break;case 16:a=s-t>r,i=19;break;case 9:i=c--?7:8;break;case 6:s=n&&u(n,r),i=14;break;case 12:i=c--?10:11;break;case 19:return a;case 2:var a,r,n,s,l,h,u;i=1;break;case 3:r=30,i=9;break;case 18:i=h>=0?17:16;break;case 11:h=(l||0===l)&&u(l,r),i=10;break;case 8:n=e[6],i=7;break;case 13:l=e[7],i=12;break;case 7:i=c--?14:6}}for(var i=2;10!==i;)switch(i){case 9:l=H(a),i=8;break;case 11:return{f5D:function(i){for(var a=2;6!==a;)switch(a){case 2:var r=(new o[e[0]])[e[1]]();a=1;break;case 1:a=r>s?5:8;break;case 5:a=c--?3:4;break;case 4:n=t(r),a=3;break;case 3:a=c--?8:9;break;case 9:s=r+6e4,a=8;break;case 8:return function(t,a){for(var r=2;10!==r;)switch(r){case 14:l=s,r=13;break;case 8:var n=o[a[4]](t[a[2]](h),16)[a[3]](2),s=n[a[2]](n[a[5]]-1);r=6;break;case 13:h++,r=9;break;case 5:r=void 0===a&&void 0!==e?4:3;break;case 6:r=0===h?14:12;break;case 3:var l,h=0;r=9;break;case 9:r=h<t[a[5]]?8:11;break;case 1:t=i,r=5;break;case 2:r=void 0===t&&void 0!==i?1:5;break;case 11:return l;case 4:a=e,r=3;break;case 12:l^=s,r=13}}(void 0,void 0)?n:!n}}};case 3:i=c--?8:9;break;case 4:var a="fromCharCode",r="RegExp";i=3;break;case 8:i=c--?6:7;break;case 5:o=R[354008],i=4;break;case 1:i=c--?4:5;break;case 12:var n,s=0;i=11;break;case 13:i=c--?11:12;break;case 7:h=l.K300(new o[r]("^['-|]"),"S"),i=6;break;case 14:e=e.v300((function(e){for(var t=2;13!==t;)switch(t){case 4:var i=0;t=3;break;case 7:t=r?14:6;break;case 5:r="",t=4;break;case 1:t=c--?4:5;break;case 3:t=i<e.length?9:7;break;case 2:var r;t=1;break;case 6:return;case 14:return r;case 8:i++,t=3;break;case 9:r+=o[h][a](e[i]+94),t=8}})),i=13;break;case 2:var o,l,h,c;i=1;break;case 6:i=c--?13:14}}([[-26,3,22,7],[9,7,22,-10,11,15,7],[5,10,3,20,-29,22],[22,17,-11,22,20,11,16,9],[18,3,20,21,7,-21,16,22],[14,7,16,9,22,10],[-44,7,-45,22,9,13,-46,-46,-46],[]]),R.B1H=function(){return"function"==typeof R[520993].p52?R[520993].p52.apply(R[520993],arguments):R[520993].p52},R[520993]=function(){for(;;){var e,t,i=R[354008];return{p52:function(e,t,i,a){for(;;)return r(e,t,i,a)},X52:function(e,t,i,a){for(;;)return r(e,t,i,a,!0)}}}function a(e){for(var t=2;7!==t;)switch(t){case 9:r++,t=4;break;case 2:var i=1,a="";t=5;break;case 8:return a;case 5:var r=0;t=4;break;case 4:t=r<e.length?3:8;break;case 3:a+=V6mm.Z6mm(e[r]-i+114),t=9}}function r(r,n,s,o,l){for(var h=2;15!==h;)switch(h){case 14:var c=p.length-r;h=13;break;case 18:d=(u=p.D6mm(0,p.length)).length,h=16;break;case 13:h=n&&c>0&&46!==p.L6mm(c-1)?12:11;break;case 19:h=null===r||r<=0?18:14;break;case 8:d=(u=p.D6mm(r,o)).length,h=6;break;case 12:return!1;case 2:var u,d,p,m;m=i[a([-5,-2,-14,-16,3,-8,-2,-3])],!e&&(e=void 0!==m?m[a([-9,-2,2,3,-3,-16,-4,-12])]||" ":""),!t&&(t=void 0!==m?m[a([-9,1,-12,-11])]:""),p=l?t:e,h=9;break;case 6:return R.d6D(u,d,s);case 9:h=o>0?8:19;break;case 16:return R.d6D(u,d,s);case 11:d=(u=p.D6mm(c,p.length)).length,h=20;break;case 20:return R.d6D(u,d,s)}}}(),R.j6O=function(){return"function"==typeof R[64901].f5D?R[64901].f5D.apply(R[64901],arguments):R[64901].f5D},R.Q4q=function(){return"function"==typeof R[401065].i7V?R[401065].i7V.apply(R[401065],arguments):R[401065].i7V},R.w01=function(){return"function"==typeof R.T01.i29?R.T01.i29.apply(R.T01,arguments):R.T01.i29},R[69146]=(r=function(e,t){var i=65535&t;return((t-i)*e|0)+(i*e|0)|0},{c5H:function(e,t,i){for(var a=i,n=-4&t,s=0;s<n;s+=4){var o=255&e.P6pp(s)|(255&e.P6pp(s+1))<<8|(255&e.P6pp(s+2))<<16|(255&e.P6pp(s+3))<<24;o=r(o,3432918353),a=5*(a=(524287&(a^=o=r(o=(131071&o)<<15|o>>>17,461845907)))<<13|a>>>19)+3864292196|0}switch(o=0,t%4){case 3:o=(255&e.P6pp(n+2))<<16;case 2:o|=(255&e.P6pp(n+1))<<8;case 1:o|=255&e.P6pp(n),o=r(o,3432918353),a^=o=r(o=(131071&o)<<15|o>>>17,461845907)}return a^=t,a=r(a^=a>>>16,2246822507),a=r(a^=a>>>13,3266489909),a^=a>>>16}}),R.u1H=function(){return"function"==typeof R[520993].X52?R[520993].X52.apply(R[520993],arguments):R[520993].X52},R.E4q=function(){return"function"==typeof R[401065].n7V?R[401065].n7V.apply(R[401065],arguments):R[401065].n7V},R[354008].P8BB=R,R.U1H=function(){return"function"==typeof R[520993].p52?R[520993].p52.apply(R[520993],arguments):R[520993].p52},R.d6D=function(){return"function"==typeof R[69146].c5H?R[69146].c5H.apply(R[69146],arguments):R[69146].c5H},R.c6O=function(){return"function"==typeof R[64901].f5D?R[64901].f5D.apply(R[64901],arguments):R[64901].f5D},R[401065]={n7V:function(){var e,t=arguments;switch(n){case 68:e=t[1]%+t[0];break;case 24:e=t[2]*t[0]+t[1]*t[3];break;case 35:e=(t[1]-t[2])/(t[0]-t[3]);break;case 80:e=t[1]-t[2]*t[0];break;case 19:e=t[2]+(t[0]<<t[1]);break;case 27:e=t[2]+ +t[1]*t[0];break;case 42:e=t[0]<t[1];break;case 4:e=t[1]-t[0];break;case 50:e=t[3]|t[4]|t[2]|t[0]|t[1];break;case 8:e=t[0]|t[1];break;case 74:e=t[4]*t[1]*t[5]+(t[0]-t[3]*t[2])*t[6];break;case 13:e=t[2]/(t[0]|t[1]);break;case 65:e=t[1]*t[0]/t[2];break;case 36:e=t[0]==t[1];break;case 40:e=t[0]<=t[1];break;case 61:e=(t[1]-t[2])*t[4]-t[3]+t[0];break;case 62:e=t[2]*t[0]+t[1];break;case 70:e=t[0]-(t[2]-t[1])-t[3];break;case 15:e=t[2]+(t[1]+t[4]*t[3])*t[0];break;case 49:e=t[1]|t[2]|t[0];break;case 20:e=t[2]-t[0]+t[1];break;case 3:e=t[1]+t[2]/t[0]-t[3];break;case 52:e=t[0]-(t[1]-t[2]);break;case 0:e=t[1]+t[0];break;case 77:e=t[1]/t[0]/+t[2];break;case 29:e=t[0]-t[2]/+t[1];break;case 1:e=t[0]*t[1];break;case 57:e=(t[1]<<(t[4]|t[0]))-t[2]+t[3];break;case 51:e=t[1]===t[0];break;case 26:e=t[0]-t[2]/t[1]-t[3];break;case 6:e=(t[1]+t[0])/t[2];break;case 16:e=t[0]&t[1];break;case 5:e=t[0]/t[1];break;case 33:e=t[3]+(t[0]>>t[1])+t[2];break;case 76:e=t[2]*((t[3]-t[4])/t[1]+ +t[0]);break;case 30:e=t[1]-t[2]/t[0];break;case 12:e=t[2]/(t[0]^t[1]);break;case 60:e=(t[1]-t[0])/t[2];break;case 45:e=t[1]<<(t[0]^t[2]);break;case 46:e=(t[2]^t[0])<<t[1];break;case 18:e=t[1]+t[2]+t[0];break;case 22:e=t[1]-+t[0]-t[2];break;case 67:e=t[0]+(t[2]&t[1]);break;case 64:e=t[0]*(+t[1]+t[3]/t[2]);break;case 69:e=t[0]-+t[1];break;case 10:e=t[1]+t[0]-t[2];break;case 25:e=t[2]+t[1]/t[0];break;case 55:e=t[2]*t[6]*t[4]+t[5]*(t[0]-t[1])+t[3];break;case 21:e=t[1]-(t[0]&t[2]);break;case 39:e=t[0]>t[1];break;case 2:e=t[3]-t[0]/t[1]+t[2];break;case 56:e=t[2]*(t[3]&t[0])*t[1];break;case 17:e=t[1]^t[0];break;case 72:e=t[0]/(t[1]+t[2]);break;case 54:e=t[0]*t[2]*t[1];break;case 73:e=(t[1]-t[3])*t[0]+t[2];break;case 59:e=t[0]*t[1]*+t[2]+t[3];break;case 38:e=t[1]!=t[0];break;case 66:e=t[1]*(t[2]/t[0]);break;case 41:e=t[4]+t[3]+t[2]+t[1]+t[0];break;case 58:e=t[3]*t[4]*t[1]+t[0]*t[2];break;case 7:e=t[1]>>t[0];break;case 43:e=t[1]%t[0];break;case 31:e=t[1]+t[0]*t[3]*t[2];break;case 53:e=(t[0]^t[1])-t[3]*t[2]*t[4];break;case 78:e=(t[0]-t[2])*(t[1]-t[4])+(t[3]-t[5])*(t[6]-t[7]);break;case 44:e=+t[0]<<t[1];break;case 9:e=t[0]/+t[1];break;case 81:e=(t[1]-t[3]/(t[0]&t[2]))*t[4];break;case 23:e=t[3]+t[1]-(t[2]|t[0]);break;case 14:e=(t[2]-t[1])*t[0];break;case 11:e=t[1]<<t[0];break;case 75:e=t[4]*t[2]*t[1]*(t[0]&t[3]);break;case 82:e=(t[3]+t[1]/(t[0]-t[4]))*t[2];break;case 79:e=t[1]*(t[2]/t[0]-(t[4]|t[5]))+t[3];break;case 37:e=t[1]>=t[0];break;case 71:e=t[0]/(t[2]*t[1]);break;case 34:e=t[0]+ +t[1];break;case 28:e=t[1]+t[2]*t[0];break;case 48:e=t[0]|t[2]|t[3]|t[1];break;case 32:e=t[3]+t[2]+t[1]+t[0];break;case 63:e=t[1]*t[2]/(t[0]+t[3]);break;case 47:e=t[1]<<+t[0]}return e},i7V:function(e){n=e}},R.q4q=function(){return"function"==typeof R[401065].n7V?R[401065].n7V.apply(R[401065],arguments):R[401065].n7V},R.F1H=function(){return"function"==typeof R[520993].X52?R[520993].X52.apply(R[520993],arguments):R[520993].X52},R.P4q=function(){return"function"==typeof R[401065].i7V?R[401065].i7V.apply(R[401065],arguments):R[401065].i7V},R.D6O=function(e){if(R.e01(),R)return R.j6O(e)},R.O6O=function(e){if(R.e01(),R)return R.j6O(e)},R.Z6O=function(e){if(R.w01(),R&&e)return R.j6O(e)},R.n6O=function(e){if(R.e01(),R)return R.j6O(e)},R.m6O=function(e){if(R.w01(),R)return R.c6O(e)},R.p6O=function(e){if(R.w01(),R)return R.c6O(e)},R.J6O=function(e){if(R.w01(),R)return R.c6O(e)},s=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i={get:function(e,i){return i(null,t.localStorage.getItem(e))},set:function(e,i){return R.e01(),t.localStorageSetItem(e,i)},remove:function(e){return t.localStorage.removeItem(e)}},R.e01(),t.ChartEngine.create=function(){var e,a,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=n.container,o=n.config,l=n.deferLoad;s||(s=document.querySelector(".chartContainer")||document.body),o||(o={}),e=Object.assign({container:s},o.chartEngineParams),a=new this(e);var h=o,c=h.quoteFeeds,u=h.marketFactory,d=h.addOns,p=h.chartId;for(var m in c&&a.attachQuoteFeed&&c.forEach((function(e){var t=e.quoteFeed,i=e.behavior,r=e.filter;R.e01(),a.attachQuoteFeed(t,i,r)})),u&&a.setMarketFactory(u),d&&Object.entries(d).filter((function(e){return!!I(e,2)[1]})).forEach((function(e){var i,r=I(e,2),n=r[0],s=r[1];R.w01(),o.enabledAddOns[n]&&(i=s.moduleName||t.capitalize(n),t[i]?new t[i](Object.assign({stx:a},s)):t.debug&&console.log("".concat(i," not available for addons with params:"),s))})),r=t.ensureDefaults(o.callbacks||{},{layout:this.getSaveLayout(o),symbolChange:this.getSaveLayout(o),drawing:this.getSaveDrawings(o),preferences:this.getSavePreferences(o),newChart:this.getRetoggleEvents(o)}))r[m]&&a.addEventListener(m,r[m]);return t.NameValueStore&&Object.assign(i,t.NameValueStore),l||(o.restore?(this.restorePreferences(a,p),this.restoreLayout(a,null,p)):(a.loadChart(o.initialSymbol,{masterData:o.initialData}),a.draw())),R.w01(),a},t.ChartEngine.getSaveLayout=function(e){return function(t){var a,r=t.stx;R.e01(),e.restore&&r.exportLayout&&(a=JSON.stringify(r.exportLayout(!0)),i.set("myChartLayout"+(e.chartId||""),a))}},t.ChartEngine.restoreLayout=function(e,t,a){var r=this.restoreDrawings;function n(){R.w01(),r(e,e.chart.symbol,a),t&&t()}a||(a=""),R.Q4q(0),i.get(R.q4q(a,"myChartLayout"),(function(t,i){t||(e.importLayout&&e.importLayout(JSON.parse(i),{managePeriodicity:!0,cb:n}),e.termStructure&&e.setCandleWidth(1))}))},t.ChartEngine.getSaveDrawings=function(e){return function(t){var a,r,n=t.stx,s=t.symbol;R.w01(),e.restore&&n.exportDrawings&&(a=n.exportDrawings(),r=e.chartId?e.chartId+"~"+s:s,0===a.length?i.remove(r):i.set(r,JSON.stringify(a)))}},t.ChartEngine.restoreDrawings=function(e,a,r){t.Drawing&&(R.e01(),i.get(r?r+"~"+a:a,(function(t,i){var a;t||null!==i&&(a=JSON.parse(i))&&(e.importDrawings(a),e.draw())})))},t.ChartEngine.getSavePreferences=function(e){return R.w01(),function(t){var a,r=t.stx;R.e01(),e.restore&&r.exportPreferences&&("m","yChartPrefere","nces",a=JSON.stringify(r.exportPreferences()),i.set("myChartPreferences"+(e.chartId||""),a))}},t.ChartEngine.restorePreferences=function(e,t){t||(t=""),R.Q4q(0),i.get(R.E4q(t,"myChartPreferences"),(function(t,i){t||(R.w01(),i&&e.importPreferences&&e.importPreferences(JSON.parse(i)))}))},t.ChartEngine.getRetoggleEvents=function(e){return function(i){var a,r=i.stx;a=document.getElementById(e.chartId),R.e01(),a||(a=(t.getFn("UI.getMyContext")(r.container)||{}).topNode),a||(a=document),a.querySelectorAll("".concat(e.selector.markersMenuItem,":not(.span-event).ciq-active")).forEach((function(e){e.dispatchEvent(new Event("stxtap"))}))}}},o=function(e){var t,i;R.w01(),t=2;for(var a=1;1301711480!==R.d6D(a.toString(),a.toString().length,4043);a++)i=""===-_CIQ?_CIQ:e.CIQ,t+=2;272472693!==R.f6D(t.toString(),t.toString().length,73681)&&(i="undefined"!=typeof _CIQ?_CIQ:e.CIQ),i.ChartEngine.prototype.drawHeatmap=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=R;if(t&&t.length&&((i=e.panel)||(i="chart"),a=this.panels[i])){r=e.yAxis?e.yAxis:a.yAxis,n=this.chart.dataSegment,e.name||(e.name="Data"),e.widthFactor||(e.widthFactor=1),e.height||(e.height=Math.pow(10,1-(a.decimalPlaces||a.chart.decimalPlaces))),s="stx-float-date",o=this.chart.context,this.canvasFont(s,o),l=this.getCanvasFontSize(s),f.Q4q(7),h=f.E4q(1174707680,"1"),!e.highlight&&this.highlightedDraggable&&(h=.3),c=.5,a.chart.tmpWidth<=1&&(c=0),u=null,d=null,p=this,m=null,this.startClip(i),o.globalAlpha=h;for(var y=0;y<t.length;y++)v((g=t[y]).field,g.color,g.opacity,null,e.widthFactor,g.height,g.border_color?c:-c/4,g.subField),g.border_color&&this.layout.candleWidth>=2&&v(g.field,g.border_color,g.opacity,!0,e.widthFactor,g.height,c,g.subField);o.lineWidth=1,f.P4q(8),o.globalAlpha=f.E4q("1",0),this.endClip()}function v(t,i,s,c,g,y,v,x){var b,S,C,k,w,D,A,T,M,P,F,_,E,L;o.beginPath(),o.fillStyle=i,o.strokeStyle=i,o.textAlign="center",b=p.layout.candleWidth*g,S=Math.floor(p.pixelFromBar(0,a.chart)-p.layout.candleWidth),"number"==typeof s&&(f.P4q(1),o.globalAlpha=f.E4q(s,h)),"object"==H(s)&&(w={minOpacity:s.min||0,maxOpacity:s.max||1});for(var q=0;q<n.length;q++)if((D=n[q])&&D.candleWidth?(S+=0===q?p.layout.candleWidth:(D.candleWidth+b/g)/2,b=D.candleWidth*g):S+=p.layout.candleWidth,f.Q4q(2),C=f.E4q(b,2,v,S),f.P4q(3),(k=f.q4q(2,S,b,v))-C<2&&(f.P4q(0),k=f.q4q(1,C)),D&&(A=D[t])){A[x]&&(A=A[x]),"number"==typeof A&&(A=[A]);for(var I=0;I<A.length;I++)M=0,(T=A[I])instanceof Array&&(w&&(o.globalAlpha=h*(T[2]*w.maxOpacity+(1-T[2])*w.minOpacity)),M=T[1],T=T[0]),P=p.pixelFromPrice(T,a,r),m||(y||(y=e.height),F=p.pixelFromPrice(T+y*(r.flipped?1:-1),a,r),o.lineWidth=1,f.P4q(4),u=f.q4q(P,F),f.Q4q(5),d=f.q4q(u,2),m=o.lineWidth),c?(f.Q4q(4),_=f.q4q(d,P),f.Q4q(0),E=f.E4q(d,P),f.P4q(4),o.rect(C,_,f.q4q(C,k),f.E4q(_,E))):(f.Q4q(4),o.fillRect(C,f.q4q(d,P),f.E4q(C,k),u),e.showSize&&M&&l<=u-2&&(L=o.globalAlpha,o.fillStyle=p.defaultColor,f.Q4q(1),o.globalAlpha=f.E4q(.5,h),f.P4q(6),o.fillText(M,f.E4q(C,k,2),P),o.fillStyle=i,f.Q4q(1),o.globalAlpha=f.q4q(L,h))),w&&T instanceof Array&&(o.globalAlpha=0)}c&&o.stroke(),o.globalAlpha=h,o.closePath()}},i.ChartEngine.prototype.drawCandles=function(e,t,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,j,z,V,Q=R;(r=e.chart)||(r=e,e=e.chart),n=!1,s=!1,o=null,l=e.yAxis,a&&"object"==H(a)?(n=a.isOutline,s=a.isHistogram,o=a.field,l=a.yAxis):(n=a,s=arguments[3]),h=r.dataSegment,c=r.context,u=l.top,d=l.bottom,f=new Array(h.length),y="transparent",v="transparent",x=0,b=r.dataSet.length-r.scroll-1,S={},C=r.tmpWidth/2,k=this.layout.candleWidth,w=e.left-.5*k+this.micropixels-1;for(var B=0;B<=h.length;B++)if(D="trans",D+="p",D+="arent",A="ou",A+="tli",A+="ne",T=C,Q.P4q(9),w+=Q.q4q(k,"2"),k=this.layout.candleWidth,Q.P4q(5),w+=Q.q4q(k,2),(M=h[B])&&!M.projection&&(M.candleWidth&&(w+=(M.candleWidth-k)/2,k=M.candleWidth,(a.isVolume||k<r.tmpWidth)&&(Q.Q4q(5),T=Q.q4q(k,2))),r.transformFunc&&l==r.panel.yAxis&&M.transform&&(M=M.transform),M&&o&&(M=M[o]),(M||0===M)&&(P=M.Close,F=void 0===M.Open?P:M.Open,s&&r.defaultPlotField&&(P=M[r.defaultPlotField]),(P||0===P)&&(s||F!=P&&null!==F)&&(_=t(this,M,n?A:"solid"))))){if(n?y=_:v=_,S[v]=1,(E=y&&!i.isTransparent(y))&&!a.highlight&&(x=.5),c.beginPath(),c.fillStyle=v,M.cache||(M.cache={}),L=M.cache,Q.Q4q(0),(q=Q.E4q(B,b))<e.cacheLeft||q>e.cacheRight||!L.open){if(I=l.semiLog?l.height*(1-(Math.log(Math.max(F,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-F)*l.multiplier,N=l.semiLog?l.height*(1-(Math.log(Math.max(P,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-P)*l.multiplier,l.flipped?(Q.Q4q(4),I=Q.E4q(I,d),Q.P4q(4),N=Q.q4q(N,d)):(I+=u,N+=u),f[B]=N,p=Math.floor(s?N:Math.min(I,N))+x,m=s?l.bottom:Math.max(I,N),Q.P4q(4),g=Math.floor(Q.E4q(p,m)),p<u){if(p+g<u){L.open=p,L.close=p;continue}Q.Q4q(4),g-=Q.E4q(p,u),p=u}p+g>d&&(Q.P4q(10),g-=Q.E4q(g,p,d)),g=Math.max(g,2),L.open=p,L.close=L.open+g}L.open>=d||L.close<=u||(O=Math.floor(w)+(!a.highlight&&.5),j=Math.floor(O-T)+x,z=Math.round(O+T)-x,L.open!=L.close&&c.rect(j,L.open,Math.max(1,z-j),Math.max(1,L.close-L.open)),!a.highlight&&this.highlightedDraggable&&(c.globalAlpha*=.3),v!=D&&c.fill(),E&&(Q.Q4q(11),c.lineWidth=Q.E4q(1590523680,"1"),a.highlight&&(c.lineWidth*=2),c.strokeStyle=y,c.stroke()))}for(var U in V={colors:[],cache:f},S)a.hollow&&i.equals(U,this.containerColor)||V.colors.push(U);return V},i.ChartEngine.prototype.drawShadows=function(e,t,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P=R;(a=e.chart)||(a=e,e=e.chart),r=a.dataSegment,(n=this.chart.context).lineWidth=1,i.highlight&&(n.lineWidth*=2),!i.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),s=i.field,l=(o=i.yAxis||e.yAxis).top,h=o.bottom,c=a.dataSet.length-a.scroll-1,u=this.layout.candleWidth,d=e.left-.5*u+this.micropixels-1;for(var F=0;F<=r.length;F++)if(P.Q4q(5),d+=P.q4q(u,2),u=this.layout.candleWidth,P.P4q(5),d+=P.q4q(u,2),(p=r[F])&&!p.projection&&(p.candleWidth&&(d+=(p.candleWidth-u)/2,u=p.candleWidth),(m=t(this,p,"shadow"))&&(a.transformFunc&&o==a.panel.yAxis&&p.transform&&(p=p.transform),p&&s&&(p=p[s]),(p||0===p)&&(g=p.Close,f=void 0===p.Open?g:p.Open,y=void 0===p.High?Math.max(g,f):p.High,v=void 0===p.Low?Math.min(g,f):p.Low,g||0===g)))){if(p.cache||(p.cache={}),x=p.cache,P.Q4q(0),(b=P.q4q(F,c))<e.cacheLeft||b>e.cacheRight||!x.top){if(S=o.semiLog?o.height*(1-(Math.log(Math.max(y,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-y)*o.multiplier,C=o.semiLog?o.height*(1-(Math.log(Math.max(v,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-v)*o.multiplier,o.flipped?(P.P4q(4),S=P.q4q(S,h),P.Q4q(4),C=P.E4q(C,h)):(S+=l,C+=l),P.P4q(4),k=P.q4q(S,C),S<l){if(S+k<l){x.top=S,x.bottom=S;continue}P.Q4q(4),k-=P.q4q(S,l),S=l}S+k>h&&(P.P4q(10),k-=P.q4q(k,S,h)),x.top=S,x.bottom=x.top+k}x.top>=h||x.bottom<=l||(w=Math.floor(d)+(!i.highlight&&.5),n.beginPath(),g==f&&(D=this.offset,i.isVolume&&(P.Q4q(12),D=P.E4q("2",0,u)),P.Q4q(4),A=P.E4q(D,w),P.P4q(0),T=P.q4q(D,w),M=o.semiLog?o.height*(1-(Math.log(Math.max(g,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-g)*o.multiplier,o.flipped?(P.Q4q(4),M=P.q4q(M,h)):M+=l,M<=h&&M>=l&&(n.moveTo(A,M),n.lineTo(T,M))),y!=v&&(n.moveTo(w,x.top),n.lineTo(w,x.bottom)),n.strokeStyle=m,n.stroke())}},i.ChartEngine.prototype.drawBarChart=function(e,t,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L=R;(n=e.chart)||(n=e,e=e.chart),s=n.dataSegment,o=new Array(s.length),l=n.context,(h=this.canvasStyle(t)).width&&parseInt(h.width,10)<=25?l.lineWidth=Math.max(1,i.stripPX(h.width)):l.lineWidth=1,r.highlight&&(l.lineWidth*=2),!r.highlight&&this.highlightedDraggable&&(l.globalAlpha*=.3),c=r.field,d=(u=r.yAxis||e.yAxis).top,p=u.bottom,g=n.dataSet.length-n.scroll-1,f={},y=n.tmpWidth/2,v=l.lineWidth/2,x=this.layout.candleWidth,L.w01(),b=e.left-.5*x+this.micropixels-1;for(var q=0;q<=s.length;q++)if("h","l","c",L.Q4q(9),b+=L.q4q(x,"2"),x=this.layout.candleWidth,L.Q4q(13),b+=L.q4q("2",2,x),S=s[q]){if(S.projection)break;if(S.candleWidth&&(b+=(S.candleWidth-x)/2,x=S.candleWidth),(C=a(this,S))&&(f[C]=1,l.strokeStyle=C,l.beginPath(),n.transformFunc&&u==n.panel.yAxis&&S.transform&&(S=S.transform),S&&c&&(S=S[c]),(S||0===S)&&(k=S.Close,w=void 0===S.Open?k:S.Open,D=void 0===S.High?Math.max(k,w):S.High,A=void 0===S.Low?Math.min(k,w):S.Low,k||0===k))){if(S.cache||(S.cache={}),T=S.cache,L.Q4q(0),(M=L.E4q(q,g))<e.cacheLeft||M>e.cacheRight||!T.top){if(P=this.pixelFromTransformedValue(D,e,u),F=this.pixelFromTransformedValue(A,e,u),T.open=u.semiLog?u.height*(1-(Math.log(Math.max(w,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-w)*u.multiplier,T.close=u.semiLog?u.height*(1-(Math.log(Math.max(k,0))/Math.LN10-u.logLow)/u.logShadow):(u.high-k)*u.multiplier,u.flipped?(T.open=u.bottom-T.open,T.close=u.bottom-T.close):(T.open+=u.top,T.close+=u.top),o[q]=T.close,L.Q4q(4),m=L.E4q(P,F),P<d){if(P+m<d){T.top=P,T.bottom=P;continue}L.P4q(4),m-=L.E4q(P,d),P=d}P+m>p&&(L.P4q(10),m-=L.E4q(m,P,p)),T.top=P,L.P4q(0),T.bottom=L.q4q(m,P)}_=Math.floor(b)+(!r.highlight&&.5),T.top<p&&T.bottom>d&&S.High!=S.Low&&(l.moveTo(_,T.top-v),l.lineTo(_,T.bottom+v)),"hlc"!=r.type&&T.open>d&&T.open<p&&(l.moveTo(_,T.open),L.Q4q(4),l.lineTo(L.q4q(y,_),T.open)),T.close>d&&T.close<p&&(l.moveTo(_,T.close),L.P4q(0),l.lineTo(L.q4q(y,_),T.close)),l.stroke()}}for(var I in l.lineWidth=1,E={colors:[],cache:o},f)i.equals(I,this.containerColor)||E.colors.push(I);return E},i.ChartEngine.prototype.drawWaveChart=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A=R;function T(t){return A.e01(),p.pixelFromTransformedValue(t,e,o)}r=(a=e.chart).dataSegment,n=new Array(r.length),s=a.context,t||(t={}),o=t.yAxis||e.yAxis,this.startClip(e.name),s.beginPath(),l=!1,h=!1,c=e.yAxis.top,u=e.yAxis.bottom,d=e.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),p=this,A.w01();for(var M=0;M<=r.length;M++)if(d+=this.layout.candleWidth,m=r[M]){if(m.projection)break;if(a.transformFunc&&o==a.panel.yAxis&&m.transform&&(m=m.transform),m&&t.field&&(m=m[t.field]),(m||0===m)&&(g=m.Close,f=void 0===m.Open?g:m.Open,y=void 0===m.High?Math.max(g,f):m.High,v=void 0===m.Low?Math.min(g,f):m.Low,g||0===g)){if(x=d-3*this.layout.candleWidth/8,(b=T(f))<c){if(b=c,h){s.moveTo(x,b);continue}h=!0}else if(b>u){if(b=u,h){s.moveTo(x,b);continue}h=!0}else h=!1;l?s.lineTo(x,b):(l=!0,(S=a.dataSet.length-a.scroll-1)<0?s.moveTo(x,b):S>=0&&((C=a.dataSet[S]).transform&&(C=C.transform),k=T(k=C.Close),k=Math.min(Math.max(k,c),u),s.moveTo(e.left+(M-1)*this.layout.candleWidth+this.micropixels,k),s.lineTo(x,b)),s.moveTo(x,b)),x+=this.layout.candleWidth/4,f<g?((b=T(v))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b),x+=this.layout.candleWidth/4,(b=T(y))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)):((b=T(y))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b),x+=this.layout.candleWidth/4,(b=T(v))<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)),x+=this.layout.candleWidth/4,b=T(g),n[M]=b,b<c&&(b=c),b>u&&(b=u),s.lineTo(x,b)}}return(w=this.canvasStyle("stx_line_chart")).width&&parseInt(w.width,10)<=25?s.lineWidth=Math.max(1,i.stripPX(w.width)):(A.Q4q(8),s.lineWidth=A.q4q("1",1)),t.highlight&&(s.lineWidth*=2),this.canvasColor("stx_line_chart"),t.color&&(s.strokeStyle=t.color),!t.highlight&&this.highlightedDraggable&&(s.globalAlpha*=.3),s.stroke(),s.closePath(),D={colors:[s.strokeStyle],cache:n},this.endClip(),A.Q4q(1),s.lineWidth=A.q4q("1",1),D},i.ChartEngine.prototype.drawHistogram=function(e,t){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I=R;if(t&&t.length&&((a=e.panel)||(a="chart"),r=this.panels[a])){n=e.yAxis?e.yAxis:r.yAxis,s=e.type,800662221,1037817271,o=2;for(var N=1;800662221!==I.d6D(N.toString(),N.toString().length,90101);N++)l=this.chart.dataSegment,h=!0,c=9,u=0,o+=2;for(1037817271!==I.f6D(o.toString(),o.toString().length,15270)&&(l=this.chart.dataSegment,h=!1,I.Q4q(7),c=I.E4q(651122400,"1"),u=1),p=0;p<t.length;p++)h|=t[p].border_color_up&&!i.isTransparent(t[p].border_color_up),h|=t[p].border_color_down&&!i.isTransparent(t[p].border_color_down),c=t[p].opacity_up,u=t[p].opacity_down,!e.highlight&&this.highlightedDraggable&&(c*=.3,u*=.3);!1===e.borders&&(h=!1),e.name||(e.name="Data"),m=n.multiplier,e.heightPercentage||(e.heightPercentage=.7),e.widthFactor||(e.widthFactor=.8),g=0,f=0;for(var O=0;O<this.chart.maxTicks;O++)if(y=l[O])for(v=0,p=0;p<t.length;p++)((x=y[t[p].field])||0===x)&&("stac","ked",d=t[p].subField||this.chart.defaultPlotField||"Close","object"==H(x)&&x[d]&&(x=x[d]),"stacked"==s?v+=x:v=x,v>g&&(g=v),v<f&&(f=v));if(0!==g||0!==f){for(S=!1,e.bindToYAxis?(n.baseline&&(f=n.baseline.value,S=!0),b=Math.floor(this.pixelFromPrice(f,r,n))+(n.flipped?-.5:.5)):(n.flipped?(b=Math.floor(n.top)-.5,C=Math.floor(n.bottom)-.5):(b=Math.floor(n.bottom)+.5,C=Math.floor(n.top)+.5),m=Math.abs(b-C)*e.heightPercentage/(g-f)),this.startClip(a),k=this.layout.candleWidth<=1||!h?0:.5,w=this.chart.context,n.flipped&&(w.translate(0,2*n.top),I.P4q(4),w.scale(I.E4q(0,"1"),-1)),D=Math.max(0,(1-e.widthFactor)*this.layout.candleWidth/2),A=new Array(l.length),T=[],M=this,P=1,p=0;p<t.length;p++){if("C","l","os","e",F=t[p],P=this.layout.candleWidth*e.widthFactor,D&&this.layout.candleWidth-P<=2&&(h=!1),_=0,"clustered"==s&&(_=p,P/=t.length),d=F.subField||this.chart.defaultPlotField||"Close","function"==typeof F.color_function){L={};for(var j=0;j<l.length;j++)l[j]&&("st","r","ing","string"==H(E=F.color_function(l[j]))&&(E={fill_color:E,border_color:E}),E.hasOwnProperty("border_opacity")||(E.border_opacity=E.opacity),(q=E.fill_color+","+E.border_color)in L?L[q].positions.push(j):(E.positions=[j],L[q]=E));for(q in L)E=L[q],z(F.field,d,E.fill_color,E.opacity,null,null,_,P,E.positions),z(F.field,d,E.border_color,E.border_opacity,!0,null,_,P,E.positions)}else z(F.field,d,F.fill_color_up,c,null,!0,_,P),z(F.field,d,F.fill_color_down,u,null,null,_,P),this.layout.candleWidth>=2&&h&&(z(F.field,d,F.border_color_up,c,!0,!0,_,P),z(F.field,d,F.border_color_down,u,!0,null,_,P));"stacked"==s&&(T=i.shallowClone(A))}w.globalAlpha=1,this.endClip()}else this.displayErrorAsWatermark(a,this.translateIf(e.name+" Not Available"))}function z(e,t,i,a,n,o,h,c,u){var d,p,g,y,v,x,C,P,F,_,E,L,q;I.w01(),a||(a=1),w.globalAlpha=a,w.beginPath(),I.P4q(0),d=I.E4q(.5,b),p=Math.floor(M.pixelFromBar(0,r.chart)-M.layout.candleWidth/2);for(var N=0;N<l.length;N++)"clu","ste","re","d",g=T[N]||b,0===N&&(d=g),l[N]&&l[N][e]?("object"==H(v=(y=l[N])[e])&&v[t]&&(v=v[t]),I.P4q(14),x=I.E4q(m,f,v),isNaN(x)||(C=M.layout.candleWidth,y.candleWidth&&(C=y.candleWidth,0===N&&(p=Math.floor(M.pixelFromBar(0,r.chart)-y.candleWidth/2))),(P=Math.floor(g-x)+.5)>g&&!S&&(P=g),u&&-1==u.indexOf(N)||!u&&(o&&y.Close<y.iqPrevClose||!o&&y.Close>=y.iqPrevClose)?(d=P,p+=C):(F=C/M.layout.candleWidth,D?(I.P4q(15),_=Math.round(I.E4q(F,D,p,c,h)),I.P4q(0),E=I.q4q(n?0:k,_),L=_+Math.round(c*F)-(n?0:k)):(I.Q4q(15),_=I.E4q(F,D,p,c,h),E=Math.round(_)+(n?0:k),L=Math.round(_+c*F)-(n?0:k)),L-E<2&&(I.Q4q(0),L=I.E4q(1,E)),E%1==(q=n?0:.5)&&(E+=.5),L%1==q&&(I.P4q(1),L+=I.q4q("0.5",1)),w.moveTo(L,g),b!=g&&n&&!D&&T[N+1]&&w.moveTo(L,Math.max(P,Math.min(g,T[N+1]))),w.lineTo(L,P),w.lineTo(E,P),n&&h?(A[N]>P||0===N)&&w.lineTo(E,Math.min(g,A[N])):n&&!D&&"clustered"==s?N>0&&A[N-1]&&A[N-1]>P&&w.lineTo(E,Math.min(g,A[N-1])):n&&!D?(d>P||0===N)&&w.lineTo(E,Math.min(g,d)):w.lineTo(E,g),d=P,p+=C,("clustered"!=s||n)&&(A[N]=P)))):(d=g,p+=M.layout.candleWidth);n?(w.strokeStyle=i&&"auto"!=i?i:M.defaultColor,w.stroke()):("a","u","t","o",w.fillStyle=i&&"auto"!=i?i:M.defaultColor,w.fill()),w.closePath()}},i.ChartEngine.prototype.scatter=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=R;a=(i=e.chart).dataSegment,r=new Array(a.length),n=this.chart.context,this.canvasColor("stx_scatter_chart"),t||(t={}),s=t.field||i.defaultPlotField,o=t.yAxis||e.yAxis,l=t.subField||i.defaultPlotField||"Close",this.startClip(e.name),n.beginPath(),n.lineWidth=t.lineWidth||4,t.highlight&&(n.lineWidth*=2),!t.highlight&&this.highlightedDraggable&&(n.globalAlpha*=.3),t.color&&(n.strokeStyle=t.color),h=o.top,c=o.bottom,u=this.layout.candleWidth,d=e.left-.5*u+this.micropixels-1;for(var S=0;S<=a.length;S++)if(b.Q4q(5),d+=b.q4q(u,2),u=this.layout.candleWidth,b.Q4q(5),d+=b.E4q(u,2),(p=a[S])&&(p.candleWidth&&(d+=(p.candleWidth-u)/2,u=p.candleWidth),!p.projection)){i.transformFunc&&o==i.panel.yAxis&&p.transform&&(p=p.transform),(m=p[s])&&void 0!==m[l]&&(m=m[l]),m instanceof Array||(m=[m]),"Scatter"in p&&(m=p.Scatter);for(var C=0;C<m.length;C++)(m[C]||0===m[C])&&(g=m[C],f=0,m[C]instanceof Array&&(g=m[C][0],f=m[C][2]),y=o.semiLog?o.height*(1-(Math.log(Math.max(g,0))/Math.LN10-o.logLow)/o.logShadow):(o.high-g)*o.multiplier,o.flipped?(b.P4q(4),y=b.q4q(y,c)):y+=h,y<h||y>c||(v=2,f&&(b.P4q(1),v=b.E4q(u,f)),b.Q4q(4),n.moveTo(b.E4q(v,d),y),b.Q4q(0),n.lineTo(b.q4q(v,d),y),r[S]=y))}return n.stroke(),n.closePath(),x={colors:[n.strokeStyle],cache:r},this.endClip(),n.lineWidth=1,x}},l=function(e){var t,i;t="undefined"!==("undefined"==typeof _CIQ?"undefined":H(_CIQ))?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine.drawingTools={},t.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},annotation:{font:{style:null,size:null,weight:null,family:null}}},t.ChartEngine.registerDrawingTool=function(e,i){R.e01(),t.ChartEngine.drawingTools[e]=i},t.ChartEngine.prototype.setDrawingContainer=function(e){this.drawingContainer=e},t.ChartEngine.prototype.exportDrawings=function(){var e;R.w01(),e=[];for(var t=0;t<this.drawingObjects.length;t++)e.push(this.drawingObjects[t].serialize());return e},t.ChartEngine.prototype.abortDrawings=function(e){var t;R.w01(),!1!==e&&(e=!0);for(var i=this.drawingObjects.length-1;i>=0;i--)(t=this.drawingObjects[i]).abort(!0),!e&&t.permanent||this.drawingObjects.splice(i,1)},t.ChartEngine.prototype.importDrawings=function(e){var i,a,r;if(t.Drawing)for(var n=0;n<e.length;n++)"fibonacci"==(i=e[n]).name&&(i.name="retracement"),(a=t.ChartEngine.drawingTools[i.name])||t.Drawing[i.name]&&(a=t.Drawing[i.name],t.ChartEngine.registerDrawingTool(i.name,a)),a&&((r=new a).reconstruct(this,i),this.drawingObjects.push(r))},t.ChartEngine.prototype.clearDrawings=function(e,i){var a,r;!1!==i&&(i=!0),a=this.exportDrawings(),this.abortDrawings(i),e?this.undoStamps=[]:this.undoStamp(a,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),this.draw(),(r=this.controls.mSticky)&&(r.style.display="none",r.children[0].innerHTML="")},t.ChartEngine.prototype.createDrawing=function(e,i){var a,r;if(t.Drawing){for(var n in(a=new t.Drawing[e]).reconstruct(this,i),(r=new t.Drawing[e]).stx=this,R.e01(),r.copyConfig(),r)a[n]=a[n]||r[n];return this.drawingObjects.push(a),this.draw(),a}},t.ChartEngine.prototype.removeDrawing=function(e){for(var t=0;t<this.drawingObjects.length;t++)if(this.drawingObjects[t]==e)return this.drawingObjects.splice(t,1),this.changeOccurred("vector"),void this.draw();R.w01()},t.ChartEngine.prototype.undo=function(){this.runPrepend("undo",arguments)||(R.w01(),this.activeDrawing&&(this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),t.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair"),t.ChartEngine.drawingLine=!1),this.runAppend("undo",arguments))},t.ChartEngine.prototype.undoStamp=function(e,t){R.e01(),this.undoStamps.push(e),this.dispatch("undoStamp",{before:e,after:t,stx:this})},t.ChartEngine.prototype.undoLast=function(){R.w01(),this.activeDrawing?this.undo():this.undoStamps.length&&(this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred("vector"),this.draw())},t.ChartEngine.prototype.addDrawing=function(e){var t;t=this.exportDrawings(),this.drawingObjects.push(e),this.undoStamp(t,this.exportDrawings())},t.ChartEngine.prototype.repositionDrawing=function(e,i){var a,r,n;a=this.panels[e.panelName],r=this.adjustIfNecessary(a,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),a)),n=this.chart.tempCanvas,t.clearCanvas(n,this),i?(this.drawingSnapshot=this.exportDrawings(),e.render(n.context)):(e.reposition(n.context,e.repositioner,this.crosshairTick,r),this.drawingSnapshot&&this.undoStamp(t.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),e.measure&&e.measure()},t.ChartEngine.prototype.activateRepositioning=function(e){R.w01(),this.repositioningDrawing=e,e&&(this.draw(),this.repositionDrawing(e,!0)),this.chart.tempCanvas.style.display=e?"block":"none"},t.ChartEngine.prototype.activateDrawing=function(e,i){var a,r,n,s=R;function o(e){var t;e.layout.studies&&(t=e.layout.studies[i.name])&&!t.overlay&&delete e.overlays[t.name]}if("n","o","n","e",i||(i=this.currentPanel),!e)return"n","o","ne",this.activeDrawing=null,this.chart.tempCanvas.style.display="none",o(this),!1;if(!(a=t.ChartEngine.drawingTools[e])&&t.Drawing[e]){a=t.Drawing[e],1416598253,s.Q4q(16),r=s.q4q("1360732325",2147483647),n=2;for(var l=1;1416598253!==s.f6D(l.toString(),l.toString().length,90376);l++)t.ChartEngine.registerDrawingTool(e,a),s.P4q(11),n+=s.E4q(44766016,"2");s.d6D(n.toString(),n.toString().length,93724)!==r&&t.ChartEngine.registerDrawingTool(e,a)}return a&&(this.activeDrawing=new a,this.activeDrawing.construct(this,i),!this.charts[i.name]&&this.activeDrawing.chartsOnly)?(this.activeDrawing=null,o(this),!1):(this.chart.tempCanvas.style.display="block",this.controls.drawOk&&(this.controls.drawOk.style.display="none"),o(this),!0)},t.ChartEngine.prototype.drawingClick=function(e,i,a){var r,n,s;if(t.Drawing&&e&&""===this.openDialog&&(this.activeDrawing||this.activateDrawing(this.currentVectorParameters.vectorType,e)))return R.w01(),!!this.activeDrawing&&(this.userPointerDown&&!this.activeDrawing.dragToDraw?void(t.ChartEngine.drawingLine||this.activateDrawing(null)):(r=this.tickFromPixel(i,e.chart),n=this.panels[this.activeDrawing.panelName],s=this.adjustIfNecessary(n,r,this.valueFromPixel(a,n)),this.magnetizedPrice&&(s=this.adjustIfNecessary(n,r,this.magnetizedPrice)),this.activeDrawing.click(this.chart.tempCanvas.context,r,s)?this.activeDrawing&&("stx_crosshair_","drawing","v","ec","tor",t.ChartEngine.drawingLine=!1,t.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair")):("stx_crosshai","r","st","x_c","rosshair",this.changeOccurred("drawing"),t.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair","stx_crosshair_drawing"),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")),!0))},t.ChartEngine.prototype.rightClickDrawing=function(e,t){var i,a,r,n,s;if(R.e01(),!this.runPrepend("rightClickDrawing",arguments)&&!e.permanent){if(this.callbackListeners.drawingEdit.length){i="d",i+="rawingEdit",a=87067497,r=706794636,n=2;for(var o=1;R.d6D(o.toString(),o.toString().length,1895)!==a;o++)this.dispatch("",{stx:this,drawing:e,forceEdit:t}),n+=2;R.f6D(n.toString(),n.toString().length,30329)!==r&&this.dispatch("",{stx:this,drawing:e,forceEdit:t}),this.dispatch(i,{stx:this,drawing:e,forceEdit:t})}else e.abort()||(s=this.exportDrawings(),this.removeDrawing(e),this.undoStamp(s,this.exportDrawings())),this.changeOccurred("vector");this.runAppend("rightClickDrawing",arguments)}},t.ChartEngine.prototype.magnetize=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A;if(e="m",e+="agnetize",i="st",i+="x-draggable",a="C",a+="los",a+="e",r="H",r+="i",r+="g",r+="h",n="Ope",n+="n",s="c",s+="allout",o="a",o+="nno",o+="tatio",o+="n",this.magnetizedPrice=null,this.preferences.magnet&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(l=this.currentVectorParameters.vectorType)&&"projection"!=l&&"freeform"!=l&&(l!=o&&l!=s||!t.ChartEngine.drawingLine)&&(c=(h=this.currentPanel).chart,!((u=this.crosshairTick)>c.dataSet.length)&&(d=c.dataSet[u]))){(p=c.transformFunc&&h.yAxis===c.yAxis)&&d.transform&&(d=d.transform),g=this.getRenderedItems(),f=[n,r,"Low",a],this.magneticHold&&this.activeDrawing&&this.activeDrawing.penDown?g=-1!=f.indexOf(this.magneticHold)&&-1!=g.indexOf("High")?f:[this.magneticHold]:this.magneticHold=null,y=1e9,v=parseFloat(this.preferences.magnet);for(var T=0;T<g.length;T++)if(x=d[g[T]],b=this.getYAxisByField(h,g[T]),(S=t.existsInObjectChain(d,g[T]))&&(x=S.obj[S.member]),(x||0===x)&&(C=this.pixelFromTransformedValue(x,h,b),Math.abs(this.cy-C)<y)){if(y=Math.abs(this.cy-C),v&&v<=y)continue;this.magnetizedPrice=p?this.valueFromPixel(C,h):x,m=C,this.magneticHold=g[T]}k=this.pixelFromTick(u,c),w=m,t.clearCanvas(c.tempCanvas,this),(D=c.tempCanvas.context).beginPath(),D.lineWidth=1,A=Math.max(this.layout.candleWidth,12)/3,D.arc(k,w,Math.min(A,8),0,2*Math.PI,!1),D.fillStyle="#398dff",D.strokeStyle="#398dff",D.fill(),D.stroke(),D.closePath(),c.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove(i),this.activeDrawing&&this.activeDrawing.move(D,this.crosshairTick,this.magnetizedPrice),this.runAppend(e,arguments)}},t.ChartEngine.prototype.changeVectorType=function(e){this.currentVectorParameters.vectorType=e,t.Drawing&&t.Drawing.initializeSettings(this,e),t.ChartEngine.drawingLine&&this.undo(),R.w01(),this.insideChart&&this.doDisplayCrosshairs()},t.ChartEngine.prototype.changeVectorParameter=function(e,t){var i;return"axisLabel"==e?t="true"===t.toString()||Number(t):"lineWidth"==e?t=Number(t):"fontSize"==e&&(t=parseInt(t,10)+"px"),(void 0!==(i=this.currentVectorParameters)[e]||"font"==e.substr(0,4)&&("family"==(e=e.substr(4).toLowerCase())&&"default"==t.toLowerCase()&&(t=null),void 0!==(i=i.annotation.font)[e]))&&(i[e]=t,!0)},t.ChartEngine.prototype.drawVectors=function(){var e,t,i,a,r,n;if(e="dr",e+="awVectors",!this.vectorsShowing&&(R.w01(),!this.runPrepend("drawVectors",arguments))){if(this.vectorsShowing=!0,!this.chart.hideDrawings&&!this.highlightedDraggable){for(t={},a=0;a<this.drawingObjects.length;a++)(r=this.drawingObjects[a]).hidden||this.repositioningDrawing!==r&&(i=r.panelName,this.panels[r.panelName]&&!this.panels[r.panelName].hidden&&(t[i]||(t[i]=[]),t[i].push(r)));for(i in t){for(this.startClip(i),n=t[i],a=0;a<n.length;a++)n[a].render(this.chart.context);this.endClip()}}this.runAppend(e,arguments)}},t.ChartEngine.prototype.adjustDrawings=function(){for(var e,t=0;t<this.drawingObjects.length;t++)e=this.drawingObjects[t],this.panels[e.panelName]&&e.adjust()},t.Drawing=t.Drawing||function(){this.chartsOnly=!1,this.penDown=!1},t.Drawing.getDrawingParameters=function(e,i){var a,r,n,s;R.e01();try{a=new t.Drawing[i]}catch(e){}if(!a)return null;a.stx=e,a.copyConfig(!0),r={},n=a.configs;for(var o=0;o<n.length;o++)r[n[o]]=a[n[o]];return(s=e.canvasStyle("stx_annotation"))&&r.font&&(r.font.size=s.fontSize,r.font.family=s.fontFamily,r.font.style=s.fontStyle,r.font.weight=s.fontWeight),r},t.Drawing.saveConfig=function(e,i){var a,r;i&&((a=e.preferences).drawings||(a.drawings={}),a.drawings[i]={},(r=new t.Drawing[i]).stx=e,t.Drawing.copyConfig(r),r.configs.forEach((function(e){R.w01(),a.drawings[i][e]=r[e]})),e.changeOccurred("preferences"))},t.Drawing.restoreDefaultConfig=function(e,i,a){a?e.preferences.drawings=null:e.preferences.drawings[i]=null,e.changeOccurred("preferences"),e.currentVectorParameters=t.clone(t.ChartEngine.currentVectorParameters),e.currentVectorParameters.vectorType=i},t.Drawing.initializeSettings=function(e,i){var a,r;(a=t.Drawing[i])&&(r=new a).initializeSettings&&r.initializeSettings(e)},t.Drawing.updateSource=function(e,t,i,a){var r,n;if("ve","cto","r",t){for(var s in r=!1,e.drawingObjects)(n=e.drawingObjects[s]).field&&(i?n.field==t?(n.field=i,r=!0):n.field.indexOf(t)>-1&&-1==n.field.indexOf(t+"-")&&(n.field=n.field.replace(t,i),r=!0):("-","-",">",n.field.split("--\x3e")[0]!=t&&n.panelName!=t||(n.panelName=a,r=!0)));r&&e.changeOccurred("vector")}},t.Drawing.prototype.copyConfig=function(e){R.e01(),t.Drawing.copyConfig(this,e)},t.Drawing.copyConfig=function(e,i){var a,r,n,s,o;for(R.e01(),a=e.stx.currentVectorParameters,r=e.configs,n=0;n<r.length;n++)"f","o","nt","co","lo","r","color"==(s=r[n])?e.color=a.currentColor:"parameters"==s?e.parameters=t.clone(a.fibonacci):"font"==s?e.font=t.clone(a.annotation.font):e[s]=a[s];if(i&&(o=e.stx.preferences)&&o.drawings)for(t.extend(e,o.drawings[a.vectorType]),n=0;n<r.length;n++)"color"==(s=r[n])?a.currentColor=e.color:"parameters"==s?a.fibonacci=t.clone(e.parameters):"font"==s?a.annotation.font=t.clone(e.font):a[s]=e[s]},t.Drawing.prototype.dragToDraw=!1,t.Drawing.prototype.permanent=!1,t.Drawing.prototype.chartsOnly=!1,t.Drawing.prototype.abort=function(e){},t.Drawing.prototype.measure=function(){},t.Drawing.prototype.construct=function(e,t){this.stx=e,this.panelName=t.name},t.Drawing.prototype.render=function(e){R.w01(),console.warn("must implement render function!")},t.Drawing.prototype.click=function(e,t,i){var a;R.e01(),a=2;for(var r=1;915410310!==R.f6D(r.toString(),r.toString().length,44598);r++)console.warn("must implement click function!"),a+=2;-2112826337!==R.d6D(a.toString(),a.toString().length,24697)&&console.warn("")},t.Drawing.prototype.move=function(e,t,i){console.warn("must implement move function!")},t.Drawing.prototype.reposition=function(e,t,i,a){},t.Drawing.prototype.intersected=function(e,t,i){R.e01(),console.warn("must implement intersected function!")},t.Drawing.prototype.reconstruct=function(e,t){R.w01(),console.warn("must implement reconstruct function!")},t.Drawing.prototype.serialize=function(){var e,t,i=R;i.P4q(17),e=i.q4q(0,"1851260444"),t=2;for(var a=1;187422880!==i.d6D(a.toString(),a.toString().length,11416);a++)console.warn(""),t+=2;i.d6D(t.toString(),t.toString().length,44645)!==e&&console.warn("must implement serialize function!")},t.Drawing.prototype.adjust=function(){R.w01(),console.warn("must implement adjust function!")},t.Drawing.prototype.highlight=function(e){return(e&&!this.highlighted||!e&&this.highlighted)&&(this.highlighted=e),R.e01(),this.highlighted},t.Drawing.prototype.littleCircleRadius=function(){return R.e01(),6,6},t.Drawing.prototype.littleCircle=function(e,i,a,r){var n,s;this.permanent||(n=this.stx.defaultColor,s=t.chooseForegroundColor(n),e.beginPath(),e.lineWidth=1,e.arc(i,a,this.littleCircleRadius(),0,2*Math.PI,!1),e.fillStyle=r?n:s,e.strokeStyle=n,R.w01(),e.setLineDash([]),e.fill(),e.stroke(),e.closePath())},t.Drawing.prototype.rotator=function(e,t,i,a){var r,n,s,o=R;this.permanent||(r=this.littleCircleRadius(),n=this.stx.defaultColor,e.beginPath(),o.P4q(16),e.lineWidth=o.E4q("2",2147483647),a||(e.globalAlpha=.5),o.Q4q(0),s=o.E4q(r,4),e.arc(t,i,s,0,3*Math.PI/2,!1),o.P4q(18),e.moveTo(o.E4q(s,t,2),o.E4q("2",1255279936,i,o.P4q(19))),o.Q4q(0),e.lineTo(o.q4q(s,t),i),o.Q4q(20),e.lineTo(o.q4q(2,s,t),o.E4q(2,i,o.P4q(0))),o.P4q(21),e.moveTo(o.q4q("2",t,2147483647),o.q4q(2,i,s,o.P4q(10))),o.Q4q(4),e.lineTo(t,o.E4q(s,i)),o.P4q(4),e.lineTo(o.q4q(2,t),o.E4q("2",i,s,o.Q4q(22))),e.strokeStyle=n,e.stroke(),e.closePath(),e.globalAlpha=1)},t.Drawing.prototype.mover=function(e,t,i,a){var r,n,s,o,l=R;if(l.e01(),!this.permanent){r=this.littleCircleRadius(),n=this.stx.defaultColor,l.P4q(1),s=l.q4q("5",1),l.P4q(0),o=l.q4q(1,r),e.save(),e.lineWidth=2,e.strokeStyle=n,e.translate(t,i),a||(e.globalAlpha=.5);for(var h=0;h<4;h++)e.rotate(Math.PI/2),e.beginPath(),e.moveTo(0,o),l.P4q(0),e.lineTo(0,l.E4q(s,o)),l.Q4q(1),e.moveTo(-l.q4q("2",1),l.q4q(2,s,"2",o,l.Q4q(23))),l.P4q(0),e.lineTo(0,l.q4q(s,o)),l.Q4q(10),e.lineTo(2,l.q4q(s,o,2)),e.closePath(),e.stroke();e.globalAlpha=1,e.restore()}},t.Drawing.prototype.resizer=function(e,t,i,a){var r,n,s,o,l=R;if(!this.permanent){r=this.littleCircleRadius(),n=this.stx.defaultColor,s=5*Math.sqrt(2),l.P4q(0),o=l.q4q(1,r),e.save(),l.Q4q(17),e.lineWidth=l.q4q(0,"2"),e.strokeStyle=n,e.translate(t,i),e.rotate(-t*i/Math.abs(t*i)*Math.PI/4),a||(e.globalAlpha=.5);for(var h=0;h<2;h++)e.rotate(Math.PI),e.beginPath(),e.moveTo(0,o),l.P4q(0),e.lineTo(0,l.E4q(s,o)),l.P4q(10),e.moveTo(-2,l.E4q(s,o,2)),l.Q4q(0),e.lineTo(0,l.E4q(s,o)),l.P4q(10),e.lineTo(2,l.E4q(s,o,2)),e.closePath(),e.stroke();e.globalAlpha=1,e.restore()}},t.Drawing.prototype.pointIntersection=function(e,t,i,a){if(!this.stx.panels[this.panelName])return!1;if(a){if(e>=i.cx0&&e<=i.cx1&&t>=i.cy0&&t<=i.cy1)return!0}else if(e>=i.x0&&e<=i.x1&&t>=Math.min(i.y0,i.y1)&&t<=Math.max(i.y0,i.y1))return!0;return!1},t.Drawing.prototype.setPoint=function(e,i,a,r){var n,s,o,l,h,c=R;n=null,s=null,c.e01(),"number"==typeof i?n=i:i.length>=8?s=i:n=Number(i),(a||0===a)&&(c.P4q(0),this[c.q4q(e,"v")]=a),null!==n?(o=this.stx.dateFromTick(n,r,!0),c.P4q(0),this[c.q4q(e,"tzo")]=o.getTimezoneOffset(),c.Q4q(0),this[c.q4q(e,"d")]=t.yyyymmddhhmmssmmm(o),c.P4q(0),this[c.E4q(e,"p")]=[n,a]):null!==s&&("t","z","o",o=t.strToDateTime(s),this["tzo"+e]||0===this["tzo"+e]||(c.Q4q(0),this[c.q4q(e,"tzo")]=o.getTimezoneOffset()),c.P4q(0),this[c.q4q(e,"d")]=s,l=this["tzo"+e]-o.getTimezoneOffset(),o.setMinutes(o.getMinutes()+l),h=!1,"freeform"==this.name||t.ChartEngine.isDailyInterval(this.stx.layout.interval)||o.getHours()||o.getMinutes()||o.getSeconds()||o.getMilliseconds()||(h=!0),c.Q4q(0),this[c.q4q(e,"p")]=[this.stx.tickFromDate(t.yyyymmddhhmmssmmm(o),r,null,h),a])},t.Drawing.prototype.getLineColor=function(e){var i,a,r,n,s,o,l,h,c;if("a","u","to",e||(e=this.color),i=this.stx,a=e,this.highlighted)a=i.getCanvasColor("stx_highlight_vector");else if(t.isTransparent(a))a=i.defaultColor;else if("auto"==a&&(a=i.defaultColor,this.field)){for(r in i.layout.studies)if(s=(n=i.layout.studies[r]).outputs[n.outputMap[this.field]]){a=s.color||s;break}for(r in i.chart.seriesRenderers){l=i.chart.seriesRenderers[r];for(var u=0;u<l.seriesParams.length;u++){if("-","-",">","C","l","o","se",(c=(h=l.seriesParams[u]).field)||l.highLowBars||(c=this.defaultPlotField||"Close"),h.symbol&&h.subField&&(c+="--\x3e"+h.subField),this.field==c){a=h.color;break}h.field&&h.field==this.field.split("--\x3e")[0]&&(o=h.color)}}o&&(a=o)}return"auto"==a&&(a=i.defaultColor),a},t.Drawing.BaseTwoPoint=function(){this.p0=null,this.p1=null,R.w01(),this.color=""},t.inheritsFrom(t.Drawing.BaseTwoPoint,t.Drawing),t.Drawing.BaseTwoPoint.prototype.configs=[],t.Drawing.BaseTwoPoint.prototype.lineIntersection=function(e,i,a,r,n,s,o){var l,h,c;return n||(n=this.p0),s||(s=this.p1),l=this.stx,!(!n||!s)&&(void 0!==(h=t.convertBoxToPixels(l,this.panelName,a)).x0&&(c={x0:n[0],x1:s[0],y0:n[1],y1:s[1]},R.w01(),o||(c=t.convertBoxToPixels(l,this.panelName,c)),t.boxIntersects(h.x0,h.y0,h.x1,h.y1,c.x0,c.y0,c.x1,c.y1,r)))},t.Drawing.BaseTwoPoint.prototype.boxIntersection=function(e,t,i){return!(!this.p0||!this.p1)&&(!(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))&&!(i.y1>Math.max(this.p0[1],this.p1[1])||i.y0<Math.min(this.p0[1],this.p1[1])))},t.Drawing.BaseTwoPoint.prototype.accidentalClick=function(e,t){var i,a,r,n,s,o,l,h=R;if(i=this.stx.panels[this.panelName],a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(e,i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,e,t),h.Q4q(4),h.w01(),o=Math.abs(h.E4q(a,r)),h.Q4q(4),l=Math.abs(h.q4q(n,s)),h.Q4q(24),Math.sqrt(h.E4q(o,l,o,l))<10)return this.penDown=!1,this.dragToDraw&&this.stx.undo(),!0},t.Drawing.BaseTwoPoint.prototype.click=function(e,t,i){var a;return this.copyConfig(),a=this.stx.panels[this.panelName],this.penDown?(R.e01(),this.accidentalClick(t,i)?this.dragToDraw:(this.setPoint(1,t,i,a.chart),this.penDown=!1,!0)):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1)},t.Drawing.BaseTwoPoint.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),R.P4q(17),this.setPoint(R.E4q(0,"1"),this.d1,this.v1,e.chart))},t.Drawing.BaseTwoPoint.prototype.move=function(e,t,i){this.penDown&&(this.copyConfig(),this.p1=[t,i],this.render(e))},t.Drawing.BaseTwoPoint.prototype.measure=function(){var e,i,a;R.w01(),this.p0&&this.p1&&(this.stx.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0,this.name),(i=(e=this.stx.controls.mSticky)&&e.querySelector(".mStickyInterior"))&&("<","b","r>",(a=[]).push(t.capitalize(this.name)),this.getYValue&&a.push(this.field||this.stx.defaultPlotField||"Close"),a.push(i.innerHTML),i.innerHTML=a.join("<br>")))},t.Drawing.BaseTwoPoint.prototype.reposition=function(e,t,i,a){var r,n,s,o,l,h=R;h.Q4q(7),r=-h.E4q(1309984256,"355745841"),h.Q4q(1),n=h.q4q("2",1);for(var c=1;1779212203!==h.f6D(c.toString(),c.toString().length,90724);c++){if(+t)return;s=this.stx.panels[this.panelName],o=t.tick*i,l=t.value/a,n+=2}if(h.d6D(n.toString(),n.toString().length,1699)!==r){if(!t)return;s=this.stx.panels[this.panelName],o=t.tick-i,l=t.value-a}"move"==t.action?(this.setPoint(0,t.p0[0]-o,t.p0[1]-l,s.chart),this.setPoint(1,t.p1[0]-o,t.p1[1]-l,s.chart),this.render(e)):"drag"==t.action&&(this[t.point]=[i,a],this.setPoint(0,this.p0[0],this.p0[1],s.chart),this.setPoint(1,this.p1[0],this.p1[1],s.chart),this.render(e))},t.Drawing.BaseTwoPoint.prototype.drawDropZone=function(e,t,i,a,r){var n,s,o,l,h;(n=this.stx.panels[this.panelName])&&(s=n.left,o=n.width,(a||0===a)&&(s=this.stx.pixelFromTick(a,n.chart)),(r||0===r)&&(o=this.stx.pixelFromTick(r,n.chart)),l=this.stx.pixelFromPrice(t,n),h=this.stx.pixelFromPrice(i,n),e.fillStyle="#008000",e.globalAlpha=.2,R.Q4q(4),e.fillRect(s,l,R.E4q(s,o),R.E4q(l,h)),e.globalAlpha=1)},t.Drawing.annotation=function(){this.name="annotation",this.arr=[],this.w=0,this.h=0,R.Q4q(17),this.padding=R.q4q(0,"4"),this.text="",this.ta=null,this.fontSize=0,this.font={}},t.inheritsFrom(t.Drawing.annotation,t.Drawing.BaseTwoPoint),t.Drawing.annotation.prototype.getFontString=function(){var e,t;for(var i in this.fontDef={style:null,weight:null,size:"12px",family:null},(e=this.stx.canvasStyle("stx_annotation"))&&(e.fontStyle&&(this.fontDef.style=e.fontStyle),e.fontWeight&&(this.fontDef.weight=e.fontWeight),e.fontSize&&(this.fontDef.size=e.fontSize),e.fontFamily&&(this.fontDef.family=e.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",t=!0,this.fontDef)this.fontDef[i]&&(t?t=!1:this.fontString+=" ",this.fontString+=this.fontDef[i])},t.Drawing.annotation.prototype.configs=["color","font"],t.Drawing.annotation.prototype.measure=function(){},t.Drawing.annotation.prototype.render=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p,m=R;if("mid","dle",!this.ta&&(t=this.stx.panels[this.panelName])){if(i=this.stx.pixelFromTick(this.p0[0],t.chart),a=this.stx.pixelFromValueAdjusted(t,this.p0[0],this.p0[1]),e.font=this.fontString,e.textBaseline="middle",r=i,n=a,s=this.w,o=this.h,l=this.getLineColor(),this.stem&&(this.stem.d?(h=this.stx.pixelFromTick(this.stem.t),u=this.stx.pixelFromValueAdjusted(t,this.stem.t,this.stem.v),m.P4q(25),c=m.q4q(2,s,r),m.Q4q(25),d=m.E4q(2,o,n)):this.stem.x&&(h=r,u=n,r+=this.stem.x,n+=this.stem.y,m.Q4q(25),c=m.q4q(2,s,r),m.Q4q(25),d=m.E4q(2,o,n)),e.beginPath(),this.borderColor?e.strokeStyle=this.borderColor:e.strokeStyle=l,e.moveTo(h,u),e.lineTo(c,d),e.stroke()),p=e.lineWidth,this.highlighted?(this.stx.canvasColor("stx_annotation_highlight_bg",e),m.Q4q(4),e.fillRect(m.q4q(p,r),m.E4q(n,2,o,p,m.Q4q(26)),m.q4q(p,"2",s,m.P4q(27)),m.E4q(p,o,2,m.P4q(28)))):this.fillColor?(e.fillStyle=this.fillColor,m.P4q(29),e.fillRect(r,m.E4q(n,"2",o),s,o)):this.stem&&(e.fillStyle=this.stx.containerColor,m.P4q(30),e.fillRect(r,m.q4q(2,n,o),s,o)),this.borderColor&&("stx_","highlight_vector",e.beginPath(),e.strokeStyle=this.highlighted?this.stx.getCanvasColor("stx_highlight_vector"):this.borderColor,m.Q4q(4),e.rect(m.E4q(p,r),m.q4q(n,2,o,p,m.P4q(26)),m.q4q("2",s,p,1,m.Q4q(31)),m.q4q(p,o,2,m.P4q(28))),e.stroke()),this.highlighted?("stx","_annotation_highl","ig","ht",this.stx.canvasColor("stx_annotation_highlight",e)):e.fillStyle=l,n+=this.padding/2,!this.ta)for(var g=0;g<this.arr.length;g++)e.fillText(this.arr[g],r+this.padding,n-o/2+this.fontSize/2),n+=this.fontSize+2;e.textBaseline="alphabetic"}},t.Drawing.annotation.prototype.onChange=function(e){},t.Drawing.annotation.prototype.edit=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=R;if("call","out","p","x","anno","t","atio","n",(a=this.stx.panels[this.panelName])&&(r=this.stx.controls.annotationSave,n=this.stx.controls.annotationCancel,r&&n)){var x,b,S;if(s=this.stx,o=this.ta,s.editingAnnotation=!0,s.undisplayCrosshairs(),s.openDialog="annotation",o||("p","l","acehold","er","w","rap","TEXTAR","E","A",(o=this.ta=document.createElement("TEXTAREA")).className="stx_annotation",o.onkeyup=k(this),o.onmouseup=(x=s,function(e){v.w01(),x.manageTouchAndMouse&&t.ChartEngine.drawingLine&&x.mouseup(e)}),o.setAttribute("wrap","hard"),t.isIOS7or8&&o.setAttribute("placeholder","Enter Text"),s.chart.container.appendChild(o),o.style.position="absolute",o.style.width="100px",o.style.height="20px",o.value=this.text,t.touchDevice&&(o.ontouchstart=function(e){v.e01(),e.stopPropagation()})),l=this,o.oninput=function(e){"historyUndo"!=e.inputType&&"historyRedo"!=e.inputType&&l.onChange(e)},o.style.font=this.fontString,this.color)if("a","u","t","o","tran","sparent","transparent"==this.color||"auto"==this.color){v.Q4q(17),h=v.E4q(0,"562363759"),v.P4q(1),c=v.E4q("486049078",1),v.P4q(16),u=v.q4q("2",2147483647);for(var C=1;v.f6D(C.toString(),C.toString().length,43676)!==h;C++)d=getComputedStyle(o),u+=2;v.f6D(u.toString(),u.toString().length,93034)!==c&&(d=getComputedStyle(o)),(d=getComputedStyle(o))&&t.isTransparent(d.backgroundColor)?o.style.color=s.defaultColor:o.style.color="#000"}else o.style.color=this.color;p=s.pixelFromTick(this.p0[0],a.chart),m=s.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),o.style.left=p+140<s.chart.canvasRight?p+"px":s.chart.canvasRight-200+"px",o.style.top=m+60<s.chart.canvasHeight?m-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px":m-60+"px","callout"==this.name&&(o.style.left=t.stripPX(o.style.left)-(isNaN(this.w)?this.defaultWidth:this.w/2)+"px"),t.safeClickTouch(r,(b=this,v.w01(),function(e){var i;""!==b.ta.value&&(b.text=b.ta.value,(i=b.stx).editingAnnotation=!1,b.adjust(),i.drawingSnapshot?i.undoStamp(t.shallowClone(i.drawingSnapshot),i.exportDrawings()):i.addDrawing(b),i.undo(),i.cancelTouchSingleClick=!0,i.changeOccurred("vector"))})),t.safeClickTouch(n,(S=this,function(e){var t;(t=S.stx).editingAnnotation=!1,t.undo(),t.cancelTouchSingleClick=!0})),k(this)(),r.style.display="inline-block",n.style.display="inline-block",i&&("blo","c","k",s.drawingSnapshot=s.exportDrawings(),this.hidden=!0,s.draw(),s.activeDrawing=this,t.ChartEngine.drawingLine=!0,e=s.chart.tempCanvas.context,s.chart.tempCanvas.style.display="block",this.w=o.clientWidth,this.h=o.clientHeight,t.clearCanvas(e.canvas,s),this.render(e),this.edit(e)),o.focus(),!t.isAndroid||t.is_chrome||t.isFF||(this.priorBottom=s.chart.container.style.bottom,400,(g=s.resolveY(m)+100)>t.pageHeight()-400&&("p","x",f=t.pageHeight()-g,v.Q4q(4),y=v.E4q(f,400),v.Q4q(0),s.chart.container.style.bottom=v.q4q("px",y)))}function k(e){return function(i){var a,s,o,l,h,c,u,d;if(i)switch(i.keyCode){case 27:return void e.stx.undo()}a=e.stx,s=e.ta,v.w01(),o=s.value.split("\n"),l=0,a.chart.context.font=e.fontString;for(var p=0;p<o.length;p++)(h=a.chart.context.measureText(o[p]).width)>l&&(l=h);c=(o.length+1)*(e.fontSize+3),l<50&&(l=50),v.P4q(18),s.style.width=v.q4q("px",l,30),v.P4q(0),s.style.height=v.q4q("px",c),u=parseInt(t.stripPX(s.style.top),10),d=t.stripPX(s.style.left),l=s.clientWidth,c=s.clientHeight,d+l+100<e.stx.chart.canvasWidth?("p","x",v.P4q(0),r.style.top=v.q4q("px",u),v.P4q(0),n.style.top=v.q4q("px",u),v.Q4q(32),r.style.left=v.q4q("px",10,l,d),v.P4q(32),n.style.left=v.q4q("px",60,l,d)):u+c+30<e.stx.chart.canvasHeight?(v.Q4q(32),r.style.top=v.q4q("px",10,c,u),v.P4q(32),n.style.top=v.E4q("px",10,c,u),v.P4q(0),r.style.left=v.q4q("px",d),v.P4q(18),n.style.left=v.E4q("px",d,50)):("p","x","p","x",v.Q4q(20),r.style.top=v.q4q(35,"px",u),v.P4q(20),n.style.top=v.E4q(35,"px",u),v.Q4q(0),r.style.left=v.E4q("px",d),v.P4q(33),n.style.left=v.E4q("50",792600416,"px",d))}}},t.Drawing.annotation.prototype.click=function(e,t,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return R.e01(),a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,t,i,a.chart),this.adjust(),this.edit(e),!1},t.Drawing.annotation.prototype.reposition=function(e,t,i,a){var r,n,s;t&&(r=this.stx.panels[this.panelName],R.w01(),n=t.tick-i,s=t.value-a,this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e))},t.Drawing.annotation.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c;return r=this.stx.panels[this.panelName],this.p0?(n=this.stx.pixelFromTick(this.p0[0],r.chart),s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1])-this.h/2,o=n+this.w,l=s+this.h,this.stem&&this.stem.x&&(n+=this.stem.x,o+=this.stem.x,s+=this.stem.y,l+=this.stem.y),h=this.stx.pixelFromTick(e,r.chart),c=this.stx.pixelFromValueAdjusted(r,e,i),h+a.r>=n&&h-a.r<=o&&c+a.r>=s&&c-a.r<=l&&(this.highlighted=!0,{p0:t.clone(this.p0),tick:e,value:i})):null},t.Drawing.annotation.prototype.abort=function(){var e,i;e=this.stx.controls.annotationSave,i=this.stx.controls.annotationCancel,e&&(e.style.display="none"),i&&(i.style.display="none"),this.ta&&this.stx.chart.container.removeChild(this.ta),this.ta=null,this.stx.openDialog="",this.stx.showCrosshairs(),this.stx.editingAnnotation=!1,t.clearCanvas(this.stx.chart.tempCanvas,this.stx),R.w01(),!t.isAndroid||t.is_chrome||t.isFF||(this.stx.chart.container.style.bottom=this.priorBottom),t.fixScreen()},t.Drawing.annotation.prototype.reconstruct=function(e,i){this.stx=e,this.color=i.col,this.panelName=i.pnl,this.d0=i.d0,this.tzo0=i.tzo0,this.v0=i.v0,this.text=e.escapeOnSerialize?decodeURIComponent(i.text):i.text,this.stem=i.stem,this.borderColor=i.bc,this.fillColor=i.bg,this.lineWidth=i.lw,this.pattern=i.ptrn,this.font=t.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},t.Drawing.annotation.prototype.serialize=function(){var e,i;return e={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},this.font&&("f","l","w","t",i=t.removeNullValues(t.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"})),t.isEmpty(i)||(e.fnt=i)),this.stem&&(e.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(e.bc=this.borderColor),this.fillColor&&(e.bg=this.fillColor),this.lineWidth&&(e.lw=this.lineWidth),this.pattern&&(e.ptrn=this.pattern),e},t.Drawing.annotation.prototype.renderText=function(){var e,i,a,r,n,s;if(R.e01(),this.getFontString(),e=this.stx.panels[this.panelName]){this.arr=this.text.split("\n"),i=0,this.stx.chart.context.font=this.fontString;for(var o=0;o<this.arr.length;o++)(a=this.stx.chart.context.measureText(this.arr[o]).width)>i&&(i=a);0===i&&(i=2*this.defaultWidth),this.fontSize=t.stripPX(this.fontDef.size),r=this.arr.length*(this.fontSize+2),t.touchDevice&&(r+=5),this.w=i+2*this.padding,this.h=r+2*this.padding,n=this.stx.pixelFromTick(this.p0[0],e.chart)+i,s=this.stx.pixelFromValueAdjusted(e,this.p0[0],this.p0[1])+r,this.p1=[this.stx.tickFromPixel(n,e.chart),this.stx.valueFromPixel(s,e)],this.stem&&this.stem.d&&(this.stem.t=this.stx.tickFromDate(this.stem.d,e.chart))}},t.Drawing.annotation.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.renderText())},t.Drawing.segment=function(){R.e01(),this.name="segment"},t.inheritsFrom(t.Drawing.segment,t.Drawing.BaseTwoPoint),t.Drawing.segment.prototype.render=function(e){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;(a=this.stx.panels[this.panelName])&&(R.e01(),r=this.stx.pixelFromTick(this.p0[0],a.chart),n=this.stx.pixelFromTick(this.p1[0],a.chart),s=this.stx.pixelFromValueAdjusted(a,this.p0[0],this.p0[1]),o=this.stx.pixelFromValueAdjusted(a,this.p1[0],this.p1[1]),l=this.lineWidth,h=this.getLineColor(),"none"==(c={pattern:this.pattern,lineWidth:l}).pattern&&(c.pattern="solid"),this.stx.plotLine(r,n,s,o,h,this.name,e,a,c),this.axisLabel&&!this.repositioner&&("ver","t","ical","horizontal"==this.name?(this.stx.endClip(),u=this.p0[1],a.chart.transformFunc&&(u=a.chart.transformFunc(this.stx,a.chart,u)),u=a.yAxis.priceFormatter?a.yAxis.priceFormatter(this.stx,a,u):this.stx.formatYAxisPrice(u,a),this.stx.createYAxisLabel(a,u,s,h),this.stx.startClip(a.name)):"vertical"==this.name&&this.p0[0]>=0&&!this.stx.chart.xAxis.noDraw&&(d=this.stx.dateFromTick(this.p0[0],a.chart,!0),t.ChartEngine.isDailyInterval(this.stx.layout.interval)?d.setHours(0,0,0,0):(m=1e3*d.getSeconds()+d.getMilliseconds(),i.Date&&this.stx.displayZone&&(p=new i.Date(d.getTime(),this.stx.displayZone),d=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes()),d=new Date(d.getTime()+m))),g=t.mmddhhmm(t.yyyymmddhhmm(d)),a.chart.xAxis.formatter?g=a.chart.xAxis.formatter(d,this.name,null,null,g):this.stx.internationalizer&&(0!==d.getHours()||0!==d.getMinutes()?(f=this.stx.internationalizer.monthDay.format(d),f+=" "+this.stx.internationalizer.hourMinute.format(d)):f=this.stx.internationalizer.yearMonthDay.format(d),g=f),this.stx.endClip(),this.stx.createXAxisLabel({panel:a,txt:g,x:r,backgroundColor:h,color:null,pointed:!0,padding:2}),this.stx.startClip(a.name))),this.highlighted&&"horizontal"!=this.name&&"vertical"!=this.name&&("p","0",y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(e,r,s,y),this.littleCircle(e,n,o,v)))},t.Drawing.segment.prototype.abort=function(){this.stx.setMeasure(null,null,null,null,!1)},t.Drawing.segment.prototype.intersected=function(e,i,a){var r,n;if("ho","rizonta","l",R.e01(),!this.p0||!this.p1)return null;if("horizontal"!=(r=this.name)&&"vertical"!=r&&"gartley"!=r)for(var s in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[s][0],n[s][1],a))return R.Q4q(0),this.highlighted=R.E4q(s,"p"),{action:"drag",point:"p"+s};return"horizontal"!=r&&"vertical"!=r||(r="line"),this.lineIntersection(e,i,a,r)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},t.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],t.Drawing.segment.prototype.copyConfig=function(e){t.Drawing.copyConfig(this,e),"none"==this.pattern&&-1==this.configs.indexOf("fillColor")&&(this.pattern="solid")},t.Drawing.segment.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,this.v1=t.v1,this.adjust()},t.Drawing.segment.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.line=function(){this.name="line"},t.inheritsFrom(t.Drawing.line,t.Drawing.segment),t.Drawing.line.prototype.dragToDraw=!1,t.Drawing.line.prototype.calculateOuterSet=function(e){var i,a,r;this.p0[0]==this.p1[0]||this.p0[1]==this.p1[1]||t.ChartEngine.isDailyInterval(this.stx.layout.interval)||((i={x0:this.p0[0],y0:this.p0[1],x1:this.p1[0],y1:this.p1[1]}).x0>i.x1&&(i={x0:this.p1[0],y0:this.p1[1],x1:this.p0[0],y1:this.p0[1]}),a=i.x0-1e3,r=i.x1+1e3,this.v0B=t.yIntersection(i,a),this.v1B=t.yIntersection(i,r),this.d0B=this.stx.dateFromTick(a,e.chart),this.d1B=this.stx.dateFromTick(r,e.chart))},t.Drawing.line.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(t,i)?this.dragToDraw:(this.setPoint(1,t,i,a.chart),this.calculateOuterSet(a),this.penDown=!1,!0):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1)},t.Drawing.line.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.v1=t.v1,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,t.d0B&&(this.d0B=t.d0B,this.d1B=t.d1B,this.v0B=t.v0B,this.v1B=t.v1B),this.adjust()},t.Drawing.line.prototype.serialize=function(){var e,t;if(e={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1},R.e01(),this.d0B){e.d0B=this.d0B,-202413387,-285936148,t=2;for(var i=1;-202413387!==R.f6D(i.toString(),i.toString().length,84088);i++)e.d1B=this.d1B,t+=2;-285936148!==R.d6D(t.toString(),t.toString().length,31671)&&(e.d1B=this.d1B),e.v0B=this.v0B,e.v1B=this.v1B}return e},t.Drawing.line.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(R.Q4q(16),this.setPoint(R.q4q("0",2147483647),this.d0,this.v0,e.chart),this.setPoint(1,this.d1,this.v1,e.chart),t.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,e.chart),this.setPoint(1,this.d1B,this.v1B,e.chart)))},t.Drawing.horizontal=function(){R.e01(),this.name="horizontal"},t.inheritsFrom(t.Drawing.horizontal,t.Drawing.segment),t.Drawing.horizontal.prototype.dragToDraw=!1,t.Drawing.horizontal.prototype.measure=function(){},t.Drawing.horizontal.prototype.click=function(e,t,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.setPoint(0,t,i,a.chart),!0},t.Drawing.horizontal.prototype.intersected=function(e,t,i){var a,r;return"li","n","e",R.w01(),this.lineIntersection(e,t,i,"line")?(a=this.stx.chart.dataSet.length,r=this.p0[1],this.highlighted=!0,{action:"move",p0:[a-2,r],p1:[a-1,r],tick:e,value:t}):null},t.Drawing.horizontal.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.v0=t.v0,this.d0=t.d0,this.tzo0=t.tzo0,this.axisLabel=t.al,this.adjust()},t.Drawing.horizontal.prototype.serialize=function(){var e;return e={name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel},R.e01(),e},t.Drawing.horizontal.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,e.chart),this.p1=[this.p0[0]+100,this.p0[1]])},t.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],t.Drawing.vertical=function(){R.w01(),this.name="vertical"},t.inheritsFrom(t.Drawing.vertical,t.Drawing.horizontal),t.Drawing.vertical.prototype.measure=function(){},t.Drawing.vertical.prototype.intersected=t.Drawing.segment.prototype.intersected,t.Drawing.vertical.prototype.adjust=function(){var e;(e=this.stx.panels[this.panelName])&&(R.e01(),this.setPoint(0,this.d0,this.v0,e.chart),this.p1=[this.p0[0],this.p0[1]+1])},t.Drawing.measure=function(){this.name="measure"},t.inheritsFrom(t.Drawing.measure,t.Drawing.segment),t.Drawing.measure.prototype.click=function(e,t,i){return this.copyConfig(),this.penDown?(this.stx.undo(),this.penDown=!1,!0):(this.p0=[t,i],this.penDown=!0,!1)},t.Drawing.rectangle=function(){R.e01(),this.name="rectangle"},t.inheritsFrom(t.Drawing.rectangle,t.Drawing.BaseTwoPoint),t.Drawing.rectangle.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f=R;(i=this.stx.panels[this.panelName])&&(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromTick(this.p1[0],i.chart),n=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),o=Math.round(Math.min(a,r))+.5,l=Math.min(n,s),h=Math.max(a,r)-o,c=Math.max(n,s)-l,u=this.color,this.highlighted&&(u=this.stx.getCanvasColor("stx_highlight_vector")),(d=this.fillColor)&&!t.isTransparent(d)&&"auto"!=d&&(e.beginPath(),e.rect(o,l,h,c),e.fillStyle=d,e.globalAlpha=.2,e.fill(),e.closePath(),e.globalAlpha=1),p={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&"none"==p.pattern&&("s","o","l","id",p.pattern="solid",.1==p.lineWidth&&(p.lineWidth=1)),this.stx.plotLine(a,r,n,n,u,"segment",e,i,p),f.Q4q(4),this.stx.plotLine(r,r,f.E4q(.5,n),f.q4q(.5,s,f.P4q(0)),u,"segment",e,i,p),this.stx.plotLine(r,a,s,s,u,"segment",e,i,p),f.Q4q(34),this.stx.plotLine(a,a,f.E4q(s,"0.5"),f.E4q(.5,n,f.P4q(4)),u,"segment",e,i,p),this.highlighted&&("p","1",m="p0"==this.highlighted,g="p1"==this.highlighted,this.littleCircle(e,a,n,m),this.littleCircle(e,r,s,g)))},t.Drawing.rectangle.prototype.intersected=function(e,i,a){var r;if(!this.p0||!this.p1)return null;for(var n in r={0:this.p0,1:this.p1})if(this.pointIntersection(r[n][0],r[n][1],a))return R.P4q(0),this.highlighted=R.q4q(n,"p"),{action:"drag",point:"p"+n};return R.w01(),this.boxIntersection(e,i,a)?(this.highlighted=!0,{action:"move",p0:t.clone(this.p0),p1:t.clone(this.p1),tick:e,value:i}):null},t.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.rectangle.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.d1=t.d1,this.tzo0=t.tzo0,this.tzo1=t.tzo1,this.v0=t.v0,R.w01(),this.v1=t.v1,this.adjust()},t.Drawing.rectangle.prototype.serialize=function(){return R.w01(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1}},t.Drawing.shape=function(){this.name="shape",this.radians=0,this.a=0,this.rotating=!1,R.w01(),this.textMeasure=!1,this.configurator="shape",this.dimension=[0,0],this.points=[]},t.inheritsFrom(t.Drawing.shape,t.Drawing.BaseTwoPoint),t.Drawing.shape.prototype.setRotationOnInitialDraw=!1,t.Drawing.shape.prototype.measure=function(){},t.Drawing.shape.prototype.render=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k=R;if("no","n","e","und","efined",this.points.length&&(i=this.stx.panels[this.panelName])){for(a=this.stx.pixelFromTick(this.p0[0],i.chart),r=this.stx.pixelFromValueAdjusted(i,this.p0[0],this.p0[1]),this.p1&&(n=this.stx.pixelFromTick(this.p1[0],i.chart),s=this.stx.pixelFromValueAdjusted(i,this.p1[0],this.p1[1]),e.globalAlpha=.5,e.fillStyle="#000000",this.rotating?(k.Q4q(35),this.radians=Math.atan(k.q4q(n,s,r,a)),n<a?this.radians+=Math.PI:s<r&&(this.radians+=2*Math.PI),this.a=5*parseInt((36*this.radians/Math.PI).toFixed(0),10),k.Q4q(17),this.a%=k.q4q(0,"360"),this.radians=this.a*Math.PI/180,this.textMeasure&&e.fillText(this.a+"",n+10,s+10)):this.penDown&&("x",",",this.sx=Math.max(1,parseFloat(Math.abs(2*(n-a)/this.dimension[0]).toFixed(1))),n<a&&(this.sx*=-1),this.sy=Math.max(1,parseFloat(Math.abs(2*(s-r)/this.dimension[1]).toFixed(1))),s<r&&(this.sy*=-1),this.textMeasure&&e.fillText(this.sx+"x,"+this.sy+"x",n+this.sx+5,s+this.sy+5)),e.globalAlpha=1),"undefined"===H(this.sx)&&(this.sx=this.sy=1),(o=this.lineWidth)||(o=1.1),l={pattern:this.pattern,lineWidth:o},this.highlighted&&"none"==l.pattern&&("sol","id",l.pattern="solid",.1==l.lineWidth&&(l.lineWidth=1)),("auto"==(h=this.color)||t.isTransparent(h))&&(h=this.stx.defaultColor),this.highlighted&&("stx_highlight_v","ector",h=this.stx.getCanvasColor("stx_highlight_vector"),.1==o&&(o=1.1)),c=this.fillColor,o/=2*Math.abs(this.sx*this.sy)/(Math.abs(this.sx)+Math.abs(this.sy)),e.save(),e.translate(a,r),e.rotate(this.radians),e.scale(this.sx,i.yAxis.flipped?-this.sy:this.sy),p={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-1)/2},u=0;u<this.points.length;u++){for(e.beginPath(),d=0;d<this.points[u].length;d++)"M"==this.points[u][d]?(m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,e.moveTo(m,g)):"L"==this.points[u][d]?(m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,e.lineTo(m,g)):"Q"==this.points[u][d]?(f=this.points[u][++d]-p.x,v=this.points[u][++d]-p.y,m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,e.quadraticCurveTo(f,v,m,g)):"B"==this.points[u][d]&&(f=this.points[u][++d]-p.x,v=this.points[u][++d]-p.y,y=this.points[u][++d]-p.x,x=this.points[u][++d]-p.y,m=this.points[u][++d]-p.x,g=this.points[u][++d]-p.y,e.bezierCurveTo(f,v,y,x,m,g));e.closePath(),c&&!t.isTransparent(c)&&"auto"!=c&&(e.fillStyle=c,e.fill()),h&&"none"!=this.pattern&&(e.strokeStyle=h,e.lineWidth=o,e.setLineDash&&(e.setLineDash(t.borderPatternToArray(o,this.pattern)),e.lineDashOffset=0),e.stroke())}e.restore(),e.save(),e.translate(a,r),e.rotate(this.radians),this.highlighted?("#0","00","00","0","p","2","p","1","p","0",b="p0"==this.highlighted,S="p1"==this.highlighted,C="p2"==this.highlighted,this.littleCircle(e,0,0,b),k.P4q(17),this.mover(e,k.q4q(0,"0"),k.E4q(616146048,"0",k.Q4q(7)),b),this.littleCircle(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,S),this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,S),this.littleCircle(e,this.sx*this.dimension[0]/2,0,C),this.rotator(e,this.sx*this.dimension[0]/2,0,C),e.globalAlpha=.5,e.fillStyle="#000000",this.textMeasure&&(e.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),e.fillText(this.a+"",this.sx*this.dimension[0]/2+12,5)),e.globalAlpha=1):this.penDown&&(this.rotating?this.rotator(e,this.sx*this.dimension[0]/2,0,!0):this.resizer(e,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0)),e.restore()}},t.Drawing.shape.prototype.reposition=function(e,t,i,a){var r,n,s,o,l,h,c;t&&(r=this.stx.panels[this.panelName],"move"==t.action?(n=t.tick-i,s=t.value-a,this.setPoint(0,t.p0[0]-n,t.p0[1]-s,r.chart),this.render(e)):("r","ot","ate",o=this.stx.pixelFromTick(this.p0[0],r.chart),l=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),h=this.stx.pixelFromTick(i,r.chart),c=this.stx.pixelFromValueAdjusted(r,i,a),"scale"==t.action?(this[t.point]=[i,a],this.sx=parseFloat((((h-o)*Math.cos(this.radians)+(c-l)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((c-l)*Math.cos(this.radians)-(h-o)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(e)):"rotate"==t.action&&(this[t.point]=[i,a],R.P4q(35),this.radians=Math.atan(R.E4q(h,c,l,o)),h<o?this.radians+=Math.PI:c<l&&(this.radians+=2*Math.PI),this.a=5*parseInt((36*this.radians/Math.PI).toFixed(0),10),this.sx<0&&(this.a=this.a+180),this.a%=360,this.radians=this.a*Math.PI/180,this.render(e))))},t.Drawing.shape.prototype.intersected=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=R;if(!this.p0)return null;if(this.stx.repositioningDrawing==this&&this.stx.repositioningDrawing.repositioner)return this.stx.repositioningDrawing.repositioner;if(r=this.stx.panels[this.panelName],n=this.stx.pixelFromTick(this.p0[0],r.chart),s=this.stx.pixelFromValueAdjusted(r,this.p0[0],this.p0[1]),o=this.stx.pixelFromTick(e,r.chart),l=this.stx.pixelFromValueAdjusted(r,e,i),h=l-=s,c=o-=n,o=Math.cos(this.radians)*c+Math.sin(this.radians)*h,l=Math.cos(this.radians)*h-Math.sin(this.radians)*c,o/=this.sx,l/=this.sy,this.padding=t.ensureDefaults(this.padding||{},{left:0,right:0,top:0,bottom:0}),u=this.padding.right+this.padding.left,d=this.padding.bottom+this.padding.top,p=Math.pow(t.touchDevice?25:5+this.littleCircleRadius(),2),m=Math.abs(p/(this.sx*this.sy)),g=Math.pow((this.dimension[0]-u)/2,2)+Math.pow((this.dimension[1]-d)/2,2)>Math.pow(o-u/2,2)+Math.pow(l-d/2,2),b.w01(),f=(p-(Math.pow(o*this.sx,2)+Math.pow(l*this.sy,2)))/Math.abs(this.sx*this.sy),y=m-Math.pow(o-this.dimension[0]/2,2)-Math.pow(l-this.dimension[1]/2,2),v=m-Math.pow(o-this.dimension[0]/2,2)-Math.pow(l,2),g){if("mo","v","e",y>=v&&y>=f)return this.highlighted="p1",{action:"scale"};if(v>=y&&v>=f){this.highlighted="p2",-918874346,b.P4q(7),x=-b.E4q(2105941856,"1922898989"),2;for(var S=1;-918874346!==b.d6D(S.toString(),S.toString().length,73695);S++)return{action:""};return b.d6D(2..toString(),2..toString().length,21620)!==x?{action:""}:{action:"rotate"}}return this.highlighted="p0",{action:"move",p0:t.clone(this.p0),tick:e,value:i}}return null},t.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],t.Drawing.shape.prototype.littleCircleRadius=function(){return 3},t.Drawing.shape.prototype.click=function(e,t,i){var a;return R.w01(),!!this.points.length&&(this.copyConfig(),a=this.stx.panels[this.panelName],this.penDown?(R.P4q(7),this.setPoint(R.E4q(1224428448,"1"),t,i,a.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(this.setPoint(0,t,i,a.chart),this.penDown=!0,!1))},t.Drawing.shape.prototype.adjust=function(){var e,i,a;R.w01(),(e=this.stx.panels[this.panelName])&&(i=this.name+"_v"+(this.version||0),t.Drawing[i]&&(a=new t.Drawing[i],this.name=a.name,this.dimension=a.dimension,this.padding=a.padding,this.points=a.points,this.version=a.version),this.setPoint(0,this.d0,this.v0,e.chart),this.radians=Math.round(this.a/5)*Math.PI/36)},t.Drawing.shape.prototype.reconstruct=function(e,t){this.stx=e,this.color=t.col,this.fillColor=t.fc,this.panelName=t.pnl,this.pattern=t.ptrn,this.lineWidth=t.lw,this.d0=t.d0,this.v0=t.v0,this.tzo0=t.tzo0,this.a=t.a,this.sx=t.sx,this.sy=t.sy,this.version=t.ver,this.adjust()},t.Drawing.shape.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,ver:this.version}},t.Drawing.arrow=function(){this.name="arrow",this.version=1,this.dimension=[11,22],this.padding={left:0,right:0,top:11,bottom:0},R.P4q(1),this.points=[["M",3,21,"L",7,21,"L",7,R.E4q("16",1),"L",10,16,"L",5,11,"L",0,16,"L",3,16,"L",3,21]],R.w01()},t.inheritsFrom(t.Drawing.arrow,t.Drawing.shape),t.Drawing.getDrawingToolList=function(e){var i,a;for(var r in i={},a={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},t.extend(a,e),t.Drawing)!a[r]&&t.Drawing[r].prototype.render&&(i[(new t.Drawing[r]).name]=r);return i}},h=function(e){var t;R.e01(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).EaseMachine=function(e,t,i,a){this.fc=e,this.ms=t,(i||0===i)&&this.reset(i,a)},t.EaseMachine.prototype.reset=function(e,t){for(var i in e||0===e||(e=this.currentValues),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,R.Q4q(36),this.useNameValuePairs=R.q4q(H(t),"object"),R.w01(),this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=e,this.endValues=t):(this.startValues={default:e},this.endValues={default:t}),this.changeValues={},this.currentValues={},this.startValues)this.changeValues[i]=this.endValues[i]-this.startValues[i]},t.EaseMachine.prototype.next=function(){var e;for(var t in(e=Date.now())>=this.startTime+this.ms&&(e=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},this.changeValues)this.currentValues[t]=this.fc(e-this.startTime,this.startValues[t],this.changeValues[t],this.ms);return this.useNameValuePairs?this.currentValues:this.currentValues.default},t.EaseMachine.prototype.hasCompleted=!0,t.EaseMachine.prototype.run=function(e,t,i,a){var r;function n(){var t;r.afid=null,r.okayToRun&&(R.w01(),t=r.next(),e(t),r.hasCompleted||(r.afid=requestAnimationFrame(n)))}R.w01(),this.afid&&cancelAnimationFrame(this.afid),t||0===t?this.reset(t,i):(i||0===i)&&this.reset(this.currentValues,i),r=this,this.running=!0,a?this.afid=requestAnimationFrame(n):n()},t.EaseMachine.prototype.stop=function(){return this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,void 0===this.useNameValuePairs?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},t.ChartEngine.prototype.animations.zoom.isStub&&(R.Q4q(8),t.ChartEngine.prototype.animations.zoom=new t.EaseMachine(Math.easeOutCubic,R.E4q("400",384)))},c=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,R.w01(),i=function(){var e,i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=R;function v(e){function t(){}return y.e01(),t.prototype=e,new t}function x(e,t){return y.Q4q(36),y.e01(),y.q4q(e,t)}function b(e,t){return y.P4q(1),y.E4q(e,t)}function S(e){return Math.sinh?Math.sinh(e):(Math.exp(e)-Math.exp(-e))/2}function C(e,t){return y.Q4q(5),y.q4q(e,t)}function k(e){var t;for(t=e=Math.floor(e),y.e01();e>1;)y.Q4q(1),t=y.q4q(t,--e);return t}function w(e,t){return Number(e)+Number(t)}function D(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,y.e01(),this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:S,cosh:B,tanh:Z,asinh:V,acosh:L,atanh:X,sqrt:Math.sqrt,log:Math.log,lg:G,log10:G,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:O,"-":Y,exp:Math.exp},this.ops2={"+":w,"-":P,"*":b,"/":C,"%":W,"^":Math.pow,",":E,"||":z,"==":x,"!=":F,">":q,"<":H,">=":M,"<=":N,and:A,or:U},this.functions={random:T,fac:k,min:Math.min,max:Math.max,hypot:I,pyt:I,pow:Math.pow,atan2:Math.atan2,if:j},this.consts={E:Math.E,PI:Math.PI}}function A(e,t){return Boolean(e&&t)}function T(e){return Math.random()*(e||1)}function M(e,t){return y.P4q(37),y.e01(),y.q4q(t,e)}function P(e,t){return y.Q4q(4),y.w01(),y.q4q(t,e)}function F(e,t){return y.P4q(38),y.q4q(t,e)}function _(t,s,o,l){y.e01(),this.type_=t,this.index_=s||0,this.prio_=o||0,this.number_=null!=l?l:0,this.toString=function(){switch(this.type_){case e:return this.number_;case i:case a:case r:return this.index_;case n:return"CALL";default:return"Invalid Token"}}}function E(e,t){return"[object A","rra","y]","[object Array]"!=Object.prototype.toString.call(e)?[e,t]:((e=e.slice()).push(t),e)}function L(e){return y.w01(),Math.acosh?Math.acosh(e):Math.log(e+Math.sqrt(e*e-1))}function q(e,t){return y.Q4q(39),y.w01(),y.E4q(e,t)}function I(){var e,t;if(Math.hypot)return Math.hypot.apply(this,arguments);y.e01(),y.P4q(17),e=y.q4q(0,"0"),t=arguments.length;for(var i=0;i<t;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;e+=arguments[i]*arguments[i]}return Math.sqrt(e)}function N(e,t){return y.Q4q(40),y.E4q(e,t)}function O(e){return Math.trunc?Math.trunc(e):e<0?Math.ceil(e):Math.floor(e)}function H(e,t){return y.w01(),y.Q4q(42),y.q4q(e,t)}function j(e,t,i){return y.w01(),e?t:i}function z(e,t){return y.e01(),y.Q4q(18),y.E4q(t,"",e)}function V(e){return Math.asinh?Math.asinh(e):e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function Q(e,t,i,a){this.tokens=e,this.ops1=t,y.e01(),this.ops2=i,this.functions=a}function B(e){return y.w01(),Math.cosh?Math.cosh(e):(Math.exp(e)+Math.exp(-e))/2}function U(e,t){return Boolean(e||t)}function W(e,t){return y.e01(),y.P4q(43),y.q4q(t,e)}function Y(e){for(var t=1;818402345!==y.d6D(t.toString(),t.toString().length,34267);t++)return!e;return-1641625696!==y.f6D(2..toString(),2..toString().length,30091)?!e:(y.e01(),-e)}function X(e){return Math.atanh?Math.atanh(e):Math.log((1+e)/(1-e))/2}function Z(e){return y.e01(),Math.tanh?Math.tanh(e):e===1/0?(y.Q4q(4),y.E4q(0,"1")):e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function G(e){return Math.log(e)*Math.LOG10E}return"\\","'","\\","f","\\","b",e=0,i=1,a=2,r=3,n=4,/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s=/[\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},t.extend(Q.prototype,{simplify:function(t){var n,s,o,l,h,c,u,d,p;for(t=t||{},n=[],y.w01(),s=[],c=this.tokens.length,d=0,d=0;d<c;d++)if((p=(u=this.tokens[d]).type_)===e)n.push(u);else if(p===r&&u.index_ in t)u=new _(e,0,0,t[u.index_]),n.push(u);else if(p===a&&n.length>1)l=n.pop(),o=n.pop(),h=this.ops2[u.index_],u=new _(e,0,0,h(o.number_,l.number_)),n.push(u);else if(p===i&&n.length>0)o=n.pop(),h=this.ops1[u.index_],u=new _(e,0,0,h(o.number_)),n.push(u);else{for(;n.length>0;)s.push(n.shift());s.push(u)}for(;n.length>0;)s.push(n.shift());return new Q(s,v(this.ops1),v(this.ops2),v(this.functions))},substitute:function(e,t){var i,a,n,s,o,l;for(t instanceof Q||(t=(new D).parse(String(t))),i=[],a=this.tokens.length,s=0,s=0;s<a;s++)if((n=this.tokens[s]).type_===r&&n.index_===e)for(var h=0;h<t.tokens.length;h++)l=new _((o=t.tokens[h]).type_,o.index_,o.prio_,o.number_),i.push(l);else i.push(n);return new Q(i,v(this.ops1),v(this.ops2),v(this.functions))},evaluate:function(t){var s,o,l,h,c,u,d,p;for(t=t||{},s=[],c=this.tokens.length,d=0,d=0;d<c;d++)if((p=(u=this.tokens[d]).type_)===e)s.push(u.number_);else if(p===a)l=s.pop(),o=s.pop(),h=this.ops2[u.index_],s.push(h(o,l));else if(p===r)if(u.index_ in t)s.push(t[u.index_]);else{if(!(u.index_ in this.functions))throw new Error("undefined variable: "+u.index_);s.push(this.functions[u.index_])}else if(p===i)o=s.pop(),h=this.ops1[u.index_],s.push(h(o));else{if(p!==n)throw"invalid ","Exp","ression",new Error("invalid Expression");if(o=s.pop(),!(h=s.pop()).apply||!h.call)throw y.Q4q(0),new Error(y.q4q(" is not a function",h));"[object Array]"==Object.prototype.toString.call(o)?s.push(h.apply(void 0,o)):s.push(h.call(void 0,o))}if(y.w01(),s.length>1)throw new Error("invalid Expression (parity)");return s[0]},toString:function(t){var l,h,c,u,d,p,m,g,f;for(y.e01(),l=[],d=this.tokens.length,m=0,m=0;m<d;m++)if((g=(p=this.tokens[m]).type_)===e)l.push("string"==typeof(f=p.number_)?(s.lastIndex=0,s.test(f)?"'"+f.replace(s,(function(e){var t;return"string"==typeof(t=o[e])?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+"'":"'"+f+"'"):f);else if(g===a)c=l.pop(),h=l.pop(),u=p.index_,t&&"^"==u?(y.Q4q(41),l.push(y.q4q(")",c,",",h,"Math.pow("))):(y.Q4q(41),l.push(y.q4q(")",c,u,h,"(")));else if(g===r)l.push(p.index_);else if(g===i)h=l.pop(),"-"===(u=p.index_)?(y.P4q(32),l.push(y.q4q(")",h,u,"("))):(y.Q4q(32),l.push(y.E4q(")",h,"(",u)));else{if(g!==n)throw new Error("invalid Expression");h=l.pop(),u=l.pop(),y.P4q(32),l.push(y.q4q(")",h,"(",u))}if(l.length>1)throw new Error("invalid Expression (parity)");return l[0]},variables:function(){var e,t,i;e=this.tokens.length,t=[],y.w01();for(var a=0;a<e;a++)(i=this.tokens[a]).type_===r&&-1==t.indexOf(i.index_)&&t.push(i.index_);return t}},!0),D.parse=function(e){return y.e01(),(new D).parse(e)},D.evaluate=function(e,t){return y.w01(),D.parse(e).evaluate(t)},D.Expression=Q,D.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:S,cosh:B,tanh:Z,asinh:V,acosh:L,atanh:X,sqrt:Math.sqrt,log:Math.log,lg:G,log10:G,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:O,random:T,fac:k,exp:Math.exp,min:Math.min,max:Math.max,hypot:I,pyt:I,pow:Math.pow,atan2:Math.atan2,if:j,E:Math.E,PI:Math.PI},y.Q4q(11),l=y.q4q(0,1),y.P4q(11),h=y.q4q(1,1),y.P4q(44),c=y.E4q("1",2),y.P4q(45),u=y.E4q("3",1,0),y.Q4q(11),d=y.q4q(4,1),y.P4q(11),p=y.E4q(5,1),y.P4q(46),m=y.q4q(0,6,"1"),y.P4q(11),g=y.q4q(7,1),y.Q4q(47),f=y.q4q("8",1),t.extend(D.prototype,{parse:function(t){var s,o,x,b,S,C,k,w;for(this.errormsg="",this.success=!0,s=[],o=[],this.tmpprio=0,y.Q4q(48),x=y.q4q(l,m,u,c),b=0,this.expression=t,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&x&m?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",b++,this.addfunc(o,s,i)),y.P4q(48),x=y.E4q(l,m,u,c)):this.isComment()||(0==(x&h)&&this.error_parsing(this.pos,"unexpected operator"),b+=2,this.addfunc(o,s,a),y.Q4q(48),x=y.E4q(l,m,u,c)):this.isNumber()?(0==(x&l)&&this.error_parsing(this.pos,"unexpected number"),S=new _(e,0,0,this.tokennumber),o.push(S),y.P4q(49),x=y.q4q(p,h,d)):this.isString()?(0==(x&l)&&("unexpected ","string",this.error_parsing(this.pos,"unexpected string")),S=new _(e,0,0,this.tokennumber),o.push(S),y.Q4q(49),x=y.q4q(p,h,d)):this.isLeftParenth()?(0==(x&u)&&this.error_parsing(this.pos,'unexpected "("'),x&g&&(b+=2,y.P4q(1),this.tokenprio=-y.q4q("2",1),this.tokenindex=-1,this.addfunc(o,s,n)),y.Q4q(50),x=y.E4q(m,f,c,l,u)):this.isRightParenth()?(x&f?(y.P4q(11),S=new _(e,0,y.E4q(487058464,"0"),[]),o.push(S)):0==(x&d)&&this.error_parsing(this.pos,'unexpected ")"'),y.Q4q(50),x=y.q4q(u,g,p,h,d)):this.isComma()?(0==(x&p)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(o,s,a),y.Q4q(16),b+=y.q4q("2",2147483647),y.P4q(48),x=y.E4q(l,m,u,c)):this.isConst()?(0==(x&l)&&this.error_parsing(this.pos,"unexpected constant"),C=new _(e,0,0,this.tokennumber),o.push(C),y.P4q(49),x=y.E4q(p,h,d)):this.isOp2()?(0==(x&c)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(o,s,a),b+=2,x=u):this.isOp1()?(0==(x&c)&&("unex","pected ","function",this.error_parsing(this.pos,"unexpected function")),this.addfunc(o,s,i),b++,x=u):this.isVar()?(0==(x&l)&&this.error_parsing(this.pos,"unexpected variable"),k=new _(r,this.tokenindex,0,0),o.push(k),y.Q4q(50),x=y.E4q(u,g,p,h,d)):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&("unmatched",' "()','"',this.error_parsing(this.pos,'unmatched "()"'));s.length>0;)w=s.pop(),o.push(w);return b+1!==o.length&&("pari","ty",this.error_parsing(this.pos,"parity")),new Q(o,v(this.ops1),v(this.ops2),v(this.functions))},evaluate:function(e,t){return this.parse(e).evaluate(t)},error_parsing:function(e,t){throw this.success=!1,y.P4q(32),y.w01(),this.errormsg=y.E4q(t,"]: ",e,"parse error [column "),this.column=e,new Error(this.errormsg)},addfunc:function(e,t,i){var a;for(y.w01(),a=new _(i,this.tokenindex,this.tokenprio+this.tmpprio,0);t.length>0&&a.prio_<=t[t.length-1].prio_;)e.push(t.pop());t.push(a)},isNumber:function(){var e,t,i;for(e=!1,t="";this.pos<this.expression.length&&((i=this.expression.charCodeAt(this.pos))>=48&&i<=57||46===i);)t+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(t),e=!0;return y.e01(),e},unescape:function(e,t){var i,a,r,n;i=[],a=!1;for(var s=0;s<e.length;s++)if(r=e.charAt(s),a){switch(r){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("\t");break;case"u":n=parseInt(e.substring(s+1,s+5),16),i.push(String.fromCharCode(n)),s+=4;break;default:throw"Illegal esca","pe sequence: '\\",y.P4q(0),this.error_parsing(y.E4q(s,t),y.q4q("'","Illegal escape sequence: '\\",r,y.Q4q(18)))}a=!1}else"\\"==r?a=!0:i.push(r);return i.join("")},isString:function(){var e,t,i;if(e=!1,t="",i=this.pos,this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){if("'"==this.expression.charAt(this.pos)&&"\\"!=t.slice(-1)){this.pos++,this.tokennumber=this.unescape(t,i),e=!0;break}t+=this.expression.charAt(this.pos),this.pos++}return e},isConst:function(){var e;for(var t in this.consts)if(e=t.length,t===this.expression.substr(this.pos,e))return this.tokennumber=this.consts[t],this.pos+=e,!0;return y.e01(),!1},isOperator:function(){var e;if(e=this.expression.charCodeAt(this.pos),y.e01(),43===e)this.tokenprio=2,this.tokenindex="+";else if(45===e)this.tokenprio=2,this.tokenindex="-";else if(62===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,y.Q4q(1),this.tokenprio=y.q4q("1",1),this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===e)61===this.expression.charCodeAt(this.pos+1)?("<","=",this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===e){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===e){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===e){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===e||8729===e||8226===e)this.tokenprio=3,this.tokenindex="*";else if(47===e)this.tokenprio=4,this.tokenindex="/";else if(37===e)this.tokenprio=4,this.tokenindex="%";else{if(94!==e)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var e;if(45===(e=this.expression.charCodeAt(this.pos-1))||43===e)return!0;for(var t=1;1537867768!==y.d6D(t.toString(),t.toString().length,45911);t++)return!1;return 16468958!==y.f6D(2..toString(),2..toString().length,39925)||void 0},isPositiveSign:function(){var e;return e=this.expression.charCodeAt(this.pos-1),y.w01(),43===e},isNegativeSign:function(){return y.w01(),45===this.expression.charCodeAt(this.pos-1)},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio+=10,!0)},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){var e;return e=this.expression.charCodeAt(this.pos),y.w01(),44===e&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var e;return(32===(e=this.expression.charCodeAt(this.pos))||9===e||10===e||13===e)&&(this.pos++,!0)},isOp1:function(){var e,t;y.w01(),e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops1&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isOp2:function(){var e,t;e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&e in this.ops2?(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0):(y.e01(),!1)},isVar:function(){var e,t;y.e01(),e="";for(var i=this.pos;i<this.expression.length&&((t=this.expression.charAt(i)).toUpperCase()!==t.toLowerCase()||!(i===this.pos||"_"!=t&&(t<"0"||t>"9")));i++)e+=t;return e.length>0&&(this.tokenindex=e,this.tokenprio=4,this.pos+=e.length,!0)},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)}},!0),D},t.computeEquationChart=function(e,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w=R;for(var D in e=e.replace(/[:]/,"/").toUpperCase(),r=0,a)"\\","^","\\","[",n=new RegExp("\\["+D.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),w.Q4q(0),e=e.replace(n,w.E4q(r,"symbol")),r++;function A(e){if(w.e01(),e.i++,a[e.s]){if(e.i>=a[e.s].length)return 0;c=a[e.s][e.i]}return c.DT||(c.DT=t.strToDateTime(c.Date)),e.d=c.DT,w.Q4q(7),w.q4q(1226529728,"1")}for(D in s=i().parse(e),o=[],l={},h=0,u=null,d=!1,p=[],a)m={sym:D,map:a[D]},a[D]?p.unshift(m):p.push(m);for(var T=0;T<p.length;T++)g=p[T],l[g.sym]={i:0,s:g.sym},g.map?(h++,c=g.map[0]):1==h&&(d=g.sym),c.DT||(c.DT=t.strToDateTime(c.Date)),l[g.sym].d=c.DT,u||(u=l[g.sym]);w.Q4q(51),f=w.q4q(0,h),y=1==h&&-1==e.indexOf("%");e:for(;v=P();)if(1==v){if(d)(b=a[u.s][u.i][d])&&(b.Close||0===b.Close)&&(b=b.Close),S=s.evaluate({symbol0:a[u.s][u.i].Close,symbol1:b}),S=Number(S.toFixed(8)),(x={DT:u.d,Close:S,Adj_Close:S})[u.s]=a[u.s][u.i].Close,isNaN(S)||S==1/0||o.push(x);else{if(f)throw C=s.evaluate({}),w.P4q(18),t.alert(w.q4q(C,e,"=")),{name:"NoException",message:""};for(D in r=0,k={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}},a){for(var M in k)w.Q4q(0),k[M][w.q4q(r,"symbol")]=a[D][l[D].i][M];r++}(x={DT:u.d}).Adj_Close=s.evaluate(k.Adj_Close),x.Close=s.evaluate(k.Close),x.Open=s.evaluate(k.Open),x.Volume=s.evaluate(k.Volume),isNaN(x.Volume)&&(x.Volume=0),y?(x.High=s.evaluate(k.High),x.Low=s.evaluate(k.Low)):(x.High=Math.max(x.Open,x.Close),x.Low=Math.min(x.Open,x.Close)),isNaN(x.Close)||x.Close==1/0||o.push(x),isNaN(x.High)||(x.High=Number(x.High.toFixed(8))),isNaN(x.Low)||(x.Low=Number(x.Low.toFixed(8))),isNaN(x.Open)||(x.Open=Number(x.Open.toFixed(8))),isNaN(x.Close)||(x.Close=Number(x.Close.toFixed(8))),isNaN(x.Adj_Close)?x.Adj_Close=x.Close:x.Adj_Close=Number(x.Adj_Close.toFixed(8))}for(D in a)if(!A(l[D]))break e}function P(){var e,t;for(var i in e=null,t=null,w.w01(),l)t?l[i].d.getTime()<t.d.getTime()?e=t=l[i]:l[i].d.getTime()>t.d.getTime()&&(e=t):t=l[i];return e?A(e)?-1:0:1}return o}},u=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.setLocale=function(e,i){var a,r,n,s;if("sh","or",R.e01(),"t","numer","ic","num","eric","2-","dig","it","nume","r","ic","h","2","3","undefin","ed","undefined"!=("undefined"==typeof Intl?"undefined":H(Intl))&&this.locale!=e){for(this.locale=e,(r=this.internationalizer={}).hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}),r.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"}),r.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),r.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),r.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),r.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),r.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),r.numbers=new Intl.NumberFormat(this.locale),r.priceFormatters=[],i||(i=8),a=0;a<i+1;a++)r.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:a,minimumFractionDigits:a}));for(a=0;a<5;a++)n=a,s=a,a||(n="",s=2),R.Q4q(0),r[R.E4q(n,"percent")]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:s,maximumFractionDigits:s});t.I18N.createMonthArrays&&t.I18N.createMonthArrays(this,r.month,this.locale)}},t.I18N=function(){},t.I18N.hereDoc=function(e){return R.e01(),e.toString().replace(/^[^/]+\/\*!?/,"").replace(/\*\/[^/]+$/,"")},t.I18N.language="en",t.I18N.longMonths={zh:!0},t.I18N.reverseColorsByLocale={zh:!0,ja:!0},t.I18N.findAllTextNodes=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x;if(e||(e=document.body),e==document.body&&!document.querySelector(".ciq_stashed_texts")){"ciq_stashed","_texts",(i=document.createElement("div")).className="ciq_stashed_texts",-725093041,761073121,a=2;for(var b=1;-725093041!==R.d6D(b.toString(),b.toString().length,23721);b++)"n","o","ne",i.style.display="none",e.appendChild(i),a+=2;761073121!==R.d6D(a.toString(),a.toString().length,10266)&&(i.style.display="",e.appendChild(i)),r=document.querySelectorAll("input,textarea,.editable_content");for(var S=0;S<r.length;S++)"placeh","older",(n=r[S].getAttribute("placeholder"))&&("t","rans","lat","e",(s=i.appendChild(document.createElement("translate"))).setAttribute("original",n),s.placeholderFor=r[S],s.appendChild(document.createTextNode(n)))}for(l=(o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1)).nextNode(),h=new RegExp("^\\s*$"),c=new RegExp("\n|\t|\f","g"),u={},d={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};l;)p=l.nodeValue,h.test(p)||(m=l.parentNode,g=l.nextSibling,d[f=m.tagName]||("TRANSL","AT","E","TRANSLATE"!=f?("origina","l",(y=document.createElement("translate")).setAttribute("original",p),y.appendChild(l),m.insertBefore(y,g)):p=m.getAttribute("original"),c.test(p)&&(p=p.replace(c,"")),u[p]||(u[p]=[]),u[p].push(l))),l=o.nextNode();if(e==document.body&&(v=t.Studies?t.Studies.studyLibrary:null))for(var C in v){if(null===u[C]&&(u[C]=[]),(x=v[C]).inputs)for(var k in x.inputs)u[k]||(u[k]=[]);if(x.outputs)for(var w in x.outputs)u[w]||(u[w]=[])}return u},t.I18N.missingWordList=function(e){var i,a,r,n,s,o;for(var l in"I","nvert ","Y-A","xis",e||(e=t.I18N.language),i=t.I18N.findAllTextNodes(),a={},(r=t.I18N.wordLists[e])||(r={}),n=function(e){R.w01(),void 0===r[e]&&(a[e]="")},i)n(l);if(!t.Studies||!t.Studies.studyLibrary)return a;for(var h in t.Studies.studyLibrary){for(var c in n((s=t.Studies.studyLibrary[h]).name),s.inputs)switch("[object"," A","rray]","[object Strin","g]",n(c),o=s.inputs[c],Object.prototype.toString.call(o)){case"[object String]":n(o);break;case"[object Array]":for(var u=0;u<o.length;++u)n(o[u])}for(var d in s.outputs)n(d)}return n("Show Zones"),n("OverBought"),n("OverSold"),n("Panel"),n("Show as Underlay"),n("Y-Axis"),R.e01(),n("Invert Y-Axis"),a},t.I18N.printableMissingWordList=function(e){return JSON.stringify(t.I18N.missingWordList(e)).replace(/","/g,'",\n"')},t.I18N.translateUI=function(e,i){var a,r,n,s,o,l,h,c;if("pu"==e&&(e="pt"),t.I18N.wordLists&&(e||(e=t.I18N.language),a=t.I18N.findAllTextNodes(i),r=t.I18N.wordLists[e]))for(var u in a){n=t.I18N.translateSections(u,r),s=a[u];for(var d=0;d<s.length;d++)"o","rig","inal",h=(l=(o=s[d]).parentNode).getAttribute("original"),","!==n&&n||(n=h),(c=l.placeholderFor)?c.placeholder=n:o.data=n}},t.I18N.translate=function(e,i){var a,r;return i||(i=t.I18N.language),t.I18N.wordLists?(a=t.I18N.wordLists[i],r=null,R.e01(),a&&(r=t.I18N.translateSections(e,a)||e),","===r?e:r):("Must include"," translations.js in order to use CIQ.I18N.translate()",console.log("Must include translations.js in order to use CIQ.I18N.translate()"),e)},t.I18N.translateSections=function(e,t){var i;return R.e01(),"st","r","ing","","string"==H(e)&&-1!=e.indexOf("")?("$","1",R.Q4q(18),(i=(e=e.replace(/([(),])/g,R.E4q("","","$1"))).split("")).forEach((function(e,i,a){var r,n;r=e.match(/^(\s*).*\S(\s*)$/),R.e01(),(n=t[e.trim()])&&(r&&(n=r[1]+n+r[2]),a[i]=n)})),i.join("")):t[e]},t.I18N.convertCSV=function(e){var i,a,r,n,s,o,l,h,c;if("^",'("',')|(")',"$","[]|[","","]",i=new RegExp("[]|[]","g"),a=new RegExp('^(")|(")$',"g"),r=t.I18N.wordLists,e||(e=t.I18N.csv),R.w01(),e){s=(n=e.split("\n"))[0].split(",");for(var u=0;u<s.length;u++)r[o=s[u]]||(r[o]={});for(var d=1;d<n.length;d++){h=(l=n[d].match(/(".*?"|[^",]+)(?=\s*,|\s*$)|(,(?=,))/g)||[])[0],a.test(h)&&(h=h.replace(a,"")),i.test(h)&&(h=h.replace(i,'"'));for(var p=1;p<l.length;p++)c=l[p],a.test(c)&&(c=c.replace(a,"")),r[s[p]][h]=c}}},t.I18N.setLanguage=function(e,i,a,r,n){R.w01(),"pu"==i&&(i="pt"),t.I18N.convertCSV(r),t.I18N.language=i,t.I18N.translateUI(i,n),a||(a=t.I18N.translate),e.translationCallback=a},R.e01(),t.I18N.setLocale=function(e,t,i,a,r){var n,s,o;if("s","cript","S","CRIP","T","local","e","-dat","a/jsonp","undefined"==typeof Intl||!Intl.__addLocaleData)return e.setLocale(t,r),void(i&&i(null));R.w01(),a=void 0===a?"locale-data/jsonp":a,R.Q4q(32),n=R.E4q(".js",t,"/",a),(s=document.createElement("SCRIPT")).async=!0,s.src=n,(o=document.getElementsByTagName("script")[0]).parentNode.insertBefore(s,o.nextSibling),s.onload=function(){e.setLocale(t,r),i&&i(null)},s.onerror=function(){R.e01(),i&&i("cannot load script")}},t.I18N.createMonthArrays=function(e,i,a){var r,n,s,o,l;e.monthAbv=[],e.monthLetters=[],r=new Date,n=!0,t.I18N.longMonths&&t.I18N.longMonths[a]&&(n=!1);for(var h=0;h<12;h++)if(r.setDate(1),r.setMonth(h),s=i.format(r),n){o="";for(var c=0;c<s.length;c++)(l=s.charAt(c)).charCodeAt(0)<65||(o+=l);e.monthAbv[h]=o,e.monthLetters[h]=o[0]}else e.monthAbv[h]=s,e.monthLetters[h]=s},t.I18N.localize=function(e,t){var i,a,r;i=e.locale,a=this.reverseColorsByLocale[t],r=this.reverseColorsByLocale[i],this.setLocale(e,t),this.setLanguage(e,t),a&&r||(a||r)&&this.reverseCandles(e)},t.I18N.reverseCandles=function(e){var t,i,a;t=e.styles,i=e.cloneStyle(t.stx_candle_down),a=e.cloneStyle(t.stx_candle_up),t.stx_candle_up=i,R.e01(),t.stx_candle_down=a},t.I18N.wordLists={en:{}},t.I18N.languages={en:"English"}},d=function(e){var t,i;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":H(_CIQ))?_CIQ:e.CIQ).ChartEngine.prototype.pointerEvents={down:[],up:[]},t.ChartEngine.prototype.manageTouchAndMouse=!0,R.w01(),t.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var e,i,a,r,n,s,o;this.touchAndMouseEventsRegistered||(this.touchAndMouseEventsRegistered=!0,i=(e=this.controls.chartControls||document).querySelector(".stx-zoom-in"),a=e.querySelector(".stx-zoom-out"),r=this.chart.container,n=this,s=function(e,t,i){n.addDomEventListener(r,e,(function(e){if(n.mainSeriesRenderer&&n.mainSeriesRenderer.nonInteractive)return;t(e)}),i)},t.touchDevice?t.isSurface?("p","ointerdo","wn","mo","u","se","up",s("mousemove",(function(e){R.e01(),n.msMouseMoveProxy(e)})),s("mouseenter",(function(e){R.e01(),n.msMouseMoveProxy(e)})),s("mousedown",(function(e){n.msMouseDownProxy(e)})),s("mouseup",(function(e){n.msMouseUpProxy(e)})),s("pointerdown",(function(e){return R.e01(),n.startProxy(e)})),s("pointermove",(function(e){R.e01(),n.moveProxy(e)})),s("pointerenter",(function(e){return R.w01(),n.moveProxy(e)})),s("pointerup",(function(e){return n.endProxy(e)}))):("touch","mov","e",t.isMobile||(s("mousemove",(function(e){n.iosMouseMoveProxy(e)})),s("mouseenter",(function(e){R.w01(),n.iosMouseMoveProxy(e)})),s("mousedown",(function(e){R.e01(),n.iosMouseDownProxy(e)})),s("mouseup",(function(e){n.iosMouseUpProxy(e)}))),s("touchstart",(function(e){R.w01(),n.touchstart(e)})),s("touchmove",(function(e){n.touchmove(e)})),s("touchend",(function(e){n.touchend(e)})),s("pointerdown",(function(e){n.touchPointerType=e.pointerType})),i&&("onMous","eOver",i.removeAttribute("onMouseOver"),i.removeAttribute("onMouseOut")),a&&("onM","o","u","seOver",a.removeAttribute("onMouseOver"),a.removeAttribute("onMouseOut"))):("m","ouse","en","ter","m","ous","emove",s("mousemove",(function(e){R.w01(),n.mousemove(e)})),s("mouseenter",(function(e){R.e01(),n.mousemove(e)})),s("mousedown",(function(e){R.w01(),n.mousedown(e)})),s("mouseup",(function(e){R.w01(),n.mouseup(e)}))),o=t.wheelEvent,this.captureMouseWheelEvents&&s(o,(function(e){R.w01(),n.mouseWheel(e)}),{passive:!1}))},t.ChartEngine.prototype.mousedown=function(e){var i,a,r,n,s,o,l,h,c,u,d;if(i="m",i+="o",i+="use",i+="down",!this.runPrepend("mousedown",arguments)&&(this.grabOverrideClick=!1,this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!(this.editingAnnotation||e.button&&e.button>=2)))if(a=this.container.getBoundingClientRect(),this.top=a.top,this.left=a.left,this.right=this.left+this.width,this.bottom=this.top+this.height,e.clientX>=this.left&&e.clientX<=this.right&&e.clientY>=this.top&&e.clientY<=this.bottom){if(this.insideChart=!0,this.currentPanel){this.manageTouchAndMouse&&e&&e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,""===this.openDialog&&this.registerPointerEvent({x:e.clientX,y:e.clientY,time:this.mouseTimer},"down"),r=this.currentPanel.chart;for(var p=0;p<this.drawingObjects.length;p++)if((n=this.drawingObjects[p]).highlighted&&!n.permanent){if(this.cloneDrawing)return(s=new(0,t.ChartEngine.drawingTools[n.name])).reconstruct(this,n.serialize()),this.drawingObjects.push(s),this.activateRepositioning(s),void(s.repositioner=n.repositioner);if(o=this.currentVectorParameters.vectorType,!(t.Drawing&&o&&t.Drawing[o]&&(new t.Drawing[o]).dragToDraw))return void this.activateRepositioning(n)}if((l=this.mainSeriesRenderer||{}).params&&l.params.baseline&&!1!==r.baseline.userLevel&&this.controls.baselineHandle&&(h=this.valueFromPixel(this.cy-5,this.currentPanel),c=this.valueFromPixel(this.cy+5,this.currentPanel),u=this.chart.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10),r.baseline.actualLevel<Math.max(h,c)&&r.baseline.actualLevel>Math.min(h,c)&&this.cx>u))return d="st",d+="x-gr",d+="ab",this.repositioningBaseline={lastDraw:Date.now()},void this.controls.baselineHandle.classList.add(d);if(this.controls.anchorHandles){var m=this.controls.anchorHandles;for(var g in m){var f=m[g],y=f.handle,v=f.sd,x=f.highlighted;if(x)return this.repositioningAnchorSelector={sd:v},void y.classList.add("stx-grab")}}var b;if(!(this.drawingClick&&(this.currentPanel.subholder===e.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)))this.grabbingScreen=!0,r.spanLock=!1,this.yToleranceBroken=!1,this.grabStartX=e.clientX,this.grabStartY=e.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=r.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout((b=this,function(){R.w01(),b.grabbingHand()}),100),this.swipeStart&&this.swipeStart(r),(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer(),this.runAppend(i,arguments)}}else this.insideChart=!1},t.ChartEngine.prototype.mousemove=function(e){var i;i=e,t.ChartEngine.crosshairX=i.clientX,t.ChartEngine.crosshairY=i.clientY,i.type.toLowerCase().indexOf("enter")>-1?this.positionCrosshairsAtPointer():this.runPrepend("mousemove",arguments)||this.displayInitialized&&""===this.openDialog&&(R.e01(),this.grabbingScreen&&1!==i.buttons&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(i.clientX,i.clientY),this.runAppend("mousemove",arguments))},t.ChartEngine.prototype.mouseup=function(e){var i,a,r,n,s,o,l,h,c,u,d;if(i="stx-dra",i+="g-c",i+="hart",a="mo",a+="useup",!this.runPrepend(a,arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250)return this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),void this.draw();this.activateRepositioning(null)}if(this.repositioningBaseline)return"m","o","u","ntain",this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove("stx-grab"),(r=this.mainSeriesRenderer||{}).params&&r.params.baseline&&r.params.type,void this.draw();if(this.repositioningAnchorSelector)return t.Studies.repositionAnchor(this,this.repositioningAnchorSelector.sd),this.repositioningAnchorSelector=null,Object.values(this.controls.anchorHandles).forEach((function(e){var t=e.handle;return R.w01(),t.classList.remove("stx-grab")})),void this.findHighlights();if(n=this.userPointerDown,this.userPointerDown=!1,this.displayInitialized)if(s=this.backOutY(e.clientY),o=this.backOutX(e.clientX),l=e.which&&e.which>=2||e.button&&e.button>=2,""!==this.openDialog||l||this.registerPointerEvent({x:e.clientX,y:e.clientY,time:Date.now()},"up"),h=this.isDoubleClick(),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(o,s),this.currentPanel=this.whichPanel(s)),c=this.currentPanel,this.grabStartYAxis=null,R.e01(),this.displayDragOK(),""===this.openDialog){if(this.grabOverrideClick)return u="stx-drag-",u+="chart",this.overXAxis||this.overYAxis||!this.swipeRelease||this.swipeRelease(),this.container.classList.remove(u),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),void this.updateChartAccessories();if(this.insideChart&&this.container.classList.remove(i),!t.ChartEngine.resizingPanel)return l||e.ctrlKey?this.anyHighlighted&&!0!==this.bypassRightClick?(this.rightClickHighlighted(),e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),e.stopPropagation(),!1):(this.dispatch("rightClick",{stx:this,panel:c,x:o,y:s}),!0):void(e.clientX<this.left||e.clientX>this.right||e.clientY<this.top||e.clientY>this.bottom||(d=c&&c.subholder===e.target,h&&(d||this.overYAxis||this.overXAxis)?this.doubleClick({button:e.button,x:o,y:s}):(n&&d&&(this.longHoldTookEffect&&!this.activeDrawing||this.drawingClick(c,o,s),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:o,cy:s,panel:c})),this.longHoldTookEffect||this.activeDrawing||this.dispatch("tap",{stx:this,panel:c,x:o,y:s})),this.runAppend("mouseup",arguments)));this.releaseHandle()}else this.insideChart&&this.container.classList.remove("stx-drag-chart")}},t.ChartEngine.prototype.registerPointerEvent=function(e,t){this.pointerEvents[t].length>1&&this.pointerEvents[t].pop(),this.pointerEvents[t].unshift(e)},t.ChartEngine.prototype.resetPointerEvent=function(e){R.Q4q(4),this.pointerEvents[e].splice(R.q4q(0,"0"))},t.ChartEngine.prototype.isDoubleClick=function(e){var t,i;t=e?1200:400;var a=this.pointerEvents,r=a.up,n=a.down;return this.cancelTouchSingleClick=!1,!(r.length<2||n.length<2)&&((i=n[0].time-r[1].time<this.doubleClickTime&&Math.pow(r[1].x-r[0].x,2)+Math.pow(r[1].y-r[0].y,2)<=t&&r[1].time-n[1].time<this.longHoldTime&&r[0].time-n[0].time<this.longHoldTime)&&("d","o","w","n",this.resetPointerEvent("up"),this.resetPointerEvent("down"),this.cancelTouchSingleClick=!0),R.e01(),i)},t.ChartEngine.prototype.doubleClick=function(e,i,a){var r,n;if(r="doubl",r+="eCl",r+="ick",n="double",n+="Click",!this.runPrepend(n,arguments)&&!this.editingAnnotation)return t.ChartEngine.drawingLine?this.undo():void(this.activeDrawing||(this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:a,panel:this.currentPanel})||this.dispatch(r,{stx:this,button:e,x:i,y:a}),this.runAppend("doubleClick",arguments)))},t.ChartEngine.prototype.handleMouseOut=function(e){var i,a,r,n,s,o;if(e=e||window.event,R.e01(),!t.withinElement(this.chart.container,e.pageX,e.pageY)){if(i="handl",i+="eMouseO",i+="ut",this.runPrepend("handleMouseOut",arguments))return;if(this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown){this.userPointerDown=!1,a=1920347701,r=1061372916,n=2;for(var l=1;R.d6D(l.toString(),l.toString().length,19421)!==a;l++)this.drawingLine=!1,s=this.backOutY(e.pageY),o=this.backOutX(e.pageX),n+=2;R.d6D(n.toString(),n.toString().length,3156)!==r&&(this.drawingLine=!0,s=this.backOutY(e.pageY),o=this.backOutX(e.pageX)),this.drawingClick(this.currentPanel,o,s)}this.repositioningAnchorSelector&&(this.repositioningAnchorSelector=null),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),this.runAppend(i,arguments)}},t.ChartEngine.prototype.startLongHoldTimer=function(){var e,t,i;if(e=this,this.cancelLongHold=!1,this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),R.e01(),t=function(){e.cancelLongHold||(R.w01(),e.longHoldTookEffect=!0,e.dispatch("longhold",{stx:e,panel:e.currentPanel,x:e.cx,y:e.cy}),e.displayDragOK())},this.longHoldTime){1994721605,-23153924,i=2;for(var a=1;1994721605!==R.d6D(a.toString(),a.toString().length,152);a++)this.longHoldTimeout=setTimeout(t,this.longHoldTime),i+=2;-23153924!==R.d6D(i.toString(),i.toString().length,27970)&&(this.longHoldTimeout=setTimeout(t,this.longHoldTime)),this.longHoldTimeout=setTimeout(t,this.longHoldTime)}else 0===this.longHoldTime&&t()},t.ChartEngine.prototype.grabHandle=function(e){var i;R.w01(),i="s",i+="tx-",i+="grab",this.runPrepend("grabHandle",arguments)||e&&(t.ChartEngine.crosshairY=e.top+this.top,t.ChartEngine.resizingPanel=e,e.handle.classList.add(i),this.runAppend("grabHandle",arguments))},t.ChartEngine.prototype.grabbingHand=function(){this.allowScroll&&this.grabbingScreen&&(t.touchDevice||this.container.classList.add("stx-drag-chart"))},t.ChartEngine.prototype.releaseHandle=function(){if(this.runPrepend("releaseHandle",arguments))return!0;t.clearCanvas(this.chart.tempCanvas,this),this.resizePanels(),t.ChartEngine.resizingPanel&&t.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),t.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments)},t.ChartEngine.prototype.findHighlights=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,j,z,V,Q,B,U,W,Y;if(a=this.preferences[e?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=e,r=this.cy,n=this.cx,this.anyHighlighted=!1,this.currentPanel){if(this.activeDrawing&&(i=!0),s=!1,o=null,l=i?{}:{forceShow:!0,type:"drawing"},h=this.currentPanel.chart,c={x0:this.tickFromPixel(n-a,h),x1:this.tickFromPixel(n+a,h),y0:this.valueFromPixel(r-a,this.currentPanel),y1:this.valueFromPixel(r+a,this.currentPanel),cx0:n-a,cx1:n+a,cy0:r-a,cy1:r+a,r:a},this.repositioningDrawing&&c.x1-c.x0<2?(c.x1++,c.x0--):c.x1==c.x0&&(c.x0-=.5,c.x1+=.5),u=this.markerHelper&&this.markerHelper.chartMap[h.name]&&this.markerHelper.chartMap[h.name].markers,!h.hideDrawings)for(var X=this.drawingObjects.length-1;X>=0;X--)d=this.drawingObjects[X],this.panels[d.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=d||(p=d.highlighted,m=d.panelName==this.currentPanel.name,d.repositioner=d.intersected(this.crosshairTick,this.crosshairValue,c),m=m&&d.repositioner,!i&&m?(p?(o=d,this.anyHighlighted&&this.singleDrawingHighlight&&(d.highlighted=!1),d.highlighted&&d.highlighted!=p&&(s=!0)):p!=d.highlight(!0)&&(o||(o=d),this.anyHighlighted&&this.singleDrawingHighlight&&(d.highlighted=!1),s=!0),this.anyHighlighted=!0):p!=d.highlight(!1)&&(s=!0),d.highlighted&&(l.noDelete=d.permanent,l.noEdit=!this.callbackListeners.drawingEdit.length)));for(g in this.layout.studies)(f=this.layout.studies[g]).prev=f.highlight,f.highlight=this.yaxisMatches(f,this.grabStartYAxis);for(g in h.seriesRenderers){(b=h.seriesRenderers[g]).params.highlight=this.yaxisMatches(b,this.grabStartYAxis);for(var Z=0;Z<b.seriesParams.length;Z++)(x=b.seriesParams[Z]).prev=x.highlight,x.highlight=b.params.highlight}for(y=0;u&&y<u.length;y++)(v=u[y]).params.box&&(this.activeMarker=null,v.prev=u[y].highlight,v.highlight=!1);if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!i&&!this.anyHighlighted&&this.controls.anchorHandles)for(var G in this.controls.anchorHandles){var K=S=this.controls.anchorHandles[G],J=K.handle,$=K.sd;if(C=this.resolveX(n),k=this.resolveY(r),J){var ee=J.getBoundingClientRect(),te=ee.left,ie=ee.top,ae=ee.right,re=ee.bottom;if(t.boxIntersects(te,ie,ae,re,C,k,C,k)){"anchorHan","dle",S.highlighted=!0,this.anyHighlighted=!0,s=!0,l={message:$.name,type:"anchorHandle"};continue}!0===S.highlighted&&(S.highlighted=!1,s=!0)}}if(!i&&!this.anyHighlighted&&h.dataSegment&&(w=this.barFromPixel(n))>=0&&w<h.dataSegment.length){for(g in this.overlays)if("func","tion",(f=this.overlays[g]).panel==this.currentPanel.name&&!1!==f.study.isHighlighted)if("function"!=H(f.study.isHighlighted)){if(h.dataSegment[w]){for(var ne in f.outputMap)if(le.call(this,w,c,ne,f.getYAxis(this))){f.name!=f.panel&&(this.anyHighlighted=!0),f.highlight=ne;break}if(f.highlight){this.highlightedDataSetField=ne;break}}}else f.study.isHighlighted(this,n,r)&&(f.highlight=!0,this.anyHighlighted=!0);for(g in h.seriesRenderers){if(this.highlightedDataSetField)break;if(T=(A=h.seriesRenderers[g]).params.panel,A!=this.mainSeriesRenderer&&(A.params.highlightable||this.currentVectorParameters.vectorType)&&T==this.currentPanel.name)for(y=0;y<A.seriesParams.length;y++){if("-","-",">",(M=(x=A.seriesParams[y]).field)||A.highLowBars||(M=this.defaultPlotField||"Close"),x.symbol&&x.subField&&(M+="--\x3e"+x.subField),!(P=A.params.yAxis)&&T&&(P=this.panels[T].yAxis),A.params.step&&w>0){if(!A.caches[x.id])continue;if(!(D=A.caches[x.id][w])&&0!==D)continue;R.Q4q(4),(((F=A.caches[x.id][R.q4q(1,w)])||0===F)&&r+a>=D&&r-a<=F||r-a<=D&&r+a>=F)&&(x.highlight=!0,this.anyHighlighted=!0)}else le.call(this,w,c,M,P,A,x.id)&&(x.highlight=!0,this.anyHighlighted=!0);if(x.highlight){this.highlightedDataSetField=M;break}}}}for(g in E=this.preferences.dragging,this.overlays)(f=this.overlays[g]).highlight&&(this.anyHighlighted=!0,q=f.inputs.display||f.name,l={message:q=this.translateIf(q),noDelete:f.permanent,noEdit:!f.editFunction,type:"study"},o=null,(!0===E||E&&E.study)&&(_=f),L=f.getYAxis(this)),f.prev!=f.highlight&&(s=!0);for(g in h.seriesRenderers){N=(I=h.seriesRenderers[g]).params.yAxis?I.params.yAxis.textStyle:null;for(var se=0;se<I.seriesParams.length;se++)x=I.seriesParams[se],I.params.highlightable&&x.highlight&&("ser","ies","a","u","to",this.anyHighlighted=!0,"auto"==(O=x.color||N)&&(O=this.defaultColor),x.opacity&&1!==x.opacity&&(O=t.hexToRgba(t.colorToHex(O),parseFloat(x.opacity))),l={message:x.display||x.symbol,backgroundColor:O,noDelete:x.permanent,type:"series"},o=null,(!0===E||E&&E.series)&&(_=I,I.params.highlight=!0),L=I.getYAxis(this)),x.prev!=x.highlight&&(s=!0)}for(g in this.plugins)z={},(j=this.plugins[g]).findHighlights&&((z=j.findHighlights(this,e,i)).somethingChanged&&(s=!0),z.anyHighlighted&&(this.anyHighlighted=!0,l=z.stickyArgs||{}));for(var oe in V=this.whichPanel(r),Q=this.whichYAxis(V,n),L||(L=Q),L&&(L.highlight||(s=!0),L.highlight=!0),B=[],this.panels)B=B.concat(this.panels[oe].yaxisLHS).concat(this.panels[oe].yaxisRHS);for(R.w01(),g=0;g<B.length;g++)(L!=B[g]||i)&&(B[g].highlight&&(s=!0),B[g].highlight=!1);for(y=0;u&&y<u.length;y++)(U=(v=u[y]).params.box)&&v.params.panelName===this.currentPanel.name&&(W=t.convertBoxToPixels(this,this.currentPanel.name,c),t.boxIntersects(W.x0,W.y0,W.x1,W.y1,U.x0,U.y0,U.x1,U.y1)&&(this.activeMarker=v,v.highlight=!0,this.markerHelper.highlighted.push(v)),v.prev!=v.highlight&&(s=!0));if(s&&(this.draw(),l.panel=V,this.anyHighlighted&&!this.grabStartYAxis?l.panel=V:l={},this.displaySticky(l),this.clearMeasure(),o&&o.measure()),(!0===E||E&&E.yaxis)&&Q&&!Q.noDraw&&(this.anyHighlight=!0,_=Q),this.anyHighlighted||this.setMeasure(),_&&!V.noDrag){if(this.longHoldTookEffect&&!this.cancelLongHold){if(_.params)for(g in _.params.dependentOf&&((_=h.seriesRenderers[_.params.dependentOf]).params.highlight=!0),h.seriesRenderers)h.seriesRenderers[g].params.dependentOf==_.params.name&&(h.seriesRenderers[g].params.highlight=!0);if(this.highlightedDraggable=_,_.getDependents)for(g in Y=_.getDependents(this,!0),this.overlays)f=this.overlays[g],Y.indexOf(f)>-1&&(f.highlight=!0)}this.container.classList.add("stx-draggable")}else"stx-dra","ggable",this.container.classList.remove("stx-draggable");this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()}function le(e,i,a,r,n,s){var o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,D,A,T,M,P,F=R;if("segme","nt","C","lose",o=this.chart,l=this.currentPanel,r||(r=l.yAxis),h=a.split("--\x3e"),F.Q4q(4),c=h[F.E4q(0,"0")],(u=h[1])||(u="Close"),d=o.dataSegment[w],v=null,x=null,b=null,S=new Array(3),C=n&&n.caches[s],d&&C){for(g=C[w],v=d.tick,(g||0===g)&&(F.Q4q(11),S[F.q4q(694922912,"0")]=1),k=w-1;k>=0;k--)if(C[k]||0===C[k]){f=C[k],F.Q4q(52),x=F.E4q(v,w,k),F.Q4q(1),S[F.E4q("1",1)]=1;break}for(k=w+1;k<o.dataSegment.length;k++)if(C[k]||0===C[k]){y=C[k],F.Q4q(52),b=F.E4q(v,w,k),F.Q4q(7),S[F.E4q(1029272032,"2")]=1;break}}if(null===x&&(p=this.getPreviousBar.call(this,o,a,w))&&(x=p.tick,f=_(p)),null===b&&(m=this.getNextBar.call(this,o,a,w))&&(b=m.tick,y=_(m)),null===x&&null===b)return!1;function _(e){var t;return e?(F.w01(),(t=e[c])&&(t[u]||0===t[u])&&(t=t[u]),n&&n.getBasis&&(t+=n.getBasis(e,c,u)),o.transformFunc&&r==o.yAxis?e.transform&&c in e.transform?((t=e.transform[c])&&(t[u]||0===t[u])&&(t=t[u]),t):o.transformFunc(this,o,t):t):null}return C||(g=_(d),f=_(p),y=_(m),v=d.tick,p&&(x=p.tick),m&&(b=m.tick)),f||0===f||(f=0,x=0),y||0===y||(g||0===g?(y=g,S[2]=S[0]):(y=f,S[2]=S[1]),b=s&&o.series[s].parameters.extendToEndOfDataSet?o.dataSet.length-1:x),g||0===g||(g=y,v=b,S[0]=S[2],0===f&&0===x&&(f=g,x=v,F.P4q(11),S[F.q4q(903149696,"1")]=S[0])),D=this.pixelFromTransformedValue.bind(this),g=(A=this.valueFromPixel.bind(this))(S[0]?g:D(g,l,r),l),f=A(S[1]?f:D(f,l,r),l),y=A(S[2]?y:D(y,l,r),l),T=t.convertBoxToPixels(this,l.name,i),M=t.convertBoxToPixels(this,l.name,{x0:x,y0:f,x1:v,y1:g}),P=t.convertBoxToPixels(this,l.name,{x0:v,y0:g,x1:b,y1:y}),!(!t.boxIntersects(T.x0,T.y0,T.x1,T.y1,M.x0,M.y0,M.x1,M.y1,"segment")&&!t.boxIntersects(T.x0,T.y0,T.x1,T.y1,P.x0,P.y0,P.x1,P.y1,"segment"))}},t.ChartEngine.prototype.rightClickHighlighted=function(){this.runPrepend("rightClickHighlighted",arguments)||(this.deleteHighlighted(!0),R.e01(),this.runAppend("rightClickHighlighted",arguments))},t.ChartEngine.prototype.deleteHighlighted=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;if(!this.runPrepend("deleteHighlighted",arguments)){if(this.cancelTouchSingleClick=!0,t.clearCanvas(this.chart.tempCanvas,this),(a=!1===this.bypassRightClick)||!this.bypassRightClick.drawing)for(var m=this.drawingObjects.length-1;m>=0;m--)(r=this.drawingObjects[m]).highlighted&&(e?this.rightClickDrawing(r,i):r.permanent||(r.abort()||(n=this.exportDrawings(),this.drawingObjects.splice(m,1),this.undoStamp(n,this.exportDrawings())),this.changeOccurred("vector")));if(a||!this.bypassRightClick.study)for(var g in this.overlays)((s=this.overlays[g]).overlay||s.underlay)&&s.highlight&&!s.permanent&&(e||i?this.rightClickOverlay(g,i):this.removeOverlay(g));if(o=this.currentPanel.chart,a||!this.bypassRightClick.series)for(var f in o.seriesRenderers)if((l=o.seriesRenderers[f]).params.highlightable){c=(h=this.panels[l.params.panel])&&h.yAxis.name;for(var y=l.seriesParams.length-1;y>=0;y--)u=l.seriesParams[y],!l.params.highlight&&!u.highlight||u.permanent||(l.removeSeries(u.id),l.seriesParams.length<1&&(this.removeSeriesRenderer(l),l.params.name==c?this.electNewPanelOwner(l.params.panel):(this.checkForEmptyPanel(l.params.panel),(d=this.getYAxisByName(h,l.params.name))&&(d.name=d.studies[0]||d.renderers[1]))))}this.draw(),this.resizeChart(),this.clearMeasure(),(p=this.controls.mSticky)&&(p.style.display="none",p.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},t.ChartEngine.prototype.displayDragOK=function(e){var t,i,a,r,n,s,o,l,h,c,u=R;function d(e){var t,i;t=this.translateIf(e.querySelector(".field").getAttribute("text")),(i=this.whichYAxis(this.whichPanel(this.cy),this.cx,this.cy))&&"all"==i.dropzone&&(t+="--\x3e"+this.translateIf(i.name)),e.querySelector(".field").innerHTML=t}if(t=this.controls.dragOk){if(e||this.findHighlights(this.highlightViaTap),a=(i=this.highlightedDraggable)&&i.undraggable&&i.undraggable(this),r=this.cx,n=this.cy,!e){if(i&&!a&&this.longHoldTookEffect&&!this.cancelLongHold)"s","tx-d","rag-series","s","tx","-drag-chart","inl","ine-","blo","ck",s=i.inputs&&i.inputs.display||i.params&&(i.params.display||i.params.name)||i.name,t.querySelector(".field").setAttribute("text",s),d.call(this,t),t.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace("stx-drag-chart","stx-drag-series");else for(var p in"stx","-d","rag-axis",t.style.display="none",this.draw(),this.container.classList.remove("stx-drag-series"),this.container.classList.remove("stx-drag-axis"),this.panels){for("bo","t","to","m","t","op","rig","h","t",(o=this.panels[p].subholder.classList).remove("dropzone"),o.remove("all"),o.remove("left"),o.remove("right"),o.remove("top"),o.remove("bottom"),l=0;l<this.panels[p].yaxisLHS.length;l++)this.panels[p].yaxisLHS[l].dropzone=null;for(l=0;l<this.panels[p].yaxisRHS.length;l++)this.panels[p].yaxisRHS[l].dropzone=null}this.draw()}i&&("p","x",h=n+t.offsetHeight,c=Math.max(0,r-t.offsetWidth),u.Q4q(0),t.style.top=u.q4q("px",h),u.P4q(0),t.style.left=u.E4q("px",c),d.call(this,t))}},t.ChartEngine.prototype.displayDrawOK=function(){var e,i,a,r,n=R;n.w01(),(e=this.controls.drawOk)&&t.Drawing&&("n","o","ne",(i=t.Drawing[this.currentVectorParameters.vectorType])&&(i=new i),this.highlightedDataSetField&&i&&i.getYValue?(e.style.display="inline-block",a=this.cy+e.offsetHeight,r=this.cx-e.offsetWidth,n.P4q(0),e.style.top=n.E4q("px",a),n.Q4q(0),e.style.left=n.E4q("px",r),e.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField)):e.style.display="none")},t.ChartEngine.prototype.mouseWheel=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=R;if(i="m",i+="ouseWh",i+="eel",a="Mo",a+="zMousePixelScro",a+="ll",r="unde",r+="fi",r+="ned",n="ve",n+="r",n+="tical",!this.runPrepend("mouseWheel",arguments)&&(e.preventDefault&&e.preventDefault(),s=e.deltaX,o=e.deltaY,Math.abs(o)>Math.abs(s)?s=0:o=0,this.lastMouseWheelEvent=Date.now(),0!==Math.abs(s)||0!==Math.abs(o))){if(this.allowSideswipe&&0!==s)return this.lastMove="horizontal",(l=s)>50&&(l=50),l<-50&&(l=-50),this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=t.ChartEngine.crosshairX,this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mousemoveinner(t.ChartEngine.crosshairX-l,t.ChartEngine.crosshairY),this.updateChartAccessories(),void(this.grabbingScreen=!1);if(this.lastMove=n,this.allowZoom&&this.displayInitialized){if(o||(h="m",h+="ou",h+="sewh",h+="eel",t.wheelEvent==h?(o=-1/40*e.wheelDelta,e.wheelDeltaX&&(s=-1/40*e.wheelDeltaX)):o=e.detail),H(e.deltaMode)==r&&(e.deltaMode=e.type==a?0:1),c=-o,1==e.deltaMode&&(c*=33),u=null,d=null,this.mouseWheelAcceleration&&(p=Math.max(Math.pow(Math.abs(c),.3),1),y.P4q(53),u=y.q4q("1",0,1,"0.1",p),y.Q4q(28),d=y.E4q(p,1,.2)),this.zoomInitiatedByMouseWheel=!0,c>0)this.reverseMouseWheel?this.zoomOut(null,d):this.zoomIn(null,u);else if(c<0){m=1888390790,g=74894168,f=2;for(var v=1;y.f6D(v.toString(),v.toString().length,77036)!==m;v++)this.reverseMouseWheel?this.zoomIn(null,u):this.zoomOut(null,d),f+=2;y.d6D(f.toString(),f.toString().length,73366)!==g&&(this.reverseMouseWheel?this.zoomIn(1,u):this.zoomOut(1,d))}if(!this.runAppend(i,arguments))return!1}}},t.ChartEngine.handleContextMenu=function(e){for(var i,a=0;a<t.ChartEngine.registeredContainers.length;a++)if((i=t.ChartEngine.registeredContainers[a].stx)&&i.anyHighlighted)return e.preventDefault&&e.preventDefault(),!1},"undefined"!=typeof document&&document.addEventListener("contextmenu",t.ChartEngine.handleContextMenu),t.ChartEngine.htmlControls={annotationSave:'<span class="stx-btn stx_annotation_save" style="display: none;">save</span>',annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;">cancel</span>',mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span> <span class="mStickyRightClick"><span class="overlayEdit stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="overlayTrashCan stx-btn" style="display:none"><span>&nbsp;</span></span> <span class="mouseDeleteInstructions"><span>(</span><span class="mouseDeleteText">right-click to delete</span><span class="mouseManageText">right-click to manage</span><span class="dragAnchorText">drag to change anchor time</span><span>)</span></span></span><span class="stickyLongPressText">(long-press to drag)</span></div>',drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:'<div class="stx_drag_ok"><div class="icon"></div><div class="field"></div></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none; bottom: 22px;"><div class="chartSize"><span class="stx-zoom-out"></span><span class="stx-zoom-in"></span></div></div>',home:'<div class="stx_jump_today" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},t.ChartEngine.prototype.registerChartControl=function(e,i,a){var r,n,s,o=R;if((r=this.controls)&&r.chartControls&&!r.chartControls.querySelector("."+e))return n=null,(s=r.chartControls.querySelector(".stx-zoom-in"))?("s","p","a","n",n=document.createElement("span"),o.Q4q(18),n.innerHTML=o.q4q("</span>",'<span class="stx-tooltip">',i),o.Q4q(0),n.className=o.q4q(e,"stx-chart-control-button "),s.parentNode.appendChild(n),a&&t.safeClickTouch(n,a),t.touchDevice||this.makeModal(n),n):void 0},t.ChartEngine.prototype.zoomOut=function(e,t){var i,a,r,n;function s(e){return function(t){var a;if(R.w01(),i.zoomSet(t,e),i.animations.zoom.hasCompleted){if(a="la",a+="yo",a+="ut",i.runAppend("zoomOut",arguments))return;i.changeOccurred(a),i.continuousZoom&&i.continuousZoom.execute(!0)}}}if(!this.runPrepend("zoomOut",arguments))for(var o in this.preferences.zoomOutSpeed?t=this.preferences.zoomOutSpeed:t||(R.P4q(5),t=R.E4q(1,.7)),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,i=this,this.charts)r=(a=this.charts[o]).width*t/this.layout.candleWidth,!1===a.allowScrollFuture&&!1===a.allowScrollPast&&r>a.dataSet.length&&(r=a.dataSet.length),n=this.chart.width/r,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(s(a),this.layout.candleWidth,n)},t.ChartEngine.prototype.zoomIn=function(e,t){var i,a,r,n,s;if(i="zoom",i+="In",!this.runPrepend(i,arguments))for(var o in this.preferences.zoomInSpeed?t=this.preferences.zoomInSpeed:t||(t=.7),e&&e.preventDefault&&e.preventDefault(),this.cancelTouchSingleClick=!0,a=this,this.charts)n=(r=this.charts[o]).width*t/this.layout.candleWidth,r.maxTicks-n<1&&(n=r.maxTicks-1),n<this.minimumZoomTicks&&(n=this.minimumZoomTicks),s=this.chart.width/n,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(l(r),this.layout.candleWidth,s);function l(e){return function(t){var i,r,n,s,o=R;if(a.zoomSet(t,e),a.animations.zoom.hasCompleted){if(i="lay",i+="out",a.runAppend("zoomIn",arguments))return;a.changeOccurred(i),o.P4q(16),r=-o.q4q("2144140328",2147483647),o.Q4q(11),n=o.q4q(270727328,"1797805793"),s=2;for(var l=1;o.d6D(l.toString(),l.toString().length,30673)!==r;l++)a.continuousZoom&&a.continuousZoom.execute(),s+=2;o.d6D(s.toString(),s.toString().length,37207)!==n&&a.continuousZoom&&a.continuousZoom.execute()}}}},t.ChartEngine.prototype.createCrosshairs=function(){var e,t,i,a;e="create",e+="Crosshairs",t="cre",t+="ateCross",t+="hairs",this.runPrepend(t,arguments)||!this.manageTouchAndMouse||this.mainSeriesRenderer&&this.mainSeriesRenderer.nonInteractive||(i=this.controls.crossX,a=this.controls.crossY,i&&(i.onmousedown||(i.onmousedown=function(e){return e.preventDefault&&e.preventDefault(),R.e01(),!1})),a&&(a.onmousedown||(a.onmousedown=function(e){return e.preventDefault&&e.preventDefault(),R.e01(),!1})),this.runAppend(e,arguments))},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){i||console.error("interaction feature requires activating movement feature."),i=!0}},p=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":H(_CIQ))?_CIQ:e.CIQ).ChartEngine.prototype.makeMarkerHelper=function(){this.markerHelper={chartMap:{},classMap:{},domMarkers:[],highlighted:[]}},t.ChartEngine.prototype.addToHolder=function(e){var t,i,a,r;(t=this.panels[e.params.panelName])&&(this.markerHelper||this.makeMarkerHelper(),i=e.params,a=e.node,(r=e.stxNodeCreator)&&r.prepareForHolder&&(a=r.prepareForHolder(e)),i.chartContainer?this.container.appendChild(e.node):i.includeAxis?t.holder.appendChild(e.node):t.subholder.appendChild(a),e.chart=t.chart,r&&r.addToHolder&&r.addToHolder(e))},t.ChartEngine.prototype.getMarkerArray=function(e,t){var i,a;for(var r in i=[],R.w01(),this.markers)for(var n=0;n<this.markers[r].length;n++)"a","l","l",a=this.markers[r][n],"panelName"==e?a.params.panelName==t&&i.push(a):"label"==e?r==t&&i.push(a):"all"==e&&i.push(a);return i},t.ChartEngine.prototype.removeFromHolder=function(e){var t,i,a,r,n,s;if(R.w01(),(t=this.panels[e.params.panelName])&&(e.node.parentNode==t.holder?t.holder.removeChild(e.node):e.node.parentNode==t.subholder?t.subholder.removeChild(e.node):e.node.parentNode==this.container&&this.container.removeChild(e.node)),i=this.markers[e.params.label]){for(a=0;a<i.length;a++)if(i[a]===e){i.splice(a,1);break}if(r=this.markerHelper.chartMap[e.chart.name])for(a=0;a<r.markers.length;a++)if(r.markers[a]===e){r.markers.splice(a,1);break}if((n=this.markerHelper.classMap[e.className])&&(s=n[e.params.panelName]))for(a=0;a<s.length;a++)if(s[a]===e){s.splice(a,1);break}}},t.ChartEngine.prototype.moveMarkers=function(e,t){var i,a;i=this.getMarkerArray("panelName",e);for(var r=0;r<i.length;r++)i[r].params.panelName=t;for(var n in this.markerHelper.classMap)(a=this.markerHelper.classMap[n][e])&&(this.markerHelper.classMap[n][t]=a,delete this.markerHelper.classMap[n][e])},R.e01(),t.ChartEngine.prototype.establishMarkerTicks=function(){var e,t;for(var i in this.markerHelper||this.makeMarkerHelper(),e=this.markerHelper.chartMap)if((t=e[i]).dataSetLength!=this.charts[i].dataSet.length)for(var a=0;a<t.markers.length;a++)this.setMarkerTick(t.markers[a])},t.ChartEngine.prototype.futureTickIfDisplayed=function(e){var t,i,a,r,n,s,o,l,h;if(!((t=e.chart).dataSet.length<1||(i=t.xaxis[t.xaxis.length-1].DT,i=new Date(i.getTime()-6e4*this.timeZoneOffset),e.params.x>i))){a=t.maxTicks-t.dataSegment.length,r=t.dataSet.length+a,o=new Date(+t.dataSet[t.dataSet.length-1].DT),R.w01(),l=this.standardMarketIterator(o,null,t),h=e.params.x.getTime();for(var c=t.dataSet.length;c<r;c++){if(n=o.getTime(),(s=(o=l.next()).getTime())==h)return void(e.tick=c);if(s>h&&n<h)return R.P4q(4),void(e.tick=Math.max(R.E4q(1,c),0))}}},t.ChartEngine.prototype.setMarkerTick=function(e){var t,i,a,r,n,s=R;if(t=e.chart,"master"==e.params.xPositioner&&e.params.x)e.tick=Math.floor(e.params.x/this.layout.periodicity);else if("date"==e.params.xPositioner&&e.params.x){r=e.params.x.getTime();for(var o=0;o<t.dataSet.length;o++){if(i=a=t.dataSet[o].DT.getTime(),o>0&&(i=t.dataSet[o-1].DT.getTime()),a==r)return void(e.tick=o);if(a>r&&i<r)return s.P4q(4),void(e.tick=Math.max(s.E4q(1,o),0));if(r<a)return void(e.tick=null)}if(t.dataSet.length<1)return;-1934010095,-1547829597,n=2;for(var l=1;-1934010095!==s.f6D(l.toString(),l.toString().length,44765);l++)new Date(+t.dataSet[o-1].DT).getTime()<r&&(e.params.future=!0),e.tick=null,n+=2;-1547829597!==s.f6D(n.toString(),n.toString().length,4900)&&(new Date(!t.dataSet[o/2].DT).getTime()<=r&&(e.params.future=!1),s.P4q(17),e.tick=s.q4q(0,"1"))}},t.ChartEngine.prototype.positionMarkers=function(){var e,t,i,a,r,n,s;function o(){var t,i,a,r;if(!e.runPrepend("positionMarkers",arguments)){for(var n in e.markerTimeout=null,e.markerHelper.classMap)for(var s in e.markerHelper.classMap[n])t=e.markerHelper.classMap[n][s],i=e.panels[s],t.length&&((a={stx:e,arr:t,panel:i}).firstTick=i.chart.dataSet.length-i.chart.scroll,a.lastTick=a.firstTick+i.chart.dataSegment.length,(r=t[0].constructor.placementFunction)?r(a):e.defaultMarkerPlacement(a));R.e01(),e.runAppend("positionMarkers",arguments)}}if(e=this,t=this.chart,e.markerHelper){this.markerDelay||0===this.markerDelay?this.markerTimeout||(this.markerTimeout=setTimeout(o,this.markerDelay)):o(),i=this.getMarkerArray("all");for(var l=0;l<i.length;l++)"ti","c","k",r=(a=i[l]).stxNodeCreator,n=this.getFirstLastDataRecord(t.dataSegment,"tick"),s=this.getFirstLastDataRecord(t.dataSegment,"tick",!0),n&&s&&(n.tick<=a.tick&&a.tick<=s.tick?r&&r.drawMarker&&r.drawMarker(a):a.attached&&r.expand&&(r.expand.style.visibility="hidden"))}},t.Marker=t.Marker||function(e){var i,a,r,n;this.params={xPositioner:"date",yPositioner:"value",panelName:"chart",permanent:!1,label:"generic",includeAxis:!1},t.extend(this.params,e),this.params.node||(this.params.node=document.createElement("DIV")),(i=this.params.stx)?(this.className||(this.className="CIQ.Marker"),t.derivedFrom(this.params.node,t.Marker.NodeCreator)?(this.stxNodeCreator=this.params.node,this.node=this.stxNodeCreator.node):this.node=this.params.node,i.markerHelper||i.makeMarkerHelper(),a=this.params.label,i.markers[a]||(i.markers[a]=[]),i.markers[a].push(this),r=i.panels[this.params.panelName],this.chart=r.chart,i.markerHelper.chartMap[this.chart.name]||(i.markerHelper.chartMap[this.chart.name]={dataSetLength:0,markers:[]}),i.markerHelper.chartMap[this.chart.name].markers.push(this),(n=i.markerHelper.classMap[this.className])||(n=i.markerHelper.classMap[this.className]={}),n[this.params.panelName]||(n[this.params.panelName]=[]),n[this.params.panelName].push(this),this.stxNodeCreator&&this.stxNodeCreator.deferAttach||i.addToHolder(this),i.setMarkerTick(this),this.stxNodeCreator&&this.stxNodeCreator.drawMarker&&this.stxNodeCreator.drawMarker(this)):console.log("Marker created without specifying stx")},t.Marker.prototype.remove=function(){R.w01(),this.params.stx.removeFromHolder(this)},t.Marker.prototype.click=function(e){var t;"number"==typeof arguments[0]&&(e={cx:arguments[0],cy:arguments[1],panel:arguments[3]});var i=e,a=i.cx,r=i.cy,n=i.panel;this.params.stx&&(t=this.params.node).click&&t.click(a,r,this,n)},t.Marker.prototype.doubleClick=function(e){e.cx,e.cy,e.panel;return R.e01(),!1},t.Marker.prototype.render=function(){var e,t;e=[this],t={stx:this.params.stx,arr:e,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(t)},t.Marker.removeByLabel=function(e,t){var i,a,r,n,s=R;i=e.getMarkerArray("label",t);for(var o=0;o<i.length;o++)a=i[o],e.removeFromHolder(a),a.stxNodeCreator&&a.stxNodeCreator.remove&&a.stxNodeCreator.remove(a);s.Q4q(7),r=-s.q4q(1929462144,"1289278182"),s.e01(),n=2;for(var l=1;s.f6D(l.toString(),l.toString().length,61441)!==r;l++)e.draw(),n+=2;-142641626!==s.d6D(n.toString(),n.toString().length,34061)&&e.draw()},t.Marker.positionContentVerticalAndHorizontal=function(e){var t,i,a,r,n,s,o,l,h,c,u,d,p=R;if(p.w01(),t=e.querySelectorAll(".stx-marker-expand")[0]){if(i=t.offsetWidth,a=t.offsetHeight,!i||!a)return;(r=t.style).left=r.right="",r.bottom=r.top="",s=(n=getComputedStyle(t)).left,o=n.bottom,l=e.offsetLeft+parseInt(s,10),p.Q4q(4),h=parseInt(o,p.q4q(0,"10")),c=e.offsetTop-(h+t.offsetHeight-e.offsetHeight),u=e.parentNode.offsetWidth,d=e.parentNode.offsetHeight,l+i>u&&("aut","o",r.right=s,r.left="auto"),e.offsetTop<=d?c>d-a&&("au","to",r.top=d-e.offsetTop-a+"px",r.bottom="auto"):("p","x",p.P4q(0),r.top=p.q4q("px",d)),e.offsetTop+e.offsetHeight>=0?c<0&&("p","x",r.top=-e.offsetTop+"px",r.bottom="auto"):("0","p","x",r.bottom="0px")}},t.ChartEngine.prototype.getBarBounds=function(e){var t,i,a,r;return R.e01(),this.layout.chartType,t="pandf"==this.layout.aggregationType?{high:Math.max(e.pfOpen,e.pfClose),low:Math.min(e.pfOpen,e.pfClose)}:{high:e.High,low:e.Low},e.markerHigh&&(t.high=e.markerHigh),e.markerLow&&(t.low=e.markerLow),void 0===e.Open&&(i=e.Close),void 0===e.High&&(a=Math.max(e.Open||i,e.Close)),void 0===e.Low&&(r=Math.min(e.Open||i,e.Close)),t.high||0===t.high||(t.high=a),t.low||0===t.low||(t.low=r),t},t.ChartEngine.prototype.defaultMarkerPlacement=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T;i=e.panel,a=e.yAxis?e.yAxis:e.panel.yAxis,r=i.chart,s=(n=e.stx).chart.highLowBars,(o=r.defaultPlotField)&&!s||(o="Close"),l={};for(var M=0;M<e.arr.length;M++)if("a","u","t","o","c","a","ndle",c=(h=e.arr[M]).params,!h.params.box){if(u=h.node,h.clientWidth||(h.clientWidth=u.clientWidth),h.clientHeight||(h.clientHeight=u.clientHeight),d=null,p=c.xPositioner,m=c.yPositioner,g=h.tick,f=r.dataSet,y=h.clientWidth,"none"!=p){if("bar"==p&&c.x)c.x<r.xaxis.length&&(v=r.xaxis[c.x])&&(d=v.data),u.style.left=Math.round(n.pixelFromBar(c.x,r)-y/2)+1+"px";else{if(!g&&0!==g){if(!(c.future&&r.scroll<r.maxTicks)){u.style.left="-1000px";continue}if(n.futureTickIfDisplayed(h),!(g=h.tick)&&0!==g){"-1","00","0px",u.style.left="-1000px";continue}}if(g<f.length&&(d=f[g]),h.leftpx=Math.round(n.pixelFromTick(g,r)-r.left-y/2),h.rightEdge=h.leftpx+y,u.style.left=h.leftpx+"px",g<e.firstTick&&h.rightEdge<r.left-50)continue}d||(d=f[f.length-1])}else m.indexOf("candle")>-1&&(x=getComputedStyle(u).left)&&(b=n.barFromPixel(parseInt(x,10),r))>=0&&((d=r.xaxis[b].data)||(d=f[f.length-1]));u.style.top="auto",S=c.y,C=u.clientHeight,"none"!=m&&("t","op",w=m+"-"+u.style.left,D=c.chartContainer?n.height:i.yAxis.bottom,A=0,0,void 0===l[w]&&(l[w]=0),T=l[w],l[w]+=C,"value"!=m||!S&&0!==S?"below_candle"!=m&&"under_candle"!=m||!d?"on_candle"==m&&d?(k=d[o],s&&(k=(d.Low+d.High)/2),A=Math.round(D-n.pixelFromPrice(k,i,a)-C/2-T)+"px"):"top"==m?A=Math.round(D-C-T-i.top)+"px":"bottom"==m?A=Math.round(T)+"px":d&&(k=d[o],s&&(k=n.getBarBounds(d)[a.flipped?"low":"high"]),A=Math.round(D-n.pixelFromPrice(k,i,a)+T)+"px"):("hi","gh",k=d[o],s&&(k=n.getBarBounds(d)[a.flipped?"high":"low"]),A=Math.round(D-n.pixelFromPrice(k,i,a)-C-T)+"px"):("p","x",A=Math.round(D-n.pixelFromPrice(S,i,a)-C/2)+"px"),u.style.bottom!=A&&(u.style.bottom=A)),t.Marker.positionContentVerticalAndHorizontal(u)}},t.Marker.NodeCreator=function(){},t.Marker.NodeCreator.toNode=function(){return this.node},t.Marker.Simple=function(e){var i,a,r,n;function s(){t.Marker.positionContentVerticalAndHorizontal(i)}(i=this.node=document.createElement("div")).className="stx-marker",i.classList.add(e.type),e.category&&i.classList.add(e.category),a=t.newChild(i,"div","stx-visual"),t.newChild(i,"div","stx-stem"),"callout"==e.type?("stx-mark","er","-expand","d","iv",n=t.newChild(a,"div","stx-marker-content"),t.newChild(n,"h4",null,e.headline),r=t.newChild(n,"div","stx-marker-expand"),t.newChild(r,"p",null,e.story)):("stx","-marker-expand",r=t.newChild(i,"div","stx-marker-expand"),t.newChild(r,"h4",null,e.headline),t.newChild(r,"p",null,e.story),t.safeClickTouch(r,(function(e){R.e01(),i.classList.toggle("highlight")}))),t.safeClickTouch(a,(function(e){R.w01(),i.classList.toggle("highlight"),setTimeout(s,10)})),this.nodeType="Simple"},t.inheritsFrom(t.Marker.Simple,t.Marker.NodeCreator,!1)},m=function(e){var t,i,a,r,n,s,o,l=R;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,l.P4q(1),a=l.q4q(6e4,60),l.Q4q(1),r=l.q4q(a,24),n=t.Market,t.Market=function(e){var a;if("Marke","t",this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",i.Date){-1219988783,-688281087,a=2;for(var r=1;-1219988783!==l.f6D(r.toString(),r.toString().length,54602);r++)this.tz_lib=i.Date,a+=2;-688281087!==l.d6D(a.toString(),a.toString().length,70795)&&(this.tz_lib=i.Date)}else this.tz_lib=Date;this.market_tz="",l.e01(),this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,void 0!==e&&e&&!t.isEmpty(e)&&(e.market_definition&&(e=e.market_definition),e.rules&&(this.rules=e.rules),e.market_tz&&(this.market_tz=e.market_tz),e.convertOnDaily&&(this.convertOnDaily=e.convertOnDaily),H(e.hour_aligned)&&(this.hour_aligned=e.hour_aligned),void 0!==e.enabled_by_default&&e.enabled_by_default instanceof Array&&(this.enabled_by_default=e.enabled_by_default),this.market_def=e,void 0===this.market_def.name&&(this.market_def.name="no market name specified"),t.Market._createTimeSegments(this),this.getSessionNames())},t.Market.Symbology=function(){},t.Market.Symbology.isForeignSymbol=function(e){return l.w01(),!1},t.Market.Symbology.isFuturesSymbol=function(e){return l.w01(),!1},t.Market.Symbology.isRateSymbol=function(e){return l.w01(),!1},t.Market.Symbology.isForexSymbol=function(e){return!1},t.Market.Symbology.isForexMetal=function(e,t){return l.w01(),!1},t.Market.Symbology.isForexFuturesSymbol=function(e){return!!t.Market.Symbology.isForexSymbol(e)||!!t.Market.Symbology.isFuturesSymbol(e)},t.Market.Symbology.factory=function(e){return l.e01(),null},t.Market.Symbology.encodeTermStructureInstrumentSymbol=function(e,t){l.e01(),console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},n&&t.extend(t.Market,n),t.Market.prototype.sessions=null,t.Market.prototype.getSessionNames=function(){var e,t;return this.rules?this.sessions||(e=[],t=[],this.rules.map((function(i){i.name&&-1===e.indexOf(i.name)&&(e.push(i.name),t.push({name:i.name,enabled:!!i.enabled&&i.enabled}))})),this.sessions=t):this.sessions=[],this.sessions.slice()},t.Market.prototype._find_next_segment=function(e,t){var i,a,r,n;return this.market_def&&this.rules?(i=new Date(+e),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(i)&&(r=this.zseg_match.close_parts.hours,n=this.zseg_match.close_parts.minutes,i.setHours(r),i.setMinutes(n),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})),a.next()):null},t.Market.prototype._find_prev_segment=function(e,t){var i,a,r,n,s;return this.market_def&&this.rules?(i=new Date(+e),l.e01(),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),null===(r=this._wasOpenIntraDay(i))?(l.P4q(4),i=new Date(l.q4q(6e4,i)),r=this._wasOpenIntraDay(i)):(t&&i.getHours()===this.zseg_match.open_parts.hours&&i.getMinutes()===this.zseg_match.open_parts.minutes||!t&&i.getHours()===this.zseg_match.close_parts.hours&&i.getMinutes()===this.zseg_match.close_parts.minutes)&&(i=a.previous()),r?(n=this.zseg_match.open_parts.hours,s=this.zseg_match.open_parts.minutes,i.setHours(n),i.setMinutes(s),i=(a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})).previous(),this.zseg_match.close_parts.hours===n&&this.zseg_match.close_parts.minutes===s?t?a.next():i:this.zseg_match.adjacent_child?i:t?a.next():i):a.previous()):null},t.Market.prototype.disableSession=function(e,t){var i;if("un","defi","ned",i=!1,"undefined"!==H(t)&&t&&(i=!0),e){for(var a=0;a<this.normalHours.length;a++)this.normalHours[a].name===e&&(this.normalHours[a].enabled=i);for(a=0;a<this.extraHours.length;a++)this.extraHours[a].name===e&&(this.extraHours[a].enabled=i)}},t.Market.prototype.enableSession=function(e){l.w01(),this.disableSession(e,"enable_instead")},t.Market.prototype.enableAllAvailableSessions=function(){var e;l.e01(),e=this.getSessionNames();for(var t=0;t<e.length;t++)this.enableSession(e[t].name)},t.Market.prototype.getClose=function(e,t,i,a){var r,n;if(l.e01(),"u","ndef","in","ed",!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),"undefined"!==H(t)){if(this._wasOpenIntraDay(r)&&this.zseg_match.name===t)return r.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.child_;)n=n.child_;for(;!n.enabled;)n=n.parent_;return r.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNextClose=function(e,t,i){var a,r,n;if(!this.market_def)return null;if(!this.rules)return null;for(a=e,l.w01(),e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),this._wasOpenIntraDay(a)||(a=this.newIterator({begin:a,interval:1,inZone:this.market_tz,outZone:this.market_tz}).next()),r=a.getDate(),n=this.zseg_match;n.adjacent_child;)n=n.adjacent_child,r+=1;return a.setDate(r),a.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),a=this._convertFromMarketTZ(a,i)},t.Market.prototype.getNextOpen=function(e,t,i){var a,r,n;if(!this.market_def)return null;if(!this.rules)return null;l.P4q(8),a=-l.E4q("1053279820",671302724),r=2;for(var s=1;1232090432!==l.f6D(s.toString(),s.toString().length,45878);s++)n=e,r+=2;return l.f6D(r.toString(),r.toString().length,64968)!==a&&(n=e),e||(n=new Date,t=null),n=this._convertToMarketTZ(n,t),n=this._find_next_segment(n),this.zseg_match.adjacent_parent?(n=this.getNextOpen(n,this.market_tz,this.market_tz),n=this._convertFromMarketTZ(n,i)):(n.setHours(this.zseg_match.open_parts.hours),n.setMinutes(this.zseg_match.open_parts.minutes),n=this._convertFromMarketTZ(n,i))},t.Market.prototype.getOpen=function(e,t,i,a){var r,n;if(l.w01(),"undef","ined",!this.market_def)return null;if(!this.rules)return null;if(r=e,e||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),"undefined"!==H(t)){if(this._wasOpenIntraDay(r)&&this.zseg_match.name==t)return r.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.parent_;)n=n.parent_;for(;!n.enabled;)n=n.child_;return r.setHours(n.open_parts.hours,n.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},t.Market.prototype.getNormalOpen=function(){l.e01();var e=this.market_def,t=this.rules;return e&&t?e.normal_daily_open?e.normal_daily_open:"FOREX"===e.name?"17:00":t.find((function(e){var t=e.name;return l.w01(),!t||""===t})).open:"00:00"},t.Market.prototype.getNormalClose=function(){var e=this.market_def,t=this.rules;return e&&t?e.normal_daily_close?e.normal_daily_close:"FOREX"===e.name?"17:00":(l.w01(),t.filter((function(e){var t=e.dayofweek,i=e.name;return t&&(!i||""===i)})).pop().close):"24:00"},t.Market.prototype.getPreviousClose=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!1),l.w01(),this.zseg_match.adjacent_child?this.getPreviousClose(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.close_parts.hours),a.setMinutes(this.zseg_match.close_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getPreviousOpen=function(e,t,i){var a;return this.market_def&&this.rules?(a=e,e||(a=new Date,t=null),a=this._convertToMarketTZ(a,t),a=this._find_prev_segment(a,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},t.Market.prototype.getSession=function(e,t){return e=this._convertToMarketTZ(e,t),this._wasOpenIntraDay(e)&&this.zseg_match?this.zseg_match.name:null},t.Market.prototype.marketZoneNow=function(){return l.e01(),this._convertToMarketTZ(new Date)},t.Market.prototype.isHourAligned=function(){return l.e01(),this.hour_aligned},t.Market.prototype.isOpen=function(){var e;return e=new Date,this.market_tz&&(e=new this.tz_lib(e.getTime(),this.market_tz)),this._wasOpenIntraDay(e)},t.Market.prototype.isMarketDay=function(){var e;return e=new Date,this.market_tz&&(e=new this.tz_lib(e.getTime(),this.market_tz)),this._wasOpenDaily(e)},t.Market.prototype.isMarketDate=function(e){return l.e01(),this._wasOpenDaily(e)},t.Market.prototype.newIterator=function(e){var i,a;return i=!1,e.periodicity?i=e.periodicity:e.multiple&&(i=e.multiple),(a=e.interval)||(a="minute"),"hour"==a&&(a=60),i||(i=1),e.begin||(e.begin=new Date,e.inZone=null),a==parseInt(a,10)&&(a=parseInt(a,10),e.periodicity<1/60?("m","illis","econd",l.Q4q(54),i=l.q4q(i,6e4,a),a="millisecond"):e.periodicity<1?(l.Q4q(54),i=l.q4q(i,60,a),a="second"):("minu","te",l.P4q(1),i=l.q4q(i,a),a="minute")),e.timeUnit&&("millisecond"===e.timeUnit||"second"===e.timeUnit?a=e.timeUnit:"tick"===e.timeUnit&&("se","cond",a="second")),"tick"==a&&(a="second"),e.interval=a,e.multiple=i,e.market=this,new t.Market.Iterator(e)},t.Market.prototype._wasOpenDaily=function(e){return l.e01(),this._was_open(e,!1)},t.Market.prototype._wasOpenIntraDay=function(e){return this._was_open(e,!0)},t.Market.prototype._was_open=function(e,t){var i,a,r,n,s,o,h,c,u,d,p,m,g;if(i=this.zseg_match,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,l.w01(),this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;for(a=!1,r=!1,n=e.getFullYear(),s=e.getMonth()+1,o=e.getDay(),h=e.getDate(),c=e.getHours(),u=e.getMinutes(),d=e.getSeconds(),l.Q4q(55),m=l.E4q("60",0,c,d,60,u,60),void 0===t&&(t=!0),g=0;g<this.normalHours.length;g++)if((p=this.normalHours[g]).enabled&&((a=p.dayofweek===o)&&t&&(a=m>=p.open&&m<p.close),a)){if(!t&&this.zseg_match&&(p.open_parts.hours>this.zopen_hour||p.open_parts.hours==this.zopen_hour&&p.open_parts.minutes>this.zopen_minute))continue;if(p===i||p.adjacent_parent||p.adjacent_child||(this.shouldResetToBeginningOfSegment=!0),this.zopen_hour=p.open_parts.hours,this.zopen_minute=p.open_parts.minutes,this.zclose_hour=p.close_parts.hours,this.zclose_minute=p.close_parts.minutes,this.zmatch_open=m===p.open,this.zseg_match=p,t)break}for(g=0;g<this.extraHours.length;g++)if((p=this.extraHours[g]).enabled&&("*"===p.year||n===p.year)&&s===p.month&&h===p.day&&(!(r=!t&&p.open||m>=p.open&&m<p.close)&&this.zseg_match&&(a=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),r)){if(!t&&this.zseg_match&&(p.open_parts.hours>this.zopen_hour||p.open_parts.hours==this.zopen_hour&&p.open_parts.minutes>this.zopen_minute))continue;if(this.zopen_hour=p.open_parts.hours,this.zopen_minute=p.open_parts.minutes,this.zclose_hour=p.close_parts.hours,this.zclose_minute=p.close_parts.minutes,this.zmatch_open=m===p.open,this.zseg_match=p,t)break}return this.zseg_match},t.Market.prototype._wasClosed=function(e){return l.w01(),!this._was_open(e,!0)},t.Market.prototype._wasOpen=function(e){return l.w01(),this._was_open(e,!0)},t.Market.prototype._tzDifferenceMillis=function(e,t,i){var a,r;return 0,a=e,r=e.getTimezoneOffset()-a.getTimezoneOffset(),l.Q4q(56),l.E4q(2147483647,1e3,r,"60")},t.Market._createTimeSegments=function(e){var t,i,a,r,n;t=function(e,t){if(24===e.close_parts.hours&&0===t.open_parts.hours&&0===t.open_parts.minutes){if(i.dayofweek===r.dayofweek-1){1228935487,14737457,2;for(var a=1;1228935487!==l.f6D(a.toString(),a.toString().length,42580);a++)return!1;if(14737457!==l.f6D(2..toString(),2..toString().length,67281))return!0}if(6===i.dayofweek&&0===r.dayofweek)return!0}return l.w01(),!1};for(var o=0;o<e.rules.length;o++){"na","me",void 0===(a=JSON.parse(JSON.stringify(e.rules[o]))).open&&void 0===a.close&&("00:0","0",a.open="00:00",a.close="00:00"),a.hasOwnProperty("name")||(a.name="");try{if("u","ndef","i","ned",void 0!==a.dayofweek?(a.year="*",r=s._createDayOfWeekSegment(e,a),i&&(i.dayofweek===r.dayofweek?(i.child_=r,r.parent_=i):t(i,r)&&(i.adjacent_child=r,r.adjacent_parent=i)),i=r):"undefined"!==H(a.date)?(a.isDayOfWeek=!1,a.dayofweek=-1,r=s._createDateTimeSegment(e,a)):("Error, unknown ","rule typ","e ",l.Q4q(0),console.log(l.E4q(a,"Error, unknown rule type "))),e.enabled_by_default)for(var h=0;h<e.enabled_by_default.length;h++)if(n=e.enabled_by_default[h],r.name===n){r.enabled=!0;break}}catch(e){l.Q4q(0),console.log(l.q4q(e,"Error, creating market rules "))}}},t.Market._timeSegment={},(s=t.Market._timeSegment).re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,s.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s.re_split_hours_minutes=/^(\d\d):(\d\d)$/,s.re_split_hour_minutes=/^(\d):(\d\d)$/,s._hashCode=function(e){var t,i,a,r;if(t=0,0===e.length)return t;for(i=0,r=e.length;i<r;i++)a=e.charCodeAt(i),l.P4q(57),t=l.q4q(1,t,t,a,"5"),t|=0;return t},s._splitHoursMinutes=function(e){var t,i;return i={hours:NaN,minutes:NaN},null===(t=s.re_split_hour_minutes.exec(e))&&null===(t=s.re_split_hours_minutes.exec(e))||(i.hours=parseInt(t[1],10),i.minutes=parseInt(t[2],10),l.e01()),i},s._createDayOfWeekSegment=function(e,t){var i;return l.w01(),""===(i={name:t.name,isDayOfWeek:!0,dayofweek:t.dayofweek,date_str:"*",open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1}).name&&(i.enabled=!0),i.hash_code=this._hashCode((i.open+i.close).toString()),e.normalHours.push(i),i},s._createDateTimeSegment=function(e,t){var i,a,r;if(null===(i=this.re_regular_iso.exec(t.date))){if(null===(i=this.re_wild_card_iso.exec(t.date)))return void console.log("Warning: invalid date format on rule -> "+t.date);a="*"}else a=parseInt(i[1],10);return""===(r={name:t.name,isDayOfWeek:!1,dayofweek:-1,year:a,month:parseInt(i[2],10),day:parseInt(i[3],10),date_str:t.date,open_parts:s._splitHoursMinutes(t.open),close_parts:s._splitHoursMinutes(t.close),open:s._secSinceMidnight(e,t.open,!0),close:s._secSinceMidnight(e,t.close,!1),enabled:!1}).name&&(r.enabled=!0),r.hash_key=this._hashCode(r.date_str+r.open+r.close),e.extraHours.push(r),r},s._secSinceMidnight=function(e,t,i){var a,r,n,s;return a=t.split(":"),r=parseInt(a[0],10),n=parseInt(a[1],10),l.P4q(58),s=l.E4q(n,60,60,r,60),i||24===r&&(l.P4q(59),s=l.q4q(r,60,"60",1)),s},t.Market.prototype._convertToMarketTZ=function(e,t){var i;return l.e01(),(i=t?new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),t):new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())).setTimezone&&i.setTimezone(this.market_tz),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())},t.Market.prototype._convertFromMarketTZ=function(e,t){var i;return l.e01(),i=new this.tz_lib(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),this.market_tz),t?(i.setTimezone&&i.setTimezone(t),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(i.getTime())},t.Market.Iterator=function(e){this.market=e.market,this.begin=e.begin,this.interval=e.interval,this.multiple=e.multiple,this.inZone=e.inZone,this.outZone=e.outZone,this.clock=new t.Market.Iterator._Clock(e.market,e.interval,e.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,e.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1},t.Market.Iterator.prototype.date=function(){return l.w01(),this.clock._date()},t.Market.Iterator.prototype.futureTick=function(e){var t,i,a,r,n,s,o;if(l.w01(),this.clock.skip=1,t=0,(i=this.intraDay?this.market._convertToMarketTZ(e.end,this.inZone).getTime():e.end.getTime())===(a=this.clock.ctime))return t;if(r=2,1e3,n=0,e.sample_size&&(r=e.sample_size),s=(new Date).getTime(),i>a){for(this.clock.forward=!0;this.clock.ctime<i;)if(t+=1,l.P4q(4),n+=l.E4q(0,"1"),this.clock._findNext(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(this.clock.ctime-a)/t,l.P4q(60),t=Math.floor(l.q4q(a,i,o));break}this.clock.ctime>i&&t--}else for(this.clock.forward=!1;this.clock.ctime>i;)if(t+=1,l.P4q(7),n+=l.q4q(336216800,"1"),this.clock._findPrevious(),1e3===n&&(l.P4q(11),n=l.q4q(1095476128,"0"),(new Date).getTime()-s>=r)){o=(a-this.clock.ctime)/t,l.Q4q(60),t=Math.floor(l.q4q(i,a,o));break}return t},t.Market.Iterator.prototype.isHourAligned=function(){return l.e01(),!this.intraDay||this.market.isHourAligned()},t.Market.Iterator.prototype.isOpen=function(){return l.e01(),this.market.isOpen()},t.Market.Iterator.prototype.next=function(e){l.P4q(11),this.clock.skip=l.E4q(1079193248,"1"),e&&(this.clock.skip=e),this.clock.forward=!0;for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findNext();return l.w01(),this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator.prototype.peek=function(){return this.clock._peek()},t.Market.Iterator.prototype.previous=function(e){this.clock.skip=1,e&&(this.clock.skip=e),this.clock.forward=!1,l.w01();for(var t=0;t<this.clock.skip;t++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},t.Market.Iterator._Clock=function(e,t,i){var n,s;i%60==0&&"second"===t&&(t="minute",l.P4q(5),i=l.q4q(i,60)),this.market=e,this.interval=t,this.multiple=i,this.intra_day=!1,this.intervals=[],this.max_iters=10080,n=r,s=this._dayImpl,"millisecond"===t?(s=this._millisImpl,l.P4q(4),n=l.q4q(0,"1")):"second"===t?(s=this._secondImpl,n=1e3):"minute"===t?(s=this._minuteImpl,n=6e4):"hour"===t?(s=this._hourImpl,n=a):"day"===t?(s=this._dayImpl,n=r):"week"===t?(s=this._weekImpl,l.Q4q(1),n=l.q4q(r,7)):"month"===t?(s=this._monthImpl,l.P4q(1),n=l.q4q(r,30)):("Period","icit",'y ERROR: "',l.Q4q(18),console.log(l.E4q('" is not a valid interval. Please see setPeriodicity() for details.','Periodicity ERROR: "',t))),l.Q4q(1),this.tick_time=l.q4q(n,i),this.intra_day=this.tick_time<r,l.w01(),this._findPrevious=this._findNext=s},(o=t.Market.Iterator._Clock.prototype)._total_minutes=function(e,t,i,a){return l.e01(),l.P4q(61),l.E4q(a,i,e,t,60)},o._alignMinutes=function(){var e,t,i,a,r;if(!this.market.market_def||void 0===this.market.zopen_minute)return[];for(e=this.market.zopen_minute,(t=this.market.zseg_match)&&t.adjacent_parent?e=t.adjacent_parent.open/60-1440:this.market.isHourAligned()&&this.multiple%60==0&&(e=0),i=this._total_minutes(this.market.zopen_hour,e,this.market.zclose_hour,this.market.zclose_minute),a=[],l.e01(),r=0;r<i;)l.Q4q(0),a.push(l.E4q(r,e)),r+=this.multiple;return a},o._alignBaseZero=function(e){var t,i;for(t=0,l.w01(),i=[t];!((t+=this.multiple)>=e);)i.push(t);return i},o._date=function(){var e,t;return e=Math.round(this.ctime),t=new Date(e),this.intra_day?this.display_date=new Date(e+this.shift_millis):this.display_date=t,l.w01(),t},o._alignToBoundary=function(e,t){var i,a,r;l.w01(),i=0,a=0,r=t;for(var n=0;n<e.length-1&&(i=e[n],l.Q4q(0),a=e[l.E4q(1,n)],t!==i&&t!==a);n++){if(t>i&&t<a){r=i;break}n+1===e.length-1&&(r=a)}return r},o._peek=function(){return this._date().toString()},o._seekHr=function(){this.forward?this.ctime-=a:this.ctime+=a},o._setStart=function(e){var t,i,a;t=this.market._tzDifferenceMillis(e),i=new Date(e.getTime()+t),this.shift_millis=t,this.ctime=i.getTime(),this.shift_millis=0,l.e01(),a=2;for(var r=1;-1930555675!==l.f6D(r.toString(),r.toString().length,41939);r++)this.ctime=e.getTime(),a+=2;126379835!==l.d6D(a.toString(),a.toString().length,28955)&&(this.ctime=e.getTime())},o._tickTock=function(){this.forward?this.ctime+=this.tick_time:this.ctime-=this.tick_time},o._tockTick=function(){this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},o._tickTock24=function(){l.w01(),this.ctime+=r},o._tockTick24=function(){this.ctime-=r},o._windMaybe=function(e,t){var i,a,r,n,s;i=2;for(var o=1;-1442796625!==l.d6D(o.toString(),o.toString().length,58891);o++)a=1,r=new Date(this.ctime),n=!0,l.P4q(1),i+=l.E4q("2",1);for(845544536!==l.d6D(i.toString(),i.toString().length,17948)&&(a=2,r=new Date(this.ctime),n=!1),a=0,l.e01(),r=new Date(this.ctime),n=!1;!e.call(this.market,r);)if(t.call(this),n=!0,r=new Date(this.ctime),(a+=1)>this.max_iters){s="Warning! max iterations ("+this.max_iters,s+=") reached with no rule match.",console.log(s);break}return n},o._millisImpl=function(){var e,t,i,a,r,n,s,o,h,c;return e=!1,this.mperiods_aligned||(t=this._alignBaseZero(1e3),a=(i=new Date(this.ctime)).getMilliseconds(),a=this._alignToBoundary(t,a),i.setMilliseconds(0),this.ctime=i.getTime()+a,this.mperiods_aligned=!0,e=!0),r=this._date().getMinutes(),l.e01(),this._tickTock(),n=this._date().getMinutes(),!e&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this._date().getMilliseconds(),h=this.tick_time,this.tick_time=6e4,c=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=h,this.multiple=c,l.Q4q(62),this.ctime+=l.E4q(s,o,1e3)),this._date()},o._secondImpl=function(){var e,t,i,a,r,n,s,o,h;e=!1,this.speriod_aligned||(t=this._alignBaseZero(60),a=(i=new Date(this.ctime)).getSeconds(),a=this._alignToBoundary(t,a),i.setSeconds(a),i.setMilliseconds(0),this.ctime=i.getTime(),this.speriod_aligned=!0,e=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!e&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this.tick_time,this.tick_time=6e4,h=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=o,this.multiple=h,l.Q4q(1),this.ctime+=l.q4q(1e3,s));for(var c=1;-77239912!==l.d6D(c.toString(),c.toString().length,1195);c++)return this._date();if(-1832656602!==l.f6D(2..toString(),2..toString().length,89834))return this._date()},o._minuteImpl=function(){var e,t,i,a,r,n,s,o,h,c;return e=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),i=(t=new Date(this.ctime)).getTimezoneOffset(),a=t.getMinutes(),r=t.getHours(),n=this._alignMinutes(),s=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,r,a)+this.market.zopen_minute,s=e?this.forward?n[n.length-1]:n[0]:this._alignToBoundary(n,s),r=Math.floor(s/60)+this.market.zopen_hour,l.P4q(43),t.setHours(r,l.q4q(60,s),0,0),o=t.getTimezoneOffset()-i,(this.forward&&o<0||!this.forward&&o>0)&&t.setTime(t.getTime()-6e4*o),this.ctime=t.getTime(),this._tickTock(),h=this.market.hour_aligned&&this.multiple%60==0,(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!h&&this.shouldResetToBeginningOfSegment)&&(t=new Date(this.ctime),this.forward?(t.setMinutes(this.market.zopen_minute),t.setHours(this.market.zopen_hour)):(c=(n=this._alignMinutes())[n.length-1],l.Q4q(43),t.setMinutes(l.E4q(60,c)),t.setHours(Math.floor(c/60)+this.market.zopen_hour)),this.ctime=t.getTime()),this._date()},o._hourImpl=function(){var e,t,i,a,r;return this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),e=new Date(this.ctime),l.e01(),this.market.isHourAligned()?e.setMinutes(0):e.setMinutes(this.market.zopen_minute),e.setSeconds(0),e.setMilliseconds(0),this.ctime=e.getTime(),this._tickTock(),t=this.market.zseg_match,(this._windMaybe(this.market._wasOpenIntraDay,this._tickTock)||!this.market.hour_aligned&&t!=this.market.zseg_match)&&(i=new Date(this.ctime),this.forward?(i.setMinutes(this.market.zopen_minute),i.setHours(this.market.zopen_hour)):(r=(a=this._alignMinutes())[a.length-1],l.P4q(43),i.setMinutes(l.E4q(60,r)),i.setHours(Math.floor(r/60)+this.market.zopen_hour)),this.ctime=i.getTime()),this._date()},o._dayImpl=function(){var e,t;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),(e=new Date(this.ctime)).setHours(12,0,0,0),this.ctime=e.getTime(),l.Q4q(4),t=l.q4q(0,"0"),l.w01();t<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(t+=1);return(e=new Date(this.ctime)).setHours(0),this.ctime=e.getTime(),this._date()},o._weekImpl=function(){var e;for((e=new Date(this.ctime)).setHours(12),this.ctime=e.getTime(),this._tickTock(),e=new Date(this.ctime);0!==e.getDay();)this._tockTick24(),e=new Date(this.ctime);return this._windMaybe(this.market._wasOpenDaily,this._tickTock24),e=new Date(this.ctime),l.P4q(8),e.setHours(0,0,l.q4q("0",0),l.E4q(0,"0",l.Q4q(17))),this.ctime=e.getTime(),this._date()},o._monthImpl=function(){var e;return l.w01(),(e=new Date(this.ctime)).setDate(15),this.ctime=e.getTime(),this._tickTock(),(e=new Date(this.ctime)).setDate(1),e.setHours(12),this.ctime=e.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),e=new Date(this.ctime),l.P4q(7),e.setHours(0,l.E4q(1185577664,"0"),0,0),this.ctime=e.getTime(),this._date()},o._findNext=null,o._findPrevious=null},g=function(e){var t,i,a=R;a.z6O=function(e){if(a.e01(),a&&e)return a.j6O(e)},a.o6O=function(e){if(a)return a.c6O(e)},t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="valid",t.valid=0,t[a.J6O("f588")?"":"ChartEngine"][a.o6O("274e")?"prototype":""][a.p6O("db25")?"mousemoveinner":""]=function(e,r){a.u6O=function(e){if(a)return a.c6O(e)},a.S6O=function(e){if(a&&e)return a.c6O(e)},a.i6O=function(e){if(a&&e)return a.j6O(e)},a.e01(),a.U6O=function(e){if(a.e01(),a&&e)return a.c6O(e)},a.q6O=function(e){if(a)return a.c6O(e)},a.I6O=function(e){if(a.e01(),a)return a.c6O(e)};var n=a.I6O("1e39")?1112545411:2578710145,s=a.q6O("ebd2")?62948097:26871590,o=a.U6O("2ed1")?1832016102:1853333261,l=a.m6O("d975")?522322037:442196596,h=1751643293,c=-(a.n6O("2b2e")?258922566:108118078),u=a.Z6O("ca4c")?333730159:954970603,d=-1597928035,p=-(a.O6O("e397")?2043415014:8047229731),m=-989303898,g=-(a.z6O("8391")?1283980316:5999382368),f=-843565038,y=441196364,v=a.D6O("e7ff")?960693010:763999959;if(a.B1H(a.i6O("6f49")?1:0,!!a.S6O("17dd"),124415)===n||a.B1H(a.u6O("c8f9")?4:0,!1,727672)===s||a.U1H(11,!1,861942)===o||a.U1H(0,!1,115757)===l||a.B1H(10,!1,827543)===h||a.B1H(0,!1,148461)===c||a.B1H(10,!1,830992)===u||a.U1H(0,!1,666946)===d||a.U1H(11,!1,896215)===p||a.U1H(0,!1,428240)===m||a.B1H(10,!1,485447)===g||a.U1H(0,!1,481638)===f||a.B1H(16,!1,215901)===y||a.U1H(0,!1,144563)===v){var x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,V,Q,B,U,W,Y=function(e){a.w01(),705777377!==a.B1H(0,!1,221242)&&132411143!==a.U1H(0,!1,143821)&&-1065310573!==a.U1H(11,!1,643377)&&-628365202!==a.B1H(0,!1,659685)&&-2033196134!==a.U1H(10,!1,760143)&&-1955394550!==a.B1H(0,!1,703357)&&35758090!==a.B1H(10,!1,268566)&&196978410!==a.B1H(0,!1,578171)&&1026167311!==a.B1H(11,!1,399698)&&1166899411!==a.B1H(0,!1,261360)&&343557789!==a.B1H(10,!1,773822)&&-1329127098!==a.U1H(0,!1,610167)&&1047803036!==a.U1H(16,!1,944339)&&990634217!==a.B1H(0,!1,416511)||e.runAppend("mousemoveinner",S)};if(x="p",x+="x",!this.chart.canvas)return;if(!(t.isAndroid||t.isIOS7or8||this.chart.canvas.height==Math.floor(this.devicePixelRatio*this.chart.container.clientHeight)&&this.chart.canvas.width==Math.floor(this.devicePixelRatio*this.chart.container.clientWidth)))return void this.resizeChart();if(this.runPrepend("mousemoveinner",arguments))return;if(S=arguments,C=this.container.getBoundingClientRect(),this.top=C.top,this.left=C.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!0,t.ChartEngine.crosshairX=e,t.ChartEngine.crosshairY=r,k=this.cy=this.crossYActualPos=this.backOutY(t.ChartEngine.crosshairY),w=this.cx=this.crossXActualPos=this.backOutX(t.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted&&Math.pow(this.grabStartX-e,2)+Math.pow(this.grabStartY-r,2)<36)return;if(this.cancelLongHold=!0,D=function(e,r){if(1188764448===a.U1H(0,!1,790952)||-476154489===a.B1H(0,!1,146037)||1814910191===a.B1H(11,!1,803346)||725833940===a.B1H(0,!1,737730)||419338534===a.U1H(10,!1,313499)||-1291117576===a.B1H(0,!1,934348)||-855282130===a.U1H(10,!1,558435)||-1046431625===a.U1H(0,!1,603253)||-1155083729===a.B1H(11,!1,541895)||193058270===a.U1H(0,!1,318801)||2083164302===a.U1H(10,!1,188794)||1831266204===a.U1H(0,!1,855405)||-234100646===a.U1H(16,!1,160632)||-1031301379===a.B1H(0,!1,985133)){if(0===t[i])return e.whichPanel(r)||e.chart.panel;e.draw[i]||(e.draw=function(){a.w01(),-2030301009!==a.B1H(0,!1,656586)&&-1694875225!==a.U1H(0,!1,678636)&&453179621!==a.U1H(11,!1,913562)&&12390427!==a.U1H(0,!1,908445)&&-860642535!==a.U1H(10,!1,869619)&&-1645036721!==a.U1H(0,!1,414702)&&618688186!==a.B1H(10,!1,151253)&&-1141063577!==a.U1H(0,!1,213391)&&-793012284!==a.B1H(11,!1,547309)&&-882751798!==a.U1H(0,!1,182337)&&1941544709!==a.B1H(10,!1,120081)&&-2062817418!==a.U1H(0,!1,776401)&&1598732453!==a.U1H(16,!1,205325)&&-637722442!==a.U1H(0,!1,458810)||t.clearCanvas(this.chart.canvas,this)},e.draw[i]=!0)}},this.currentPanel=D(this,k),!this.currentPanel)return;if((A=this.currentPanel.chart).dataSet&&(this.crosshairTick=this.tickFromPixel(w,A),b=this.valueFromPixel(k,this.currentPanel),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,b),(T="chart"==this.currentPanel.name?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField)&&this.crosshairTick<A.dataSet.length&&this.crosshairTick>-1&&(b=A.dataSet[this.crosshairTick][T],this.crossYActualPos=this.pixelFromPrice(b,this.currentPanel))),t.ChartEngine.crosshairX>=this.left&&t.ChartEngine.crosshairX<=this.right&&t.ChartEngine.crosshairY>=this.top&&t.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,M=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&t.ChartEngine.crosshairY<=M+this.top&&t.ChartEngine.crosshairY>M-this.xaxisHeight+this.top,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis))return;if(!this.displayCrosshairs&&!t.ChartEngine.resizingPanel)return void this.undisplayCrosshairs();if(this.repositioningBaseline)return W=this.panels[this.chart.panel.name],this.chart.baseline.userLevel=this.adjustIfNecessary(W,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),W)),Date.now()-this.repositioningBaseline.lastDraw>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now()),Y(this);if(this.repositioningAnchorSelector)return P=this.repositioningAnchorSelector.hoverTick,(F=this.tickFromPixel(this.cx,this.chart))>=0&&F<this.chart.dataSet.length&&(!P||0===P||F!==P)&&(this.repositioningAnchorSelector.hoverTick=F,this.draw()),Y(this);if(this.grabbingScreen&&!t.ChartEngine.resizingPanel){if(_="z",_+="o",_+="om",E="p",E+="a",E+="n",this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(w,k),Y(this);if(this.anyHighlighted){for(L in t.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1,this.overlays)this.overlays[L].highlight=!1;for(L in A.series)A.series[L].highlight=!1;this.displaySticky()}if(-1==this.grabStartX&&(this.grabStartX=t.ChartEngine.crosshairX,this.grabStartScrollX=A.scroll),-1==this.grabStartY&&(this.grabStartY=t.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),q=t.ChartEngine.crosshairX-this.grabStartX,I=t.ChartEngine.crosshairY-this.grabStartY,0===q&&0===I)return;if(Math.abs(q)+Math.abs(I)>5&&(this.grabOverrideClick=!0),O=this.layout.candleWidth,this.allowZoom&&this.grabMode!=E&&(0===this.grabMode.indexOf(_)||this.overXAxis||this.grabStartYAxis)){if(H="z",H+="oo",H+="m-",H+="x",""===this.grabMode&&(this.overXAxis?this.grabMode="zoom-x":this.grabStartYAxis&&(this.grabMode="zoom-y")),this.grabMode==H?I=0:"zoom-y"==this.grabMode&&(q=0),q&&(this.grabStartX=t.ChartEngine.crosshairX,R=O-q/this.chart.maxTicks,this.zoomSet(R,this.chart)),this.layout.setSpan&&(this.layout.setSpan=null,this.changeOccurred("layout")),N=this.grabStartYAxis)if(N.flipped&&(I*=-1),N.zoom=Math.round(this.grabStartZoom+I),this.grabStartZoom<N.height){j=-49002804,z=240840541,V=2;for(var X=1;a.d6D(X.toString(),X.toString().length,93042)!==j;X++)N.zoom>N.height&&(N.zoom=N.height%9),V+=2;a.d6D(V.toString(),V.toString().length,23531)!==z&&N.zoom>=N.height&&(N.zoom=N.height-1)}else N.zoom<=N.height&&(N.zoom=N.height+1)}else if(!this.overYAxis&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(Math.abs(I)<this.yTolerance){if(!this.yToleranceBroken&&(I=0,0===q))return}else this.yToleranceBroken=!0;if(this.grabStartMicropixels||(this.grabStartMicropixels=0),this.grabMode="pan",A.scroll=this.grabStartScrollX,this.micropixels=this.grabStartMicropixels+q*(this.shift?5:1),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=O,A.scroll++;for(;this.micropixels<-O;)this.micropixels+=O,A.scroll--}A.scroll>=A.maxTicks?this.preferences.whitespace=this.initialWhitespace:this.preferences.whitespace=(A.maxTicks-A.scroll)*O,this.currentPanel==this.grabStartPanel&&((N=this.currentPanel.yAxis).flipped&&(I*=-1),N.scroll=this.grabStartScrollY+I),this.dispatch("scroll",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}return Q=function(e){a.e01();if(2106176613===a.U1H(0,!1,946534)||-1137306249===a.B1H(0,!1,887028)||2109972646===a.U1H(11,!1,544177)||-784901999===a.B1H(0,!1,133190)||205166314===a.U1H(10,!1,499739)||-802151691===a.U1H(0,!1,148452)||1331550946===a.U1H(10,!1,226145)||1900297711===a.U1H(0,!1,836118)||1984094984===a.U1H(11,!1,946236)||1015982153===a.B1H(0,!1,841986)||1521200685===a.U1H(10,!1,982578)||-1088944128===a.B1H(0,!1,793207)||-197089392===a.B1H(16,!1,665734)||1389973179===a.B1H(0,!1,266169))return function(){-1971961324!==a.B1H(0,!1,942513)&&-1311498370!==a.B1H(0,!1,672760)&&-776150727!==a.B1H(11,!1,431921)&&375920791!==a.B1H(0,!1,519840)&&1826663061!==a.B1H(10,!1,437497)&&-992127829!==a.B1H(0,!1,876861)&&-975508849!==a.U1H(10,!1,933472)&&1269559518!==a.B1H(0,!1,563699)&&-2102893155!==a.U1H(11,!1,562109)&&1764025829!==a.U1H(0,!1,278157)&&-1212301752!==a.U1H(10,!1,605691)&&-1759965980!==a.B1H(0,!1,957270)&&-2067975273!==a.B1H(16,!1,693106)&&497819161!==a.B1H(0,!1,665887)||(e.draw(),e.updateChartAccessories())}},t.ChartEngine.useAnimation?window.requestAnimationFrame(Q(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),void this.undisplayCrosshairs()}return this.grabMode="",this.overXAxis||this.overYAxis?(this.updateChartAccessories(),this.findHighlights(),Y(this)):(this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,A)-.5+"px"),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+x),this.insideChart&&!t.ChartEngine.resizingPanel?(B=this.currentVectorParameters.vectorType,this.layout.studies&&(U=this.layout.studies[this.currentPanel.name])&&(this.preferences.dragging&&this.preferences.dragging.study||delete this.overlays[U.name],B&&(this.overlays[U.name]=U)),t.Drawing&&B&&t.Drawing[B]&&(new t.Drawing[B]).dragToDraw||this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):t.ChartEngine.drawingLine?this.activeDrawing&&(W=this.panels[this.activeDrawing.panelName],b=this.adjustIfNecessary(W,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),W)),this.magnetizedPrice&&W.name==this.currentPanel.name&&(b=this.adjustIfNecessary(W,this.crosshairTick,this.magnetizedPrice)),null===this.magnetizedPrice&&t.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,b),this.activeDrawing.measure&&this.activeDrawing.measure()):t.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!1}),this.findHighlights(this.highlightViaTap)),Y(this))}},t.ChartEngine.prototype.swipeStart=function(e){var t;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=e.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=e,a.e01(),this.swipe.end=!1,this.swipe.timeConstant=325,this.swipe.cb=null,t=this,requestAnimationFrame((function(){a.w01(),t.swipeSample()}))},t.ChartEngine.prototype.swipeSample=function(){var e,i,r,n,s,o,l;(e=this.swipe).end||(i=this,20,(n=(r=Date.now())-e.timestamp)<20||(o=t.touchDevice?.4:.8,e.timestamp=r,s=(e.chart.scroll-e.frame)*this.layout.candleWidth+this.micropixels-e.micropixels,e.frame=e.chart.scroll,e.micropixels=this.micropixels,a.P4q(63),l=o*a.E4q(1,1e3,s,n)+.2*e.velocity,Math.abs(l)>Math.abs(e.velocity)&&(e.velocity=l),Math.abs(s)<6&&(e.velocity=0)),requestAnimationFrame((function(){a.w01(),i.swipeSample()})))},t.ChartEngine.prototype.swipeRelease=function(){var e,t;a.e01(),(e=this.swipe).velocity>3e3&&(a.P4q(1),e.velocity=a.q4q("3000",1)),e.velocity<-3e3&&(e.velocity=-3e3),(e.velocity>10||e.velocity<-10)&&(e.amplitude=.8*e.velocity,e.scroll=e.chart.scroll,e.target=e.amplitude,e.timestamp=Date.now(),t=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame((function(){a.e01(),t.autoscroll()})))},t.ChartEngine.prototype.dragPlotOrAxis=function(e,i){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,R,j,z,V,Q,B,U,W,Y,X,Z,G,K,J;if((function(){var e,t,i,r;for(var n in e=!1,this.panels){for(t="t",t+="o",i="ri",i+="g",["dropzone","all","left",i+="ht",t+="p","bottom"].forEach(s(this.panels[n])),r=0;r<this.panels[n].yaxisLHS.length;r++)this.panels[n].yaxisLHS[r].dropzone&&(e=!0),this.panels[n].yaxisLHS[r].dropzone=null;for(r=0;r<this.panels[n].yaxisRHS.length;r++)this.panels[n].yaxisRHS[r].dropzone&&(e=!0),this.panels[n].yaxisRHS[r].dropzone=null}function s(t){return function(i){a.e01(),t.subholder.classList.contains(i)&&(t.subholder.classList.remove(i),e=!0)}}1942916194,-1176567742,2;for(var o=1;1942916194!==a.d6D(o.toString(),o.toString().length,58450);o++)return e;if(-1176567742!==a.f6D(2..toString(),2..toString().length,90032))return e}.call(this)||this.grabbingScreen)&&(r=null,20,10,a.Q4q(4),n=this.whichPanel(a.E4q(20,i)),a.Q4q(0),s=this.whichPanel(a.E4q(20,i)),o=this.whichPanel(i),l=this.highlightedDraggable,o&&(!l.undraggable||!l.undraggable(this)))){for(b in h=this.whichYAxis(o,e,i),a.P4q(4),c=this.whichYAxis(o,a.E4q(10,e),i),a.P4q(0),u=this.whichYAxis(o,a.E4q(10,e),i),this.xAxisAsFooter&&o.name==Object.keys(this.panels).pop()&&(s=this.whichPanel(i+20+this.xaxisHeight),r&&(r+=this.xaxisHeight)),a.w01(),d=!1,p=!1,!1,t.Renderer&&(d=l instanceof t.Renderer),t.Studies&&(p=l instanceof t.Studies.StudyDescriptor),g=function(e){if(!m){if("right"==e)return o.right-o.width/6;if("left"==e)return o.left+o.width/6}return(o.left+o.right)/2},(m=l instanceof t.ChartEngine.YAxis)||h||("r","i","ght",e<g("left")?c=this.whichYAxis(o,o.left-1,i):e>g("right")&&(u=this.whichYAxis(o,o.right+1,i))),f=[],l.getDependents&&(f=l.getDependents(this,!0)),y=l.panel,v=l.getYAxis(this),d?y=l.params.panel:m&&(y=this.grabStartPanel.name),x=this.panels[y],this.panels)this.panels[b].soloing&&(S=!0);if(C=v.isShared(this),k=!m&&!S&&(x!==o&&x!=n&&x!=s||!this.checkForEmptyPanel(x,!0,[l].concat(f))),w=y==o.name&&v!==h&&v!==u&&v!==c||C,!k||n&&o===n)if(!k||s&&o===s){if(o!==x)m||o.noDrag||("a","l","l","dr","opzo","ne",o.subholder.classList.add("dropzone"),o.subholder.classList.add("all"),D=o.name);else if((!o.yaxisRHS.length||1==o.yaxisRHS.length&&o.yaxisRHS[0]==v&&"none"==v.position)&&!h&&!u&&e>g("right"))o.subholder.classList.add("dropzone"),o.subholder.classList.add("right"),A="right";else if((!o.yaxisLHS.length||1==o.yaxisLHS.length&&o.yaxisLHS[0]==v&&"none"==v.position)&&!h&&!c&&e<g("left"))"l","e","f","t","le","f","t",o.subholder.classList.add("dropzone"),o.subholder.classList.add("left"),A="left";else if(w&&(m&&e>o.left&&e<o.right&&(P=o.yaxisLHS[o.yaxisLHS.length-1],a.P4q(17),F=o.yaxisRHS[a.E4q(0,"0")],e<(_=g())&&P!=v?c=P:e>_&&F!=v&&(u=F)),!m||h!==v))if(E=!m&&C,!u||u===v&&!E||h&&h===u)if(!c||c===v&&!E||h&&h===c){if(h){if(u||h===v&&!E)c||h===v&&!E?h!==v&&("a","l","l",h.dropzone="all"):h.dropzone="left";else{1791543554,-288367610,L=2;for(var $=1;1791543554!==a.f6D($.toString(),$.toString().length,41917);$++)h.dropzone="",L+=2;-288367610!==a.d6D(L.toString(),L.toString().length,27269)&&(h.dropzone="right")}h.dropzone&&(A=h.position||this.chart.panel.yAxis.position||"right")}}else c.dropzone="right",A=c.position||this.chart.panel.yAxis.position||"right";else u.dropzone="left",A=u.position||this.chart.panel.yAxis.position||"right"}else{-105273218,1994979598,M=2;for(var ee=1;-105273218!==a.f6D(ee.toString(),ee.toString().length,21786);ee++)o.subholder.classList.add("dropzone"),o.subholder.classList.add("bottom"),M+=2;1994979598!==a.d6D(M.toString(),M.toString().length,33004)&&(o.subholder.classList.add("dropzone"),o.subholder.classList.add("dropzone"))}else{"dropzon","e",o.subholder.classList.add("dropzone"),1431393467,-1509725875,T=2;for(var te=1;1431393467!==a.f6D(te.toString(),te.toString().length,99379);te++)o.subholder.classList.add("top"),T+=2;-1509725875!==a.d6D(T.toString(),T.toString().length,74147)&&o.subholder.classList.add(""),s=o}if(this.grabbingScreen||!o.subholder.classList.contains("dropzone")&&!A)this.draw();else{if(a.P4q(4),I=-a.E4q(0,"1"),!D&&!A&&k){for(var ie in D=p?l.inputs.id:l.params.name||t.uniqueID(),this.panels)if(I++,this.panels[ie]==s)break;s||I++,this.panels[y].yAxis.name==D&&(y=this.electNewPanelOwner(y)),N=p?l.inputs.display:null,y?this.createPanel(N||D,D,r,this.chart.name,new t.ChartEngine.YAxis({name:D})):y=D,p?l.panel=y:l.params.panel=y}if(D){if(p){l.parameters||(l.parameters={}),l.parameters.panelName=D,a.Q4q(4),O=a.E4q(0,"700820519"),663880341,a.Q4q(7),H=a.E4q(1349629056,"2");for(var ae=1;a.d6D(ae.toString(),ae.toString().length,22328)!==O;ae++)this.highlightedDraggable=t.getFn("Studies.replaceStudy")(this,l.inputs.id,l.type,l.inputs,l.outputs,l.parameters,null,l.study),H+=2;663880341!==a.f6D(H.toString(),H.toString().length,33056)&&(this.highlightedDraggable=t.getFn("")(this,l.inputs.id,l.type,l.inputs,l.outputs,l.parameters,1,l.study))}else if(d)for(var re in l.seriesParams)R=l.seriesParams[re],j=null,l.params.yAxis&&l.params.yAxis!==this.chart.panel.yAxis&&((j=l.params.yAxis).name=l.params.name),this.modifySeries(R.id,{panel:D,yAxis:j});if(I>-1){for(b in z={},V=0,this.panels)I==V++&&(z[D]=this.panels[D]),b!=D&&(z[b]=this.panels[b]);z[D]||(z[D]=this.panels[D]),this.panels=z}this.checkForEmptyPanel(y);for(var ne=0;ne<f.length;ne++)f[ne].params?this.checkForEmptyPanel(f[ne].params.name):this.checkForEmptyPanel(f[ne].name);this.adjustPanelPositions()}else if(A){if("a","l","l",Q=function(e,i,r,n){var s,o;if("study"==r&&(i.parameters||(i.parameters={}),n?i.parameters.yaxisDisplayValue=n.position:delete i.parameters.yaxisDisplayValue,s=t.getFn("Studies.replaceStudy")(e,i.inputs.id,i.type,i.inputs,i.outputs,i.parameters,i.panel,i.study)),a.w01(),"renderer"==r)for(var l in i.seriesParams)o=i.seriesParams[l],s=e.modifySeries(o.id,{panel:D,yAxis:n});return s},(B=h&&"all"==h.dropzone)||(m?(l.position=A,this.layout.studies&&(U=this.layout.studies[l.name])&&(U.parameters||(U.parameters={}),U.parameters.yaxisDisplayValue=A)):p?this.highlightedDraggable=Q(this,l,"study",{position:A}):d&&("ren","de","rer",Q(this,l,"renderer",new t.ChartEngine.YAxis({name:l.params.name||t.uniqueID(),position:A}))),v=this.highlightedDraggable.getYAxis(this)),!C||!B||m){for(W=v,B&&v==this.chart.panel.yAxis&&(W=h),q=0;q<o.yaxisLHS.length;q++)if(o.yaxisLHS[q]==W){o.yaxisLHS.splice(q,1);break}for(q=0;q<o.yaxisRHS.length;q++)if(o.yaxisRHS[q]==W){o.yaxisRHS.splice(q,1);break}}if(B)if(this.getYAxisByName(o,v.name)==o.yAxis&&this.electNewPanelOwner(o,h),m){for(X in Z=v,G=h,v==this.chart.panel.yAxis&&(Z=h,G=v),Z.studies)Q(this,this.layout.studies[Z.studies[X]],"study",G===this.chart.panel.yAxis?null:{position:G.name});for(X in Z.renderers)"re","n","de","rer",Q(this,this.chart.seriesRenderers[Z.renderers[X]],"renderer",G);this.highlightedDraggable=G}else p?this.highlightedDraggable=Q(this,l,"study",{position:h.name}):d&&("re","nde","rer",Q(this,l,"renderer",h));else{for("lef","t","none"==v.position&&(v.width=t.ChartEngine.YAxis.prototype.width),v.position=A,Y="left"==A?o.yaxisLHS:o.yaxisRHS,q=0;q<Y.length;q++){if(Y[q]!==v)if("rig","h","t","left"==Y[q].dropzone)Y.splice(q,0,v);else{if("right"!=Y[q].dropzone)continue;a.Q4q(0),Y.splice(a.q4q(1,q),0,v)}break}q==Y.length&&Y.push(v)}}for(var se in this.panels)for(J=(K=this.panels[se]).yaxisLHS.concat(K.yaxisRHS),q=0;q<J.length;q++)J[q].height=K.yAxis.height,this.calculateYAxisMargins(J[q]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),this.savePanels()}}}},f=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).NameValueStore=t.NameValueStore||function(){},t.NameValueStore.prototype.toJSONIfNecessary=function(e){if(e.constructor==String)return e;try{return JSON.stringify(e)}catch(t){return R.P4q(0),console.log(R.q4q(e,"Cannot convert to JSON: ")),null}},t.NameValueStore.prototype.fromJSONIfNecessary=function(e){try{return JSON.parse(e)}catch(t){return e}},t.NameValueStore.prototype.get=function(e,i){var a;a=t.localStorage.getItem(e),R.w01(),i&&i(null,this.fromJSONIfNecessary(a))},t.NameValueStore.prototype.set=function(e,i,a){t.localStorageSetItem(e,this.toJSONIfNecessary(i)),a&&a(null)},t.NameValueStore.prototype.remove=function(e,i){R.e01(),t.localStorage.removeItem(e),i&&i(null)}},y=function(e){var t;function i(){}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine||(t.ChartEngine=function(){}),i.fetchInitialData=function(e,t,i,a,r){},i.fetchUpdateData=function(e,t,i,a){},i.fetchPaginationData=function(e,t,i,a,r){},i.subscribe=function(e){},i.unsubscribe=function(e){},t.QuoteFeed=t.QuoteFeed||function(){},t.QuoteFeed.prototype.fetch=function(e,t){R.w01(),this.v2QuoteFeed||console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()")},t.QuoteFeed.prototype.announceError=function(e,i){R.e01(),e.suppressErrors||i.suppressAlert||e.startDate||e.endDate||i.error&&t.alert("Error fetching quote:"+i.error)},t.QuoteFeed.prototype.multiFetch=function(e,t){return R.e01(),0===e.length&&t([]),e[0].stx.driver.multiFetch(e,t)},t.QuoteFeed.Subscriptions=function(){R.w01(),this.subscriptions=[]},t.inheritsFrom(t.QuoteFeed.Subscriptions,t.QuoteFeed),t.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(e){var t,i,a,r,n;R.e01(),a=e.getSymbols({"breakout-equations":!0}),r=this,a=a.filter((function(t){var i;return(i=e.quoteDriver.getQuoteFeed(t))&&i.engine==r}));for(var s=0;s<this.subscriptions.length;s++)this.subscriptions[s].match=!1;for(var o=0;o<a.length;o++)for("month"!=(n=(i=a[o]).interval)&&"week"!=n||e.dontRoll||("d","a","y",n="day"),i.interval=n,i.period=1,i.match=!1,isNaN(i.interval)||(i.period=i.interval,i.interval=i.timeUnit,i.interval||(i.interval="minute")),delete i.periodicity,delete i.timeUnit,delete i.setSpan,s=0;s<this.subscriptions.length;s++){if((t=this.subscriptions[s]).symbol==i.symbol&&t.period==i.period&&t.interval==i.interval){i.match=!0,t.match=!0;break}t.symbol!=i.symbol?("symb","ol","period"!=i.reason&&(i.reason="symbol"),t.reason="symbol"):(i.reason="period",t.reason="period")}this.subscriptions=this.subscriptions.filter((function(t){return t.match||(t.stx||(t.stx=e),r.unsubscribe(t)),t.match})),a.forEach((function(t){R.w01(),t.match||("ini","t","ia","lize",t.stx||(t.stx=e),t.reason||(t.reason="initialize"),t.symbol!==e.chart.symbol&&(t.series=!0),r.subscribe(t),r.subscriptions.push(t))}))},t.QuoteFeed.Subscriptions.prototype.fetch=function(e,t){var i;R.w01(),i=this,this.fetchFromSource(e,(function(a){a.error||i.checkSubscriptions(e.stx),t(a)}))},t.QuoteFeed.Subscriptions.prototype.subscribe=function(e){console.log("subscribe",e)},t.QuoteFeed.Subscriptions.prototype.unsubscribe=function(e){console.log("unsubscribe",e)},t.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(e,t){console.log("Please provide implementation of fetchFromSource")},t.QuoteFeed.prototype.requiresImmediateRefresh=function(e){return R.w01(),!1},t.ChartEngine.prototype.attachQuoteFeed=function(e,i,a){var r;R.w01(),i||(i={}),"function"!==H(e.fetchInitialData)&&"function"!==H(e.fetchUpdateData)&&"function"!==H(e.fetchPaginationData)||("function"!=typeof e.fetchPaginationData&&"function"!=typeof e.fetchUpdateData&&(i.noLoadMore=!0),e.v2QuoteFeed=!0,["multiFetch","announceError","requiresImmediateRefresh"].forEach((function(i){e[i]||!1===e[i]||(e[i]=t.QuoteFeed.prototype[i])})),"function"==typeof e.subscribe&&(e.checkSubscriptions=t.QuoteFeed.Subscriptions.prototype.checkSubscriptions,e.subscriptions=[])),i.maximumTicks||(i.maximumTicks=e.maxTicks?e.maxTicks:2e4),(!i.bufferSize||i.bufferSize<0)&&(R.Q4q(8),i.bufferSize=R.q4q("0",0)),i.bufferSize=Math.round(i.bufferSize),i.intervalTimer=null,this.quoteDriver&&(!a&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(r=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:e,behavior:i,filter:a}),r&&this.quoteDriver.quoteFeeds.push(r),this.quoteDriver.updateChartLoop(null,i))),this.quoteDriver||(this.quoteDriver=new t.ChartEngine.Driver(this,e,i,a)),a||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},t.ChartEngine.prototype.detachQuoteFeed=function(e){var t;if(t=this.quoteDriver){for(var i=t.quoteFeeds.length-1;i>=0;i--)e&&t.quoteFeeds[i].quoteFeed!=e||(t.die(t.quoteFeeds[i]),t.quoteFeeds.splice(i,1));t.quoteFeeds.length?e==t.quoteFeed&&(t.quoteFeed=t.quoteFeeds[0].quoteFeed,t.behavior=t.quoteFeeds[0].behavior):t=this.quoteDriver=null}},t.ChartEngine.Driver=function(e,i,a,r){this.stx=e,a||(a={}),this.quoteFeeds=[{engine:i,behavior:a,filter:r}],this.id=t.uniqueID(!0),this.behavior=a,this.quoteFeed=i,this.loadingNewChart=!1,this.updatingChart=!1,r||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},t.ChartEngine.Driver.prototype.die=function(e){for(var t,i=0;i<this.quoteFeeds.length;i++)e&&this.quoteFeeds[i]!=e||(t=this.quoteFeeds[i].behavior).intervalTimer&&(clearInterval(t.intervalTimer),t.intervalTimer=-1)},t.ChartEngine.Driver.prototype.getQuoteFeed=function(e){var t;R.w01(),e.symbolObject||(e.symbolObject={symbol:e.symbol});for(var i=0;i<this.quoteFeeds.length;i++)if((t=this.quoteFeeds[i]).behavior.generator==e.symbolObject.generator&&(!t.filter||t.filter(e)))return t;return null},t.ChartEngine.Driver.prototype.multiFetch=function(e,i){var a,r,n;0===e.length&&i([]),a={counter:0,finished:e.length,results:[]};for(var s=0;s<e.length;s++)(r=e[s]).stx.isEquationChart(r.symbol)?t.fetchEquationChart(r,o(r,a,i)):(n=this.getQuoteFeed(r))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.SERIES,n.engine,r,o(r,a,i));function o(e,t,i){return function(a){var r;t.results.push({dataCallback:a,params:e}),t.counter++,t.counter>=t.finished&&(r=t.results,t.results=[],i(r))}}},t.ChartEngine.Driver.prototype.updateSubscriptions=function(){R.w01();for(var e=0;e<this.quoteFeeds.length;e++)this.quoteFeeds[e].checkSubscriptions&&this.quoteFeeds[e].checkSubscriptions(this.stx)},t.ChartEngine.Driver.prototype.loadDependents=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M;if(R.w01(),n=this,!r)return s=0,o=[],l=[],h=function(e){i&&++s>=n.quoteFeeds.length&&i(null)},c=function(t){++s<o.length||(l.length||h(),l.forEach((function(t){n.loadDependents(e,h,a,t.behavior)})))},n.quoteFeeds.forEach((function(e){R.w01(),e.behavior.generator?l.push(e):o.push(e)})),void o.forEach((function(t){R.w01(),n.loadDependents(e,c,a,t.behavior)}));for(u in{},d=e.stx,m=(p=e.chart).series,d.masterData,y=[],v={},x=a==t.QuoteFeed.UPDATE,b=a==t.QuoteFeed.PAGINATION,S=t.shallowClone(e),m){if(C=(g=m[u]).parameters,!x){if(!e.future&&!1===g.moreAvailable)continue;if(e.future&&!0===g.upToDate)continue}if(!g.loading&&(!1!==C.loadData&&(!x&&!b||g.endPoints&&Object.keys(g.endPoints).length)&&(!C.data||C.data.useDefaultQuoteFeed)&&(f=C.symbolObject).symbol&&f.generator==r.generator&&(S.symbolObject=f,S.symbol=f.symbol,k=this.getQuoteFeed(S),r==(k&&k.behavior)))){w=!0,x||(g.loading=!0);for(var P=0;P<y.length;P++)t.symbolEqual(y[P],f)&&(w=!1);w&&(y.push(f),v[f.symbol]=g.endPoints)}}D=[];for(var F=0;F<y.length;F++)f=y[F],(A=t.shallowClone(e.originalState)).symbol=f.symbol,A.symbolObject=f,A.update||A.future?(A.endDate||(A.endDate=e.endDate),A.startDate=v[f.symbol].end):(A.startDate||(A.startDate=e.startDate),A.endDate=b&&!e.future?v[f.symbol].begin:e.endDate,A.ticks=e.ticks),D.push(A);if(!D.length&&x)return(T={appending:e.appending||e.originalState.update}).appending&&(T.appendToDate=e.startDate),d.createDataSet(null,null,T),e.nodraw||d.draw(),void(i&&i(null));this.multiFetch(D,(M=x,function(s){var o,l,h,c,u,m,f,y,v,x;R.e01(),o=null;for(var b=0;b<s.length;b++)if(!(h=(l=s[b]).dataCallback.error)&&0!==h){c=l.params.symbolObject,m=(u=l.dataCallback).quotes,f=u.moreAvailable,y=u.upToDate,v=[],d.getSeries&&(v=d.getSeries({symbolObject:c})),x=!1;for(var S=0;S<v.length;S++)g=v[S],M||(e.future?(g.upToDate=!0===y||y||m.length<=(l.params.startDate?1:0),d.isHistoricalModeSet&&m.length<2&&(g.mostRecentForwardAttempt=new Date)):g.moreAvailable=!1!==f&&(f||m.length>(l.params.endDate?1:0)),g.loading=!1),x=g.parameters.fillGaps||x;m=n.cleanup(d,g,m,a,e,x),d.updateChartData(m,p,{secondarySeries:c.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),m&&m.length&&(!o||o>m[0].DT)&&(o=m[0].DT)}s.length&&(d.createDataSet(null,null,{appending:e.originalState.update||e.future,appendToDate:o}),e.nodraw||d.draw(),a==t.QuoteFeed.INITIAL&&n.resetRefreshInterval(r.refreshInterval,r)),i&&i(null)}))},t.ChartEngine.Driver.prototype.cleanup=function(e,i,a,r,n,s){var o,l,h,c,u;return R.w01(),e.doCleanupDates(a,e.layout.interval),!n.missingBarsCreated&&a&&a.length&&e.cleanupGaps&&!1!==s&&(h=n.chart,i?(h=i,l=i.parameters.symbol||i.id):l=h.defaultPlotField,r!=t.QuoteFeed.PAGINATION||n.loadMoreReplace?r==t.QuoteFeed.UPDATE&&h.endPoints.end&&h.endPoints.end<a[0].DT&&("shi","ft",u=e.getFirstLastDataRecord(e.masterData,l,!0),i&&(u=u[l]),a.unshift(u),o="shift"):h.endPoints.begin&&h.endPoints.begin>a[a.length-1].DT&&(c=e.getFirstLastDataRecord(e.masterData,l,!1),i&&(c=c[l]),a.push(c),o="pop"),a=e.doCleanupGaps(a,n.chart,{cleanupGaps:s,noCleanupDates:!0}),o&&a[o]()),a},t.ChartEngine.Driver.prototype.updateChart=function(e){var i,a,r,n,s,o,l,h,c;if(!this.updatingChart&&!this.loadingNewChart){for(var u in i=Object.keys(this.stx.charts).length,R.P4q(16),a=R.q4q("0",2147483647),r=this.stx,n=r.layout.interval,s=r.layout.timeUnit,r.charts)(o=r.charts[u]).symbol&&(l=this.makeParams(o.symbol,o.symbolObject,o),h=this.getQuoteFeed(l),o.masterData&&o.masterData.length&&(l.startDate=o.endPoints.end),l.update=!0,l.originalState=t.shallowClone(l),e&&e!=l.behavior?this.loadDependents(l,null,t.QuoteFeed.UPDATE,e):(this.updatingChart=!0,c=d(this,l,o.symbol,h),r.isEquationChart(l.symbol)?t.fetchEquationChart(l,c):h&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.UPDATE,h.engine,l,c)));R.e01()}function d(e,o,l,h){return o.behavior.prefetchAction&&o.behavior.prefetchAction("updateChart"),function(c){var u,d;a++,(u=o.chart).masterData,l!=u.symbol||n!=r.layout.interval||s!=r.layout.timeUnit||r.isHistoricalMode()?e.updatingChart=!1:(c.error?h&&h.engine.announceError(o.originalState,c):(d=c.quotes,d=e.cleanup(r,null,d,t.QuoteFeed.UPDATE,o),r.updateChartData(d,u,{noCreateDataSet:!0,noCleanupDates:!0}),u.attribution=c.attribution),a==i&&(e.updatingChart=!1),o.behavior.callback&&o.behavior.callback(o),e.loadDependents(o,null,t.QuoteFeed.UPDATE,o.behavior),R.e01())}}},t.ChartEngine.Driver.prototype.updateChartLoop=function(e,t){var i,a;if(R.e01(),t||(t=this.behavior),-1!=t.intervalTimer){t.intervalTimer&&clearInterval(t.intervalTimer),i=function(e,t){return function(){t.noUpdate||(R.e01(),e.updateChart(t))}};for(var r=0;r<this.quoteFeeds.length;r++)t!=(a=this.quoteFeeds[r].behavior)||a.noUpdate||(e||0===e||(e=a.refreshInterval),e&&(t.intervalTimer=setInterval(i(this,a),1e3*e)))}},t.ChartEngine.Driver.prototype.resetRefreshInterval=function(e,t){(t||this.behavior).refreshInterval=e,this.updateChartLoop(null,t),R.w01()},t.ChartEngine.Driver.prototype.loadAll=function(e,t){var i,a;i=this,a=0,R.w01(),function r(){return function(n){R.w01(),n?t(n):!e.moreAvailable&&e.upToDate?t(null):++a>20?t("error, moreAvailable not implemented correctly in QuoteFeed"):(e.loadingMore=!1,i.checkLoadMore(e,!0,!0,r(),!0))}}()()},t.ChartEngine.Driver.prototype.checkLoadMore=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M=R;if(s=this.stx,this,e.loadingMore||this.loadingNewChart)return e.initialScroll=e.scroll,void(r&&r(null));if(s.isHistoricalMode()||(s.isHistoricalModeSet=!1),o=this.makeParams(e.symbol,e.symbolObject,e),s.currentlyImporting)r&&r(null);else{if(l=o.behavior,h=e.dataSet,u=1e3*(l.forwardPaginationRetryInterval||5),d=!1,p=!1,e.dataSet.length)for(var P in e.series)(m=e.series[P]).loading||!1!==m.parameters.loadData&&(c=!m.mostRecentForwardAttempt||m.mostRecentForwardAttempt.getTime()+u<Date.now(),!1!==m.moreAvailable&&q(m)&&(d=!0),c&&!m.upToDate&&I(m)&&(p=!0));if(c=!e.mostRecentForwardAttempt||e.mostRecentForwardAttempt.getTime()+u<Date.now(),g=(q(e)||i)&&!1!==e.moreAvailable,f=(I(e)||i)&&!e.upToDate&&c,y=g||d,v=s.isHistoricalModeSet&&!y&&(f||p),x=s.layout.interval,b=s.layout.timeUnit,S=!1,C=l.findHeadOfData||e.masterData&&e.masterData.length,!l.noLoadMore&&C&&(v||!s.maxDataSetSize||e.dataSet.length<s.maxDataSetSize)&&(y||v)){-237811129,942957796,k=2;for(var F=1;-237811129!==M.d6D(F.toString(),F.toString().length,19243);F++)e.initialScroll=e.scroll,k+=2;if(942957796!==M.d6D(k.toString(),k.toString().length,80043)&&(e.initialScroll=e.scroll),e.loadingMore=!0,(o=this.makeParams(e.symbol,e.symbolObject,e)).pagination=!0,o.future=v,e.masterData&&e.masterData.length)v?o.startDate=e.endPoints.end:o.endDate=e.endPoints.begin,v&&!o.startDate?(w=s.getFirstLastDataRecord(e.masterData,"DT",!0))&&(o.startDate=w.DT):y&&!o.endDate&&("D","T",(w=s.getFirstLastDataRecord(e.masterData,"DT"))&&(o.endDate=w.DT));else{1587520734,447589407,D=2;for(var _=1;1587520734!==M.f6D(_.toString(),_.toString().length,54357);_++)o.endDate=new Date,D+=2;447589407!==M.f6D(D.toString(),D.toString().length,25388)&&(o.endDate=new Date),o.endDate=new Date}if(o.originalState=t.shallowClone(o),o.nodraw=n,!g&&d||!f&&p)return this.loadingMore=!0,this.loadDependents(o,(function(t){e.loadingMore=!1,r&&r(t)}),t.QuoteFeed.PAGINATION),void(r&&r(null));s.fetchMaximumBars[s.layout.aggregationType]&&(o.fetchMaximumBars=!0,!s.maxMasterDataSize||l.maximumTicks<s.maxMasterDataSize?o.ticks=l.maximumTicks:o.ticks=s.maxMasterDataSize),E=this,L=o,l.prefetchAction&&l.prefetchAction("checkLoadMore"),A=function(e){var i,a,s,o,h,c,u,d,p;i=E.stx,a=L.chart,M.w01(),L.symbol==a.symbol&&x==i.layout.interval&&b==i.layout.timeUnit&&(L.loadMore||(L.chart.loadingMore=!1),e.error?(E.quoteFeed.announceError(L.originalState,e),L.chart.loadingMore=!1,r&&r(e.error)):(e.quotes||(e.quotes=[]),s=e.quotes,o=a.masterData,(s=E.cleanup(i,null,s,t.QuoteFeed.PAGINATION,L)).length&&a.masterData&&a.masterData.length&&(L.future?(h=s[0]).DT&&h.DT==a.masterData[a.masterData.length-1].DT&&o.pop():(c=s[s.length-1]).DT&&+c.DT==+a.masterData[0].DT&&s.pop()),L.future?(e.upToDate?a.upToDate=!0:(!1===e.upToDate||s.length>1)&&(a.upToDate=!1),i.isHistoricalModeSet&&s.length<2&&(a.mostRecentForwardAttempt=new Date)):e.moreAvailable||!1!==e.moreAvailable&&s.length?a.moreAvailable=!0:a.moreAvailable=!1,E.tickMultiplier=s.length?2:2*E.tickMultiplier,u=s[0]?s[0].DT:L.startDate,d=s[0]?s[s.length-1].DT:L.endDate,(!a.endPoints.begin||a.endPoints.begin>u)&&(a.endPoints.begin=u),(!a.endPoints.end||a.endPoints.end<d)&&(a.endPoints.end=d),a.loadingMore=!1,L.loadMoreReplace?i.setMasterData(s,a,{noCleanupDates:!0}):L.future?i.updateChartData(s,a,{noCreateDataSet:!0,noCleanupDates:!0}):t.addMemberToMasterdata({stx:i,chart:a,data:s,fields:["*"],noCleanupDates:!0}),L.future&&(p={appending:!0,appendToDate:s[0]&&s[0].DT}),i.createDataSet(void 0,void 0,p),n||i.draw(),l.callback&&l.callback(L),E.loadDependents(L,r,t.QuoteFeed.PAGINATION)))},s.isEquationChart(o.symbol)?t.fetchEquationChart(o,A):(v&&(o.appending=!0),(T=this.getQuoteFeed(o))&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,T.engine,o,A)),S=!0}var E,L;!S&&r&&r(null)}function q(t){return M.e01(),!t.endPoints.begin||h.length-e.scroll<l.bufferSize||h.length-e.scroll-s.tickFromDate(t.endPoints.begin,e)<l.bufferSize}function I(t){return M.e01(),!t.endPoints.end||e.scroll-e.maxTicks+1<l.bufferSize||s.tickFromDate(t.endPoints.end,e,null,!0)-h.length+e.scroll-e.maxTicks+2<l.bufferSize}},R.e01(),t.ChartEngine.Driver.prototype.extendHistoricalData=function(e){var i,a,r=e.from,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},s=this.stx,o=s.chart,l=s.layout,h=o.masterData,c=o.dataSet,u=l.interval,d=l.timeUnit;if(i=this.makeParams(o.symbol,o.symbolObject,o),a=this.getQuoteFeed(i),o.loadingMore||this.loadingNewChart||s.currentlyImporting||!h.length||!a||s.maxDataSetSize&&c.length>s.maxDataSetSize)return n(null);function p(e,i){return R.w01(),function(a){var r=a.quotes,h=a.moreAvailable,c=a.error;if(i.symbol===o.symbol&&u===l.interval&&d===l.timeUnit){if(o.loadingMore=!1,c)return n(c);r=e.cleanup(s,null,r,t.QuoteFeed.PAGINATION,i),o.moreAvailable="boolean"==typeof h?h:!!r.length,o.endPoints.begin=r[0].DT,t.addMemberToMasterdata({stx:s,chart:o,data:r,fields:["*"],noCleanupDates:!0}),R.e01(),s.createDataSet(),s.draw()}}}o.loadingMore=!0,i.originalState=Object.assign({},i),i.startDate=r,i.endDate=h[0].DT,t.ChartEngine.Driver.fetchData(t.QuoteFeed.PAGINATION,a.engine,i,p(this,i))},t.ChartEngine.Driver.prototype.barsToFetch=function(e){var i,a;return"m","o","n","th",t.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),i=this.stx.layout.interval,a=e.stx.layout.periodicity,"month"!=i&&"week"!=i||this.stx.dontRoll||(a*="week"==i?7:30),e.stx.chart.maxTicks*a*this.tickMultiplier},t.ChartEngine.Driver.determineStartDate=function(e,t,i){return this.determineStartOrEndDate(e,t,i,!0)},t.ChartEngine.Driver.determineStartOrEndDate=function(e,t,i,a){var r;return r=a||e.fetchMaximumBars?e.startDate||t.previous(i):e.future?t.next(i):new Date,R.e01(),r},t.ChartEngine.Driver.prototype.makeParams=function(e,i,a){var r,n,s,o,l,h,c,u;n=(r=this.stx).layout.interval,s=this.barsToFetch({stx:r}),"month"!=n&&"week"!=n||r.dontRoll||("da","y",n="day"),l=(o=this.getQuoteFeed({interval:n,symbol:e,symbolObject:i}))&&o.behavior,(h=t.shallowClone(l)||{}).behavior=l,c=!1,u=[],a.market&&a.market.getSessionNames&&(u=a.market.getSessionNames()),r.extendedHours?r.extendedHours.filter?c=!0:(c=r.layout.extended,u=u.filter((function(e){return e.enabled||r.layout.marketSessions[e.name]}))):u=u.filter((function(e){return e.enabled}));for(var d=0;d<u.length;d++)u[d]=u[d].name;return t.extend(h,{stx:r,symbol:e,symbolObject:i,chart:a,interval:n,extended:c,period:1,ticks:s,additionalSessions:u,quoteDriverID:this.id},!0),h.symbolObject||(h.symbolObject={symbol:e}),isNaN(h.interval)||("m","inute",h.period=parseInt(h.interval,10),h.interval=r.layout.timeUnit,h.interval||(h.interval="minute")),h},t.ChartEngine.Driver.prototype.newChart=function(e,i){var a,r,n,s,o,l,h,c,u,d,p;a=this.stx,r=e.symbol,n=a.layout.interval,s=a.layout.timeUnit,(o=e.chart).moreAvailable=null,o.upToDate=null,o.loadingMore=!1,o.attribution=null,l=this.makeParams(r,e.symbolObject,o),t.extend(l,e,!0),h=this.getQuoteFeed(l),c=l.behavior,(a.fetchMaximumBars[a.layout.aggregationType]||e.fetchMaximumBars)&&(!a.maxMasterDataSize||c.maximumTicks<a.maxMasterDataSize?l.ticks=c.maximumTicks:l.ticks=a.maxMasterDataSize,l.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,l.originalState=t.shallowClone(l),d=this,p=l,R.e01(),c.prefetchAction&&c.prefetchAction("newChart"),u=function(o){var l,u,m,g;if(l=p.chart,u=o.quotes,m=!1,r==l.symbol&&n==a.layout.interval&&s==a.layout.timeUnit){for(var f in d.loadingNewChart=!1,o.error?h.engine.announceError(p.originalState,o):(u=d.cleanup(a,null,u,t.QuoteFeed.INITIAL,p),a.setMasterData(u,l,{noCleanupDates:!0}),l.endPoints={},l.endPoints.begin=u[0]?u[0].DT:p.startDate,l.endPoints.end=u[0]?u[u.length-1].DT:p.endDate,u?(l.moreAvailable=!1!==o.moreAvailable,l.upToDate=o.upToDate):(l.moreAvailable=!1,l.upToDate=!0),l.attribution=o.attribution,e.initializeChart&&a.initializeChart(),a.createDataSet(),m=!0),l.series)l.series[f].endPoints={},l.series[f].moreAvailable=null,l.series[f].upToDate=null;(g=l.masterData)&&g.length&&(p.startDate=g[0].DT,p.endDate=g[g.length-1].DT),c.callback&&c.callback(p),d.loadDependents(p,(function(){m&&!p.nodraw&&d.stx.home(),i&&i(o.error),d.stx.dispatch("newChart",{stx:d.stx,symbol:d.stx.chart.symbol,symbolObject:d.stx.chart.symbolObject,moreAvailable:d.stx.chart.moreAvailable,upToDate:d.stx.chart.upToDate,quoteDriver:d}),d.resetRefreshInterval(c.refreshInterval,c)}),t.QuoteFeed.INITIAL)}else i&&i("orphaned")},this.stx.isEquationChart(l.symbol)?t.fetchEquationChart(l,u):h&&t.ChartEngine.Driver.fetchData(t.QuoteFeed.INITIAL,h.engine,l,u)},t.QuoteFeed.INITIAL=1,R.Q4q(1),t.QuoteFeed.UPDATE=R.E4q("2",1),t.QuoteFeed.PAGINATION=3,t.QuoteFeed.SERIES=4,t.ChartEngine.Driver.fetchData=function(e,i,a,r){if(!a.symbol)return r({});i.v2QuoteFeed?"function"!=typeof i.subscribe?t.ChartEngine.Driver.fetchDataInContext(e,i,a,r):t.ChartEngine.Driver.fetchDataInContext(e,i,a,function(e){e.error||this.checkSubscriptions(a.stx),r(e)}.bind(i)):(a.stx.convertToDataZone(a.startDate),a.stx.convertToDataZone(a.endDate),i.fetch(a,r))},t.ChartEngine.Driver.fetchDataInContext=function(e,i,a,r){var n,s,o,l,h,c,u,d,p,m;if(R.e01(),(h=a.stx).chart.market.newIterator)switch(e===t.QuoteFeed.SERIES&&(a.series=!0,e=t.QuoteFeed.INITIAL,a.endDate&&!a.startDate||a.future?e=t.QuoteFeed.PAGINATION:a.startDate&&!a.endDate&&(e=t.QuoteFeed.UPDATE)),c=Math.min(a.ticks,a.maximumTicks),i.maxTicks&&(c=Math.min(c,i.maxTicks)),u=a.symbolObject.masterSymbol||a.symbol,e){case t.QuoteFeed.UPDATE:if(h.isHistoricalModeSet)return void(h.quoteDriver.updatingChart=!1);if(a.startDate)d=a.startDate;else{-1621811407,1694710245,p=2;for(var g=1;-1621811407!==R.f6D(g.toString(),g.toString().length,23799);g++)(d=new Date).setHours(4,7,3,1),p+=2;1694710245!==R.f6D(p.toString(),p.toString().length,67208)&&(d=new Date).setHours(0,0,0,0)}"function"==typeof i.fetchUpdateData&&i.fetchUpdateData(u,h.convertToDataZone(d),a,r);break;case t.QuoteFeed.INITIAL:n={begin:l=a.endDate||new Date,interval:a.interval,periodicity:"tick"==a.interval?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},s=h.chart.market.newIterator(n),o=t.ChartEngine.Driver.determineStartDate(a,s,c),a.endDate&&(l=a.endDate),"function"==typeof i.fetchInitialData&&i.fetchInitialData(u,o,h.convertToDataZone(l),a,r);break;case t.QuoteFeed.PAGINATION:if(n={begin:a.endDate||a.startDate,interval:a.interval,periodicity:"tick"==a.interval?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},s=h.chart.market.newIterator(n),m=t.ChartEngine.Driver.determineStartOrEndDate(a,s,c,!a.future),o=a.startDate||m,l=a.endDate||m,a.startDate?a.stx.convertToDataZone(o):a.stx.convertToDataZone(l),"function"==typeof i.fetchPaginationData){if(h.maxMasterDataSize&&h.maxMasterDataSize<=h.masterData.length)return;i.fetchPaginationData(u,o,l,a,(function(e){l>=Date.now()&&(h.isHistoricalModeSet=!1),R.w01(),r&&r(e)}))}break;default:console.error("Illegal fetchData constant")}else console.error("quoteFeed feature requires first activating market feature.")}},v=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.addSeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S;if(r="addSeri",r+="es",n=this.runPrepend("addSeries",arguments))return n;function C(e){return R.w01(),function(t){var r,n;t.error||(r=t.quotes,n=i.fillGaps,g.cleanupGaps||(n=!1),r=g.doCleanupGaps(r,g.chart,{cleanupGaps:n}),g.updateChartData(r,g.chart,{secondarySeries:o,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),l.loading=!1,l.moreAvailable=t.moreAvailable,l.upToDate=t.upToDate,k(g,l)),null===i.action||d.length||g.dispatch(f?"symbolImport":"symbolChange",{stx:g,symbol:e.symbol,symbolObject:e.symbolObject,action:i.action,id:l.id,parameters:i}),a&&a.call(g,t.error,l)}}function k(a,r){var n,s,o,l;if("lay","o","u","t","Lin","es",n=i.renderer||"Lines",s=i.name||e,!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||f||(i.yAxis.name=s),i.renderer||i.name||i.color||i.chartType){if(!(o=a.getSeriesRenderer(s))){if(l={name:s,overChart:!1!==i.overChart,useChartLegend:!0,highlightable:i.highlightable,dependentOf:i.dependentOf},i.chartType?(l=t.extend({panel:i.panel,yAxis:i.yAxis},l),o=t.Renderer.produce(i.chartType,l)):(t.ensureDefaults(i,{name:l.name,overChart:!1!==i.overChart,useChartLegend:!0}),o=new t.Renderer[n]({params:i})),!o)return;a.setSeriesRenderer(o)}o.attachSeries(e,i),!1!==i.loadData&&o.ready(),R.w01(),a.layout.symbols=a.getSymbols({"include-parameters":!0,"exclude-studies":!0}),a.changeOccurred("layout")}}return s=e||null,o=e,e||(e=t.uniqueID()),i&&!0===i.panel&&(i.panel=e),(l={parameters:i?t.clone(i):{},yValueCache:[],display:s,id:e,loading:!i||!1!==i.loadData}).parameters.yAxis=i&&i.yAxis,(i=l.parameters).symbol&&(o=i.symbol),i.isComparison&&(i.shareYAxis=!0),!i.yAxis||i.yAxis instanceof t.ChartEngine.YAxis||(i.yAxis=new t.ChartEngine.YAxis(i.yAxis)),t.ensureDefaults(i,{chartName:this.chart.name,symbolObject:{symbol:o},panel:this.chart.panel.name,fillGaps:!1,action:"add-series"}),"display"in i&&(l.display=i.display),h=this.charts[i.chartName],c=i.symbolObject,o=i.symbol=c.symbol,l.display||(l.display=o||i.field),l.endPoints={},i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),R.e01(),i.isComparison&&(u="tran",u+="sparent",void 0===i.gapDisplayStyle&&(i.gapDisplayStyle=u)),d=this.getSeries({symbolObject:c,chart:h,includeMaster:!0}),p=i.panel,this.panels[p]?i.yAxis||i.shareYAxis||(i.yAxis=new t.ChartEngine.YAxis({name:e,position:"none"})):((m=i.yAxis||new t.ChartEngine.YAxis).name=e,this.createPanel(e,p,null,null,m),this.preferences.dragging&&this.preferences.dragging.series||(i.highlightable=!1)),h.series[e]=l,g=this,f=this.currentlyImporting,!i.isComparison||!h.forcePercentComparison||i.panel!=h.panel.name||i.yAxis&&i.yAxis!=h.yAxis||this.setChartScale("percent"),(y=h.masterData)||(y=h.masterData=this.masterData=[]),v=y.length,i.data&&!i.data.useDefaultQuoteFeed?C({symbol:o,symbolObject:c,action:i.action})({quotes:i.data}):d.length?(l.endPoints=d[0].endPoints,k(this),a&&setTimeout((function(){a.call(g,null,l)}),0)):this.quoteDriver&&!1!==i.loadData?(b=(x=this.quoteDriver).makeParams(o,c,h),v&&(b.startDate=y[0].DT,b.endDate=this.isHistoricalMode()?y[y.length-1].DT:new Date),b.stx.isEquationChart(b.symbol)?t.fetchEquationChart(b,C(b)):(S=x.getQuoteFeed(b))&&t.ChartEngine.Driver.fetchData(4,S.engine,b,C(b))):(k(this),a&&a.call(this,null,l)),this.runAppend(r,arguments),l},t.ChartEngine.prototype.getSeries=function(e){var i,a,r,n,s,o;a=(i=e.chart?e.chart:this.chart).series,r=2;for(var l=1;1517188409!==R.f6D(l.toString(),l.toString().length,56685);l++)(n=e.symbolObject)||(n={symbol:e.symbol}),r+=2;for(var h in 535428486!==R.d6D(r.toString(),r.toString().length,60452)&&-(n=e.symbolObject)&&(n={symbol:e.symbol}),s=[],R.e01(),a)o=a[h],t.symbolEqual(n,o.parameters.symbolObject)&&s.push(o);return e.includeMaster&&t.symbolEqual(n,i.symbolObject)&&s.push({}),s},t.ChartEngine.prototype.modifySeries=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b;if(r="modifySeri",r+="e",r+="s",n="la",n+="you",n+="t",s="modifySerie",s+="s",!this.runPrepend(s,arguments)&&i&&("string"==typeof e?(l=e,o=(h=i.chartName?this.charts[i.chartName]:this.chart).series[l]):(l=(o=e).id,h=this.charts[o.parameters.chartName]),o)){for(var S in t.extend(o.parameters,i),c=o.parameters,h.seriesRenderers){p=(d=h.seriesRenderers[S]).params,m=d.seriesParams;for(var C=0;C<m.length;++C)if(g=m[C],y=(f=this.panels[g.panel])&&f.yAxis.name,g.id===o.id){!0===c.panel&&(c.panel=c.dependentOf||c.name),p.panel=c.panel,i.yAxis&&(p.yAxis=i.yAxis),c.panel!=g.panel&&p.name==y?this.electNewPanelOwner(g.panel):(v=this.getYAxisByName(c.panel,p.name))&&c.yAxis&&v.name!==c.yAxis.name&&(v.name=this.electNewYAxisOwner(v)),c.field||(c.field=null),d.attachSeries(l,t.ensureDefaults(c,g)),c.field||(c.field=c.subField),delete c.subField,!c.isComparison||!h.forcePercentComparison||c.panel!=h.panel.name||o.parameters.yAxis&&c.yAxis.name!=h.yAxis.name||this.setChartScale("percent"),u=d;break}}if(this.changeOccurred(n),t.getFn("Drawing.updateSource")(this,o.parameters.symbol||l,null,o.parameters.panel),this.runAppend(r,arguments),!0!==a){x=u.getDependents(this);for(var k=0;k<x.length;k++)this.modifySeries(x[k].params.name,{panel:u.params.panel,yAxis:o.parameters.yAxis},!0);(b=h.seriesRenderers[u.params.dependentOf])&&(b.params.yAxis==o.parameters.yAxis&&b.params.panel==u.params.panel||this.modifySeries(u.params.dependentOf,{panel:u.params.panel,yAxis:o.parameters.yAxis},!0))}return this.draw(),o}},t.ChartEngine.prototype.deleteSeries=function(e,t,i){var a,r,n,s,o,l,h,c,u;a="deleteSeri",a+="e",a+="s",r="symb",r+="o",r+="lC",r+="hange",this.runPrepend("deleteSeries",arguments)||(n=(i=i||{}).action?i.action:"remove-series","object"===H(e)?(s=e.id,t=t||this.charts[e.parameters.chartName]):(s=e,t=t||this.chart),(o=t.series[s])&&(l=o.parameters.loadData,h=o.parameters.symbolObject,delete t.series[s],c=this.getSeries({symbolObject:h,includeMaster:!0}),!1===l&&c.push(s),c.length||this.cleanMasterData(h,t),(u=this.panels[o.parameters.panel])&&this.checkForEmptyPanel(u),this.createDataSet(),c.length||this.dispatch(this.currentlyImporting?"symbolImport":r,{stx:this,symbol:h.symbol,symbolObject:h,id:s,action:n}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend(a,arguments)))},t.ChartEngine.prototype.removeSeries=function(e,t){var i,a,r,n,s,o,l;if(i="re",i+="moveSeri",i+="es",!this.runPrepend("removeSeries",arguments)){for(var h in r=!1,"object"===H(e)?(a=e.id,t=t||this.charts[e.parameters.chartName]):(a=e,t=t||this.chart),t.seriesRenderers){n=t.seriesRenderers[h],o=(s=this.panels[n.params.panel])&&s.yAxis.name;for(var c=n.seriesParams.length-1;c>=0;c--)n.seriesParams[c].id===a&&(n.removeSeries(a),n.seriesParams.length<1&&(this.removeSeriesRenderer(n),n.params.name==o?this.electNewPanelOwner(n.params.panel):this.checkForEmptyPanel(n.params.panel)||(l=this.getYAxisByName(s,n.params.name))&&(l.name=l.studies[0]||l.renderers[1])),r=!0)}r||this.deleteSeries(a,t),this.resetDynamicYAxis(),this.draw(),this.resizeChart(),R.w01(),this.runAppend(i,arguments)}},t.Comparison=t.Comparison||function(){},t.Comparison.initialPrice=100,t.Comparison.getInitialPrice=function(e){var i,a,r;if(e.initialComparisonPrice)return e.initialComparisonPrice;if(e.initialComparisonPrice=100,"number"==typeof(i=t.Comparison.initialPrice)&&(e.initialComparisonPrice=i),"string"==typeof i&&(e.series[i]||""===i)){a="Close",e.defaultPlotField&&(e.highLowBars||(a=e.defaultPlotField));for(var n=e.dataSet.length-e.scroll;n<e.dataSet.length;n++)if(r=e.dataSet[n]){if(r[i]&&r[i][a]){e.initialComparisonPrice=r[i][a];break}if(""===i&&r[a]){e.initialComparisonPrice=r[a];break}}}return e.initialComparisonPrice},t.Comparison.priceToPercent=function(e,i,a){var r;return r=t.Comparison.baseline||a,Math.round((a-r)/r*100*1e4)/1e4},t.Comparison.percentToPrice=function(e,i,a){var r;return r=t.Comparison.baseline||1,R.e01(),R.Q4q(64),R.q4q(r,"1",100,a)},t.Comparison.priceToRelative=function(e,i,a){var r,n;return R.w01(),r=t.Comparison.baseline||a,n=t.Comparison.getInitialPrice(i),R.P4q(65),R.E4q(a,n,r)},t.Comparison.relativeToPrice=function(e,i,a){var r,n;return r=t.Comparison.baseline||1,n=t.Comparison.getInitialPrice(i),R.Q4q(65),R.E4q(a,r,n)},t.Comparison.createComparisonSegmentInner=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T=R;for(r in a=[],i.series)(o=i.series[r].parameters).isComparison&&a.push(o.symbol);for(var M in l=["Close","Open","High","Low","iqPrevClose"],h=e.chart.highLowBars,T.e01(),i.defaultPlotField&&!h&&l.unshift(i.defaultPlotField),c=l[0],u=e.layout.studies)if(d=u[M],n=e.panels[d.panel],s=d.getYAxis(e),n&&n.yAxis==s){for(r in d.outputMap)l.push(r);for(var P=0;P<=2;P++)l.push(d.name+"_hist"+(P||""));d.referenceOutput&&l.push(d.referenceOutput+" "+d.name)}for(var F in e.plugins)if((p=e.plugins[F]).transformOutputs)for(r in p.transformOutputs)l.push(r);i.initialComparisonPrice=null,i.dataSegment=[],m=null,g=i.dataSet.length-i.scroll-1,e.startComparisonsAtFirstVisibleBar&&(T.Q4q(1),g+=T.E4q("1",1)),f=i.maxTicks+3;for(var _=0;_<=f;_++){if(_==f&&(_=-1),T.P4q(0),(y=T.q4q(_,g))<i.dataSet.length&&y>=0){if(x=(v=i.dataSet[y])[c],!m){if(0===x||null===x){if(_<0)break;continue}m=t.clone(v)}for(v.transform||(v.transform={cache:{},DT:v.DT,Date:v.Date}),!t.Comparison.baseline&&x&&(m=t.clone(v)),t.Comparison.baseline=m[c],b=0;b<l.length;b++)(v[r=l[b]]||0===v[r])&&(v.transform[r]=i.transformFunc(e,i,v[r]));for(b=0;b<a.length;b++)if(r=a[b],S=i.series[r],-1==_&&S&&S.parameters.isComparison)delete v.transform[r];else{C=v[r];for(var E=0;C&&E<l.length;E++)((k=C[l[E]])||0===k)&&((w=m[r]&&m[r][l[0]])||0===w||(m[r]||(m[r]={}),m[r][l[E]]=w=k*t.Comparison.baseline/v[c]),0!==w&&(D=t.Comparison.baseline||1,T.P4q(66),A=T.q4q(w,k,D),v.transform[r]||(v.transform[r]={}),v.transform[r][l[E]]=i.transformFunc(e,i,A)))}i.dataSegment.push(v)}else y<0&&i.dataSegment.push(null);if(_<0)break}},t.Comparison.priceFormat=function(e,t,i){var a,r,n,s=R;if(null==i||isNaN(i))return"";if(s.e01(),a=t.yAxis.priceTick,r=e.internationalizer){1715683028,-1959764560,n=2;for(var o=1;1715683028!==s.d6D(o.toString(),o.toString().length,70078);o++)a<7?(s.Q4q(67),i=r.percent.format(s.q4q(i,2147483647,"831"))):a>757?(s.P4q(68),i=r.percent1.format(s.E4q("482",i))):a<4171?(s.Q4q(52),i=r.percent2.format(s.q4q(i,"496",0))):a>45163?(s.P4q(67),i=r.percent3.format(s.q4q(i,2147483647,"450"))):(s.Q4q(43),i=r.percent4.format(s.E4q(343,i))),n+=2;-1959764560!==s.d6D(n.toString(),n.toString().length,71132)&&(a<7?(s.Q4q(34),i=r.percent.format(s.E4q(i,"831"))):a>757?(s.Q4q(43),i=r.percent1.format(s.E4q(482,i))):a<4171?(s.P4q(4),i=r.percent2.format(s.q4q(496,i))):a>45163?(s.P4q(0),i=r.percent3.format(s.E4q(450,i))):(s.P4q(43),i=r.percent4.format(s.E4q(343,i)))),a>=5?(s.P4q(5),i=r.percent.format(s.E4q(i,100))):a>=.5?(s.Q4q(5),i=r.percent1.format(s.E4q(i,100))):a>=.05?(s.Q4q(5),i=r.percent2.format(s.q4q(i,100))):a>=.005?(s.Q4q(5),i=r.percent3.format(s.q4q(i,100))):(s.P4q(5),i=r.percent4.format(s.q4q(i,100)))}else i=a>=5?i.toFixed(0)+"%":a>=.5?i.toFixed(1)+"%":a>=.05?i.toFixed(2)+"%":a>=.005?i.toFixed(3)+"%":i.toFixed(4)+"%";return 0===parseFloat(i)&&"-"==i.charAt(0)&&(i=i.substring(1)),i},t.ChartEngine.prototype.setComparison=function(e,i,a){var r,n;if("relat","iv","e","s","tring",i||(i=this.chart),"string"==H(i)&&(i=this.charts[i]),(a||""===a)&&(t.Comparison.initialPrice=a),!0===e){if(i.isComparison)return;e="percent"}switch(this.resetDynamicYAxis(),n=(r=i.panel.yAxis).priceFormatter==t.Comparison.priceFormat,e){case"relative":"da","taSe","gm","ent",this.setTransform(i,t.Comparison.priceToRelative,t.Comparison.relativeToPrice),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSegment",i.isComparison=!0;break;case"percent":"d","a","taS","egment",this.setTransform(i,t.Comparison.priceToPercent,t.Comparison.percentToPrice),n||(r.originalPriceFormatter={func:r.priceFormatter},r.priceFormatter=t.Comparison.priceFormat),r.whichSet="dataSegment",i.isComparison=!0;break;default:"da","t","aS","et",this.unsetTransform(i),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSet",i.isComparison=!1}},t.ChartEngine.prototype.setChartScale=function(e){var i,a;R.e01(),i=this.chart,e||(e="linear"),(a={percent:!0,relative:!0})[e]?this.setComparison(e,i,t.Comparison.initialPrice):a[this.layout.chartScale]&&this.setComparison(!1,i),this.layout.chartScale=e,i.canvas&&this.draw(),this.changeOccurred("layout")}},x=function(e){var t,i;function a(e,t,a){var n,s,o,l,h,c,u;if(R.e01(),t||(t={}),[],"ciq-no-share",n=document.querySelector("body"),t.hide&&t.hide instanceof Array){","," ",s=t.hide.join(", "),o=document.querySelectorAll(s);for(var d=0;d<o.length;d++)o[d].classList.add("ciq-no-share")}for(n.classList.add("sharing"),l=e.chart.container.getElementsByTagName("svg"),h=[],c=0;c<l.length;c++)u=l[c],h.push(u.innerHTML),r(u);i(e.chart.container,{allowTaint:!1,logging:!1,width:t.width||null,height:t.height||null,backgroundColor:t.background||null,useCORS:!0}).then((function(e){for(a&&a(null,t.data?e.toDataURL("image/png"):e),c=0;c<l.length;c++)l[c].innerHTML=h[c];n.classList.remove("sharing")})).catch((function(e){for(a&&a(e),c=0;c<l.length;c++)l[c].innerHTML=h[c];n.classList.remove("sharing")}))}function r(e){var t;if("fon","t-","we","ight","font","-vari","ant","f","on","t-size","font-f","amily","fi","ll-op","a","city",e.style)for(var i in t=getComputedStyle(e),["alignment-baseline","dominant-baseline","fill","fill-opacity","font-family","font-size","font-variant","font-weight","text-align","text-anchor"].forEach((function(i){!e.style[i]&&t[i]&&(e.style[i]=t[i])})),e.children)r(e.children[i])}function n(e){if("undefi",R.e01(),"ned","undefined"!==("undefined"==typeof html2canvas?"undefined":H(html2canvas)))return i=html2canvas,e();if("undefined"!=typeof requirejs)try{return"html2ca","nvas.min.js",requirejs(["html2canvas.min.js"],(function(t){return R.e01(),i=t,e()}))}catch(e){console.warn("Require loading has failed, attempting to load html2canvas manually.")}t.loadScript(function(){var e,i;if(R.e01(),t.Share.html2canvasLocation)return t.Share.html2canvasLocation;e=document.getElementsByTagName("script");for(var a=0;a<e.length;a++)if("s","hare",".j","s",(i=e[a]).src&&i.src.indexOf("share.js")>-1)return i.src.replace(/standard\/share\.js/,"")+"thirdparty/";return"js/thirdparty/"}()+"html2canvas.min.js",(function(){R.e01(),i=html2canvas;for(var t=1;1647791388!==R.d6D(t.toString(),t.toString().length,20685);t++)return e();if(-2109401421!==R.f6D(2..toString(),2..toString().length,86422))return e()}))}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Share=t.Share||function(){},t.Share.FullChart2PNG=function(e,t,r){if(e&&e.chart){if("undefined"==typeof html2canvas)return n((function(){return a(e,t,r)}));R.w01(),i=html2canvas,a(e,t,r)}},t.Share.createImage=function(e,i,a){var r,n,s,o,l,h,c,u,d,p;r="im",r+="g",n="ob",n+="ject",s=[].slice.call(arguments),a=s.pop(),null!==i&&H(i)==n||(i={widthPX:s[1],heightPX:s[2],imageType:s[3]}),o=i.widthPX,l=i.heightPX,h=i.imageType,c=e.chart.canvas.height,u=e.chart.canvas.width,e.chart.canvas.style.height&&(c=t.stripPX(e.chart.canvas.style.height),u=t.stripPX(e.chart.canvas.style.width)),o&&l?(c=l,u=o):l?u=e.chart.canvas.width*(c/e.chart.canvas.height):o&&(u=o,c=e.chart.canvas.height*(o/e.chart.canvas.width)),d=h?"image/"+h:"image/png",(p=document.createElement(r)).onload=function(){t.Share.FullChart2PNG(e,{image:this,width:u,height:c,hide:i.hide},(function(e,t){if(e)"Error producing ","canvas snaps","hot:"," ",R.Q4q(0),console.warn(R.q4q(e,"Error producing canvas snapshot: "));else try{a(t.toDataURL(d))}catch(e){console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),a(p.src)}}))},p.src=e.chart.canvas.toDataURL(d)},R.w01(),t.Share.uploadImage=function(e,i,a,r){a||(a={}),a.image=e,t.postAjax(i,JSON.stringify(a),(function(e,t){200==e?r(null,t):r(e,null)}))||r(0,null)},t.Share.shareChart=function(e,i,a){R.w01(),t.Share.createImage(e,{},(function(r){var n,s,o,l,h;n=t.uniqueID(),s="https://share.chartiq.com",R.P4q(18),o=R.q4q(n,s,"/upload/"),i&&(i.host&&(s=i.host),i.path&&(o=s+i.path+"/"+n)),l=e.getStartDateOffset(),h={id:n,image:r,config:{layout:e.exportLayout(),drawings:e.exportDrawings(),xOffset:l,startDate:e.chart.dataSegment[l].Date,endDate:e.chart.dataSegment[e.chart.dataSegment.length-1].Date,id:n,symbol:e.chart.symbol}},t.Share.uploadImage(r,o,h,(function(e,i){R.w01(),null!==e?t.alert("error sharing chart: ",e):(R.P4q(0),a(R.q4q(i,s)))}))}))}},b=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":H(_CIQ))?_CIQ:e.CIQ).ChartEngine.prototype.setRange=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q=R;function I(t){var a,l,c,u,d,p,m,g,f,y,v,x,b,S,C,k;if("la","y","o","ut","d","a","y","d","a","y",void 0===t&&(t=null),a=0,l=0,c=new Date,u=e.base,d=e.periodicity,p=h.layout,e.goIntoFuture&&(!n.masterData.length||s>n.masterData[n.masterData.length-1].DT)&&("g","a","p",m=n.masterData.length?n.masterData.pop():{DT:s},g=h.doCleanupGaps([m,{DT:o}],n,{cleanupGaps:"gap",noCleanupDates:!0}),h.setMasterData(n.masterData.concat(g),n,{noCleanupDates:!0}),h.createDataSet(null,null,{appending:!0})),y=(f=n.dataSet).length,f&&0!==y){if("day"===u&&d&&"day"===d.interval)a=y<(x=e.multiplier)?0:y-x,q.Q4q(69),l=q.E4q(y,"1");else if("today"===u&&f[y-1].DT.getDate()<c.getDate()){(b=new Date(f[y-1].DT.getTime())).getTime(),v=0;for(var w=y-1;w>=0;w--)if(f[w]&&f[w].DT.getDate()!=b.getDate()){b=new Date(+f[w+1].DT),q.Q4q(0),v=q.q4q(1,w);break}a=v,q.P4q(4),l=q.q4q(1,y)}else"al","l","a","l","l",a="all"!=e.base&&(s.getTime()>=f[0].DT.getTime()||e.goIntoPast)?h.tickFromDate(s,n,null,!0):0,"all"!=e.base&&(o.getTime()<=f[y-1].DT.getTime()||e.goIntoFuture)?(l=h.tickFromDate(o,n))>y-1&&l--:(q.Q4q(4),l=q.q4q(1,y));if(q.Q4q(20),(S=q.q4q(a,1,l))<1)i&&i(t);else{for(var D in C=e.padding||0,l<y-1&&(q.P4q(7),C=q.q4q(128980224,"0")),k=(n.width-C)/S,h.setCandleWidth(k,n),q.P4q(70),n.scroll=q.E4q(S,y,l,1),h.micropixels=1,h.panels)h.calculateYAxisMargins(h.panels[D].yAxis);e.dontSaveRangeToLayout?delete p.range:(delete e.chart,delete p.setSpan,p.range=e),h.draw(),h.changeOccurred("layout"),r||h.dispatch("periodicity",{stx:h,differentData:P,prevPeriodicity:{interval:A,periodicity:T,timeUnit:M}}),i&&i(t)}}else i&&i(t)}function N(e,i,a,r,n,s){var o,l;return o=0,q.P4q(4),l=q.E4q(i,e),t.ChartEngine.isDailyInterval(a)?("we","ek",o="month"==a?l/t.MONTH/r:"week"==a?l/t.WEEK/r:l/t.DAY/r):isNaN(a)||("s","ec","o","nd","millisecond"==n?(q.P4q(71),o=q.q4q(l,a,r)):o="second"==n?l/t.SECOND/(r*a):l/t.MINUTE/(r*a)),Math.round(o)}if(a="s",a+="tri",q.w01(),a+="n",a+="g",t.isEmpty(e)&&(e={dtLeft:arguments[0],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},i=arguments[4]),this.staticRange&&(e.goIntoPast=e.goIntoFuture=!0),e.chart||(e.chart=this.chart),void 0===e.padding&&(e.padding=0),r=!1,n=e.chart,s="string"==typeof e.dtLeft?new Date(e.dtLeft):e.dtLeft,o=new Date,e.dtRight&&(o=H(e.dtRight)===a?new Date(e.dtRight):e.dtRight),s||(l=this.standardMarketIterator(o,null,n),s=l.previous(n.maxTicks),e.periodicity||(r=!0)),n.inflectionPoint=s,this.layout.range={dtLeft:s,dtRight:o},h=this,c=0,this.quoteDriver){if(r)u=this.layout.interval,p=this.layout.timeUnit,d=this.layout.periodicity;else if(e.periodicity)u=(m=t.cleanPeriodicity(e.periodicity.period,e.periodicity.interval,e.periodicity.timeUnit)).interval,p=m.timeUnit,d=m.period;else if(g=o.getTime()-s.getTime(),this.autoPickCandleWidth.turnOn){q.Q4q(1),x=q.q4q("0",1),x=this.autoPickCandleWidth.candleWidth?this.autoPickCandleWidth.candleWidth:this.chart.barsHaveWidth?5:2,b=n.width/x,u=(S=this.dynamicRangePeriodicityMap)[0].interval,d=1;for(var O=0;O<S.length;O++){if((k=g/S[O].rangeInMS)<b){S[O-1]?(u=S[O-1].interval,p=S[O-1].timeUnit,q.P4q(5),d=Math.ceil(q.q4q(C,b))):(u=S[O].interval,p=S[O].timeUnit,d=1);break}C=k}}else{f=this.staticRangePeriodicityMap,y=null;for(var j=0;j<f.length;j++)if(g/(v=f[j]).rangeInMS<1.001){y=v;break}u=y.interval,d=y.periodicity,p=y.timeUnit}w=this.chart.scroll,D=this.layout.candleWidth,A=this.layout.interval,T=this.layout.periodicity,M=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=N(o.getTime(),s.getTime(),u,d,p,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,P=this.needDifferentData({period:d,interval:u,timeUnit:p}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>s||this.chart.endPoints.end<o)&&(P=!0),!this.chart.masterData||!this.chart.masterData.length||P||e.forceLoad?(this.layout.interval=u,this.layout.periodicity=d,this.layout.timeUnit=p,this.layout.timeUnit||(F="t",F+="ic",F+="k",t.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:"second"==this.layout.interval?this.layout.timeUnit="second":this.layout.interval!=F&&(this.layout.timeUnit="minute")),_={symbol:n.symbol,symbolObject:n.symbolObject,chart:n,nodraw:!0},"tick"==this.layout.interval&&(_.startDate=s,_.endDate=o),this.displayInitialized||(_.initializeChart=!0),"month"!=(E={symbol:n.symbol,symbolObject:n.symbolObject,interval:this.layout.interval}).interval&&"week"!=E.interval||this.dontRoll||(E.interval="day"),L=Math.max(this.quoteDriver.getQuoteFeed(E).behavior.bufferSize+50,200),l=this.standardMarketIterator(s,null,n),_.startDate=new Date(l.previous(L).getTime()),l=this.standardMarketIterator(o,null,n),_.endDate=new Date(l.next(L).getTime()),_.endDate<Date.now()&&(this.isHistoricalModeSet=!0),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(_,z)):(this.layout.interval==u&&this.layout.periodicity==d&&this.layout.timeUnit==p&&this.chart.dataSegment&&this.chart.dataSegment[0]&&this.chart.dataSegment[0].DT==n.inflectionPoint||(this.layout.interval=u,this.layout.periodicity=d,this.layout.timeUnit=p,this.createDataSet()),z())}else I();function z(e){return e&&0===c?(n.scroll=w,h.setCandleWidth(D),h.layout.interval=A,h.layout.periodicity=T,h.layout.timeUnit=M,void(i&&i(e))):++c>10?("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stoppi","ng. Check periodicity logic.",console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),void I()):void I()}},R.w01(),t.ChartEngine.prototype.setSpan=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k;if(a="m",a+="ont",a+="h",r="o",r+="bj",r+="e",r+="ct",n=arguments[0],s=arguments[1],o=arguments[2],l=arguments[3],H(e)==r?(n=e.period?e.period:e.multiplier?e.multiplier:1,s=e.interval?e.interval:e.base?e.base:e.span?e.span:e.period,o=e.padding,l=e.chart):(e={period:n,interval:s,padding:o,chart:l},i=arguments[5]),l||(l=this.chart),h=l.market,"all"==(s=s.toLowerCase()))return e.dontSaveRangeToLayout=!0,void this.displayAll(e,i);function w(e,t){return y?(R.w01(),7,t?e.setHours(e.getHours()+7):(e.setHours(e.getHours()-7),h.isMarketDate(e)||e.setDate(e.getDate()-2)),e):e}function D(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),R.w01(),e.setMilliseconds(0),e}u=s,d=1,"today"==s?(p="d",p+="a",u=p+="y"):"year"==s&&(u="month",d=12),m=t.shallowClone(e),f=(g={begin:h.marketZoneNow(),interval:u,period:d}).begin,y=t.Market.Symbology.isForexSymbol(l.symbol),"ytd"===s?((f=D(f)).setMonth(0),f.setDate(1)):s===a?(f=D(new Date)).setMonth(f.getMonth()-n):"year"===s?(f=D(new Date)).setFullYear(f.getFullYear()-n):"week"===s?(f=D(new Date)).setDate(f.getDate()-7*n):"day"===s&&1==n&&h.isMarketDay()?(v=f.getHours(),x=f.getMinutes(),b=f.getSeconds(),S=f.getMilliseconds(),(f=(c=h.newIterator(g)).previous()).setHours(v,x,b,S),f=h._convertFromMarketTZ(f)):"today"===s?(g.begin=w(f,!0),c=h.newIterator(g),(h.isOpen()||h.getPreviousOpen().getDate()==f.getDate())&&c.next(),w(f=c.previous()),m.goIntoFuture=!0,m.dtRight=new Date(+f),m.dtRight.setDate(f.getDate()+1),m.dtRight=h._convertFromMarketTZ(m.dtRight),y||(f.setHours(c.market.zopen_hour),f.setMinutes(c.market.zopen_minute),f.setSeconds(0)),f=h._convertFromMarketTZ(f)):(C="d",C+="a",s==(C+="y")&&(g.begin=w(f,!0)),c=h.newIterator(g),1==n&&n++,R.Q4q(52),f=c.previous(R.E4q(n,"1",0)),"day"==s&&(f=h._convertFromMarketTZ(w(f)))),m.dtLeft=f,m.maintainPeriodicity&&(m.periodicity={},m.periodicity.interval=this.layout.interval,m.periodicity.period=this.layout.periodicity),l.spanLock=!1,m.dontSaveRangeToLayout=!0,k=this,this.setRange(m,(function(t){var a,r=R;if(r.e01(),k.layout.setSpan=e,k.changeOccurred("layout"),"today"==s){-1971642043,1988972089,r.P4q(16),a=r.q4q("2",2147483647);for(var n=1;-1971642043!==r.d6D(n.toString(),n.toString().length,12485);n++)l.spanLock=!0,a+=2;1988972089!==r.d6D(a.toString(),a.toString().length,47751)&&(l.spanLock=!1)}i&&i(t)}))},t.ChartEngine.prototype.getSpanCandleWidth=function(e){var t,i,a,r,n,s,o=R;if(e&&e.base&&e.multiplier)return t=parseFloat(e.multiplier),i=e.base,a=new Date,r=new Date,"year"==i?r.setFullYear(r.getFullYear()-t):"month"==i?r.setMonth(r.getMonth()-t):"day"==i?r.setDate(r.getDate()-t):"week"==i?r.setDate(r.getDate()-7*t):"YTD"==i&&(r.setMonth(0),o.Q4q(11),r.setDate(o.q4q(70626720,"1"))),n=(a.getTime()-r.getTime())/1e3/60/60/24,o.Q4q(65),n=o.q4q(5,n,7),s=this.chart.width/n,o.e01(),s},t.ChartEngine.prototype.displayAll=function(e,i){var a,r,n,s=this.chart,o=this.layout;function l(){var r;s.masterData&&s.masterData.length&&((r=t.clone(e)).dtLeft=s.endPoints.begin.DT,r.dtRight=s.endPoints.end.DT,r.periodicity={},r.periodicity.interval=o.interval,r.periodicity.period=o.periodicity,r.periodicity.timeUnit=o.timeUnit,a.setRange(r,(function(t){for(var r in a.layout.setSpan={base:e.base,multiplier:e.multiplier},a.changeOccurred("layout"),a.panels)a.calculateYAxisMargins(a.panels[r].yAxis);a.draw(),R.e01(),i&&i(t)})))}function h(e){R.e01(),e||a.quoteDriver.loadAll(s,l)}e&&e.chart&&(s=e.chart),a=this,this.quoteDriver?(r=e.maintainPeriodicity?{period:o.periodicity,interval:o.interval,timeUnit:o.timeUnit}:{period:1,interval:"month",timeUnit:null},r=e.periodicity?e.periodicity:r,r=t.cleanPeriodicity(r.period,r.interval,r.timeUnit),n=this.needDifferentData(r),this.layout.periodicity=r.period,this.layout.interval=r.interval,this.layout.timeUnit=r.timeUnit,e.forceLoad||n?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({noDraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},h)):s.moreAvailable||!s.upToDate?h():(this.createDataSet(),l())):l()}},S=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.importLayout=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I;if(a="un",a+="de",a+="f",a+="ined",r="o",r+="b",r+="ject",e){for(var N in n=this,s=[],H(i)!==r&&(i={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),o=this.layout,l=t.shallowClone(o),h=i.managePeriodicity,c=i.cb,u=i.seriesCB,R.e01(),d=i.noDataLoad,p=i.preserveTicksAndCandleWidth,m=null,this.exportDrawings&&(m=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0,o.studies)g="Stu",g+="dies.removeStudy",f=o.studies[N],t.getFn(g)(this,f);for(b in this.overlays={},y=t.shallowClone(this.panels),this.panels={},v=t.clone(e),o.periodicity=l.periodicity,o.interval=l.interval,o.timeUnit=l.timeUnit,o.setSpan=l.setSpan,o.range=l.range,p?o.candleWidth=l.candleWidth:o.candleWidth||(o.candleWidth=8),this.setCandleWidth(o.candleWidth),o.flipped&&this.flipChart(o.flipped),k=function(e,t){return R.w01(),e.index<t.index?-1:1},x=v.panels)w="ind",w+="e",(w+="x")in x[b]||(k=null),(S=x[b]).name=b,s.push(S);if(o.panels={},D=null,s.length>0){k&&s.sort(k);for(var O=0;O<s.length;++O)C=(S=s[O]).yAxis?new t.ChartEngine.YAxis(S.yAxis):null,this.stackPanel(S.display,S.name,S.percent,S.chartName,C),S.soloing&&(D=this.panels[S.name])}for(var j in t.isEmpty(x)&&this.stackPanel("chart","chart",1,"chart"),this.resizeCanvas(),y)if(A=y[j],T=this.panels[j]){for(var z in this.container.removeChild(T.holder),A.handle&&this.container.removeChild(A.handle),{holder:!0,subholder:!0,display:!0,icons:!0})T[z]=A[z];this.configurePanelControls(T),A.chart.panel==A&&(A.chart.panel=T)}else this.privateDeletePanel(A);for(var V in this.chart.panel=this.panels.chart,U(this.panels),t.dataBindSafeAssignment(o,t.clone(v)),M=t.clone(o.studies),delete o.studies,M)P=M[V],t.getFn("Studies.addStudy")(this,P.type,P.inputs,P.outputs,P.parameters,P.panel);if(this.extendedHours&&this.extendedHours.prepare(o.extended,o.marketSessions),H(o.chartType)==a&&(o.chartType="line"),this.setMainSeriesRenderer(),D&&this.panelSolo(D),this.adjustPanelPositions(),U(this.panels),this.storePanels(),!d){if(v.symbols&&v.symbols.length)return F={chart:this.chart},!p&&h&&v.range&&Object.keys(v.range).length?F.range=v.range:!p&&h&&v.setSpan&&Object.keys(v.setSpan).length?F.span=v.setSpan:h&&v.interval?F.periodicity={interval:v.interval,period:v.periodicity,timeUnit:v.timeUnit}:F.periodicity={interval:l.interval,period:l.periodicity,timeUnit:l.timeUnit},_=v.symbols[0].symbolObject||v.symbols[0].symbol,void this.loadChart(_,F,(function(e){var i;if(!e){for(var a,r=1;r<v.symbols.length&&n.addSeries;++r)(a=v.symbols[r]).parameters||(a.parameters={}),i=t.clone(a.parameters),this.panels[i.panel]?n.addSeries(a.id,i,B):console.warn('Warning: Series "'+a.id+'" could not be imported due to a missing corresponding panel "'+i.panel+'"');v.chartScale&&n.setChartScale(v.chartScale)}Q(),c&&c.apply(null,arguments)}));if(h){if(!p&&this.setRange){if((E=v.range)&&Object.keys(E).length&&this.chart.symbol)return void this.setRange(E,(function(){R.w01(),Q(),c&&c()}));if(v.setSpan&&Object.keys(v.setSpan).length&&this.chart.symbol)return void this.setSpan(v.setSpan,(function(){Q(),c&&c()}))}return L=v.interval,q=v.periodicity,I=v.timeUnit,isNaN(q)&&(q=1),L||(L="day"),void this.setPeriodicity({period:q,interval:L,timeUnit:I},(function(){Q(),c&&c()}))}}h&&(o.periodicity=v.periodicity,o.interval=v.interval,o.timeUnit=v.timeUnit,o.setSpan=v.setSpan),this.createDataSet(),p||this.home(),Q(),c&&c()}else i.cb&&i.cb();function Q(){var e,t,i;function a(){R.e01(),n.createDataSet(),U(n.panels),n.calculateYAxisPositions(),n.draw()}for(var r in"l","a","yo","ut",m&&n.importDrawings(m),n.currentlyImporting=!1,i=[],n.chart.series){if(!n.removeSeries)break;"study"==(t=n.chart.series[r]).parameters.bucket&&(e=!0,n.removeSeries(t),i.push(t))}for(var s=0;s<i.length;s++)t=i[s],n.addSeries(t.id,t.parameters,a);e||n.draw(),n.updateListeners("layout"),n.changeOccurred("layout")}function B(){n.calculateYAxisPositions(),U(n.panels),u&&u()}function U(e){var t;R.w01();for(var i=0;i<s.length;i++)"yaxi","s","RHS",r(t=s[i],"yaxisLHS"),r(t,"yaxisRHS");function a(e){return R.w01(),!!e}function r(t,i){var r,n,s,o;if(t[i]&&t[i].length&&(r=e[t.name])){n=r[i],s=new Array(n.length);for(var l=0;l<n.length;l++)(o=t[i].indexOf(n[l].name))>-1?s[o]=n[l]:s.push(n[l]);s.length&&(r[i]=s.filter(a))}}n.chart.yAxis=n.chart.panel.yAxis}},t.ChartEngine.prototype.exportLayout=function(e){var i,a,r,n,s,o;for(var l in i={},this.layout)"st","udi","es","s","t","udies","studies"!=l&&"panels"!=l&&"drawing"!=l?i[l]=t.clone(this.layout[l]):"studies"==l?i.studies={}:"panels"==l&&(i.panels={});for(var h in a=0,this.panels)!1!==(r=this.panels[h]).exportable&&((n=i.panels[h]={}).percent=r.percent,n.display=r.display,n.chartName=r.chart.name,n.soloing=r.soloing,n.index=a++,n.yAxis={name:r.yAxis.name,position:r.yAxis.position},r.yaxisLHS&&(n.yaxisLHS=u(r.yaxisLHS)),r.yaxisRHS&&(n.yaxisRHS=u(r.yaxisRHS)));for(var c in this.layout.studies)s=i.studies[c]={},o=this.layout.studies[c],s.type=o.type,s.inputs=t.clone(o.inputs),s.outputs=t.clone(o.outputs),s.panel=o.panel,s.parameters=t.clone(o.parameters);function u(e){var t;t=[];for(var i=0;i<e.length;i++)t.push(e[i].name);return t}return R.w01(),e?i.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0}):delete i.symbols,i},R.w01(),t.ChartEngine.prototype.importPreferences=function(e){t.extend(this.preferences,e),e.timeZone&&this.setTimeZone(this.dataZone,e.timeZone),R.w01(),e.language&&t.I18N&&t.I18N.localize(this,e.language),this.changeOccurred("preferences")},t.ChartEngine.prototype.exportPreferences=function(){return R.e01(),this.preferences}},C=function(e){var t,i;t="undefined"!=typeof _CIQ?_CIQ:e.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:e.timezoneJS,t.ChartEngine&&(t.ChartEngine.prototype.rightClickOverlay=function(e,t){var i,a,r;i="rightC",i+="lickOv",i+="erlay",a="rightClickOver",a+="lay",this.runPrepend(a,arguments)||((r=this.overlays[e]).editFunction?r.editFunction(t):this.removeOverlay(e),R.w01(),this.runAppend(i,arguments))},t.ChartEngine.prototype.addOverlay=function(e){this.runPrepend("addOverlay",arguments)||(this.overlays[e.name]=e,this.runAppend("addOverlay",arguments))},t.ChartEngine.prototype.removeOverlay=function(e){var i,a,r,n,s;if(i="re",i+="moveO",i+="v",i+="erlay",!this.runPrepend(i,arguments)){for(var o in a=this.overlays[e],this.overlays){r="Fi",r+="el",r+="d",n=this.overlays[o],s=[r],t.Studies&&(s=t.Studies.getFieldInputs(n));for(var l=0;l<s.length;l++)a.outputMap[n.inputs[s[l]]]&&this.removeOverlay(n.name)}a&&(this.cleanupRemovedStudy(a),this.panels[a.panel],delete this.overlays[e],this.checkForEmptyPanel(a.panel)),this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),this.resetDynamicYAxis(),R.w01(),this.runAppend("removeOverlay",arguments)}},t.ChartEngine.prototype.cleanupRemovedStudy=function(e){if(e){for(var i in e.study.removeFN&&e.study.removeFN(this,e),this.plugins)i.indexOf("{"+e.id+"}")>-1&&delete this.plugins[i];R.e01(),this.layout.studies&&delete this.layout.studies[e.name],delete this.overlays[e.name],t.Studies&&t.Studies.removeStudySymbols(e,this),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),t.Studies=t.Studies||function(){},t.Studies.DEFAULT_INPUTS={Period:14},t.Studies.DEFAULT_OUTPUTS={Result:"auto"},t.Studies.sortForProcessing=function(e){var t,i;return R.e01(),t=[],(i=e.layout.studies)&&function t(i,a){R.e01(),i.forEach((function(i){var r;R.e01(),-1==a.indexOf(i)&&((r=i.getDependents(e)).length&&t(r,a),a.unshift(i))}))}(Object.values(i),t),t},t.Studies.StudyDescriptor=function(e,i,a,r,n,s){var o;this.name=e,this.type=i,this.panel=a,this.inputs=r,this.outputs=n,this.parameters=s,this.outputMap={},this.min=null,this.max=null,this.startFrom=0,this.subField="Close",(o=t.Studies.studyLibrary[i])||(o={},("chart"==a||!a&&s&&"chart"==s.chartName)&&(this.overlay=!0)),void 0===o.inputs&&(o.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===o.outputs&&(o.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),this.study=o,this.libraryEntry=o,R.e01()},t.Studies.StudyDescriptor.prototype.getYAxis=function(e){var t,i,a,r,n=R;if(t=this.yAxis,this.parameters&&(i=this.parameters.yaxisDisplayValue),!t&&(a=e.panels[this.panel])){651024479,-1768676081,n.Q4q(17),r=n.q4q(0,"2");for(var s=1;651024479!==n.d6D(s.toString(),s.toString().length,74357);s++)t=e.getYAxisByName(a,i)&&e.getYAxisByName(a,this.name)&&a.yAxis,r+=2;-1768676081!==n.d6D(r.toString(),r.toString().length,68022)&&(t=e.getYAxisByName(a,i)||e.getYAxisByName(a,this.name)||a.yAxis)}return t||(t=e.getYAxisByName(e.chart.panel,i)||e.chart.panel.yAxis),n.w01(),t},t.Studies.StudyDescriptor.prototype.getContext=function(e){return e.chart.context},t.Studies.StudyDescriptor.prototype.getDependents=function(e,i){var a,r,n;for(var s in a=[],R.w01(),e.layout.studies)if((r=e.layout.studies[s])!=this){n=t.Studies.getFieldInputs(r);for(var o=0;o<n.length;o++)if(r.inputs[n[o]].includes(this.name)){if(i&&r.parameters&&r.parameters.panelName)continue;a.push(r),a=a.concat(r.getDependents(e,i));break}}return a},t.Studies.StudyDescriptor.prototype.undraggable=function(e){var t;if(t=this.study.attributes){if(t.panelName&&t.panelName.hidden)return!0;if(t.yaxisDisplayValue&&t.yaxisDisplayValue.hidden)return!0}return!1},t.Studies.StudyDescriptor.prototype.appendFutureTicks=function(e,t){var i,a,r,n;if((i=e.chart.scrubbed).length){for(a=e.standardMarketIterator(i[i.length-1].DT),r=t.length-1;r>=0;r--){for(var s in n=t[r])if(n[s]||0===n[s]){r=-1;break}if(-1==r)break;t.pop()}for(r=0;r<t.length;r++)(n=t[r]).DT||(n.DT=a.next()),n.displayDate||e.setDisplayDate(n),n.futureTick=!0,i.push(n)}},t.Studies.generateID=function(e,i,a,r,n){var s,o,l,h,c,u,d,p=R;if(s=t.Studies.studyLibrary[i],p.Q4q(18),o=p.E4q("","",n||i),s&&s.customRemoval)return o;if(p.w01(),!t.isEmpty(a)){for(var m in l=!0,a)h="Anc",h+="hor Se",h+="lecto",c="dis",["id",c+="play","Shading",h+="r"].includes(m)||"field"!=(u=a[m])&&(u=u.toString(),void 0!==t.Studies.prettify[u]&&(u=t.Studies.prettify[u]),l?(l=!1,o+=" ("):u&&(o+=","),o+=u);l||(o+=")")}if(r&&0===r.indexOf(o))return r;if(e.layout.studies&&e.layout.studies[o])for(var g=2;g<50;g++)if(p.Q4q(18),d=p.E4q(g,o,"-"),!e.layout.studies[d]){o=d;break}return o},t.Studies.DialogHelper=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P;function F(e,t){this.attributes[e]||(this.attributes[e]={}),t&&(this.attributes[e].hidden=!0)}function _(e){var t;if("alias"==T)for(var a in t=1,i.panels){if(a==e)return a,"Panel "+t.toString();t++}return e}function E(e){var t,a,r;t={},a=e.defaults,r={name:e.name,heading:i.translateIf(e.label),defaultValue:a[0],value:e.value,options:t,type:"select"};for(var n=0;n<a.length;n++)t[a[n]]=i.translateIf(a[n]);return R.w01(),void 0!==e.color&&(r.defaultColor=i.defaultColor,r.color=e.color),r}function L(e){return R.w01(),{name:e.name,heading:i.translateIf(e.label),defaultValue:e.defaults,value:e.value,type:"checkbox"}}for(var q in i=this.stx=e.stx,a=this.sd=e.sd,this.name=a?a.type:e.name,this.signal=1,this.inputs=[],this.outputs=[],this.parameters=[],void 0===(r=this.libraryEntry=a?a.study:t.Studies.studyLibrary[e.name]).inputs&&(r.inputs=t.clone(t.Studies.DEFAULT_INPUTS)),void 0===r.outputs&&(r.outputs=t.clone(t.Studies.DEFAULT_OUTPUTS)),s=(n=a&&i.panels[a.panel]?i.panels[a.panel]:i.chart.panel).chart,this.title=i.translateIf(r.name),this.attributes=r.attributes,this.attributes||(this.attributes={}),o=[],l=i.layout.studies,h=[],a&&(h=Array.prototype.concat(a,a.getDependents(i))),l)if(!(h.indexOf(l[q])>-1))for(var I in l[q].outputMap)o.push(I);for(var N in r.inputs)if(c={},this.inputs.push(c),c.name=N,c.heading=i.translateIf(N),u=r.inputs[N],a&&a.inputs&&void 0!==a.inputs[N]&&null!==a.inputs[N]?c.value=a.inputs[N]:c.value=r.inputs[N],c.defaultInput=r.inputs[N],this.attributes[N]||(this.attributes[N]=t.Studies.inputAttributeDefaultGenerator(c.defaultInput)),u.constructor==Number)"nu","mb","er",c.type="number";else if(u.constructor==String)if("f","ie","l","d",d=t.Studies.movingAverageHelper(i,c.defaultInput))c.type="select",c.defaultInput=d,(p=t.Studies.movingAverageHelper(i,c.value))||(p=c.value),c.value=p,c.options=t.Studies.movingAverageHelper(i,"options");else if("field"==u){"fie","l","d",m="hl",m+="c/3",g="Adj_Clo",g+="se",f="Cl",f+="ose",y="H",y+="ig",y+="h",c.type="select",c.options={},v=["Open",y,"Low",f,g,"hl/2",m,"hlcc/4","ohlc/4",s.defaultPlotField].concat(o);for(var O=0;O<v.length;O++)x=v[O],c.options[x]=i.translateIf(x);"field"==c.value&&("C","l","os","e",c.value="Close"),"field"==c.defaultInput&&(c.defaultInput="Close")}else"hh:mm:s","s","d","at","e",c.type="text","yyyy-mm-dd"==this.attributes[N].placeholder?c.type="date":"hh:mm:ss"==this.attributes[N].placeholder&&(c.type="time");else if(u.constructor==Boolean)"che","c","kbo","x",c.type="checkbox",!0!==c.value&&"true"!=c.value&&"on"!=c.value||(c.value=!0);else if(u.constructor==Array){c.type="select",c.options={};for(var H=0;H<u.length;H++)c.options[u[H]]=i.translateIf(u[H]);c.value.constructor==Array&&(c.value=c.value[0]),this.attributes[N].defaultSelected?c.defaultInput=this.attributes[N].defaultSelected:c.defaultInput=u[0]}this.dateTimeInputs=[];for(var j=0;j<this.inputs.length;j++)if("date"==(b=this.inputs[j]).type){S=b.name.substring(0,b.name.indexOf(" Date"));for(var z=0;z<this.inputs.length;z++)if("time"==(C=this.inputs[z]).type&&(" ","Ti","me",C.name==S+" Time")){this.dateTimeInputs.push(S);break}}for(N in this.adjustInputTimesForDisplayZone(),r.outputs)(k={name:N,heading:i.translateIf(N)}).color=k.defaultOutput=r.outputs[N],a&&a.outputs&&a.outputs[N]&&(k.color=a.outputs[N]),"auto"==k.color&&(k.color=i.defaultColor),this.outputs.push(k);w=a?a.parameters:null,r.parameters&&(D=r.parameters.init)&&(void 0!==D.studyOverZonesEnabled&&("studyOverZ","ones",A={name:"studyOverZones",heading:i.translateIf("Show Zones"),defaultValue:D.studyOverZonesEnabled,value:D.studyOverZonesEnabled},w&&(w.studyOverZonesEnabled||!1===w.studyOverZonesEnabled)&&(A.value=w.studyOverZonesEnabled),A.type="checkbox",this.parameters.push(A)),void 0!==D.studyOverBoughtValue&&("a","u","t","o","Ove","rB","oug","ht",A={name:"studyOverBought",heading:i.translateIf("OverBought"),defaultValue:D.studyOverBoughtValue,value:D.studyOverBoughtValue,defaultColor:D.studyOverBoughtColor,color:D.studyOverBoughtColor},w&&w.studyOverBoughtValue&&(A.value=w.studyOverBoughtValue),w&&w.studyOverBoughtColor&&(A.color=w.studyOverBoughtColor),"auto"==A.color&&(A.color=i.defaultColor),A.type="text",this.parameters.push(A)),void 0!==D.studyOverSoldValue&&("a","u","t","o","O","verSold",A={name:"studyOverSold",heading:i.translateIf("OverSold"),defaultValue:D.studyOverSoldValue,value:D.studyOverSoldValue,defaultColor:D.studyOverSoldColor,color:D.studyOverSoldColor},w&&w.studyOverSoldValue&&(A.value=w.studyOverSoldValue),w&&w.studyOverSoldColor&&(A.color=w.studyOverSoldColor),"auto"==A.color&&(A.color=i.defaultColor),A.type="text",this.parameters.push(A)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})),T=this.panelSelect=e.panelSelect,M=this.axisSelect=e.axisSelect,e.addWhenDone&&(M=T=!1),(M||T)&&("fli","pp","edEnabl","ed",a||(a=t.Studies.addStudy(i,e.name,null,null,{calculateOnly:!0}),t.Studies.removeStudy(i,a)),T&&("Show as Unde","rlay","A","u","t","o","Pa","n","el",this.parameters.push(E({label:"Panel",name:"panelName",defaults:function(){var e;for(var t in(e=[]).push("Auto"),R.e01(),i.panels)t==a.panel&&w&&w.panelName||e.push(_(t));return i.checkForEmptyPanel(a.panel,!0,a)||e.push("New panel"),e}(),value:w&&w.panelName?_(w.panelName):"Auto"}),L({label:"Show as Underlay",name:"underlay",defaults:!1,value:a.underlay||a.parameters&&a.parameters.underlayEnabled}))),P=i.getYAxisByName(n,a.name),M&&("d","ef","au","lt","sh","ared","yaxi","s","Displa","y",this.parameters.push(E({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var e,t;e=n.yaxisLHS.concat(n.yaxisRHS),(t=[]).push("default","right","left","none","shared");for(var i=0;i<e.length;i++)e[i]!=P&&t.push(e[i].name);return t}(),value:w&&w.yaxisDisplayValue||P&&P.position||(a.panel!=a.name?"shared":n.yAxis.position||"default"),color:P&&P.textStyle?P.textStyle:"auto"}),L({label:"Invert Y-Axis",name:"flipped",defaults:!1,value:w?w.flippedEnabled:!!P&&P.flipped}))),F.call(this,"flippedEnabled",!P&&a.panel!=a.name),F.call(this,"underlayEnabled",r.underlay),F.call(this,"panelName",null===r.seriesFN),F.call(this,"yaxisDisplayValue",null===r.seriesFN||r.yAxis&&r.yAxis.noDraw))},t.Studies.DialogHelper.prototype.updateStudy=function(e){var i,a,r,n;for(var s in i={},a=this.sd,(r=this.libraryEntry)||(r={}),a||(a=r),i.inputs=t.clone(a.inputs),i.outputs=t.clone(a.outputs),i.parameters=t.clone(a.parameters),this.adjustInputTimesForDisplayZone(e),e.parameters&&e.parameters.panelName&&(e.parameters.panelName=function(e){var t,i;if(R.e01(),"alias"==this.panelSelect&&(t=(i=e.match(/.* (\d)/))&&i[1]))for(var a in this.stx.panels)if(!--t)return a;return e}.call(this,e.parameters.panelName)),t.extend(i,e),i.parameters||(i.parameters={}),a=i.inputs&&i.inputs.id?t.Studies.replaceStudy(this.stx,i.inputs.id,this.name,i.inputs,i.outputs,i.parameters,null,a.study):t.Studies.addStudy(this.stx,this.name,i.inputs,i.outputs,i.parameters,null,a.study),n=new t.Studies.DialogHelper({stx:this.stx,sd:a,axisSelect:this.axisSelect,panelSelect:this.panelSelect}))"signal"!=s&&(this[s]=n[s]);this.signal*=-1,R.w01()},t.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(e){var i,a,r,n,s,o,l,h,c=R;if(this.stx.displayZone)for(var u=0;u<this.dateTimeInputs.length;u++){for(i=this.dateTimeInputs[u],o="",e&&e.inputs&&(" T","ime",c.P4q(0),r=e.inputs[c.E4q(" Date",i)],c.Q4q(0),r&&(o=r),(n=e.inputs[c.q4q(" Time",i)])&&(o+=n)),a=0;a<this.inputs.length;a++)s=this.inputs[a],r||""===r||s.name!=i+" Date"?n||""===n||s.name!=i+" Time"||(o+=s.value):o=s.value+o;if((o=o.replace(/\D/g,"")).length<12)return;if(l=t.strToDateTime(o),!isNaN(l.valueOf()))if(e)" Tim","e",e.inputs||(e.inputs={}),h=t.convertTimeZone(l,this.stx.displayZone),c.Q4q(0),e.inputs[c.q4q(" Date",i)]=t.yyyymmdd(h),c.P4q(0),e.inputs[c.q4q(" Time",i)]=t.hhmmss(h);else for(h=t.convertTimeZone(l,null,this.stx.displayZone),a=0;a<this.inputs.length;a++)" T","im","e"," D","at","e",(s=this.inputs[a]).name==i+" Date"&&(s.value=t.yyyymmdd(h)),s.name==i+" Time"&&(s.value=t.hhmmss(h))}},t.Studies.prepareStudy=function(e,i,a){if(void 0===i.calculateFN&&(i.useRawValues=!0),R.w01(),t.isEmpty(a.outputMap))for(var r in a.outputs)i.useRawValues?a.outputMap[r]=r:a.outputMap[r+" "+a.name]=r},t.Studies.rejiggerDerivedStudies=function(e,i,a){var r,n,s,o,l,h;R.e01(),r=i.name,i.panel,n=i.getDependents(e);for(var c=0;c<n.length;c++)if(s=n[c],l=(o=t.clone(s.inputs)).id){!1,h=t.Studies.getFieldInputs(s);for(var u=0;u<h.length;u++)o[h[u]]=o[h[u]].replace(r,a);delete t.Studies.replaceStudy(e,l,s.type,o,s.outputs,t.extend(s.parameters,{rejiggering:!0}),null,s.study).parameters.rejiggering}},t.Studies.removeStudySymbols=function(e,t){if(e.series)for(var i in e.series)t.deleteSeries(e.series[i],null,{action:"remove-study"})},t.Studies.replaceStudy=function(e,i,a,r,n,s,o,l){var h,c,u,d;for(u in s||(s={}),i&&(s.replaceID=i),i=s.replaceID,h=e.layout.studies[i],t.Studies.removeStudySymbols(h,e),h.attribution&&e.removeFromHolder(h.attribution.marker),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),r&&(r.id==r.display&&delete r.display,delete r.id),(c=t.Studies.addStudy(e,a,r,n,s,o,l)).highlight=h.highlight,c.uniqueId=h.uniqueId,d={},e.layout.studies)u==i?d[c.name]=c:d[u]=e.layout.studies[u];for(u in e.layout.studies=d,d={},e.overlays)u==i?(c.overlay||c.underlay)&&(d[c.name]=c):d[u]=e.overlays[u];return e.overlays=d,e.overlays[c.name]||!c.overlay&&!c.underlay||e.addOverlay(c),e.checkForEmptyPanel(h.panel),s.rejiggering||(e.initializeDisplay(e.chart),t.Studies.rejiggerDerivedStudies(e,h,c.inputs.id,c.panel),e.changeOccurred("layout"),e.currentlyImporting||s.calculateOnly||!c.chart.dataSet||e.createDataSet(null,c.chart),e.draw()),t.transferObject(h,c),e.layout.studies[c.name]=h,e.overlays[c.name]=h,e.chart.state.studies.sorted=null,h},t.Studies.addStudy=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N;if(l=o||t.Studies.studyLibrary[i],n||(n={}),l){if(l.inputs){for(var O in h=t.clone(l.inputs))h[O]instanceof Array&&(l.attributes&&l.attributes[O]&&l.attributes[O].defaultSelected?h[O]=l.attributes[O].defaultSelected:h[O]=h[O][0]);a=t.extend(h,a)}l.outputs&&(r=t.extend(t.clone(l.outputs),r)),(c=l.parameters)&&c.init&&(n=t.extend(t.clone(c.init),n)),c&&!n.display&&(n.display=c.display)}if(a||(a=t.clone(t.Studies.DEFAULT_INPUTS)),r||(r=t.clone(t.Studies.DEFAULT_OUTPUTS)),n.chartName||(n.chartName="chart"),"Auto"!=n.panelName&&"Default panel"!=n.panelName||(n.panelName=""),a.Period<1&&(a.Period=1),u=null,e.layout.studies||(e.layout.studies={}),!(u=l&&l.initializeFN?l.initializeFN(e,i,a,r,n,s,o):t.Studies.initializeFN(e,i,a,r,n,s,o)))return R.Q4q(0),void console.log(R.E4q(i,"CIQ.Studies.addStudy: initializeFN() returned null for "));if(o=u.study,u.chart=e.charts[n.chartName],u.type=i,R.w01(),u.permanent=o.permanent,u.customLegend=o.customLegend,u.uniqueId=t.uniqueID(),t.Studies.prepareStudy(e,o,u),(d=e.chart.state.studies)||(d=e.chart.state.studies={}),d.sorted=null,n.replaceID?(p=!0,delete n.replaceID):(e.layout.studies[u.inputs.id]=u,(u.overlay||u.underlay)&&e.addOverlay(u),e.currentlyImporting||n.calculateOnly||!u.chart.dataSet||e.createDataSet(null,u.chart)),e.quoteDriver&&e.quoteDriver.updateSubscriptions(),e.changeOccurred("layout"),n.calculateOnly)return u;if(m=e.panels[u.panel],g=!1,(f=!(u.overlay||u.underlay))&&o.horizontalCrosshairFieldFN&&(m.horizontalCrosshairField=o.horizontalCrosshairFieldFN(e,u)),e.editCallback?g=!0:f?e.callbackListeners.studyPanelEdit&&e.callbackListeners.studyPanelEdit.length&&(g=!0):e.callbackListeners.studyOverlayEdit&&e.callbackListeners.studyOverlayEdit.length&&(g=!0),g){for(var H in n.editMode=!0,y=!1,u.inputs)if("i","d","id"!=H&&"display"!=H){y=!0;break}if(!y)for(var j in u.outputs){y=!0;break}y&&(void 0!==u.study.edit?u.study.edit&&(L=e,q=u,I=a,N=r,v=function(){R.w01(),t.clearCanvas(L.chart.tempCanvas,L),q.study.edit(q,{stx:L,inputs:I,outputs:N,parameters:n})},e.setPanelEdit(m,v),u.editFunction=v):f?e.editCallback?(w=e,D=u,A=a,T=r,v=function(){var e;e=w.editCallback(w,D),t.clearCanvas(w.chart.tempCanvas,w),t.Studies.studyDialog(w,i,e,{inputs:A,outputs:T,parameters:n})},"chart"!=m.name&&e.setPanelEdit(m,v)):("c","h","a","rt",x=e,b=u,S=a,C=r,k=n,v=function(){t.clearCanvas(x.chart.tempCanvas,x),x.dispatch("studyPanelEdit",{stx:x,sd:b,inputs:S,outputs:C,parameters:k})},"chart"!=m.name&&(e.setPanelEdit(m,v),u.editFunction=v)):(M=e,P=u,F=a,_=r,E=n,R.w01(),v=function(e){t.clearCanvas(M.chart.tempCanvas,M),M.dispatch("studyOverlayEdit",{stx:M,sd:P,inputs:F,outputs:_,parameters:E,forceEdit:e})},u.editFunction=v))}return p||e.draw(),u},t.Studies.removeStudy=function(e,t){var i,a,r,n;a=(i=e.panels[t.panel])&&i.yAxis.name,(t.overlay||t.underlay)&&e.removeOverlay(t.name),r=e.panels[t.panel],t.attribution&&e.removeFromHolder(t.attribution.marker),delete e.layout.studies[t.name],r&&!e.checkForEmptyPanel(r)&&(a==t.name&&e.electNewPanelOwner(r),(n=e.getYAxisByName(t.panel,t.name))&&(n.name=n.studies[1]||n.renderers[0])),e.draw(),e.resizeChart()},t.Studies.getPanelFromFieldName=function(e,i){var a,r,n,s,o;if(!(a=t.Studies.getFieldInputs(i)).length)return null;if(!(r=e.layout.studies))return null;for(var l in n={},r)for(var h in r[l].outputMap)n[h]=r[l].panel;for(var c=0;c<a.length;c++)if((s=i.inputs[a[c]])&&(o=n[s]))return o;return null},t.Studies.createLibraryHash=function(){return Object.keys(t.Studies.studyLibrary).join("|")},t.Studies.displayStudies=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y;if(R.w01(),a&&(i.studyLibraryHash=t.Studies.createLibraryHash()),r=e.layout.studies)for(var v in(n={})[i.name]=!0,r)if("unde","fined",(o=(s=r[v]).study)&&(l=s.underlay||s.parameters&&s.parameters.underlayEnabled,!(a&&!l||!a&&l)))if(!(h=t.clone(o.renderer))||h instanceof Array||(h=[h]),c=e.panels[s.panel]){if(c.chart==i&&!c.hidden)if(n[c.name]||(u=s.permanent||!e.manageTouchAndMouse,c.closeX?u&&(c.closeX.style.display="none"):c.close&&u&&(c.close.style.display="none"),c.edit&&("n","on","e",u&&(c.edit.style.display="none")),n[c.name]=u),d=s.chart.dataSegment,s.panel!=s.parameters.chartName||s.parameters&&s.parameters.panelName||(p=t.Studies.getPanelFromFieldName(e,s))&&s.panel!=p&&(s.panel=p),"undefined"==H(o.seriesFN)){if(h){s.overlay||t.Studies.createYAxis(e,s,d,c);for(var x=0;x<h.length;x++){for(var b in m=h[x],s.outputMap)s.outputMap[b]==m.field&&(m.field=b);if(m.field){if(m.panel=s.panel,g=m.binding)for(var S in g)(f=t.Studies.determineColor(s.outputs[g[S]]))&&"auto"!=f&&(m[S]=f);m.yAxis=null,(y=t.Renderer.produce(m.type,m)).stx=e,y.attachSeries(null,m).draw()}}}else t.Studies.displaySeriesAsLine(e,s,d);c&&t.Studies.displayError(e,s)}else o.seriesFN&&c&&(o.seriesFN(e,s,d),t.Studies.displayError(e,s))}else e.currentlyImporting&&delete r[v]},t.Studies.displayError=function(e,t,i){var a,r;R.e01(),t.error&&(a=i&&i.panel?i.panel:t.panel,r=!0===t.error?e.translateIf("Not enough data to compute ")+e.translateIf(t.study.name):e.translateIf(t.error),!i||"center"===i.h&&"bottom"===i.v?e.displayErrorAsWatermark(a,r):e.watermark(a,i))},t.Studies.calculateMinMaxForDataPoint=function(e,t,i){var a,r,n;a=Number.MAX_VALUE,r=-1*Number.MAX_VALUE;for(var s=0;s<i.length;s++)"und","efin","ed",null!==(n=i[s][t])&&"undefined"!=H(n)&&(isNaN(n)||(a=Math.min(n,a),r=Math.max(n,r)));return{min:a,max:r}},t.Studies.getYAxisParameters=function(e,t){var i,a,r;return i={},R.e01(),(a=e.layout.studies&&e.layout.studies[t.name])&&((r=a.study).yaxis||r.yAxisFN?i.noDraw=!0:(r.parameters&&r.parameters.excludeYAxis&&(i.noDraw=!0),i.ground=r.yAxis&&r.yAxis.ground,t&&("by","p","ass","bypass"!=r.range&&("-1 t","o"," ","1","0 to 1","00","0 to 100"==r.range?i.range=[0,100]:"-1 to 1"==r.range?i.range=[-1,1]:("0 ","t","o max","0 to max"==r.range?i.range=[0,Math.max(0,t.high)]:(r.centerline||0===r.centerline)&&(i.range=[Math.min(r.centerline,t.low),Math.max(r.centerline,t.high)]))),i.range&&(t.low=i.range[0],t.high=i.range[1]),a.min&&(t.min=a.min),a.max&&(t.max=a.max),a.parameters&&a.parameters.studyOverZonesEnabled&&(i.noDraw=!0)))),i},t.Studies.doPostDrawYAxis=function(e,i){var a,r,n,s;for(var o in e.layout.studies)a=e.layout.studies[o],(r=e.panels[a.panel])&&!r.hidden&&a.getYAxis(e)==i&&(n=a.study,i.name==a.name&&(n.yaxis&&n.yaxis(e,a),n.yAxisFN&&n.yAxisFN(e,a)),t.Studies.drawZones(e,a),a.error||((s=n.centerline)||0===s||null!==s&&i.highValue>0&&i.lowValue<0)&&t.Studies.drawHorizontal(e,a,null,s||0,i))},t.Studies.displaySeriesAsLine=function(e,i,a){var r;if(a.length&&(r=e.panels[i.panel])&&!r.hidden)for(var n in i.outputMap)t.Studies.displayIndividualSeriesAsLine(e,i,r,n,a)},t.Studies.displaySeriesAsHistogram=function(e,t,i){var a,r,n,s,o,l,h,c,u,d;if("o","v","erlaid",i.length&&(a=e.panels[t.panel],R.e01(),a&&!a.hidden)){for(var p in r=[],t.outputMap)(n=t.outputs[t.outputMap[p]])&&(s=.3,"object"==H(n)&&(s=n.opacity,n=n.color),o={field:p,fill_color_up:n,border_color_up:n,fill_color_down:n,border_color_down:n},t.underlay&&(o.opacity_up=o.opacity_down=s||.3),r.push(o));l=t.getYAxis(e),c=(h=t.inputs).WidthFactor,t.study&&t.study.parameters&&("undef","ine","d","undefined"!==H((u=t.study.parameters).widthFactor)&&(c=u.widthFactor)),d={name:t.name,type:h.HistogramType?h.HistogramType:"overlaid",panel:t.panel,yAxis:l,widthFactor:c||.5,bindToYAxis:!0,highlight:t.highlight},e.drawHistogram(d,r)}},t.Studies.displayIndividualSeriesAsLine=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S=R;if("st","e","p","a","u","to",a.height||(a.height=a.bottom-a.top),s=i.getContext(e),o=i.outputs[i.outputMap[r]]){if(s.save(),"string"==typeof o&&(o={color:o,width:1}),s.lineWidth=o.width||1,"auto"==(l=o.color)&&(l=e.defaultColor),s.strokeStyle=l,h=o.pattern,s.setLineDash(t.borderPatternToArray(s.lineWidth,h)),s.lineDashOffset=0,S.Q4q(17),c=S.q4q(0,"0"),u=i.study,S.w01(),d=i.getYAxis(e),c=e.decimalPlacesFromPriceTick(d.priceTick),(i.overlay||i.underlay)&&(c=null),(d.decimalPlaces||0===d.decimalPlaces)&&(c=d.decimalPlaces),p=null,i.parameters&&(p=i.parameters.label),(m=u.parameters)||(m={}),g="step"==m.plotType||i.plotStepLine,i.series)for(var C in i.series)(f=i.series[C].parameters.type)&&(S.P4q(36),g=S.E4q(f,"step"));m.noLabels&&(p=!1),i.noSlopes||!1===i.noSlopes||(i.noSlopes=m.noSlopes),i.extendToEnd||!1===i.extendToEnd||(i.extendToEnd=m.extendToEnd),y=p||e.preferences.labels&&!1!==p,!1===(v=i.gaplines)&&(v="transparent"),x=i.inputs.Symbol,b=v?e.getGapColorFunction(x,r,o,v):null,e.plotDataSegmentAsLine(r,a,{yAxis:d,skipTransform:e.panels[i.panel].name!=i.chart.name,label:y,labelDecimalPlaces:c,noSlopes:i.noSlopes,step:g,alignStepToSide:i.alignStepToSide,extendToEndOfLastBar:i.extendToEndOfLastBar,width:i.lineWidth,extendToEndOfDataSet:i.extendToEnd,gapDisplayStyle:v,highlight:i.highlight},b),u.appendDisplaySeriesAsLine&&u.appendDisplaySeriesAsLine(e,i,n,r,a),s.restore()}},t.Studies.drawHorizontal=function(e,t,i,a,r,n){var s,o,l;s=e.panels[t.panel],R.w01(),o=e.getBackgroundCanvas().context,s&&(n||(n=r.textStyle),(l=e.pixelFromPrice(a,s,r))>r.top&&l<r.bottom&&e.plotLine(s.left,s.right,l,l,n,"segment",o,!1,{opacity:n&&n.opacity?n.opacity:.5}))},t.Studies.displayHistogramWithSeries=function(e,i,a){var r;R.e01(),e.panels[i.panel],r=.5,i.underlay&&(R.P4q(4),r=R.E4q(0,"0.3")),t.Studies.createHistogram(e,i,a,!1,r),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.drawZones=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T;i.parameters&&i.parameters.studyOverZonesEnabled&&(r=parseFloat(i.parameters.studyOverSoldValue),n=parseFloat(i.parameters.studyOverBoughtValue),s=i.parameters.studyOverSoldColor,o=i.parameters.studyOverBoughtColor,(l=i.zoneOutput)||(l="Result"),(h=t.Studies.determineColor(i.outputs[l]))&&"auto"!=h&&!t.isTransparent(h)||(h=e.defaultColor),s||(s=h),s&&"auto"!=s&&!t.isTransparent(s)||(s=e.defaultColor),o||(o=h),o&&"auto"!=o&&!t.isTransparent(o)||(o=e.defaultColor),c=e.panels[i.panel],d=(u=i.getYAxis(e)).displayBorder,!1===e.axisBorders&&(d=!1),!0===e.axisBorders&&(d=!0),0===u.width&&(d=!1),p=e.getYAxisCurrentPosition(u,c),R.Q4q(36),m=R.q4q(p,"left"),(g=u.justifyRight)||!1===g||(g=e.chart.yAxis.justifyRight||!1===e.chart.yAxis.justifyRight?e.chart.yAxis.justifyRight:m),f=Math.round(u.left+(m?u.width:0))+.5,y=d?3:0,x=(v=e.getBackgroundCanvas().context).fillStyle,v.globalAlpha=.2,e.startClip(c.name,!0),v.beginPath(),b=Math.round(e.pixelFromPrice(n,c,u))+.5,v.strokeStyle=o,v.moveTo(c.left,b),v.lineTo(c.right,b),v.stroke(),v.closePath(),v.beginPath(),S=Math.round(e.pixelFromPrice(r,c,u))+.5,v.strokeStyle=s,v.moveTo(c.left,S),v.lineTo(c.right,S),v.stroke(),v.closePath(),(C=new t.Plotter).newSeries("border","stroke",e.canvasStyle("stx_grid_border")),d&&(k=m?f-y:f-.5,w=m?f+.5:f+y,C.moveTo("border",k,b),C.lineTo("border",w,b),C.moveTo("border",k,S),C.lineTo("border",w,S)),v.fillStyle=x,D={skipTransform:e.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:l+" "+i.name,yAxis:u,opacity:.3},!i.highlight&&e.highlightedDraggable&&(D.opacity*=.3),t.preparePeakValleyFill(e,t.extend(D,{threshold:n,direction:u.flipped?-1:1,color:o})),t.preparePeakValleyFill(e,t.extend(D,{threshold:r,direction:u.flipped?1:-1,color:s})),v.globalAlpha=1,i.study&&i.study.yaxis||(d&&("bo","rder",A=Math.round(u.bottom)+.5,C.moveTo("border",f,u.top),C.lineTo("border",f,A),C.draw(v,"border")),0!==u.width&&("righ","t","s","tx_ya","xi","s",e.canvasFont("stx_yaxis",v),e.canvasColor("stx_yaxis",v),v.textAlign=g?"right":"left",m?(T=u.left+3,g&&(T=u.left+u.width-y-3)):(T=u.left+y+3,g&&(T=u.left+u.width)),v.fillStyle=o,v.fillText(n,T,b),v.fillStyle=s,v.fillText(r,T,S),v.fillStyle=x)),e.endClip(),v.globalAlpha=1,u.name==i.name&&(u.yAxisPlotter=new t.Plotter))},t.Studies.createHistogram=function(e,i,a,r,n){var s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w;s=e.panels[i.panel],o=i.getContext(e),R.w01(),l=i.getYAxis(e),e.startClip(s.name),(h=e.layout.candleWidth-2)<2&&(h=1),c=e.pixelFromPrice(0,s,l),l.min>0&&(c=e.pixelFromPrice(l.min,s,l)),r&&(c=Math.floor(s.top+s.height/2)),u=i.name+"_hist",e.canvasColor("stx_histogram"),d=o.fillStyle,(n||0===n)&&(o.globalAlpha=n),!i.highlight&&e.highlightedDraggable&&(o.globalAlpha*=.3),p=null,m=null,g=i.outputs;for(var D=0;D<a.length;D++)"D","ecreasi","ng ","Bar",(f=a[D])&&(f.candleWidth&&(h=Math.floor(Math.max(1,f.candleWidth-2))),y=Math.floor(e.pixelFromBar(D,s.chart)-h/2),v=Math.floor(h),p=null===p?(x=e.tickFromPixel(y,s.chart)-1)<0?m:e.pixelFromPrice(e.chart.dataSet[x][u],s,l)-c:m,m=e.pixelFromPrice(f[u],s,l)-c,b=t.Studies.determineColor(g["Decreasing Bar"]),S=t.Studies.determineColor(g["Increasing Bar"]),C=t.Studies.determineColor(g["Positive Bar"]),k=t.Studies.determineColor(g["Negative Bar"]),w=l.flipped,o.fillStyle=d,b&&(w?m<p:m>p)?o.fillStyle=b:S&&(w?m>p:m<p)?o.fillStyle=S:C&&(w?m>0:m<0)?o.fillStyle=C:k&&(w?m<0:m>0)&&(o.fillStyle=k),o.fillRect(y,c,v,Math.floor(m)));R.Q4q(11),o.globalAlpha=R.E4q(1378190656,"1"),e.endClip()},t.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:"tma",VIDYA:"vdma",weighted:"wma","welles wilder":"smma",true:"y",false:"n"},t.Studies.prettyRE=/^.*\((.*?)\).*$/,t.Studies.prettyDisplay=function(e){var i,a;if(!(i=t.Studies.prettyRE.exec(e)))return e;if(a=i[1]){for(var r in t.Studies.prettify)a=a.replace(r,t.Studies.prettify[r]);e=e.replace(i[1],a)}return R.e01(),e},t.Studies.getFieldInputs=function(e){var t,i;for(var a in R.e01(),t=[],i=e.study.inputs)"f","ie","l","d","field"==i[a]&&t.push(a);return t},t.Studies.initializeFN=function(e,i,a,r,n,s,o){var l,h,c,u,d,p,m,g,f,y,v,x,b,S,C;if("N","ew"," panel","Own ","pan","el",a||(a={}),n||(n={}),a.id||(a.id=t.Studies.generateID(e,i,a,n.replaceID,n.display)),a.display||(a.display=a.id),l=new t.Studies.StudyDescriptor(a.id,i,a.id,a,r,n),a.Period&&(l.days=Math.max(1,parseInt(l.inputs.Period,10))),o?(o.inputs||(o.inputs=l.study.inputs),o.outputs||(o.outputs=l.study.outputs),l.study=o):o=l.study,o.display&&(a.display=o.display),"string"==typeof n.panelName&&(s=n.panelName),(s==a.id||s&&!e.panelExists(s))&&(l.underlay=l.overlay=!1),"Own panel"!=s&&"New panel"!=s||(s=null),h=l.overlay||a.Overlay||!1!==l.overlay&&o.overlay,c=l.underlay||a.Underlay||!1!==l.underlay&&o.underlay,h&&n.underlayEnabled&&(c=!0),c&&(l.underlay=!0),!c&&e.chart.panel&&s==e.chart.panel.name&&(h=!0),h&&(l.overlay=!0),(!0===(u=e.preferences.dragging)||u&&u.study)&&(l.overlay=!0),s?n.panelName=s:h||c||(s=a.id),n.calculateOnly)return(h||c)&&(e.panels[n.panelName]?l.panel=n.panelName:l.panel=t.Studies.getPanelFromFieldName(e,l)||n.chartName),l;if(d={},(p=e.layout.studies[n.replaceID])&&(d={outputMap:t.clone(p.outputMap),panel:p.panel}),l.panel="",s?(m=t.Studies.smartMovePanel(e,l.inputs,s,n.replaceID,"New panel"==n.panelName))&&(l.panel=m.name):(h||c)&&(l.panel=t.Studies.getPanelFromFieldName(e,l)||n.chartName),l.panel||(g=o.panelHeight||null,(f=o.yAxis||{}).name=l.inputs.id,l.panel=l.inputs.id,e.createPanel(l.inputs.display,l.panel,g,n.chartName,new t.ChartEngine.YAxis(f))),l.parameters&&l.parameters.panelName&&(l.parameters.panelName=l.panel),y=e.panels[l.panel],v=t.Studies.smartCreateYAxis(e,y,l.inputs.id,n.yaxisDisplayValue,n.yAxis||o.yAxis),(b=(x=o?t.clone(o.yAxis):null)||v)&&(b.ground&&(b.initialMarginBottom=0),(b.initialMarginTop||0===b.initialMarginTop||b.initialMarginBottom||0===b.initialMarginBottom)&&e.calculateYAxisMargins(b),b.name==n.replaceID&&(b.name=l.inputs.id)),v&&("d","ef","ault",v.width="none"==v.position?0:t.ChartEngine.YAxis.prototype.width,"shared"==n.yaxisDisplayValue||"default"==n.yaxisDisplayValue?delete n.yaxisDisplayValue:x?t.ensureDefaults(v,x):v.name==l.name&&(n.yaxisDisplayColor&&"auto"!=n.yaxisDisplayColor?v.textStyle=t.colorToHex(n.yaxisDisplayColor):delete v.textStyle,v.justifyRight=null,v.flipped=n.flippedEnabled),v!=y.yAxis?v.displayGridLines=!1:v!=e.chart.yAxis&&(v.displayGridLines=e.displayGridLinesInStudies)),e.calculateYAxisPositions(),p){for(var k in"vec","t","or",S=!1,e.drawingObjects)C=e.drawingObjects[k],d.outputMap&&d.outputMap.hasOwnProperty(C.field)?(C.field=C.field.replace(n.replaceID,l.inputs.id),l.parameters&&l.parameters.panelName?C.panelName=l.parameters.panelName:C.panelName=l.panel,S=!0):d.panel&&d.panel==C.panelName&&(C.panelName=C.panelName.replace(n.replaceID,l.inputs.id),S=!0);S&&e.changeOccurred("vector")}return l},t.Studies.smartMovePanel=function(e,t,i,a,r){var n,s,o,l;return R.e01(),s=t.id,a&&(n=e.layout.studies[a]),n&&(o=e.panels[n.panel])&&o.yAxis.name==a&&(!r&&i==a||e.checkForEmptyPanel(o.name,!0,n)?i!=a&&e.panels[i]||(s!=o.name&&e.modifyPanel(o,{name:s,display:t.display}),i=s):(e.electNewPanelOwner(o),(l=n.getYAxis(e)).name==a&&e.electNewYAxisOwner(l))),e.panels[i]},t.Studies.smartCreateYAxis=function(e,i,a,r,n){var s,o,l,h;return"sh","ar","ed",s=e.getYAxisByName(i,a),!r&&n&&(r=n.position),"default"!=r&&"shared"!=r&&r!=i.yAxis.name||(r=""),R.w01(),["left","right","none"].indexOf(r)>-1?(!s||s.isShared(e)?(o=n||{},t.extend(o,{name:a,position:r}),s||e.currentlyImporting||i==i.chart.panel||i.yAxis.studies.length||i.yAxis.renderers.length?(l=s==i.yAxis,s&&(s.name=e.electNewYAxisOwner(s)),s=e.addYAxis(i,new t.ChartEngine.YAxis(o)),l&&(i.yAxis=s)):(s=i.yAxis,t.extend(s,o))):s.position=r,s):r?((h=e.getYAxisByName(i,r))&&s==i.yAxis&&!s.isShared(e)&&(i.yAxis=h),s&&s.isShared(e)?s.name=e.electNewYAxisOwner(s):s!==i.yAxis&&e.deleteYAxisIfUnused(i,s),h):(s&&(s.isShared(e)?s.name=e.electNewYAxisOwner(s):(delete s.position,s!==i.yAxis&&e.deleteYAxisIfUnused(i,s))),e.resizeChart(),i.yAxis)},t.Studies.calculateVolume=function(e,i){var a,r,n;if("vol undr"==i.type){if(!e||!e.chart.dataSet)return;a=e.layout,r=i.parameters.removeStudy,n=a.volumeUnderlay,a.volumeUnderlay=!r,n!=a.volumeUnderlay&&e.changeOccurred("layout"),r&&t.Studies.removeStudy(e,i)}i.outputMap={},i.outputMap.Volume=""},t.Studies.MA=function(e,i,a,r,n,s,o,l){var h;R.w01(),(h=new t.Studies.StudyDescriptor(n+" "+o.name,"ma",o.panel)).chart=o.chart,h.days=parseInt(i,10),h.startFrom=o.startFrom,l&&(h.subField=l),h.inputs={},e&&(h.inputs.Type=e),a&&(h.inputs.Field=a),r&&(h.inputs.Offset=parseInt(r,10)),t.Studies.calculateMovingAverage(s,h)},t.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tma:"triangular",vdma:"vidya",wma:"weighted",smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential",triangular:"Triangular",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tma:"Triangular",triangular:"Triangular",vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},t.Studies.movingAverageHelper=function(e,i){var a;if("options"==i){for(var r in a={},t.Studies.movingAverage.translations)a[r]=e.translateIf(t.Studies.movingAverage.translations[r]);return a}return R.w01(),t.Studies.movingAverage.conversions[i]},t.Studies.createVolumeChart=function(e,i,a){var r,n,s,o,l,h,c,u,d,p=R;r=i.panel,i.inputs,n=i.underlay,s=i.overlay,o=t.Studies.determineColor(i.outputs["Up Volume"]),l=t.Studies.determineColor(i.outputs["Down Volume"]),h=n?"stx_volume_underlay":"stx_volume",p.Q4q(0),e.setStyle(p.q4q("_up",h),"color",o),p.Q4q(0),e.setStyle(p.E4q("_down",h),"color",l),c=[{field:i.volumeField||"Volume",fill_color_up:e.canvasStyle(h+"_up").color,border_color_up:e.canvasStyle(h+"_up").borderLeftColor,opacity_up:e.canvasStyle(h+"_up").opacity,fill_color_down:e.canvasStyle(h+"_down").color,border_color_down:e.canvasStyle(h+"_down").borderLeftColor,opacity_down:e.canvasStyle(h+"_down").opacity,color_function:i.colorFunction}],u=c[0],n||"rgb(184, 44, 12)"!==u.border_color_down||("#0","0","0000",u.border_color_down="#000000",u.border_color_up="#000000"),d={name:"Volume",panel:r,yAxis:i.getYAxis(e),widthFactor:1,bindToYAxis:!0,highlight:i.highlight},t.extend(d,i.study.parameters),t.extend(d,i.parameters),e.colorByCandleDirection&&!i.colorFunction&&(u.color_function=function(e){var t,i;return t=e.Open,i=e.Close,p.w01(),{fill_color:t>i?u.fill_color_down:u.fill_color_up,border_color:t>i?u.border_color_down:u.border_color_up,opacity:t>i?u.opacity_down:u.opacity_up}}),e.drawHistogram(d,c)},t.Studies.calculateStandardDeviation=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f=R;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var y in(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Moving Average Type"])||(n=i.inputs.Type),t.Studies.MA(n,i.days,r,i.inputs.Offset,"_MA",e,i),s=0,f.Q4q(16),o=f.q4q("0",2147483647),l=0,h=Number(i.inputs["Standard Deviations"]),f.e01(),h<0&&(h=2),c=i.name,i.outputs)f.Q4q(18),c=f.q4q(c,y," ");for(u=i.startFrom-1,p=0;u>=0&&p<i.days;u--,p++)(d=a[u][r])&&"object"==H(d)&&(d=d[i.subField]),isNaN(d)&&(f.Q4q(17),d=f.q4q(0,"0")),s+=Math.pow(d,2),o+=d;for(u=i.startFrom;u<a.length;u++)"_","M","A ",(d=(m=a[u])[r])&&"object"==H(d)&&(d=d[i.subField]),d||0===d||(d=0),s+=Math.pow(d,2),o+=d,u<i.days-1||(u>=i.days&&("o","bject",(g=a[u-i.days][r])&&"object"==H(g)&&(g=g[i.subField]),isNaN(g)&&(f.Q4q(17),g=f.q4q(0,"0")),f.Q4q(4),s-=Math.pow(g,f.q4q(0,"2")),o-=g),((l=m["_MA "+i.name])||0===l)&&(m[c]=Math.sqrt((s+i.days*Math.pow(l,2)-2*l*o)/i.days)*h))}},t.Studies.calculateMovingAverage=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v;if("Clos","e","fie","l","d",i.chart.scrubbed){if("ma"!=(a=i.inputs.Type)&&"sma"!=a&&a||(a="simple"),a in(r=t.Studies.movingAverage.typeMap))return t.Studies["calculateMovingAverage"+r[a]](e,i);if("simple"===a){for(var x in n=i.chart.scrubbed,s=0,o=[],l=i.name,i.outputs)R.Q4q(18),l=R.E4q(l,x," ");for((h=i.inputs.Field)&&"field"!=h||(h="Close"),c=parseInt(i.inputs.Offset,10),isNaN(c)&&(c=0),m=i.startFrom,g=c,u=i.startFrom-1;u>=0;u--)if("o","bj","ect",(d=n[u][h])&&"object"==H(d)&&(d=d[i.subField]),d||0===d)if(g>0)g--,m=u;else{if(o.length==i.days-1)break;s+=d,o.unshift(d)}for(o.length<i.days-1&&(o=[],m=0),f=[],u=m;u<n.length;u++)(d=n[u][h])&&"object"==H(d)&&(d=d[i.subField]),y=u+c>=0&&u+c<n.length?n[u+c]:null,d||0===d?(s+=d,o.push(d),o.length>i.days&&(s-=o.shift()),v=o.length==i.days?s/i.days:null,y?y[l]=v:u+c>=n.length&&((p={})[l]=v,f.push(p))):y?y[l]=null:u+c>=n.length&&((p={})[l]=null,f.push(p));i.appendFutureTicks(e,f)}}},t.Studies.calculateMovingAverageExponential=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b=R;for(var S in"C","lo","s","e",i=t.inputs.Type,a=t.chart.scrubbed,r=0,n=0,s=0,o=2/(t.days+1),"welles wilder"!==i&&"smma"!==i||(o=1/t.days),l=null,h=t.name,t.outputs)b.Q4q(18),h=b.q4q(h,S," ");for((c=t.inputs.Field)&&"field"!=c||(c="Close"),u=parseInt(t.inputs.Offset,10),isNaN(u)&&(u=0),m=t.startFrom,g=u,d=t.startFrom-1;d>=0;d--)if((p=a[d][h])||0===p){if(null===l&&(l=p),s=t.days,g<=0)break;g--,m=d}for(null===l&&(l=m=0),b.e01(),f=[],d=m;d<a.length;d++)(p=a[d][c])&&"object"==H(p)&&(p=p[t.subField]),y=d+u>=0&&d+u<a.length?a[d+u]:null,p||0===p?(s==t.days-1?v=n=(r+=p)/t.days:s<t.days-1?(r+=p,b.Q4q(72),n=b.E4q(r,s,1),v=null):0===s?(n=r+=p,v=null):(l||0===l)&&(b.Q4q(73),v=n=b.q4q(o,p,l,l)),l=n,s++):v=null,y?y[h]=v:d+u>=a.length&&((x={})[h]=v,f.push(x));t.appendFutureTicks(e,f)},t.Studies.calculateMovingAverageVIDYA=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x=R;for(var b in"_S","TD ","C","l","o","se",i.inputs.Type,a=i.chart.scrubbed,r=2/(i.days+1),n=null,s=i.name,i.outputs)x.Q4q(18),s=x.E4q(s,b," ");for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.std=new t.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=5,i.std.startFrom=i.startFrom,i.std.inputs={Field:o,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},t.Studies.calculateStandardDeviation(e,i.std),t.Studies.MA("ma",20,"_STD "+i.name,0,"_MASTD",e,i),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(n=d=0),m=[],h=d;h<a.length;h++)"o","bject",(c=(g=a[h])[o])&&"object"==H(c)&&(c=c[i.subField]),f=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c?(g["_MASTD "+i.name]||0===g["_MASTD "+i.name])&&(y=g["_STD "+i.name]/g["_MASTD "+i.name],x.P4q(74),n=v=x.E4q(1,y,y,r,r,c,n),h<i.days&&(v=null),f?f[s]=v:h+l>=a.length&&((u={})[s]=v,m.push(u))):f?f[s]=null:h+l>=a.length&&((u={})[s]=null,m.push(u));i.appendFutureTicks(e,m)},t.Studies.calculateMovingAverageTriangular=function(e,i){var a,r,n,s,o,l,h,c,u,d=R;for(var p in a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.ceil(i.days/2),t.Studies.MA("simple",n,r,0,"TRI1",e,i),i.days%2==0&&n++,t.Studies.MA("simple",n,"TRI1 "+i.name,0,"TRI2",e,i),s=i.name,i.outputs)d.Q4q(18),s=d.q4q(s,p," ");d.e01(),o=parseInt(i.inputs.Offset,10),isNaN(o)&&(o=0),l=o;for(var m=i.startFrom-1;m>=0;m--)if((h=a[m][s])||0===h){if(!(l>0))break;l--}for(c=[],m++;m<a.length;m++)m+o>=0&&(m+o<a.length?(d.P4q(0),a[d.E4q(o,m)][s]=a[m]["TRI2 "+i.name]):((u={})[s]=a[m]["TRI2 "+i.name],c.push(u)));i.appendFutureTicks(e,c)},t.Studies.calculateMovingAverageWeighted=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y;for(var v in"f","ield",i=t.chart.scrubbed,a=0,r=0,(n=t.inputs.Field)&&"field"!=n||(n="Close"),s=t.days*(t.days+1)/2,o=t.name,t.outputs)R.P4q(18),o=R.E4q(o,v," ");for(l=parseInt(t.inputs.Offset,10),isNaN(l)&&(l=0),d=[],p=t.startFrom,m=l,R.e01(),h=t.startFrom-1;h>=0;h--)if((c=i[h][n])&&"object"==H(c)&&(c=c[t.subField]),c||0===c)if(m>0)m--,p=h;else{if(d.length==t.days-1)break;d.unshift(c)}for(d.length<t.days-1&&(d=[],p=0),h=0;h<d.length;h++)a+=(h+1)*d[h],r+=d[h];for(g=[],h=p;h<i.length;h++)(c=i[h][n])&&"object"==H(c)&&(c=c[t.subField]),f=h+l>=0&&h+l<i.length?i[h+l]:null,c||0===c?(d.push(c),d.length>t.days&&(a-=r,r-=d.shift()),a+=d.length*c,r+=c,y=h<t.days-1?null:a/s,f?f[o]=y:h+l>=i.length&&((u={})[o]=y,g.push(u))):f?f[o]=null:h+l>=i.length&&((u={})[o]=null,g.push(u));t.appendFutureTicks(e,g)},t.Studies.calculateStudyATR=function(e,t){var i,a,r,n,s,o,l,h=R;if(i=t.chart.scrubbed,a=t.days,i.length<a+1)t.error=!0;else{r=0,n=t.name;for(var c=Math.max(t.startFrom,1);c<i.length;c++)"A","T","R"," ","Sum True Rang","e ","Tr","ue Ran","ge ","Sum ","True Range ",s=i[c],h.Q4q(4),o=i[h.E4q(1,c)],l=s.trueRange,o["Sum True Range "+n]&&(h.Q4q(0),r=o[h.q4q(n,"Sum True Range ")]),r+=l,c>a&&(h.Q4q(4),r-=i[h.q4q(a,c)][h.E4q(n,"True Range ",h.P4q(0))]),h.Q4q(0),s[h.q4q(n,"True Range ")]=l,h.Q4q(0),s[h.E4q(n,"Sum True Range ")]=r,c==a?(h.P4q(0),s[h.E4q(n,"ATR ")]=h.E4q(r,a,h.Q4q(5))):c>a&&(h.P4q(0),s[h.E4q(n,"ATR ")]=(o["ATR "+n]*(a-1)+l)/a)}},t.Studies.displayPSAR2=function(e,i,a){var r,n,s,o,l,h,c,u,d,p,m,g,f,y=R;for(var v in"sq","uarewave",r=e.panels[i.panel],s=(n=i.getYAxis(e))==e.chart.panel.yAxis,e.startClip(r.name),o=i.getContext(e),l="squarewave"==i.inputs["Plot Type"],i.outputs){h=v+" "+i.name,o.beginPath(),c=e.layout.candleWidth,y.Q4q(1),u=Math.max(y.E4q("3",1),Math.floor(e.chart.tmpWidth/2));for(var x=0;x<a.length;x++)(d=a[x])&&(d[h]||0===d[h])&&(d.candleWidth&&(c=d.candleWidth),s&&d.transform&&(d=d.transform),p=e.pixelFromBar(x,r.chart),l&&(y.P4q(5),p-=y.q4q(c,2)),m=e.pixelFromTransformedValue(d[i.referenceOutput?i.referenceOutput+" "+i.name:h],r,n),0!==x&&a[x-1]&&(a[x-1][h]||0===a[x-1][h])||o.moveTo(p,m),l?(o.lineTo(p,m),y.Q4q(0),o.lineTo(y.q4q(c,p),m),a[x+1]&&(y.Q4q(0),g=a[y.E4q(1,x)],s&&g.transform&&(g=g.transform),g[h]||0===g[h]||(y.P4q(0),o.lineTo(y.E4q(c,p),e.pixelFromTransformedValue(g[i.referenceOutput?i.referenceOutput+" "+i.name:h],e.panels[i.panel],n))))):(y.P4q(30),o.moveTo(y.E4q(2,p,u),m),y.P4q(25),o.lineTo(y.E4q(2,u,p),m)));o.lineWidth=1,i.highlight&&(o.lineWidth=3),"auto"==(f=t.Studies.determineColor(i.outputs[v]))&&(f=e.defaultColor),o.strokeStyle=f,!i.highlight&&e.highlightedDraggable&&(y.Q4q(1),o.globalAlpha*=y.E4q("0.3",1)),o.stroke(),o.closePath(),o.lineWidth=1}e.endClip()},t.Studies.inputAttributeDefaultGenerator=function(e){return(e||0===e)&&e.constructor==Number?Math.floor(e)==e?e>0?{min:1,step:1}:{step:1}:e>0?{min:0,step:.01}:{step:.01}:{}},t.Studies.getMarketOffset=function(e){var i,a,r,n,s,o,l=e.stx,h=e.localQuoteDate,c=e.shiftToDateBoundary;i="UT",i+="C",arguments.length>1&&(l=arguments[0],h=arguments[1],a=arguments[2]);var u=l.chart.symbol;return r=t.Market.Symbology.isForexMetal(u),void 0===a&&(a=t.Market.Symbology.isForexSymbol(u)),n=l.chart.market?a?"America/New_York":l.chart.market.market_tz:null,s=new Date(h.getTime()+6e4*h.getTimezoneOffset()),n&&-1!=n.indexOf(i)||(s=t.convertTimeZone(s,"UTC",n)),o=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()).getTime()-h.getTime(),c&&a&&(R.P4q(75),o+=R.E4q("1000",60,60,2147483647,r?6:7)),o},t.Studies.getStudyList=function(e){var i,a;for(var r in i={},a={},t.extend(a,e),t.Studies.studyLibrary)a[r]||(i[t.Studies.studyLibrary[r].name]=r);return i},t.Studies.determineColor=function(e){return"obj","e","c","t",R.w01(),e?"object"===H(e)?e.color:e:null},R.e01(),t.Studies.calculateGenericEnvelope=function(e,t,i,a,r,n){var s,o,l,h,c,u,d,p=R;i||(i=0),n||(n=0),a&&"field"!=a||(a="Close"),r||(r=a),s=t.chart.scrubbed,p.w01(),(o=t.inputs.Field)&&"field"!==o||(o="Close");for(var m=t.startFrom;s&&m<s.length;m++)"%","b"," ","B","and","widt","h "," M","edian ","o","b","ject",(l=s[m])&&l[a]&&((h=l[o])&&"object"==H(h)&&(h=h.Close),(c=l[a])&&"object"==H(c)&&(c=c[t.subField]),(u=l[r])&&"object"==H(u)&&(u=u[t.subField]),p.P4q(62),d=p.E4q(u,n,i),p.Q4q(0),l[t.type+" Top "+t.name]=p.E4q(d,c),p.P4q(4),l[t.type+" Bottom "+t.name]=p.q4q(d,c),l[t.type+" Median "+t.name]=c,l["Bandwidth "+t.name]=c?200*d/c:0,p.P4q(76),l["%b "+t.name]=p.q4q("1",d,50,h,c))},t.Studies.displayChannel=function(e,i,a){var r,n,s;if(i.inputs["Channel Fill"]){for(var o in r={panelName:i.panel},i.outputs)"Channe","l","Top"==(n=o.split(" ").pop())||"High"==n?r.topBand=o+" "+i.name:"Bottom"==n||"Low"==n?r.bottomBand=o+" "+i.name:"Median"!=n&&"Channel"!=n||(r.color=t.Studies.determineColor(i.outputs[o]));i.parameters&&i.parameters.opacity?r.opacity=i.parameters.opacity:r.opacity=.2,s=e.panels[i.panel],r.skipTransform=s.name!=i.chart.name,r.yAxis=i.getYAxis(e),!i.highlight&&e.highlightedDraggable&&(r.opacity*=.3),t.prepareChannelFill(e,r)}t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.initAnchorHandle=function(e,t){var i=t.handle;i||(e.controls.anchorHandles||(e.controls.anchorHandles={}),e.controls.anchorHandles[t.uniqueId]?i=e.controls.anchorHandles[t.uniqueId].handle:("stx_anc","hor_h","andl","e",(i=document.createElement("div")).classList.add("stx_anchor_handle"),i.setAttribute(t.uniqueId,""),e.controls.anchorHandles[t.uniqueId]={handle:i,sd:t},e.controls.chartControls.parentElement.appendChild(i)),t.anchorHandle=i)},t.Studies.removeAnchorHandle=function(e,t){var i=((e.controls.anchorHandles||{})[t.uniqueId]||{}).handle;i&&(delete e.controls.anchorHandles[t.uniqueId],i.remove())},t.Studies.repositionAnchor=function(e,a){var r,n,s,o,l,h,c=a.currentAnchorTime,u=a.uniqueId,d=(e.repositioningAnchorSelector||{}).hoverTick,p=e.chart,m=p.dataSet,g=p.market,f=e.controls.anchorHandles;if(r={},d||0===d){if(d>=m.length)return;if(n=!a.inputs["Anchor Date"],s=m[d].DT,o=t.Studies.getMarketOffset({stx:e,localQuoteDate:s,shiftToDateBoundary:!0}),n&&new Date(s.getTime()+o).getDate()!==new Date(c.getTime()+o).getDate())return;g.market_def&&(s=new i.Date(s,g.market_def.market_tz)),l=!n&&t.dateToStr(s,"YYYY-MM-dd"),r={"Anchor Time":t.dateToStr(s,"HH:mm:ss")},l&&(r["Anchor Date"]=l)}h=t.Studies.replaceStudy(e,a.inputs.id,a.type,Object.assign(a.inputs,r),a.outputs,a.parameters,a.panel),f[u].sd=h,e.draw()},t.Studies.displayAnchorHandleAndLine=function(e,a,r){var n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S=R,C=((e.repositioningAnchorSelector||{}).sd===a&&e.repositioningAnchorSelector).hoverTick,k=e.chart,w=e.panels,D=e.xaxisHeight,A=k.market,T=void 0===A?{}:A,M=k.symbol,P=s=w[a.panel],F=P.top,_=P.bottom,E=P.right,L=P.left,N=P.height,O=a.inputs,H=a.anchorHandle,j=a.currentAnchorTime,z=e.canvasStyle("stx_anchor_handle"),V=z.backgroundColor,Q=z.borderLeftColor,B=I((O["Anchor Time"]||"").split(":"),3),U=B[0],W=B[1],Y=B[2],X=void 0===Y?0:Y;o=!O["Anchor Date"],l=t.Market.Symbology.isForexSymbol(M),h=(C||0===C)&&(e.chart.dataSet[C]||{}).DT,c=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[r.length-1].DT,shiftToDateBoundary:!0}),u=h&&o&&new Date(h.getTime()+c).getDate()!==new Date(j.getTime()+c).getDate();var Z=e.controls.anchorHandles[a.uniqueId].highlighted,G=I(T.getNormalOpen().split(":").map((function(e){return S.e01(),parseInt(e)})),2),K=G[0],J=G[1];d=function(t){var i;return S.w01(),i=t?e.tickFromDate(t,null,null,!0):C,[e.pixelFromTick(i,k),i]},p=o?new Date(r[r.length-1].DT):t.strToDate(O["Anchor Date"]),T.market_def&&(p=new i.Date(p,T.market_def.market_tz)),p.setHours(U,W,X),(m=l&&(p.getHours()>K||p.getHours()===K&&p.getMinutes()>=J))&&p.setDate(p.getDate()-1);var $=I(d(),1)[0],ee=I(d(p),2),te=ee[0],ie=ee[1];(n=g=new Date(p)).setHours.apply(n,q(T.getNormalClose().split(":"))),m&&g.setDate(g.getDate()+1);var ae=I(g&&d(g)||[],1)[0];if(o&&(te>E||ae>E)){f=new Date(p);do{f.setDate(f.getDate()-1)}while(T&&!T.isMarketDate(f));var re=I(d(f),2),ne=re[0],se=re[1];ne>L&&(p=f,te=ne,ie=se)}y={y0:F,y1:_,type:"line",confineToPanel:s},e.plotLine(Object.assign(y,{x0:te,x1:te,color:V,pattern:"solid",lineWidth:Z?3:2,opacity:1})),e.plotLine(Object.assign(y,{x0:$,x1:$,color:u?Q:V,pattern:[6,6],lineWidth:2,opacity:u?.5:1})),H.style.height=[8,N/4,50].sort((function(e,t){return S.P4q(4),S.q4q(t,e)}))[1]+"px";var oe=H.getBoundingClientRect(),le=oe.height,he=oe.width;v=Math.round(_)===e.height?D:0,x="chart"===s.name?35:0,S.Q4q(32),b=S.q4q(le,x,v,10),S.Q4q(20),H.style.top=S.q4q(b,"px",_),H.style.left=C||0===C?$:te-he/2+"px",a.currentAnchorTime=p,a.currentAnchorTick=ie},t.Studies.studyScriptLibrary={},t.Studies.studyLibrary=t.Studies.studyLibrary||{},t.extend(t.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:t.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:"ma",Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:t.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"True Range":{name:"True Range",calculateFN:t.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},volume:{name:"Volume Chart",range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,zoom:0},seriesFN:t.Studies.createVolumeChart,calculateFN:t.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"}}})},k=function(e){var t;R.e01(),(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.Driver?(t.ChartEngine.Driver.Lookup=function(e){},t.ChartEngine.Driver.Lookup.prototype.acceptText=function(e,t,i,a){R.e01(),this.cb}):console.error("symbolLookupBase feature requires first activating quoteFeed feature.")},w=function(e){var t;R.e01(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":H(_CIQ))?_CIQ:e.CIQ).ThemeHelper=t.ThemeHelper||function(e){var i,a;R.w01(),this.params=e,a="#FFFFFF",(i=e.stx).chart.container&&(a=getComputedStyle(i.chart.container).backgroundColor,t.isTransparent(a)&&(a=i.containerColor)),this.settings.chart.Background.color=t.hexToRgba(a),this.settings.chart["Grid Lines"].color=t.hexToRgba(i.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=t.hexToRgba(i.canvasStyle("stx_grid_dark").color),this.settings.chart["Axis Text"].color=t.hexToRgba(i.canvasStyle("stx_xaxis").color),this.settings.chartTypes["Candle/Bar"].up.color=t.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=t.hexToRgba(i.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].even.wick=t.hexToRgba(i.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes["Candle/Bar"].up.border=t.hexToRgba(i.canvasStyle("stx_candle_up").borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=t.hexToRgba(i.canvasStyle("stx_candle_down").borderLeftColor),t.isTransparent(i.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),t.isTransparent(i.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=t.hexToRgba(i.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=t.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=t.hexToRgba(i.canvasStyle("stx_mountain_chart").color)},t.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},t.ThemeHelper.prototype.update=function(e){var i,a;function r(t,a,r){for(var n in R.e01(),i[t])e.setStyle(n,a,r)}R.w01(),e||(e=this.params.stx),i={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!0,stx_bar_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},e.chart.container.style.backgroundColor=this.settings.chart.Background.color,e.defaultColor="",r("stx_grid","color",this.settings.chart["Grid Lines"].color),r("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),r("stx_xaxis","color",this.settings.chart["Axis Text"].color),(a=this.settings.chartTypes["Candle/Bar"]).even||(a.even={color:null,wick:t.hexToRgba(e.canvasStyle("stx_candle_shadow_even").color),border:null}),r("stx_candle_up","color",a.up.color),r("stx_candle_down","color",a.down.color),r("stx_candle_even","color",a.even.color),r("stx_shadow_up","color",a.up.wick),r("stx_shadow_down","color",a.down.wick),r("stx_shadow_even","color",a.even.wick),e.setStyle("stx_candle_up","borderLeftColor",a.up.border),e.setStyle("stx_candle_down","borderLeftColor",a.down.border),r("stx_line_chart","color",this.settings.chartTypes.Line.color),e.setStyle("stx_mountain_chart","borderTopColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,1)),e.setStyle("stx_mountain_chart","backgroundColor",t.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),e.setStyle("stx_mountain_chart","color",t.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),e.draw()},t.ChartEngine.prototype.setThemeSettings=function(e){var i;R.e01(),this.styles={},this.chart.container.style.backgroundColor="",this.defaultColor="",e&&((i=new t.ThemeHelper({stx:this})).settings=e,i.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(this.headsUpHR(),this.clearPixelCache(),this.updateListeners("theme"),this.draw())}},D=function(t){var i,a;i="undefined"!=typeof _CIQ?_CIQ:t.CIQ,a="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,i.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Chihuahua, Mazatlan":"America/Chihuahua","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Cancun, Jamaica, Panama":"America/Panama","(UTC-03:00) Buenos Aires":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Montevideo":"America/Montevideo","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Azores":"Atlantic/Azores","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Casablanca":"Africa/Casablanca","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Amsterdam","(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb":"Europe/Sarajevo","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Helsinki, Kiev, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Damascus":"Asia/Damascus","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+02:00) Amman":"Asia/Amman","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Volgograd":"Europe/Moscow","(UTC+03:00) Simferopol":"Europe/Simferopol","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Kuala_Lumpur","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){var t,r,n,s,o,l,h,c,u,d,p;t="undefined"!=typeof window?window:null,R.e01(),r=t||(void 0!==e?e:{}),a.VERSION="0.4.11",n=r.$||r.jQuery||r.Zepto,s=r.fleegix,o=a.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=a.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],h={},c={},u={};for(var m=0;m<l.length;m++)h[l[m].substr(0,R.E4q(1588430208,"3",R.P4q(11)))]=m;for(m=0;m<o.length;m++)c[o[m].substr(0,3)]=m;Array.prototype.indexOf,d=function(e,t){var i,a,r,n=R;if("n","um","be",n.e01(),"r","number"!==H(e))throw n.Q4q(0),n.q4q(e,"not a number: ");if(n.P4q(39),i=n.q4q(e,1e3),r=(a=e.toString()).length,i&&r>t)return n.Q4q(4),a.substr(n.E4q(t,r),r);for(a=[a];r<t;)a.unshift("0"),r++;return a.join("")},p=function(e){if(R.e01(),"u","nde","fi","ned",e){if(!e.url)throw new Error("URL must be specified");if("async"in e||(e.async=!0),!(s&&"undefined"!==H(s.xhr)||n&&void 0!==n.ajax))throw"Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for"," downloading zone files.",new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return e.async?s&&s.xhr?s.xhr.send({url:e.url,method:"get",handleSuccess:e.success,handleErr:e.error}):n.ajax({url:e.url,dataType:"text",method:"GET",error:e.error,success:e.success}):("te","xt",s&&s.xhr?s.xhr.doReq({url:e.url,async:!1}):n.ajax({url:e.url,async:!1,dataType:"text"}).responseText)}},a.ruleCache={},a.Date=function(){var e,t,i,r,n,s,o,l,h=R;if(e="s",e+="tr",e+="ing",t="str",t+="i",t+="n",t+="g",this===a)throw"timezoneJS.Date object must be constructed with 'new'";switch(i=Array.prototype.slice.apply(arguments),r=null,n=null,s=[],o=!1,"[object Array]"===Object.prototype.toString.call(i[0])&&(i=i[0]),H(i[i.length-1])===t&&(o=Date.parse(i[i.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(o)||null===o)&&(n=i.pop())),l=!1,i.length){case 0:r=new Date;break;case 1:r=new Date(i[0]),H(i[0])==e&&-1==i[0].search(/[+-][0-9]{4}/)&&-1==i[0].search(/Z/)&&-1==i[0].search(/T/)&&(l=!0);break;case 2:r=new Date(i[0],i[1]),l=!0;break;default:for(var c=0;c<7;c++)s[c]=i[c]||0;h.P4q(17),r=new Date(s[0],s[1],s[h.E4q(0,"2")],s[3],s[4],s[5],s[h.E4q("6",1,h.Q4q(1))]),l=!0}if(isNaN(r.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=n||null,l?this.setFromDateObjProxy(r):this.setFromTimeProxy(r.getTime(),n)},i.extend(a.Date.prototype,{getDate:function(){return R.w01(),this.date},getDay:function(){return this._day},getFullYear:function(){return R.w01(),this.year},getMonth:function(){return R.w01(),this.month},getYear:function(){return this.year-1900},getHours:function(){return this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return R.w01(),this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return R.w01(),this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return R.w01(),this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return R.e01(),this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return R.w01(),this.getUTCDateProxy().getUTCSeconds()},getTime:function(){return R.e01(),this._timeProxy+60*this.getTimezoneOffset()*1e3},getTimezone:function(){return R.w01(),this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return R.w01(),this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var e;return this._useCache?this._tzInfo:(this.timezone?("Etc/","UT","C",e="Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:a.timezone.getTzInfo(this._timeProxy,this.timezone)):e={tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=e,this._useCache=!0,e)},getUTCDateProxy:function(){var e;return e=new Date(this._timeProxy),R.w01(),e.setUTCMinutes(e.getUTCMinutes()+this.getTimezoneOffset()),e},setDate:function(e){return this.setAttribute("date",e),this.getTime()},setFullYear:function(e,t,i){return void 0!==i&&this.setAttribute("date",1),this.setAttribute("year",e),void 0!==t&&this.setAttribute("month",t),void 0!==i&&this.setAttribute("date",i),this.getTime()},setMonth:function(e,t){return"mon",R.w01(),"th",this.setAttribute("month",e),void 0!==t&&this.setAttribute("date",t),this.getTime()},setYear:function(e){return 0<=(e=Number(e))&&e<=99&&(e+=1900),this.setUTCAttribute("year",e),this.getTime()},setHours:function(e,t,i,a){return R.w01(),this.setAttribute("hours",e),void 0!==t&&("m","i","nute","s",this.setAttribute("minutes",t)),void 0!==i&&("sec","o","n","ds",this.setAttribute("seconds",i)),void 0!==a&&("mill","is","ec","onds",this.setAttribute("milliseconds",a)),this.getTime()},setMinutes:function(e,t,i){return"m","inutes",this.setAttribute("minutes",e),void 0!==t&&("s","e","cond","s",this.setAttribute("seconds",t)),void 0!==i&&("mill","ise","co","nds",this.setAttribute("milliseconds",i)),R.e01(),this.getTime()},setSeconds:function(e,t){return"se","co",R.w01(),"nd","s",this.setAttribute("seconds",e),void 0!==t&&this.setAttribute("milliseconds",t),this.getTime()},setMilliseconds:function(e){return this.setAttribute("milliseconds",e),this.getTime()},setTime:function(e){if(R.w01(),isNaN(e))throw new Error("Units must be a number.");return this.setFromTimeProxy(e,this.timezone),this.getTime()},setUTCFullYear:function(e,t,i){return void 0!==i&&("d","a","t","e",this.setUTCAttribute("date",1)),this.setUTCAttribute("year",e),void 0!==t&&("m","onth",this.setUTCAttribute("month",t)),void 0!==i&&this.setUTCAttribute("date",i),this.getTime()},setUTCMonth:function(e,t){return this.setUTCAttribute("month",e),void 0!==t&&this.setUTCAttribute("date",t),R.e01(),this.getTime()},setUTCDate:function(e){return this.setUTCAttribute("date",e),this.getTime()},setUTCHours:function(e,t,i,a){return this.setUTCAttribute("hours",e),void 0!==t&&this.setUTCAttribute("minutes",t),void 0!==i&&this.setUTCAttribute("seconds",i),void 0!==a&&("mill","iseconds",this.setUTCAttribute("milliseconds",a)),this.getTime()},setUTCMinutes:function(e,t,i){return this.setUTCAttribute("minutes",e),R.w01(),void 0!==t&&this.setUTCAttribute("seconds",t),void 0!==i&&this.setUTCAttribute("milliseconds",i),this.getTime()},setUTCSeconds:function(e,t){var i;if("s","e","conds",this.setUTCAttribute("seconds",e),void 0!==t){980014686,1652168984,i=2;for(var a=1;980014686!==R.d6D(a.toString(),a.toString().length,66232);a++)this.setUTCAttribute("milliseconds",t),i+=2;1652168984!==R.d6D(i.toString(),i.toString().length,61541)&&this.setUTCAttribute("",t)}return R.w01(),this.getTime()},setUTCMilliseconds:function(e){return"millisec","onds",this.setUTCAttribute("milliseconds",e),this.getTime()},setFromDateObjProxy:function(e){this.year=e.getFullYear(),this.month=e.getMonth(),this.date=e.getDate(),this.hours=e.getHours(),this.minutes=e.getMinutes(),this.seconds=e.getSeconds(),R.e01(),this.milliseconds=e.getMilliseconds(),this._day=e.getDay(),this._dateProxy=e,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(e,t){var i,r;i=new Date(e),r=t?a.timezone.getTzInfo(e,t,!0).tzOffset:i.getTimezoneOffset(),i.setTime(e+6e4*(i.getTimezoneOffset()-r)),this.setFromDateObjProxy(i)},setAttribute:function(e,t){var i;if("Full","Y","ea","r","y",R.w01(),"e","a","r",isNaN(t))throw new Error("Units must be a number.");(i=this._dateProxy)["set"+("year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1))](t),this.setFromDateObjProxy(i)},setUTCAttribute:function(e,t){var i,a;if(isNaN(t))throw"Units mu","st be a num","ber.",new Error("Units must be a number.");i="year"===e?"FullYear":e.substr(0,1).toUpperCase()+e.substr(1),(a=this.getUTCDateProxy())["setUTC"+i](t),a.setUTCMinutes(a.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(a.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(e){var t;R.e01(),t=this.getTimezoneInfo().tzOffset,this.timezone=e,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+t)},removeTimezone:function(){R.w01(),this.timezone=null,this._useCache=!1},valueOf:function(){return R.w01(),this.getTime()},clone:function(){return this.timezone?new a.Date(this.getTime(),this.timezone):new a.Date(this.getTime())},toGMTString:function(){return R.e01(),this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){return R.w01(),"Etc/","UTC",this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+"Z"},toJSON:function(){return R.e01(),this.toISOString()},toDateString:function(){return R.e01(),this.toString("EEE MMM dd yyyy")},toTimeString:function(){return R.e01(),this.toString("H:mm k")},toString:function(e,t){var i,r,n,s;return R.e01(),e||(e="yyyy-MM-ddTHH:mm:ss.SSS"),i=e,r=t?a.timezone.getTzInfo(this.getTime(),t):this.getTimezoneInfo(),n=this,t&&(n=this.clone()).setTimezone(t),s=n.getHours(),i.replace(/a+/g,(function(){return"k"})).replace(/y+/g,(function(e){return R.e01(),d(n.getFullYear(),e.length)})).replace(/d+/g,(function(e){return d(n.getDate(),e.length)})).replace(/m+/g,(function(e){return d(n.getMinutes(),e.length)})).replace(/s+/g,(function(e){return R.w01(),d(n.getSeconds(),e.length)})).replace(/S+/g,(function(e){return d(n.getMilliseconds(),e.length)})).replace(/h+/g,(function(e){return d(s%12==0?12:s%12,e.length)})).replace(/M+/g,(function(e){var t,i;return t=n.getMonth(),(i=e.length)>3?a.Months[t]:i>2?a.Months[t].substring(0,i):(R.P4q(0),d(R.E4q(1,t),i))})).replace(/k+/g,(function(){return R.w01(),s>=12?(s>12&&(s-=12),"PM"):"AM"})).replace(/H+/g,(function(e){return R.w01(),d(s,e.length)})).replace(/E+/g,(function(e){return o[n.getDay()].substring(0,e.length)})).replace(/Z+/gi,(function(){return R.w01(),r.tzAbbr}))},toUTCString:function(){return R.e01(),this.toGMTString()},civilToJulianDayNumber:function(e,t,i){var a,r,n,s=R;return++t>12&&(s.Q4q(5),a=parseInt(s.E4q(t,12),10),s.Q4q(43),t=s.q4q(12,t),e+=a),t<=2&&(e-=1,t+=12),s.Q4q(5),r=2-(a=Math.floor(s.q4q(e,100)))+Math.floor(a/4),n=Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+i+r-1524,s.w01(),n},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}},!0),a.timezone=new function(){var e,t,i;function r(e){var t,i;return t=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,(i=e.match(t))[1]=parseInt(i[1],10),i[2]=i[2]?parseInt(i[2],10):0,i[3]=i[3]?parseInt(i[3],10):0,i.slice(1,5)}function n(a){var r,s,o,h,c,u,d=R;if(r=i[a])return r;if(s=a.split("/")[0],o=t[s])return o;if("string"==typeof(h=e.zones[a]))return n(h);if(!e.loadedZones.backward)return"ba","c","kwar","d",e.loadZoneFile("backward"),n(a);d.P4q(4),c=d.E4q(0,"1136431705"),d.Q4q(7),u=d.E4q(569655328,"2");for(var p=1;d.d6D(p.toString(),p.toString().length,28815)!==c;p++)l(a),u+=2;2110399636!==d.d6D(u.toString(),u.toString().length,8223)&&l(a)}function s(e){var t,i,a,n;if(e[3])return t=parseInt(e[3],10),i=11,a=31,e[4]&&(i=h[e[4].substr(0,3)],a=parseInt(e[5],10)||1),n=e[6]?r(e[6]):[0,0,0],R.e01(),R.P4q(16),[t,i,a,n[R.q4q("0",2147483647)],n[1],n[2]]}function o(e,t){var i=R;for(var a=1;-1873610327!==i.d6D(a.toString(),a.toString().length,23556);a++)return i.Q4q(0),~Math.ceil(i.q4q(e,t));if(i.e01(),150408858!==i.d6D(2..toString(),2..toString().length,41317))return i.Q4q(4),-Math.ceil(i.q4q(e,t))}function l(e){throw R.e01(),R.Q4q(18),new Error(R.E4q("' is either incorrect, or not loaded in the timezone registry.","Timezone '",e))}function d(e){var t;return R.w01(),t=r(e),t=("-"===e.charAt(0)?-1:1)*(1e3*(60*(60*t[0]+t[1])+t[2])),R.Q4q(77),R.E4q(60,t,"1000")}R.w01(),e=this,t={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},i={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=n,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(e){var t,i;for(var a in t={async:!0},i=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica",e)t[a]=e[a];return this.loadZoneFiles(i,t)},this.loadZoneFiles=function(e,t){var i,a;if(a=0,"string"==typeof e)return this.loadZoneFile(e,t);i=(t=t||{}).callback,t.callback=function(){++a===e.length&&"function"===H(i)&&i()};for(var r=0;r<e.length;r++)this.loadZoneFile(e[r],t)},this.loadZoneFile=function(t,i){var a,r,n;if(R.e01(),void 0===this.zoneFileBasePath)throw"Please define a b","ase path to your zone file directory -- time","zon","eJS.timezone.zoneFileBasePath.",new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[t])return this.loadedZones[t]=!0,a=t,r=i,n=e.zoneFileBasePath+"/"+a,r&&r.async?e.transport({async:!0,url:n,success:function(t){return e.parseZones(t)&&"function"==typeof r.callback&&r.callback()},error:function(){throw R.e01(),R.P4q(18),new Error(R.E4q("' zoneinfo files","Error retrieving '",n))}}):e.parseZones(e.transport({url:n,async:!1}))},this.loadZoneJSONData=function(t,i){var a;return a=function(t){for(var i in(t=JSON.parse(t)).zones)e.zones[i]=t.zones[i];for(var a in R.w01(),t.rules)e.rules[a]=t.rules[a]},R.w01(),i?a(e.transport({url:t,async:!1})):e.transport({url:t,success:a})},this.loadZoneDataFromObject=function(t){if(t){for(var i in R.w01(),t.zones)e.zones[i]=t.zones[i];for(var a in t.rules)e.rules[a]=t.rules[a]}},this.getAllZones=function(){var e;for(var t in R.w01(),e=[],this.zones)e.push(t);return e.sort()},this.parseZones=function(t){var i,a,n,o,l;if(!t)return!1;i=t.split("\n"),a=[],R.w01(),o=null,l=null;for(var h=0;h<i.length;h++)if((n=i[h]).match(/^\s/)&&(R.P4q(18),n=R.E4q(n,"Zone ",o)),(n=n.split("#")[0]).length>3)switch("Zo","n","e",(a=n.split(/\s+/)).shift()){case"Zone":if(o=a.shift(),e.zones[o]||(e.zones[o]=[]),a.length<3)break;a.splice(3,a.length,s(a)),a[3]&&(a[3]=Date.UTC.apply(null,a[3])),a[0]=-d(a[0]),e.zones[o].push(a);break;case"Rule":l=a.shift(),e.rules[l]||(e.rules[l]=[]),a[0]=parseInt(a[0],10),a[1]=parseInt(a[1],10)||a[1],a[5]=r(a[5]),a[6]=d(a[6]),e.rules[l].push(a);break;case"Link":if(e.zones[a[1]])throw". C","annot create link of a preexisted zone.",new Error("Error with Link "+a[1]+". Cannot create link of a preexisted zone.");isNaN(a[0])?e.zones[a[1]]=a[0]:e.zones[a[1]]=parseInt(a[0],10)}return!0},this.transport=p,this.getTzInfo=function(t,i,r){var n,s,d,p,m,g;return this.lazyLoadZoneFiles(i),R.w01(),s=+(n=function t(i,a){var r,n,s,o,h=R;r="number"==typeof i?i:new Date(+i).getTime(),n=a,s=e.zones[n];for(;"string"==typeof s;)n=s,s=e.zones[n];if(h.w01(),!s){if(!e.loadedZones.backward)return e.loadZoneFile("backward"),t(i,a);if(n&&n!==a)return e.lazyLoadZoneFiles(n),t(i,n);l(n)}if(0===s.length)throw"'"," ","o","n ",h.P4q(32),new Error(h.q4q(i,"' on ",a,"No Zone found for '"));for(var c=s.length-1;c>=0&&!((o=s[c])[3]&&r>o[3]);c--);return h.Q4q(0),s[h.q4q(1,c)]}(t,i))[0],(d=function(t,i,r,n){var s,l,d,p,m,g,f,y,v,x,b,S,C,k=R;if(s="number"==typeof t?new Date(t):t,l=i[1],d=i[0],p=l.match(/^([0-9]):([0-9][0-9])$/))return"J","a","n",[-1e6,"max","-","Jan",1,[0,0,0],60*parseInt(p[1],10)+parseInt(p[2],10),"-"];if(m=function(e,t,i){var a;if(k.P4q(17),a=k.E4q(0,"0"),"u"===t||"g"===t||"z"===t)a=0;else if("s"===t)a=d;else{if("w"!==t&&t)throw k.Q4q(0),new Error(k.q4q(t,"unknown type "));a=o(d,i[6])}return k.P4q(1),a*=k.q4q(60,1e3),k.e01(),new Date(e.getTime()+a)},g=function(e,t){var i,a,r,n,s,o,l;return i=e[0],r=(a=e[1])[5],u[i]||(u[i]={}),u[i][a]?n=u[i][a]:(isNaN(a[4])?("last"===a[4].substr(0,4)?(n=new Date(Date.UTC(i,h[a[3]]+1,1,r[0]-24,r[1],r[2],0)),s=c[a[4].substr(4,3)],o="<="):(n=new Date(Date.UTC(i,h[a[3]],a[4].substr(5),r[0],r[1],r[2],0)),s=c[a[4].substr(0,3)],o=a[4].substr(3,2)),l=n.getUTCDay(),">="===o?n.setUTCDate(n.getUTCDate()+(s-l+(s<l?7:0))):n.setUTCDate(n.getUTCDate()+(s-l-(s>l?7:0)))):n=new Date(Date.UTC(i,h[a[3]],a[4],r[0],r[1],r[2],0)),u[i][a]=n),t&&(n=m(n,r[3],t)),n},f=function(e,t){var i;i=[];for(var a=0;t&&a<t.length;a++)t[a][0]<=e&&(t[a][1]>=e||t[a][0]===e&&"only"===t[a][1]||"max"===t[a][1])&&i.push([e,t[a]]);return k.e01(),i},y=function(e,t,i){var a,n;return k.e01(),e instanceof Date?i&&(e=m(e,r?"u":"w",i)):(a=e[0],n=e[1],e=!i&&u[a]&&u[a][n]?u[a][n]:g(e,i)),t instanceof Date?i&&(t=m(t,r?"u":"w",i)):(k.P4q(4),a=t[k.q4q(0,"0")],k.P4q(11),n=t[k.q4q(1357674272,"1")],t=!i&&u[a]&&u[a][n]?u[a][n]:g(t,i)),e=Number(e),t=Number(t),k.Q4q(4),k.E4q(t,e)},v=s.getUTCFullYear(),(b=a.ruleCache[n])||(b=a.ruleCache[n]={}),(x=b[v])||(k.Q4q(52),(x=(x=f(k.E4q(v,"1",0),e.rules[l])).concat(f(v,e.rules[l]))).sort(y),b[v]=x),!x||!x.length)return null;for(var w=x.length-1;w>=0;w--)if(w>0?(k.Q4q(4),S=x[k.E4q(1,w)][1]):S=null,(C=x[w])[2]||(C[2]=g(C,S)),y(s,C,S)>=0)return C[1];return null}(t,n,r,i))&&(s=o(s,d[6])),p=d,{tzOffset:s,tzAbbr:(m=n[2]).indexOf("%s")>-1?(g=p?"-"===p[7]?"":p[7]:"S",m.replace("%s",g)):m.indexOf("/")>-1?m.split("/",R.q4q(0,"2",R.Q4q(17)))[p&&p[6]?1:0]:m}},this.lazyLoadZoneFiles=function(e){var t;if(R.w01(),this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(!(t=n(e)))throw new Error("Not a valid timezone ID.");this.loadZoneFiles(t)}}}}.call("undefined"!==("undefined"==typeof window?"undefined":H(window))?window:void 0),a.timezone.loadingScheme=a.timezone.loadingSchemes.MANUAL_LOAD,a.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"Egypt","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[0,"Morocco","+00/+01",15406956e5],[-60,"Morocco","+01/+00",null]],"Africa/Windhoek":[[-120,"Namibia","%s",null]],"Africa/Johannesburg":[[-120,"SA","SAST",null]],"Africa/Tunis":[[-60,"Tunisia","CE%sT",null]],"Antarctica/Troll":[[0,"Troll","%s",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"Azer","+04/+05",null]],"Asia/Dhaka":[[-360,"Dhaka","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Shanghai":[[-480,"PRC","C%sT",null]],"Asia/Hong_Kong":[[-480,"HK","HK%sT",null]],"Asia/Taipei":[[-480,"Taiwan","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"Japan","J%sT",null]],"Asia/Amman":[[-120,"Jordan","EE%sT",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"ROK","K%sT",null]],"Asia/Pyongyang":[[-510,"-","KST",15254766e5],[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon","EE%sT",null]],"Asia/Kuala_Lumpur":[[-480,"-","+08",null]],"Asia/Hovd":[[-420,"Mongol","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"Mongol","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"Pakistan","PK%sT",null]],"Asia/Hebron":[[-120,"Palestine","EE%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Damascus":[[-120,"Syria","EE%sT",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"Aus","CST",null]],"Australia/Perth":[[-480,"AW","WST",null]],"Australia/Eucla":[[-525,"AW","+0845/+0945",null]],"Australia/Brisbane":[[-600,"AQ","EST",null]],"Australia/Adelaide":[[-570,"AS","CST",null]],"Australia/Hobart":[[-600,"AT","EST",null]],"Australia/Currie":[[-600,"AT","EST",null]],"Australia/Melbourne":[[-600,"AV","EST",null]],"Australia/Sydney":[[-600,"AN","EST",null]],"Australia/Lord_Howe":[[-630,"LH","+1030/+11",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"NC","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"Tonga","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],UTC:"Etc/UTC","Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],WET:[[0,"EU","WE%sT",null]],CET:[[-60,"C-Eur","CE%sT",null]],MET:[[-60,"C-Eur","ME%sT",null]],EET:[[-120,"EU","EE%sT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"America/Thule":[[240,"Thule","A%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Paris":[[-60,"EU","CE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Europe/Amsterdam":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-","MSK",null]],"Europe/Simferopol":[[-180,"-","MSK",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-","+06",null]],"Asia/Novosibirsk":[[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Sarajevo":"Europe/Belgrade","Europe/Istanbul":[[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"CR","C%sT",null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Panama":[[300,"-","EST",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"Arg","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[240,"Chile","-04/-03",14808096e5],[180,"-","-03",null]],"America/Bogota":[[300,"CO","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Montevideo":[[180,"Uruguay","-03/-02",null]],"America/Caracas":[[240,"-","-04",null]],"Europe/Athens":"Europe/Bucharest","Asia/Rangoon":"Asia/Yangon","Atlantic/Reykjavik":"UTC","Asia/Kuwait":"Asia/Riyadh","Asia/Muscat":"Asia/Riyadh","Asia/Istanbul":"Europe/Istanbul"},rules:{Egypt:[],Morocco:[[2013,2018,"-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2018,"-","Mar","lastSun",[2,0,0,null],60,"-"],[2016,"only","-","Jun","5",[3,0,0,null],0,"-"],[2016,"only","-","Jul","10",[2,0,0,null],60,"-"],[2017,"only","-","May","21",[3,0,0,null],0,"-"],[2017,"only","-","Jul","2",[2,0,0,null],60,"-"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"-"],[2019,"only","-","May","5",[3,0,0,null],-60,"-"],[2019,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-","May","31",[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-","May","16",[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,0,0,null],-60,"-"],[2022,"only","-","May","8",[2,0,0,null],0,"-"],[2023,"only","-","Mar","19",[3,0,0,null],-60,"-"],[2023,"only","-","Apr","23",[2,0,0,null],0,"-"],[2024,"only","-","Mar","10",[3,0,0,null],-60,"-"],[2024,"only","-","Apr","14",[2,0,0,null],0,"-"]],Namibia:[[1994,2017,"-","Sep","Sun>=1",[2,0,0,null],0,"CAT"],[1995,2017,"-","Apr","Sun>=1",[2,0,0,null],-60,"WAT"]],SA:[],Tunisia:[],Troll:[[2005,"max","-","Mar","lastSun",[1,0,0,"u"],120,"+02"],[2004,"max","-","Oct","lastSun",[1,0,0,"u"],0,"+00"]],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Azer:[],Dhaka:[],PRC:[],HK:[],Taiwan:[],Iran:[[2016,"only","-","Mar","20",[24,0,0,null],60,"-"],[2016,"only","-","Sep","20",[24,0,0,null],0,"-"],[2017,2019,"-","Mar","21",[24,0,0,null],60,"-"],[2017,2019,"-","Sep","21",[24,0,0,null],0,"-"],[2020,"only","-","Mar","20",[24,0,0,null],60,"-"],[2020,"only","-","Sep","20",[24,0,0,null],0,"-"],[2021,2023,"-","Mar","21",[24,0,0,null],60,"-"],[2021,2023,"-","Sep","21",[24,0,0,null],0,"-"],[2024,"only","-","Mar","20",[24,0,0,null],60,"-"],[2024,"only","-","Sep","20",[24,0,0,null],0,"-"]],Zion:[[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Japan:[],Jordan:[[2014,"max","-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,"max","-","Oct","lastFri",[0,0,0,"s"],0,"-"]],ROK:[],Lebanon:[[1993,"max","-","Mar","lastSun",[0,0,0,null],60,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Mongol:[[2015,2016,"-","Mar","lastSat",[2,0,0,null],60,"-"],[2015,2016,"-","Sep","lastSat",[0,0,0,null],0,"-"]],Pakistan:[],Palestine:[[2016,2018,"-","Mar","Sat>=24",[1,0,0,null],60,"S"],[2016,"max","-","Oct","lastSat",[1,0,0,null],0,"-"],[2019,"max","-","Mar","lastFri",[0,0,0,null],60,"S"]],Syria:[[2012,"max","-","Mar","lastFri",[0,0,0,null],60,"S"],[2009,"max","-","Oct","lastFri",[0,0,0,null],0,"-"]],Aus:[],AW:[],AQ:[],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"-"]],AT:[[2001,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"-"]],AV:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"-"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"-"]],LH:[[2008,"max","-","Apr","Sun>=1",[2,0,0,null],0,"-"],[2008,"max","-","Oct","Sun>=1",[2,0,0,null],30,"-"]],Fiji:[[2014,2018,"-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2015,"max","-","Jan","Sun>=12",[3,0,0,null],0,"-"],[2019,"max","-","Nov","Sun>=8",[2,0,0,null],60,"-"]],NC:[],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,"max","-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,"max","-","Sep","lastSun",[3,0,0,null],60,"-"]],Tonga:[[2016,"only","-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2017,"only","-","Jan","Sun>=15",[3,0,0,null],0,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],"C-Eur":[[1981,"max","-","Mar","lastSun",[2,0,0,"s"],60,"S"],[1996,"max","-","Oct","lastSun",[2,0,0,"s"],0,"-"]],Thule:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,"max","-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],CR:[],Cuba:[[2012,"max","-","Nov","Sun>=1",[0,0,0,"s"],0,"S"],[2013,"max","-","Mar","Sun>=8",[0,0,0,"s"],60,"D"]],Haiti:[[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Arg:[],Brazil:[[2008,2017,"-","Oct","Sun>=15",[0,0,0,null],60,"-"],[2016,2019,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",[0,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,"max","-","Sep","Sun>=2",[4,0,0,"u"],60,"-"]],CO:[],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]],Uruguay:[]}})},A=function(e){var t,i;function a(e,i,a){var r;R.e01(),e.layout.crosshair||(t.ChartEngine.crosshairY=0,t.ChartEngine.crosshairX=0,e.cx=e.backOutX(0),e.cy=e.backOutY(0),e.findHighlights(null,!0),t.ChartEngine.crosshairY=a,t.ChartEngine.crosshairX=i,r=e.container.getBoundingClientRect(),e.top=r.top,e.left=r.left,e.right=e.left+e.width,e.bottom=e.top+e.height,e.cx=e.backOutX(i),e.cy=e.backOutY(a),e.currentPanel&&e.currentPanel.chart.dataSet&&(e.crosshairTick=e.tickFromPixel(e.cx,e.currentPanel.chart),e.crosshairValue=e.adjustIfNecessary(e.currentPanel,e.crosshairTick,e.valueFromPixel(e.cy,e.currentPanel))),e.headsUpHR(),e.findHighlights(!0),e.draw())}(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).ChartEngine.prototype.touchSingleClick=function(e,i,r){var n,s;return n=this,s=arguments,function(){R.e01(),function(){var e,n,o,l,h=R;if(!this.cancelTouchSingleClick){if("touchSingleCli","ck",this.runPrepend("touchSingleClick",s))return;if(this.editingAnnotation)return;if(this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1},!this.displayCrosshairs)return;if(!this.displayInitialized)return;if(""!==this.openDialog)return;if(i<this.left||i>this.right||r<this.top||r>this.bottom)return;e=this.backOutY(t.ChartEngine.crosshairY),n=this.backOutX(t.ChartEngine.crosshairX),this.currentPanel=this.whichPanel(e),o=this.currentVectorParameters.vectorType,t.Drawing&&o&&t.Drawing[o]&&(new t.Drawing[o]).dragToDraw||(this.drawingClick(this.currentPanel,n,e)||a(this,i,r),this.currentVectorParameters.vectorType||this.activeMarker&&this.activeMarker.click({cx:n,cy:e,panel:this.currentPanel})||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:n,y:e}))}h.P4q(8),l=h.q4q("2",0),h.w01();for(var c=1;1614432561!==h.f6D(c.toString(),c.toString().length,13017);c++)this.runAppend("",s),l+=2;977712312!==h.d6D(l.toString(),l.toString().length,81263)&&this.runAppend("",s),this.runAppend("touchSingleClick",s)}.apply(n,s)}},t.ChartEngine.prototype.touchDoubleClick=function(e,i,r){var n,s;if(n="doubl",n+="eTap",s="touc",s+="hDoubleC",s+="li",s+="ck",!this.runPrepend(s,arguments)&&!this.editingAnnotation){if(R.w01(),t.ChartEngine.drawingLine)return this.undo();this.activeDrawing||(a(this,i,r),this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:r,panel:this.currentPanel})||this.dispatch(n,{stx:this,finger:e,x:i,y:r}),this.runAppend("touchDoubleClick",arguments))}},t.ChartEngine.prototype.startProxy=function(e){var t;if(this.touchPointerType=e.pointerType,"touch"==this.touchPointerType){if(this.mouseMode=!1,R.e01(),this.touches[this.touches.length]={pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY},this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],1==this.touches.length){-1953683428,-172460184,t=2;for(var i=1;-1953683428!==R.d6D(i.toString(),i.toString().length,7854);i++)this.gesturePointerId=e.pointerId,t+=2;-172460184!==R.f6D(t.toString(),t.toString().length,33158)&&(this.gesturePointerId=e.pointerId)}this.touchstart(e)}else this.mouseMode=!0},t.ChartEngine.prototype.moveProxy=function(e){e.pointerType&&"touch"!=e.pointerType?this.mouseMode=!0:(this.mouseMode=!1,this.touchmove(e))},t.ChartEngine.prototype.endProxy=function(e){var t;if("touch"==this.touchPointerType){this.mouseMode=!1,t=this.touches.length;for(var i=0;i<this.touches.length;i++)if(this.touches[i].pointerId==e.pointerId){this.touches.splice(i,1);break}if(i==t)return this.touches=[],this.grabbingScreen=!1,void(this.touching=!1);this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],this.touchend(e)}else this.mouseMode=!0},t.ChartEngine.prototype.msMouseMoveProxy=function(e){R.e01(),!this.touches.length&&this.mouseMode&&this.mousemove(e)},t.ChartEngine.prototype.msMouseDownProxy=function(e){this.mouseMode&&this.mousedown(e)},t.ChartEngine.prototype.msMouseUpProxy=function(e){this.mouseMode&&(R.e01(),this.mouseup(e))},t.ChartEngine.prototype.iosMouseMoveProxy=function(e){R.e01(),this.touching||this.mousemove(e)},t.ChartEngine.prototype.iosMouseDownProxy=function(e){this.touching?this.mouseMode=!1:(this.mouseMode=!0,this.mousedown(e))},t.ChartEngine.prototype.iosMouseUpProxy=function(e){R.w01(),this.touching||this.mouseup(e)},t.ChartEngine.prototype.touchmove=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L,q,I,N,O,H,j,z,V,Q=R;if(i="n",i+="on",i+="e",this.displayInitialized&&""===this.openDialog&&!0!==t.ChartEngine.ignoreTouch){if(a=[],(!this.overYAxis||this.controls&&this.controls.crossX&&this.controls.crossX.style.display!=i)&&(e&&e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),e&&e.stopPropagation()),r=(new Date).getTime(),-1==this.clicks.s2MS){if(this.clicks.e1MS=r,this.clicks.e1MS-this.clicks.s1MS<25)return}else if(this.clicks.e2MS=r,this.clicks.e2MS-this.clicks.s2MS<25)return;if(e.pointerType||(e.pointerType=this.touchPointerType),t.isSurface){if(this.mouseMode)return;e.pointerId||(e.pointerId=this.gesturePointerId);for(var B=0;B<this.touches.length;B++)if(this.touches[B].pointerId==e.pointerId){if(n=Math.abs(this.touches[B].pageX-e.clientX),s=Math.abs(this.touches[B].pageY-e.clientY),Q.Q4q(24),!Math.sqrt(Q.E4q(n,s,n,s)))return;if(this.clicks.e1MS=(new Date).getTime(),this.clicks.e1MS-this.clicks.s1MS<50)return;if(this.touches[B].pageX==e.clientX&&this.touches[B].pageY==e.clientY)return;this.touches[B].pageX=this.touches[B].clientX=e.clientX,this.touches[B].pageY=this.touches[B].clientY=e.clientY;break}if(0===B?this.movedPrimary=!0:this.movedSecondary=!0,B==this.touches.length)return;this.changedTouches=[{pointerId:e.pointerId,pageX:e.clientX,pageY:e.clientY,clientX:e.clientX,clientY:e.clientY}],a=this.touches.length?this.touches:this.changedTouches}else a=e.touches,this.changedTouches=e.changedTouches;if(!(1==a.length&&Math.pow(this.clicks.x-a[0].clientX,2)+Math.pow(this.clicks.y-a[0].clientY,2)<=16||(o=this.crosshairXOffset,Q.w01(),l=this.crosshairYOffset,h=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,c=!this.layout.crosshair&&!h&&!this.touchNoPan,("pen"==e.pointerType||c||this.activeDrawing&&"freeform"==this.activeDrawing.name)&&(o=l=0),this.runPrepend("touchmove",arguments)))){if(t.ChartEngine.resizingPanel){p=a[0],m=-1689763759,g=897958839,f=2;for(var U=1;Q.f6D(U.toString(),U.toString().length,29946)!==m;U++)return u=p.clientX,d=p.clientY,Q.Q4q(0),void this.mousemoveinner(Q.q4q(o,u),Q.q4q(l,d));if(Q.f6D(f.toString(),f.toString().length,40644)!==g)return u=p.clientX,d=p.clientY,Q.P4q(43),void this.mousemoveinner(Q.E4q(o,u),Q.q4q(l,d,Q.Q4q(4)))}if(-1!=this.moveB&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=a[0].pageX,1!=a.length||this.twoFingerStart){if(2==a.length&&this.allowZoom){if(!this.displayCrosshairs)return;if(C=(S=a[0]).clientX,k=S.clientY,D=(w=a[1]).clientX,A=w.clientY,Q.P4q(78),y=Math.sqrt(Q.q4q(D,D,C,A,C,k,A,k)),this.pinchingCenter=(Math.min(C,D)-Math.max(C,D))/2,T=Math.round(this.gestureStartDistance-y),c&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(t.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(C<this.pt.x1&&D<this.pt.x2||C>this.pt.x1&&D>this.pt.x2||k<this.pt.y1&&A<this.pt.y2||k>this.pt.y1&&A>this.pt.y2)this.pinchingScreen=0;else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:C,x2:D,y1:k,y2:A},0===this.pinchingScreen)M="p",M+="a",M+="n",this.grabMode=M,Q.Q4q(0),this.mousemoveinner(Q.q4q(o,C),Q.q4q(l,k)),this.gestureStartDistance=y;else{if(P=Math.asin((Math.max(A,k)-Math.min(A,k))/y),Math.abs(T)<12&&!c){if(this.moveCount++,4==this.moveCount)return this.pinchingScreen=0,void(this.moveCount=0)}else this.moveCount=0;if(P<1||!this.goneVertical&&P<1.37){if(!this.currentPanel)return;if(F=this.currentPanel.chart,this.goneVertical=!1,y=this.pt.x2-this.pt.x1,_=this.grabStartValues.t2-this.grabStartValues.t1,E=this.grabStartValues.t1+_/2,Q.P4q(5),L=Q.q4q(y,_),!1===F.allowScrollFuture&&!1===F.allowScrollPast&&(L=Math.max(L,F.width/F.dataSet.length)),q=this.layout.candleWidth,this.setCandleWidth(L,F),F.maxTicks<this.minimumZoomTicks)return void this.setCandleWidth(q,F);this.micropixels=0,I=this.pixelFromTick(Math.round(E),F),N=this.pt.x1-this.left+Math.round(y/2),Q.P4q(4),O=Q.q4q(N,I),Q.P4q(5),H=Q.E4q(O,L),j=Math.round(H),F.scroll-=j,Q.Q4q(4),this.microscroll=Q.E4q(H,j),this.micropixels=L*this.microscroll,this.draw()}else z=this.grabStartYAxis,this.goneVertical=!0,z&&(z.zoom=this.grabStartZoom+(this.gestureStartDistance-y),this.grabStartZoom<z.height?z.zoom>=z.height&&(z.zoom=z.height-1):z.zoom<=z.height&&(z.zoom=z.height+1),this.draw());this.updateChartAccessories()}}else if(3==a.length&&t.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;V=a[0].clientX,y=this.grabStartX-V,this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(y/10),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=1)}}else u=(v=a[0]).clientX,d=v.clientY,this.pinchingScreen=0,Q.Q4q(0),this.mousemoveinner(Q.q4q(o,u),Q.q4q(l,d)),x=this.whichPanel(d),b=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=d<=this.top+b&&d>=b-this.xaxisHeight+this.top&&this.insideChart,this.overYAxis=!!x&&((u>=x.right||u<=x.left)&&this.insideChart);this.runAppend("touchmove",arguments)}}},t.ChartEngine.prototype.touchstart=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,L=R;if(!t.ChartEngine.ignoreTouch&&(t.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=e.touches,this.changedTouches=e.changedTouches),!t.ChartEngine.resizingPanel&&(i=this.crosshairXOffset,a=this.crosshairYOffset,"pen"==this.touchPointerType&&(i=a=0),!this.runPrepend("touchstart",arguments)))){if(this.manageTouchAndMouse&&e&&e.preventDefault&&this.captureTouchEvents&&e.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,this.moveCount=0,this.twoFingerStart=!1,1==this.touches.length||2==this.touches.length){if(this.touchMoveTime=Date.now(),s=(h=this.touches[0]).clientX,o=h.clientY,this.moveA=s,this.moveB=-1,""===this.openDialog&&(this.registerPointerEvent({x:s,y:o,time:this.touchMoveTime},"down"),1!=this.changedTouches.length||this.isDoubleClick(!0)||t.extend(this.clicks,{s1MS:this.touchMoveTime,e1MS:-1,s2MS:-1,e2MS:-1,x:this.changedTouches[0].pageX,y:this.changedTouches[0].pageY})),c=this.container.getBoundingClientRect(),this.top=c.top,this.left=c.left,this.right=this.left+this.width,this.bottom=this.top+this.height,1==this.touches.length&&(u=this.backOutY(o),this.currentPanel=this.whichPanel(u)),this.currentPanel||(this.currentPanel=this.chart.panel),l=this.currentPanel,s>=this.left&&s<=this.right&&o>=this.top&&o<=this.bottom){this.insideChart=!0,d=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=o<=this.top+d&&o>=this.top+d-this.xaxisHeight,this.overYAxis=s>=this.left+l.right||s<=this.left+l.left,p=-1,this.cy=this.backOutY(o),this.cx=this.backOutX(s),this.crosshairTick=this.tickFromPixel(this.cx,l.chart),this.crosshairValue=this.adjustIfNecessary(l,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var q=0;q<this.drawingObjects.length;q++)if((m=this.drawingObjects[q]).highlighted){if(p<0&&(p=q),g=m.highlighted,this.findHighlights(!0),q==p&&m.highlighted&&!m.permanent)return void(-1==this.clicks.s2MS?this.activateRepositioning(m):this.findHighlights(!1,!0));this.anyHighlighted=!0,m.highlighted=g}}else this.insideChart=!1;if(f=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,this.layout.crosshair||f||!this.insideChart||this.touchNoPan){if(this.grabbingScreen=!1,this.insideChart&&l.subholder===e.target&&(M=this.currentVectorParameters.vectorType,t.Drawing&&M&&t.Drawing[M]&&(new t.Drawing[M]).dragToDraw))return this.userPointerDown=!0,t.ChartEngine.crosshairX=s,t.ChartEngine.crosshairY=o,l&&l.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(t.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(l,this.crosshairTick,this.valueFromPixel(this.backOutY(t.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(l,this.backOutX(s),this.backOutY(o)),void this.headsUpHR()}else{if(i=a=0,(y=this.mainSeriesRenderer||{}).params&&y.params.baseline&&!1!==this.chart.baseline.userLevel&&this.controls.baselineHandle&&(L.Q4q(4),v=this.valueFromPixel(L.q4q(5,u),l),L.Q4q(0),x=this.valueFromPixel(L.q4q(5,u),l),b=this.chart.right-parseInt(getComputedStyle(this.controls.baselineHandle).width,10),this.chart.baseline.actualLevel<Math.max(v,x)&&this.chart.baseline.actualLevel>Math.min(v,x)&&this.backOutX(h.clientX)>b))return S="stx-gr",S+="ab",this.repositioningBaseline={lastDraw:Date.now()},void this.controls.baselineHandle.classList.add(S);if(this.controls.anchorHandles){C=Object.values(this.controls.anchorHandles),k=!1;for(var I=0;I<C.length;I++){var N=w=C[I],O=N.handle,H=N.sd;D=this.resolveX(this.cx),A=this.resolveY(this.cy);var j=O.getBoundingClientRect(),z=j.left,V=j.top,Q=j.right,B=j.bottom;L.Q4q(7),z-=L.E4q(94614592,"10"),Q+=10,t.boxIntersects(z,V,Q,B,D,A,D,A)&&(T="stx",T+="-grab",w.highlighted=!0,this.repositioningAnchorSelector={sd:H},O.classList.add(T),k=!0),!0===w.highlighted&&(w.highlighted=!1)}if(k)return}for(r in this.panels)if((n=this.panels[r]).highlighted)return void this.grabHandle(n);this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),l.chart.spanLock=!1,this.yToleranceBroken=!1,L.Q4q(0),this.grabStartX=L.E4q(i,s),L.P4q(0),this.grabStartY=L.q4q(a,o),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=l.chart.scroll,this.grabStartScrollY=l.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(l.chart),this.grabStartYAxis=this.whichYAxis(l,this.backOutX(s)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout((U=this,function(){U.grabbingHand()}),100)}1===this.touches.length&&this.layout.crosshair&&!f&&l.subholder===e.target&&(L.P4q(0),this.mousemoveinner(L.E4q(i,s),L.E4q(a,o)))}var U,W;if(2==this.touches.length){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;for(r in F=(P=this.touches[1]).clientX,_=P.clientY,this.panels)if((n=this.panels[r]).highlighted)return void this.grabHandle(n);l=this.currentPanel,L.P4q(78),this.gestureStartDistance=Math.sqrt(L.E4q(F,F,s,_,s,o,_,o)),this.pt={x1:s,x2:F,y1:o,y2:_},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),l.chart.spanLock=!1,L.P4q(0),this.grabStartX=L.E4q(i,s),L.P4q(0),this.grabStartY=L.E4q(a,o),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=l.chart.scroll,this.grabStartScrollY=l.yAxis.scroll,this.grabStartPanel=l,this.swipeStart&&this.swipeStart(l.chart),this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(l,this.backOutX((s+F)/2))||l.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,l),y2:this.valueFromPixel(this.pt.y2-this.top,l),t1:this.tickFromPixel(this.pt.x1-this.left,l.chart),t2:this.tickFromPixel(this.pt.x2-this.left,l.chart)},this.twoFingerStart=!0,setTimeout((W=this,L.e01(),function(){W.grabbingHand()}),100)}else if(3==this.touches.length){if(!this.displayCrosshairs)return;E=this.touches[0].clientX,this.grabStartX=E,this.grabStartPeriodicity=this.layout.periodicity}1!=this.touches.length||this.layout.crosshair||(this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer()),this.runAppend("touchstart",arguments)}},R.w01(),t.ChartEngine.prototype.touchend=function(e){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=R;if(i="to",i+="uchend",a="t",a+="o",a+="u",a+="chend",!t.ChartEngine.ignoreTouch&&(this.swipe.end=!0,t.isSurface||(this.touches=e.touches,this.changedTouches=e.changedTouches),!this.runPrepend(a,arguments))){if(this.cancelLongHold=!0,this.touches.length<=1&&(this.layout.crosshair||this.currentVectorParameters.vectorType)&&(this.touches.length&&this.twoFingerStart||(this.grabbingScreen=!1)),this.touches.length&&(this.grabStartX=-1,this.grabStartY=-1),r=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),this.touches.length){if(t.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout((v=this,y.w01(),function(){y.e01(),v.touching=!1}),500),t.ChartEngine.resizingPanel)return void this.releaseHandle();this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}var v;if(n=this.touches.length+1,1==this.changedTouches.length){if(this.repositioningDrawing)return this.changeOccurred("vector"),t.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),void(this.layout.crosshair||this.currentVectorParameters.vectorType||this.findHighlights(!1,!0));if(this.repositioningBaseline)return this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove("stx-grab"),(s=this.mainSeriesRenderer||{}).params&&s.params.baseline&&s.params.type,void this.draw();if(this.repositioningAnchorSelector)return t.Studies.repositionAnchor(this,this.repositioningAnchorSelector.sd),this.repositioningAnchorSelector=null,void Object.values(this.controls.anchorHandles).forEach((function(e){return e.handle.classList.remove("stx-grab")}));if(o=Date.now(),""===this.openDialog&&e.changedTouches.length&&(l=e.changedTouches[0],this.registerPointerEvent({x:l.clientX,y:l.clientY,time:o},"up")),-1==this.clicks.s2MS){if(this.clicks.e1MS=o,h=this.currentVectorParameters.vectorType,t.Drawing&&h&&t.Drawing[h]&&(new t.Drawing[h]).dragToDraw||(this.clicks.e1MS-this.clicks.s1MS<750&&!this.longHoldTookEffect&&(!this.hasDragged||this.layout.crosshair)?setTimeout(this.touchSingleClick(n,this.clicks.x,this.clicks.y),this.doubleClickTime+1):this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}),this.userPointerDown=!1,c=this.backOutY(this.changedTouches[0].pageY)+this.crosshairYOffset,u=this.backOutX(this.changedTouches[0].pageX)+this.crosshairXOffset,p=(d=this.currentPanel)&&d.subholder===e.target,t.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&p)return void this.drawingClick(d,u,c);this.isDoubleClick(!0)&&(p||this.overYAxis||this.overXAxis)&&this.touchDoubleClick(n,this.clicks.x,this.clicks.y)}else this.clicks.e2MS=o,this.clicks={s1MS:-1,e1MS:-1,s2MS:-1,e2MS:-1}}else this.displayCrosshairs&&(-1==this.grabEndPeriodicity||isNaN(this.grabEndPeriodicity)||((t.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),y.Q4q(4),this.grabEndPeriodicity=-y.q4q(0,"1")));if(this.changedTouches.length&&((!this.layout.crosshair&&!this.currentVectorParameters.vectorType&&1==n||this.twoFingerStart&&!r&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),r&&this.continuousZoom)){this.continuousZoom.execute(),m=607298133,g=117249184,f=2;for(var x=1;y.f6D(x.toString(),x.toString().length,5301)!==m;x++)this.continuousZoom.execute(!1),f+=2;y.f6D(f.toString(),f.toString().length,98700)!==g&&this.continuousZoom.execute(!0)}this.touches.length||(this.twoFingerStart=!1),this.runAppend(i,arguments)}},i=!1,t.ChartEngine.prototype.mousemoveinner=t.ChartEngine.prototype.mousemoveinner||function(e,t){i||console.error("touch feature requires activating movement feature."),i=!0}},T=function(e){var t;(t="undefined"!==("undefined"==typeof _CIQ?"undefined":H(_CIQ))?_CIQ:e.CIQ).Visualization=t.Visualization||function(e){var t;if(R.w01(),e){if("function"!=typeof e.renderFunction){"CIQ.Visualization(",") missing re","nde","rFunction property in attributes.",-1635688499,-1562347562,t=2;for(var i=1;-1635688499!==R.f6D(i.toString(),i.toString().length,13415);i++)console.log(""),t+=2;return-1562347562!==R.d6D(t.toString(),t.toString().length,95863)&&console.log(""),void console.log("CIQ.Visualization() missing renderFunction property in attributes.")}this.container=null,this.attributes=e,this.data=null,this.object=null}else console.log("CIQ.Visualization() missing attributes argument.")},t.extend(t.Visualization.prototype,{destroy:function(e){var i;i=this.container,t.resizeObserver(i,null,i.resizeHandle),i.autoGenerated?(i.remove(),delete this.container):i.innerHTML="",e||(this.attributes=null,this.container=null,this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){R.e01()})},draw:function(e){var i,a,r,n,s,o,l,h=R;if(this.data&&"object"===H(this.data)){if("string"==typeof(a=(i=this.attributes).container||this.container)&&(a=document.querySelector(a)),a||("3","00p","x","d","i","v",(a=document.createElement("div")).style.height=a.style.width="300px",document.body.appendChild(a),a.autoGenerated=!0),i.stx){h.P4q(8),r=h.E4q("2132621419",184877152),-679946018,n=2;for(var c=1;h.d6D(c.toString(),c.toString().length,37975)!==r;c++)s=i.stx.chart.canvasShim,n+=2;-679946018!==h.d6D(n.toString(),n.toString().length,83073)&&(s=i.stx.chart.canvasShim),i.useCanvasShim&&s&&s!==a&&s!==a.parentNode&&(a.autoGenerated||((a=a.cloneNode()).id="",a.autoGenerated=!0),s.appendChild(a))}this.container&&this.container!==a&&this.destroy(!0),a.resizeHandle||(o=function(e){return function(){e.data&&e.container&&document.body.contains(e.container)&&e.draw.call(e,!0)}},a.resizeHandle=t.resizeObserver(a,o(this),null,100)),this.container=a,this.attributes=i,(l=(i=t.ensureDefaults({container:this.container},this.attributes)).renderFunction(Object.values(this.data).sort((function(e,t){return h.e01(),e.index<t.index?-1:e.index>t.index?1:0})),i))&&(i.id&&(l.id=i.id),(e||i.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(l))),this.attributes=i,this.object=l}else console.log("CIQ.Visualization.draw() missing data.")},setAttributes:function(e,t){var i,a,r;if("rend","erFunction",i=["renderFunction","container","stx","useCanvasShim","id","forceReplace"],a=!1,r=e,"string"==typeof e&&((r={})[e]=t),"object"==H(r))for(var n in r)this.attributes[n]!==r[n]&&-1!==i.indexOf(n)&&(a=!0),this.attributes[n]=r[n];this.draw(a)},updateData:function(e,i){var a,r,n;for(a in"up","da","te",n=Array.isArray(e)?e.reduce((function(e,t){return R.w01(),e[t.name]=t,e}),{}):t.shallowClone(e))r=n[a],"[object Object]"!==Object.prototype.toString.call(r)&&(n[a]={value:r}),n[a].name||(n[a].name=a),n[a].value||(n[a].value=0);switch(i||(i="replace"),i.toLowerCase()){case"delete":for(a in n)delete this.data[a];break;case"replace":this.data={};case"update":case"add":for(a in n)for(var s in"[object Num","ber]",this.data[a]||(this.data[a]={name:a}),r=n[a].value,"[object Number]"==Object.prototype.toString.call(r)?(this.data[a].value&&"update"!=i||(this.data[a].value=0),this.data[a].value+=r):this.data[a].value=r,n[a])"value"!==s&&(this.data[a][s]=n[a][s]);break;default:"In","valid or missi","ng action.  Valid values are 'add', 'delete', 'r","eplace', or 'update'.",console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.")}return this.draw(this.attributes.forceReplace),this}}),t.ChartEngine.prototype.embedVisualization=function(e){return e||(e={}),e.stx=this,e.useCanvasShim=!0,R.w01(),e.translator=function(t){return R.w01(),e.stx.translateIf(t)},new t.Visualization(e)}},M=function(e){var t,i;R.e01(),t=2;for(var a=1;-952477073!==R.d6D(a.toString(),a.toString().length,1578);a++)i="undefined"!=typeof _CIQ?_CIQ:e.CIQ,t+=2;-168928201!==R.d6D(t.toString(),t.toString().length,10466)&&(i=""==!_CIQ?_CIQ:e.CIQ),i.Studies?("Me","dia","n P","rice",i.Studies.calculateTypicalPrice=function(e,t){var i,a,r,n,s,o=R;if("h","l","cc/4","We","ighted Close","h","l/2",i=t.chart.scrubbed,a=t.days,i.length<a+1)t.overlay||(t.error=!0);else{for(var l in r=t.name,t.outputs)o.Q4q(18),r=o.q4q(r,l," ");n="hlc/3","Med Price"==t.type?n="hl/2":"Weighted Close"==t.type&&(n="hlcc/4"),s=0,t.startFrom<=a&&(t.startFrom=0);for(var h=t.startFrom;h<i.length;h++)h&&i[h-1][r]&&(s=i[h-1][r]*a),s+=i[h][n],h>=a&&(o.Q4q(4),s-=i[o.q4q(a,h)][n],o.P4q(5),i[h][r]=o.q4q(s,a))}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:i.Studies.calculateTypicalPrice,inputs:{Period:14}}})):console.error("medianPrice feature requires first activating studies feature.")},P=function(e){var t;(t="undefined"!=typeof _CIQ?_CIQ:e.CIQ).Studies?("Momentum I","ndicator","fi","e","ld",t.Studies.calculateRateOfChange=function(e,t){var i,a,r,n,s,o,l,h=R;if("Volu","me",h.w01(),(i=t.chart.scrubbed).length<t.days+1)t.error=!0;else{for(var c in(a=t.inputs.Field)&&"field"!=a||(a="Close"),t.parameters.isVolume&&(a="Volume"),r=t.name,t.outputs)h.Q4q(18),r=h.E4q(r,c," ");n=(n=t.inputs["Center Line"])?parseInt(n,10):0;for(var u=Math.max(t.startFrom,t.days);u<i.length;u++)"Mo","m","entum",(s=i[u][a])&&"object"==H(s)&&(s=s[t.subField]),(o=i[u-t.days][a])&&"object"==H(o)&&(o=o[t.subField]),"Momentum"==t.type?(h.Q4q(20),i[u][r]=h.q4q(o,n,s)):(l=o)&&(h.Q4q(79),i[u][r]=h.q4q(l,100,s,n,"1",0))}},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{"Price ROC":{name:"Price Rate of Change",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14,Field:"field"}},Momentum:{name:"Momentum Indicator",calculateFN:t.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):console.error("momentum feature requires first activating studies feature.")},F=function(e){var t,i;t=2;for(var a=1;2054390134!==R.f6D(a.toString(),a.toString().length,25276);a++)i=""==~_CIQ?_CIQ:e.CIQ,t+=2;-300462552!==R.d6D(t.toString(),t.toString().length,56436)&&(i="undefined"!=typeof _CIQ?_CIQ:e.CIQ),R.e01(),i.Studies?("S","P","Y",i.Studies.initPriceRelative=function(e,t,a,r,n,s){var o,l;return"C","omparis","on Sy","mbol",l=[(o=i.Studies.initializeFN(e,t,a,r,n,s)).inputs["Comparison Symbol"].toUpperCase()],i.Studies.fetchAdditionalInstruments(e,o,l),o},i.Studies.calculatePriceRelative=function(e,t){var a,r,n,s,o,l;if(a=t.chart.scrubbed,(r=t.inputs["Comparison Symbol"].toUpperCase())||(r=t.study.inputs["Comparison Symbol"]),R.w01(),(n={})[s=(s=e.chart.symbol||"").replace(/[=+\-*\\%]/g,"")]=a.slice(t.startFrom),n[s].length){s!=r&&(n[r]=null),R.P4q(41),o=i.computeEquationChart(R.q4q("]",r,"]/[",s,"["),n),l=0;for(var h=t.startFrom;h<a.length&&l<o.length;h++){for(;l<o.length&&a[h].DT.getTime()>o[l].DT.getTime();)l++;a[h].DT.getTime()<o[l].DT.getTime()||(a[h]["Result "+t.name]=o[l].Close,l++)}}},i.Studies.displayVsComparisonSymbol=function(e,t,a){var r,n,s,o;if(r=t.inputs["Comparison Symbol"].toUpperCase(),e.getSeries({symbol:r,chart:t.chart}).length){s=(n={skipTransform:e.panels[t.panel].name!=t.chart.name,panelName:t.panel,band:"Result "+t.name,threshold:t.study.centerline,yAxis:t.getYAxis(e),gapDisplayStyle:!0}).yAxis?n.yAxis.flipped:e.panels[t.panel].yAxis.flipped,o=.3,!t.highlight&&e.highlightedDraggable&&(o*=.3);for(var l=a.length-1;l>=0;l--)if(a[l]&&a[l][r])return i.Studies.displaySeriesAsLine(e,t,a),void((t.study.centerline||0===t.study.centerline)&&(t.outputs.Gain&&i.preparePeakValleyFill(e,i.extend(n,{direction:s?-1:1,color:i.Studies.determineColor(t.outputs.Gain),opacity:o})),t.outputs.Loss&&i.preparePeakValleyFill(e,i.extend(n,{direction:s?1:-1,color:i.Studies.determineColor(t.outputs.Loss),opacity:o}))))}else e.displayErrorAsWatermark(t.panel,e.translateIf(t.study.name)+": "+e.translateIf("Not Available"))},i.Studies.fetchAdditionalInstruments=function(e,t,a,r){var n,s,o,l,h,c;if(e.quoteDriver)for(n=e.panels[t.panel].chart,t.symbols=a,s=0;s<a.length;s++)o=l=a[s],"object"==H(l)?o=l.symbol:l={symbol:o},h={symbol:o,symbolObject:l,bucket:"study",studyName:t.name,chartName:n.name,action:"add-study"},i.extend(h,r),c=h.loadData,e.currentlyImporting&&(h.loadData=!1),t.series||(t.series={}),t.series[o]=e.addSeries(null,h,u),t.series[o].parameters.loadData=c;else console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");function u(){e.createDataSet(),e.draw()}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{"P Rel":{name:"Price Relative",initializeFN:i.Studies.initPriceRelative,seriesFN:i.Studies.displayVsComparisonSymbol,calculateFN:i.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!0}})):("priceRelative fe","ature requires first activating studies feature.",console.error("priceRelative feature requires first activating studies feature."))},_=function(e){var t;R.w01(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":H(_CIQ))?_CIQ:e.CIQ).Studies?("#","FF0","0","00","#F","F","000","0",t.Studies.calculateVWAP=function(e,i){var a,r,n,s,o,l,h,c,u,d,p,m,g,f,y,v=R;if("A","VWAP",a="AVWAP"==i.type,r=i.chart.scrubbed,!a&&t.ChartEngine.isDailyInterval(e.layout.interval))return"VW","AP"," ","is Intraday Only",void(i.error="VWAP is Intraday Only");if(n="hlc/3",a&&((n=i.inputs.Field)&&"field"!=n||(n=i.inputs.Field="hlc/3",e.changeOccurred("layout"))),s=null,o=0,l=0,v.e01(),h=0,c=!1,i.startFrom>1&&(o=r[i.startFrom-1]["_V "+i.name]||0,l=r[i.startFrom-1]["_VxP "+i.name]||0,h=r[i.startFrom-1]["_VxP2 "+i.name]||0),a){if((u=i.inputs["Anchor Date"].replace(/-/g,"")).search(/^\d{8}$/))return void(i.error="Invalid Anchor Date");(d=i.inputs["Anchor Time"].replace(/:/g,"")).search(/^\d{4,6}$/)||(u+=d),u=t.strToDateTime(u.replace(/\D/g,"")),!i.startFrom&&u>=r[0].DT&&(i.startFrom=e.tickFromDate(u,e.chart,null,!0)),i.inputs["Anchor Selector"]?t.Studies.initAnchorHandle(e,i):t.Studies.removeAnchorHandle(e,i)}for(var x=i.startFrom;x<r.length;x++)if("_S","D","VW","AP ",a||(null===s&&(s=t.Studies.getMarketOffset({stx:e,localQuoteDate:r[x].DT,shiftToDateBoundary:!0})),r[x-1]&&r[x-1].DT&&(p=new Date(new Date(+r[x].DT).setMilliseconds(r[x].DT.getMilliseconds()+s)),new Date(new Date(+r[x-1].DT).setMilliseconds(r[x-1].DT.getMilliseconds()+s)).getDate()!=p.getDate()&&e.chart.market.isMarketDate(p)&&(s=null,o=l=h=0))),m=r[x][n],g=r[x].Volume,a&&!g&&(g=1),o+=g,v.P4q(1),l+=v.q4q(g,m),v.P4q(54),h+=v.E4q(g,m,m),a||o){r[x]["_V "+i.name]=o,r[x]["_VxP "+i.name]=l,r[x]["_VxP2 "+i.name]=h,f=r[x]["_SDVWAP "+i.name]=Math.sqrt(Math.max(0,h/o-Math.pow(l/o,2))),v.Q4q(5),y=r[x]["VWAP "+i.name]=v.q4q(l,o);for(var b=1;b<=3;b++)"SD","VW","AP","SDVW","AP",v.Q4q(28),r[x]["SDVWAP"+b+"+ "+i.name]=v.E4q(f,y,b),v.P4q(80),r[x]["SDVWAP"+b+"- "+i.name]=v.E4q(f,y,b);c=!0}for(var S=1;S<=3;S++)"Di","s","pl","ay ",i.inputs["Display "+S+" Standard Deviation ("+S+")"]&&("SDVW","A","P",v.P4q(32),i.outputMap["SDVWAP"+S+"+ "+i.name]=v.q4q(")",S," Standard Deviation (",S),v.Q4q(32),i.outputMap["SDVWAP"+S+"- "+i.name]=v.q4q(")",S," Standard Deviation (",S));a||c||("VWAP Requires V","olume",i.error="VWAP Requires Volume")},t.Studies.initAnchoredVWAP=function(e,i,a,r,n,s){if("Anchor"," Time",!a["Anchor Date"]&&!a["Anchor Time"])for(var o=e.chart.dataSegment,l=0;o&&l<o.length;l++)if(o[l]){"HH",":","m","m:ss","A","ncho","r Time";var h=o[l].DT;a["Anchor Date"]=t.dateToStr(h,"YYYY-MM-dd"),a["Anchor Time"]=t.dateToStr(h,"HH:mm:ss");break}return t.Studies.initializeFN(e,i,a,r,n,s)},t.Studies.displayVWAP=function(e,i,a){var r,n,s,o,l,h,c;t.Studies.displaySeriesAsLine(e,i,a),r=i.inputs["Display 1 Standard Deviation (1)"],n=i.inputs["Display 2 Standard Deviation (2)"],s=i.inputs["Display 3 Standard Deviation (3)"],(r||n||s)&&i.inputs.Shading&&("V","W","AP"," ",o=e.panels[i.panel],l={opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:o.name!=i.chart.name,yAxis:i.getYAxis(e)},!i.highlight&&e.highlightedDraggable&&(l.opacity*=.3),h="VWAP "+i.name,c="VWAP "+i.name,r&&("SD","VW","AP1- ","SDVWAP","1","+ ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP1- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1- "+i.name]])},l)),h="SDVWAP1+ "+i.name,c="SDVWAP1- "+i.name),n&&("S","DVWA","P2","+ ","SD","VW","AP2","- ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP2- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2- "+i.name]])},l)),h="SDVWAP2+ "+i.name,c="SDVWAP2- "+i.name),s&&("SDVWAP","3","+"," ",t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3+ "+i.name,bottomBand:h,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3+ "+i.name]])},l)),t.prepareChannelFill(e,t.extend({panelName:i.panel,topBand:"SDVWAP3- "+i.name,bottomBand:c,color:t.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3- "+i.name]])},l)))),i.anchorHandle&&t.Studies.displayAnchorHandleAndLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,initializeFN:t.Studies.initAnchoredVWAP,removeFN:t.Studies.removeAnchorHandle,inputs:{Field:"field","Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1,"Anchor Selector":!0},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},VWAP:{name:"VWAP",overlay:!0,calculateFN:t.Studies.calculateVWAP,seriesFN:t.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2}}}})):console.error("vwap feature requires first activating studies feature.")},E=function(e){var t;R.w01(),(t="undefined"!==("undefined"==typeof _CIQ?"undefined":H(_CIQ))?_CIQ:e.CIQ).Studies?("Zi","g","Za","g",t.Studies.calculateZigZag=function(e,t){var i,a,r,n,s,o,l,h,c,u,d,p,m,g,f,y=R;function v(e,a){for(var r=e+1;r<a;r++)"R","esu","lt"," ","ShadowR","esult ",i[r]["ShadowResult "+t.name]=(i[a]["Result "+t.name]-i[e]["Result "+t.name])*(r-e)/(a-e)+i[e]["Result "+t.name],delete i[r]["Result "+t.name]}if("_sta","t","e"," ","Clos","e","L","o","w","Result"," ","Distance(%",")",(i=t.chart.scrubbed)&&i.length){a=t.highLowChart,r=null,n=null,s=t.inputs["Distance(%)"],o=0,l=0,h=0,c=null,y.w01(),u=null,d=0;for(var x=Math.min(i.length-1,t.startFrom);x>=0;x--)if(d=x,i[x]["_state "+t.name]){r=(p=i[x]["_state "+t.name])[0],n=p[1],o=p[2],l=p[3],h=p[4],c=p[5],y.P4q(8),u=p[y.E4q("6",0)];break}for(var b=d;b<i.length;b++){if("C","lo","se",m=i[b][a?"High":"Close"],g=i[b][a?"Low":"Close"],null===n||n<m)if(n=m,o<0&&(r=g),y.Q4q(81),c=y.E4q("100",1,2147483647,s,n),o>-1){if(null!==u&&n>u){i[l]["Result "+t.name]=i[l][a?"Low":"Close"],v(h,l),o=-1,r=g,h=l,l=b;continue}}else l=b;if(null===r||r>g)if(r=g,o>0&&(n=m),y.Q4q(82),u=y.E4q("100",s,r,1,0),o<1){if(null!==c&&r<c){i[l]["Result "+t.name]=i[l][a?"High":"Close"],v(h,l),o=1,n=m,h=l,l=b;continue}}else l=b}for(i[l]["Result "+t.name]=i[l][a?1==o?"Low":"High":"Close"],i[l]["_state "+t.name]=[r,n,o,l,h,c,u],v(h,l),f=i.length-1;f>l;){if(i[f].Close||0===i[f].Close){"L","o","w",i[f]["Result "+t.name]=i[f][a?1==o?"High":"Low":"Close"];break}f--}v(l,f)}},t.Studies.displayZigZag=function(e,i,a){var r,n,s,o,l;R.w01(),r=e.chart.highLowBars,i.highLowChart!=r&&(i.highLowChart=r,i.startFrom=0,i.study.calculateFN(e,i)),n=e.chart;for(var h=0;h<a.length;h++)(s=a[h])&&(s["_shadowCopy "+i.name]&&(delete s["Result "+i.name],delete s["_shadowCopy "+i.name]),s["Result "+i.name]||("Res","ult"," ",s.transform&&delete s.transform["Result "+i.name]));o=a[0],l=a[a.length-1],o&&o["ShadowResult "+i.name]&&("_","s","hadowCopy ","Sh","adowResu","lt ","Res","ul","t"," ",o["Result "+i.name]=o["ShadowResult "+i.name],o.transform&&(o.transform["Result "+i.name]=n.transformFunc(e,n,o["ShadowResult "+i.name])),o["_shadowCopy "+i.name]=1),l&&l["ShadowResult "+i.name]&&("_sh","ado","wCopy ","Re","sult"," ","R","es","u","lt ",l["Result "+i.name]=l["ShadowResult "+i.name],l.transform&&(l.transform["Result "+i.name]=n.transformFunc(e,n,l["ShadowResult "+i.name])),l["_shadowCopy "+i.name]=1),t.Studies.displaySeriesAsLine(e,i,a)},t.Studies.studyLibrary=t.extend(t.Studies.studyLibrary,{ZigZag:{name:"ZigZag",overlay:!0,seriesFN:t.Studies.displayZigZag,calculateFN:t.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:.1}}}})):console.error("zigzag feature requires first activating studies feature.")},L={CIQ:a.c,SplinePlotter:a.d,timezoneJS:a.e,$$:a.a,$$$:a.b},R.w01(),"undefined"!==("undefined"==typeof __TREE_SHAKE__?"undefined":H(__TREE_SHAKE__))&&__TREE_SHAKE__||(L.CIQ||a.c).activateImports(s,o,l,h,c,u,d,p,m,g,f,y,v,x,b,S,C,k,w,D,A,T,M,P,F,_,E,null)}).call(this,i(32))}}]);
//# sourceMappingURL=chartiq-70fb27.smartcharts.js.map